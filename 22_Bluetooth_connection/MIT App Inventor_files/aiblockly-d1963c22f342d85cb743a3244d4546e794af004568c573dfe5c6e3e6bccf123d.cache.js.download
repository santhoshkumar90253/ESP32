/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var COMPILED=!0,goog=goog||{};goog.global=this||self;goog.exportPath_=function(a,d,f,h){a=a.split(".");h=h||goog.global;a[0]in h||"undefined"==typeof h.execScript||h.execScript("var "+a[0]);for(var l;a.length&&(l=a.shift());)if(a.length||void 0===d)h=h[l]&&h[l]!==Object.prototype[l]?h[l]:h[l]={};else if(!f&&goog.isObject(d)&&goog.isObject(h[l]))for(var m in d)d.hasOwnProperty(m)&&(h[l][m]=d[m]);else h[l]=d};
goog.define=function(a,d){if(!COMPILED){var f=goog.global.CLOSURE_UNCOMPILED_DEFINES,h=goog.global.CLOSURE_DEFINES;f&&void 0===f.nodeType&&Object.prototype.hasOwnProperty.call(f,a)?d=f[a]:h&&void 0===h.nodeType&&Object.prototype.hasOwnProperty.call(h,a)&&(d=h[a])}return d};goog.FEATURESET_YEAR=2012;goog.DEBUG=!0;goog.LOCALE="en";goog.getLocale=function(){return goog.LOCALE};goog.TRUSTED_SITE=!0;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;
goog.provide=function(a){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,d,f){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var h=a;(h=h.substring(0,h.lastIndexOf(".")))&&!goog.getObjectByName(h);)goog.implicitNamespaces_[h]=!0}goog.exportPath_(a,d,f)};goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/;
goog.getScriptNonce_=function(a){a=(a||goog.global).document;return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(a)?a:""};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if("string"!==typeof a||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");
goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};goog.module.getInternal_=function(a){if(!COMPILED){if(a in goog.loadedModules_)return goog.loadedModules_[a].exports;if(!goog.implicitNamespaces_[a])return a=goog.getObjectByName(a),null!=a?a:null}return null};goog.ModuleType={ES6:"es6",GOOG:"goog"};goog.moduleLoaderState_=null;
goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()};goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG};goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var a=goog.global.$jscomp;return a?"function"!=typeof a.getCurrentModulePath?!1:!!a.getCurrentModulePath():!1};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.declareModuleId=function(a){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(a in goog.loadedModules_)throw Error('Module with namespace "'+a+'" already exists.');}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=a;else{var d=goog.global.$jscomp;if(!d||"function"!=typeof d.getCurrentModulePath)throw Error('Module with namespace "'+
a+'" has been loaded incorrectly.');d=d.require(d.getCurrentModulePath());goog.loadedModules_[a]={exports:d,type:goog.ModuleType.ES6,moduleId:a}}};goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&null!=goog.getObjectByName(a)},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(a,d){a=a.split(".");d=d||goog.global;for(var f=0;f<a.length;f++)if(d=d[a[f]],null==d)return null;return d};goog.addDependency=function(a,d,f,h){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(a,d,f,h)};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};
goog.require=function(a){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(a);if(goog.isProvided_(a)){if(goog.isInModuleLoader_())return goog.module.getInternal_(a)}else if(goog.ENABLE_DEBUG_LOADER){var d=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(a)}finally{goog.moduleLoaderState_=d}}return null}};goog.requireType=function(a){return{}};goog.basePath="";goog.nullFunction=function(){};
goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.instance_=void 0;a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.TRANSPILE="detect";
goog.ASSUME_ES_MODULES_TRANSPILED=!1;goog.TRANSPILE_TO_LANGUAGE="";goog.TRANSPILER="transpile.js";goog.TRUSTED_TYPES_POLICY_NAME="goog";goog.hasBadLetScoping=null;
goog.loadModule=function(a){var d=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};var f={},h=f;if("function"===typeof a)h=a.call(void 0,h);else if("string"===typeof a)h=goog.loadModuleFromSource_.call(void 0,h,a);else throw Error("Invalid module definition");var l=goog.moduleLoaderState_.moduleName;if("string"===typeof l&&l)goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(l,h,f!==h):goog.SEAL_MODULE_EXPORTS&&
Object.seal&&"object"==typeof h&&null!=h&&Object.seal(h),goog.loadedModules_[l]={exports:h,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};else throw Error('Invalid module name "'+l+'"');}finally{goog.moduleLoaderState_=d}};goog.loadModuleFromSource_=function(a,d){eval(goog.CLOSURE_EVAL_PREFILTER_.createScript(d));return a};goog.normalizePath_=function(a){a=a.split("/");for(var d=0;d<a.length;)"."==a[d]?a.splice(d,1):d&&".."==a[d]&&a[d-1]&&".."!=a[d-1]?a.splice(--d,2):d++;return a.join("/")};
goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);try{var d=new goog.global.XMLHttpRequest;d.open("get",a,!1);d.send();return 0==d.status||200==d.status?d.responseText:null}catch(f){return null}};
goog.transpile_=function(a,d,f){var h=goog.global.$jscomp;h||(goog.global.$jscomp=h={});var l=h.transpile;if(!l){var m=goog.basePath+goog.TRANSPILER,p=goog.loadFileSync_(m);if(p){(function(){(0,eval)(p+"\n//# sourceURL="+m)}).call(goog.global);if(goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=
goog.global.$gwtExport.$jscomp.transpile;h=goog.global.$jscomp;l=h.transpile}}l||(l=h.transpile=function(q,u){goog.logToConsole_(u+" requires transpilation but no transpiler was found.");return q});return l(a,d,f)};goog.typeOf=function(a){var d=typeof a;return"object"!=d?d:a?Array.isArray(a)?"array":d:"null"};goog.isArrayLike=function(a){var d=goog.typeOf(a);return"array"==d||"object"==d&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};
goog.isObject=function(a){var d=typeof a;return"object"==d&&null!=a||"function"==d};goog.getUid=function(a){return Object.prototype.hasOwnProperty.call(a,goog.UID_PROPERTY_)&&a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(d){}};goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);
goog.uidCounter_=0;goog.cloneObject=function(a){var d=goog.typeOf(a);if("object"==d||"array"==d){if("function"===typeof a.clone)return a.clone();if("undefined"!==typeof Map&&a instanceof Map)return new Map(a);if("undefined"!==typeof Set&&a instanceof Set)return new Set(a);d="array"==d?[]:{};for(var f in a)d[f]=goog.cloneObject(a[f]);return d}return a};goog.bindNative_=function(a,d,f){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,d,f){if(!a)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(l,h);return a.apply(d,l)}}return function(){return a.apply(d,arguments)}};goog.bind=function(a,d,f){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var h=f.slice();h.push.apply(h,arguments);return a.apply(this,h)}};goog.mixin=function(a,d){for(var f in d)a[f]=d[f]};goog.now=function(){return Date.now()};goog.globalEval=function(a){(0,eval)(a)};
goog.getCssName=function(a,d){if("."==String(a).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+a);var f=function(l){return goog.cssNameMapping_[l]||l},h=function(l){l=l.split("-");for(var m=[],p=0;p<l.length;p++)m.push(f(l[p]));return m.join("-")};h=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?f:h:function(l){return l};a=d?a+"-"+h(d):h(a);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(a):a};
goog.setCssNameMapping=function(a,d){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=d};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,d,f){f&&f.html&&(a=a.replace(/</g,"&lt;"));f&&f.unescapeHtmlEntities&&(a=a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&"));d&&(a=a.replace(/\{\$([^}]+)}/g,function(h,l){return null!=d&&l in d?d[l]:h}));return a};
goog.getMsgWithFallback=function(a,d){return a};goog.exportSymbol=function(a,d,f){goog.exportPath_(a,d,!0,f)};goog.exportProperty=function(a,d,f){a[d]=f};goog.inherits=function(a,d){function f(){}f.prototype=d.prototype;a.superClass_=d.prototype;a.prototype=new f;a.prototype.constructor=a;a.base=function(h,l,m){for(var p=Array(arguments.length-2),q=2;q<arguments.length;q++)p[q-2]=arguments[q];return d.prototype[l].apply(h,p)}};
goog.scope=function(a){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);
goog.defineClass=function(a,d){var f=d.constructor,h=d.statics;f&&f!=Object.prototype.constructor||(f=function(){throw Error("cannot instantiate an interface (no constructor defined).");});f=goog.defineClass.createSealingConstructor_(f,a);a&&goog.inherits(f,a);delete d.constructor;delete d.statics;goog.defineClass.applyProperties_(f.prototype,d);null!=h&&(h instanceof Function?h(f):goog.defineClass.applyProperties_(f,h));return f};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(a,d){return goog.defineClass.SEAL_CLASS_INSTANCES?function(){var f=a.apply(this,arguments)||this;f[goog.UID_PROPERTY_]=f[goog.UID_PROPERTY_];return f}:a};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(a,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(a[f]=d[f]);for(var h=0;h<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;h++)f=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[h],Object.prototype.hasOwnProperty.call(d,f)&&(a[f]=d[f])};goog.identity_=function(a){return a};
goog.createTrustedTypesPolicy=function(a){var d=null,f=goog.global.trustedTypes;if(!f||!f.createPolicy)return d;try{d=f.createPolicy(a,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_})}catch(h){goog.logToConsole_(h.message)}return d};
!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.isEdge_=function(){return!!(goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"").match(/Edge\/(\d+)(\.\d)*/i)},goog.inHtmlDocument_=function(){var a=goog.global.document;return null!=a&&"write"in a},goog.isDocumentLoading_=function(){var a=goog.global.document;return a.attachEvent?"complete"!=a.readyState:"loading"==a.readyState},goog.findBasePath_=function(){if(void 0!=goog.global.CLOSURE_BASE_PATH&&"string"===typeof goog.global.CLOSURE_BASE_PATH)goog.basePath=
goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var a=goog.global.document,d=a.currentScript;a=d?[d]:a.getElementsByTagName("SCRIPT");for(d=a.length-1;0<=d;--d){var f=a[d].src,h=f.lastIndexOf("?");h=-1==h?f.length:h;if("base.js"==f.substr(h-7,7)){goog.basePath=f.substr(0,h-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null;this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(m,
p){l?h[m]=!0:p()?(f=m,h[m]=!1):l=h[m]=!0}function d(m){try{return!!eval(goog.CLOSURE_EVAL_PREFILTER_.createScript(m))}catch(p){return!1}}var f="es3",h={es3:!1},l=!1;a("es5",function(){return d("[1,].length==1")});a("es6",function(){return goog.isEdge_()?!1:d('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')});
a("es7",function(){return d("2**3==8")});a("es8",function(){return d("async()=>1,1")});a("es9",function(){return d("({...rest}={}),1")});a("es_2019",function(){return d('let r;try{r="â€©"}catch{};r')});a("es_2020",function(){return d("null?.x??1")});a("es_next",function(){return!1});return{target:f,map:h}},goog.Transpiler.prototype.needsTranspile=function(a,d){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var f=this.createRequiresTranspilation_();
this.requiresTranspilation_=f.map;this.transpilationTarget_=this.transpilationTarget_||f.target}if(a in this.requiresTranspilation_)return this.requiresTranspilation_[a]?!0:!goog.inHtmlDocument_()||"es6"!=d||"noModule"in goog.global.document.createElement("script")?!1:!0;throw Error("Unknown language mode: "+a);},goog.Transpiler.prototype.transpile=function(a,d){return goog.transpile_(a,d,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(a){return a.replace(/<\/(SCRIPT)/ig,
"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={};this.idToPath_={};this.written_={};this.loadingDeps_=[];this.depsToLoad_=[];this.paused_=!1;this.factory_=new goog.DependencyFactory(goog.transpiler_);this.deferredCallbacks_={};this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(a,d){function f(){h&&(goog.global.setTimeout(h,0),h=null)}var h=d;if(a.length){d=[];for(var l=0;l<a.length;l++){var m=this.getPathFromDeps_(a[l]);if(!m)throw Error("Unregonized namespace: "+
a[l]);d.push(this.dependencies_[m])}m=goog.require;var p=0;for(l=0;l<a.length;l++)m(a[l]),d[l].onLoad(function(){++p==a.length&&f()})}else f()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1));this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(a,d){(a=this.getPathFromDeps_(a))&&(d||this.areDepsLoaded_(this.dependencies_[a].requires))&&(d=this.deferredCallbacks_[a])&&
(delete this.deferredCallbacks_[a],d())},goog.DebugLoader_.prototype.setDependencyFactory=function(a){this.factory_=a},goog.DebugLoader_.prototype.load_=function(a){if(this.getPathFromDeps_(a)){var d=this,f=[],h=function(l){var m=d.getPathFromDeps_(l);if(!m)throw Error("Bad dependency path or symbol: "+l);if(!d.written_[m]){d.written_[m]=!0;l=d.dependencies_[m];for(m=0;m<l.requires.length;m++)goog.isProvided_(l.requires[m])||h(l.requires[m]);f.push(l)}};h(a);a=!!this.depsToLoad_.length;this.depsToLoad_=
this.depsToLoad_.concat(f);this.paused_||a||this.loadDeps_()}else goog.logToConsole_("goog.require could not find: "+a)},goog.DebugLoader_.prototype.loadDeps_=function(){for(var a=this,d=this.paused_;this.depsToLoad_.length&&!d;)(function(){var f=!1,h=a.depsToLoad_.shift(),l=!1;a.loading_(h);var m={pause:function(){if(f)throw Error("Cannot call pause after the call to load.");d=!0},resume:function(){f?a.resume_():d=!1},loaded:function(){if(l)throw Error("Double call to loaded.");l=!0;a.loaded_(h)},
pending:function(){for(var p=[],q=0;q<a.loadingDeps_.length;q++)p.push(a.loadingDeps_[q]);return p},setModuleState:function(p){goog.moduleLoaderState_={type:p,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(p,q,u){u&&(goog.loadedModules_[u]={exports:q,type:goog.ModuleType.ES6,moduleId:u||""})},registerGoogModuleExports:function(p,q){goog.loadedModules_[p]={exports:q,type:goog.ModuleType.GOOG,moduleId:p}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(p){if(f)throw Error("Cannot register with defer after the call to load.");
a.defer_(h,p)},areDepsLoaded:function(){return a.areDepsLoaded_(h.requires)}};try{h.load(m)}finally{f=!0}})();d&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(a){this.loadingDeps_.push(a)},goog.DebugLoader_.prototype.loaded_=function(a){for(var d=0;d<this.loadingDeps_.length;d++)if(this.loadingDeps_[d]==a){this.loadingDeps_.splice(d,
1);break}for(d=0;d<this.deferredQueue_.length;d++)if(this.deferredQueue_[d]==a.path){this.deferredQueue_.splice(d,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);a.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(a){for(var d=0;d<a.length;d++){var f=this.getPathFromDeps_(a[d]);if(!f||!(f in this.deferredCallbacks_||goog.isProvided_(a[d])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=
function(a){return a in this.idToPath_?this.idToPath_[a]:a in this.dependencies_?a:null},goog.DebugLoader_.prototype.defer_=function(a,d){this.deferredCallbacks_[a.path]=d;this.deferredQueue_.push(a.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(a,
d,f){},goog.LoadController.prototype.setModuleState=function(a){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(a){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(a,d,f,h,l){this.path=a;this.relativePath=d;this.provides=f;this.requires=h;this.loadFlags=l;this.loaded_=!1;this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var a=this.path,d=a.indexOf("://");0<=d&&(a=a.substring(d+3),d=
a.indexOf("/"),0<=d&&(a=a.substring(d+1)));return a},goog.Dependency.prototype.onLoad=function(a){this.loaded_?a():this.loadCallbacks_.push(a)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var a=this.loadCallbacks_;this.loadCallbacks_=[];for(var d=0;d<a.length;d++)a[d]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(a){var d=Math.random().toString(32);goog.Dependency.callbackMap_[d]=a;return d},goog.Dependency.unregisterCallback_=
function(a){delete goog.Dependency.callbackMap_[a]},goog.Dependency.callback_=function(a,d){if(a in goog.Dependency.callbackMap_){for(var f=goog.Dependency.callbackMap_[a],h=[],l=1;l<arguments.length;l++)h.push(arguments[l]);f.apply(void 0,h)}else throw Error("Callback key "+a+" does not exist (was base.js loaded more than once?).");},goog.Dependency.prototype.load=function(a){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var d=
goog.global.document;if("complete"==d.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path)){a.loaded();return}throw Error('Cannot write "'+this.path+'" after document load');}var f=goog.getScriptNonce_();if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var h=function(q){q.readyState&&"complete"!=q.readyState?q.onload=h:(goog.Dependency.unregisterCallback_(l),a.loaded())};var l=goog.Dependency.registerCallback_(h);f=f?' nonce="'+f+'"':"";
var m='<script src="'+this.path+'"'+f+(goog.Dependency.defer_?" defer":"")+' id="script-'+l+'">\x3c/script>';m+="<script"+f+">";m=goog.Dependency.defer_?m+("document.getElementById('script-"+l+"').onload = function() {\n  goog.Dependency.callback_('"+l+"', this);\n};\n"):m+("goog.Dependency.callback_('"+l+"', document.getElementById('script-"+l+"'));");m+="\x3c/script>";d.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(m):m)}else{var p=d.createElement("script");p.defer=goog.Dependency.defer_;
p.async=!1;f&&(p.nonce=f);p.onload=function(){p.onload=null;a.loaded()};p.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path;d.head.appendChild(p)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),a.loaded()):a.pause()},goog.Es6ModuleDependency=function(a,d,f,h,l){goog.Dependency.call(this,
a,d,f,h,l)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(a){function d(y,C){var K="",X=goog.getScriptNonce_();X&&(K=' nonce="'+X+'"');y=C?'<script type="module" crossorigin'+K+">"+C+"\x3c/script>":'<script type="module" crossorigin src="'+y+'"'+K+">\x3c/script>";h.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(y):y)}function f(y,C){var K=h.createElement("script");K.defer=!0;K.async=!1;K.type="module";K.setAttribute("crossorigin",
!0);var X=goog.getScriptNonce_();X&&(K.nonce=X);C?K.text=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(C):C:K.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(y):y;h.head.appendChild(K)}if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var h=goog.global.document,l=this;if(goog.isDocumentLoading_()){var m=d;goog.Dependency.defer_=!0}else m=f;var p=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(p);
a.setModuleState(goog.ModuleType.ES6)});m(void 0,'goog.Dependency.callback_("'+p+'")');m(this.path,void 0);var q=goog.Dependency.registerCallback_(function(y){goog.Dependency.unregisterCallback_(q);a.registerEs6ModuleExports(l.path,y,goog.moduleLoaderState_.moduleName)});m(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+q+'", m)');var u=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(u);a.clearModuleState();a.loaded()});m(void 0,'goog.Dependency.callback_("'+
u+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),a.pause()},goog.TransformedDependency=function(a,d,f,h,l){goog.Dependency.call(this,a,d,f,h,l);this.contents_=null;this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(a){function d(){l.contents_=goog.loadFileSync_(l.path);l.contents_&&(l.contents_=
l.transform(l.contents_),l.contents_&&(l.contents_+="\n//# sourceURL="+l.path))}function f(){l.lazyFetch_&&d();if(l.contents_){m&&a.setModuleState(goog.ModuleType.ES6);try{var y=l.contents_;l.contents_=null;goog.globalEval(goog.CLOSURE_EVAL_PREFILTER_.createScript(y));if(m)var C=goog.moduleLoaderState_.moduleName}finally{m&&a.clearModuleState()}m&&goog.global.$jscomp.require.ensure([l.getPathName()],function(){a.registerEs6ModuleExports(l.path,goog.global.$jscomp.require(l.getPathName()),C)});a.loaded()}}
function h(){var y=goog.global.document,C=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(C);f()}),K=goog.getScriptNonce_();K="<script"+(K?' nonce="'+K+'"':"")+">"+goog.protectScriptTag_('goog.Dependency.callback_("'+C+'");')+"\x3c/script>";y.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(K):K)}var l=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)d(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,a.loaded()):
a.pause();else{var m=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||d();var p=1<a.pending().length;if(goog.Dependency.defer_&&(p||goog.isDocumentLoading_()))a.defer(function(){f()});else{var q=goog.global.document;p=goog.inHtmlDocument_()&&("ActiveXObject"in goog.global||goog.isEdge_());if(m&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!p){goog.Dependency.defer_=!0;a.pause();var u=q.onreadystatechange;q.onreadystatechange=function(){"interactive"==q.readyState&&(q.onreadystatechange=
u,f(),a.resume());"function"===typeof u&&u.apply(void 0,arguments)}}else goog.inHtmlDocument_()&&goog.isDocumentLoading_()?h():f()}}},goog.TransformedDependency.prototype.transform=function(a){},goog.TranspiledDependency=function(a,d,f,h,l,m){goog.TransformedDependency.call(this,a,d,f,h,l);this.transpiler=m},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(a){return this.transpiler.transpile(a,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=
function(a,d,f,h,l){goog.TransformedDependency.call(this,a,d,f,h,l)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(a){return a},goog.GoogModuleDependency=function(a,d,f,h,l,m,p){goog.TransformedDependency.call(this,a,d,f,h,l);this.needsTranspile_=m;this.transpiler_=p},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(a){this.needsTranspile_&&
(a=this.transpiler_.transpile(a,this.getPathName()));return goog.LOAD_MODULE_USING_EVAL&&void 0!==goog.global.JSON?"goog.loadModule("+goog.global.JSON.stringify(a+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+a+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.prototype.addDependency=function(a,d,f,h){d=d||[];a=a.replace(/\\/g,"/");var l=goog.normalizePath_(goog.basePath+a);h&&"boolean"!==typeof h||(h=h?{module:goog.ModuleType.GOOG}:
{});f=this.factory_.createDependency(l,a,d,f,h,goog.transpiler_.needsTranspile(h.lang||"es3",h.module));this.dependencies_[l]=f;for(f=0;f<d.length;f++)this.idToPath_[d[f]]=l;this.idToPath_[a]=l},goog.DependencyFactory=function(a){this.transpiler=a},goog.DependencyFactory.prototype.createDependency=function(a,d,f,h,l,m){return l.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(a,d,f,h,l,m,this.transpiler):m?new goog.TranspiledDependency(a,d,f,h,l,this.transpiler):l.module==goog.ModuleType.ES6?
"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(a,d,f,h,l):new goog.Es6ModuleDependency(a,d,f,h,l):new goog.Dependency(a,d,f,h,l)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(a){goog.debugLoader_.setDependencyFactory(a)},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):
null,goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(a,d){goog.debugLoader_.bootstrap(a,d)});if(!COMPILED){var isChrome87=!1;try{isChrome87=eval(goog.global.trustedTypes.emptyScript)!==goog.global.trustedTypes.emptyScript}catch(a){}goog.CLOSURE_EVAL_PREFILTER_=goog.global.trustedTypes&&isChrome87&&goog.createTrustedTypesPolicy("goog#base#devonly#eval")||{createScript:goog.identity_}};(function(a,d){"function"===typeof define&&define.amd?define([],d):"object"===typeof exports?module.exports=d():a.Blockly=d()})(this,function(){var a={};var d=function(b,e,g,k){if(!(b instanceof U)&&"string"!==typeof b||""===`${b}`.trim())throw Error('Invalid type "'+b+'". The type must be a non-empty string or a Blockly.registry.Type.');b=`${b}`.toLowerCase();if("string"!==typeof e||""===e.trim())throw Error('Invalid name "'+e+'". The name must be a non-empty string.');const n=e.toLowerCase();if(!g)throw Error("Can not register a null value");
let r=kc[b],w=Ne[b];r||(r=kc[b]=Object.create(null),w=Ne[b]=Object.create(null));f(b,g);if(!k&&r[n])throw Error('Name "'+n+'" with type "'+b+'" already registered.');r[n]=g;w[n]=e};var f=function(b,e){switch(b){case String(U.FIELD):if("function"!==typeof e.fromJson)throw Error('Type "'+b+'" must have a fromJson function');}};var h=function(b,e){b=`${b}`.toLowerCase();e=e.toLowerCase();const g=kc[b];g&&g[e]?(delete kc[b][e],delete Ne[b][e]):console.warn("Unable to unregister ["+e+"]["+b+"] from the registry.")};
var l=function(b,e,g){b=`${b}`.toLowerCase();e=e.toLowerCase();const k=kc[b];if(!k||!k[e]){e="Unable to find ["+e+"]["+b+"] in the registry.";if(g)throw Error(e+" You must require or register a "+b+" plugin.");console.warn(e);return null}return k[e]};var m=function(b,e){b=`${b}`.toLowerCase();e=e.toLowerCase();return(b=kc[b])?!!b[e]:!1};var p=function(b,e,g){return l(b,e,g)};var q=function(b,e,g){return l(b,e,g)};var u=function(b,e,g){b=`${b}`.toLowerCase();var k=kc[b];if(!k){k=`Unable to find [${b}] in the registry.`;
if(g)throw Error(`${k} You must require or register a ${b} plugin.`);console.warn(k);return null}if(!e)return k;b=Ne[b];g=Object.create(null);for(const n of Object.keys(k))g[b[n]]=k[n];return g};var y=function(b,e,g){e=e.plugins[String(b)]||Gb;return"function"===typeof e?e:p(b,e,g)};var C=function(b){return Ld[b]||null};var K=function(){const b=[];for(const e in Ld)b.push(Ld[e]);return b};var X=function(b){Ld[b.id]=b};var M=function(b){delete Ld[b.id]};var G=function(){return bi};var J=function(b){bi=
b};var z=function(){return ci};var B=function(b){ci=b};var E=function(){return di};var O=function(b){di=b};var W=function(b){for(;b.options.parentWorkspace;)b=b.options.parentWorkspace;const e=b.getParentSvg(),g=b.getCachedParentSvgSize();var k=e.parentElement;if(k instanceof HTMLElement){var n=k.offsetWidth;k=k.offsetHeight;g.width!==n&&(e.setAttribute("width",n+"px"),b.setCachedParentSvgSize(n,null));g.height!==k&&(e.setAttribute("height",k+"px"),b.setCachedParentSvgSize(null,k));b.resize()}};var Y=
function(b,e){const g=Object.create(null),k=b.getDescendants(!0);e&&(b=b.getNextBlock())&&(b=k.indexOf(b),k.splice(b,k.length-b));for(let n=0,r;r=k[n];n++)g[r.type]?g[r.type]++:g[r.type]=1;return g};var na=function(b){return function(){this.jsonInit(b)}};var Q=function(b){ei.defineBlocksWithJsonArrayInternal(b)};a.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(b){const e={};for(let g=0;g<b.length;g++){const k=b[g];if(!k){console.warn(`Block definition #${g} in JSON array is ${k}. Skipping`);
continue}const n=k.type;n?e[n]={init:na(k)}:console.warn(`Block definition #${g} in JSON array is missing a type attribute. `+"Skipping.")}return e};a.defineBlocks$$module$build$src$core$common=function(b){for(const e of Object.keys(b)){const g=b[e];e in cb&&console.warn(`Block definiton "${e}" overwrites previous definition.`);cb[e]=g}};var aa=function(){return"blockly-"+(nm++).toString(36)};var R=function(){return fi.genUid()};var S=function(b){Md=b};var da=function(){return Md};var ba=function(b){gi.fireInternal(b)};
var Ea=function(){var b=oa(ad,!0);ad.length=0;for(let g=0,k;k=b[g];g++)if(k.workspaceId){var e=C(k.workspaceId);e&&e.fireChangeListener(k)}b=new Set(b.map(g=>g.workspaceId));for(const g of b){if(!g)continue;b=C(g);if(!b)continue;b=b.getUndoStack();let k=void 0;for(e=b.length;0<e;e--){const n=b[e-1];if(""===n.group)break;else if(void 0===k)k=n.group;else if(n.group!==k)break}k&&e!=b.length-1&&(e=b.splice(e,b.length-e),e=oa(e,!0),b.push(...e))}};var oa=function(b,e){b=b.slice();e||b.reverse();const g=
[],k=Object.create(null);for(let w=0,x;x=b[w];w++)if(!x.isNull()){var n=[x.isUiEvent?hi:x.type,x.blockId,x.workspaceId].join(" "),r=k[n];const P=r?r.event:null;if(!r)k[n]={event:x,index:w},g.push(x);else if(x.type===a.MOVE$$module$build$src$core$events$utils&&r.index===w-1)n=x,P.newParentId=n.newParentId,P.newInputName=n.newInputName,P.newCoordinate=n.newCoordinate,n.reason&&(P.reason?(n=new Set(n.reason.concat(P.reason)),P.reason=Array.from(n)):P.reason=n.reason),r.index=w;else if(x.type===a.CHANGE$$module$build$src$core$events$utils&&
x.element===P.element&&x.name===P.name)P.newValue=x.newValue;else if(x.type===cd)r=x,P.viewTop=r.viewTop,P.viewLeft=r.viewLeft,P.scale=r.scale,P.oldScale=r.oldScale;else if(x.type!==zc||P.type!==lc)k[n]={event:x,index:w},g.push(x)}b=g.filter(function(w){return!w.isNull()});e||b.reverse();for(let w=1,x;x=b[w];w++)x.type===a.CHANGE$$module$build$src$core$events$utils&&"mutation"===x.element&&b.unshift(b.splice(w,1)[0]);return b};var sa=function(){for(let b=0,e;e=ad[b];b++)e.recordUndo=!1};a.disable$$module$build$src$core$events$utils=
function(){If++};a.enable$$module$build$src$core$events$utils=function(){If--};var wa=function(){return 0===If};a.getGroup$$module$build$src$core$events$utils=function(){return ii};a.setGroup$$module$build$src$core$events$utils=function(b){gi.setGroupInternal(b)};var hb=function(b){const e=[];b=b.getDescendants(!1);for(let g=0,k;k=b[g];g++)e[g]=k.id;return e};var ja=function(b){const e=p(U.EVENT,b);if(!e)throw Error(`Event type ${b} not found in registry.`);return e};var Nd=function(b,e){xb();Oe=
setTimeout(function(){e&&e.handleRightClick(b)},om)};var xb=function(){Oe&&(clearTimeout(Oe),Oe=0)};var t=function(){Pe=null};var v=function(b){return!b.type.startsWith("pointer")||b instanceof PointerEvent&&D(b)};var A=function(b){return`${b.pointerId}`};var D=function(b){const e=A(b);return Pe?Pe===e:"pointerdown"===b.type?(Pe=e,!0):!1};var H=function(b,e,g,k,n){function r(x){if(n||v(x))g?k.call(g,x):k(x)}const w=[];if(e in Ac)for(let x=0;x<Ac[e].length;x++){const P=Ac[e][x];b.addEventListener(P,
r,!1);w.push([b,P,r])}else b.addEventListener(e,r,!1),w.push([b,e,r]);return w};var V=function(b,e,g,k){function n(w){g?k.call(g,w):k(w)}const r=[];if(e in Ac)for(let w=0;w<Ac[e].length;w++){const x=Ac[e][w];b.addEventListener(x,n,!1);r.push([b,x,n])}else b.addEventListener(e,n,!1),r.push([b,e,n]);return r};var ca=function(b){const e=b[b.length-1][2];for(;b.length;){const [g,k,n]=b.pop();g.removeEventListener(k,n,!1)}return e};var ta=function(b){if(b.target instanceof HTMLElement){if(b.target.isContentEditable||
"true"===b.target.getAttribute("data-is-text-input"))return!0;if(b.target instanceof HTMLInputElement)return b=b.target,"text"===b.type||"number"===b.type||"email"===b.type||"password"===b.type||"search"===b.type||"tel"===b.type||"url"===b.type;if(b.target instanceof HTMLTextAreaElement)return!0}return!1};var Fa=function(b){return b.ctrlKey&&Jf?!0:2===b.button};var db=function(b,e,g){const k=e.createSVGPoint();k.x=b.clientX;k.y=b.clientY;g||=e.getScreenCTM().inverse();return k.matrixTransform(g)};
var Qe=function(b){switch(b.deltaMode){default:return{x:b.deltaX,y:b.deltaY};case 1:return{x:b.deltaX*ji,y:b.deltaY*ji};case 2:return{x:b.deltaX*ki,y:b.deltaY*ki}}};var ib=function(b,e){e=b.indexOf(e);if(-1===e)return!1;b.splice(e,1);return!0};var yb=function(b){if(Kf)throw Error("CSS already injected");Lf+="\n"+b};var li=function(b,e){Kf||(Kf=!0,b&&(b=e.replace(/[\\/]$/,""),e=Lf.replace(/<<<PATH>>>/g,b),Lf="",b=document.createElement("style"),b.id="blockly-common-style",e=document.createTextNode(e),
b.appendChild(e),document.head.insertBefore(b,document.head.firstChild)))};var Na=function(b,e,g,k){b=b+" was deprecated in "+e+" and will be deleted in "+g+".";k&&(b+="\nUse "+k+" instead.");mi.has(b)||(mi.add(b),console.warn(b))};var N=function(b,e,g){b=document.createElementNS(Od,`${b}`);for(const k in e)b.setAttribute(k,`${e[k]}`);g&&g.appendChild(b);return b};var la=function(b,e){e=e.split(" ");if(e.every(g=>b.classList.contains(g)))return!1;b.classList.add(...e);return!0};var Mf=function(b,
e){b.classList.remove(...e.split(" "))};var za=function(b,e){e=e.split(" ");if(e.every(g=>!b.classList.contains(g)))return!1;b.classList.remove(...e);return!0};var Da=function(b){return b&&b.parentNode?b.parentNode.removeChild(b):null};var dd=function(b,e){const g=e.nextSibling;e=e.parentNode;if(!e)throw Error("Reference node has no parent.");g?e.insertBefore(b,g):e.appendChild(b)};var Nf=function(b,e){b.style.transform=e;b.style["-webkit-transform"]=e};var ed=function(){Of++;Hb||=Object.create(null)};
var fd=function(){Of--;Of||(Hb=null)};var gd=function(b,e,g,k){return Pf(b,e+"pt",g,k)};var Pf=function(b,e,g,k){const n=b.textContent;b=n+"\n"+b.className.baseVal;var r;if(Hb&&(r=Hb[b]))return r;Re||(r=document.createElement("canvas"),r.className="blocklyComputeCanvas",document.body.appendChild(r),Re=r.getContext("2d"));Re.font=g+" "+e+" "+k;r=n?Re.measureText(n).width:0;Hb&&(Hb[b]=r);return r};var Qf=function(b,e,g,k){const n=document.createElement("span");n.style.font=g+" "+e+" "+k;n.textContent=
b;b=document.createElement("div");b.style.width="1px";b.style.height="0";e=document.createElement("div");e.style.display="flex";e.style.position="fixed";e.style.top="0";e.style.left="0";e.appendChild(n);e.appendChild(b);document.body.appendChild(e);g={height:0,baseline:0};try{e.style.alignItems="baseline",g.baseline=b.offsetTop-n.offsetTop,e.style.alignItems="flex-end",g.height=b.offsetTop-n.offsetTop}finally{document.body.removeChild(e)}return g};var Se=function(b){return ni.getSizeInternal(b)};
var oi=function(b){return new Ja(b.offsetWidth,b.offsetHeight)};var Yb=function(b,e){b=window.getComputedStyle(b);return b[e]||b.getPropertyValue(e)};var Bc=function(b){const e=new Z(0,0);b=b.getBoundingClientRect();var g=document.documentElement;g=new Z(window.pageXOffset||g.scrollLeft,window.pageYOffset||g.scrollTop);e.x=b.left+g.x;e.y=b.top+g.y;return e};var pi=function(){const b=document.body,e=document.documentElement;return new Z(b.scrollLeft||e.scrollLeft,b.scrollTop||e.scrollTop)};var qi=
function(b){const e=parseFloat(Yb(b,"borderLeftWidth")),g=parseFloat(Yb(b,"borderRightWidth")),k=parseFloat(Yb(b,"borderTopWidth"));b=parseFloat(Yb(b,"borderBottomWidth"));return new Ga(k,b,e,g)};var Rf=function(b,e,g){b=ri(b,e,g);e.scrollLeft=b.x;e.scrollTop=b.y};var ri=function(b,e,g){var k=Bc(b),n=Bc(e),r=qi(e);const w=k.x-n.x-r.left;k=k.y-n.y-r.top;n=oi(b);b=e.clientWidth-n.width;n=e.clientHeight-n.height;r=e.scrollLeft;e=e.scrollTop;g?(r+=w-b/2,e+=k-n/2):(r+=Math.min(w,Math.max(w-b,0)),e+=Math.min(k,
Math.max(k-n,0)));return new Z(r,e)};var Pd=function(b){const e=new Z(0,0);var g=b.x&&b.getAttribute("x");const k=b.y&&b.getAttribute("y");g&&(e.x=parseInt(g));k&&(e.y=parseInt(k));if(g=(g=b.getAttribute("transform"))&&g.match(si))e.x+=Number(g[1]),g[3]&&(e.y+=Number(g[3]));(b=b.getAttribute("style"))&&-1<b.indexOf("translate")&&(b=b.match(ti))&&(e.x+=Number(b[1]),b[3]&&(e.y+=Number(b[3])));return e};var Sf=function(b){let e=0,g=0;for(;b;){const k=Pd(b);e+=k.x;g+=k.y;if(-1!==(" "+(b.getAttribute("class")||
"")+" ").indexOf(" injectionDiv "))break;b=b.parentNode}return new Z(e,g)};var ui=function(){const b=pi();return new Ga(b.y,document.documentElement.clientHeight+b.y,b.x,document.documentElement.clientWidth+b.x)};var vi=function(){const b=document.documentElement,e=window;return new Z(e.pageXOffset||b.scrollLeft,e.pageYOffset||b.scrollTop)};a.createElement$$module$build$src$core$utils$xml=function(b){return Te.createElementNS(wi,b)};a.createTextNode$$module$build$src$core$utils$xml=function(b){return Te.createTextNode(b)};
a.textToDom$$module$build$src$core$utils$xml=function(b){let e=Ue.parseFromString(b,"text/xml");if(e&&e.documentElement&&!e.getElementsByTagName("parsererror").length)return e.documentElement;if((e=Ue.parseFromString(b,"text/html"))&&e.body.firstChild&&"xml"===e.body.firstChild.nodeName.toLowerCase())return e.body.firstChild;throw Error(`DOMParser was unable to parse: ${b}`);};var Qd=function(b){return pm(Tf.serializeToString(b))};var pm=function(b){return b.replace(qm,e=>`&#${e.charCodeAt(0)};`)};
var Uf=function(b){if(!b)return null;if(b instanceof Element||"string"===typeof b)b=xi(b),b=rm(b);sm(b);return b};var sm=function(b){const e=b.kind;b=b.contents;if(e&&e!==yi&&e!==Vf)throw Error("Invalid toolbox kind "+e+". Please supply either "+yi+" or "+Vf);if(!b)throw Error("Toolbox must have a contents attribute.");};var Ve=function(b){return b?b.contents?b.contents:Array.isArray(b)&&0<b.length&&!b[0].nodeType?b:Wf(b):[]};var Xf=function(b){return zi.hasCategoriesInternal(b)};var Yf=function(b){return b&&
b.contents?!!b.contents.filter(function(e){return"CATEGORY"===e.kind.toUpperCase()}).length:!1};var rm=function(b){const e={contents:Wf(b)};b instanceof Node&&Ai(b,e);return e};var Wf=function(b){const e=[];let g=b.childNodes;g||=b;for(let k=0,n;n=g[k];k++){if(!n.tagName)continue;b={};const r=n.tagName.toUpperCase();b.kind=r;"BLOCK"===r?b.blockxml=n:n.childNodes&&0<n.childNodes.length&&(b.contents=Wf(n));Ai(n,b);e.push(b)}return e};var Ai=function(b,e){for(let g=0;g<b.attributes.length;g++){const k=
b.attributes[g];-1<k.nodeName.indexOf("css-")?(e.cssconfig=e.cssconfig||{},e.cssconfig[k.nodeName.replace("css-","")]=k.value):e[k.nodeName]=k.value}};var xi=function(b){let e=null;if(b)if("string"===typeof b){if(e=a.textToDom$$module$build$src$core$utils$xml(b),"xml"!==e.nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.");}else b instanceof Element&&(e=b);return e};var Zf=function(b,e,g,k,n,r){const w=r.scrollbar&&r.scrollbar.canScrollVertically();b.horizontal===Rd.LEFT?
(g=n.absoluteMetrics.left+g,w&&r.RTL&&(g+=Qa.scrollbarThickness)):(g=n.absoluteMetrics.left+n.viewMetrics.width-e.width-g,w&&!r.RTL&&(g-=Qa.scrollbarThickness));b.vertical===mc.TOP?b=n.absoluteMetrics.top+k:(b=n.absoluteMetrics.top+n.viewMetrics.height-e.height-k,r.scrollbar&&r.scrollbar.canScrollHorizontally()&&(b-=Qa.scrollbarThickness));return new Ga(b,b+e.height,g,g+e.width)};var $f=function(b,e){return{horizontal:e.toolboxMetrics.position===pa.LEFT||b.horizontalLayout&&!b.RTL?Rd.RIGHT:Rd.LEFT,
vertical:e.toolboxMetrics.position===pa.BOTTOM?mc.TOP:mc.BOTTOM}};var ag=function(b,e,g,k){const n=b.left,r=b.right-b.left,w=b.bottom-b.top;for(let x=0;x<k.length;x++){const P=k[x];b.intersects(P)&&(b=g===Cc.UP?P.top-w-e:P.bottom+e,b=new Ga(b,b+w,n,n+r),x=-1)}return b};var We=function(b,e){Bi(b,e)};var bg=function(b,e){Ci.confirmInternal(b,e)};var cg=function(b,e,g){Di(b,e,g)};var Ei=function(b){return void 0!==b.getVariableModel};var Sd=function(b){return void 0!==b.getProcedureDef};var tm=function(b){return void 0!==
b.getProcedureCall&&void 0!==b.renameProcedure};a.allUsedVarModels$$module$build$src$core$variables=function(b){b=b.getAllBlocks(!1);const e=new Set;for(let g=0;g<b.length;g++){const k=b[g].getVarModels();if(k)for(let n=0;n<k.length;n++){const r=k[n];r.getId()&&e.add(r)}}return Array.from(e.values())};a.allDeveloperVariables$$module$build$src$core$variables=function(b){b=b.getAllBlocks(!1);const e=new Set;for(let k=0,n;n=b[k];k++){var g=n.getDeveloperVariables;if(g){g=g();for(let r=0;r<g.length;r++)e.add(g[r])}}return Array.from(e.values())};
var dg=function(b){let e=[];const g=document.createElement("button");g.setAttribute("text","%{BKY_NEW_VARIABLE}");g.setAttribute("callbackKey","CREATE_VARIABLE");b.registerButtonCallback("CREATE_VARIABLE",function(k){Td(k.getTargetWorkspace())});e.push(g);b=Fi(b);return e=e.concat(b)};var Fi=function(b){b=b.getVariablesOfType("");const e=[];if(0<b.length){var g=b[b.length-1];if(cb.variables_set){var k=a.createElement$$module$build$src$core$utils$xml("block");k.setAttribute("type","variables_set");
k.setAttribute("gap",cb.math_change?"8":"24");k.appendChild(hd(g));e.push(k)}cb.math_change&&(k=a.createElement$$module$build$src$core$utils$xml("block"),k.setAttribute("type","math_change"),k.setAttribute("gap",cb.variables_get?"20":"8"),k.appendChild(hd(g)),g=a.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),k.appendChild(g),e.push(k));if(cb.variables_get){b.sort(Ud.compareByName);for(let n=0,r;r=b[n];n++)g=
a.createElement$$module$build$src$core$utils$xml("block"),g.setAttribute("type","variables_get"),g.setAttribute("gap","8"),g.appendChild(hd(r)),e.push(g)}}return e};var Hi=function(b){return Gi.generateUniqueNameInternal(b)};var fg=function(b,e){if(!e.length)return b;const g=eg;let k="",n=g.indexOf(b);for(;;){let r=!1;for(let w=0;w<e.length;w++)if(e[w].toLowerCase()===b){r=!0;break}if(!r)break;n++;n===g.length&&(n=0,k=`${Number(k)+1}`);b=g.charAt(n)+k}return b};var Td=function(b,e,g){function k(r){gg(a.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,
r,function(w){if(w){var x=Ii(w,b);if(x){if(x.type===n)var P=a.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",x.name);else P=a.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,P=P.replace("%1",x.name).replace("%2",x.type);We(P,function(){k(w)})}else b.createVariable(w,n),e&&e(w)}else e&&e(null)})}const n=g||"";k("")};a.renameVariable$$module$build$src$core$variables=function(b,e,g){function k(n){const r=a.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",
e.name);gg(r,n,function(w){if(w){var x=um(w,e.type,b),P=Ji(e.name,w,b);if(x||P){var ea="";x?ea=a.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",x.name).replace("%2",x.type):P&&(ea=a.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",w).replace("%2",P));We(ea,function(){k(w)})}else b.renameVariableById(e.getId(),w),g&&g(w)}else g&&g(null)})}k("")};var gg=function(b,e,g){cg(b,e,function(k){k&&(k=k.replace(/[\s\xa0]+/g," ").trim(),
k===a.Msg$$module$build$src$core$msg.RENAME_VARIABLE||k===a.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(k=null);g(k)})};var um=function(b,e,g){g=g.getVariableMap().getAllVariables();b=b.toLowerCase();for(let k=0,n;n=g[k];k++)if(n.name.toLowerCase()===b&&n.type!==e)return n;return null};var Ii=function(b,e){e=e.getVariableMap().getAllVariables();b=b.toLowerCase();for(let g=0,k;k=e[g];g++)if(k.name.toLowerCase()===b)return k;return null};var Ji=function(b,e,g){return g.getProcedureMap().getProcedures().length?
vm(b,e,g):wm(b,e,g)};var vm=function(b,e,g){b=b.toLowerCase();e=e.toLowerCase();g=g.getProcedureMap().getProcedures();for(const n of g){var k=n.getParameters().filter(Ei).map(r=>r.getVariableModel().name);if(k&&(g=k.some(r=>r.toLowerCase()===b),k=k.some(r=>r.toLowerCase()===e),g&&k))return n.getName()}return null};var wm=function(b,e,g){b=b.toLowerCase();e=e.toLowerCase();g=g.getAllBlocks(!1);for(const n of g){if(!Sd(n))continue;g=n.getProcedureDef();var k=g[1];const r=k.some(w=>w.toLowerCase()===
b);k=k.some(w=>w.toLowerCase()===e);if(r&&k)return g[0]}return null};var hd=function(b){const e=a.createElement$$module$build$src$core$utils$xml("field");e.setAttribute("name","VAR");e.setAttribute("id",b.getId());e.setAttribute("variabletype",b.type);b=a.createTextNode$$module$build$src$core$utils$xml(b.name);e.appendChild(b);return e};a.getOrCreateVariablePackage$$module$build$src$core$variables=function(b,e,g,k){let n=a.getVariable$$module$build$src$core$variables(b,e,g,k);n||=xm(b,e,g,k);return n};
a.getVariable$$module$build$src$core$variables=function(b,e,g,k){const n=b.getPotentialVariableMap();let r=null;if(e&&(r=b.getVariableById(e),!r&&n&&(r=n.getVariableById(e)),r))return r;if(g){if(void 0===k)throw Error("Tried to look up a variable by name without a type");r=b.getVariable(g,k);!r&&n&&(r=n.getVariable(g,k))}return r};var xm=function(b,e,g,k){const n=b.getPotentialVariableMap();g||=Hi(b.isFlyout?b.targetWorkspace:b);return n?n.createVariable(g,k,e):b.createVariable(g,k,e)};var hg=function(b,
e){b=b.getAllVariables();const g=[];if(e.length!==b.length)for(let k=0;k<b.length;k++){const n=b[k];-1===e.indexOf(n)&&g.push(n)}return g};var ig=function(b,e){d(U.PASTER,b,e)};var Mi=function(b){Ki(b);if(ym())return jg(),Promise.resolve();Vd||=new Promise(e=>{kg=e;Li=window.requestAnimationFrame(()=>{jg();e()})});return Vd};var id=function(){return Vd?Vd:Promise.resolve()};var Ib=function(b){b||window.cancelAnimationFrame(Li);jg(b);!b&&kg&&kg()};var ym=function(){return Ni};var Ki=function(b){lg.add(b);
const e=b.getParent();e?Ki(e):Xe.add(b)};var jg=function(b){const e=b?new Set([b]):new Set([...Xe].map(n=>n.workspace)),g=[...Xe].filter(zm).filter(n=>e.has(n.workspace));for(var k of g)Oi(k);for(const n of e)n.resizeContents();for(const n of g)k=n.getRelativeToSurfaceXY(),n.updateComponentLocations(k);for(const n of g)Pi(n);b||(Vd=null)};var Pi=function(b){Xe.delete(b);lg.delete(b);for(const e of b.getChildren(!1))Pi(e)};var zm=function(b){return!b.isDisposed()&&!b.getParent()};var Oi=function(b){if(lg.has(b)){for(const e of b.getChildren(!1))Oi(e);
b.renderEfficiently()}};var Qi=function(b){const e=a.createElement$$module$build$src$core$utils$xml("variables");for(let g=0;g<b.length;g++){const k=b[g],n=a.createElement$$module$build$src$core$utils$xml("variable");n.appendChild(a.createTextNode$$module$build$src$core$utils$xml(k.name));k.type&&n.setAttribute("type",k.type);n.id=k.getId();e.appendChild(n)}return e};var Ye=function(b,e){if(b.isInsertionMarker()&&(b=b.getChildren(!1)[0],!b))return new DocumentFragment;let g=0;b.workspace.RTL&&(g=
b.workspace.getWidth());e=Dc(b,e);if(Ri(e)){const k=b.getRelativeToSurfaceXY();e.setAttribute("x",String(Math.round(b.workspace.RTL?g-k.x:k.x)));e.setAttribute("y",String(Math.round(k.y)))}return e};var Am=function(b){if(b.isSerializable()){const e=a.createElement$$module$build$src$core$utils$xml("field");e.setAttribute("name",b.name||"");return b.toXml(e)}return null};var Bm=function(b,e){for(let g=0;g<b.inputList.length;g++){const k=b.inputList[g];for(let n=0;n<k.fieldRow.length;n++){const r=Am(k.fieldRow[n]);
r&&e.appendChild(r)}}};var Dc=function(b,e){if(b.isInsertionMarker())return(e=b.getChildren(!1)[0])?Dc(e):new DocumentFragment;const g=a.createElement$$module$build$src$core$utils$xml(b.isShadow()?"shadow":"block");g.setAttribute("type",b.type);e||(g.id=b.id);if(b.mutationToDom){var k=b.mutationToDom();k&&(k.hasChildNodes()||k.hasAttributes())&&g.appendChild(k)}Bm(b,g);if(k=b.getCommentText()){var n=b.getIcon(eb.COMMENT),r=n.getBubbleSize();n=n.bubbleIsVisible();var w=a.createElement$$module$build$src$core$utils$xml("comment");
w.appendChild(a.createTextNode$$module$build$src$core$utils$xml(k));w.setAttribute("pinned",`${n}`);w.setAttribute("h",String(r.height));w.setAttribute("w",String(r.width));g.appendChild(w)}b.data&&(k=a.createElement$$module$build$src$core$utils$xml("data"),k.appendChild(a.createTextNode$$module$build$src$core$utils$xml(b.data)),g.appendChild(k));for(k=0;k<b.inputList.length;k++){r=b.inputList[k];var x=void 0;n=!0;if(r.type!==a.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&r.type!==
a.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){w=r.connection.targetBlock();r.type===a.inputTypes$$module$build$src$core$inputs$input_types.VALUE?x=a.createElement$$module$build$src$core$utils$xml("value"):r.type===a.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(x=a.createElement$$module$build$src$core$utils$xml("statement"));const ea=r.connection.getShadowDom();!ea||w&&w.isShadow()||x.appendChild(Si(ea,e));w&&(w=Dc(w,e),w.nodeType===nc.ELEMENT_NODE&&(x.appendChild(w),
n=!1));x.setAttribute("name",r.name);n||g.appendChild(x)}}void 0!==b.inputsInline&&b.inputsInline!==b.inputsInlineDefault&&g.setAttribute("inline",String(b.inputsInline));b.isCollapsed()&&g.setAttribute("collapsed","true");b.isEnabled()||g.setAttribute("disabled","true");b.isDeletable()||b.isShadow()||g.setAttribute("deletable","false");b.isMovable()||b.isShadow()||g.setAttribute("movable","false");b.isEditable()||g.setAttribute("editable","false");x=b.getNextBlock();let P;x&&(k=Dc(x,e),k.nodeType===
nc.ELEMENT_NODE&&(P=a.createElement$$module$build$src$core$utils$xml("next"),P.appendChild(k),g.appendChild(P)));b=b.nextConnection&&b.nextConnection.getShadowDom();!b||x&&x.isShadow()||P.appendChild(Si(b,e));return g};var Si=function(b,e){let g=b=b.cloneNode(!0),k;for(;g;)if(e&&"shadow"===g.nodeName&&g.removeAttribute("id"),g.firstChild)g=g.firstChild;else{for(;g&&!g.nextSibling;){k=g;g=g.parentNode;let n;k.nodeType===nc.TEXT_NODE&&""===k.data.trim()&&(null==(n=g)?void 0:n.firstChild)!==k&&Da(k)}g&&
(k=g,g=g.nextSibling,k.nodeType===nc.TEXT_NODE&&""===k.data.trim()&&Da(k))}return b};var Zb=function(b){return Qd(b).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")};a.domToWorkspace$$module$build$src$core$xml=function(b,e){let g=0;e.RTL&&(g=e.getWidth());const k=[];ed();const n=a.getGroup$$module$build$src$core$events$utils();n||a.setGroup$$module$build$src$core$events$utils(!0);e.setResizesEnabled&&e.setResizesEnabled(!1);let r=!0;try{for(let w=0,x;x=b.childNodes[w];w++){const P=x.nodeName.toLowerCase(),
ea=x;if("block"===P||"shadow"===P&&!da()){const Oa=Ec(ea,e);k.push(Oa.id);let Ha;const fb=parseInt(null!=(Ha=ea.getAttribute("x"))?Ha:"10",10);let jd;const kd=parseInt(null!=(jd=ea.getAttribute("y"))?jd:"10",10);isNaN(fb)||isNaN(kd)||Oa.moveBy(e.RTL?g-fb:fb,kd,["create"]);r=!1}else{if("shadow"===P)throw TypeError("Shadow block cannot be a top-level block.");if("comment"===P)e.rendered?Xa.fromXmlRendered(ea,e,g):Jb.fromXml(ea,e);else if("variables"===P){if(r)Ti(ea,e);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");
r=!1}}}}finally{a.setGroup$$module$build$src$core$events$utils(n),e.setResizesEnabled&&e.setResizesEnabled(!0),e.rendered&&Ib(),fd()}ba(new (ja(Wd))(e));return k};a.domToBlock$$module$build$src$core$xml=function(b,e){b=Ec(b,e);e.rendered&&Ib();return b};var Ec=function(b,e){a.disable$$module$build$src$core$events$utils();var g=e.getAllVariables();let k;try{if(k=mg(b,e),e.rendered){const n=k,r=k.getDescendants(!1);n.setConnectionTracking(!1);for(let w=r.length-1;0<=w;w--)r[w].initSvg();for(let w=r.length-
1;0<=w;w--)r[w].queueRender();setTimeout(function(){n.disposed||n.setConnectionTracking(!0)},1);e.resizeContents()}else{const n=k.getDescendants(!1);for(let r=n.length-1;0<=r;r--)n[r].initModel()}}finally{a.enable$$module$build$src$core$events$utils()}if(wa()){b=hg(e,g);for(e=0;e<b.length;e++)g=b[e],ba(new (ja(ld))(g));ba(new (ja(a.CREATE$$module$build$src$core$events$utils))(k))}return k};var Ti=function(b,e){for(let k=0;k<b.children.length;k++){var g=b.children[k];const n=g.getAttribute("type"),
r=g.getAttribute("id");g=g.textContent;if(!g)break;e.createVariable(g,n,r)}};var Cm=function(b){const e={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let g=0;g<b.children.length;g++){const k=b.children[g];if(k.nodeType!==nc.TEXT_NODE)switch(k.nodeName.toLowerCase()){case "mutation":e.mutation.push(k);break;case "comment":e.comment.push(k);break;case "data":e.data.push(k);break;case "title":case "field":e.field.push(k);break;case "value":case "statement":e.input.push(k);break;case "next":e.next.push(k);
break;default:console.warn("Ignoring unknown tag: "+k.nodeName)}}return e};var Dm=function(b,e){let g=!1;for(let k=0;k<b.length;k++){const n=b[k];e.domToMutation&&(e.domToMutation(n),e.initSvg&&(g=!0))}return g};var Em=function(b,e){for(let k=0;k<b.length;k++){var g=b[k];const n=g.textContent,r="true"===g.getAttribute("pinned");let w;const x=parseInt(null!=(w=g.getAttribute("w"))?w:"50",10);let P;g=parseInt(null!=(P=g.getAttribute("h"))?P:"50",10);e.setCommentText(n);const ea=e.getIcon(eb.COMMENT);
isNaN(x)||isNaN(g)||ea.setBubbleSize(new Ja(x,g));ea.setBubbleVisible(r);setTimeout(()=>ea.setBubbleVisible(r),1)}};var Fm=function(b,e){for(let g=0;g<b.length;g++)e.data=b[g].textContent};var Hm=function(b,e){for(let g=0;g<b.length;g++){const k=b[g],n=k.getAttribute("name");n?Gm(e,n,k):console.warn(`Ignoring unnamed field in block ${e.type}`)}};var Ui=function(b){let e=null,g=null;for(let k=0;k<b.childNodes.length;k++){const n=b.childNodes[k];Ri(n)&&("block"===n.nodeName.toLowerCase()?e=n:"shadow"===
n.nodeName.toLowerCase()&&(g=n))}return{childBlockElement:e,childShadowElement:g}};var Im=function(b,e,g,k){for(let r=0;r<b.length;r++){var n=b[r];const w=n.getAttribute("name"),x=w?g.getInput(w):null;if(!x){console.warn("Ignoring non-existent input "+w+" in block "+k);break}n=Ui(n);if(n.childBlockElement){if(!x.connection)throw TypeError("Input connection does not exist.");mg(n.childBlockElement,e,x.connection,!1)}if(n.childShadowElement){let P;null==(P=x.connection)||P.setShadowDom(n.childShadowElement)}}};
var Jm=function(b,e,g){for(let k=0;k<b.length;k++){const n=Ui(b[k]);if(n.childBlockElement){if(!g.nextConnection)throw TypeError("Next statement does not exist.");if(g.nextConnection.isConnected())throw TypeError("Next statement is already connected.");mg(n.childBlockElement,e,g.nextConnection,!0)}n.childShadowElement&&g.nextConnection&&g.nextConnection.setShadowDom(n.childShadowElement)}};var mg=function(b,e,g,k){var n;const r=b.getAttribute("type");if(!r)throw TypeError("Block type unspecified: "+
b.outerHTML);var w=null!=(n=b.getAttribute("id"))?n:void 0;n=e.newBlock(r,w);w=Cm(b);const x=Dm(w.mutation,n);Em(w.comment,n);Fm(w.data,n);if(g)if(k)if(n.previousConnection)g.connect(n.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(n.outputConnection)g.connect(n.outputConnection);else if(n.previousConnection)g.connect(n.previousConnection);else throw TypeError("Child block does not have output or previous statement.");Hm(w.field,n);Im(w.input,e,n,
r);Jm(w.next,e,n);x&&n.initSvg();(e=b.getAttribute("inline"))&&n.setInputsInline("true"===e);(e=b.getAttribute("disabled"))&&n.setEnabled("true"!==e&&"disabled"!==e);(e=b.getAttribute("deletable"))&&n.setDeletable("true"===e);(e=b.getAttribute("movable"))&&n.setMovable("true"===e);(e=b.getAttribute("editable"))&&n.setEditable("true"===e);(e=b.getAttribute("collapsed"))&&n.setCollapsed("true"===e);if("shadow"===b.nodeName.toLowerCase()){b=n.getChildren(!1);for(e=0;e<b.length;e++)if(!b[e].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");
n.setShadow(!0)}return n};var Gm=function(b,e,g){const k=b.getField(e);k?k.fromXml(g):console.warn("Ignoring non-existent field "+e+" in block "+b.type)};var Ri=function(b){return b.nodeType===nc.ELEMENT_NODE};var ng=function(b){return void 0!==b.saveState&&void 0!==b.loadState};var og=function(b,e){d(U.SERIALIZER,b,e)};var $b=function(b,{addCoordinates:e=!1,addInputBlocks:g=!0,addNextBlocks:k=!0,doFullSerialization:n=!0,saveIds:r=!0}={}){if(b.isInsertionMarker())return null;const w={type:b.type,
id:r?b.id:void 0};e&&Km(b,w);Lm(b,w);Mm(b,w,n);Nm(b,w,n);Om(b,w,n);g&&Pm(b,w,n,r);k&&Qm(b,w,n,r);return w};var Lm=function(b,e){b.isCollapsed()&&(e.collapsed=!0);b.isEnabled()||(e.enabled=!1);b.isOwnDeletable()||(e.deletable=!1);b.isOwnMovable()||(e.movable=!1);b.isOwnEditable()||(e.editable=!1);void 0!==b.inputsInline&&b.inputsInline!==b.inputsInlineDefault&&(e.inline=b.inputsInline);b.data&&(e.data=b.data)};var Km=function(b,e){const g=b.workspace;b=b.getRelativeToSurfaceXY();e.x=Math.round(g.RTL?
g.getWidth()-b.x:b.x);e.y=Math.round(b.y)};var Mm=function(b,e,g){b.saveExtraState?(b=b.saveExtraState(g),null!==b&&(e.extraState=b)):b.mutationToDom&&(b=b.mutationToDom(),null!==b&&(e.extraState=Zb(b).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))};var Nm=function(b,e,g){const k=Object.create(null);for(const n of b.getIcons())ng(n)&&(b=n.saveState(g))&&(k[n.getType().toString()]=b);Object.keys(k).length&&(e.icons=k)};var Om=function(b,e,g){const k=Object.create(null);for(let n=
0;n<b.inputList.length;n++){const r=b.inputList[n];for(let w=0;w<r.fieldRow.length;w++){const x=r.fieldRow[w];x.isSerializable()&&(k[x.name]=x.saveState(g))}}Object.keys(k).length&&(e.fields=k)};var Pm=function(b,e,g,k){const n=Object.create(null);for(let r=0;r<b.inputList.length;r++){const w=b.inputList[r];if(!w.connection)continue;const x=Vi(w.connection,g,k);x&&(n[w.name]=x)}Object.keys(n).length&&(e.inputs=n)};var Qm=function(b,e,g,k){b.nextConnection&&(b=Vi(b.nextConnection,g,k))&&(e.next=b)};
var Vi=function(b,e,g){const k=b.getShadowState(!0);b=b.targetBlock();if(!k&&!b)return null;const n=Object.create(null);k&&(n.shadow=k);b&&!b.isShadow()&&(n.block=$b(b,{doFullSerialization:e,saveIds:g}));return n};var Fc=function(b,e,{recordUndo:g=!1}={}){b=Xd(b,e,{recordUndo:g});e.rendered&&Ib();return b};var Xd=function(b,e,{parentConnection:g,isShadow:k=!1,recordUndo:n=!1}={}){const r=da();S(n);(n=a.getGroup$$module$build$src$core$events$utils())||a.setGroup$$module$build$src$core$events$utils(!0);
a.disable$$module$build$src$core$events$utils();let w;try{w=Wi(b,e,{parentConnection:g,isShadow:k})}finally{a.enable$$module$build$src$core$events$utils()}wa()&&ba(new (ja(a.CREATE$$module$build$src$core$events$utils))(w));a.setGroup$$module$build$src$core$events$utils(n);S(r);if(e.rendered){const x=w;setTimeout(()=>{x.disposed||x.setConnectionTracking(!0)},1)}return w};var Wi=function(b,e,{parentConnection:g,isShadow:k=!1}={}){if(!b.type)throw new Xi(b);const n=e.newBlock(b.type,b.id);n.setShadow(k);
Rm(n,b);Sm(n,b);Tm(n,b);Um(g,n,b);Vm(n,b);Wm(n,b);Xm(n,b);Ym(n,b);Zm(n,e.rendered);return n};var Rm=function(b,e){let g=void 0===e.x?0:e.x;e=void 0===e.y?0:e.y;const k=b.workspace;g=k.RTL?k.getWidth()-g:g;b.moveBy(g,e)};var Sm=function(b,e){e.collapsed&&b.setCollapsed(!0);!1===e.deletable&&b.setDeletable(!1);!1===e.movable&&b.setMovable(!1);!1===e.editable&&b.setEditable(!1);!1===e.enabled&&b.setEnabled(!1);void 0!==e.inline&&b.setInputsInline(e.inline);void 0!==e.data&&(b.data=e.data)};var Tm=function(b,
e){e.extraState&&(b.loadExtraState?b.loadExtraState(e.extraState):b.domToMutation&&b.domToMutation(a.textToDom$$module$build$src$core$utils$xml(e.extraState)))};var Um=function(b,e,g){if(b){if(b.getSourceBlock().isShadow()&&!e.isShadow())throw new Yi(g);if(b.type===a.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var k=e.outputConnection;if(!k)throw new Yd("output",e,g);}else if(k=e.previousConnection,!k)throw new Yd("previous",e,g);if(!b.connect(k)){const n=e.workspace.connectionChecker;
throw new Zi(n.getErrorMessage(n.canConnectWithReason(k,b,!1),k,b),b.type===a.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",e,g);}}};var Vm=function(b,e){if(e.icons){var g=Object.keys(e.icons);for(const n of g){g=e.icons[n];var k=b.getIcon(n);if(!k){k=p(U.ICON,n,!1);if(!k)throw new $i(n,b,e);k=new k(b);b.addIcon(k)}ng(k)&&k.loadState(g)}}};var Wm=function(b,e){if(e.fields){var g=Object.keys(e.fields);for(let k=0;k<g.length;k++){const n=g[k],r=
e.fields[n],w=b.getField(n);w?w.loadState(r):console.warn(`Ignoring non-existant field ${n} in block ${b.type}`)}}};var Xm=function(b,e){if(e.inputs){var g=Object.keys(e.inputs);for(let k=0;k<g.length;k++){const n=g[k],r=b.getInput(n);if(!r||!r.connection)throw new Yd(n,b,e);aj(r.connection,e.inputs[n])}}};var Ym=function(b,e){if(e.next){if(!b.nextConnection)throw new Yd("next",b,e);aj(b.nextConnection,e.next)}};var aj=function(b,e){e.shadow&&b.setShadowState(e.shadow);e.block&&Wi(e.block,b.getSourceBlock().workspace,
{parentConnection:b})};var Zm=function(b,e){if(e){b.setConnectionTracking(!1);b.initSvg();b.queueRender();for(const g of b.getIcons())g.onLocationChange(b.getRelativeToSurfaceXY())}else b.initModel()};var bn=function(b){const e=b.workspace,g=a.config$$module$build$src$core$config.snapRadius,k=b.getRelativeToSurfaceXY(),n=new Z(0,0),r=e.getAllBlocks(!1).filter(w=>w.id!=b.id).map(w=>w.getRelativeToSurfaceXY());for(;$m(Z.sum(k,n),r)||an(b,n,g);)e.RTL?n.translate(-g,2*g):n.translate(g,2*g);b.moveTo(Z.sum(k,
n))};var $m=function(b,e){return e.some(g=>1>=Math.abs(g.x-b.x)&&1>=Math.abs(g.y-b.y))};var an=function(b,e,g){return b.getConnections_(!1).some(k=>!!k.closest(g,e).connection)};var Zd=function(b,e,g){return b&&e?bj(b,e,g):pg&&qg?bj(pg,qg):null};var bj=function(b,e,g){let k;e=null!=(k=e.getRootWorkspace())?k:e;let n,r;return null!=(r=null==(n=q(U.PASTER,b.paster,!1))?void 0:n.paste(b,e,g))?r:null};var Kb=function(b,e){b.setAttribute(cn,e)};var La=function(b,e,g){Array.isArray(g)&&(g=g.join(" "));
b.setAttribute(dn+e,`${g}`)};var md=function(){return Lb};var cj=function(){document.querySelector("."+rg)||(Lb=document.createElement("div"),Lb.className=rg,(E()||document.body).appendChild(Lb))};var sg=function(b,e,g){zb();nd=b;Ze=g;if(b=Lb)b.style.direction=e?"rtl":"ltr",b.style.display="block",e=G(),od=e.getRenderer().getClassName(),pd=e.getTheme().getClassName(),od&&la(b,od),pd&&la(b,pd)};var zb=function(){if(dj()){nd=null;var b=Lb;b&&(b.style.display="none",b.style.left="",b.style.top="",Ze&&
Ze(),Ze=null,b.textContent="",od&&(za(b,od),od=""),pd&&(za(b,pd),pd=""),G().markFocused())}};var dj=function(){return!!nd};var tg=function(b){nd===b&&zb()};var ej=function(b,e,g){Lb.style.left=b+"px";Lb.style.top=e+"px";Lb.style.height=g+"px"};var fj=function(b,e,g,k){const n=en(b,e,g);b=fn(b,e,g,k);0>n?ej(b,0,g.height+n):ej(b,n,g.height)};var fn=function(b,e,g,k){return k?Math.min(Math.max(e.right-g.width,b.left),b.right-g.width):Math.max(Math.min(e.left,b.right-g.width),b.left)};var en=function(b,
e,g){return e.bottom+g.height>=b.bottom?e.top-g.height:e.bottom};var gn=function(b){return!(null==b||!b.repositionForWindowResize)};var gj=function(){gn(nd)&&nd.repositionForWindowResize()||zb()};var hj=function(b){$e=b};var cf=function(b,e,g){sg(ij,g,jj);if(e.length){var k=hn(e,g);af=k;jn(k,b,g);setTimeout(function(){k.focus()},1);$e=null}else bf()};var hn=function(b,e){const g=new ug;g.setRole(jb.MENU);for(let k=0;k<b.length;k++){const n=b[k],r=new vg(n.text);r.setRightToLeft(e);r.setRole(jb.MENUITEM);
g.addChild(r);r.setEnabled(n.enabled);if(n.enabled)r.onAction(function(){bf();requestAnimationFrame(()=>{setTimeout(()=>{n.callback(n.scope)},0)})},{})}return g};var jn=function(b,e,g){const k=ui();e=new Ga(e.clientY+k.top,e.clientY+k.top,e.clientX+k.left,e.clientX+k.left);kn(b);const n=b.getSize();g&&(e.left+=n.width,e.right+=n.width,k.left+=n.width,k.right+=n.width);fj(k,e,n,g);b.focus()};var kn=function(b){var e=md();if(!e)throw Error("Attempting to create a context menu when widget div is null");
e=b.render(e);la(e,"blocklyContextMenu");H(e,"contextmenu",null,ln);b.focus()};var ln=function(b){b.preventDefault();b.stopPropagation()};var bf=function(){tg(ij);$e=null};var jj=function(){af&&(af.dispose(),af=null)};a.callbackFactory$$module$build$src$core$contextmenu=function(b,e){return()=>{a.disable$$module$build$src$core$events$utils();let g;try{g=e instanceof Element?Ec(e,b.workspace):Xd(e,b.workspace);const k=b.getRelativeToSurfaceXY();k.x=b.RTL?k.x-a.config$$module$build$src$core$config.snapRadius:
k.x+a.config$$module$build$src$core$config.snapRadius;k.y+=2*a.config$$module$build$src$core$config.snapRadius;g.moveBy(k.x,k.y)}finally{a.enable$$module$build$src$core$events$utils()}wa()&&!g.isShadow()&&ba(new (ja(a.CREATE$$module$build$src$core$events$utils))(g));g.select();return g}};var kj=function(b){return{text:a.Msg$$module$build$src$core$msg.REMOVE_COMMENT,enabled:!0,callback:function(){a.setGroup$$module$build$src$core$events$utils(!0);b.dispose();a.setGroup$$module$build$src$core$events$utils(!1)}}};
var lj=function(b){return{text:a.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){const e=b.toCopyData();e&&Zd(e,b.workspace)}}};var $d=function(b){return b*Math.PI/180};var mj=function(b){return 180*b/Math.PI};var ae=function(b,e,g){if(g<b){const k=g;g=b;b=k}return Math.max(b,Math.min(e,g))};var nj=function(){document.querySelector(".blocklyDropDownDiv")||(xa=document.createElement("div"),xa.className="blocklyDropDownDiv",(E()||document.body).appendChild(xa),qd=document.createElement("div"),
qd.className="blocklyDropDownContent",xa.appendChild(qd),Gc=document.createElement("div"),Gc.className="blocklyDropDownArrow",xa.appendChild(Gc),xa.style.opacity="0",xa.style.transition="transform "+df+"s, opacity "+df+"s",xa.addEventListener("focusin",function(){la(xa,"blocklyFocused")}),xa.addEventListener("focusout",function(){za(xa,"blocklyFocused")}))};var oj=function(b){wg=b};var pj=function(){return oc};var be=function(){return qd};var xg=function(){qd.textContent="";qd.style.width=""};var yg=
function(b,e){xa.style.backgroundColor=b;xa.style.borderColor=e};var ef=function(b,e,g){qj=!0;return rj(sj(b),b,e,g)};var tj=function(b){var e=b.getSvgRoot();const g=b.workspace.scale,k=b.height*g;b=b.width*g;e=Bc(e);return new Ga(e.y,e.y+k,e.x,e.x+b)};var sj=function(b){b=b.getScaledBBox();return new Ga(b.top,b.bottom,b.left,b.right)};var rj=function(b,e,g,k){const n=b.left+(b.right-b.left)/2,r=b.bottom;b=b.top;k&&(b+=k);k=e.getSourceBlock();let w=k.workspace;for(;w.options.parentWorkspace;)w=w.options.parentWorkspace;
oj(w.getParentSvg().parentNode);return uj(e,k.RTL,n,r,n,b,g)};var uj=function(b,e,g,k,n,r,w){oc=b;Hc=w||null;xa.style.direction=e?"rtl":"ltr";b=G();rd=b.getRenderer().getClassName();sd=b.getTheme().getClassName();rd&&la(xa,rd);sd&&la(xa,sd);return vj(g,k,n,r)};var wj=function(b,e,g,k){b=ff(b,g.left,g.right,k.width);return{initialX:b.divX,initialY:e,finalX:b.divX,finalY:e+zg,arrowX:b.arrowX,arrowY:-(ce/2+Ag),arrowAtTop:!0,arrowVisible:!0}};var xj=function(b,e,g,k){b=ff(b,g.left,g.right,k.width);return{initialX:b.divX,
initialY:e-k.height,finalX:b.divX,finalY:e-k.height-zg,arrowX:b.arrowX,arrowY:k.height-2*Ag-ce/2,arrowAtTop:!1,arrowVisible:!0}};var mn=function(b,e,g){b=ff(b,e.left,e.right,g.width);return{initialX:b.divX,initialY:0,finalX:b.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}};var ff=function(b,e,g,k){e=ae(e,b-k/2,g-k);b=b-ce/2-e;g=yj;b=ae(g,b,k-g-ce);return{arrowX:b,divX:e}};var zj=function(){return!!oc};var de=function(b,e){return oc===b?(e?Mb():Bg(),!0):!1};var Bg=function(){xa.style.transform=
"translate(0, 0)";xa.style.opacity="0";Cg=setTimeout(function(){Mb()},1E3*df);Hc&&(Hc(),Hc=null)};var Mb=function(){zj()&&(Cg&&clearTimeout(Cg),xa.style.transform="",xa.style.left="",xa.style.top="",xa.style.opacity="0",xa.style.display="none",xa.style.backgroundColor="",xa.style.borderColor="",Hc&&(Hc(),Hc=null),xg(),oc=null,rd&&(za(xa,rd),rd=""),sd&&(za(xa,sd),sd=""),G().markFocused())};var vj=function(b,e,g,k){b=Dg.getPositionMetrics(b,e,g,k);b.arrowVisible?(Gc.style.display="",Gc.style.transform=
"translate("+b.arrowX+"px,"+b.arrowY+"px) rotate(45deg)",Gc.setAttribute("class",b.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Gc.style.display="none";e=Math.floor(b.initialX);g=Math.floor(b.initialY);k=Math.floor(b.finalX);const n=Math.floor(b.finalY);xa.style.left=e+"px";xa.style.top=g+"px";xa.style.display="block";xa.style.opacity="1";xa.style.transform="translate("+(k-e)+"px,"+(n-g)+"px)";return!!b.arrowAtTop};var Aj=function(){if(oc){var b=oc.getSourceBlock();
b=qj?sj(oc):tj(b);const e=b.left+(b.right-b.left)/2;vj(e,b.bottom,e,b.top)}else Bg()};var Cj=function(b){if(!(100<b.getDescendants(!1).length)){var e=b.workspace,g=b.getSvgRoot();e.getAudioManager().play("delete");var k=e.getSvgXY(g);g=g.cloneNode(!0);g.setAttribute("transform","translate("+k.x+","+k.y+")");e.getParentSvg().appendChild(g);Bj(g,{x:k.x,y:k.y,width:b.width,height:b.height},e.RTL,new Date,e.scale)}};var Bj=function(b,e,g,k,n){const r=((new Date).getTime()-k.getTime())/150;1<r?Da(b):(b.setAttribute("transform",
"translate("+(e.x+(g?-1:1)*e.width*n/2*r)+","+(e.y+e.height*n*r)+") scale("+(1-r)*n+")"),setTimeout(Bj,10,b,e,g,k,n))};var Eg=function(b){var e=b.workspace;const g=e.scale;e.getAudioManager().play("click");if(!(1>g)){var k=e.getSvgXY(b.getSvgRoot());b.outputConnection?(k.x+=(b.RTL?3:-3)*g,k.y+=13*g):b.previousConnection&&(k.x+=(b.RTL?-23:23)*g,k.y+=3*g);var n=N(I.CIRCLE,{cx:k.x,cy:k.y,r:0,fill:"none",stroke:"#888","stroke-width":10},e.getParentSvg());b=N(I.ANIMATE,{id:"animationCircle",begin:"indefinite",
attributeName:"r",dur:"150ms",from:0,to:25*g},n);e=N(I.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},n);b.beginElement();e.beginElement();setTimeout(()=>void Da(n),150)}};var Ej=function(b){ee();b.workspace.getAudioManager().play("disconnect");if(!(1>b.workspace.scale)){var e=b.getHeightWidth().height;e=Math.atan(10/e)/Math.PI*180;b.RTL||(e*=-1);fe=b;Dj(b,e,new Date)}};var Dj=function(b,e,g){const k=((new Date).getTime()-g.getTime())/200;let n=
"";1>=k&&(n=`skewX(${Math.round(Math.sin(k*Math.PI*3)*(1-k)*e)})`,gf=setTimeout(Dj,10,b,e,g));b.getSvgRoot().setAttribute("transform",`${b.getTranslation()} ${n}`)};var ee=function(){fe&&(gf&&(clearTimeout(gf),gf=null),fe.getSvgRoot().setAttribute("transform",fe.getTranslation()),fe=null)};var hf=function(b){return b.length?b.reduce(function(e,g){return e.length<g.length?e:g}).length:0};var Fj=function(b,e){if(!b.length)return 0;if(1===b.length)return b[0].length;let g=0;e=e||hf(b);let k;for(k=0;k<
e;k++){for(var n=b[0][k],r=1;r<b.length;r++)if(n!==b[r][k])return g;" "===n&&(g=k+1)}for(n=1;n<b.length;n++)if((r=b[n][k])&&" "!==r)return g;return e};var Gj=function(b,e){if(!b.length)return 0;if(1===b.length)return b[0].length;let g=0;e=e||hf(b);let k;for(k=0;k<e;k++){for(var n=b[0].substr(-k-1,1),r=1;r<b.length;r++)if(n!==b[r].substr(-k-1,1))return g;" "===n&&(g=k+1)}for(n=1;n<b.length;n++)if((r=b[n].charAt(b[n].length-k-1))&&" "!==r)return g;return e};a.wrap$$module$build$src$core$utils$string=
function(b,e){b=b.split("\n");for(let g=0;g<b.length;g++)b[g]=nn(b[g],e);return b.join("\n")};var nn=function(b,e){if(b.length<=e)return b;const g=b.trim().split(/\s+/);for(var k=0;k<g.length;k++)g[k].length>e&&(e=g[k].length);var n=-Infinity;let r,w=1;do{k=n;r=b;b=[];n=g.length/w;let x=1;for(let P=0;P<g.length-1;P++)x<(P+1.5)/n?(x++,b[P]=!0):b[P]=!1;b=Hj(g,b,e);n=Fg(g,b,e);b=on(g,b);w++}while(n>k);return r};var Fg=function(b,e,g){const k=[0],n=[];for(var r=0;r<b.length;r++)k[k.length-1]+=b[r].length,
!0===e[r]?(k.push(0),n.push(b[r].charAt(b[r].length-1))):!1===e[r]&&k[k.length-1]++;b=Math.max(...k);for(r=e=0;r<k.length;r++)e-=2*Math.pow(Math.abs(g-k[r]),1.5),e-=Math.pow(b-k[r],1.5),-1!==".?!".indexOf(n[r])?e+=g/3:-1!==",;)]}".indexOf(n[r])&&(e+=g/4);1<k.length&&k[k.length-1]<=k[k.length-2]&&(e+=.5);return e};var Hj=function(b,e,g){let k=Fg(b,e,g),n;for(let r=0;r<e.length-1;r++){if(e[r]===e[r+1])continue;const w=[].concat(e);w[r]=!w[r];w[r+1]=!w[r+1];const x=Fg(b,w,g);x>k&&(k=x,n=w)}return n?
Hj(b,n,g):e};var on=function(b,e){const g=[];for(let k=0;k<b.length;k++)g.push(b[k]),void 0!==e[k]&&g.push(e[k]?"\n":" ");return g.join("")};a.isNumber$$module$build$src$core$utils$string=function(b){return/^\s*-?\d+(\.\d+)?\s*$/.test(b)};var ge=function(b){if(b=Ij(b)){for(b=b.tooltip;"function"===typeof b;)b=b();if("string"!==typeof b)throw Error("Tooltip function must return a string.");return b}return""};var Ij=function(b){for(;b&&b.tooltip;){if("string"===typeof b.tooltip||"function"===typeof b.tooltip)return b;
b=b.tooltip}return null};var Jj=function(){document.querySelector(".blocklyTooltipDiv")||(Ta=document.createElement("div"),Ta.className="blocklyTooltipDiv",(E()||document.body).appendChild(Ta))};var he=function(b){b.mouseOverWrapper_=V(b,"pointerover",null,pn);b.mouseOutWrapper_=V(b,"pointerout",null,qn);b.addEventListener("pointermove",Kj,!1)};var Gg=function(b){b&&(ca(b.mouseOverWrapper_),ca(b.mouseOutWrapper_),b.removeEventListener("pointermove",Kj))};var pn=function(b){td||(b=Ij(b.currentTarget),
sb!==b&&(pc(),ie=null,sb=b),clearTimeout(Lj))};var qn=function(b){td||(Lj=setTimeout(function(){ie=sb=null;pc()},1),clearTimeout(Ic),Ic=0)};var Kj=function(b){if(sb&&sb.tooltip&&!td)if(je){const e=Hg-b.pageX;b=Ig-b.pageY;Math.sqrt(e*e+b*b)>Mj&&pc()}else ie!==sb&&(clearTimeout(Ic),Hg=b.pageX,Ig=b.pageY,Ic=setTimeout(rn,Nj))};var Oj=function(){ie=sb=null;pc()};var pc=function(){je&&(je=!1,Ta&&(Ta.style.display="none"));Ic&&(clearTimeout(Ic),Ic=0)};var Pj=function(){pc();td=!0};var Qj=function(){td=
!1};var tn=function(){Ta&&sb&&("function"===typeof jf?jf(Ta,sb):sn())};var sn=function(){var b=ge(sb);b=a.wrap$$module$build$src$core$utils$string(b,Rj);b=b.split("\n");for(let e=0;e<b.length;e++){const g=document.createElement("div");g.appendChild(document.createTextNode(b[e]));Ta.appendChild(g)}};var un=function(b){const e=document.documentElement.clientWidth,g=document.documentElement.clientHeight;let k=Hg;k=b?k-(Jg+Ta.offsetWidth):k+Jg;let n=Ig+Kg;n+Ta.offsetHeight>g+window.scrollY&&(n-=Ta.offsetHeight+
2*Kg);b?k=Math.max(kf-window.scrollX,k):k+Ta.offsetWidth>e+window.scrollX-2*kf&&(k=e-Ta.offsetWidth-2*kf);return{x:k,y:n}};var rn=function(){if(!td&&(ie=sb,Ta)){Ta.textContent="";tn();var b=sb.RTL;Ta.style.direction=b?"rtl":"ltr";Ta.style.display="block";je=!0;var {x:e,y:g}=un(b);Ta.style.left=e+"px";Ta.style.top=g+"px"}};var qc=function(b,e){for(const g in e)b[g]=null!==e[g]&&"object"===typeof e[g]?qc(b[g]||Object.create(null),e[g]):e[g];return b};var Jc=function(b){return void 0!==b.bubbleIsVisible&&
void 0!==b.setBubbleVisible};var Mg=function(){return Lg};var Sj=function(b){Lg=b};var Og=function(){return Ng};var Tj=function(b){Ng=b};var Kc=function(b){b=`${b}`.toLowerCase().trim();var e=Uj[b];if(e)return e;e="0x"===b.substring(0,2)?"#"+b.substring(2):b;e="#"===e[0]?e:"#"+e;if(/^#[0-9a-f]{6}$/.test(e))return e;if(/^#[0-9a-f]{3}$/.test(e))return["#",e[1],e[1],e[2],e[2],e[3],e[3]].join("");var g=b.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return g&&(b=Number(g[1]),e=Number(g[2]),
g=Number(g[3]),0<=b&&256>b&&0<=e&&256>e&&0<=g&&256>g)?lf(b,e,g):null};var lf=function(b,e,g){e=b<<16|e<<8|g;return 16>b?"#"+(16777216|e).toString(16).substr(1):"#"+e.toString(16)};var Pg=function(b){b=Kc(b);if(!b)return[0,0,0];b=parseInt(b.substr(1),16);return[b>>16,b>>8&255,b&255]};var Qg=function(b,e,g){let k=0,n=0,r=0;if(0===e)r=n=k=g;else{const w=Math.floor(b/60),x=b/60-w;b=g*(1-e);const P=g*(1-e*x);e=g*(1-e*(1-x));switch(w){case 1:k=P;n=g;r=b;break;case 2:k=b;n=g;r=e;break;case 3:k=b;n=P;r=g;
break;case 4:k=e;n=b;r=g;break;case 5:k=g;n=b;r=P;break;case 6:case 0:k=g,n=e,r=b}}return lf(Math.floor(k),Math.floor(n),Math.floor(r))};var ud=function(b,e,g){b=Kc(b);if(!b)return null;e=Kc(e);if(!e)return null;b=Pg(b);e=Pg(e);return lf(Math.round(e[0]+g*(b[0]-e[0])),Math.round(e[1]+g*(b[1]-e[1])),Math.round(e[2]+g*(b[2]-e[2])))};var Vj=function(b){return Qg(b,Lg,255*Ng)};var Rg=function(b,e,g){const k=[];var n=b.split("");n.push("");var r=0;b=[];let w=null;for(let P=0;P<n.length;P++){var x=n[P];
if(0===r)if("%"===x)(r=b.join(""))&&k.push(r),b.length=0,r=1;else if(g&&"\n"===x){const ea=b.join("");ea&&k.push(ea);b.length=0;k.push(x)}else b.push(x);else 1===r?"%"===x?(b.push(x),r=0):e&&"0"<=x&&"9">=x?(r=2,w=x,(x=b.join(""))&&k.push(x),b.length=0):"{"===x?r=3:(b.push("%",x),r=0):2===r?"0"<=x&&"9">=x?w+=x:(r=void 0,k.push(parseInt(null!=(r=w)?r:"",10)),P--,r=0):3===r&&(""===x?(b.splice(0,0,"%{"),P--,r=0):"}"!==x?b.push(x):(r=b.join(""),/[A-Z]\w*/i.test(r)?(x=r.toUpperCase(),(x=x.startsWith("BKY_")?
x.substring(4):null)&&x in a.Msg$$module$build$src$core$msg?(r=a.Msg$$module$build$src$core$msg[x],"string"===typeof r?Array.prototype.push.apply(k,Rg(r,e,g)):e?k.push(`${r}`):k.push(r)):k.push("%{"+r+"}")):k.push("%{"+r+"}"),r=b.length=0))}(e=b.join(""))&&k.push(e);r=[];for(n=b.length=0;n<k.length;n++)"string"!==typeof k[n]||g&&"\n"===k[n]?((e=b.join(""))&&r.push(e),b.length=0,r.push(k[n])):b.push(k[n]);(e=b.join(""))&&r.push(e);b.length=0;return r};var Wj=function(b){return Rg(b,!0,!0)};var Ra=
function(b){if("string"!==typeof b)return b;b=Rg(b,!1,!1);return b.length?String(b[0]):""};var ke=function(b){const e="string"===typeof b?Ra(b):b;var g=Number(e);if(!isNaN(g)&&0<=g&&360>=g)return{hue:g,hex:Qg(g,Mg(),255*Og())};if(g=Kc(e))return{hue:null,hex:g};g='Invalid colour: "'+e+'"';b!==e&&(g+=' (from "'+b+'")');throw Error(g);};var Lc=function(b){return void 0!==b.getProcedureModel&&void 0!==b.doProcedureUpdate&&void 0!==b.isProcedureDef};var Sg=function(b){return void 0!==b.startPublishing&&
void 0!==b.stopPublishing};var tb=function(b,e){d(U.FIELD,b,e)};a.fromJson$$module$build$src$core$field_registry=function(b){return Xj.fromJsonInternal(b)};var wn=function(b){let e=!1;const g=b.map(([w,x])=>{if("string"===typeof w)return[Ra(w),x];e=!0;return[null!==w.alt?Object.assign({},w,{alt:Ra(w.alt)}):Object.assign({},w),x]});if(e||2>b.length)return{options:g};var k=g.map(([w])=>w),n=hf(k);b=Fj(k,n);const r=Gj(k,n);if(!b&&!r||n<=b+r)return{options:g};n=b?k[0].substring(0,b-1):void 0;k=r?k[0].substr(1-
r):void 0;return{options:vn(g,b,r),prefix:n,suffix:k}};var vn=function(b,e,g){return b.map(([k,n])=>[k.substring(e,k.length-g),n])};var Yj=function(b){if(!Array.isArray(b))throw TypeError("FieldDropdown options must be an array.");if(!b.length)throw TypeError("FieldDropdown options must not be an empty array.");let e=!1;for(let g=0;g<b.length;g++){const k=b[g];Array.isArray(k)?"string"!==typeof k[1]?(e=!0,console.error("Invalid option["+g+"]: Each FieldDropdown option id must be a string. Found "+
k[1]+" in: ",k)):k[0]&&"string"!==typeof k[0]&&"string"!==typeof k[0].src&&(e=!0,console.error("Invalid option["+g+"]: Each FieldDropdown option must have a string label or image description. Found"+k[0]+" in: ",k)):(e=!0,console.error("Invalid option["+g+"]: Each FieldDropdown option must be an array. Found: ",k))}if(e)throw TypeError("Found invalid FieldDropdown options.");};a.register$$module$build$src$core$extensions=function(b,e){if("string"!==typeof b||""===b.trim())throw Error('Error: Invalid extension name "'+
b+'"');if(vd[b])throw Error('Error: Extension "'+b+'" is already registered.');if("function"!==typeof e)throw Error('Error: Extension "'+b+'" must be a function');vd[b]=e};a.registerMixin$$module$build$src$core$extensions=function(b,e){if(!e||"object"!==typeof e)throw Error('Error: Mixin "'+b+'" must be a object');a.register$$module$build$src$core$extensions(b,function(){this.mixin(e)})};a.registerMutator$$module$build$src$core$extensions=function(b,e,g,k){const n='Error when registering mutator "'+
b+'": ';Zj(n,e);const r=ak(e,n);if(g&&"function"!==typeof g)throw Error(n+'Extension "'+b+'" is not a function');a.register$$module$build$src$core$extensions(b,function(){r&&this.setMutator(new a.MutatorIcon$$module$build$src$core$icons$mutator_icon(k||[],this));this.mixin(e);g&&g.apply(this)})};var bk=function(b){return!!vd[b]};var Ug=function(b,e,g){const k=vd[b];if("function"!==typeof k)throw Error('Error: Extension "'+b+'" not found.');let n;g?xn(b,e):n=Tg(e);k.apply(e);if(g)Zj('Error after applying mutator "'+
b+'": ',e);else if(!yn(n,e))throw Error('Error when applying extension "'+b+'": mutation properties changed when applying a non-mutator extension.');};var xn=function(b,e){if(Tg(e).length)throw Error('Error: tried to apply mutation "'+b+'" to a block that already has mutator functions.  Block id: '+e.id);};var zn=function(b,e){return Vg(b.mutationToDom,b.domToMutation,e+" mutationToDom/domToMutation")};var An=function(b,e){return Vg(b.saveExtraState,b.loadExtraState,e+" saveExtraState/loadExtraState")};
var ak=function(b,e){return Vg(b.compose,b.decompose,e+" compose/decompose")};var Vg=function(b,e,g){if(b&&e){if("function"!==typeof b||"function"!==typeof e)throw Error(g+" must be a function");return!0}if(!b&&!e)return!1;throw Error(g+"Must have both or neither functions");};var Zj=function(b,e){const g=zn(e,b),k=An(e,b);if(!g&&!k)throw Error(b+"Mutations must contain either XML hooks, or JSON hooks, or both");ak(e,b)};var Tg=function(b){const e=[];void 0!==b.domToMutation&&e.push(b.domToMutation);
void 0!==b.mutationToDom&&e.push(b.mutationToDom);void 0!==b.saveExtraState&&e.push(b.saveExtraState);void 0!==b.loadExtraState&&e.push(b.loadExtraState);void 0!==b.compose&&e.push(b.compose);void 0!==b.decompose&&e.push(b.decompose);return e};var yn=function(b,e){e=Tg(e);if(e.length!==b.length)return!1;for(let g=0;g<e.length;g++)if(b[g]!==e[g])return!1;return!0};a.buildTooltipForDropdown$$module$build$src$core$extensions=function(b,e){const g=[];return function(){-1===g.indexOf(this.type)&&(Bn(this,
b,e),g.push(this.type));this.setTooltip(function(){const k=String(this.getFieldValue(b));return Ra(e[k])}.bind(this))}};var Bn=function(b,e,g){var k=b.getField(e);if(k instanceof Nb&&!k.isOptionListDynamic()){k=k.getOptions();for(const [,n]of k)void 0===g[n]&&console.warn(`No tooltip mapping for value ${n} of field `+`${e} of block type ${b.type}.`)}};a.buildTooltipWithFieldText$$module$build$src$core$extensions=function(b,e){return function(){this.setTooltip(function(){const g=this.getField(e);return Ra(b).replace("%1",
g?g.getText():"")}.bind(this))}};var ka=function(b,e){return" "+b+","+e+" "};var kb=function(b,e){return" "+b+e.join("")};var Wa=function(b,e){return" M "+b+","+e+" "};var Ma=function(b,e){return" m "+b+","+e+" "};var ac=function(b,e){return" l "+b+","+e+" "};var le=function(b){return" l"+b.join("")};var ha=function(b,e){return" "+b+" "+e+" "};var Sa=function(b,e,g,k){return b+" "+g+" "+g+" "+e+k};var ck=function(b,e){d(U.ICON,b.toString(),e)};var Wg=function(b){const e=b.getProcedureMap().getProcedures().filter(k=>
!k.getReturnTypes()).map(k=>[k.getName(),k.getParameters().map(n=>n.getName()),!1]);b.getBlocksByType("procedures_defnoreturn",!1).forEach(k=>{!Lc(k)&&Sd(k)&&e.push(k.getProcedureDef())});const g=b.getProcedureMap().getProcedures().filter(k=>!!k.getReturnTypes()).map(k=>[k.getName(),k.getParameters().map(n=>n.getName()),!0]);b.getBlocksByType("procedures_defreturn",!1).forEach(k=>{!Lc(k)&&Sd(k)&&g.push(k.getProcedureDef())});e.sort(dk);g.sort(dk);return[e,g]};var dk=function(b,e){return b[0].localeCompare(e[0],
void 0,{sensitivity:"base"})};a.findLegalName$$module$build$src$core$procedures=function(b,e){if(e.isInFlyout)return b;for(b=b||a.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!Cn(b,e.workspace,e);){const g=b.match(/^(.*?)(\d+)$/);b=g?g[1]+(parseInt(g[2])+1):b+"2"}return b};var Cn=function(b,e,g){return!ek(b,e,g)};var ek=function(b,e,g){for(const k of e.getAllBlocks(!1))if(k!==g&&Sd(k)&&a.Names$$module$build$src$core$names.equals(k.getProcedureDef()[0],b))return!0;g=g&&Lc(g)?null==g?void 0:
g.getProcedureModel():void 0;for(const k of e.getProcedureMap().getProcedures())if(k!==g&&a.Names$$module$build$src$core$names.equals(k.getName(),b))return!0;return!1};a.rename$$module$build$src$core$procedures=function(b){var e=this.getSourceBlock();if(!e)throw new Ia;b=b.trim();const g=a.findLegalName$$module$build$src$core$procedures(b,e);Lc(e)&&!e.isInsertionMarker()&&e.getProcedureModel().setName(g);const k=this.getValue();if(k!==b&&k!==g)for(b=e.workspace.getAllBlocks(!1),e=0;e<b.length;e++){const n=
b[e];n.renameProcedure&&n.renameProcedure(k,g)}return g};var Xg=function(b){function e(r,w){for(let P=0;P<r.length;P++){var x=r[P][0];const ea=r[P][1],Oa=a.createElement$$module$build$src$core$utils$xml("block");Oa.setAttribute("type",w);Oa.setAttribute("gap","16");const Ha=a.createElement$$module$build$src$core$utils$xml("mutation");Ha.setAttribute("name",x);Oa.appendChild(Ha);for(x=0;x<ea.length;x++){const fb=a.createElement$$module$build$src$core$utils$xml("arg");fb.setAttribute("name",ea[x]);
Ha.appendChild(fb)}g.push(Oa)}}const g=[];if(cb.procedures_defnoreturn){var k=a.createElement$$module$build$src$core$utils$xml("block");k.setAttribute("type","procedures_defnoreturn");k.setAttribute("gap","16");var n=a.createElement$$module$build$src$core$utils$xml("field");n.setAttribute("name","NAME");n.appendChild(a.createTextNode$$module$build$src$core$utils$xml(a.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE));k.appendChild(n);g.push(k)}cb.procedures_defreturn&&(k=a.createElement$$module$build$src$core$utils$xml("block"),
k.setAttribute("type","procedures_defreturn"),k.setAttribute("gap","16"),n=a.createElement$$module$build$src$core$utils$xml("field"),n.setAttribute("name","NAME"),n.appendChild(a.createTextNode$$module$build$src$core$utils$xml(a.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),k.appendChild(n),g.push(k));cb.procedures_ifreturn&&(k=a.createElement$$module$build$src$core$utils$xml("block"),k.setAttribute("type","procedures_ifreturn"),k.setAttribute("gap","16"),g.push(k));g.length&&g[g.length-
1].setAttribute("gap","24");b=Wg(b);e(b[0],"procedures_callnoreturn");e(b[1],"procedures_callreturn");return g};var fk=function(b){var e=[],g=b.getBlocksByType("procedures_mutatorarg",!1);for(let r=0,w;w=g[r];r++)e.push(w.getFieldValue("NAME"));g=a.createElement$$module$build$src$core$utils$xml("xml");const k=a.createElement$$module$build$src$core$utils$xml("block");k.setAttribute("type","procedures_mutatorarg");const n=a.createElement$$module$build$src$core$utils$xml("field");n.setAttribute("name",
"NAME");e=fg(a.DEFAULT_ARG$$module$build$src$core$procedures,e);e=a.createTextNode$$module$build$src$core$utils$xml(e);n.appendChild(e);k.appendChild(n);g.appendChild(k);b.updateToolbox(g)};var gk=function(b){if(b.type===lc&&"mutator"===b.bubbleType&&b.isOpen&&b.blockId){b=C(b.workspaceId).getBlockById(b.blockId);var e=b.type;if("procedures_defnoreturn"===e||"procedures_defreturn"===e)b=b.getIcon(a.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),fk(b),b.addChangeListener(Dn)}};
var Dn=function(b){if(b.type===a.CREATE$$module$build$src$core$events$utils||b.type===a.DELETE$$module$build$src$core$events$utils||b.type===a.CHANGE$$module$build$src$core$events$utils||b.type===wd)b=C(b.workspaceId),fk(b)};var hk=function(b,e){return e.getAllBlocks(!1).filter(g=>En(g,b)||tm(g)&&a.Names$$module$build$src$core$names.equals(g.getProcedureCall(),b))};var En=function(b,e){return Lc(b)&&!b.isProcedureDef()&&b.getProcedureModel()&&a.Names$$module$build$src$core$names.equals(b.getProcedureModel().getName(),
e)};a.mutateCallers$$module$build$src$core$procedures=function(b){const e=da();var g=b.getProcedureDef()[0];const k=b.mutationToDom(!0);b=hk(g,b.workspace);for(let r=0,w;w=b[r];r++){g=(g=w.mutationToDom())&&Qd(g);w.domToMutation&&w.domToMutation(k);var n=w.mutationToDom();n=n&&Qd(n);g!==n&&(S(!1),ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(w,"mutation",null,g,n)),S(e))}};a.getDefinition$$module$build$src$core$procedures=function(b,e){for(const g of e.getAllBlocks(!1))if(Lc(g)&&g.isProcedureDef()&&
a.Names$$module$build$src$core$names.equals(g.getProcedureModel().getName(),b)||Sd(g)&&a.Names$$module$build$src$core$names.equals(g.getProcedureDef()[0],b))return g;return null};var Yg=function(b){return b.isDynamic};var Fn=function(b){return void 0!==b.pathDown&&void 0!==b.pathUp};var Gn=function(b){return void 0!==b.pathLeft&&void 0!==b.pathRight};var mf=function(b){let e=b.outputConnection;if(!e||b.previousConnection&&b.previousConnection.isConnected())e=b.previousConnection;return e};var Hn=
function(b,e){if(!b||!e)throw Error("Cannot connect null connections.");b.targetConnection=e;e.targetConnection=b};var In=function(b,e){let g=null;e=e.outputConnection;const k=null==e?void 0:e.getConnectionChecker();for(let n=0,r;r=b.inputList[n];n++){const w=r.connection;let x;if(w&&(null==(x=k)?0:x.canConnect(e,w,!1))){if(g)return null;g=w}}return g};var Jn=function(b,e){let g;for(;g=In(b,e);)if(b=g.targetBlock(),!b||b.isShadow())return g;return null};var me=function(b,e){d(U.RENDERER,b,e)};var ik=
function(b,e,g){b=new (p(U.RENDERER,b))(b);b.init(e,g);return b};var jk=function(b){Td(b.getTargetWorkspace(),void 0,"String")};var kk=function(b){Td(b.getTargetWorkspace(),void 0,"Number")};var lk=function(b){Td(b.getTargetWorkspace(),void 0,"Colour")};var Zg=function(b){let e=[],g=document.createElement("button");g.setAttribute("text",a.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE);g.setAttribute("callbackKey","CREATE_VARIABLE_STRING");e.push(g);g=document.createElement("button");g.setAttribute("text",
a.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE);g.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER");e.push(g);g=document.createElement("button");g.setAttribute("text",a.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE);g.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR");e.push(g);b.registerButtonCallback("CREATE_VARIABLE_STRING",jk);b.registerButtonCallback("CREATE_VARIABLE_NUMBER",kk);b.registerButtonCallback("CREATE_VARIABLE_COLOUR",lk);b=mk(b);return e.concat(b)};var mk=function(b){b=
b.getAllVariables();const e=[];if(0<b.length){if(cb.variables_set_dynamic){var g=b[b.length-1];const k=a.createElement$$module$build$src$core$utils$xml("block");k.setAttribute("type","variables_set_dynamic");k.setAttribute("gap","24");k.appendChild(hd(g));e.push(k)}if(cb.variables_get_dynamic){b.sort(Ud.compareByName);for(let k=0,n;n=b[k];k++)g=a.createElement$$module$build$src$core$utils$xml("block"),g.setAttribute("type","variables_get_dynamic"),g.setAttribute("gap","8"),g.appendChild(hd(n)),e.push(g)}}return e};
var nf=function(b){return void 0!==b.toCopyData};var nk=function(){Aa.registry.register({name:bc.ESCAPE,preconditionFn(b){return!b.options.readOnly},callback(b){b.hideChaff();return!0},keyCodes:[ra.ESC]})};var ok=function(){Aa.registry.register({name:bc.DELETE,preconditionFn(b){const e=z();return!b.options.readOnly&&null!=e&&e.isDeletable()},callback(b,e){e.preventDefault();if(cc.inProgress())return!1;z().checkAndDelete();return!0},keyCodes:[ra.DELETE,ra.BACKSPACE]})};var pk=function(){const b=Aa.registry.createSerializedKey(ra.C,
[ra.CTRL]),e=Aa.registry.createSerializedKey(ra.C,[ra.ALT]),g=Aa.registry.createSerializedKey(ra.C,[ra.META]);Aa.registry.register({name:bc.COPY,preconditionFn(k){const n=z();return!k.options.readOnly&&!cc.inProgress()&&null!=n&&n.isDeletable()&&n.isMovable()&&nf(n)},callback(k,n){n.preventDefault();k.hideChaff();n=z();if(!n||!nf(n))return!1;ne=n.toCopyData();of=k;return!!ne},keyCodes:[b,e,g]})};var qk=function(){const b=Aa.registry.createSerializedKey(ra.X,[ra.CTRL]),e=Aa.registry.createSerializedKey(ra.X,
[ra.ALT]),g=Aa.registry.createSerializedKey(ra.X,[ra.META]);Aa.registry.register({name:bc.CUT,preconditionFn(k){const n=z();return!k.options.readOnly&&!cc.inProgress()&&null!=n&&n instanceof Ob&&n.isDeletable()&&n.isMovable()&&!n.workspace.isFlyout},callback(k){const n=z();if(!n||!nf(n))return!1;ne=n.toCopyData();of=k;n.checkAndDelete();return!0},keyCodes:[b,e,g]})};var rk=function(){const b=Aa.registry.createSerializedKey(ra.V,[ra.CTRL]),e=Aa.registry.createSerializedKey(ra.V,[ra.ALT]),g=Aa.registry.createSerializedKey(ra.V,
[ra.META]);Aa.registry.register({name:bc.PASTE,preconditionFn(k){return!k.options.readOnly&&!cc.inProgress()},callback(){return ne&&of?!!Zd(ne,of):!1},keyCodes:[b,e,g]})};var sk=function(){const b=Aa.registry.createSerializedKey(ra.Z,[ra.CTRL]),e=Aa.registry.createSerializedKey(ra.Z,[ra.ALT]),g=Aa.registry.createSerializedKey(ra.Z,[ra.META]);Aa.registry.register({name:bc.UNDO,preconditionFn(k){return!k.options.readOnly&&!cc.inProgress()},callback(k){k.hideChaff();k.undo(!1);return!0},keyCodes:[b,
e,g]})};var tk=function(){const b=Aa.registry.createSerializedKey(ra.Z,[ra.SHIFT,ra.CTRL]),e=Aa.registry.createSerializedKey(ra.Z,[ra.SHIFT,ra.ALT]),g=Aa.registry.createSerializedKey(ra.Z,[ra.SHIFT,ra.META]),k=Aa.registry.createSerializedKey(ra.Y,[ra.CTRL]);Aa.registry.register({name:bc.REDO,preconditionFn(n){return!cc.inProgress()&&!n.options.readOnly},callback(n){n.hideChaff();n.undo(!0);return!0},keyCodes:[b,e,g,k]})};var uk=function(){nk();ok();pk();qk();rk();sk();tk()};var wk=function(b){const e=
{id:b.getId(),name:b.getName(),returnTypes:b.getReturnTypes()};if(!b.getParameters().length)return e;e.parameters=b.getParameters().map(g=>vk(g));return e};var vk=function(b){const e={id:b.getId(),name:b.getName()};if(!b.getTypes().length)return e;e.types=b.getTypes();return e};var yk=function(b,e,g,k){b=(new b(k,g.name,g.id)).setReturnTypes(g.returnTypes);if(!g.parameters)return b;for(const [n,r]of g.parameters.entries())b.insertParameter(xk(e,r,k),n);return b};var xk=function(b,e,g){b=new b(g,e.name,
e.id);e.types&&b.setTypes(e.types);return b};var oe=function(b,e,g){const k=g.getBoundingRectangle(),n=k.right-k.left,r=ae(e.top,k.top,e.top+e.height-(k.bottom-k.top))-k.top;let w=e.left;e=e.left+e.width-n;b.RTL?w=Math.min(e,w):e=Math.max(w,e);return(b=ae(w,k.left,e)-k.left)||r?(g.moveBy(b,r,["inbounds"]),!0):!1};var Ak=function(b){return e=>{var g=b.getMetricsManager();if(g.hasFixedEdges()&&!b.isDragging()){var k;if(-1!==zk.indexOf(null!=(k=e.type)?k:"")){k=g.getScrollMetrics(!0);const n=Kn(b,e);
n&&(g=a.getGroup$$module$build$src$core$events$utils()||!1,a.setGroup$$module$build$src$core$events$utils(e.group),oe(b,k,n)&&!e.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),a.setGroup$$module$build$src$core$events$utils(g))}else e.type===cd&&e.scale&&e.oldScale&&e.scale>e.oldScale&&$g(b)}}};var Kn=function(b,e){let g=null;switch(e.type){case a.CREATE$$module$build$src$core$events$utils:case a.MOVE$$module$build$src$core$events$utils:(g=b.getBlockById(e.blockId))&&
(g=g.getRootBlock());break;case xd:case rc:g=b.getCommentById(e.commentId)}return g};var $g=function(b){var e=b.getMetricsManager();if(e.hasFixedEdges()&&!b.isDragging()){e=e.getScrollMetrics(!0);var g=b.getTopBoundedElements();for(let k=0,n;n=g[k];k++)oe(b,e,n)}};var Bk=function(b,e){const g=[];for(const k of b.getIcons())if(!Jc(k)||k.bubbleIsVisible())g.push({location:e,icon:k}),k.onLocationChange(e);for(const k of b.getChildren(!1))g.push(...Bk(k,Z.sum(e,k.relativeCoords)));return g};var Ck=function(){Ba.registry.register({displayText(){return a.Msg$$module$build$src$core$msg.UNDO},
preconditionFn(b){return 0<b.workspace.getUndoStack().length?"enabled":"disabled"},callback(b){b.workspace.undo(!1)},scopeType:Ba.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})};var Dk=function(){Ba.registry.register({displayText(){return a.Msg$$module$build$src$core$msg.REDO},preconditionFn(b){return 0<b.workspace.getRedoStack().length?"enabled":"disabled"},callback(b){b.workspace.undo(!0)},scopeType:Ba.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})};var Ek=function(){Ba.registry.register({displayText(){return a.Msg$$module$build$src$core$msg.CLEAN_UP},
preconditionFn(b){return b.workspace.isMovable()?1<b.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(b){b.workspace.cleanUp()},scopeType:Ba.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})};var Fk=function(b,e){function g(r){n--;r.setCollapsed(b);0===n&&a.setGroup$$module$build$src$core$events$utils(!1)}let k=0,n=0;a.setGroup$$module$build$src$core$events$utils(!0);for(let r=0;r<e.length;r++){let w=e[r];for(;w;)n++,setTimeout(g.bind(null,w),k),w=w.getNextBlock(),k+=10}};
var Gk=function(){Ba.registry.register({displayText(){return a.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(b){if(b.workspace.options.collapse){b=b.workspace.getTopBlocks(!1);for(let e=0;e<b.length;e++){let g=b[e];for(;g;){if(!g.isCollapsed())return"enabled";g=g.getNextBlock()}}return"disabled"}return"hidden"},callback(b){Fk(!0,b.workspace.getTopBlocks(!0))},scopeType:Ba.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})};var Hk=function(){Ba.registry.register({displayText(){return a.Msg$$module$build$src$core$msg.EXPAND_ALL},
preconditionFn(b){if(b.workspace.options.collapse){b=b.workspace.getTopBlocks(!1);for(let e=0;e<b.length;e++){let g=b[e];for(;g;){if(g.isCollapsed())return"enabled";g=g.getNextBlock()}}return"disabled"}return"hidden"},callback(b){Fk(!1,b.workspace.getTopBlocks(!0))},scopeType:Ba.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})};var Ik=function(b,e){if(b.isDeletable())Array.prototype.push.apply(e,b.getDescendants(!1));else{b=b.getChildren(!1);for(let g=0;g<b.length;g++)Ik(b[g],e)}};var ah=function(b){const e=
[];b=b.getTopBlocks(!0);for(let g=0;g<b.length;g++)Ik(b[g],e);return e};var pf=function(b,e){e?a.setGroup$$module$build$src$core$events$utils(e):(a.setGroup$$module$build$src$core$events$utils(!0),e=a.getGroup$$module$build$src$core$events$utils());const g=b.shift();g&&(g.isDeadOrDying()?pf(b,e):(g.dispose(!1,!0),setTimeout(pf,10,b,e)));a.setGroup$$module$build$src$core$events$utils(!1)};var Jk=function(){Ba.registry.register({displayText(b){if(!b.workspace)return"";b=ah(b.workspace).length;return 1===
b?a.Msg$$module$build$src$core$msg.DELETE_BLOCK:a.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${b}`)},preconditionFn(b){return b.workspace?0<ah(b.workspace).length?"enabled":"disabled":"disabled"},callback(b){if(b.workspace){b.workspace.cancelCurrentGesture();var e=ah(b.workspace);2>e.length?pf(e):bg(a.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(e.length)),function(g){g&&pf(e)})}},scopeType:Ba.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})};var Ln=function(){Ck();
Dk();Ek();Gk();Hk();Jk()};var Kk=function(){Ba.registry.register({displayText(){return a.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(b){b=b.block;return!b.isInFlyout&&b.isDeletable()&&b.isMovable()?b.isDuplicatable()?"enabled":"disabled":"hidden"},callback(b){if(b.block){var e=b.block.toCopyData();e&&Zd(e,b.block.workspace)}},scopeType:Ba.ScopeType.BLOCK,id:"blockDuplicate",weight:1})};var Lk=function(){Ba.registry.register({displayText(b){return b.block.hasIcon(ab.TYPE)?a.Msg$$module$build$src$core$msg.REMOVE_COMMENT:
a.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(b){b=b.block;return!b.isInFlyout&&b.workspace.options.comments&&!b.isCollapsed()&&b.isEditable()?"enabled":"hidden"},callback(b){b=b.block;b.hasIcon(ab.TYPE)?b.setCommentText(null):b.setCommentText("")},scopeType:Ba.ScopeType.BLOCK,id:"blockComment",weight:2})};var Mk=function(){Ba.registry.register({displayText(b){return b.block.getInputsInline()?a.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:a.Msg$$module$build$src$core$msg.INLINE_INPUTS},
preconditionFn(b){b=b.block;if(!b.isInFlyout&&b.isMovable()&&!b.isCollapsed())for(let e=1;e<b.inputList.length;e++)if(!(b.inputList[e-1]instanceof qf||b.inputList[e]instanceof qf))return"enabled";return"hidden"},callback(b){b.block.setInputsInline(!b.block.getInputsInline())},scopeType:Ba.ScopeType.BLOCK,id:"blockInline",weight:3})};var Nk=function(){Ba.registry.register({displayText(b){return b.block.isCollapsed()?a.Msg$$module$build$src$core$msg.EXPAND_BLOCK:a.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},
preconditionFn(b){b=b.block;return!b.isInFlyout&&b.isMovable()&&b.workspace.options.collapse?"enabled":"hidden"},callback(b){b.block.setCollapsed(!b.block.isCollapsed())},scopeType:Ba.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})};var Ok=function(){Ba.registry.register({displayText(b){return b.block.isEnabled()?a.Msg$$module$build$src$core$msg.DISABLE_BLOCK:a.Msg$$module$build$src$core$msg.ENABLE_BLOCK},preconditionFn(b){b=b.block;return!b.isInFlyout&&b.workspace.options.disable&&b.isEditable()?
b.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(b){b=b.block;const e=a.getGroup$$module$build$src$core$events$utils();e||a.setGroup$$module$build$src$core$events$utils(!0);b.setEnabled(!b.isEnabled());a.setGroup$$module$build$src$core$events$utils(e)},scopeType:Ba.ScopeType.BLOCK,id:"blockDisable",weight:5})};var Pk=function(){Ba.registry.register({displayText(b){var e=b.block;b=e.getDescendants(!1).length;(e=e.getNextBlock())&&(b-=e.getDescendants(!1).length);return 1===b?a.Msg$$module$build$src$core$msg.DELETE_BLOCK:
a.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${b}`)},preconditionFn(b){return!b.block.isInFlyout&&b.block.isDeletable()?"enabled":"hidden"},callback(b){b.block&&b.block.checkAndDelete()},scopeType:Ba.ScopeType.BLOCK,id:"blockDelete",weight:6})};var Qk=function(){Ba.registry.register({displayText(){return a.Msg$$module$build$src$core$msg.HELP},preconditionFn(b){b=b.block;return("function"===typeof b.helpUrl?b.helpUrl():b.helpUrl)?"enabled":"hidden"},callback(b){b.block.showHelp()},
scopeType:Ba.ScopeType.BLOCK,id:"blockHelp",weight:7})};var Mn=function(){Kk();Lk();Mk();Nk();Ok();Pk();Qk()};var Rk=function(){Ln();Mn()};var Nn=function(b,e){b.setAttribute("dir","LTR");li(e.hasCss,e.pathToMedia);b=N(I.SVG,{xmlns:Od,"xmlns:html":Pb,"xmlns:xlink":lb,version:"1.1","class":"blocklySvg",tabindex:"0"},b);const g=N(I.DEFS,{},b),k=String(Math.random()).substring(2);e.gridPattern=bh.createDom(k,e.gridOptions,g);return b};var On=function(b,e,g){g.parentWorkspace=null;g=new Ab(g);const k=
g.options;g.scale=k.zoomOptions.startScale;e.appendChild(g.createDom("blocklyMainBackground",b));var n=g.getRenderer().getClassName();n&&la(b,n);(n=g.getTheme().getClassName())&&la(b,n);!k.hasCategories&&k.languageTree&&(b=g.addFlyout(I.SVG),dd(b,e));k.hasTrashcan&&g.addTrashcan();k.zoomOptions&&k.zoomOptions.controls&&g.addZoomControls();g.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color");g.translate(0,0);g.addChangeListener(Ak(g));W(g);cj();nj();Jj();return g};var Rn=
function(b){const e=b.options;var g=b.getParentSvg();H(g.parentNode,"contextmenu",null,function(k){ta(k)||k.preventDefault()});g=H(window,"resize",null,function(){pc();b.hideComponents(!0);Aj();gj();W(b);$g(b)});b.setResizeHandlerWrapper(g);Pn();if(e.languageTree){g=b.getToolbox();const k=b.getFlyout(!0);g?g.init():k&&(k.init(b),k.show(e.languageTree),"function"===typeof k.scrollToStart&&k.scrollToStart())}e.hasTrashcan&&b.trashcan.init();e.zoomOptions&&e.zoomOptions.controls&&b.zoomControls_.init();
e.moveOptions&&e.moveOptions.scrollbars?(b.scrollbar=new ch(b,!0===e.moveOptions.scrollbars||!!e.moveOptions.scrollbars.horizontal,!0===e.moveOptions.scrollbars||!!e.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),b.scrollbar.resize()):b.setMetrics({x:.5,y:.5});e.hasSounds&&Qn(e.pathToMedia,b)};var Sn=function(b){const e=G();if(e&&!(ta(b)||e.rendered&&!e.isVisible()))Aa.registry.onKeyDown(e,b)};var Pn=function(){Sk||(H(document,"scroll",null,function(){const b=K();for(let e=0,g;g=
b[e];e++)g instanceof Ab&&g.updateInverseScreenCTM()}),H(document,"keydown",null,Sn),V(document,"touchend",null,xb),V(document,"touchcancel",null,xb),yd&&H(window,"orientationchange",document,function(){W(G())}));Sk=!0};var Qn=function(b,e){function g(){for(;n.length;){const r=n.pop();r&&ca(r)}k.preload()}const k=e.getAudioManager();k.load([b+"click.mp3",b+"click.wav",b+"click.ogg"],"click");k.load([b+"disconnect.wav",b+"disconnect.mp3",b+"disconnect.ogg"],"disconnect");k.load([b+"delete.mp3",b+"delete.ogg",
b+"delete.wav"],"delete");const n=[];n.push(H(document,"pointermove",null,g,!0));n.push(H(document,"touchstart",null,g,!0))};var Tn=function(b){return b.isSelectable()};var ma=ma||{};ma.scope={};ma.ASSUME_ES5=!1;ma.ASSUME_NO_NATIVE_MAP=!1;ma.ASSUME_NO_NATIVE_SET=!1;ma.SIMPLE_FROUND_POLYFILL=!1;ma.ISOLATE_POLYFILLS=!1;ma.FORCE_POLYFILL_PROMISE=!1;ma.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;ma.defineProperty=ma.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:
function(b,e,g){if(b==Array.prototype||b==Object.prototype)return b;b[e]=g.value;return b};ma.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<b.length;++e){var g=b[e];if(g&&g.Math==Math)return g}throw Error("Cannot find global object");};ma.global=ma.getGlobal(this);ma.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");ma.TRUST_ES6_POLYFILLS=!ma.ISOLATE_POLYFILLS||
ma.IS_SYMBOL_NATIVE;ma.polyfills={};ma.propertyToPolyfillSymbol={};ma.POLYFILL_PREFIX="$jscp$";ma.polyfill=function(b,e,g,k){e&&(ma.ISOLATE_POLYFILLS?ma.polyfillIsolated(b,e,g,k):ma.polyfillUnisolated(b,e,g,k))};ma.polyfillUnisolated=function(b,e,g,k){g=ma.global;b=b.split(".");for(k=0;k<b.length-1;k++){var n=b[k];if(!(n in g))return;g=g[n]}b=b[b.length-1];k=g[b];e=e(k);e!=k&&null!=e&&ma.defineProperty(g,b,{configurable:!0,writable:!0,value:e})};ma.polyfillIsolated=function(b,e,g,k){var n=b.split(".");
b=1===n.length;k=n[0];k=!b&&k in ma.polyfills?ma.polyfills:ma.global;for(var r=0;r<n.length-1;r++){var w=n[r];if(!(w in k))return;k=k[w]}n=n[n.length-1];g=ma.IS_SYMBOL_NATIVE&&"es6"===g?k[n]:null;e=e(g);null!=e&&(b?ma.defineProperty(ma.polyfills,n,{configurable:!0,writable:!0,value:e}):e!==g&&(void 0===ma.propertyToPolyfillSymbol[n]&&(g=1E9*Math.random()>>>0,ma.propertyToPolyfillSymbol[n]=ma.IS_SYMBOL_NATIVE?ma.global.Symbol(n):ma.POLYFILL_PREFIX+g+"$"+n),ma.defineProperty(k,ma.propertyToPolyfillSymbol[n],
{configurable:!0,writable:!0,value:e})))};ma.polyfill("globalThis",function(b){return b||ma.global},"es_2020","es3");ma.arrayIteratorImpl=function(b){var e=0;return function(){return e<b.length?{done:!1,value:b[e++]}:{done:!0}}};ma.arrayIterator=function(b){return{next:ma.arrayIteratorImpl(b)}};ma.initSymbol=function(){};ma.iteratorPrototype=function(b){b={next:b};b[Symbol.iterator]=function(){return this};return b};ma.iteratorFromArray=function(b,e){b instanceof String&&(b+="");var g=0,k=!1,n={next:function(){if(!k&&
g<b.length){var r=g++;return{value:e(r,b[r]),done:!1}}k=!0;return{done:!0,value:void 0}}};n[Symbol.iterator]=function(){return n};return n};ma.polyfill("Array.prototype.values",function(b){return b?b:function(){return ma.iteratorFromArray(this,function(e,g){return g})}},"es8","es3");ma.polyfill("Array.prototype.flat",function(b){return b?b:function(e){e=void 0===e?1:e;var g=[];Array.prototype.forEach.call(this,function(k){Array.isArray(k)&&0<e?(k=Array.prototype.flat.call(k,e-1),g.push.apply(g,k)):
g.push(k)});return g}},"es9","es5");ma.owns=function(b,e){return Object.prototype.hasOwnProperty.call(b,e)};ma.polyfill("Object.entries",function(b){return b?b:function(e){var g=[],k;for(k in e)ma.owns(e,k)&&g.push([k,e[k]]);return g}},"es8","es3");ma.polyfill("Object.values",function(b){return b?b:function(e){var g=[],k;for(k in e)ma.owns(e,k)&&g.push(e[k]);return g}},"es8","es3");var kc=Object.create(null),Un={typeMap:kc},Ne=Object.create(null),Gb="default",U=class{constructor(b){this.name=b}toString(){return this.name}};
U.CONNECTION_CHECKER=new U("connectionChecker");U.CONNECTION_PREVIEWER=new U("connectionPreviewer");U.CURSOR=new U("cursor");U.EVENT=new U("event");U.FIELD=new U("field");U.INPUT=new U("input");U.RENDERER=new U("renderer");U.TOOLBOX=new U("toolbox");U.THEME=new U("theme");U.TOOLBOX_ITEM=new U("toolboxItem");U.FLYOUTS_VERTICAL_TOOLBOX=new U("flyoutsVerticalToolbox");U.FLYOUTS_HORIZONTAL_TOOLBOX=new U("flyoutsHorizontalToolbox");U.METRICS_MANAGER=new U("metricsManager");U.BLOCK_DRAGGER=new U("blockDragger");
U.SERIALIZER=new U("serializer");U.ICON=new U("icon");U.PASTER=new U("paster");var dc={DEFAULT:Gb,TEST_ONLY:Un};dc.Type=U;dc.getAllItems=u;dc.getClass=p;dc.getClassFromOptions=y;dc.getObject=q;dc.hasItem=m;dc.register=d;dc.unregister=h;var cb=Object.create(null),Ld=Object.create(null),bi,ci=null,di,zd=[],ei={defineBlocksWithJsonArrayInternal:function(b){a.defineBlocks$$module$build$src$core$common(a.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(b))}},Ya={TEST_ONLY:ei};Ya.createBlockDefinitionsFromJsonArray=
a.createBlockDefinitionsFromJsonArray$$module$build$src$core$common;Ya.defineBlocks=a.defineBlocks$$module$build$src$core$common;Ya.defineBlocksWithJsonArray=Q;Ya.draggingConnections=zd;Ya.getAllWorkspaces=K;Ya.getBlockTypeCounts=Y;Ya.getMainWorkspace=G;Ya.getParentContainer=E;Ya.getSelected=z;Ya.getWorkspaceById=C;Ya.registerWorkspace=X;Ya.setMainWorkspace=J;Ya.setParentContainer=O;Ya.setSelected=B;Ya.svgResize=W;Ya.unregisterWorkpace=M;var fi={genUid:()=>{const b=[];for(let e=0;20>e;e++)b[e]="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(88*
Math.random());return b.join("")}},nm=0,dh={TEST_ONLY:fi};dh.genUid=R;dh.getNextUniqueId=aa;var ii="";var Md=!0;var If=0;a.CREATE$$module$build$src$core$events$utils="create";a.DELETE$$module$build$src$core$events$utils="delete";a.CHANGE$$module$build$src$core$events$utils="change";var wd="block_field_intermediate_change";a.MOVE$$module$build$src$core$events$utils="move";var ld="var_create";var hi="ui";var zc="click";var lc="bubble_open";var cd="viewport_change";var xd="comment_create";var rc="comment_move";
var Wd="finished_loading";var zk=[a.CREATE$$module$build$src$core$events$utils,a.MOVE$$module$build$src$core$events$utils,xd,rc];var ad=[];var gi={FIRE_QUEUE:ad,fireNow:Ea,fireInternal:function(b){if(wa()){if(!ad.length)try{requestAnimationFrame(()=>{setTimeout(Ea,0)})}catch(e){setTimeout(Ea,0)}ad.push(b)}},setGroupInternal:function(b){ii="boolean"===typeof b?b?R():"":b}};var Ad=class{constructor(){this.workspaceId=void 0;this.isUiEvent=!1;this.type="";this.group=a.getGroup$$module$build$src$core$events$utils();
this.recordUndo=da()}toJson(){return{type:this.type,group:this.group}}static fromJson(b,e,g){g.isBlank=!1;g.group=b.group||"";g.workspaceId=e.id;return g}isNull(){return!1}run(b){}getEventWorkspace_(){let b;this.workspaceId&&(b=C(this.workspaceId));if(!b)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return b}},Qb=class extends Ad{constructor(b){super();this.recordUndo=!1;this.isUiEvent=!0;this.isBlank="undefined"===typeof b;this.workspaceId=b?b:""}},eh=
class extends Qb{constructor(b,e,g){e=b?b.workspace.id:e;null===e&&(e=void 0);super(e);this.type=zc;this.blockId=b?b.id:void 0;this.targetType=g}toJson(){const b=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");b.targetType=this.targetType;b.blockId=this.blockId;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new eh);e.targetType=b.targetType;e.blockId=b.blockId;return e}},Tk;(function(b){b.BLOCK=
"block";b.WORKSPACE="workspace";b.ZOOM_CONTROLS="zoom_controls"})(Tk||={});d(U.EVENT,zc,eh);var om=750,Uk="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Pe=null,Ac={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],
mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Oe=0,Mc={TOUCH_ENABLED:Uk,TOUCH_MAP:Ac};Mc.checkTouchIdentifier=D;Mc.clearTouchIdentifier=t;Mc.getTouchIdentifierFromEvent=A;Mc.longStart=Nd;Mc.longStop=xb;Mc.shouldHandleEvent=v;var fh,Vk,Wk,Xk,rf,sf,gh,Yk,Zk,$k;(function(b){function e(k){return-1!==g.indexOf(k.toUpperCase())}fh=b;const g=fh.toUpperCase();Vk=e("JavaFX");Wk=e("WebKit");Xk=e("Gecko")&&!Wk;rf=e("Android");b=globalThis.navigator&&globalThis.navigator.maxTouchPoints;
sf=e("iPad")||e("Macintosh")&&0<b;gh=e("iPhone")&&!sf;Yk=e("Macintosh");Zk=sf||rf&&!e("Mobile")||e("Silk");$k=!Zk&&(gh||rf)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Ni=Vk,hh=Xk,tf=rf,yd=sf,al=gh,Jf=Yk,ih=$k,Vn={ANDROID:tf,GECKO:hh,IPAD:yd,IPHONE:al,JavaFx:Ni,MAC:Jf,MOBILE:ih,raw:fh},ji=40,ki=125,ec={};ec.bind=V;ec.conditionalBind=H;ec.getScrollDeltaPixels=Qe;ec.isRightButton=Fa;ec.isTargetInput=ta;ec.mouseToSvg=db;ec.unbind=ca;var bl={};bl.removeElem=ib;var fc=class{constructor(b){this.name_=
b}toString(){return this.name_}};fc.POSITIONABLE=new fc("positionable");fc.DRAG_TARGET=new fc("drag_target");fc.DELETE_AREA=new fc("delete_area");fc.AUTOHIDEABLE=new fc("autohideable");var Ua=class{constructor(){this.componentData=new Map;this.capabilityToComponentIds=new Map}addComponent(b,e){const g=b.component.id;if(!e&&this.componentData.has(g)){var k;throw Error('Plugin "'+g+'" with capabilities "'+(null==(k=this.componentData.get(g))?void 0:k.capabilities)+'" already added.');}this.componentData.set(g,
b);e=[];for(k=0;k<b.capabilities.length;k++){const n=String(b.capabilities[k]).toLowerCase();e.push(n);if(this.capabilityToComponentIds.has(n)){let r;null==(r=this.capabilityToComponentIds.get(n))||r.push(g)}else this.capabilityToComponentIds.set(n,[g])}this.componentData.get(g).capabilities=e}removeComponent(b){const e=this.componentData.get(b);if(e){for(let g=0;g<e.capabilities.length;g++){const k=String(e.capabilities[g]).toLowerCase();ib(this.capabilityToComponentIds.get(k),b)}this.componentData.delete(b)}}addCapability(b,
e){if(!this.getComponent(b))throw Error('Cannot add capability, "'+e+'". Plugin "'+b+'" has not been added to the ComponentManager');if(this.hasCapability(b,e))console.warn('Plugin "'+b+'already has capability "'+e+'"');else{e=`${e}`.toLowerCase();var g;null==(g=this.componentData.get(b))||g.capabilities.push(e);var k;null==(k=this.capabilityToComponentIds.get(e))||k.push(b)}}removeCapability(b,e){if(!this.getComponent(b))throw Error('Cannot remove capability, "'+e+'". Plugin "'+b+'" has not been added to the ComponentManager');
this.hasCapability(b,e)?(e=`${e}`.toLowerCase(),ib(this.componentData.get(b).capabilities,e),ib(this.capabilityToComponentIds.get(e),b)):console.warn('Plugin "'+b+"doesn't have capability \""+e+'" to remove')}hasCapability(b,e){e=`${e}`.toLowerCase();return this.componentData.has(b)&&-1!==this.componentData.get(b).capabilities.indexOf(e)}getComponent(b){let e;return null==(e=this.componentData.get(b))?void 0:e.component}getComponents(b,e){b=`${b}`.toLowerCase();b=this.capabilityToComponentIds.get(b);
if(!b)return[];const g=[];if(e){const k=[];b.forEach(n=>{k.push(this.componentData.get(n))});k.sort(function(n,r){return n.weight-r.weight});k.forEach(function(n){g.push(n.component)})}else b.forEach(k=>{g.push(this.componentData.get(k).component)});return g}};Ua.Capability=fc;var Kf=!1,Lf='\n.blocklySvg {\n  background-color: #fff;\n  outline: none;\n  overflow: hidden;  /* IE overflows by default. */\n  position: absolute;\n  display: block;\n}\n\n.blocklyWidgetDiv {\n  display: none;\n  position: absolute;\n  z-index: 99999;  /* big value for bootstrap3 compatibility */\n}\n\n.injectionDiv {\n  height: 100%;\n  position: relative;\n  overflow: hidden;  /* So blocks in drag surface disappear at edges */\n  touch-action: none;\n}\n\n.blocklyNonSelectable {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n}\n\n.blocklyBlockCanvas.blocklyCanvasTransitioning,\n.blocklyBubbleCanvas.blocklyCanvasTransitioning {\n  transition: transform .5s;\n}\n\n.blocklyTooltipDiv {\n  background-color: #ffffc7;\n  border: 1px solid #ddc;\n  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);\n  color: #000;\n  display: none;\n  font: 9pt sans-serif;\n  opacity: .9;\n  padding: 2px;\n  position: absolute;\n  z-index: 100000;  /* big value for bootstrap3 compatibility */\n}\n\n.blocklyDropDownDiv {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n  display: none;\n  border: 1px solid;\n  border-color: #dadce0;\n  background-color: #fff;\n  border-radius: 2px;\n  padding: 4px;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownContent {\n  max-height: 300px;  /* @todo: spec for maximum height. */\n  overflow: auto;\n  overflow-x: hidden;\n  position: relative;\n}\n\n.blocklyDropDownArrow {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 16px;\n  height: 16px;\n  z-index: -1;\n  background-color: inherit;\n  border-color: inherit;\n}\n\n.blocklyDropDownButton {\n  display: inline-block;\n  float: left;\n  padding: 0;\n  margin: 4px;\n  border-radius: 4px;\n  outline: none;\n  border: 1px solid;\n  transition: box-shadow .1s;\n  cursor: pointer;\n}\n\n.blocklyArrowTop {\n  border-top: 1px solid;\n  border-left: 1px solid;\n  border-top-left-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyArrowBottom {\n  border-bottom: 1px solid;\n  border-right: 1px solid;\n  border-bottom-right-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyResizeSE {\n  cursor: se-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeSW {\n  cursor: sw-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeLine {\n  stroke: #515A5A;\n  stroke-width: 1;\n}\n\n.blocklyHighlightedConnectionPath {\n  fill: none;\n  stroke: #fc3;\n  stroke-width: 4px;\n}\n\n.blocklyPathLight {\n  fill: none;\n  stroke-linecap: round;\n  stroke-width: 1;\n}\n\n.blocklySelected>.blocklyPathLight {\n  display: none;\n}\n\n.blocklyDraggable {\n  cursor: grab;\n  cursor: -webkit-grab;\n}\n\n.blocklyDragging {\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n  /* Changes cursor on mouse down. Not effective in Firefox because of\n     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */\n.blocklyDraggable:active {\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n.blocklyDragging.blocklyDraggingDelete {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyDragging>.blocklyPath,\n.blocklyDragging>.blocklyPathLight {\n  fill-opacity: .8;\n  stroke-opacity: .8;\n}\n\n.blocklyDragging>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyDisabled>.blocklyPath {\n  fill-opacity: .5;\n  stroke-opacity: .5;\n}\n\n.blocklyDisabled>.blocklyPathLight,\n.blocklyDisabled>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyInsertionMarker>.blocklyPath,\n.blocklyInsertionMarker>.blocklyPathLight,\n.blocklyInsertionMarker>.blocklyPathDark {\n  fill-opacity: .2;\n  stroke: none;\n}\n\n.blocklyMultilineText {\n  font-family: monospace;\n}\n\n.blocklyNonEditableText>text {\n  pointer-events: none;\n}\n\n.blocklyFlyout {\n  position: absolute;\n  z-index: 20;\n}\n\n.blocklyText text {\n  cursor: default;\n}\n\n/*\n  Don\'t allow users to select text.  It gets annoying when trying to\n  drag a block and selected text moves instead.\n*/\n.blocklySvg text {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n  cursor: inherit;\n}\n\n.blocklyHidden {\n  display: none;\n}\n\n.blocklyFieldDropdown:not(.blocklyHidden) {\n  display: block;\n}\n\n.blocklyIconGroup {\n  cursor: default;\n}\n\n.blocklyIconGroup:not(:hover),\n.blocklyIconGroupReadonly {\n  opacity: .6;\n}\n\n.blocklyIconShape {\n  fill: #00f;\n  stroke: #fff;\n  stroke-width: 1px;\n}\n\n.blocklyIconSymbol {\n  fill: #fff;\n}\n\n.blocklyMinimalBody {\n  margin: 0;\n  padding: 0;\n}\n\n.blocklyHtmlInput {\n  border: none;\n  border-radius: 4px;\n  height: 100%;\n  margin: 0;\n  outline: none;\n  padding: 0;\n  width: 100%;\n  text-align: center;\n  display: block;\n  box-sizing: border-box;\n}\n\n/* Remove the increase and decrease arrows on the field number editor */\ninput.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,\ninput.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\ninput[type=number] {\n  -moz-appearance: textfield;\n}\n\n.blocklyMainBackground {\n  stroke-width: 1;\n  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */\n}\n\n.blocklyMutatorBackground {\n  fill: #fff;\n  stroke: #ddd;\n  stroke-width: 1;\n}\n\n.blocklyFlyoutBackground {\n  fill: #ddd;\n  fill-opacity: .8;\n}\n\n.blocklyMainWorkspaceScrollbar {\n  z-index: 20;\n}\n\n.blocklyFlyoutScrollbar {\n  z-index: 30;\n}\n\n.blocklyScrollbarHorizontal,\n.blocklyScrollbarVertical {\n  position: absolute;\n  outline: none;\n}\n\n.blocklyScrollbarBackground {\n  opacity: 0;\n}\n\n.blocklyScrollbarHandle {\n  fill: #ccc;\n}\n\n.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyScrollbarHandle:hover {\n  fill: #bbb;\n}\n\n/* Darken flyout scrollbars due to being on a grey background. */\n/* By contrast, workspace scrollbars are on a white background. */\n.blocklyFlyout .blocklyScrollbarHandle {\n  fill: #bbb;\n}\n\n.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyFlyout .blocklyScrollbarHandle:hover {\n  fill: #aaa;\n}\n\n.blocklyInvalidInput {\n  background: #faa;\n}\n\n.blocklyVerticalMarker {\n  stroke-width: 3px;\n  fill: rgba(255,255,255,.5);\n  pointer-events: none;\n}\n\n.blocklyComputeCanvas {\n  position: absolute;\n  width: 0;\n  height: 0;\n}\n\n.blocklyNoPointerEvents {\n  pointer-events: none;\n}\n\n.blocklyContextMenu {\n  border-radius: 4px;\n  max-height: 100%;\n}\n\n.blocklyDropdownMenu {\n  border-radius: 2px;\n  padding: 0 !important;\n}\n\n.blocklyDropdownMenu .blocklyMenuItem {\n  /* 28px on the left for icon or checkbox. */\n  padding-left: 28px;\n}\n\n/* BiDi override for the resting state. */\n.blocklyDropdownMenu .blocklyMenuItemRtl {\n  /* Flip left/right padding for BiDi. */\n  padding-left: 5px;\n  padding-right: 28px;\n}\n\n.blocklyWidgetDiv .blocklyMenu {\n  background: #fff;\n  border: 1px solid transparent;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n  font: normal 13px Arial, sans-serif;\n  margin: 0;\n  outline: none;\n  padding: 4px 0;\n  position: absolute;\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 100%;\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n.blocklyWidgetDiv .blocklyMenu.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv .blocklyMenu {\n  background: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  border: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;\n  outline: none;\n  position: relative;  /* Compatibility with gapi, reset from goog-menu */\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n/* State: resting. */\n.blocklyMenuItem {\n  border: none;\n  color: #000;\n  cursor: pointer;\n  list-style: none;\n  margin: 0;\n  /* 7em on the right for shortcut. */\n  min-width: 7em;\n  padding: 6px 15px;\n  white-space: nowrap;\n}\n\n/* State: disabled. */\n.blocklyMenuItemDisabled {\n  color: #ccc;\n  cursor: inherit;\n}\n\n/* State: hover. */\n.blocklyMenuItemHighlight {\n  background-color: rgba(0,0,0,.1);\n}\n\n/* State: selected/checked. */\n.blocklyMenuItemCheckbox {\n  height: 16px;\n  position: absolute;\n  width: 16px;\n}\n\n.blocklyMenuItemSelected .blocklyMenuItemCheckbox {\n  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;\n  float: left;\n  margin-left: -24px;\n  position: static;  /* Scroll with the menu. */\n}\n\n.blocklyMenuItemRtl .blocklyMenuItemCheckbox {\n  float: right;\n  margin-right: -24px;\n}\n\n.blocklyBlockDragSurface {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: visible !important;\n  z-index: 80;\n  pointer-events: none;\n}\n',
jh={};jh.inject=li;jh.register=yb;var Z=class{constructor(b,e){this.x=b;this.y=e}clone(){return new Z(this.x,this.y)}scale(b){this.x*=b;this.y*=b;return this}translate(b,e){this.x+=b;this.y+=e;return this}static equals(b,e){return b===e?!0:b&&e?b.x===e.x&&b.y===e.y:!1}static distance(b,e){const g=b.x-e.x;b=b.y-e.y;return Math.sqrt(g*g+b*b)}static magnitude(b){return Math.sqrt(b.x*b.x+b.y*b.y)}static difference(b,e){return new Z(b.x-e.x,b.y-e.y)}static sum(b,e){return new Z(b.x+e.x,b.y+e.y)}},mi=new Set,
cl={};cl.warn=Na;var Od="http://www.w3.org/2000/svg",Pb="http://www.w3.org/1999/xhtml",lb="http://www.w3.org/1999/xlink",nc;(function(b){b[b.ELEMENT_NODE=1]="ELEMENT_NODE";b[b.TEXT_NODE=3]="TEXT_NODE";b[b.COMMENT_NODE=8]="COMMENT_NODE"})(nc||={});var Hb=null,Of=0,Re=null,Va={HTML_NS:Pb};Va.NodeType=nc;Va.SVG_NS=Od;Va.XLINK_NS=lb;Va.addClass=la;Va.containsNode=function(b,e){Na("Blockly.utils.dom.containsNode","version 10","version 11",'Use native "contains" DOM method');return b.contains(e)};Va.createSvgElement=
N;Va.getFastTextWidth=gd;Va.getFastTextWidthWithSizeString=Pf;Va.getTextWidth=function(b){const e=b.textContent+"\n"+b.className.baseVal;let g;if(Hb&&(g=Hb[e]))return g;try{g=b.getComputedTextLength()}catch(k){return 8*b.textContent.length}Hb&&(Hb[e]=g);return g};Va.hasClass=function(b,e){return b.classList.contains(e)};Va.insertAfter=dd;Va.measureFontMetrics=Qf;Va.removeClass=za;Va.removeClasses=Mf;Va.removeNode=Da;Va.setCssTransform=Nf;Va.startTextWidthCache=ed;Va.stopTextWidthCache=fd;var I=class{constructor(b){this.tagName=
b}toString(){return this.tagName}};I.ANIMATE=new I("animate");I.CIRCLE=new I("circle");I.CLIPPATH=new I("clipPath");I.DEFS=new I("defs");I.FECOMPOSITE=new I("feComposite");I.FECOMPONENTTRANSFER=new I("feComponentTransfer");I.FEFLOOD=new I("feFlood");I.FEFUNCA=new I("feFuncA");I.FEGAUSSIANBLUR=new I("feGaussianBlur");I.FEPOINTLIGHT=new I("fePointLight");I.FESPECULARLIGHTING=new I("feSpecularLighting");I.FILTER=new I("filter");I.FOREIGNOBJECT=new I("foreignObject");I.G=new I("g");I.IMAGE=new I("image");
I.LINE=new I("line");I.PATH=new I("path");I.PATTERN=new I("pattern");I.POLYGON=new I("polygon");I.RECT=new I("rect");I.SVG=new I("svg");I.TEXT=new I("text");I.TSPAN=new I("tspan");var Ga=class{constructor(b,e,g,k){this.top=b;this.bottom=e;this.left=g;this.right=k}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(b,e){return b>=this.left&&b<=this.right&&e>=this.top&&e<=this.bottom}intersects(b){return!(this.left>b.right||this.right<b.left||this.top>b.bottom||this.bottom<
b.top)}},Ja=class{constructor(b,e){this.width=b;this.height=e}static equals(b,e){return b===e?!0:b&&e?b.width===e.width&&b.height===e.height:!1}},ni={getSizeInternal:function(b){if("none"!==Yb(b,"display"))return oi(b);const e=b.style,g=e.display,k=e.visibility,n=e.position;e.visibility="hidden";e.position="absolute";e.display="inline";const r=b.offsetWidth;b=b.offsetHeight;e.display=g;e.position=n;e.visibility=k;return new Ja(r,b)}},sc={TEST_ONLY:ni};sc.getBorderBox=qi;sc.getComputedStyle=Yb;sc.getContainerOffsetToScrollInto=
ri;sc.getPageOffset=Bc;sc.getSize=Se;sc.getViewportPageOffset=pi;sc.scrollIntoContainerView=Rf;var si=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,ti=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Nc={TEST_ONLY:{XY_REGEX:si,XY_STYLE_REGEX:ti}};Nc.getDocumentScroll=vi;Nc.getInjectionDivXY=Sf;Nc.getRelativeXY=Pd;Nc.getViewportBBox=ui;Nc.screenToWsCoordinates=function(b,e){var g=e.x;e=e.y;const k=b.getInjectionDiv().getBoundingClientRect();g=new Z(g-k.left,e-k.top);
e=b.getOriginOffsetInPixels();return Z.difference(g,e).scale(1/b.scale)};Nc.wsToScreenCoordinates=function(b,e){var g=e.scale(b.scale);e=g.x;g=g.y;const k=b.getInjectionDiv().getBoundingClientRect();b=b.getOriginOffsetInPixels();return new Z(e+k.left+b.x,g+k.top+b.y)};var Qa=class{constructor(b,e,g,k,n){this.workspace=b;this.horizontal=e;this.oldHostMetrics=null;this.ratio=1;this.origin=new Z(0,0);this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=
0;this.containerVisible=this.isHandleVisible=!0;this.position=new Z(0,0);this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null;this.pair=g||!1;this.margin=void 0!==n?n:Qa.DEFAULT_SCROLLBAR_MARGIN;b="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical");k&&(b+=" "+k);this.outerSvg=N(I.SVG,{"class":b});k=N(I.G,{},this.outerSvg);this.svgBackground=N(I.RECT,{"class":"blocklyScrollbarBackground"},k);b=Math.floor((Qa.scrollbarThickness-5)/2);this.svgHandle=N(I.RECT,{"class":"blocklyScrollbarHandle",
rx:b,ry:b},k);this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill");this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity");dd(this.outerSvg,this.workspace.getParentSvg());this.setInitialThickness();e?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y");this.onMouseDownBarWrapper_=H(this.svgBackground,"pointerdown",this,this.onMouseDownBar);this.onMouseDownHandleWrapper_=
H(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const b=Qa.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(b)),this.outerSvg.setAttribute("height",String(b)),this.svgHandle.setAttribute("height",String(b-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(b)),this.outerSvg.setAttribute("width",String(b)),this.svgHandle.setAttribute("width",String(b-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp();
ca(this.onMouseDownBarWrapper_);ca(this.onMouseDownHandleWrapper_);Da(this.outerSvg);this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(b){return 0>=b||isNaN(b)?0:Math.min(b,this.scrollbarLength)}setHandleLength(b){this.handleLength=b;this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(b){return 0>=b||isNaN(b)?0:Math.min(b,this.scrollbarLength-this.handleLength)}setHandlePosition(b){this.handlePosition=b;this.svgHandle.setAttribute(this.positionAttribute_,
String(this.handlePosition))}setScrollbarLength(b){this.scrollbarLength=b;this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength));this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(b,e){this.position.x=b;this.position.y=e;Nf(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(b){if(b||(b=this.workspace.getMetrics(),b))this.oldHostMetrics&&Qa.metricsAreEquivalent(b,this.oldHostMetrics)||
(this.horizontal?this.resizeHorizontal(b):this.resizeVertical(b),this.oldHostMetrics=b,this.updateMetrics())}requiresViewResize(b){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==b.viewWidth||this.oldHostMetrics.viewHeight!==b.viewHeight||this.oldHostMetrics.absoluteLeft!==b.absoluteLeft||this.oldHostMetrics.absoluteTop!==b.absoluteTop:!0}resizeHorizontal(b){this.requiresViewResize(b)?this.resizeViewHorizontal(b):this.resizeContentHorizontal(b)}resizeViewHorizontal(b){var e=b.viewWidth-
2*this.margin;this.pair&&(e-=Qa.scrollbarThickness);this.setScrollbarLength(Math.max(0,e));e=b.absoluteLeft+this.margin;this.pair&&this.workspace.RTL&&(e+=Qa.scrollbarThickness);this.setPosition(e,b.absoluteTop+b.viewHeight-Qa.scrollbarThickness-this.margin);this.resizeContentHorizontal(b)}resizeContentHorizontal(b){if(b.viewWidth>=b.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var e=this.scrollbarLength*
b.viewWidth/b.scrollWidth;e=this.constrainHandleLength(e);this.setHandleLength(e);e=b.scrollWidth-b.viewWidth;var g=this.scrollbarLength-this.handleLength;b=(b.viewLeft-b.scrollLeft)/e*g;b=this.constrainHandlePosition(b);this.setHandlePosition(b);this.ratio=g/e}}resizeVertical(b){this.requiresViewResize(b)?this.resizeViewVertical(b):this.resizeContentVertical(b)}resizeViewVertical(b){let e=b.viewHeight-2*this.margin;this.pair&&(e-=Qa.scrollbarThickness);this.setScrollbarLength(Math.max(0,e));this.setPosition(this.workspace.RTL?
b.absoluteLeft+this.margin:b.absoluteLeft+b.viewWidth-Qa.scrollbarThickness-this.margin,b.absoluteTop+this.margin);this.resizeContentVertical(b)}resizeContentVertical(b){if(b.viewHeight>=b.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var e=this.scrollbarLength*b.viewHeight/b.scrollHeight;e=this.constrainHandleLength(e);this.setHandleLength(e);e=b.scrollHeight-b.viewHeight;var g=this.scrollbarLength-
this.handleLength;b=(b.viewTop-b.scrollTop)/e*g;b=this.constrainHandlePosition(b);this.setHandlePosition(b);this.ratio=g/e}}isVisible(){return this.isHandleVisible}setContainerVisible(b){const e=b!==this.containerVisible;this.containerVisible=b;e&&this.updateDisplay_()}setVisible(b){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(b)}setVisibleInternal(b){const e=b!==this.isVisible();this.isHandleVisible=b;e&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&
this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(b){this.workspace.markFocused();t();this.cleanUp();if(Fa(b))b.stopPropagation();else{var e=db(b,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());e=this.horizontal?e.x:e.y;var g=Sf(this.svgHandle);g=this.horizontal?g.x:g.y;var k=this.handlePosition,n=.95*this.handleLength;e<=g?k-=n:e>=g+this.handleLength&&(k+=n);this.setHandlePosition(this.constrainHandlePosition(k));
this.updateMetrics();b.stopPropagation();b.preventDefault()}}onMouseDownHandle(b){this.workspace.markFocused();this.cleanUp();Fa(b)?b.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?b.clientX:b.clientY,this.onMouseUpWrapper_=H(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=H(document,"pointermove",this,this.onMouseMoveHandle),b.stopPropagation(),b.preventDefault())}onMouseMoveHandle(b){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+
((this.horizontal?b.clientX:b.clientY)-this.startDragMouse)));this.updateMetrics()}onMouseUpHandle(){t();this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0);this.onMouseUpWrapper_&&(ca(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null);this.onMouseMoveWrapper_&&(ca(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let b=this.handlePosition/(this.scrollbarLength-this.handleLength);isNaN(b)&&(b=0);return b}updateMetrics(){const b=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:b}):
this.workspace.setMetrics({y:b})}set(b,e){this.setHandlePosition(this.constrainHandlePosition(b*this.ratio));(e||void 0===e)&&this.updateMetrics()}setOrigin(b,e){this.origin=new Z(b,e)}static metricsAreEquivalent(b,e){return b.viewWidth===e.viewWidth&&b.viewHeight===e.viewHeight&&b.viewLeft===e.viewLeft&&b.viewTop===e.viewTop&&b.absoluteTop===e.absoluteTop&&b.absoluteLeft===e.absoluteLeft&&b.scrollWidth===e.scrollWidth&&b.scrollHeight===e.scrollHeight&&b.scrollLeft===e.scrollLeft&&b.scrollTop===e.scrollTop}};
Qa.scrollbarThickness=Uk?25:15;Qa.DEFAULT_SCROLLBAR_MARGIN=.5;var Ue={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies");}},Tf={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies");}},{document:Te,DOMParser:pe,XMLSerializer:qe}=globalThis;pe&&(Ue=new pe);qe&&(Tf=new qe);var wi="https://developers.google.com/blockly/xml",
qm=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Bd={NAME_SPACE:wi};Bd.createElement=a.createElement$$module$build$src$core$utils$xml;Bd.createTextNode=a.createTextNode$$module$build$src$core$utils$xml;Bd.domToText=Qd;Bd.injectDependencies=function(b){({document:Te=Te,DOMParser:pe=pe,XMLSerializer:qe=qe}=b);Ue=new pe;Tf=new qe};Bd.textToDom=a.textToDom$$module$build$src$core$utils$xml;var Vf="categoryToolbox",yi="flyoutToolbox",pa;(function(b){b[b.TOP=0]="TOP";b[b.BOTTOM=1]="BOTTOM";b[b.LEFT=2]="LEFT";b[b.RIGHT=
3]="RIGHT"})(pa||={});var zi={hasCategoriesInternal:function(b){if(!b)return!1;const e=b.kind;return e?e===Vf:!!b.contents.filter(function(g){return"CATEGORY"===g.kind.toUpperCase()}).length}},tc={};tc.Position=pa;tc.TEST_ONLY=zi;tc.convertFlyoutDefToJsonArray=Ve;tc.convertToolboxDefToJson=Uf;tc.hasCategories=Xf;tc.isCategoryCollapsible=Yf;tc.parseToolboxTree=xi;var mc;(function(b){b[b.TOP=0]="TOP";b[b.BOTTOM=1]="BOTTOM"})(mc||={});var Rd;(function(b){b[b.LEFT=0]="LEFT";b[b.RIGHT=1]="RIGHT"})(Rd||=
{});var Cc;(function(b){b[b.UP=0]="UP";b[b.DOWN=1]="DOWN"})(Cc||={});var Oc={};Oc.bumpDirection=Cc;Oc.bumpPositionRect=ag;Oc.getCornerOppositeToolbox=$f;Oc.getStartPositionRect=Zf;Oc.horizontalPosition=Rd;Oc.verticalPosition=mc;var dl=class{constructor(b){this.workspace=b;this.id="zoomControls";this.boundEvents=[];this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null;this.HEIGHT=this.WIDTH=32;this.SMALL_SPACING=2;this.LARGE_SPACING=11;this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20;this.svgGroup=
null;this.top=this.left=0;this.initialized=!1}createDom(){this.svgGroup=N(I.G,{});const b=String(Math.random()).substring(2);this.createZoomOutSvg(b);this.createZoomInSvg(b);this.workspace.isMovable()&&this.createZoomResetSvg(b);return this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Ua.Capability.POSITIONABLE]});this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls");this.svgGroup&&Da(this.svgGroup);
for(const b of this.boundEvents)ca(b);this.boundEvents.length=0}getBoundingRectangle(){let b=this.SMALL_SPACING+2*this.HEIGHT;this.zoomResetGroup&&(b+=this.LARGE_SPACING+this.HEIGHT);return new Ga(this.top,this.top+b,this.left,this.left+this.WIDTH)}position(b,e){if(this.initialized){var g=$f(this.workspace,b),k=this.SMALL_SPACING+2*this.HEIGHT;this.zoomResetGroup&&(k+=this.LARGE_SPACING+this.HEIGHT);b=Zf(g,new Ja(this.WIDTH,k),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,b,this.workspace);g=g.vertical;
e=ag(b,this.MARGIN_VERTICAL,g===mc.TOP?Cc.DOWN:Cc.UP,e);if(g===mc.TOP){var n=this.SMALL_SPACING+this.HEIGHT,r;null==(r=this.zoomInGroup)||r.setAttribute("transform","translate(0, "+n+")");this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(n+this.LARGE_SPACING+this.HEIGHT)+")")}else{r=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let x;null==(x=this.zoomInGroup)||x.setAttribute("transform","translate(0, "+r+")");r=r+this.SMALL_SPACING+this.HEIGHT;null==(n=this.zoomOutGroup)||
n.setAttribute("transform","translate(0, "+r+")")}this.top=e.top;this.left=e.left;var w;null==(w=this.svgGroup)||w.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(b){this.zoomOutGroup=N(I.G,{"class":"blocklyZoom blocklyZoomOut"},this.svgGroup);const e=N(I.CLIPPATH,{id:"blocklyZoomoutClipPath"+b},this.zoomOutGroup);N(I.RECT,{width:32,height:32},e);N(I.IMAGE,{width:96,height:124,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+b+")"},this.zoomOutGroup).setAttributeNS(lb,
"xlink:href",this.workspace.options.pathToMedia+"sprites.png");this.boundEvents.push(H(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(b){this.zoomInGroup=N(I.G,{"class":"blocklyZoom blocklyZoomIn"},this.svgGroup);const e=N(I.CLIPPATH,{id:"blocklyZoominClipPath"+b},this.zoomInGroup);N(I.RECT,{width:32,height:32},e);N(I.IMAGE,{width:96,height:124,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+b+")"},this.zoomInGroup).setAttributeNS(lb,"xlink:href",this.workspace.options.pathToMedia+
"sprites.png");this.boundEvents.push(H(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(b,e){this.workspace.markFocused();this.workspace.zoomCenter(b);this.fireZoomEvent();t();e.stopPropagation();e.preventDefault()}createZoomResetSvg(b){this.zoomResetGroup=N(I.G,{"class":"blocklyZoom blocklyZoomReset"},this.svgGroup);const e=N(I.CLIPPATH,{id:"blocklyZoomresetClipPath"+b},this.zoomResetGroup);N(I.RECT,{width:32,height:32},e);N(I.IMAGE,{width:96,height:124,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+
b+")"},this.zoomResetGroup).setAttributeNS(lb,"xlink:href",this.workspace.options.pathToMedia+"sprites.png");this.boundEvents.push(H(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(b){this.workspace.markFocused();const e=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition();this.workspace.zoomCenter(e);this.workspace.scrollCenter();setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),
500);this.fireZoomEvent();t();b.stopPropagation();b.preventDefault()}fireZoomEvent(){const b=new (ja(zc))(null,this.workspace.id,"zoom_controls");ba(b)}};yb("\n.blocklyZoom>image, .blocklyZoom>svg>image {\n  opacity: .4;\n}\n\n.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {\n  opacity: .6;\n}\n\n.blocklyZoom>image:active, .blocklyZoom>svg>image:active {\n  opacity: .8;\n}\n");var eb=class{constructor(b){this.name=b}toString(){return this.name}equals(b){return this.name===b.toString()}};eb.MUTATOR=
new eb("mutator");eb.WARNING=new eb("warning");eb.COMMENT=new eb("comment");(function(b){b[b.VALUE=1]="VALUE";b[b.STATEMENT=3]="STATEMENT";b[b.DUMMY=5]="DUMMY";b[b.CUSTOM=6]="CUSTOM";b[b.END_ROW=7]="END_ROW"})(a.inputTypes$$module$build$src$core$inputs$input_types||(a.inputTypes$$module$build$src$core$inputs$input_types={}));var Bi=function(b,e){window.alert(b);e&&e()},el=function(b,e){e(window.confirm(b))},Di=function(b,e,g){g(window.prompt(b,e))},Ci={confirmInternal:function(b,e){el(b,e)}},Pc={TEST_ONLY:Ci};
Pc.alert=We;Pc.confirm=bg;Pc.prompt=cg;Pc.setAlert=function(b){Bi=b};Pc.setConfirm=function(b){el=b};Pc.setPrompt=function(b){Di=b};a.Msg$$module$build$src$core$msg=Object.create(null);var fl=function(b){Object.keys(b).forEach(function(e){a.Msg$$module$build$src$core$msg[e]=b[e]})};var Wn={Msg:a.Msg$$module$build$src$core$msg,setLocale:fl};var re=class extends Ad{constructor(b){super();this.isBlank="undefined"===typeof b;b&&(this.varId=b.getId(),this.workspaceId=b.workspace.id)}toJson(){const b=super.toJson();
if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");b.varId=this.varId;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new re);e.varId=b.varId;return e}},kh=class extends re{constructor(b){super(b);this.type=ld;b&&(this.varType=b.type,this.varName=b.name)}toJson(){const b=super.toJson();if(void 0===this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");
b.varType=this.varType;b.varName=this.varName;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new kh);e.varType=b.varType;e.varName=b.varName;return e}run(b){const e=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");b?e.createVariable(this.varName,this.varType,this.varId):e.deleteVariableById(this.varId)}};
d(U.EVENT,ld,kh);var Ud=class{constructor(b,e,g,k){this.workspace=b;this.name=e;this.type=g||"";this.id_=k||R()}getId(){return this.id_}static compareByName(b,e){return b.name.localeCompare(e.name,void 0,{sensitivity:"base"})}},eg="ijkmnopqrstuvwxyzabcdefgh",Gi={generateUniqueNameInternal:function(b){return fg(eg.charAt(0),b.getAllVariableNames())}},Za={CATEGORY_NAME:"VARIABLE",TEST_ONLY:Gi,VAR_LETTER_OPTIONS:eg};Za.allDeveloperVariables=a.allDeveloperVariables$$module$build$src$core$variables;Za.allUsedVarModels=
a.allUsedVarModels$$module$build$src$core$variables;Za.createVariableButtonHandler=Td;Za.flyoutCategory=dg;Za.flyoutCategoryBlocks=Fi;Za.generateUniqueName=Hi;Za.generateUniqueNameFromOptions=fg;Za.generateVariableFieldDom=hd;Za.getAddedVariables=hg;Za.getOrCreateVariablePackage=a.getOrCreateVariablePackage$$module$build$src$core$variables;Za.getVariable=a.getVariable$$module$build$src$core$variables;Za.nameUsedWithAnyType=Ii;Za.nameUsedWithConflictingParam=Ji;Za.promptName=gg;Za.renameVariable=a.renameVariable$$module$build$src$core$variables;
var Jb=class{constructor(b,e,g,k,n){this.workspace=b;this.editable=this.movable=this.deletable=!0;this.disposed_=!1;this.isComment=!0;this.id=n&&!b.getCommentById(n)?n:R();b.addTopComment(this);this.xy_=new Z(0,0);this.height_=g;this.width_=k;this.RTL=b.RTL;this.content_=e;Jb.fireCreateEvent(this)}dispose(){this.disposed_||(wa()&&ba(new (ja("comment_delete"))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(b){this.height_=b}getWidth(){return this.width_}setWidth(b){this.width_=
b}getRelativeToSurfaceXY(){return new Z(this.xy_.x,this.xy_.y)}moveBy(b,e){const g=new (ja(rc))(this);this.xy_.translate(b,e);g.recordNew();ba(g)}isDeletable(){return this.deletable&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(b){this.deletable=b}isMovable(){return this.movable&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(b){this.movable=b}isEditable(){return this.editable&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(b){this.editable=b}getContent(){return this.content_}setContent(b){this.content_!==
b&&(ba(new (ja("comment_change"))(this,this.content_,b)),this.content_=b)}toXmlWithXY(b){b=this.toXml(b);b.setAttribute("x",String(Math.round(this.xy_.x)));b.setAttribute("y",String(Math.round(this.xy_.y)));b.setAttribute("h",String(this.height_));b.setAttribute("w",String(this.width_));return b}toXml(b){const e=a.createElement$$module$build$src$core$utils$xml("comment");b||(e.id=this.id);e.textContent=this.getContent();return e}static fireCreateEvent(b){if(wa()){const e=a.getGroup$$module$build$src$core$events$utils();
e||a.setGroup$$module$build$src$core$events$utils(!0);try{ba(new (ja(xd))(b))}finally{a.setGroup$$module$build$src$core$events$utils(e)}}}static fromXml(b,e){var g=Jb.parseAttributes(b);e=new Jb(e,g.content,g.h,g.w,g.id);g=b.getAttribute("x");b=b.getAttribute("y");g=g?parseInt(g,10):NaN;b=b?parseInt(b,10):NaN;isNaN(g)||isNaN(b)||e.moveBy(g,b);Jb.fireCreateEvent(e);return e}static parseAttributes(b){const e=b.getAttribute("h"),g=b.getAttribute("w"),k=b.getAttribute("x"),n=b.getAttribute("y"),r=b.getAttribute("id");
if(!r)throw Error("No ID present in XML comment definition.");let w;return{id:r,h:e?parseInt(e):100,w:g?parseInt(g):100,x:k?parseInt(k):NaN,y:n?parseInt(n):NaN,content:null!=(w=b.textContent)?w:""}}},lh=class extends Qb{constructor(b,e,g){super(g);this.type="selected";this.oldElementId=null!=b?b:void 0;this.newElementId=null!=e?e:void 0}toJson(){const b=super.toJson();b.oldElementId=this.oldElementId;b.newElementId=this.newElementId;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new lh);
e.oldElementId=b.oldElementId;e.newElementId=b.newElementId;return e}};d(U.EVENT,"selected",lh);var mh={};mh.register=ig;mh.unregister=function(b){h(U.PASTER,b)};var uf=class{paste(b,e,g){const k=b.commentState;if(g)k.setAttribute("x",`${g.x}`),k.setAttribute("y",`${g.y}`);else{var n;g=parseInt(null!=(n=k.getAttribute("x"))?n:"0")+50;let r;n=parseInt(null!=(r=k.getAttribute("y"))?r:"0")+50;k.setAttribute("x",`${g}`);k.setAttribute("y",`${n}`)}return Xa.fromXmlRendered(b.commentState,e)}};uf.TYPE=
"workspace-comment";ig(uf.TYPE,new uf);var Xa=class extends Jb{constructor(b,e,g,k,n){super(b,e,g,k,n);this.onMouseMoveWrapper=this.onMouseUpWrapper=null;this.eventsInit=!1;this.deleteIconBorder=this.deleteGroup=this.resizeGroup=this.foreignObject=this.svgHandleTarget=this.svgRectTarget=this.textarea=null;this.rendered=this.autoLayout=this.focused=!1;this.svgGroup=N(I.G,{"class":"blocklyComment"});this.workspace=b;this.svgRect_=N(I.RECT,{"class":"blocklyCommentRect",x:0,y:0,rx:3,ry:3});this.svgGroup.appendChild(this.svgRect_);
this.render()}dispose(){this.disposed_||(z()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),wa()&&ba(new (ja("comment_delete"))(this)),Da(this.svgGroup),a.disable$$module$build$src$core$events$utils(),super.dispose(),a.enable$$module$build$src$core$events$utils())}initSvg(b){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit||(H(this.svgRectTarget,"pointerdown",this,this.pathMouseDown),H(this.svgHandleTarget,"pointerdown",
this,this.pathMouseDown));this.eventsInit=!0;this.updateMovable();this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot());!b&&this.textarea&&this.textarea.select()}pathMouseDown(b){const e=this.workspace.getGesture(b);e&&e.handleBubbleStart(b,this)}showContextMenu(b){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts");}select(){if(z()!==this){var b=null;if(z()){b=z().id;a.disable$$module$build$src$core$events$utils();
try{z().unselect()}finally{a.enable$$module$build$src$core$events$utils()}}b=new (ja("selected"))(b,this.id,this.workspace.id);ba(b);B(this);this.addSelect()}}unselect(){if(z()===this){var b=new (ja("selected"))(this.id,null,this.workspace.id);ba(b);B(null);this.removeSelect();this.blurFocus()}}addSelect(){la(this.svgGroup,"blocklySelected");this.setFocus()}removeSelect(){la(this.svgGroup,"blocklySelected");this.blurFocus()}addFocus(){la(this.svgGroup,"blocklyFocused")}removeFocus(){za(this.svgGroup,
"blocklyFocused")}getRelativeToSurfaceXY(){const b=this.workspace.getLayerManager();if(!b)throw Error("Cannot calculate position because the workspace has not been appended");let e=0,g=0,k=this.getSvgRoot();if(k){do{const n=Pd(k);e+=n.x;g+=n.y;k=k.parentNode}while(k&&!b.hasLayer(k)&&null!==k)}return this.xy_=new Z(e,g)}moveBy(b,e){const g=new (ja(rc))(this),k=this.getRelativeToSurfaceXY();this.translate(k.x+b,k.y+e);this.xy_=new Z(k.x+b,k.y+e);g.recordNew();ba(g);this.workspace.resizeContents()}translate(b,
e){this.xy_=new Z(b,e);this.getSvgRoot().setAttribute("transform","translate("+b+","+e+")")}moveDuringDrag(b){b=`translate(${b.x}, ${b.y})`;this.getSvgRoot().setAttribute("transform",b)}moveTo(b,e){this.translate(b,e)}clearTransformAttributes(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var b=this.getRelativeToSurfaceXY();const e=this.getHeightWidth(),g=b.y,k=b.y+e.height;let n;this.RTL?(n=b.x-e.width,b=b.x):(n=b.x,b=b.x+e.width);return new Ga(g,k,n,b)}updateMovable(){this.isMovable()?
la(this.svgGroup,"blocklyDraggable"):za(this.svgGroup,"blocklyDraggable")}setMovable(b){super.setMovable(b);this.updateMovable()}setEditable(b){super.setEditable(b);this.textarea&&(this.textarea.readOnly=!b)}setDragging(b){b?la(this.getSvgRoot(),"blocklyDragging"):za(this.getSvgRoot(),"blocklyDragging")}getSvgRoot(){return this.svgGroup}getContent(){return this.textarea?this.textarea.value:this.content_}setContent(b){super.setContent(b);this.textarea&&(this.textarea.value=b)}setDeleteStyle(b){b?la(this.svgGroup,
"blocklyDraggingDelete"):za(this.svgGroup,"blocklyDraggingDelete")}setAutoLayout(b){}toXmlWithXY(b){let e=0;this.workspace.RTL&&(e=this.workspace.getWidth());b=this.toXml(b);const g=this.getRelativeToSurfaceXY();b.setAttribute("x",String(Math.round(this.workspace.RTL?e-g.x:g.x)));b.setAttribute("y",String(Math.round(g.y)));b.setAttribute("h",String(this.getHeight()));b.setAttribute("w",String(this.getWidth()));return b}toCopyData(){return{paster:uf.TYPE,commentState:this.toXmlWithXY()}}getHeightWidth(){return{width:this.getWidth(),
height:this.getHeight()}}render(){if(!this.rendered){var b=this.getHeightWidth(),e=this.createEditor();this.svgGroup.appendChild(e);this.svgHandleTarget=N(I.RECT,{"class":"blocklyCommentHandleTarget",x:0,y:0});this.svgGroup.appendChild(this.svgHandleTarget);this.svgRectTarget=N(I.RECT,{"class":"blocklyCommentTarget",x:0,y:0,rx:3,ry:3});this.svgGroup.appendChild(this.svgRectTarget);this.addResizeDom();this.isDeletable()&&this.addDeleteDom();this.setSize(b.width,b.height);this.textarea.value=this.content_;
this.rendered=!0;this.resizeGroup&&H(this.resizeGroup,"pointerdown",this,this.resizeMouseDown);this.isDeletable()&&(H(this.deleteGroup,"pointerdown",this,this.deleteMouseDown),H(this.deleteGroup,"pointerout",this,this.deleteMouseOut),H(this.deleteGroup,"pointerup",this,this.deleteMouseUp))}}createEditor(){this.foreignObject=N(I.FOREIGNOBJECT,{x:0,y:Xa.TOP_OFFSET,"class":"blocklyCommentForeignObject"});const b=document.createElementNS(Pb,"body");b.setAttribute("xmlns",Pb);b.className="blocklyMinimalBody";
const e=document.createElementNS(Pb,"textarea");e.className="blocklyCommentTextarea";e.setAttribute("dir",this.RTL?"RTL":"LTR");e.readOnly=!this.isEditable();b.appendChild(e);this.textarea=e;this.foreignObject.appendChild(b);H(e,"wheel",this,function(g){g.stopPropagation()});H(e,"change",this,function(g){this.setContent(e.value)});return this.foreignObject}addResizeDom(){this.resizeGroup=N(I.G,{"class":this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup);N(I.POLYGON,{points:"0,8 8,8 8,0"},
this.resizeGroup);N(I.LINE,{"class":"blocklyResizeLine",x1:8/3,y1:7,x2:7,y2:8/3},this.resizeGroup);N(I.LINE,{"class":"blocklyResizeLine",x1:16/3,y1:7,x2:7,y2:16/3},this.resizeGroup)}addDeleteDom(){this.deleteGroup=N(I.G,{"class":"blocklyCommentDeleteIcon"},this.svgGroup);this.deleteIconBorder=N(I.CIRCLE,{"class":"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup);N(I.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup);N(I.LINE,{x1:"5",y1:"5",x2:"10",
y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup)}resizeMouseDown(b){this.unbindDragEvents();Fa(b)||(this.workspace.startDrag(b,new Z(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper=H(document,"pointerup",this,this.resizeMouseUp),this.onMouseMoveWrapper=H(document,"pointermove",this,this.resizeMouseMove),this.workspace.hideChaff());b.stopPropagation()}deleteMouseDown(b){this.deleteIconBorder&&la(this.deleteIconBorder,"blocklyDeleteIconHighlighted");b.stopPropagation()}deleteMouseOut(b){this.deleteIconBorder&&
za(this.deleteIconBorder,"blocklyDeleteIconHighlighted")}deleteMouseUp(b){this.dispose();b.stopPropagation()}unbindDragEvents(){this.onMouseUpWrapper&&(ca(this.onMouseUpWrapper),this.onMouseUpWrapper=null);this.onMouseMoveWrapper&&(ca(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}resizeMouseUp(b){t();this.unbindDragEvents()}resizeMouseMove(b){this.autoLayout=!1;b=this.workspace.moveDrag(b);this.setSize(this.RTL?-b.x:b.x,b.y)}resizeComment(){const b=this.getHeightWidth(),e=Xa.TOP_OFFSET;let g;
null==(g=this.foreignObject)||g.setAttribute("width",String(b.width));let k;null==(k=this.foreignObject)||k.setAttribute("height",String(b.height-e));if(this.RTL){let n;null==(n=this.foreignObject)||n.setAttribute("x",String(-b.width))}this.textarea&&(this.textarea.style.width=b.width-4+"px",this.textarea.style.height=b.height-4-e+"px")}setSize(b,e){b=Math.max(b,45);e=Math.max(e,20+Xa.TOP_OFFSET);this.width_=b;this.height_=e;this.svgRect_.setAttribute("width",`${b}`);this.svgRect_.setAttribute("height",
`${e}`);let g;null==(g=this.svgRectTarget)||g.setAttribute("width",`${b}`);let k;null==(k=this.svgRectTarget)||k.setAttribute("height",`${e}`);let n;null==(n=this.svgHandleTarget)||n.setAttribute("width",`${b}`);let r;null==(r=this.svgHandleTarget)||r.setAttribute("height",String(Xa.TOP_OFFSET));if(this.RTL){this.svgRect_.setAttribute("transform","scale(-1 1)");let w;null==(w=this.svgRectTarget)||w.setAttribute("transform","scale(-1 1)")}if(this.resizeGroup)if(this.RTL){this.resizeGroup.setAttribute("transform",
"translate("+(-b+8)+","+(e-8)+") scale(-1 1)");let w;null==(w=this.deleteGroup)||w.setAttribute("transform","translate("+(-b+8)+",-8) scale(-1 1)")}else{this.resizeGroup.setAttribute("transform","translate("+(b-8)+","+(e-8)+")");let w;null==(w=this.deleteGroup)||w.setAttribute("transform","translate("+(b-8)+",-8)")}this.resizeComment()}setFocus(){this.focused=!0;setTimeout(()=>{this.disposed_||(this.textarea.focus(),this.addFocus(),this.svgRectTarget&&la(this.svgRectTarget,"blocklyCommentTargetFocused"),
this.svgHandleTarget&&la(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused=!1;setTimeout(()=>{this.disposed_||(this.textarea.blur(),this.removeFocus(),this.svgRectTarget&&za(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&za(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(b,e,g){a.disable$$module$build$src$core$events$utils();let k;try{const n=Jb.parseAttributes(b);k=new Xa(e,n.content,n.h,n.w,n.id);
e.rendered&&(k.initSvg(!0),k.render());if(!isNaN(n.x)&&!isNaN(n.y))if(e.RTL){const r=g||e.getWidth();k.moveBy(r-n.x,n.y)}else k.moveBy(n.x,n.y)}finally{a.enable$$module$build$src$core$events$utils()}Jb.fireCreateEvent(k);return k}};Xa.DEFAULT_SIZE=100;Xa.TOP_OFFSET=10;yb("\n.blocklyCommentForeignObject {\n  position: relative;\n  z-index: 0;\n}\n\n.blocklyCommentRect {\n  fill: #E7DE8E;\n  stroke: #bcA903;\n  stroke-width: 1px;\n}\n\n.blocklyCommentTarget {\n  fill: transparent;\n  stroke: #bcA903;\n}\n\n.blocklyCommentTargetFocused {\n  fill: none;\n}\n\n.blocklyCommentHandleTarget {\n  fill: none;\n}\n\n.blocklyCommentHandleTargetFocused {\n  fill: transparent;\n}\n\n.blocklyFocused>.blocklyCommentRect {\n  fill: #B9B272;\n  stroke: #B9B272;\n}\n\n.blocklySelected>.blocklyCommentTarget {\n  stroke: #fc3;\n  stroke-width: 3px;\n}\n\n.blocklyCommentDeleteIcon {\n  cursor: pointer;\n  fill: #000;\n  display: none;\n}\n\n.blocklySelected > .blocklyCommentDeleteIcon {\n  display: block;\n}\n\n.blocklyDeleteIconShape {\n  fill: #000;\n  stroke: #000;\n  stroke-width: 1px;\n}\n\n.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {\n  stroke: #fc3;\n}\n");
var Xe=new Set,lg=new WeakSet,Vd=null,kg=null,Li=0,vf={};vf.finishQueuedRenders=id;vf.queueRender=Mi;vf.triggerQueuedRenders=Ib;var mb={appendDomToWorkspace:function(b,e){if(!e.getBlocksBoundingBox)return a.domToWorkspace$$module$build$src$core$xml(b,e);var g=e.getBlocksBoundingBox();b=a.domToWorkspace$$module$build$src$core$xml(b,e);if(g&&g.top!==g.bottom){var k=g.bottom;g=e.RTL?g.right:g.left;var n=Infinity;let r=-Infinity,w=Infinity;for(let x=0;x<b.length;x++){const P=e.getBlockById(b[x]).getRelativeToSurfaceXY();
P.y<w&&(w=P.y);P.x<n&&(n=P.x);P.x>r&&(r=P.x)}k=k-w+10;g=e.RTL?g-r:g-n;for(n=0;n<b.length;n++)e.getBlockById(b[n]).moveBy(g,k,["create"])}return b}};mb.blockToDom=Dc;mb.blockToDomWithXY=Ye;mb.clearWorkspaceAndLoadFromXml=function(b,e){e.setResizesEnabled(!1);e.clear();b=a.domToWorkspace$$module$build$src$core$xml(b,e);e.setResizesEnabled(!0);return b};mb.deleteNext=function(b){for(let e=0;e<b.childNodes.length;e++){const g=b.childNodes[e];if("next"===g.nodeName.toLowerCase()){b.removeChild(g);break}}};
mb.domToBlock=a.domToBlock$$module$build$src$core$xml;mb.domToBlockInternal=Ec;mb.domToPrettyText=function(b){b=Zb(b).split("<");let e="";for(let g=1;g<b.length;g++){const k=b[g];"/"===k[0]&&(e=e.substring(2));b[g]=e+"<"+k;"/"!==k[0]&&"/>"!==k.slice(-2)&&(e+="  ")}b=b.join("\n");b=b.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>");return b.replace(/^\n/,"")};mb.domToText=Zb;mb.domToVariables=Ti;mb.domToWorkspace=a.domToWorkspace$$module$build$src$core$xml;mb.variablesToDom=Qi;mb.workspaceToDom=
function(b,e){const g=a.createElement$$module$build$src$core$utils$xml("xml");var k=Qi(a.allUsedVarModels$$module$build$src$core$variables(b));k.hasChildNodes()&&g.appendChild(k);k=b.getTopComments(!0);for(let n=0;n<k.length;n++)g.appendChild(k[n].toXmlWithXY(e));b=b.getTopBlocks(!0);for(k=0;k<b.length;k++)g.appendChild(Ye(b[k],e));return g};var Cd=class extends Error{},Xi=class extends Cd{constructor(b){super("Expected to find a 'type' property, defining the block type");this.state=b}},Yd=class extends Cd{constructor(b,
e,g){super(`The block ${e.toDevString()} is missing a(n) ${b}
connection`);this.block=e;this.state=g}},Zi=class extends Cd{constructor(b,e,g,k){super(`The block ${g.toDevString()} could not connect its
${e} to its parent, because: ${b}`);this.childBlock=g;this.childState=k}},Yi=class extends Cd{constructor(b){super("Encountered a real block which is defined as a child of a shadow\nblock. It is an invariant of Blockly that shadow blocks only have shadow\nchildren");this.state=b}},$i=class extends Cd{constructor(b,e,g){super(`Cannot add an icon of type '${b}' to the block `+`${e.toDevString()}, because there is no icon registered with `+`type '${b}'. Make sure that all of your icons have been `+"registered.");
this.block=e;this.state=g}},Qc={};Qc.BadConnectionCheck=Zi;Qc.DeserializationError=Cd;Qc.MissingBlockType=Xi;Qc.MissingConnection=Yd;Qc.RealChildOfShadow=Yi;Qc.UnregisteredIcon=$i;var nh={};nh.register=og;nh.unregister=function(b){h(U.SERIALIZER,b)};var gl=class{constructor(){this.priority=50}save(b){const e=[];for(const g of b.getTopBlocks(!1))(b=$b(g,{addCoordinates:!0,doFullSerialization:!1}))&&e.push(b);return e.length?{languageVersion:0,blocks:e}:null}load(b,e){b=b.blocks;for(const g of b)Fc(g,
e,{recordUndo:da()})}clear(b){for(const e of b.getTopBlocks(!1))e.dispose(!1)}};og("blocks",new gl);var se={};se.BlockSerializer=gl;se.append=Fc;se.appendInternal=Xd;se.save=$b;var Rc=class extends Ad{constructor(b){super();this.isBlank=!b;b&&(this.blockId=b.id,this.workspaceId=b.workspace.id)}toJson(){const b=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");b.blockId=this.blockId;return b}static fromJson(b,e,g){e=super.fromJson(b,
e,null!=g?g:new Rc);e.blockId=b.blockId;return e}},oh=class extends Rc{constructor(b){super(b);this.type=a.CREATE$$module$build$src$core$events$utils;b&&(b.isShadow()&&(this.recordUndo=!1),this.xml=Ye(b),this.ids=hb(b),this.json=$b(b,{addCoordinates:!0}))}toJson(){const b=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");
if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");b.xml=Zb(this.xml);b.ids=this.ids;b.json=this.json;this.recordUndo||(b.recordUndo=this.recordUndo);return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new oh);e.xml=a.textToDom$$module$build$src$core$utils$xml(b.xml);e.ids=b.ids;e.json=b.json;void 0!==b.recordUndo&&(e.recordUndo=b.recordUndo);return e}run(b){const e=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");
if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!Xn(e,this.ids))if(b)Fc(this.json,e);else for(b=0;b<this.ids.length;b++){const g=this.ids[b],k=e.getBlockById(g);k?k.dispose(!1):g===this.blockId&&console.warn("Can't uncreate non-existent block: "+g)}}},Xn=function(b,e){return e.map(g=>b.getBlockById(g)).filter(g=>g&&g.isShadow()).length===e.length};d(U.EVENT,a.CREATE$$module$build$src$core$events$utils,oh);var ph=class extends Qb{constructor(b,
e){super(e);this.type="theme_change";this.themeName=b}toJson(){const b=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");b.themeName=this.themeName;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new ph);e.themeName=b.themeName;return e}};d(U.EVENT,"theme_change",ph);var qh=class extends Qb{constructor(b,e,g,k,n){super(k);this.type=cd;this.viewTop=b;this.viewLeft=e;this.scale=g;this.oldScale=n}toJson(){const b=
super.toJson();if(void 0===this.viewTop)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.viewLeft)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.scale)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.oldScale)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");
b.viewTop=this.viewTop;b.viewLeft=this.viewLeft;b.scale=this.scale;b.oldScale=this.oldScale;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new qh);e.viewTop=b.viewTop;e.viewLeft=b.viewLeft;e.scale=b.scale;e.oldScale=b.oldScale;return e}};d(U.EVENT,cd,qh);a.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:28,connectingSnapRadius:28,currentConnectionPreference:8,bumpDelay:250};var fa;(function(b){b[b.INPUT_VALUE=1]="INPUT_VALUE";b[b.OUTPUT_VALUE=2]="OUTPUT_VALUE";
b[b.NEXT_STATEMENT=3]="NEXT_STATEMENT";b[b.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(fa||={});var Dd=class{constructor(b){this.connectionChecker=b;this.connections=[]}addConnection(b,e){e=this.calculateIndexForYPos(e);this.connections.splice(e,0,b)}findIndexOfConnection(b,e){if(!this.connections.length)return-1;const g=this.calculateIndexForYPos(e);if(g>=this.connections.length)return-1;e=b.y;let k=g;for(;0<=k&&this.connections[k].y===e;){if(this.connections[k]===b)return k;k--}for(k=g;k<this.connections.length&&
this.connections[k].y===e;){if(this.connections[k]===b)return k;k++}return-1}calculateIndexForYPos(b){if(!this.connections.length)return 0;let e=0,g=this.connections.length;for(;e<g;){const k=Math.floor((e+g)/2);if(this.connections[k].y<b)e=k+1;else if(this.connections[k].y>b)g=k;else{e=k;break}}return e}removeConnection(b,e){b=this.findIndexOfConnection(b,e);if(-1===b)throw Error("Unable to find connection in connectionDB.");this.connections.splice(b,1)}getNeighbours(b,e){function g(ea){const Oa=
n-k[ea].x,Ha=r-k[ea].y;Math.sqrt(Oa*Oa+Ha*Ha)<=e&&P.push(k[ea]);return Ha<e}const k=this.connections,n=b.x,r=b.y;b=0;let w=k.length-2,x=w;for(;b<x;)k[x].y<r?b=x:w=x,x=Math.floor((b+w)/2);const P=[];w=b=x;if(k.length){for(;0<=b&&g(b);)b--;do w++;while(w<k.length&&g(w))}return P}isInYRange(b,e,g){return Math.abs(this.connections[b].y-e)<=g}searchForClosest(b,e,g){if(!this.connections.length)return{connection:null,radius:e};const k=b.y,n=b.x;b.x=n+g.x;b.y=k+g.y;var r=this.calculateIndexForYPos(b.y);
g=null;let w=e,x,P=r-1;for(;0<=P&&this.isInYRange(P,b.y,e);)x=this.connections[P],this.connectionChecker.canConnect(b,x,!0,w)&&(g=x,w=x.distanceFrom(b)),P--;for(;r<this.connections.length&&this.isInYRange(r,b.y,e);)x=this.connections[r],this.connectionChecker.canConnect(b,x,!0,w)&&(g=x,w=x.distanceFrom(b)),r++;b.x=n;b.y=k;return{connection:g,radius:w}}static init(b){const e=[];e[fa.INPUT_VALUE]=new Dd(b);e[fa.OUTPUT_VALUE]=new Dd(b);e[fa.NEXT_STATEMENT]=new Dd(b);e[fa.PREVIOUS_STATEMENT]=new Dd(b);
return e}},te=class{paste(b,e,g){if(!e.isCapacityAvailable(b.typeCounts))return null;g&&(b.blockState.x=g.x,b.blockState.y=g.y);a.disable$$module$build$src$core$events$utils();let k;try{k=Fc(b.blockState,e),bn(k)}finally{a.enable$$module$build$src$core$events$utils()}if(!k)return k;wa()&&!k.isShadow()&&ba(new (ja(a.CREATE$$module$build$src$core$events$utils))(k));k.select();return k}};te.TYPE="block";ig(te.TYPE,new te);var pg=null,qg=null,rh={duplicateInternal:function(b){const e=b.toCopyData();return e?
Zd(e,b.workspace):null},copyInternal:function(b){const e=b.toCopyData();pg=e;let g;qg=null!=(g=b.workspace)?g:null;return e}},Sc={};Sc.BlockPaster=te;Sc.TEST_ONLY=rh;Sc.copy=function(b){Na("Blockly.clipboard.copy","v11","v12","myCopyable.toCopyData()");return rh.copyInternal(b)};Sc.duplicate=function(b){Na("Blockly.clipboard.duplicate","v11","v12","Blockly.clipboard.paste(myCopyable.toCopyData(), myWorkspace)");return rh.duplicateInternal(b)};Sc.paste=Zd;Sc.registry=mh;var dn="aria-",cn="role",jb;
(function(b){b.GRID="grid";b.GRIDCELL="gridcell";b.GROUP="group";b.LISTBOX="listbox";b.MENU="menu";b.MENUITEM="menuitem";b.MENUITEMCHECKBOX="menuitemcheckbox";b.OPTION="option";b.PRESENTATION="presentation";b.ROW="row";b.TREE="tree";b.TREEITEM="treeitem"})(jb||={});var Ka;(function(b){b.ACTIVEDESCENDANT="activedescendant";b.COLCOUNT="colcount";b.DISABLED="disabled";b.EXPANDED="expanded";b.INVALID="invalid";b.LABEL="label";b.LABELLEDBY="labelledby";b.LEVEL="level";b.ORIENTATION="orientation";b.POSINSET=
"posinset";b.ROWCOUNT="rowcount";b.SELECTED="selected";b.SETSIZE="setsize";b.VALUEMAX="valuemax";b.VALUEMIN="valuemin"})(Ka||={});var ue={};ue.Role=jb;ue.State=Ka;ue.setRole=Kb;ue.setState=La;var ug=class{constructor(){this.menuItems=[];this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(b){this.menuItems.push(b)}render(b){const e=document.createElement("div");e.className=
"blocklyMenu goog-menu blocklyNonSelectable";e.tabIndex=0;this.roleName&&Kb(e,this.roleName);this.element=e;for(let g=0,k;k=this.menuItems[g];g++)e.appendChild(k.createDom());this.mouseOverHandler=H(e,"pointerover",this,this.handleMouseOver,!0);this.clickHandler=H(e,"pointerup",this,this.handleClick,!0);this.mouseEnterHandler=H(e,"pointerenter",this,this.handleMouseEnter,!0);this.mouseLeaveHandler=H(e,"pointerleave",this,this.handleMouseLeave,!0);this.onKeyDownHandler=H(e,"keydown",this,this.handleKeyEvent);
b.appendChild(e);return e}getElement(){return this.element}focus(){const b=this.getElement();b&&(b.focus({preventScroll:!0}),la(b,"blocklyFocused"))}blur(){const b=this.getElement();b&&(b.blur(),za(b,"blocklyFocused"))}setRole(b){this.roleName=b}dispose(){this.mouseOverHandler&&(ca(this.mouseOverHandler),this.mouseOverHandler=null);this.clickHandler&&(ca(this.clickHandler),this.clickHandler=null);this.mouseEnterHandler&&(ca(this.mouseEnterHandler),this.mouseEnterHandler=null);this.mouseLeaveHandler&&
(ca(this.mouseLeaveHandler),this.mouseLeaveHandler=null);this.onKeyDownHandler&&(ca(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let b=0,e;e=this.menuItems[b];b++)e.dispose();this.element=null}getMenuItem(b){const e=this.getElement();for(;b&&b!==e;){if(b.classList.contains("blocklyMenuItem"))for(let g=0,k;k=this.menuItems[g];g++)if(k.getElement()===b)return k;b=b.parentElement}return null}setHighlighted(b){var e=this.highlightedItem;e&&(e.setHighlighted(!1),this.highlightedItem=null);b&&
(b.setHighlighted(!0),this.highlightedItem=b,e=this.getElement(),Rf(b.getElement(),e),La(e,Ka.ACTIVEDESCENDANT,b.getId()))}highlightNext(){const b=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(b,1)}highlightPrevious(){const b=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>b?this.menuItems.length:b,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(b,
e){b+=e;let g;for(;g=this.menuItems[b];){if(g.isEnabled()){this.setHighlighted(g);break}b+=e}}handleMouseOver(b){(b=this.getMenuItem(b.target))&&(b.isEnabled()?this.highlightedItem!==b&&this.setHighlighted(b):this.setHighlighted(null))}handleClick(b){const e=this.openingCoords;this.openingCoords=null;if(e&&"number"===typeof b.clientX){const g=new Z(b.clientX,b.clientY);if(1>Z.distance(e,g))return}(b=this.getMenuItem(b.target))&&b.performAction()}handleMouseEnter(b){this.focus()}handleMouseLeave(b){this.getElement()&&
(this.blur(),this.setHighlighted(null))}handleKeyEvent(b){if(this.menuItems.length&&!(b.shiftKey||b.ctrlKey||b.metaKey||b.altKey)){var e=this.highlightedItem;switch(b.key){case "Enter":case " ":e&&e.performAction();break;case "ArrowUp":this.highlightPrevious();break;case "ArrowDown":this.highlightNext();break;case "PageUp":case "Home":this.highlightFirst();break;case "PageDown":case "End":this.highlightLast();break;default:return}b.preventDefault();b.stopPropagation()}}getSize(){const b=this.getElement(),
e=Se(b);e.height=b.scrollHeight;return e}},vg=class{constructor(b,e){this.content=b;this.opt_value=e;this.enabled=!0;this.element=null;this.rightToLeft=!1;this.roleName=null;this.highlight=this.checked=this.checkable=!1;this.actionHandler=null}createDom(){const b=document.createElement("div");b.id=aa();this.element=b;b.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?
"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const e=document.createElement("div");e.className="blocklyMenuItemContent goog-menuitem-content";if(this.checkable){var g=document.createElement("div");g.className="blocklyMenuItemCheckbox goog-menuitem-checkbox";e.appendChild(g)}g=this.content;"string"===typeof this.content&&(g=document.createTextNode(this.content));e.appendChild(g);b.appendChild(e);this.roleName&&Kb(b,this.roleName);
La(b,Ka.SELECTED,this.checkable&&this.checked||!1);La(b,Ka.DISABLED,!this.enabled);return b}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let b;return null!=(b=this.opt_value)?b:null}setRightToLeft(b){this.rightToLeft=b}setRole(b){this.roleName=b}setCheckable(b){this.checkable=b}setChecked(b){this.checked=b}setHighlighted(b){this.highlight=b;const e=this.getElement();e&&this.isEnabled()&&(b?(la(e,"blocklyMenuItemHighlight"),la(e,"goog-menuitem-highlight")):
(za(e,"blocklyMenuItemHighlight"),za(e,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(b){this.enabled=b}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(b,e){this.actionHandler=b.bind(e)}},nd=null,Ze=null,rg="blocklyWidgetDiv",od="",pd="",Lb,Rb={};Rb.createDom=cj;Rb.getDiv=md;Rb.hide=zb;Rb.hideIfOwner=tg;Rb.isVisible=dj;Rb.positionWithAnchor=fj;Rb.repositionForWindowResize=gj;Rb.show=sg;Rb.testOnly_setDiv=function(b){Lb=b;if(null===b){let e;
null==(e=document.querySelector("."+rg))||e.remove()}};var $e=null,ij={},af=null,Sb={};Sb.callbackFactory=a.callbackFactory$$module$build$src$core$contextmenu;Sb.commentDeleteOption=kj;Sb.commentDuplicateOption=lj;Sb.dispose=jj;Sb.getCurrentBlock=function(){return $e};Sb.hide=bf;Sb.setCurrentBlock=hj;Sb.show=cf;Sb.workspaceCommentOption=function(b,e){const g={enabled:!0};g.text=a.Msg$$module$build$src$core$msg.ADD_COMMENT;g.callback=function(){const k=new Xa(b,a.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT,
Xa.DEFAULT_SIZE,Xa.DEFAULT_SIZE);var n=b.getInjectionDiv().getBoundingClientRect();n=new Z(e.clientX-n.left,e.clientY-n.top);const r=b.getOriginOffsetInPixels();n=Z.difference(n,r);n.scale(1/b.scale);k.moveBy(n.x,n.y);b.rendered&&(k.initSvg(),k.render(),k.select())};return g};var Ba=class{constructor(){this.registry_=new Map;this.reset()}reset(){this.registry_.clear()}register(b){if(this.registry_.has(b.id))throw Error('Menu item with ID "'+b.id+'" is already registered.');this.registry_.set(b.id,
b)}unregister(b){if(!this.registry_.has(b))throw Error('Menu item with ID "'+b+'" not found.');this.registry_.delete(b)}getItem(b){let e;return null!=(e=this.registry_.get(b))?e:null}getContextMenuOptions(b,e){const g=[];for(const n of this.registry_.values())if(b===n.scopeType){var k=n.preconditionFn(e);"hidden"!==k&&(k={text:"function"===typeof n.displayText?n.displayText(e):n.displayText,enabled:"enabled"===k,callback:n.callback,scope:e,weight:n.weight},g.push(k))}g.sort(function(n,r){return n.weight-
r.weight});return g}};(function(b){var e=b.ScopeType||(b.ScopeType={});e.BLOCK="block";e.WORKSPACE="workspace";b.registry=new b})(Ba||={});var wf={};wf.clamp=ae;wf.toDegrees=mj;wf.toRadians=$d;var ce=16,Ag=1,yj=12,zg=16,df=.25,Cg=null,Hc=null,rd="",sd="",xa,qd,Gc,wg=null,oc=null,qj=null,Dg={getBoundsInfo:function(){const b=Bc(wg),e=Se(wg);return{left:b.x,right:b.x+e.width,top:b.y,bottom:b.y+e.height,width:e.width,height:e.height}},getPositionMetrics:function(b,e,g,k){const n=Dg.getBoundsInfo(),r=
Se(xa);return e+r.height<n.bottom?wj(b,e,n,r):k-r.height>n.top?xj(g,k,n,r):e+r.height<document.documentElement.clientHeight?wj(b,e,n,r):k-r.height>document.documentElement.clientTop?xj(g,k,n,r):mn(b,n,r)}},$a={ANIMATION_TIME:df,ARROW_HORIZONTAL_PADDING:yj,ARROW_SIZE:ce,BORDER_SIZE:Ag,PADDING_Y:zg,TEST_ONLY:Dg};$a.clearContent=xg;$a.createDom=nj;$a.getContentDiv=be;$a.getOwner=pj;$a.getPositionX=ff;$a.hide=Bg;$a.hideIfOwner=de;$a.hideWithoutAnimation=Mb;$a.isVisible=zj;$a.repositionForWindowResize=
Aj;$a.setBoundsElement=oj;$a.setColour=yg;$a.show=uj;$a.showPositionedByBlock=function(b,e,g,k){return rj(tj(e),b,g,k)};$a.showPositionedByField=ef;var gf=null,fe=null,ve={};ve.connectionUiEffect=Eg;ve.disconnectUiEffect=Ej;ve.disconnectUiStop=ee;ve.disposeUiEffect=Cj;var hl=class{constructor(b,e){this.bubble=b;this.workspace=e;this.dragTarget_=null;this.wouldDeleteBubble_=!1;this.startXY_=this.bubble.getRelativeToSurfaceXY()}startBubbleDrag(){a.getGroup$$module$build$src$core$events$utils()||a.setGroup$$module$build$src$core$events$utils(!0);
this.workspace.setResizesEnabled(!1);this.bubble.setAutoLayout&&this.bubble.setAutoLayout(!1);let b;null==(b=this.workspace.getLayerManager())||b.moveToDragLayer(this.bubble);this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(b,e){e=this.pixelsToWorkspaceUnits_(e);e=Z.sum(this.startXY_,e);this.bubble.moveDuringDrag(e);e=this.dragTarget_;this.dragTarget_=this.workspace.getDragTarget(b);b=this.wouldDeleteBubble_;this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_);b!==this.wouldDeleteBubble_&&
this.updateCursorDuringBubbleDrag_();this.dragTarget_!==e&&(e&&e.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble));this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(b){return b&&this.workspace.getComponentManager().hasCapability(b.id,Ua.Capability.DELETE_AREA)?b.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(b,e){this.dragBubble(b,e);this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?
b=this.startXY_:(b=this.pixelsToWorkspaceUnits_(e),b=Z.sum(this.startXY_,b));this.bubble.moveTo(b.x,b.y);if(this.dragTarget_)this.dragTarget_.onDrop(this.bubble);if(this.wouldDeleteBubble_)this.fireMoveEvent_(),this.bubble.dispose();else{if(this.bubble.setDragging){this.bubble.setDragging(!1);let g;null==(g=this.workspace.getLayerManager())||g.moveOffDragLayer(this.bubble,100)}this.fireMoveEvent_()}this.workspace.setResizesEnabled(!0);a.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent_(){if(this.bubble instanceof
Xa){const b=new (ja(rc))(this.bubble);b.setOldCoordinate(this.startXY_);b.recordNew();ba(b)}}pixelsToWorkspaceUnits_(b){b=new Z(b.x/this.workspace.scale,b.y/this.workspace.scale);this.workspace.isMutator&&b.scale(1/this.workspace.options.parentWorkspace.scale);return b}},Tc=[];Tc[fa.INPUT_VALUE]=fa.OUTPUT_VALUE;Tc[fa.OUTPUT_VALUE]=fa.INPUT_VALUE;Tc[fa.NEXT_STATEMENT]=fa.PREVIOUS_STATEMENT;Tc[fa.PREVIOUS_STATEMENT]=fa.NEXT_STATEMENT;var Uc={};Uc.commonWordPrefix=Fj;Uc.commonWordSuffix=Gj;Uc.isNumber=
a.isNumber$$module$build$src$core$utils$string;Uc.shortestStringLength=hf;Uc.startsWith=function(b,e){Na("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith");return b.startsWith(e)};Uc.wrap=a.wrap$$module$build$src$core$utils$string;var jf=void 0,je=!1,td=!1,Rj=50,Lj=0,Ic=0,Hg=0,Ig=0,sb=null,ie=null,Jg=0,Kg=10,Mj=10,Nj=750,kf=5,Ta=null,nb={HOVER_MS:Nj,LIMIT:Rj,MARGINS:kf,OFFSET_X:Jg,OFFSET_Y:Kg,RADIUS_OK:Mj};nb.bindMouseEvents=he;nb.block=Pj;nb.createDom=
Jj;nb.dispose=Oj;nb.getCustomTooltip=function(){return jf};nb.getDiv=function(){return Ta};nb.getTooltipOfObject=ge;nb.hide=pc;nb.isVisible=function(){return je};nb.setCustomTooltip=function(b){jf=b};nb.unbindMouseEvents=Gg;nb.unblock=Qj;var il=class{constructor(b){this.workspace=b;this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally();this.verticalScrollEnabled_=this.workspace.isMovableVertically();this.startScrollXY_=new Z(b.scrollX,b.scrollY)}dispose(){this.workspace=null}startDrag(){z()&&
z().unselect()}endDrag(b){this.drag(b)}drag(b){b=Z.sum(this.startScrollXY_,b);if(this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(b.x,b.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(b.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,b.y);else throw new TypeError("Invalid state.");}},cc=class{constructor(b,e){this.creatorWorkspace=e;this.mouseDownXY=new Z(0,0);this.startWorkspace_=this.targetBlock=
this.startBlock=this.startIcon=this.startField=this.startBubble=null;this.hasExceededDragRadius=!1;this.boundEvents=[];this.flyout=this.workspaceDragger=this.blockDragger=this.bubbleDragger=null;this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1;this.cachedPoints=new Map;this.startDistance=this.previousScale=0;this.currentDropdownOwner=this.isPinchZoomEnabled=null;this.mostRecentEvent=b;this.currentDragDeltaXY=new Z(0,0);this.healStack=!1}dispose(){t();Qj();this.creatorWorkspace.clearGesture();
for(const b of this.boundEvents)ca(b);this.boundEvents.length=0;this.blockDragger&&this.blockDragger.dispose();this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(b){const e=new Z(b.clientX,b.clientY);this.updateDragDelta(e)&&(this.updateIsDragging(),xb());this.mostRecentEvent=b}updateDragDelta(b){this.currentDragDeltaXY=Z.difference(b,this.mouseDownXY);return this.hasExceededDragRadius?!1:this.hasExceededDragRadius=Z.magnitude(this.currentDragDeltaXY)>(this.flyout?a.config$$module$build$src$core$config.flyoutDragRadius:
a.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let b;if(!this.targetBlock||null==(b=this.flyout)||!b.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error("Cannot update dragging from the flyout because the ' +\n          'flyout's target workspace is undefined");return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),
a.getGroup$$module$build$src$core$events$utils()||a.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),this.targetBlock.select(),!0):!1}updateIsDraggingBubble(){if(!this.startBubble)return!1;this.startDraggingBubble();return!0}updateIsDraggingBlock(){if(!this.targetBlock)return!1;if(this.flyout){if(this.updateIsDraggingFromFlyout())return this.startDraggingBlock(),!0}else if(this.targetBlock.isMovable())return this.startDraggingBlock(),
!0;return!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");if(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())this.workspaceDragger=new il(this.startWorkspace_),this.workspaceDragger.startDrag()}updateIsDragging(){if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0;this.updateIsDraggingBubble()||
this.updateIsDraggingBlock()||this.updateIsDraggingWorkspace()}startDraggingBlock(){this.blockDragger=new (y(U.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock,this.startWorkspace_);this.blockDragger.startDrag(this.currentDragDeltaXY,this.healStack);this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY)}startDraggingBubble(){if(!this.startBubble)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");
this.bubbleDragger=new hl(this.startBubble,this.startWorkspace_);this.bubbleDragger.startBubbleDrag();this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY)}doStart(b){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch;ta(b)?this.cancel():(this.gestureHasStarted=!0,ee(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),
this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=pj(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=b,Pj(),this.targetBlock&&this.targetBlock.select(),Fa(b)?this.handleRightClick(b):("pointerdown"===b.type.toLowerCase()&&"mouse"!==b.pointerType&&Nd(b,this),this.mouseDownXY=new Z(b.clientX,b.clientY),this.healStack=b.altKey||b.ctrlKey||b.metaKey,this.bindMouseEvents(b),this.isEnding_||this.handleTouchStart(b)))}bindMouseEvents(b){this.boundEvents.push(H(document,
"pointerdown",null,this.handleStart.bind(this),!0));this.boundEvents.push(H(document,"pointermove",null,this.handleMove.bind(this),!0));this.boundEvents.push(H(document,"pointerup",null,this.handleUp.bind(this),!0));b.preventDefault();b.stopPropagation()}handleStart(b){this.isDragging()||(this.handleTouchStart(b),this.isMultiTouch()&&xb())}handleMove(b){this.isDragging()&&v(b)||!this.isMultiTouch()?(this.updateFromEvent(b),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):
this.blockDragger?this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY):this.bubbleDragger&&this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY),b.preventDefault(),b.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(b),xb())}handleUp(b){this.isDragging()||this.handleTouchEnd(b);if(!this.isMultiTouch()||this.isDragging()){if(!v(b))return;this.updateFromEvent(b);xb();if(this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=
!0;this.bubbleDragger?this.bubbleDragger.endBubbleDrag(b,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(b,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()?this.doBubbleClick():this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(b)}b.preventDefault();b.stopPropagation();this.dispose()}handleTouchStart(b){var e=
A(b);this.cachedPoints.set(e,this.getTouchPoint(b));var g=Array.from(this.cachedPoints.keys());2===g.length&&(e=this.cachedPoints.get(g[0]),g=this.cachedPoints.get(g[1]),this.startDistance=Z.distance(e,g),this.isMultiTouch_=!0,b.preventDefault())}handleTouchMove(b){const e=A(b);this.cachedPoints.set(e,this.getTouchPoint(b));this.isPinchZoomEnabled&&2===this.cachedPoints.size?this.handlePinch(b):this.handleMove(b)}handlePinch(b){var e=Array.from(this.cachedPoints.keys()),g=this.cachedPoints.get(e[0]);
e=this.cachedPoints.get(e[1]);g=Z.distance(g,e)/this.startDistance;if(0<this.previousScale&&Infinity>this.previousScale){e=g-this.previousScale;e=0<e?5*e:6*e;if(!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const k=this.startWorkspace_,n=db(b,k.getParentSvg(),k.getInverseScreenCTM());k.zoom(n.x,n.y,e)}this.previousScale=g;b.preventDefault()}handleTouchEnd(b){b=A(b);this.cachedPoints.has(b)&&this.cachedPoints.delete(b);2>this.cachedPoints.size&&
(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(b){return this.startWorkspace_?new Z(b.pageX,b.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(xb(),this.bubbleDragger?this.bubbleDragger.endBubbleDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(b){this.targetBlock?
(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(b)):this.startBubble?this.startBubble.showContextMenu(b):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(b));b.preventDefault();b.stopPropagation();this.dispose()}handleWsStart(b,e){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(e);this.mostRecentEvent=
b;this.doStart(b)}fireWorkspaceClick(b){ba(new (ja(zc))(null,b.id,"workspace"))}handleFlyoutStart(b,e){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(e);this.handleWsStart(b,e.getWorkspace())}handleBlockStart(b,e){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(e);this.mostRecentEvent=b}handleBubbleStart(b,e){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");
this.setStartBubble(e);this.mostRecentEvent=b}doBubbleClick(){this.startBubble instanceof Xa&&(this.startBubble.setFocus(),this.startBubble.select())}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent);this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront();
this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock.isEnabled()&&(a.getGroup$$module$build$src$core$events$utils()||a.setGroup$$module$build$src$core$events$utils(!0),this.flyout.createBlock(this.targetBlock).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const b=new (ja(zc))(this.startBlock,
this.startWorkspace_.id,"block");ba(b)}this.bringBlockToFront();a.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(b){b=this.creatorWorkspace;z()&&z().unselect();this.fireWorkspaceClick(this.startWorkspace_||b)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(b){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=b)}setStartIcon(b){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");
this.startIcon||(this.startIcon=b)}setStartBubble(b){this.startBubble||(this.startBubble=b)}setStartBlock(b){this.startBlock||this.startBubble||(this.startBlock=b,b.isInFlyout&&b!==b.getRootBlock()?this.setTargetBlock(b.getRootBlock()):this.setTargetBlock(b))}setTargetBlock(b){b.isShadow()?this.setTargetBlock(b.getParent()):this.targetBlock=b}setStartWorkspace(b){this.startWorkspace_||(this.startWorkspace_=b)}setStartFlyout(b){this.flyout||(this.flyout=b)}isBubbleClick(){return!!this.startBubble&&
!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const b=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&
b}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}isDragging(){return!!this.workspaceDragger||!!this.blockDragger||!!this.bubbleDragger}hasStarted(){return this.gestureHasStarted}getInsertionMarkers(){return this.blockDragger?this.blockDragger.getInsertionMarkers():[]}getCurrentDragger(){let b,e;return null!=(e=null!=(b=this.blockDragger)?b:this.workspaceDragger)?e:this.bubbleDragger}static inProgress(){const b=K();for(let e=0,g;g=b[e];e++)if(g.currentGesture_)return!0;
return!1}},bh=class{constructor(b,e){this.pattern=b;this.scale=1;let g;this.spacing=null!=(g=e.spacing)?g:0;let k;this.length=null!=(k=e.length)?k:1;this.line2=(this.line1=b.firstChild)&&this.line1.nextSibling;let n;this.snapToGrid=null!=(n=e.snap)?n:!1}setSpacing(b){this.spacing=b;this.update(this.scale)}setLength(b){this.length=b;this.update(this.scale)}setSnapToGrid(b){this.snapToGrid=b}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(b){this.scale=
b;var e=this.spacing*b;this.pattern.setAttribute("width",`${e}`);this.pattern.setAttribute("height",`${e}`);e=Math.floor(this.spacing/2)+.5;let g=e-this.length/2,k=e+this.length/2;e*=b;g*=b;k*=b;this.setLineAttributes(this.line1,b,g,k,e,e);this.setLineAttributes(this.line2,b,e,e,g,k)}setLineAttributes(b,e,g,k,n,r){b&&(b.setAttribute("stroke-width",`${e}`),b.setAttribute("x1",`${g}`),b.setAttribute("y1",`${n}`),b.setAttribute("x2",`${k}`),b.setAttribute("y2",`${r}`))}moveTo(b,e){this.pattern.setAttribute("x",
`${b}`);this.pattern.setAttribute("y",`${e}`)}static createDom(b,e,g){b=N(I.PATTERN,{id:"blocklyGridPattern"+b,patternUnits:"userSpaceOnUse"},g);let k,n;if(0<(null!=(k=e.length)?k:1)&&0<(null!=(n=e.spacing)?n:0)){N(I.LINE,{stroke:e.colour},b);let r;null!=(r=e.length)&&r&&N(I.LINE,{stroke:e.colour},b)}else N(I.LINE,{},b);return b}},we=class{constructor(b){this.workspace=b;this.cursorSvg_=this.cursor_=null;this.markers=new Map;this.markerSvg_=null}registerMarker(b,e){this.markers.has(b)&&this.unregisterMarker(b);
e.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,e));this.setMarkerSvg(e.getDrawer().createDom());this.markers.set(b,e)}unregisterMarker(b){const e=this.markers.get(b);if(e)e.dispose(),this.markers.delete(b);else throw Error("Marker with ID "+b+" does not exist. Can only unregister markers that exist.");}getCursor(){return this.cursor_}getMarker(b){return this.markers.get(b)||null}setCursor(b){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose();if(this.cursor_=
b)b=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(b),this.setCursorSvg(this.cursor_.getDrawer().createDom())}setCursorSvg(b){b?(this.workspace.getBlockCanvas().appendChild(b),this.cursorSvg_=b):this.cursorSvg_=null}setMarkerSvg(b){b?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(b,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(b)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&
this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const b=Object.keys(this.markers);for(let e=0,g;g=b[e];e++)this.unregisterMarker(g);this.markers.clear();this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};we.LOCAL_MARKER="local_marker_1";var jl={};jl.deepMerge=qc;var Vc=class{constructor(b,e,g,k){this.name=b;this.startHats=!1;this.blockStyles=e||Object.create(null);this.categoryStyles=g||Object.create(null);this.componentStyles=k||Object.create(null);this.fontStyle=Object.create(null);
d(U.THEME,b,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(b,e){this.blockStyles[b]=e}setCategoryStyle(b,e){this.categoryStyles[b]=e}getComponentStyle(b){b=this.componentStyles[b];if(!b)return null;if("string"===typeof b){const e=this.getComponentStyle(b);if(e)return e}return`${b}`}setComponentStyle(b,e){this.componentStyles[b]=e}setFontStyle(b){this.fontStyle=b}setStartHats(b){this.startHats=b}static defineTheme(b,e){b=b.toLowerCase();const g=new Vc(b);let k=e.base;if(k){if("string"===
typeof k){let n;k=null!=(n=q(U.THEME,k))?n:void 0}k instanceof Vc&&(qc(g,k),g.name=b)}qc(g.blockStyles,e.blockStyles);qc(g.categoryStyles,e.categoryStyles);qc(g.componentStyles,e.componentStyles);qc(g.fontStyle,e.fontStyle);null!==e.startHats&&(g.startHats=e.startHats);return g}},xf=new Vc("classic",{colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},
text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},{colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}}),ub=class{constructor(b){this.gridPattern=null;this.getMetrics=
this.setMetrics=void 0;let e=null,g=!1;var k=!1,n=!1,r=!1,w=!1,x=!1;const P=!!b.readOnly;if(!P){var ea;e=Uf(null!=(ea=b.toolbox)?ea:null);g=Xf(e);k=b.trashcan;k=void 0===k?g:k;n=b.collapse;n=void 0===n?g:n;r=b.comments;r=void 0===r?g:r;w=b.disable;w=void 0===w?g:w;x=b.sounds;x=void 0===x?!0:x}ea=b.maxTrashcanContents;k?void 0===ea&&(ea=32):ea=0;const Oa=!!b.rtl;let Ha=b.horizontalLayout;void 0===Ha&&(Ha=!1);var fb="end"!==b.toolboxPosition;fb=Ha?fb?pa.TOP:pa.BOTTOM:fb===Oa?pa.RIGHT:pa.LEFT;let jd=
b.css;void 0===jd&&(jd=!0);let kd="https://blockly-demo.appspot.com/static/media/";b.media?kd=b.media.endsWith("/")?b.media:b.media+"/":"path"in b&&(Na("path","Nov 2014","Jul 2023","media"),kd=b.path+"media/");const kl=b.oneBasedIndex,Yn=b.renderer||"geras",Zn=b.plugins||{};let sh=b.modalInputs;void 0===sh&&(sh=!0);this.RTL=Oa;this.oneBasedIndex=void 0===kl?!0:kl;this.collapse=n;this.comments=r;this.disable=w;this.readOnly=P;this.maxBlocks=b.maxBlocks||Infinity;let ll;this.maxInstances=null!=(ll=
b.maxInstances)?ll:null;this.modalInputs=sh;this.pathToMedia=kd;this.hasCategories=g;this.moveOptions=ub.parseMoveOptions_(b,g);this.hasScrollbars=!!this.moveOptions.scrollbars;this.hasTrashcan=k;this.maxTrashcanContents=ea;this.hasSounds=x;this.hasCss=jd;this.horizontalLayout=Ha;this.languageTree=e;this.gridOptions=ub.parseGridOptions_(b);this.zoomOptions=ub.parseZoomOptions_(b);this.toolboxPosition=fb;this.theme=ub.parseThemeOptions_(b);this.renderer=Yn;let ml;this.rendererOverrides=null!=(ml=b.rendererOverrides)?
ml:null;let nl;this.parentWorkspace=null!=(nl=b.parentWorkspace)?nl:null;this.plugins=Zn}static parseMoveOptions_(b,e){const g=b.move||{},k={};void 0===g.scrollbars&&void 0===b.scrollbars?k.scrollbars=e:"object"===typeof g.scrollbars?(k.scrollbars={horizontal:!!g.scrollbars.horizontal,vertical:!!g.scrollbars.vertical},k.scrollbars.horizontal&&k.scrollbars.vertical?k.scrollbars=!0:k.scrollbars.horizontal||k.scrollbars.vertical||(k.scrollbars=!1)):k.scrollbars=!!g.scrollbars||!!b.scrollbars;k.wheel=
k.scrollbars&&void 0!==g.wheel?!!g.wheel:"object"===typeof k.scrollbars;k.drag=k.scrollbars?void 0===g.drag?!0:!!g.drag:!1;return k}static parseZoomOptions_(b){b=b.zoom||{};const e={};e.controls=void 0===b.controls?!1:!!b.controls;e.wheel=void 0===b.wheel?!1:!!b.wheel;e.startScale=void 0===b.startScale?1:Number(b.startScale);e.maxScale=void 0===b.maxScale?3:Number(b.maxScale);e.minScale=void 0===b.minScale?.3:Number(b.minScale);e.scaleSpeed=void 0===b.scaleSpeed?1.2:Number(b.scaleSpeed);e.pinch=void 0===
b.pinch?e.wheel||e.controls:!!b.pinch;return e}static parseGridOptions_(b){b=b.grid||{};const e={};e.spacing=Number(b.spacing)||0;e.colour=b.colour||"#888";e.length=void 0===b.length?1:Number(b.length);e.snap=0<e.spacing&&!!b.snap;return e}static parseThemeOptions_(b){b=b.theme||xf;return"string"===typeof b?q(U.THEME,b):b instanceof Vc?b:Vc.defineTheme(b.name||"builtin"+aa(),b)}},Wc=class extends Rc{constructor(b,e,g,k,n){super(b);this.type=a.CHANGE$$module$build$src$core$events$utils;b&&(this.element=
e,this.name=g||void 0,this.oldValue=k,this.newValue=n)}toJson(){const b=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");b.element=this.element;b.name=this.name;b.oldValue=this.oldValue;b.newValue=this.newValue;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Wc);e.element=b.element;e.name=b.name;e.oldValue=b.oldValue;e.newValue=b.newValue;return e}isNull(){return this.oldValue===this.newValue}run(b){var e=
this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");e=e.getBlockById(this.blockId);if(!e)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");var g=e.getIcon(eb.MUTATOR);g&&Jc(g)&&g.bubbleIsVisible()&&g.setBubbleVisible(!1);b=b?this.newValue:this.oldValue;switch(this.element){case "field":(e=e.getField(this.name))?e.setValue(b):console.warn("Can't set non-existent field: "+
this.name);break;case "comment":e.setCommentText(b||null);break;case "collapsed":e.setCollapsed(!!b);break;case "disabled":e.setEnabled(!b);break;case "inline":e.setInputsInline(!!b);break;case "mutation":g=Wc.getExtraBlockState_(e);e.loadExtraState?e.loadExtraState(JSON.parse(b||"{}")):e.domToMutation&&e.domToMutation(a.textToDom$$module$build$src$core$utils$xml(b||"<mutation/>"));ba(new Wc(e,"mutation",null,g,b));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(b){return b.saveExtraState?
(b=b.saveExtraState(!0))?JSON.stringify(b):"":b.mutationToDom?(b=b.mutationToDom())?Zb(b):"":""}};d(U.EVENT,a.CHANGE$$module$build$src$core$events$utils,Wc);var Lg=.45,Ng=.65,Uj={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},vb={};vb.blend=ud;vb.getHsvSaturation=Mg;vb.getHsvValue=Og;vb.hexToRgb=
Pg;vb.hsvToHex=Qg;vb.hueToHex=Vj;vb.names=Uj;vb.parse=Kc;vb.rgbToHex=lf;vb.setHsvSaturation=Sj;vb.setHsvValue=Tj;var yf={checkMessageReferences:function(b){let e=!0;const g=a.Msg$$module$build$src$core$msg,k=b.match(/%{BKY_[A-Z]\w*}/gi);if(k)for(let n=0;n<k.length;n++){const r=k[n].toUpperCase();void 0===g[r.slice(6,-1)]&&(console.warn("No message string for "+k[n]+" in "+b),e=!1)}return e}};yf.parseBlockColour=ke;yf.replaceMessageReferences=Ra;yf.tokenizeInterpolation=Wj;var ua=class{constructor(b,
e,g){this.DEFAULT_VALUE=null;this.name=void 0;this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null;this.disposed=!1;this.maxDisplayLength=50;this.sourceBlock_=null;this.enabled_=this.visible_=this.isDirty_=!0;this.suffixField=this.prefixField=this.clickTarget_=null;this.EDITABLE=!0;this.SERIALIZABLE=!1;this.CURSOR="";this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:
this.DEFAULT_VALUE;this.size_=new Ja(0,0);b!==ua.SKIP_SETUP&&(g&&this.configure_(g),this.setValue(b),e&&this.setValidator(e))}configure_(b){b.tooltip&&this.setTooltip(Ra(b.tooltip))}setSourceBlock(b){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=b}getConstants(){!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants());return this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||
(this.fieldGroup_=N(I.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_();this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=N(I.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,
x:0,y:0,height:this.size_.height,width:this.size_.width,"class":"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=N(I.TEXT,{"class":"blocklyText"},this.fieldGroup_);this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central");this.textContent_=document.createTextNode("");this.textElement_.appendChild(this.textContent_)}bindEvents_(){const b=this.getClickTarget_();if(!b)throw Error("A click target has not been set.");he(b);
this.mouseDownWrapper_=H(b,"pointerdown",this,this.onMouseDown_)}fromXml(b){this.setValue(b.textContent)}toXml(b){b.textContent=this.getValue();return b}saveState(b){b=this.saveLegacyState(ua);return null!==b?b:this.getValue()}loadState(b){this.loadLegacyState(ua,b)||this.setValue(b)}saveLegacyState(b){return b.prototype.saveState===this.saveState&&b.prototype.toXml!==this.toXml?(b=a.createElement$$module$build$src$core$utils$xml("field"),b.setAttribute("name",this.name||""),Qd(this.toXml(b)).replace(' xmlns="https://developers.google.com/blockly/xml"',
"")):null}loadLegacyState(b,e){return b.prototype.loadState===this.loadState&&b.prototype.fromXml!==this.fromXml?(this.fromXml(a.textToDom$$module$build$src$core$utils$xml(e)),!0):!1}dispose(){de(this);tg(this);let b;(null==(b=this.getSourceBlock())?0:b.isDeadOrDying())||Da(this.fieldGroup_);this.disposed=!0}updateEditable(){const b=this.fieldGroup_,e=this.getSourceBlock();this.EDITABLE&&b&&e&&(this.enabled_&&e.isEditable()?(la(b,"blocklyEditableText"),za(b,"blocklyNonEditableText"),b.style.cursor=
this.CURSOR):(la(b,"blocklyNonEditableText"),za(b,"blocklyEditableText"),b.style.cursor=""))}setEnabled(b){this.enabled_=b;this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==ua.prototype.showEditor_}isClickableInFlyout(b){return!b}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let b=!1;this.name&&(this.SERIALIZABLE?
b=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),b=!0));return b}isVisible(){return this.visible_}setVisible(b){if(this.visible_!==b){this.visible_=b;var e=this.fieldGroup_;e&&(e.style.display=b?"block":"none")}}setValidator(b){this.validator_=b}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);
return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_());this.updateSize_()}showEditor(b){this.isClickable()&&this.showEditor_(b)}showEditor_(b){}repositionForWindowResize(){return!1}updateSize_(b){const e=
this.getConstants();b=void 0!==b?b:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let g=2*b,k=e.FIELD_TEXT_HEIGHT,n=0;this.textElement_&&(n=gd(this.textElement_,e.FIELD_TEXT_FONTSIZE,e.FIELD_TEXT_FONTWEIGHT,e.FIELD_TEXT_FONTFAMILY),g+=n);this.isFullBlockField()||(k=Math.max(k,e.FIELD_BORDER_RECT_HEIGHT));this.size_.height=k;this.size_.width=g;this.positionTextElement_(b,n);this.positionBorderRect_()}positionTextElement_(b,e){if(this.textElement_){var g=this.getConstants(),
k=this.size_.height/2,n;this.textElement_.setAttribute("x",String((null==(n=this.getSourceBlock())?0:n.RTL)?this.size_.width-e-b:b));this.textElement_.setAttribute("y",String(g.FIELD_TEXT_BASELINE_CENTER?k:k-g.FIELD_TEXT_HEIGHT/2+g.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),
this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){if(!this.isVisible())return new Ja(0,0);this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0===this.size_.width&&(this.render_(),0!==this.size_.width&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."));return this.size_}getScaledBBox(){let b;var e=this.getSourceBlock();if(!e)throw new Ia;if(this.isFullBlockField()){var g=
this.sourceBlock_.getHeightWidth();const k=e.workspace.scale;b=this.getAbsoluteXY_();e=(g.width+1)*k;g=(g.height+1)*k;hh?(b.x+=1.5*k,b.y+=1.5*k):(b.x-=.5*k,b.y-=.5*k)}else g=this.borderRect_.getBoundingClientRect(),b=Bc(this.borderRect_),e=g.width,g=g.height;return new Ga(b.y,b.y+g,b.x,b.x+e)}onLocationChange(b){}getDisplayText_(){let b=this.getText();if(!b)return ua.NBSP;b.length>this.maxDisplayLength&&(b=b.substring(0,this.maxDisplayLength-2)+"â€¦");b=b.replace(/\s/g,ua.NBSP);this.sourceBlock_&&this.sourceBlock_.RTL&&
(b+="â€");return b}getText(){const b=this.getText_();return null!==b?String(b):String(this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0;this.constants_=null}forceRerender(){this.isDirty_=!0;this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.queueRender(),this.sourceBlock_.bumpNeighbours())}setValue(b,e=!0){if(null!==b){var g=this.doClassValidation_(b);b=this.processValidation_(b,g);if(!(b instanceof Error)){var k;g=null==(k=this.getValidator())?void 0:k.call(this,
b);k=this.processValidation_(b,g);k instanceof Error||(b=this.sourceBlock_,b&&b.disposed||(g=this.getValue(),g===k?this.doValueUpdate_(k):(this.doValueUpdate_(k),e&&b&&wa()&&ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(b,"field",this.name||null,g,k)),this.isDirty_&&this.forceRerender())))}}}processValidation_(b,e){return null===e?(this.doValueInvalid_(b),this.isDirty_&&this.forceRerender(),Error()):void 0===e?b:e}getValue(){return this.value_}doClassValidation_(b){return null===b||void 0===
b?null:b}doValueUpdate_(b){this.value_=b;this.isDirty_=!0}doValueInvalid_(b){}onMouseDown_(b){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(b=this.sourceBlock_.workspace.getGesture(b))&&b.setStartField(this)}setTooltip(b){b||""===b||(b=this.sourceBlock_);const e=this.getClickTarget_();e?e.tooltip=b:this.tooltip_=b}getTooltip(){const b=this.getClickTarget_();return b?ge(b):ge({tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Bc(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let b=
null;const e=this.getSourceBlock();if(!e)throw new Ia;const g=e.inputList;for(let k=0;k<e.inputList.length;k++){const n=g[k],r=n.fieldRow;for(let w=0;w<r.length;w++)if(r[w]===this){b=n;break}}return b}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(b){return!1}setCursorSvg(b){if(b){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(b);this.cursorSvg_=b}else this.cursorSvg_=null}setMarkerSvg(b){if(b){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);
this.fieldGroup_.appendChild(b);this.markerSvg_=b}else this.markerSvg_=null}updateMarkers_(){var b=this.getSourceBlock();if(!b)throw new Ia;b=b.workspace;b.keyboardAccessibilityMode&&this.cursorSvg_&&b.getCursor().draw();b.keyboardAccessibilityMode&&this.markerSvg_&&b.getMarker(we.LOCAL_MARKER).draw()}};ua.NBSP="Â ";ua.SKIP_SETUP=Symbol("SKIP_SETUP");var Ia=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}};a.Names$$module$build$src$core$names=
class{constructor(b,e){this.db=new Map;this.dbReverse=new Set;this.variableMap=null;this.variablePrefix=e||"";this.reservedWords=new Set(b?b.split(","):[])}reset(){this.db.clear();this.dbReverse.clear();this.variableMap=null}setVariableMap(b){this.variableMap=b}getNameForUserVariable(b){return this.variableMap?(b=this.variableMap.getVariableById(b))?b.name:null:(console.warn("Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),
null)}populateVariables(b){b=a.allUsedVarModels$$module$build$src$core$variables(b);for(let e=0;e<b.length;e++)this.getName(b[e].getId(),a.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(b){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts");}getName(b,e){let g=b;e===a.NameType$$module$build$src$core$names.VARIABLE&&(b=this.getNameForUserVariable(b))&&(g=b);b=g.toLowerCase();const k=e===a.NameType$$module$build$src$core$names.VARIABLE||
e===a.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(e)||this.db.set(e,new Map);const n=this.db.get(e);if(n.has(b))return k+n.get(b);e=this.getDistinctName(g,e);n.set(b,e.substr(k.length));return e}getUserNames(b){let e;return(b=null==(e=this.db.get(b))?void 0:e.keys())?Array.from(b):[]}getDistinctName(b,e){b=this.safeName(b);let g=null,k,n;for(;this.dbReverse.has(b+(null!=(k=g)?k:""))||this.reservedWords.has(b+(null!=(n=g)?n:""));)g=g?g+1:2;let r;b+=null!=
(r=g)?r:"";this.dbReverse.add(b);return(e===a.NameType$$module$build$src$core$names.VARIABLE||e===a.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+b}safeName(b){b?(b=encodeURI(b.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!=="0123456789".indexOf(b[0])&&(b="my_"+b)):b=a.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";return b}static equals(b,e){return b.toLowerCase()===e.toLowerCase()}};(function(b){b=b.NameType||(b.NameType={});b.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE";
b.VARIABLE="VARIABLE";b.PROCEDURE="PROCEDURE"})(a.Names$$module$build$src$core$names||(a.Names$$module$build$src$core$names={}));a.NameType$$module$build$src$core$names=a.Names$$module$build$src$core$names.NameType;a.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=a.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE;var ol=class extends Map{constructor(){super()}set(b,e){if(this.get(b)===e)return this;super.set(b,e);Sg(e)&&e.startPublishing();return this}delete(b){const e=this.get(b);
b=super.delete(b);if(!b)return b;Sg(e)&&e.stopPublishing();return b}clear(){if(this.size)for(const b of this.keys())this.delete(b)}add(b){return this.set(b.getId(),b)}getProcedures(){return[...this.values()]}},zf=class{constructor(b){this.sourceBlock=b;this.offsetInBlock=new Z(0,0);this.workspaceLocation=new Z(0,0);this.svgRoot=null;this.tooltip=b}getType(){throw Error("Icons must implement getType");}initView(b){if(!this.svgRoot){var e=this.sourceBlock;this.svgRoot=N(I.G,{"class":"blocklyIconGroup"});
e.getSvgRoot().appendChild(this.svgRoot);this.updateSvgRootOffset();H(this.svgRoot,"pointerdown",this,b);this.svgRoot.tooltip=this;he(this.svgRoot)}}dispose(){Gg(this.svgRoot);Da(this.svgRoot)}getWeight(){return-1}getSize(){return new Ja(0,0)}setTooltip(b){this.tooltip=null!=b?b:this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",Jc(this)&&
this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(b){this.offsetInBlock=b;this.updateSvgRootOffset()}updateSvgRootOffset(){let b;null==(b=this.svgRoot)||b.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(b){this.workspaceLocation=Z.sum(b,this.offsetInBlock)}onClick(){}isClickableInFlyout(b){return!0}setVisible(b){Na("setVisible","v10","v11","setBubbleVisible");
Jc(this)&&this.setBubbleVisible(b)}},Xj={fromJsonInternal:function(b){const e=q(U.FIELD,b.type);if(e){if("function"!==typeof e.fromJson)throw new TypeError("returned Field was not a IRegistrableField");return e.fromJson(b)}console.warn("Blockly could not create a field of type "+b.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached.");return null}},Af={TEST_ONLY:Xj};
Af.fromJson=a.fromJson$$module$build$src$core$field_registry;Af.register=tb;Af.unregister=function(b){h(U.FIELD,b)};var Nb=class extends ua{constructor(b,e,g){super(ua.SKIP_SETUP);this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null;this.SERIALIZABLE=!0;this.CURSOR="default";this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null;b!==ua.SKIP_SETUP&&(Array.isArray(b)?(Yj(b),b=wn(b),this.menuGenerator_=b.options,this.prefixField=b.prefix||null,this.suffixField=
b.suffix||null):this.menuGenerator_=b,this.selectedOption=this.getOptions(!1)[0],g&&this.configure_(g),this.setValue(this.selectedOption[1]),e&&this.setValidator(e))}fromXml(b){this.isOptionListDynamic()&&this.getOptions(!1);this.setValue(b.textContent)}loadState(b){this.loadLegacyState(Nb,b)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(b))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot();this.createTextElement_();
this.imageElement=N(I.IMAGE,{},this.fieldGroup_);this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_();this.borderRect_&&la(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let b;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!(null==(b=this.getSourceBlock())?0:b.isShadow())}createTextArrow_(){this.arrow=N(I.TSPAN,{},this.textElement_);let b;this.arrow.appendChild(document.createTextNode((null==
(b=this.getSourceBlock())?0:b.RTL)?Nb.ARROW_CHAR+" ":" "+Nb.ARROW_CHAR));let e;(null==(e=this.getSourceBlock())?0:e.RTL)?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=N(I.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_);this.svgArrow.setAttributeNS(lb,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(b){var e=
this.getSourceBlock();if(!e)throw new Ia;this.dropdownCreate();this.menu_.openingCoords=b&&"number"===typeof b.clientX?new Z(b.clientX,b.clientY):null;xg();b=this.menu_.render(be());la(b,"blocklyDropdownMenu");this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(e=e.getColour(),yg(e,this.sourceBlock_.style.colourTertiary));ef(this,this.dropdownDispose_.bind(this));this.menu_.focus();this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),Rf(this.selectedMenuItem.getElement(),be(),!0));
this.applyColour()}dropdownCreate(){const b=this.getSourceBlock();if(!b)throw new Ia;const e=new ug;e.setRole(jb.LISTBOX);this.menu_=e;const g=this.getOptions(!1);this.selectedMenuItem=null;for(let n=0;n<g.length;n++){const [r,w]=g[n];if("object"===typeof r){var k=new Image(r.width,r.height);k.src=r.src;k.alt=r.alt||""}else k=r;k=new vg(k,w);k.setRole(jb.OPTION);k.setRightToLeft(b.RTL);k.setCheckable(!0);e.addChild(k);k.setChecked(w===this.value_);w===this.value_&&(this.selectedMenuItem=k);k.onAction(this.handleMenuActionEvent,
this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose();this.selectedMenuItem=this.menu_=null;this.applyColour()}handleMenuActionEvent(b){de(this,!0);this.onItemSelected_(this.menu_,b)}onItemSelected_(b,e){this.setValue(e.getValue())}isOptionListDynamic(){return"function"===typeof this.menuGenerator_}getOptions(b){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");if(Array.isArray(this.menuGenerator_))return this.menuGenerator_;if(b&&this.generatedOptions)return this.generatedOptions;
this.generatedOptions=this.menuGenerator_();Yj(this.generatedOptions);return this.generatedOptions}doClassValidation_(b){return this.getOptions(!0).some(e=>e[1]===b)?b:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+b),null)}doValueUpdate_(b){super.doValueUpdate_(b);b=this.getOptions(!0);for(let e=0,g;g=b[e];e++)g[1]===this.value_&&(this.selectedOption=g)}applyColour(){const b=this.sourceBlock_.style;
this.borderRect_&&(this.borderRect_.setAttribute("stroke",b.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",b.colourTertiary):this.borderRect_.setAttribute("fill","transparent"));this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=b.colourSecondary:this.arrow.style.fill=b.colourPrimary)}render_(){this.getTextContent().nodeValue="";this.imageElement.style.display="none";const b=this.selectedOption&&this.selectedOption[0];b&&"object"===typeof b?this.renderSelectedImage(b):
this.renderSelectedText();this.positionBorderRect_()}renderSelectedImage(b){const e=this.getSourceBlock();if(!e)throw new Ia;this.imageElement.style.display="";this.imageElement.setAttributeNS(lb,"xlink:href",b.src);this.imageElement.setAttribute("height",String(b.height));this.imageElement.setAttribute("width",String(b.width));const g=Number(b.height);b=Number(b.width);var k=!!this.borderRect_;const n=Math.max(k?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,g+$n);k=k?this.getConstants().FIELD_BORDER_RECT_X_PADDING:
0;let r;r=this.svgArrow?this.positionSVGArrow(b+k,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):gd(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=b+r+2*k;this.size_.height=n;let w=0;e.RTL?this.imageElement.setAttribute("x",`${k+r}`):(w=b+r,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${k}`));this.imageElement.setAttribute("y",String(n/
2-g/2));this.positionTextElement_(w+k,b+r)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var b=this.getTextElement();la(b,"blocklyDropdownText");b.setAttribute("text-anchor","start");var e=!!this.borderRect_;b=Math.max(e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const g=gd(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);
e=e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let k=0;this.svgArrow&&(k=this.positionSVGArrow(g+e,b/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2));this.size_.width=g+k+2*e;this.size_.height=b;this.positionTextElement_(e,g)}positionSVGArrow(b,e){if(!this.svgArrow)return 0;const g=this.getSourceBlock();if(!g)throw new Ia;const k=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,n=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,r=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;
this.svgArrow.setAttribute("transform","translate("+(g.RTL?k:b+n)+","+e+")");return r+n}getText_(){if(!this.selectedOption)return null;const b=this.selectedOption[0];return"object"===typeof b?b.alt:b}static fromJson(b){if(!b.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(b.options,void 0,b)}};Nb.CHECKMARK_OVERHANG=25;Nb.MAX_MENU_HEIGHT_VH=.45;Nb.ARROW_CHAR="â–¾";
var $n=10;tb("field_dropdown",Nb);var ya=class{constructor(b,e,g){this.workspace=b;this.anchor=e;this.ownerRect=g;this.size=new Ja(0,0);this.colour="#ffffff";this.disposed=!1;this.relativeLeft=this.relativeTop=0;this.svgRoot=N(I.G,{},b.getBubbleCanvas());b=N(I.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot);this.tail=N(I.PATH,{},b);this.background=N(I.RECT,{"class":"blocklyDraggable",x:0,y:0,rx:wb.BORDER_WIDTH,ry:wb.BORDER_WIDTH},b);this.contentContainer=
N(I.G,{},this.svgRoot);H(this.background,"pointerdown",this,this.onMouseDown)}dispose(){Da(this.svgRoot);this.disposed=!0}setAnchorLocation(b,e=!1){this.anchor=b;e?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor();this.renderTail()}setPositionRelativeToAnchor(b,e){this.relativeLeft=b;this.relativeTop=e;this.positionRelativeToAnchor();this.renderTail()}getSize(){return this.size}setSize(b,e=!1){b.width=Math.max(b.width,wb.MIN_SIZE);b.height=Math.max(b.height,wb.MIN_SIZE);this.size=
b;this.background.setAttribute("width",`${b.width}`);this.background.setAttribute("height",`${b.height}`);e?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor();this.renderTail()}getColour(){return this.colour}setColour(b){this.colour=b;this.tail.setAttribute("fill",b);this.background.setAttribute("fill",b)}onMouseDown(b){let e;null==(e=this.workspace.getGesture(b))||e.handleBubbleStart(b,this)}positionRelativeToAnchor(){let b=this.anchor.x;b=this.workspace.RTL?b-(this.relativeLeft+
this.size.width):b+this.relativeLeft;this.moveTo(b,this.relativeTop+this.anchor.y)}moveTo(b,e){this.svgRoot.setAttribute("transform",`translate(${b}, ${e})`)}positionByRect(b=new Ga(0,0,0,0)){var e=this.workspace.getMetricsManager().getViewMetrics(!0),g=this.getOptimalRelativeLeft(e),k=this.getOptimalRelativeTop(e);const n={x:g,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},r={x:-this.size.width-30,y:k};k={x:b.getWidth(),y:k};var w={x:g,y:b.getHeight()};g=b.getWidth()<
b.getHeight()?k:w;b=b.getWidth()<b.getHeight()?w:k;k=this.getOverlap(n,e);w=this.getOverlap(r,e);const x=this.getOverlap(g,e);e=this.getOverlap(b,e);e=Math.max(k,w,x,e);k===e?(this.relativeLeft=n.x,this.relativeTop=n.y):w===e?(this.relativeLeft=r.x,this.relativeTop=r.y):x===e?(this.relativeLeft=g.x,this.relativeTop=g.y):(this.relativeLeft=b.x,this.relativeTop=b.y);this.positionRelativeToAnchor()}getOverlap(b,e){var g=this.workspace.RTL?this.anchor.x-b.x-this.size.width:b.x+this.anchor.x;b=b.y+this.anchor.y;
return Math.max(0,Math.min(1,(Math.min(g+this.size.width,e.left+e.width)-Math.max(g,e.left))*(Math.min(b+this.size.height,e.top+e.height)-Math.max(b,e.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(b){let e=-this.size.width/4;if(this.size.width>b.width)return e;b=this.getWorkspaceViewRect(b);if(this.workspace.RTL){var g=this.anchor.x-e;g-this.size.width<b.left?e=-(b.left-this.anchor.x+this.size.width):g>b.right&&(e=-(b.right-this.anchor.x))}else{g=e+this.anchor.x;const k=g+this.size.width;
g<b.left?e=b.left-this.anchor.x:k>b.right&&(e=b.right-this.anchor.x-this.size.width)}return e}getOptimalRelativeTop(b){let e=-this.size.height/4;if(this.size.height>b.height)return e;const g=this.anchor.y+e,k=g+this.size.height;b=this.getWorkspaceViewRect(b);g<b.top?e=b.top-this.anchor.y:k>b.bottom&&(e=b.bottom-this.anchor.y-this.size.height);return e}getWorkspaceViewRect(b){const e=b.top;let g=b.top+b.height,k=b.left;b=b.left+b.width;g-=this.getScrollbarThickness();this.workspace.RTL?k-=this.getScrollbarThickness():
b-=this.getScrollbarThickness();return new Ga(e,g,k,b)}getScrollbarThickness(){return Qa.scrollbarThickness/this.workspace.scale}renderTail(){const b=[];var e=this.size.width/2,g=this.size.height/2,k=-this.relativeLeft,n=-this.relativeTop;if(e===k&&g===n)b.push("M "+e+","+g);else{n-=g;k-=e;this.workspace.RTL&&(k*=-1);var r=Math.sqrt(n*n+k*k),w=Math.acos(k/r);0>n&&(w=2*Math.PI-w);var x=w+Math.PI/2;x>2*Math.PI&&(x-=2*Math.PI);var P=Math.sin(x);const Oa=Math.cos(x);let Ha=(this.size.width+this.size.height)/
wb.TAIL_THICKNESS;Ha=Math.min(Ha,this.size.width,this.size.height)/4;x=1-wb.ANCHOR_RADIUS/r;k=e+x*k;n=g+x*n;x=e+Ha*Oa;const fb=g+Ha*P;e-=Ha*Oa;g-=Ha*P;P=$d(this.workspace.RTL?-wb.TAIL_ANGLE:wb.TAIL_ANGLE);P=w+P;P>2*Math.PI&&(P-=2*Math.PI);w=Math.sin(P)*r/wb.TAIL_BEND;r=Math.cos(P)*r/wb.TAIL_BEND;b.push("M"+x+","+fb);b.push("C"+(x+r)+","+(fb+w)+" "+k+","+n+" "+k+","+n);b.push("C"+k+","+n+" "+(e+r)+","+(g+w)+" "+e+","+g)}b.push("z");let ea;null==(ea=this.tail)||ea.setAttribute("d",b.join(" "))}bringToFront(){let b;
const e=null==(b=this.svgRoot)?void 0:b.parentNode;return this.svgRoot&&(null==e?void 0:e.lastChild)!==this.svgRoot?(null==e||e.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new Z(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(b){this.moveTo(b.x,b.y);this.relativeLeft=this.workspace.RTL?this.anchor.x-b.x-this.size.width:b.x-this.anchor.x;this.relativeTop=
b.y-this.anchor.y;this.renderTail()}setDragging(b){}setDeleteStyle(b){}isDeletable(){return!1}showContextMenu(b){}};var wb=ya;ya.BORDER_WIDTH=6;ya.DOUBLE_BORDER=2*wb.BORDER_WIDTH;ya.MIN_SIZE=wb.DOUBLE_BORDER;ya.TAIL_THICKNESS=1;ya.TAIL_ANGLE=20;ya.TAIL_BEND=4;ya.ANCHOR_RADIUS=8;var gc=class extends ya{constructor(b,e,g,k){super(e,g,k);this.workspace=e;this.anchor=g;this.ownerRect=k;this.autoLayout=!0;e=new ub(b);this.validateWorkspaceOptions(e);this.svgDialog=N(I.SVG,{x:ya.BORDER_WIDTH,y:ya.BORDER_WIDTH},
this.contentContainer);b.parentWorkspace=this.workspace;this.miniWorkspace=this.newWorkspaceSvg(new ub(b));this.miniWorkspace.internalIsMutator=!0;b=this.miniWorkspace.createDom("blocklyMutatorBackground");this.svgDialog.appendChild(b);e.languageTree&&(b.insertBefore(this.miniWorkspace.addFlyout(I.G),this.miniWorkspace.getCanvas()),b=this.miniWorkspace.getFlyout(),null==b||b.init(this.miniWorkspace),null==b||b.show(e.languageTree));this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));
let n,r;null==(n=this.miniWorkspace.getFlyout())||null==(r=n.getWorkspace())||r.addChangeListener(this.onWorkspaceChange.bind(this));this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose();super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(b){this.miniWorkspace.addChangeListener(b)}validateWorkspaceOptions(b){if(b.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(b.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");
if(b.zoomOptions.controls||b.zoomOptions.wheel||b.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(b.moveOptions.scrollbars||b.moveOptions.wheel||b.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(b.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts");}onWorkspaceChange(){this.bumpBlocksIntoBounds();this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const b of this.miniWorkspace.getTopBlocks(!1)){const e=
b.getRelativeToSurfaceXY();20>e.y&&b.moveBy(0,20-e.y);if(b.RTL){let g=-20;const k=this.miniWorkspace.getFlyout();k&&(g-=k.getWidth());e.x>g&&b.moveBy(g-e.x,0)}else 20>e.x&&b.moveBy(20-e.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var b=this.getSize(),e=this.calculateWorkspaceSize();Math.abs(b.width-e.width)<gc.MINIMUM_VIEW_CHANGE&&Math.abs(b.height-e.height)<gc.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${e.width}px`),this.svgDialog.setAttribute("height",`${e.height}px`),
this.miniWorkspace.setCachedParentSvgSize(e.width,e.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${e.width}, 0)`),this.setSize(new Ja(e.width+ya.DOUBLE_BORDER,e.height+ya.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var b=this.miniWorkspace.getCanvas().getBBox();let e=b.width+gc.MARGIN;b=b.height+gc.MARGIN;const g=this.miniWorkspace.getFlyout();if(g){const k=g.getWorkspace().getMetricsManager().getScrollMetrics();
b=Math.max(b,k.height+20);e+=g.getWidth()}return new Ja(e,b)}updateBlockStyles(){for(var b of this.miniWorkspace.getAllBlocks(!1))b.setStyle(b.getStyleName());let e;if(b=null==(e=this.miniWorkspace.getFlyout())?void 0:e.getWorkspace())for(const g of b.getAllBlocks(!1))g.setStyle(g.getStyleName())}moveDuringDrag(b){super.moveDuringDrag(b);this.autoLayout=!1}moveTo(b,e){super.moveTo(b,e);this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(b){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts");
}};gc.MINIMUM_VIEW_CHANGE=10;gc.MARGIN=3*ya.DOUBLE_BORDER;a.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends zf{constructor(b,e){super(e);this.flyoutBlockTypes=b;this.sourceBlock=e;this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return a.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(b){this.svgRoot||(super.initView(b),N(I.RECT,{"class":"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),
N(I.PATH,{"class":"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),N(I.CIRCLE,{"class":"blocklyIconShape",
r:"2.7",cx:"8",cy:"8"},this.svgRoot),la(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let b;null==(b=this.miniWorkspaceBubble)||b.dispose()}getWeight(){return a.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Ja(17,17)}applyColour(){super.applyColour();let b;null==(b=this.miniWorkspaceBubble)||b.setColour(this.sourceBlock.style.colourPrimary);let e;null==(e=this.miniWorkspaceBubble)||e.updateBlockStyles()}updateCollapsed(){super.updateCollapsed();
this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(b){super.onLocationChange(b);let e;null==(e=this.miniWorkspaceBubble)||e.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick();this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(b){if(this.bubbleIsVisible()!==b){if(b){this.miniWorkspaceBubble=new gc(this.getMiniWorkspaceConfig(),this.sourceBlock.workspace,
this.getAnchorLocation(),this.getBubbleOwnerRect());this.applyColour();this.createRootBlock();this.addSaveConnectionsListener();let e;null==(e=this.miniWorkspaceBubble)||e.addWorkspaceChangeListener(this.createMiniWorkspaceChangeListener())}else{let e;null==(e=this.miniWorkspaceBubble)||e.dispose();this.miniWorkspaceBubble=null;this.saveConnectionsListener&&this.sourceBlock.workspace.removeChangeListener(this.saveConnectionsListener);this.saveConnectionsListener=null}ba(new (ja(lc))(this.sourceBlock,
b,"mutator"))}}getMiniWorkspaceConfig(){let b;const e={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:null!=(b=this.sourceBlock.workspace.options.rendererOverrides)?b:void 0};this.flyoutBlockTypes.length&&(e.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(g=>({kind:"block",type:g}))});return e}getAnchorLocation(){return Z.sum(this.workspaceLocation,new Z(8.5,8.5))}getBubbleOwnerRect(){const b=
this.sourceBlock.getSvgRoot().getBBox();return new Ga(b.y,b.y+b.height,b.x,b.x+b.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var b of this.rootBlock.getDescendants(!1))b.queueRender();this.rootBlock.setMovable(!1);this.rootBlock.setDeletable(!1);let e,g,k,n;b=null!=(n=null==(e=this.miniWorkspaceBubble)?void 0:null==(g=e.getWorkspace())?
void 0:null==(k=g.getFlyout())?void 0:k.getWidth())?n:0;this.rootBlock.moveBy(this.rootBlock.RTL?-(b+16):16,16)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return b=>{a.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(b)||
this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null;this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(b){return b.isUiEvent||b.type===a.CREATE$$module$build$src$core$events$utils||b.type===a.CHANGE$$module$build$src$core$events$utils&&"disabled"===b.element}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var b=a.getGroup$$module$build$src$core$events$utils();
b||a.setGroup$$module$build$src$core$events$utils(!0);var e=Wc.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var g=Wc.getExtraBlockState_(this.sourceBlock);e!==g&&ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,e,g));a.setGroup$$module$build$src$core$events$utils(b)}}getWorkspace(){let b;return null==(b=this.miniWorkspaceBubble)?void 0:b.getWorkspace()}static reconnect(b,e,g){Na("MutatorIcon.reconnect","v10","v11","connection.reconnect");
return b?b.reconnect(e,g):!1}static findParentWs(b){Na("MutatorIcon.findParentWs","v10","v11","workspace.getRootWorkspace");return b.getRootWorkspace()}};a.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=eb.MUTATOR;a.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1;var vd=Object.create(null),ao={allExtensions:vd};a.register$$module$build$src$core$extensions("parent_tooltip_when_inline",function(){const b=this.tooltip;this.setTooltip(function(){const e=this.getParent();return e&&
e.getInputsInline()&&e.tooltip||b}.bind(this))});var Bb={TEST_ONLY:ao};Bb.apply=Ug;Bb.buildTooltipForDropdown=a.buildTooltipForDropdown$$module$build$src$core$extensions;Bb.buildTooltipWithFieldText=a.buildTooltipWithFieldText$$module$build$src$core$extensions;Bb.isRegistered=bk;Bb.register=a.register$$module$build$src$core$extensions;Bb.registerMixin=a.registerMixin$$module$build$src$core$extensions;Bb.registerMutator=a.registerMutator$$module$build$src$core$extensions;Bb.runAfterPageLoad=function(b){if("object"!==
typeof document)throw Error("runAfterPageLoad() requires browser document.");if("complete"===document.readyState)b();else{const e=setInterval(function(){"complete"===document.readyState&&(clearInterval(e),b())},10)}};Bb.unregister=function(b){bk(b)?delete vd[b]:console.warn('No extension mapping for name "'+b+'" found to unregister')};var ra;(function(b){b[b.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX";b[b.MAC_ENTER=3]="MAC_ENTER";b[b.BACKSPACE=8]="BACKSPACE";b[b.TAB=9]="TAB";b[b.NUM_CENTER=12]="NUM_CENTER";
b[b.ENTER=13]="ENTER";b[b.SHIFT=16]="SHIFT";b[b.CTRL=17]="CTRL";b[b.ALT=18]="ALT";b[b.PAUSE=19]="PAUSE";b[b.CAPS_LOCK=20]="CAPS_LOCK";b[b.ESC=27]="ESC";b[b.SPACE=32]="SPACE";b[b.PAGE_UP=33]="PAGE_UP";b[b.PAGE_DOWN=34]="PAGE_DOWN";b[b.END=35]="END";b[b.HOME=36]="HOME";b[b.LEFT=37]="LEFT";b[b.UP=38]="UP";b[b.RIGHT=39]="RIGHT";b[b.DOWN=40]="DOWN";b[b.PLUS_SIGN=43]="PLUS_SIGN";b[b.PRINT_SCREEN=44]="PRINT_SCREEN";b[b.INSERT=45]="INSERT";b[b.DELETE=46]="DELETE";b[b.ZERO=48]="ZERO";b[b.ONE=49]="ONE";b[b.TWO=
50]="TWO";b[b.THREE=51]="THREE";b[b.FOUR=52]="FOUR";b[b.FIVE=53]="FIVE";b[b.SIX=54]="SIX";b[b.SEVEN=55]="SEVEN";b[b.EIGHT=56]="EIGHT";b[b.NINE=57]="NINE";b[b.FF_SEMICOLON=59]="FF_SEMICOLON";b[b.FF_EQUALS=61]="FF_EQUALS";b[b.FF_DASH=173]="FF_DASH";b[b.FF_HASH=163]="FF_HASH";b[b.QUESTION_MARK=63]="QUESTION_MARK";b[b.AT_SIGN=64]="AT_SIGN";b[b.A=65]="A";b[b.B=66]="B";b[b.C=67]="C";b[b.D=68]="D";b[b.E=69]="E";b[b.F=70]="F";b[b.G=71]="G";b[b.H=72]="H";b[b.I=73]="I";b[b.J=74]="J";b[b.K=75]="K";b[b.L=76]=
"L";b[b.M=77]="M";b[b.N=78]="N";b[b.O=79]="O";b[b.P=80]="P";b[b.Q=81]="Q";b[b.R=82]="R";b[b.S=83]="S";b[b.T=84]="T";b[b.U=85]="U";b[b.V=86]="V";b[b.W=87]="W";b[b.X=88]="X";b[b.Y=89]="Y";b[b.Z=90]="Z";b[b.META=91]="META";b[b.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT";b[b.CONTEXT_MENU=93]="CONTEXT_MENU";b[b.NUM_ZERO=96]="NUM_ZERO";b[b.NUM_ONE=97]="NUM_ONE";b[b.NUM_TWO=98]="NUM_TWO";b[b.NUM_THREE=99]="NUM_THREE";b[b.NUM_FOUR=100]="NUM_FOUR";b[b.NUM_FIVE=101]="NUM_FIVE";b[b.NUM_SIX=102]="NUM_SIX";b[b.NUM_SEVEN=
103]="NUM_SEVEN";b[b.NUM_EIGHT=104]="NUM_EIGHT";b[b.NUM_NINE=105]="NUM_NINE";b[b.NUM_MULTIPLY=106]="NUM_MULTIPLY";b[b.NUM_PLUS=107]="NUM_PLUS";b[b.NUM_MINUS=109]="NUM_MINUS";b[b.NUM_PERIOD=110]="NUM_PERIOD";b[b.NUM_DIVISION=111]="NUM_DIVISION";b[b.F1=112]="F1";b[b.F2=113]="F2";b[b.F3=114]="F3";b[b.F4=115]="F4";b[b.F5=116]="F5";b[b.F6=117]="F6";b[b.F7=118]="F7";b[b.F8=119]="F8";b[b.F9=120]="F9";b[b.F10=121]="F10";b[b.F11=122]="F11";b[b.F12=123]="F12";b[b.NUMLOCK=144]="NUMLOCK";b[b.SCROLL_LOCK=145]=
"SCROLL_LOCK";b[b.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY";b[b.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY";b[b.SEMICOLON=186]="SEMICOLON";b[b.DASH=189]="DASH";b[b.EQUALS=187]="EQUALS";b[b.COMMA=188]="COMMA";b[b.PERIOD=190]="PERIOD";b[b.SLASH=191]="SLASH";b[b.APOSTROPHE=192]="APOSTROPHE";b[b.TILDE=192]="TILDE";b[b.SINGLE_QUOTE=222]="SINGLE_QUOTE";b[b.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET";b[b.BACKSLASH=220]="BACKSLASH";b[b.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET";b[b.WIN_KEY=224]="WIN_KEY";
b[b.MAC_FF_META=224]="MAC_FF_META";b[b.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT";b[b.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT";b[b.WIN_IME=229]="WIN_IME";b[b.VK_NONAME=252]="VK_NONAME";b[b.PHANTOM=255]="PHANTOM"})(ra||={});var hc={};hc.arc=Sa;hc.curve=kb;hc.line=le;hc.lineOnAxis=ha;hc.lineTo=ac;hc.moveBy=Ma;hc.moveTo=Wa;hc.point=ka;var Pa={};Pa.Coordinate=Z;Pa.KeyCodes=ra;Pa.Rect=Ga;Pa.Size=Ja;Pa.Svg=I;Pa.aria=ue;Pa.array=bl;Pa.browserEvents=ec;Pa.colour=vb;Pa.deprecation=cl;Pa.dom=Va;Pa.extensions=Bb;
Pa.idGenerator=dh;Pa.math=wf;Pa.object=jl;Pa.parsing=yf;Pa.string=Uc;Pa.style=sc;Pa.svgMath=Nc;Pa.svgPaths=hc;Pa.toolbox=tc;Pa.userAgent=Vn;Pa.xml=Bd;var th={};th.register=ck;th.unregister=function(b){h(U.ICON,b)};var uh=class extends ya{constructor(b,e,g,k){super(e,g,k);this.text=b;this.workspace=e;this.anchor=g;this.ownerRect=k;this.paragraph=this.stringToSvg(b,this.contentContainer);this.updateBubbleSize()}getText(){return this.text}setText(b){this.text=b;Da(this.paragraph);this.paragraph=this.stringToSvg(b,
this.contentContainer);this.updateBubbleSize()}stringToSvg(b,e){e=this.createParagraph(e);b=this.createSpans(e,b);this.workspace.RTL&&this.rightAlignSpans(e.getBBox().width,b);return e}createParagraph(b){return N(I.TEXT,{"class":"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:ya.BORDER_WIDTH},b)}createSpans(b,e){return e.split("\n").map(g=>{const k=N(I.TSPAN,{dy:"1em",x:ya.BORDER_WIDTH},b);g=document.createTextNode(g);k.appendChild(g);return k})}rightAlignSpans(b,e){for(const g of e)g.setAttribute("text-anchor",
"end"),g.setAttribute("x",`${b+ya.BORDER_WIDTH}`)}updateBubbleSize(){const b=this.paragraph.getBBox();this.setSize(new Ja(b.width+2*ya.BORDER_WIDTH,b.height+2*ya.BORDER_WIDTH),!0)}},pl=class extends ya{constructor(b,e,g){super(b,e,g);this.workspace=b;this.anchor=e;this.ownerRect=g;this.resizePointerMoveListener=this.resizePointerUpListener=null;this.textChangeListeners=[];this.sizeChangeListeners=[];this.text="";this.DEFAULT_SIZE=new Ja(160+ya.DOUBLE_BORDER,80+ya.DOUBLE_BORDER);this.MIN_SIZE=new Ja(45+
ya.DOUBLE_BORDER,20+ya.DOUBLE_BORDER);({inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer));this.resizeGroup=this.createResizeHandle(this.svgRoot);this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(b){this.text=b;this.textArea.value=b;this.onTextChange()}addTextChangeListener(b){this.textChangeListeners.push(b)}addSizeChangeListener(b){this.sizeChangeListeners.push(b)}createEditor(b){b=N(I.FOREIGNOBJECT,{x:ya.BORDER_WIDTH,y:ya.BORDER_WIDTH},
b);const e=document.createElementNS(Pb,"body");e.setAttribute("xmlns",Pb);e.className="blocklyMinimalBody";const g=document.createElementNS(Pb,"textarea");g.className="blocklyCommentTextarea";g.setAttribute("dir",this.workspace.RTL?"RTL":"LTR");e.appendChild(g);b.appendChild(e);this.bindTextAreaEvents(g);setTimeout(()=>{g.focus()},0);return{inputRoot:b,textArea:g}}bindTextAreaEvents(b){H(b,"wheel",this,e=>{e.stopPropagation()});H(b,"focus",this,this.onStartEdit,!0);H(b,"change",this,this.onTextChange)}createResizeHandle(b){b=
N(I.G,{"class":this.workspace.RTL?"blocklyResizeSW":"blocklyResizeSE"},b);const e=2*ya.BORDER_WIDTH;N(I.POLYGON,{points:`0,${e} ${e},${e} ${e},0`},b);N(I.LINE,{"class":"blocklyResizeLine",x1:e/3,y1:e-1,x2:e-1,y2:e/3},b);N(I.LINE,{"class":"blocklyResizeLine",x1:2*e/3,y1:e-1,x2:e-1,y2:2*e/3},b);H(b,"pointerdown",this,this.onResizePointerDown);return b}setSize(b,e=!1){b.width=Math.max(b.width,this.MIN_SIZE.width);b.height=Math.max(b.height,this.MIN_SIZE.height);const g=b.width-ya.DOUBLE_BORDER,k=b.height-
ya.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${g}`);this.inputRoot.setAttribute("height",`${k}`);this.textArea.style.width=`${g-4}px`;this.textArea.style.height=`${k-4}px`;this.workspace.RTL?this.resizeGroup.setAttribute("transform",`translate(${ya.DOUBLE_BORDER}, ${k}) scale(-1 1)`):this.resizeGroup.setAttribute("transform",`translate(${g}, ${k})`);super.setSize(b,e);this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(b){this.bringToFront();Fa(b)||(this.workspace.startDrag(b,
new Z(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=H(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=H(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff());b.stopPropagation()}onResizePointerUp(b){t();this.resizePointerUpListener&&(ca(this.resizePointerUpListener),this.resizePointerUpListener=null);this.resizePointerMoveListener&&(ca(this.resizePointerMoveListener),this.resizePointerMoveListener=
null)}onResizePointerMove(b){b=this.workspace.moveDrag(b);this.setSize(new Ja(this.workspace.RTL?-b.x:b.x,b.y),!1);this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const b of this.textChangeListeners)b()}onSizeChange(){for(const b of this.sizeChangeListeners)b()}};yb("\n.blocklyCommentTextarea {\n  background-color: #fef49c;\n  border: 0;\n  display: block;\n  margin: 0;\n  outline: 0;\n  padding: 3px;\n  resize: none;\n  text-overflow: hidden;\n}\n");
var ab=class extends zf{constructor(b){super(b);this.sourceBlock=b;this.textBubble=this.textInputBubble=null;this.text="";this.bubbleSize=new Ja(160,80);this.bubbleVisiblity=!1}getType(){return ab.TYPE}initView(b){this.svgRoot||(super.initView(b),N(I.CIRCLE,{"class":"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),N(I.PATH,{"class":"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},
this.svgRoot),N(I.RECT,{"class":"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),la(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let b;null==(b=this.textInputBubble)||b.dispose();let e;null==(e=this.textBubble)||e.dispose()}getWeight(){return ab.WEIGHT}getSize(){return new Ja(17,17)}applyColour(){super.applyColour();const b=this.sourceBlock.style.colourPrimary;let e;null==(e=this.textInputBubble)||e.setColour(b);let g;null==(g=this.textBubble)||g.setColour(b)}updateEditable(){super.updateEditable();
this.bubbleIsVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0))}onLocationChange(b){super.onLocationChange(b);b=this.getAnchorLocation();let e;null==(e=this.textInputBubble)||e.setAnchorLocation(b);let g;null==(g=this.textBubble)||g.setAnchorLocation(b)}setText(b){const e=this.text;ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,e,b));this.text=b;let g;null==(g=this.textInputBubble)||g.setText(this.text);let k;null==(k=this.textBubble)||k.setText(this.text)}getText(){return this.text}setBubbleSize(b){this.bubbleSize=
b;let e;null==(e=this.textInputBubble)||e.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(b){let e;this.text=null!=(e=b.text)?e:"";let g,k;this.bubbleSize=new Ja(null!=(g=b.width)?g:160,null!=(k=b.height)?k:80);let n;this.bubbleVisiblity=null!=(n=b.pinned)?n:!1;setTimeout(()=>this.setBubbleVisible(this.bubbleVisiblity),1)}onClick(){super.onClick();
this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var b=this.textInputBubble.getText();this.text!==b&&(ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,b)),this.text=b)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(b){if(!b||!this.textBubble&&!this.textInputBubble)if(b||this.textBubble||
this.textInputBubble)this.bubbleVisiblity=b,this.sourceBlock.rendered&&!this.sourceBlock.isInFlyout&&(b?(this.sourceBlock.isEditable()?this.showEditableBubble():this.showNonEditableBubble(),this.applyColour()):this.hideBubble(),ba(new (ja(lc))(this.sourceBlock,b,"comment")))}showEditableBubble(){this.textInputBubble=new pl(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect());this.textInputBubble.setText(this.getText());this.textInputBubble.setSize(this.bubbleSize,!0);this.textInputBubble.addTextChangeListener(()=>
this.onTextChange());this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.textBubble=new uh(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let b;null==(b=this.textInputBubble)||b.dispose();this.textInputBubble=null;let e;null==(e=this.textBubble)||e.dispose();this.textBubble=null}getAnchorLocation(){return Z.sum(this.workspaceLocation,new Z(8.5,8.5))}getBubbleOwnerRect(){const b=this.sourceBlock.getSvgRoot().getBBox();
return new Ga(b.y,b.y+b.height,b.x,b.x+b.width)}};ab.TYPE=eb.COMMENT;ab.WEIGHT=3;ck(ab.TYPE,ab);var Cb=class extends zf{constructor(b){super(b);this.sourceBlock=b;this.textMap=new Map;this.textBubble=null}getType(){return Cb.TYPE}initView(b){this.svgRoot||(super.initView(b),N(I.PATH,{"class":"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),N(I.PATH,{"class":"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),N(I.RECT,
{"class":"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),la(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let b;null==(b=this.textBubble)||b.dispose()}getWeight(){return Cb.WEIGHT}getSize(){return new Ja(17,17)}applyColour(){super.applyColour();let b;null==(b=this.textBubble)||b.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(b){super.onLocationChange(b);let e;null==(e=this.textBubble)||e.setAnchorLocation(this.getAnchorLocation())}addMessage(b,
e){if(this.textMap.get(e)===b)return this;b?this.textMap.set(e,b):this.textMap.delete(e);let g;null==(g=this.textBubble)||g.setText(this.getText());return this}getText(){return[...this.textMap.values()].join("\n")}onClick(){super.onClick();this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(b){if(this.bubbleIsVisible()!==b){if(b)this.textBubble=new uh(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),
this.getBubbleOwnerRect()),this.applyColour();else{let e;null==(e=this.textBubble)||e.dispose();this.textBubble=null}ba(new (ja(lc))(this.sourceBlock,b,"warning"))}}getAnchorLocation(){return Z.sum(this.workspaceLocation,new Z(8.5,8.5))}getBubbleOwnerRect(){const b=this.sourceBlock.getSvgRoot().getBBox();return new Ga(b.y,b.y+b.height,b.x,b.x+b.width)}};Cb.TYPE=eb.WARNING;Cb.WEIGHT=2;var ql=class extends Error{constructor(b){super(`Tried to append an icon of type ${b.getType()} when an icon of `+
"that type already exists on the block. Use getIcon to access the existing icon.");this.icon=b}},rl={};rl.DuplicateIconType=ql;var uc={};uc.CommentIcon=ab;uc.Icon=zf;uc.IconType=eb;uc.MutatorIcon=a.MutatorIcon$$module$build$src$core$icons$mutator_icon;uc.WarningIcon=Cb;uc.exceptions=rl;uc.registry=th;a.DEFAULT_ARG$$module$build$src$core$procedures="x";var gb={CATEGORY_NAME:"PROCEDURE",DEFAULT_ARG:a.DEFAULT_ARG$$module$build$src$core$procedures};gb.ObservableProcedureMap=ol;gb.allProcedures=Wg;gb.findLegalName=
a.findLegalName$$module$build$src$core$procedures;gb.flyoutCategory=Xg;gb.getCallers=hk;gb.getDefinition=a.getDefinition$$module$build$src$core$procedures;gb.isNameUsed=ek;gb.isProcedureBlock=Lc;gb.mutateCallers=a.mutateCallers$$module$build$src$core$procedures;gb.mutatorOpenListener=gk;gb.rename=a.rename$$module$build$src$core$procedures;var F=new class{constructor(){this.NONE=0;this.FIELD=1;this.HAT=2;this.ICON=4;this.SPACER=8;this.BETWEEN_ROW_SPACER=16;this.IN_ROW_SPACER=32;this.EXTERNAL_VALUE_INPUT=
64;this.INPUT=128;this.INLINE_INPUT=256;this.STATEMENT_INPUT=512;this.CONNECTION=1024;this.PREVIOUS_CONNECTION=2048;this.NEXT_CONNECTION=4096;this.OUTPUT_CONNECTION=8192;this.CORNER=16384;this.LEFT_SQUARE_CORNER=32768;this.LEFT_ROUND_CORNER=65536;this.RIGHT_SQUARE_CORNER=131072;this.RIGHT_ROUND_CORNER=262144;this.JAGGED_EDGE=524288;this.ROW=1048576;this.TOP_ROW=2097152;this.BOTTOM_ROW=4194304;this.INPUT_ROW=8388608;this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER;this.RIGHT_CORNER=
this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER;this.nextTypeValue_=16777216}getType(b){Object.prototype.hasOwnProperty.call(this,b)||(this[b]=this.nextTypeValue_,this.nextTypeValue_<<=1);return this[b]}isField(b){return b.type&this.FIELD}isHat(b){return b.type&this.HAT}isIcon(b){return b.type&this.ICON}isSpacer(b){return b.type&this.SPACER}isInRowSpacer(b){return b.type&this.IN_ROW_SPACER}isInput(b){return b.type&this.INPUT}isExternalInput(b){return b.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(b){return b.type&
this.INLINE_INPUT}isStatementInput(b){return b.type&this.STATEMENT_INPUT}isPreviousConnection(b){return b.type&this.PREVIOUS_CONNECTION}isNextConnection(b){return b.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(b){return b.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(b){return b.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(b){return b.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(b){return b.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(b){return b.type&
this.RIGHT_SQUARE_CORNER}isCorner(b){return b.type&this.CORNER}isJaggedEdge(b){return b.type&this.JAGGED_EDGE}isRow(b){return b.type&this.ROW}isBetweenRowSpacer(b){return b.type&this.BETWEEN_ROW_SPACER}isTopRow(b){return b.type&this.TOP_ROW}isBottomRow(b){return b.type&this.BOTTOM_ROW}isTopOrBottomRow(b){return b.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(b){return b.type&this.INPUT_ROW}},Tb=class{constructor(b){this.centerline=this.xPos=this.height=this.width=0;this.constants_=b;this.type=F.NONE;
this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},xe=class{constructor(b){this.elements=[];this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0;this.hasStatement=this.hasExternalInput=!1;this.statementEdge=0;this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1;this.align=null;this.constants_=b;this.type=F.ROW;this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let b=this.elements.length-1;0<=b;b--){const e=this.elements[b];
if(F.isInput(e))return e}return null}measure(){throw Error("Unexpected attempt to measure a base Row.");}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let b=0;b<this.elements.length;b++){const e=this.elements[b];if(F.isSpacer(e))return e}return null}getLastSpacer(){for(let b=this.elements.length-1;0<=b;b--){const e=this.elements[b];if(F.isSpacer(e))return e}return null}},vh=class extends xe{constructor(b){super(b);this.hasNextConnection=!1;this.connection=null;
this.baseline=this.descenderHeight=0;this.type|=F.BOTTOM_ROW}hasLeftSquareCorner(b){return!!b.outputConnection||!!b.getNextBlock()}hasRightSquareCorner(b){return!0}measure(){let b=0,e=0,g=0;for(let k=0;k<this.elements.length;k++){const n=this.elements[k];e+=n.width;F.isSpacer(n)||(F.isNextConnection(n)?g=Math.max(g,n.height):b=Math.max(b,n.height))}this.width=Math.max(this.minWidth,e);this.height=Math.max(this.minHeight,b)+g;this.descenderHeight=g;this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},
ic=class extends Tb{constructor(b,e){super(b);this.connectionModel=e;this.type|=F.CONNECTION;this.shape=this.constants_.shapeFor(e);this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic;this.highlighted=e.isHighlighted()}},vc=class extends ic{constructor(b,e){super(b,e.connection);this.input=e;this.connectionOffsetY=this.connectionOffsetX=0;this.type|=F.INPUT;this.align=e.align;(this.connectedBlock=e.connection&&e.connection.targetBlock()?e.connection.targetBlock():null)?(b=this.connectedBlock.getHeightWidth(),
this.connectedBlockWidth=b.width,this.connectedBlockHeight=b.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Bf=class extends vc{constructor(b,e){super(b,e);this.height=0;this.type|=F.EXTERNAL_VALUE_INPUT;this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height;this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING;this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP;this.connectionHeight=
this.shape.height;this.connectionWidth=this.shape.width}},Ed=class extends Tb{constructor(b,e,g){super(b);this.field=e;this.parentInput=g;this.isEditable=e.EDITABLE;this.flipRtl=e.getFlipRtl();this.type|=F.FIELD;b=this.field.getSize();this.height=b.height;this.width=b.width}},wh=class extends Tb{constructor(b){super(b);this.type|=F.HAT;this.height=this.constants_.START_HAT.height;this.width=this.constants_.START_HAT.width;this.ascenderHeight=this.height}},sl=class extends Tb{constructor(b,e){super(b);
this.icon=e;this.flipRtl=!1;this.isVisible=Jc(e)&&e.bubbleIsVisible();this.type|=F.ICON;b=e.getSize();this.height=b.height;this.width=b.width}},ob=class extends Tb{constructor(b,e){super(b);this.type=this.type|F.SPACER|F.IN_ROW_SPACER;this.width=e;this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},xh=class extends vc{constructor(b,e){super(b,e);this.type|=F.INLINE_INPUT;this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,
this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING);this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height;this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width;this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1));this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP;this.connectionOffsetX="connectionOffsetX"in
this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},ye=class extends vc{constructor(b,e){super(b,e);this.type|=F.STATEMENT_INPUT;this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT;this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},yh=class extends xe{constructor(b){super(b);this.connectedBlockWidths=0;this.type|=F.INPUT_ROW}measure(){this.width=this.minWidth;this.height=
this.minHeight;let b=0;for(let e=0;e<this.elements.length;e++){const g=this.elements[e];this.width+=g.width;F.isInput(g)&&g instanceof vc&&(F.isStatementInput(g)&&g instanceof ye?b+=g.connectedBlockWidth:F.isExternalInput(g)&&g instanceof Bf&&0!==g.connectedBlockWidth&&(b+=g.connectedBlockWidth-g.connectionWidth));F.isSpacer(g)||(this.height=Math.max(this.height,g.height))}this.connectedBlockWidths=b;this.widthWithConnectedBlocks=this.width+b}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},
tl=class extends Tb{constructor(b){super(b);this.type|=F.JAGGED_EDGE;this.height=this.constants_.JAGGED_TEETH.height;this.width=this.constants_.JAGGED_TEETH.width}},ul=class extends ic{constructor(b,e){super(b,e);this.type|=F.NEXT_CONNECTION;this.height=this.shape.height;this.width=this.shape.width}},vl=class extends ic{constructor(b,e){super(b,e);this.connectionOffsetX=0;this.type|=F.OUTPUT_CONNECTION;this.height=this.isDynamicShape?0:this.shape.height;this.startX=this.width=this.isDynamicShape?
0:this.shape.width;this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},wl=class extends ic{constructor(b,e){super(b,e);this.type|=F.PREVIOUS_CONNECTION;this.height=this.shape.height;this.width=this.shape.width}},ze=class extends Tb{constructor(b,e){super(b);this.type=(e&&"left"!==e?F.RIGHT_ROUND_CORNER:F.LEFT_ROUND_CORNER)|F.CORNER;this.width=this.constants_.CORNER_RADIUS;this.height=this.constants_.CORNER_RADIUS/2}},zh=class extends xe{constructor(b,e,g){super(b);this.height=e;this.width=
g;this.precedesStatement=this.followsStatement=!1;this.widthWithConnectedBlocks=0;this.type=this.type|F.SPACER|F.BETWEEN_ROW_SPACER;this.elements=[new ob(this.constants_,g)]}measure(){}},Ae=class extends Tb{constructor(b,e){super(b);this.type=(e&&"left"!==e?F.RIGHT_SQUARE_CORNER:F.LEFT_SQUARE_CORNER)|F.CORNER;this.width=this.height=this.constants_.NO_PADDING}},Ah=class extends xe{constructor(b){super(b);this.ascenderHeight=this.capline=0;this.hasPreviousConnection=!1;this.connection=null;this.type|=
F.TOP_ROW}hasLeftSquareCorner(b){const e=(b.hat?"cap"===b.hat:this.constants_.ADD_START_HATS)&&!b.outputConnection&&!b.previousConnection,g=b.getPreviousBlock();return!!b.outputConnection||e||(g?g.getNextBlock()===b:!1)}hasRightSquareCorner(b){return!0}measure(){let b=0,e=0,g=0;for(let k=0;k<this.elements.length;k++){const n=this.elements[k];e+=n.width;F.isSpacer(n)||(F.isHat(n)&&n instanceof wh?g=Math.max(g,n.ascenderHeight):b=Math.max(b,n.height))}this.width=Math.max(this.minWidth,e);this.height=
Math.max(this.minHeight,b)+g;this.capline=this.ascenderHeight=g;this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Be=class{constructor(){this.NO_PADDING=0;this.SMALL_PADDING=3;this.MEDIUM_PADDING=5;this.MEDIUM_LARGE_PADDING=8;this.LARGE_PADDING=10;this.TAB_HEIGHT=15;this.TAB_OFFSET_FROM_TOP=5;this.TAB_VERTICAL_OVERLAP=2.5;this.TAB_WIDTH=8;this.NOTCH_WIDTH=15;this.NOTCH_HEIGHT=4;this.MIN_BLOCK_WIDTH=12;this.EMPTY_BLOCK_SPACER_HEIGHT=16;this.CORNER_RADIUS=
8;this.NOTCH_OFFSET_LEFT=15;this.STATEMENT_BOTTOM_SPACER=0;this.STATEMENT_INPUT_PADDING_LEFT=20;this.BETWEEN_STATEMENT_PADDING_Y=4;this.ADD_START_HATS=!1;this.START_HAT_HEIGHT=15;this.START_HAT_WIDTH=100;this.SPACER_DEFAULT_HEIGHT=15;this.MIN_BLOCK_HEIGHT=24;this.EMPTY_INLINE_INPUT_PADDING=14.5;this.EXTERNAL_VALUE_INPUT_PADDING=2;this.JAGGED_TEETH_HEIGHT=12;this.JAGGED_TEETH_WIDTH=6;this.FIELD_TEXT_FONTSIZE=11;this.FIELD_TEXT_FONTWEIGHT="normal";this.FIELD_TEXT_FONTFAMILY="sans-serif";this.FIELD_TEXT_BASELINE=
this.FIELD_TEXT_HEIGHT=-1;this.FIELD_BORDER_RECT_RADIUS=4;this.FIELD_BORDER_RECT_HEIGHT=16;this.FIELD_BORDER_RECT_X_PADDING=5;this.FIELD_BORDER_RECT_Y_PADDING=3;this.FIELD_BORDER_RECT_COLOUR="#fff";this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1;this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12;this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1;this.FIELD_COLOUR_DEFAULT_WIDTH=26;this.defs=null;this.embossFilterId="";this.embossFilter=null;
this.disabledPatternId="";this.disabledPattern=null;this.debugFilterId="";this.cssNode=this.debugFilter=null;this.CURSOR_COLOUR="#cc0a0a";this.MARKER_COLOUR="#4286f4";this.CURSOR_WS_WIDTH=100;this.WS_CURSOR_HEIGHT=5;this.CURSOR_STACK_PADDING=10;this.CURSOR_BLOCK_PADDING=2;this.CURSOR_STROKE_WIDTH=4;this.FULL_BLOCK_FIELDS=!1;this.INSERTION_MARKER_COLOUR="#000000";this.INSERTION_MARKER_OPACITY=.2;this.SHAPES={PUZZLE:1,NOTCH:2};this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING;this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=
this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT;this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT;this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING;this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING;this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING;this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING;this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11;this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT;this.START_POINT=Ma(0,0);this.FIELD_TEXT_BASELINE_CENTER=!0;this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=
this.FIELD_BORDER_RECT_HEIGHT;this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING;this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";
this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT;this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3;this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth();this.NOTCH=this.makeNotch();this.START_HAT=this.makeStartHat();this.PUZZLE_TAB=this.makePuzzleTab();this.INSIDE_CORNERS=this.makeInsideCorners();this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(b){this.blockStyles=Object.create(null);const e=b.blockStyles;for(const g in e)this.blockStyles[g]=
this.validatedBlockStyle_(e[g]);this.setDynamicProperties_(b)}setDynamicProperties_(b){this.setFontConstants_(b);this.setComponentConstants_(b);this.ADD_START_HATS=void 0!==b.startHats?b.startHats:this.ADD_START_HATS}setFontConstants_(b){b.fontStyle&&b.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=b.fontStyle.family);b.fontStyle&&b.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=b.fontStyle.weight);b.fontStyle&&b.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=b.fontStyle.size);b=Qf("Hg",this.FIELD_TEXT_FONTSIZE+
"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY);this.FIELD_TEXT_HEIGHT=b.height;this.FIELD_TEXT_BASELINE=b.baseline}setComponentConstants_(b){this.CURSOR_COLOUR=b.getComponentStyle("cursorColour")||this.CURSOR_COLOUR;this.MARKER_COLOUR=b.getComponentStyle("markerColour")||this.MARKER_COLOUR;this.INSERTION_MARKER_COLOUR=b.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR;this.INSERTION_MARKER_OPACITY=Number(b.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(b){const e=
"auto_"+b;this.blockStyles[e]||(this.blockStyles[e]=this.createBlockStyle_(b));return{style:this.blockStyles[e],name:e}}getBlockStyle(b){return this.blockStyles[b||""]||(b&&0===b.indexOf("auto_")?this.getBlockStyleForColour(b.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(b){return this.validatedBlockStyle_({colourPrimary:b})}validatedBlockStyle_(b){const e={};b&&Object.assign(e,b);b=ke(e.colourPrimary||"#000");e.colourPrimary=b.hex;e.colourSecondary=e.colourSecondary?ke(e.colourSecondary).hex:
this.generateSecondaryColour_(e.colourPrimary);e.colourTertiary=e.colourTertiary?ke(e.colourTertiary).hex:this.generateTertiaryColour_(e.colourPrimary);e.hat=e.hat||"";return e}generateSecondaryColour_(b){return ud("#fff",b,.6)||b}generateTertiaryColour_(b){return ud("#fff",b,.3)||b}dispose(){this.embossFilter&&Da(this.embossFilter);this.disabledPattern&&Da(this.disabledPattern);this.debugFilter&&Da(this.debugFilter);this.cssNode=null}makeJaggedTeeth(){const b=this.JAGGED_TEETH_HEIGHT,e=this.JAGGED_TEETH_WIDTH,
g=le([ka(e,b/4),ka(2*-e,b/2),ka(e,b/4)]);return{height:b,width:e,path:g}}makeStartHat(){const b=this.START_HAT_HEIGHT,e=this.START_HAT_WIDTH,g=kb("c",[ka(30,-b),ka(70,-b),ka(e,0)]);return{height:b,width:e,path:g}}makePuzzleTab(){function b(r){r=r?-1:1;const w=-r;var x=g/2;const P=x+2.5,ea=x+.5,Oa=ka(-e,r*x);x=ka(e,r*x);return kb("c",[ka(0,r*P),ka(-e,w*ea),Oa])+kb("s",[ka(e,2.5*w),x])}const e=this.TAB_WIDTH,g=this.TAB_HEIGHT,k=b(!0),n=b(!1);return{type:this.SHAPES.PUZZLE,width:e,height:g,pathDown:n,
pathUp:k}}makeNotch(){function b(w){return le([ka(w*k,g),ka(3*w,0),ka(w*k,-g)])}const e=this.NOTCH_WIDTH,g=this.NOTCH_HEIGHT,k=(e-3)/2,n=b(1),r=b(-1);return{type:this.SHAPES.NOTCH,width:e,height:g,pathLeft:n,pathRight:r}}makeInsideCorners(){const b=this.CORNER_RADIUS,e=Sa("a","0 0,0",b,ka(-b,b)),g=Sa("a","0 0,0",b,ka(b,b));return{width:b,height:b,pathTop:e,pathBottom:g}}makeOutsideCorners(){const b=this.CORNER_RADIUS,e=Ma(0,b)+Sa("a","0 0,1",b,ka(b,-b)),g=Sa("a","0 0,1",b,ka(b,b)),k=Sa("a","0 0,1",
b,ka(-b,-b)),n=Sa("a","0 0,1",b,ka(-b,b));return{topLeft:e,topRight:g,bottomRight:n,bottomLeft:k,rightHeight:b}}shapeFor(b){switch(b.type){case fa.INPUT_VALUE:case fa.OUTPUT_VALUE:return this.PUZZLE_TAB;case fa.PREVIOUS_STATEMENT:case fa.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type");}}createDom(b,e,g){this.injectCSS_(e,g);this.defs=N(I.DEFS,{},b);b=N(I.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs);N(I.FEGAUSSIANBLUR,{"in":"SourceAlpha",stdDeviation:1,
result:"blur"},b);e=N(I.FESPECULARLIGHTING,{"in":"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},b);N(I.FEPOINTLIGHT,{x:-5E3,y:-1E4,z:2E4},e);N(I.FECOMPOSITE,{"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},b);N(I.FECOMPOSITE,{"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},b);this.embossFilterId=b.id;this.embossFilter=b;b=N(I.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",
width:10,height:10},this.defs);N(I.RECT,{width:10,height:10,fill:"#aaa"},b);N(I.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},b);this.disabledPatternId=b.id;this.disabledPattern=b;this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const b=N(I.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),e=N(I.FECOMPONENTTRANSFER,{result:"outBlur"},b);N(I.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},e);
N(I.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},b);N(I.FECOMPOSITE,{"in":"outColor",in2:"outBlur",operator:"in",result:"outGlow"},b);this.debugFilterId=b.id;this.debugFilter=b}}injectCSS_(b,e){e=this.getCSS_(e);b="blockly-renderer-style-"+b;this.cssNode=document.getElementById(b);const g=e.join("\n");this.cssNode?this.cssNode.firstChild.textContent=g:(e=document.createElement("style"),e.id=b,b=document.createTextNode(g),e.appendChild(b),document.head.insertBefore(e,document.head.firstChild),
this.cssNode=e)}getCSS_(b){return[`${b} .blocklyText, `,`${b} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} `+`${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${b} .blocklyText {`,"fill: #fff;","}",`${b} .blocklyNonEditableText>rect,`,`${b} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${b} .blocklyNonEditableText>text,`,`${b} .blocklyEditableText>text {`,"fill: #000;","}",`${b} .blocklyFlyoutLabelText {`,
"fill: #000;","}",`${b} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${b} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${b} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${b} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${b} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${b} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",
`${b} .blocklyReplaceable .blocklyPathLight,`,`${b} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${b} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Ce=class{constructor(b,e){this.inlinePath_=this.outlinePath_="";this.block_=b;this.info_=e;this.topLeft_=b.getRelativeToSurfaceXY();this.constants_=e.getRenderer().getConstants()}draw(){this.drawOutline_();this.drawInternals_();this.updateConnectionHighlights();this.block_.pathObject.setPath(this.outlinePath_+
"\n"+this.inlinePath_);this.info_.RTL&&this.block_.pathObject.flipRTL();this.recordSizeOnBlock_()}hideHiddenIcons_(){Na("hideHiddenIcons_","v10","v11")}recordSizeOnBlock_(){this.block_.height=this.info_.height;this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let b=1;b<this.info_.rows.length-1;b++){const e=this.info_.rows[b];e.hasJaggedEdge?this.drawJaggedEdge_(e):e.hasStatement?this.drawStatementInput_(e):e.hasExternalInput?this.drawValueInput_(e):this.drawRightSideRow_(e)}this.drawBottom_();
this.drawLeft_()}drawTop_(){const b=this.info_.topRow,e=b.elements;this.positionPreviousConnection_();this.outlinePath_+=Ma(b.xPos,this.info_.startY);for(let g=0,k;k=e[g];g++)F.isLeftRoundedCorner(k)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:F.isRightRoundedCorner(k)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:F.isPreviousConnection(k)&&k instanceof ic?this.outlinePath_+=k.shape.pathLeft:F.isHat(k)?this.outlinePath_+=this.constants_.START_HAT.path:F.isSpacer(k)&&(this.outlinePath_+=
ha("h",k.width));this.outlinePath_+=ha("v",b.height)}drawJaggedEdge_(b){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+ha("v",b.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(b){const e=b.getLastInput();this.positionExternalValueConnection_(b);const g=Yg(e.shape)?e.shape.pathDown(e.height):e.shape.pathDown;this.outlinePath_+=ha("H",e.xPos+e.width)+g+ha("v",b.height-e.connectionHeight)}drawStatementInput_(b){var e=b.getLastInput();if(e){var g=e.xPos+e.notchOffset+e.shape.width;e=
e.shape.pathRight+ha("h",-(e.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var k=b.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=ha("H",g)+e+ha("v",k)+this.constants_.INSIDE_CORNERS.pathBottom+ha("H",b.xPos+b.width);this.positionStatementInputConnection_(b)}}drawRightSideRow_(b){this.outlinePath_+=ha("V",b.yPos+b.height)}drawBottom_(){const b=this.info_.bottomRow,e=b.elements;this.positionNextConnection_();let g=0,k="";for(let n=e.length-
1,r;r=e[n];n--)F.isNextConnection(r)&&r instanceof ic?k+=r.shape.pathRight:F.isLeftSquareCorner(r)?k+=ha("H",b.xPos):F.isLeftRoundedCorner(r)?k+=this.constants_.OUTSIDE_CORNERS.bottomLeft:F.isRightRoundedCorner(r)?(k+=this.constants_.OUTSIDE_CORNERS.bottomRight,g=this.constants_.OUTSIDE_CORNERS.rightHeight):F.isSpacer(r)&&(k+=ha("h",-1*r.width));this.outlinePath_+=ha("V",b.baseline-g);this.outlinePath_+=k}drawLeft_(){var b=this.info_.outputConnection;this.positionOutputConnection_();if(b){const e=
b.connectionOffsetY+b.height;b=Yg(b.shape)?b.shape.pathUp(b.height):b.shape.pathUp;this.outlinePath_+=ha("V",e)+b}this.outlinePath_+="z"}drawInternals_(){for(let b=0,e;e=this.info_.rows[b];b++)for(let g=0,k;k=e.elements[g];g++)F.isInlineInput(k)?this.drawInlineInput_(k):(F.isIcon(k)||F.isField(k))&&this.layoutField_(k)}layoutField_(b){const e=b.centerline-b.height/2;let g=b.xPos;var k="";this.info_.RTL&&(g=-(g+b.width),b.flipRtl&&(g+=b.width,k="scale(-1 1)"));F.isIcon(b)?(k=b.icon,k.setOffsetInBlock(new Z(g,
e)),this.info_.isInsertionMarker&&k.hideForInsertionMarker()):(b=b.field.getSvgRoot(),b.setAttribute("transform","translate("+g+","+e+")"+k),this.info_.isInsertionMarker&&b.setAttribute("display","none"))}drawInlineInput_(b){const e=b.width,g=b.height,k=b.connectionOffsetY,n=b.connectionHeight+k;this.inlinePath_+=Wa(b.xPos+b.connectionWidth,b.centerline-g/2)+ha("v",k)+b.shape.pathDown+ha("v",g-n)+ha("h",e-b.connectionWidth)+ha("v",-g)+"z";this.positionInlineInputConnection_(b)}positionInlineInputConnection_(b){const e=
b.centerline-b.height/2;if(b.connectionModel){let g=b.xPos+b.connectionWidth+b.connectionOffsetX;this.info_.RTL&&(g*=-1);b.connectionModel.setOffsetInBlock(g,e+b.connectionOffsetY)}}positionStatementInputConnection_(b){const e=b.getLastInput();if(null==e?0:e.connectionModel){let g=b.xPos+b.statementEdge+e.notchOffset;this.info_.RTL&&(g*=-1);e.connectionModel.setOffsetInBlock(g,b.yPos)}}positionExternalValueConnection_(b){const e=b.getLastInput();if(e&&e.connectionModel){let g=b.xPos+b.width;this.info_.RTL&&
(g*=-1);e.connectionModel.setOffsetInBlock(g,b.yPos)}}positionPreviousConnection_(){const b=this.info_.topRow;if(b.connection){const e=b.xPos+b.notchOffset;b.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-e:e,0)}}positionNextConnection_(){const b=this.info_.bottomRow;if(b.connection){const e=b.connection,g=e.xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-g:g,b.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const b=this.info_.startX+this.info_.outputConnection.connectionOffsetX;
this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-b:b,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const b of this.info_.rows)for(const e of b.elements)if(e instanceof ic)if(e.highlighted)this.drawConnectionHighlightPath(e);else{let g,k;null==(k=(g=this.block_.pathObject).removeConnectionHighlight)||k.call(g,e.connectionModel)}}drawConnectionHighlightPath(b){const e=b.connectionModel;b=e.type===fa.INPUT_VALUE||e.type===fa.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(b):
this.getStatementConnectionHighlightPath(b);const g=e.getSourceBlock();let k,n;null==(n=(k=g.pathObject).addConnectionHighlight)||n.call(k,e,b,e.getOffsetInBlock(),g.RTL)}getExpressionConnectionHighlightPath(b){let e="";Yg(b.shape)?e=b.shape.pathDown(b.height):Fn(b.shape)&&(e=b.shape.pathDown);b=this.constants_.TAB_OFFSET_FROM_TOP;return Ma(0,-b)+ha("v",b)+e+ha("v",b)}getStatementConnectionHighlightPath(b){if(!Gn(b.shape))throw Error("Statement connections should have notch shapes");const e=this.constants_.NOTCH_OFFSET_LEFT-
this.constants_.CORNER_RADIUS;return Ma(-e,0)+ha("h",e)+b.shape.pathLeft+ha("h",e)}};(function(b){b[b.LEFT=-1]="LEFT";b[b.CENTRE=0]="CENTRE";b[b.RIGHT=1]="RIGHT"})(a.Align$$module$build$src$core$inputs$align||(a.Align$$module$build$src$core$inputs$align={}));var Xc=class extends ua{constructor(b,e,g){super(ua.SKIP_SETUP);this.class=null;this.EDITABLE=!1;this.maxDisplayLength=Infinity;b!==ua.SKIP_SETUP&&(g?this.configure_(g):this.class=e||null,this.setValue(b))}configure_(b){super.configure_(b);b.class&&
(this.class=b.class)}initView(){this.createTextElement_();this.class&&la(this.getTextElement(),this.class)}doClassValidation_(b){return null===b||void 0===b?null:`${b}`}setClass(b){this.textElement_&&(this.class&&za(this.textElement_,this.class),b&&la(this.textElement_,b));this.class=b}static fromJson(b){return new this(Ra(b.text),void 0,b)}};tb("field_label",Xc);Xc.prototype.DEFAULT_VALUE="";var wc=class{constructor(b,e){this.name=b;this.sourceBlock=e;this.fieldRow=[];this.align=a.Align$$module$build$src$core$inputs$input.LEFT;
this.visible=!0;this.type=a.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM;this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(b,e){this.insertFieldAt(this.fieldRow.length,b,e);return this}insertFieldAt(b,e,g){if(0>b||b>this.fieldRow.length)throw Error("index "+b+" out of bounds.");if(!(e||""===e&&g))return b;"string"===typeof e&&(e=a.fromJson$$module$build$src$core$field_registry({type:"field_label",text:e}));e.setSourceBlock(this.sourceBlock);this.sourceBlock.rendered&&
(e.init(),e.applyColour());e.name=g;e.setVisible(this.isVisible());e.prefixField&&(b=this.insertFieldAt(b,e.prefixField));this.fieldRow.splice(b,0,e);b++;e.suffixField&&(b=this.insertFieldAt(b,e.suffixField));this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours());return b}removeField(b,e){for(let g=0,k;k=this.fieldRow[g];g++)if(k.name===b)return k.dispose(),this.fieldRow.splice(g,1),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),
!0;if(e)return!1;throw Error('Field "'+b+'" not found.');}isVisible(){return this.visible}setVisible(b){let e=[];if(this.visible===b)return e;this.visible=b;for(let k=0,n;n=this.fieldRow[k];k++)n.setVisible(b);if(this.connection){var g=this.connection;b?e=g.startTrackingAll():g.stopTrackingAll();if(g=g.targetBlock())g.getSvgRoot().style.display=b?"block":"none"}return e}markDirty(){for(let b=0,e;e=this.fieldRow[b];b++)e.markDirty()}setCheck(b){if(!this.connection)throw Error("This input does not have a connection.");
this.connection.setCheck(b);return this}setAlign(b){this.align=b;this.sourceBlock.rendered&&this.sourceBlock.queueRender();return this}setShadowDom(b){if(!this.connection)throw Error("This input does not have a connection.");this.connection.setShadowDom(b);return this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let b=0;b<this.fieldRow.length;b++)this.fieldRow[b].init()}dispose(){for(let b=
0,e;e=this.fieldRow[b];b++)e.dispose();this.connection&&this.connection.dispose()}makeConnection(b){return this.sourceBlock.makeConnection_(b)}};(function(b){b=b.Align||(b.Align={});b[b.LEFT=-1]="LEFT";b[b.CENTRE=0]="CENTRE";b[b.RIGHT=1]="RIGHT"})(wc||={});a.Align$$module$build$src$core$inputs$input=wc.Align;var Ub=class extends wc{constructor(b,e){super(b,e);this.name=b;this.type=a.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},jc=class extends wc{constructor(b,e){super(b,e);this.name=
b;this.type=a.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},pb=class extends wc{constructor(b,e){if(!b)throw Error("Statement inputs must have a non-empty name");super(b,e);this.name=b;this.type=a.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT;this.connection=this.makeConnection(fa.NEXT_STATEMENT)}};a.ValueInput$$module$build$src$core$inputs$value_input=class extends wc{constructor(b,e){if(!b)throw Error("Value inputs must have a non-empty name");super(b,e);this.name=
b;this.type=a.inputTypes$$module$build$src$core$inputs$input_types.VALUE;this.connection=this.makeConnection(fa.INPUT_VALUE)}};var Fd=class{constructor(b,e){this.statementEdge=this.width=this.widthWithChildren=this.height=0;this.rows=[];this.inputRows=[];this.startY=this.startX=0;this.renderer_=b;this.block_=e;this.constants_=this.renderer_.getConstants();this.outputConnection=e.outputConnection?new vl(this.constants_,e.outputConnection):null;this.isInline=e.getInputsInline()&&!e.isCollapsed();this.isCollapsed=
e.isCollapsed();this.isInsertionMarker=e.isInsertionMarker();this.RTL=e.RTL;this.topRow=new Ah(this.constants_);this.bottomRow=new vh(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_();this.addElemSpacing_();this.addRowSpacing_();this.computeBounds_();this.alignRowElements_();this.finalize_()}createRows_(){this.populateTopRow_();this.rows.push(this.topRow);let b=new yh(this.constants_);this.inputRows.push(b);var e=this.block_.getIcons();for(let g=0,k;k=e[g];g++){const n=
new sl(this.constants_,k);this.isCollapsed&&!k.isShownWhenCollapsed()||b.elements.push(n)}e=void 0;for(let g=0,k;k=this.block_.inputList[g];g++)if(k.isVisible()){this.shouldStartNewRow_(k,e)&&(this.rows.push(b),b=new yh(this.constants_),this.inputRows.push(b));for(let n=0,r;r=k.fieldRow[n];n++)b.elements.push(new Ed(this.constants_,r,k));this.addInput_(k,b);e=k}this.isCollapsed&&(b.hasJaggedEdge=!0,b.elements.push(new tl(this.constants_)));(b.elements.length||b.hasDummyInput)&&this.rows.push(b);this.populateBottomRow_();
this.rows.push(this.bottomRow)}populateTopRow_(){var b=!!this.block_.previousConnection;const e=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!b;let g=this.topRow.hasLeftSquareCorner(this.block_)?Ae:ze;this.topRow.elements.push(new g(this.constants_));e?(b=new wh(this.constants_),this.topRow.elements.push(b),this.topRow.capline=b.ascenderHeight):b&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new wl(this.constants_,this.block_.previousConnection),
this.topRow.elements.push(this.topRow.connection));this.block_.inputList.length&&this.block_.inputList[0]instanceof pb&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT;g=this.topRow.hasRightSquareCorner(this.block_)?Ae:ze;this.topRow.elements.push(new g(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection;this.bottomRow.minHeight=this.block_.inputList.length&&
this.block_.inputList[this.block_.inputList.length-1]instanceof pb?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT;this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Ae(this.constants_)):this.bottomRow.elements.push(new ze(this.constants_));this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new ul(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection));this.bottomRow.hasRightSquareCorner(this.block_)?
this.bottomRow.elements.push(new Ae(this.constants_,"right")):this.bottomRow.elements.push(new ze(this.constants_,"right"))}addInput_(b,e){if(this.isInline&&b instanceof a.ValueInput$$module$build$src$core$inputs$value_input)e.elements.push(new xh(this.constants_,b)),e.hasInlineInput=!0;else if(b instanceof pb)e.elements.push(new ye(this.constants_,b)),e.hasStatement=!0;else if(b instanceof a.ValueInput$$module$build$src$core$inputs$value_input)e.elements.push(new Bf(this.constants_,b)),e.hasExternalInput=
!0;else if(b instanceof Ub||b instanceof jc)e.minHeight=Math.max(e.minHeight,b.getSourceBlock()&&b.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),e.hasDummyInput=!0;null===e.align&&(e.align=b.align)}shouldStartNewRow_(b,e){return e?e instanceof jc||b instanceof pb||e instanceof pb?!0:b instanceof a.ValueInput$$module$build$src$core$inputs$value_input||b instanceof Ub||e instanceof a.ValueInput$$module$build$src$core$inputs$value_input?
!this.isInline:!1:!1}addElemSpacing_(){for(let b=0,e;e=this.rows[b];b++){const g=e.elements;e.elements=[];e.startsWithElemSpacer()&&e.elements.push(new ob(this.constants_,this.getInRowSpacing_(null,g[0])));if(g.length){for(let k=0;k<g.length-1;k++){e.elements.push(g[k]);const n=this.getInRowSpacing_(g[k],g[k+1]);e.elements.push(new ob(this.constants_,n))}e.elements.push(g[g.length-1]);e.endsWithElemSpacer()&&e.elements.push(new ob(this.constants_,this.getInRowSpacing_(g[g.length-1],null)))}}}getInRowSpacing_(b,
e){if(!b&&e&&F.isStatementInput(e))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(b&&F.isInput(b)&&!e){if(F.isExternalInput(b))return this.constants_.NO_PADDING;if(F.isInlineInput(b))return this.constants_.LARGE_PADDING;if(F.isStatementInput(b))return this.constants_.NO_PADDING}return b&&F.isLeftSquareCorner(b)&&e&&(F.isPreviousConnection(e)||F.isNextConnection(e))?e.notchOffset:b&&F.isLeftRoundedCorner(b)&&e&&(F.isPreviousConnection(e)||F.isNextConnection(e))?e.notchOffset-this.constants_.CORNER_RADIUS:
this.constants_.MEDIUM_PADDING}computeBounds_(){let b=0,e=0,g=0;for(let n=0,r;r=this.rows[n];n++){r.measure();e=Math.max(e,r.width);if(r.hasStatement){var k=r.getLastInput();let w,x;k=r.width-(null!=(x=null==(w=k)?void 0:w.width)?x:0);b=Math.max(b,k)}g=Math.max(g,r.widthWithConnectedBlocks)}this.statementEdge=b;this.width=e;for(let n=0,r;r=this.rows[n];n++)r.hasStatement&&(r.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(e,g);this.outputConnection&&(this.startX=this.outputConnection.width,
this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let e=0,g;g=this.rows[e];e++)if(g.hasStatement)this.alignStatementRow_(g);else{var b=g.width;b=this.getDesiredRowWidth_(g)-b;0<b&&this.addAlignmentPadding_(g,b);F.isTopOrBottomRow(g)&&(g.widthWithConnectedBlocks=g.width)}}getDesiredRowWidth_(b){return this.width-this.startX}addAlignmentPadding_(b,e){const g=b.getFirstSpacer(),k=b.getLastSpacer();if(b.hasExternalInput||b.hasStatement)b.widthWithConnectedBlocks+=
e;if(b.align===a.Align$$module$build$src$core$inputs$align.LEFT&&k)k.width+=e;else if(b.align===a.Align$$module$build$src$core$inputs$align.CENTRE&&g&&k)g.width+=e/2,k.width+=e/2;else if(b.align===a.Align$$module$build$src$core$inputs$align.RIGHT&&g)g.width+=e;else if(k)k.width+=e;else return;b.width+=e}alignStatementRow_(b){const e=b.getLastInput();if(e){var g=b.width-e.width,k=this.statementEdge;g=k-g;0<g&&this.addAlignmentPadding_(b,g);g=b.width;k=this.getDesiredRowWidth_(b);e.width+=k-g;e.height=
Math.max(e.height,b.height);b.width+=k-g;b.widthWithConnectedBlocks=Math.max(b.width,this.statementEdge+b.connectedBlockWidths)}}addRowSpacing_(){const b=this.rows;this.rows=[];for(let e=0;e<b.length;e++)this.rows.push(b[e]),e!==b.length-1&&this.rows.push(this.makeSpacerRow_(b[e],b[e+1]))}makeSpacerRow_(b,e){var g=this.getSpacerRowHeight_(b,e);const k=this.getSpacerRowWidth_(b,e);g=new zh(this.constants_,g,k);b.hasStatement&&(g.followsStatement=!0);e.hasStatement&&(g.precedesStatement=!0);return g}getSpacerRowWidth_(b,
e){return this.width-this.startX}getSpacerRowHeight_(b,e){return this.constants_.MEDIUM_PADDING}getElemCenterline_(b,e){return F.isSpacer(e)?b.yPos+e.height/2:F.isBottomRow(b)?(b=b.yPos+b.height-b.descenderHeight,F.isNextConnection(e)?b+e.height/2:b-e.height/2):F.isTopRow(b)?F.isHat(e)?b.capline-e.height/2:b.capline+e.height/2:b.yPos+b.height/2}recordElemPositions_(b){let e=b.xPos;for(let g=0,k;k=b.elements[g];g++)F.isSpacer(k)&&(k.height=b.height),k.xPos=e,k.centerline=this.getElemCenterline_(b,
k),e+=k.width}finalize_(){let b=0,e=0;for(let g=0,k;k=this.rows[g];g++)k.yPos=e,k.xPos=this.startX,e+=k.height,b=Math.max(b,k.widthWithConnectedBlocks),this.recordElemPositions_(k);if(this.outputConnection&&this.block_.nextConnection){const g=this.block_.nextConnection.targetBlock();g&&(b=Math.max(b,g.getHeightWidth().width))}this.widthWithChildren=b+this.startX;this.height=e;this.startY=this.topRow.capline;this.bottomRow.baseline=e-this.bottomRow.descenderHeight}getMeasureableForConnection(b){let e;
if((null==(e=this.outputConnection)?void 0:e.connectionModel)===b)return this.outputConnection;for(const g of this.rows)for(const k of g.elements)if(k instanceof ic&&k.connectionModel===b)return k;return null}},T=class{constructor(b,e,g){this.wsCoordinate=null;if(!e)throw Error("Cannot create a node without a location.");this.type=b;this.isConnectionLocation=T.isConnectionType(b);this.location=e;this.processParams(g||null)}processParams(b){b&&b.wsCoordinate&&(this.wsCoordinate=b.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var b=
this.location.getParentInput();const e=b.getSourceBlock();b=e.inputList.indexOf(b);for(b+=1;b<e.inputList.length;b++){const g=e.inputList[b],k=g.fieldRow;for(let n=0;n<k.length;n++){const r=k[n];if(r.isClickable()||T.NAVIGATE_ALL_FIELDS)return T.createFieldNode(r)}if(g.connection)return T.createInputNode(g)}return null}findNextForField(){var b=this.location,e=b.getParentInput();const g=b.getSourceBlock();if(!g)throw Error("The current AST location is not associated with a block");var k=g.inputList.indexOf(e);
for(b=e.fieldRow.indexOf(b)+1;k<g.inputList.length;k++){e=g.inputList[k];const n=e.fieldRow;for(;b<n.length;){if(n[b].isClickable()||T.NAVIGATE_ALL_FIELDS)return T.createFieldNode(n[b]);b++}b=0;if(e.connection)return T.createInputNode(e)}return null}findPrevForInput(){const b=this.location.getParentInput(),e=b.getSourceBlock();for(var g=e.inputList.indexOf(b);0<=g;g--){var k=e.inputList[g];if(k.connection&&k!==b)return T.createInputNode(k);k=k.fieldRow;for(let n=k.length-1;0<=n;n--){const r=k[n];
if(r.isClickable()||T.NAVIGATE_ALL_FIELDS)return T.createFieldNode(r)}}return null}findPrevForField(){var b=this.location;const e=b.getParentInput(),g=b.getSourceBlock();if(!g)throw Error("The current AST location is not associated with a block");var k=g.inputList.indexOf(e);for(b=e.fieldRow.indexOf(b)-1;0<=k;k--){var n=g.inputList[k];if(n.connection&&n!==e)return T.createInputNode(n);for(n=n.fieldRow;-1<b;){if(n[b].isClickable()||T.NAVIGATE_ALL_FIELDS)return T.createFieldNode(n[b]);b--}0<=k-1&&(b=
g.inputList[k-1].fieldRow.length-1)}return null}navigateBetweenStacks(b){var e=this.getLocation();if(e.getSourceBlock){var g=e.getSourceBlock();g&&(e=g)}if(!e||e.isDeadOrDying())return null;g=e.getRootBlock();e=g.workspace.getTopBlocks(!0);for(let k=0;k<e.length;k++)if(g.id===e[k].id)return b=k+(b?1:-1),-1===b||b===e.length?null:T.createStackNode(e[b]);throw Error("Couldn't find "+(b?"next":"previous")+" stack?!");}findTopASTNodeForBlock(b){const e=mf(b);return e?T.createConnectionNode(e):T.createBlockNode(b)}getOutAstNodeForBlock(b){if(!b)return null;
b=b.getTopStackBlock();const e=mf(b);return e&&e.targetConnection&&e.targetConnection.getParentInput()?T.createInputNode(e.targetConnection.getParentInput()):T.createStackNode(b)}findFirstFieldOrInput(b){b=b.inputList;for(let e=0;e<b.length;e++){const g=b[e],k=g.fieldRow;for(let n=0;n<k.length;n++){const r=k[n];if(r.isClickable()||T.NAVIGATE_ALL_FIELDS)return T.createFieldNode(r)}if(g.connection)return T.createInputNode(g)}return null}getSourceBlock(){return this.getType()===T.types.BLOCK?this.getLocation():
this.getType()===T.types.STACK?this.getLocation():this.getType()===T.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case T.types.STACK:return this.navigateBetweenStacks(!0);case T.types.OUTPUT:return T.createBlockNode(this.location.getSourceBlock());case T.types.FIELD:return this.findNextForField();case T.types.INPUT:return this.findNextForInput();case T.types.BLOCK:const b=this.location.nextConnection;if(!b)break;return T.createConnectionNode(b);case T.types.PREVIOUS:return T.createBlockNode(this.location.getSourceBlock());
case T.types.NEXT:return T.createConnectionNode(this.location.targetConnection)}return null}in(){switch(this.type){case T.types.WORKSPACE:const b=this.location.getTopBlocks(!0);if(0<b.length)return T.createStackNode(b[0]);break;case T.types.STACK:return this.findTopASTNodeForBlock(this.location);case T.types.BLOCK:return this.findFirstFieldOrInput(this.location);case T.types.INPUT:return T.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case T.types.STACK:return this.navigateBetweenStacks(!1);
case T.types.FIELD:return this.findPrevForField();case T.types.INPUT:return this.findPrevForInput();case T.types.BLOCK:var b=mf(this.location);if(!b)break;return T.createConnectionNode(b);case T.types.PREVIOUS:if((b=this.location.targetConnection)&&!b.getParentInput())return T.createConnectionNode(b);break;case T.types.NEXT:return T.createBlockNode(this.location.getSourceBlock())}return null}out(){switch(this.type){case T.types.STACK:var b=this.location,e=b.getRelativeToSurfaceXY();e=new Z(e.x,e.y+
T.DEFAULT_OFFSET_Y);return T.createWorkspaceNode(b.workspace,e);case T.types.OUTPUT:return b=this.location,(e=b.targetConnection)?T.createConnectionNode(e):T.createStackNode(b.getSourceBlock());case T.types.FIELD:b=this.location.getSourceBlock();if(!b)throw Error("The current AST location is not associated with a block");return T.createBlockNode(b);case T.types.INPUT:return T.createBlockNode(this.location.getSourceBlock());case T.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case T.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());
case T.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(b){switch(b){case T.types.PREVIOUS:case T.types.NEXT:case T.types.INPUT:case T.types.OUTPUT:return!0}return!1}static createFieldNode(b){return b?new T(T.types.FIELD,b):null}static createConnectionNode(b){if(!b)return null;const e=b.type;return e===fa.INPUT_VALUE||e===fa.NEXT_STATEMENT&&b.getParentInput()?T.createInputNode(b.getParentInput()):e===fa.NEXT_STATEMENT?new T(T.types.NEXT,
b):e===fa.OUTPUT_VALUE?new T(T.types.OUTPUT,b):e===fa.PREVIOUS_STATEMENT?new T(T.types.PREVIOUS,b):null}static createInputNode(b){return b&&b.connection?new T(T.types.INPUT,b.connection):null}static createBlockNode(b){return b?new T(T.types.BLOCK,b):null}static createStackNode(b){return b?new T(T.types.STACK,b):null}static createWorkspaceNode(b,e){return e&&b?new T(T.types.WORKSPACE,b,{wsCoordinate:e}):null}static createTopNode(b){const e=mf(b);return e?T.createConnectionNode(e):T.createBlockNode(b)}};
T.NAVIGATE_ALL_FIELDS=!1;T.DEFAULT_OFFSET_Y=-20;(function(b){b=b.types||(b.types={});b.FIELD="field";b.BLOCK="block";b.INPUT="input";b.OUTPUT="output";b.NEXT="next";b.PREVIOUS="previous";b.STACK="stack";b.WORKSPACE="workspace"})(T||={});var Bh=class extends Qb{constructor(b,e,g,k){let n=b?b.workspace.id:void 0;k&&k.getType()===T.types.WORKSPACE&&(n=k.getLocation().id);super(n);this.type="marker_move";this.blockId=null==b?void 0:b.id;this.oldNode=g||void 0;this.newNode=k;this.isCursor=e}toJson(){const b=
super.toJson();if(void 0===this.isCursor)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");b.isCursor=this.isCursor;b.blockId=this.blockId;b.oldNode=this.oldNode;b.newNode=this.newNode;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Bh);e.isCursor=b.isCursor;e.blockId=b.blockId;e.oldNode=b.oldNode;
e.newNode=b.newNode;return e}};d(U.EVENT,"marker_move",Bh);var Ch=class{constructor(b,e,g){this.workspace=b;this.marker=g;this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null;this.constants_=e;b=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=g.colour||b}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return"cursor"===this.marker.type}createDom(){const b=
this.isCursor()?"blocklyCursor":"blocklyMarker";this.svgGroup_=N(I.G,{"class":b});this.createDomInternal_();return this.svgGroup_}setParent_(b){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),b.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),b.setMarkerSvg(this.getSvgRoot()));this.parent=b}draw(b,e){if(e){this.constants_=this.workspace.getRenderer().getConstants();var g=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=
this.marker.colour||g;this.applyColour_(e);this.showAtLocation_(e);this.fireMarkerEvent(b,e);b=this.currentMarkerSvg.childNodes[0];void 0!==b&&b.beginElement&&b.beginElement()}else this.hide()}showAtLocation_(b){const e=b.getLocation().type;b.getType()===T.types.BLOCK?this.showWithBlock_(b):b.getType()===T.types.OUTPUT?this.showWithOutput_(b):e===fa.INPUT_VALUE?this.showWithInput_(b):e===fa.NEXT_STATEMENT?this.showWithNext_(b):b.getType()===T.types.PREVIOUS?this.showWithPrevious_(b):b.getType()===
T.types.FIELD?this.showWithField_(b):b.getType()===T.types.WORKSPACE?this.showWithCoordinates_(b):b.getType()===T.types.STACK&&this.showWithStack_(b)}showWithBlockPrevOutput(b){b=b.getSourceBlock();const e=b.width;var g=b.height,k=.75*g;const n=this.constants_.CURSOR_BLOCK_PADDING;b.previousConnection?(g=this.constants_.shapeFor(b.previousConnection),this.positionPrevious_(e,n,k,g)):b.outputConnection?(k=this.constants_.shapeFor(b.outputConnection),this.positionOutput_(e,g,k)):this.positionBlock_(e,
n,k);this.setParent_(b);this.showCurrent_()}showWithBlock_(b){this.showWithBlockPrevOutput(b)}showWithPrevious_(b){this.showWithBlockPrevOutput(b)}showWithOutput_(b){this.showWithBlockPrevOutput(b)}showWithCoordinates_(b){var e=b.getWsCoordinate();b=e.x;e=e.y;this.workspace.RTL&&(b-=this.constants_.CURSOR_WS_WIDTH);this.positionLine_(b,e,this.constants_.CURSOR_WS_WIDTH);this.setParent_(this.workspace);this.showCurrent_()}showWithField_(b){b=b.getLocation();const e=b.getSize().width,g=b.getSize().height;
this.positionRect_(0,0,e,g);this.setParent_(b);this.showCurrent_()}showWithInput_(b){b=b.getLocation();const e=b.getSourceBlock();this.positionInput_(b);this.setParent_(e);this.showCurrent_()}showWithNext_(b){var e=b.getLocation();b=e.getSourceBlock();let g=0;e=e.getOffsetInBlock().y;const k=b.getHeightWidth().width;this.workspace.RTL&&(g=-k);this.positionLine_(g,e,k);this.setParent_(b);this.showCurrent_()}showWithStack_(b){b=b.getLocation();var e=b.getHeightWidth();const g=e.width+this.constants_.CURSOR_STACK_PADDING;
e=e.height+this.constants_.CURSOR_STACK_PADDING;const k=-this.constants_.CURSOR_STACK_PADDING/2,n=-this.constants_.CURSOR_STACK_PADDING/2;let r=k;this.workspace.RTL&&(r=-(g+k));this.positionRect_(r,n,g,e);this.setParent_(b);this.showCurrent_()}showCurrent_(){this.hide();this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(b,e,g){b=Ma(-e,g)+ha("V",-e)+ha("H",b+2*e)+ha("V",g);if(!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",
b);this.workspace.RTL&&this.flipRtl(this.markerBlock_);this.currentMarkerSvg=this.markerBlock_}positionInput_(b){const e=b.getOffsetInBlock().x,g=b.getOffsetInBlock().y;b=Wa(0,0)+this.constants_.shapeFor(b).pathDown;this.markerInput_.setAttribute("d",b);this.markerInput_.setAttribute("transform","translate("+e+","+g+")"+(this.workspace.RTL?" scale(-1 1)":""));this.currentMarkerSvg=this.markerInput_}positionLine_(b,e,g){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");
this.markerSvgLine_.setAttribute("x",`${b}`);this.markerSvgLine_.setAttribute("y",`${e}`);this.markerSvgLine_.setAttribute("width",`${g}`);this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(b,e,g){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");b=Ma(b,0)+ha("h",-(b-g.width))+ha("v",this.constants_.TAB_OFFSET_FROM_TOP)+g.pathDown+ha("V",e)+ha("H",b);this.markerBlock_.setAttribute("d",b);this.workspace.RTL&&this.flipRtl(this.markerBlock_);this.currentMarkerSvg=
this.markerBlock_}positionPrevious_(b,e,g,k){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");b=Ma(-e,g)+ha("V",-e)+ha("H",this.constants_.NOTCH_OFFSET_LEFT)+k.pathLeft+ha("H",b+2*e)+ha("V",g);this.markerBlock_.setAttribute("d",b);this.workspace.RTL&&this.flipRtl(this.markerBlock_);this.currentMarkerSvg=this.markerBlock_}positionRect_(b,e,g,k){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");
this.markerSvgRect_.setAttribute("x",`${b}`);this.markerSvgRect_.setAttribute("y",`${e}`);this.markerSvgRect_.setAttribute("width",`${g}`);this.markerSvgRect_.setAttribute("height",`${k}`);this.currentMarkerSvg=this.markerSvgRect_}flipRtl(b){b.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none";this.markerSvgRect_.style.display=
"none";this.markerInput_.style.display="none";this.markerBlock_.style.display="none"}fireMarkerEvent(b,e){const g=e.getSourceBlock();b=new (ja("marker_move"))(g,this.isCursor(),b,e);ba(b)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){this.markerSvg_=N(I.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_);this.markerSvgLine_=N(I.RECT,
{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_);this.markerSvgRect_=N(I.RECT,{"class":"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_);this.markerInput_=N(I.PATH,{transform:""},this.markerSvg_);this.markerBlock_=N(I.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_);this.hide();if(this.isCursor()){const b=this.getBlinkProperties_();N(I.ANIMATE,b,this.markerSvgLine_);N(I.ANIMATE,b,this.markerInput_);
N(I.ANIMATE,Object.assign({},b,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(b){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_);this.markerSvgRect_.setAttribute("stroke",this.colour_);this.markerInput_.setAttribute("fill",this.colour_);this.markerBlock_.setAttribute("stroke",this.colour_);this.isCursor()&&
(b=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",b),this.markerInput_.firstElementChild.setAttribute("values",b),this.markerBlock_.firstElementChild.setAttribute("values",b))}dispose(){this.svgGroup_&&Da(this.svgGroup_)}},Cf=class{constructor(b,e,g){this.markerSvg=this.cursorSvg=null;this.connectionHighlights=new WeakMap;this.highlightOffsets=new WeakMap;this.constants=g;this.style=e;this.svgRoot=b;this.svgPath=N(I.PATH,{"class":"blocklyPath"},
this.svgRoot)}setPath(b){this.svgPath.setAttribute("d",b)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(b){b?(this.svgRoot.appendChild(b),this.cursorSvg=b):this.cursorSvg=null}setMarkerSvg(b){b?(this.cursorSvg?this.svgRoot.insertBefore(b,this.cursorSvg):this.svgRoot.appendChild(b),this.markerSvg=b):this.markerSvg=null}applyColour(b){this.svgPath.setAttribute("stroke",this.style.colourTertiary);this.svgPath.setAttribute("fill",this.style.colourPrimary);this.updateShadow_(b.isShadow());
this.updateDisabled_(!b.isEnabled()||b.getInheritedDisabled())}setStyle(b){this.style=b}setClass_(b,e){b&&(e?la(this.svgRoot,b):za(this.svgRoot,b))}updateHighlighted(b){b?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(b){b&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(b){this.setClass_("blocklyDisabled",b);b&&this.svgPath.setAttribute("fill",
"url(#"+this.constants.disabledPatternId+")")}updateSelected(b){this.setClass_("blocklySelected",b)}updateDraggingDelete(b){this.setClass_("blocklyDraggingDelete",b)}updateInsertionMarker(b){this.setClass_("blocklyInsertionMarker",b)}updateMovable(b){this.setClass_("blocklyDraggable",b)}updateReplacementFade(b){this.setClass_("blocklyReplaceable",b)}updateShapeForInputHighlight(b,e){}addConnectionHighlight(b,e,g,k){if(this.connectionHighlights.has(b)){if(this.currentHighlightMatchesNew(b,e,g))return;
this.removeConnectionHighlight(b)}e=N(I.PATH,{"class":"blocklyHighlightedConnectionPath",d:e,transform:`translate(${g.x}, ${g.y})`+(k?" scale(-1 1)":"")},this.svgRoot);this.connectionHighlights.set(b,e)}currentHighlightMatchesNew(b,e,g){let k;const n=null==(k=this.connectionHighlights.get(b))?void 0:k.getAttribute("d");b=this.highlightOffsets.get(b);return n===e&&Z.equals(b,g)}removeConnectionHighlight(b){const e=this.connectionHighlights.get(b);e&&(Da(e),this.connectionHighlights.delete(b))}},va=
class{constructor(b,e){this.type=e;this.targetConnection=null;this.disposed=!1;this.shadowDom=this.check=null;this.y=this.x=0;this.shadowState=null;this.sourceBlock_=b}connect_(b){const e=fa.INPUT_VALUE,g=this.getSourceBlock();var k=b.getSourceBlock();b.isConnected()&&b.disconnectInternal(!1);let n;if(this.isConnected()){const w=this.stashShadowState(),x=this.targetBlock();x.isShadow()?x.dispose(!1):(this.disconnectInternal(),n=x);this.applyShadowState(w)}let r;wa()&&(r=new (ja(a.MOVE$$module$build$src$core$events$utils))(k),
r.setReason(["connect"]));Hn(this,b);k.setParent(g);r&&(r.recordNew(),ba(r));if(n&&(b=this.type===e?n.outputConnection:n.previousConnection))if(k=va.getConnectionForOrphanedConnection(k,b))b.connect(k);else b.onFailedConnect(this)}dispose(){if(this.isConnected()){this.setShadowStateInternal();const b=this.targetBlock();b&&!b.isDeadOrDying()&&b.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===fa.INPUT_VALUE||this.type===fa.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(b){}connect(b){if(this.targetConnection===
b)return!0;if(this.getConnectionChecker().canConnect(this,b,!1)){const e=a.getGroup$$module$build$src$core$events$utils();e||a.setGroup$$module$build$src$core$events$utils(!0);this.isSuperior()?this.connect_(b):b.connect_(this);a.setGroup$$module$build$src$core$events$utils(e)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(b=!0){const {parentConnection:e,childConnection:g}=this.getParentAndChildConnections();if(!e||!g)throw Error("Source connection not connected.");
const k=a.getGroup$$module$build$src$core$events$utils();k||a.setGroup$$module$build$src$core$events$utils(!0);let n;wa()&&(n=new (ja(a.MOVE$$module$build$src$core$events$utils))(g.getSourceBlock()),n.setReason(["disconnect"]));const r=this.targetConnection;r&&(r.targetConnection=null);this.targetConnection=null;b&&g.getSourceBlock().setParent(null);n&&(n.recordNew(),ba(n));g.getSourceBlock().isShadow()||e.respawnShadow_();a.setGroup$$module$build$src$core$events$utils(k)}getParentAndChildConnections(){return this.targetConnection?
this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(b,e){if(this.getSourceBlock().isDeadOrDying())return!1;var g;e=null==(g=b.getInput(e))?void 0:g.connection;return(g=this.targetBlock())&&g!==b||!e||e.targetConnection===this?!1:(e.isConnected()&&e.disconnect(),e.connect(this),!0)}targetBlock(){if(this.isConnected()){let b,e;return null!=(e=null==(b=this.targetConnection)?
void 0:b.getSourceBlock())?e:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(b){b?(Array.isArray(b)||(b=[b]),this.check=b,this.onCheckChanged_()):this.check=null;return this}getCheck(){return this.check}setShadowDom(b){this.setShadowStateInternal({shadowDom:b})}getShadowDom(b){return b&&this.targetBlock().isShadow()?Dc(this.targetBlock()):
this.shadowDom}setShadowState(b){this.setShadowStateInternal({shadowState:b})}getShadowState(b){return b&&this.targetBlock()&&this.targetBlock().isShadow()?$b(this.targetBlock()):this.shadowState}neighbours(b){return[]}getParentInput(){let b=null;const e=this.sourceBlock_.inputList;for(let g=0;g<e.length;g++)if(e[g].connection===this){b=e[g];break}return b}toString(){const b=this.sourceBlock_;if(!b)return"Orphan Connection";if(b.outputConnection===this)var e="Output Connection of ";else if(b.previousConnection===
this)e="Previous Connection of ";else if(b.nextConnection===this)e="Next Connection of ";else{e=null;for(let g=0,k;k=b.inputList[g];g++)if(k.connection===this){e=k;break}if(e)e='Input "'+e.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return e+b.toDevString()}stashShadowState(){const b=this.getShadowDom(!0),e=this.getShadowState(!0);this.shadowState=this.shadowDom=null;return{shadowDom:b,shadowState:e}}applyShadowState({shadowDom:b,
shadowState:e}){this.shadowDom=b;this.shadowState=e}setShadowStateInternal({shadowDom:b=null,shadowState:e=null}={}){this.shadowDom=b;this.shadowState=e;(b=this.targetBlock())?b.isShadow()?(b.dispose(!1),this.getSourceBlock().isDeadOrDying()||(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))):(b=this.createShadowBlock(!1),this.serializeShadow(b),b&&b.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&
this.serializeShadow(this.targetBlock()))}createShadowBlock(b){var e=this.getSourceBlock();const g=this.getShadowState(),k=this.getShadowDom();if(e.isDeadOrDying()||!g&&!k)return null;if(g)return Xd(g,e.workspace,{parentConnection:b?this:void 0,isShadow:!0,recordUndo:!1});if(k){e=Ec(k,e.workspace);if(b)if(this.type===fa.INPUT_VALUE){if(!e.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(e.outputConnection))throw Error("Could not connect shadow block to connection");
}else if(this.type===fa.NEXT_STATEMENT){if(!e.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(e.previousConnection))throw Error("Could not connect shadow block to connection");}else throw Error("Cannot connect a shadow block to a previous/output connection");return e}return null}serializeShadow(b){b&&(this.shadowDom=Dc(b),this.shadowState=$b(b))}static getConnectionForOrphanedConnection(b,e){if(e.type===fa.OUTPUT_VALUE)return Jn(b,e.getSourceBlock());
b=b.lastConnectionInStack(!0);const g=e.getConnectionChecker();return b&&g.canConnect(e,b,!1)?b:null}};va.CAN_CONNECT=0;va.REASON_SELF_CONNECTION=1;va.REASON_WRONG_TYPE=2;va.REASON_TARGET_NULL=3;va.REASON_CHECKS_FAILED=4;va.REASON_DIFFERENT_WORKSPACES=5;va.REASON_SHADOW_PARENT=6;va.REASON_DRAG_CHECKS_FAILED=7;va.REASON_PREVIOUS_AND_OUTPUT=8;var Vb=class{constructor(b){this.activeCandidate=this.lastMarker=this.lastOnStack=null;this.wouldDeleteBlock=!1;this.fadedBlock=this.highlightedBlock=this.markerConnection=
null;B(b);this.topBlock=b;this.workspace=b.workspace;this.firstMarker=this.createMarkerBlock(this.topBlock);this.availableConnections=this.initAvailableConnections();this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0;this.disposeInsertionMarker(this.firstMarker);this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){a.disable$$module$build$src$core$events$utils();
this.hidePreview();a.enable$$module$build$src$core$events$utils();var {local:b,closest:e}=this.activeCandidate;b.connect(e);if(this.topBlock.rendered){const g=b.isSuperior()?e:b,k=this.topBlock.getRootBlock();id().then(()=>{Eg(g.getSourceBlock());setTimeout(()=>{k.bringToFront()},0)})}}}update(b,e){const g=this.getCandidate(b);if((this.wouldDeleteBlock=this.shouldDelete(!!g,e))||this.shouldUpdatePreviews(g,b))a.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(g),this.maybeShowPreview(g),
a.enable$$module$build$src$core$events$utils()}createMarkerBlock(b){var e=b.type;a.disable$$module$build$src$core$events$utils();let g;try{g=this.workspace.newBlock(e);g.setInsertionMarker(!0);if(b.saveExtraState){var k=b.saveExtraState(!0);k&&g.loadExtraState&&g.loadExtraState(k)}else if(b.mutationToDom){const n=b.mutationToDom();n&&g.domToMutation&&g.domToMutation(n)}for(e=0;e<b.inputList.length;e++){const n=b.inputList[e];if("_TEMP_COLLAPSED_INPUT"===n.name)continue;const r=g.inputList[e];if(!r)throw Error("The insertion marker manager tried to create a marker but the result is missing an input. If you are using a mutator, make sure your domToMutation method is properly defined.");
for(k=0;k<n.fieldRow.length;k++){const w=n.fieldRow[k],x=r.fieldRow[k];if(!x)throw Error("The insertion marker manager tried to create a marker but the result is missing a field. If you are using a mutator, make sure your domToMutation method is properly defined.");x.setValue(w.getValue())}}for(const n of g.getDescendants(!1))n.setInsertionMarker(!0);g.setCollapsed(b.isCollapsed());g.setInputsInline(b.getInputsInline());g.initSvg();g.getSvgRoot().setAttribute("visibility","hidden")}finally{a.enable$$module$build$src$core$events$utils()}return g}initAvailableConnections(){const b=
this.topBlock.getConnections_(!1),e=this.topBlock.lastConnectionInStack(!0);e&&e!==this.topBlock.nextConnection&&(b.push(e),this.lastOnStack=e);return b}shouldUpdatePreviews(b,e){if(!b)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const {local:g,closest:k}=this.activeCandidate;if(k===b.closest&&g===b.local)return!1;const n=g.x+e.x-k.x;e=g.y+e.y-k.y;return b.radius<Math.sqrt(n*n+e*e)-a.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(b){this.markerConnection&&
this.markerConnection.isConnected()||this.updateAvailableConnections();let e=this.getStartRadius(),g=null;for(let k=0;k<this.availableConnections.length;k++){const n=this.availableConnections[k],r=n.closest(e,b);r.connection&&(g={closest:r.connection,local:n,radius:r.radius},e=r.radius)}return g}getStartRadius(){return this.activeCandidate?a.config$$module$build$src$core$config.connectingSnapRadius:a.config$$module$build$src$core$config.snapRadius}shouldDelete(b,e){return e&&this.workspace.getComponentManager().hasCapability(e.id,
Ua.Capability.DELETE_AREA)?e.wouldDelete(this.topBlock,b):!1}maybeShowPreview(b){if(!this.wouldDeleteBlock&&b){var e=b.closest,g;e===(null==(g=this.activeCandidate)?void 0:g.closest)||e.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=b,this.showPreview(this.activeCandidate))}}showPreview(b){const e=this.workspace.getRenderer();switch(e.getConnectionPreviewMethod(b.closest,b.local,this.topBlock)){case Vb.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(b);
break;case Vb.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(b);break;case Vb.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(b)}e.shouldHighlightConnection(b.closest)&&b.closest.highlight()}maybeHidePreview(b){if(!b)this.hidePreview();else if(this.activeCandidate){const e=this.activeCandidate.local!==b.local;(this.activeCandidate.closest!==b.closest||e||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let b;const e=null==(b=this.activeCandidate)?
void 0:b.closest;e&&e.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(e)&&e.unhighlight();this.hideReplacementFade();this.hideInsertionInputOutline();this.hideInsertionMarker()}showInsertionMarker(b){const {local:e,closest:g}=b;let k=(b=this.lastOnStack&&e===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!k)throw Error("Cannot show the insertion marker because there is no insertion marker block");let n;try{n=k.getMatchingConnection(e.getSourceBlock(),e)}catch(P){b&&this.lastOnStack?
(this.disposeInsertionMarker(this.lastMarker),k=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),k=this.firstMarker=this.createMarkerBlock(this.topBlock));if(!k)throw Error("Cannot show the insertion marker because there is no insertion marker block");n=k.getMatchingConnection(e.getSourceBlock(),e)}if(!n)throw Error("Cannot show the insertion marker because there is no associated connection");if(n===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");
k.queueRender();Ib();n.connect(g);const r={x:g.x-n.x,y:g.y-n.y},w=n.getOffsetInBlock().clone(),x=n;id().then(()=>{let P;null==(P=k)||P.positionNearConnection(x,r,w);let ea;null==(ea=k)||ea.getSvgRoot().setAttribute("visibility","visible")});this.markerConnection=n}hideInsertionMarker(){if(this.markerConnection){var b=this.markerConnection,e=b.getSourceBlock(),g=e.outputConnection,k;if((null==(k=e.previousConnection)?0:k.targetConnection)||(null==g?0:g.targetConnection))e.unplug(!0);else{let n;null==
(n=b.targetBlock())||n.unplug(!1)}if(b.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null;(b=e.getSvgRoot())&&b.setAttribute("visibility","hidden")}}showInsertionInputOutline(b){b=b.closest;this.highlightedBlock=b.getSourceBlock();this.highlightedBlock.highlightShapeForInput(b,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");
this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1);this.highlightedBlock=null}}showReplacementFade(b){this.fadedBlock=b.closest.targetBlock();if(!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const b=[];this.firstMarker&&b.push(this.firstMarker);
this.lastMarker&&b.push(this.lastMarker);return b}disposeInsertionMarker(b){if(b){a.disable$$module$build$src$core$events$utils();try{b.dispose()}finally{a.enable$$module$build$src$core$events$utils()}}}};(function(b){b=b.PREVIEW_TYPE||(b.PREVIEW_TYPE={});b[b.INSERTION_MARKER=0]="INSERTION_MARKER";b[b.INPUT_OUTLINE=1]="INPUT_OUTLINE";b[b.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Vb||={});var De=class{constructor(b){this.overrides=null;this.name=b}getClassName(){return this.name+"-renderer"}init(b,
e){this.constants_=this.makeConstants_();e&&(this.overrides=e,Object.assign(this.constants_,e));this.constants_.setTheme(b);this.constants_.init()}createDom(b,e){this.constants_.createDom(b,this.name+"-"+e.name,"."+this.getClassName()+"."+e.getClassName())}refreshDom(b,e){const g=this.getConstants();g.dispose();this.constants_=this.makeConstants_();this.overrides&&Object.assign(this.constants_,this.overrides);this.constants_.randomIdentifier=g.randomIdentifier;this.constants_.setTheme(e);this.constants_.init();
this.createDom(b,e)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Be}makeRenderInfo_(b){return new Fd(this,b)}makeDrawer_(b,e){return new Ce(b,e)}makeMarkerDrawer(b,e){return new Ch(b,this.getConstants(),e)}makePathObject(b,e){return new Cf(b,e,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(b){return!0}orphanCanConnectAtEnd(b,e,g){return!!va.getConnectionForOrphanedConnection(b,g===fa.OUTPUT_VALUE?e.outputConnection:e.previousConnection)}getConnectionPreviewMethod(b,
e,g){Na("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case.");return e.type===fa.OUTPUT_VALUE||e.type===fa.PREVIOUS_STATEMENT?!b.isConnected()||this.orphanCanConnectAtEnd(g,b.targetBlock(),e.type)?Vb.PREVIEW_TYPE.INSERTION_MARKER:Vb.PREVIEW_TYPE.REPLACEMENT_FADE:Vb.PREVIEW_TYPE.INSERTION_MARKER}render(b){const e=this.makeRenderInfo_(b);e.measure();this.makeDrawer_(b,e).draw()}},Ca={};Ca.BottomRow=vh;Ca.Connection=ic;Ca.ConstantProvider=Be;Ca.Drawer=Ce;
Ca.ExternalValueInput=Bf;Ca.Field=Ed;Ca.Hat=wh;Ca.Icon=sl;Ca.InRowSpacer=ob;Ca.InlineInput=xh;Ca.InputConnection=vc;Ca.InputRow=yh;Ca.JaggedEdge=tl;Ca.MarkerSvg=Ch;Ca.Measurable=Tb;Ca.NextConnection=ul;Ca.OutputConnection=vl;Ca.PathObject=Cf;Ca.PreviousConnection=wl;Ca.RenderInfo=Fd;Ca.Renderer=De;Ca.RoundCorner=ze;Ca.Row=xe;Ca.SpacerRow=zh;Ca.SquareCorner=Ae;Ca.StatementInput=ye;Ca.TopRow=Ah;Ca.Types=F;Ca.init=ik;Ca.register=me;Ca.unregister=function(b){h(U.RENDERER,b)};var xl=class{constructor(b,
e){this.workspace=b;this.theme=e;this.subscribedWorkspaces_=[];this.componentDB=new Map}getTheme(){return this.theme}setTheme(b){var e=this.theme;this.theme=b;if(b=this.workspace.getInjectionDiv())(e&&=e.getClassName())&&za(b,e),(e=this.theme.getClassName())&&la(b,e);for(let g=0,k;k=this.subscribedWorkspaces_[g];g++)k.refreshTheme();for(const [g,k]of this.componentDB)for(const n of k){b=n.element;e=n.propertyName;const r=this.theme&&this.theme.getComponentStyle(g);b.style.setProperty(e,r||"")}for(const g of this.subscribedWorkspaces_)g.hideChaff()}subscribeWorkspace(b){this.subscribedWorkspaces_.push(b)}unsubscribeWorkspace(b){if(!ib(this.subscribedWorkspaces_,
b))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");}subscribe(b,e,g){this.componentDB.has(e)||this.componentDB.set(e,[]);this.componentDB.get(e).push({element:b,propertyName:g});e=this.theme&&this.theme.getComponentStyle(e);b.style.setProperty(g,e||"")}unsubscribe(b){if(b)for(const [e,g]of this.componentDB){for(let k=g.length-1;0<=k;k--)g[k].element===b&&g.splice(k,1);g.length||this.componentDB.delete(e)}}dispose(){this.subscribedWorkspaces_.length=0;this.componentDB.clear()}},
Yc={CATEGORY_NAME:"VARIABLE_DYNAMIC"};Yc.flyoutCategory=Zg;Yc.flyoutCategoryBlocks=mk;Yc.onCreateVariableButtonClick_Colour=lk;Yc.onCreateVariableButtonClick_Number=kk;Yc.onCreateVariableButtonClick_String=jk;var yl=class{canConnect(b,e,g,k){return this.canConnectWithReason(b,e,g,k)===va.CAN_CONNECT}canConnectWithReason(b,e,g,k){const n=this.doSafetyChecks(b,e);return n!==va.CAN_CONNECT?n:this.doTypeChecks(b,e)?g&&!this.doDragChecks(b,e,k||0)?va.REASON_DRAG_CHECKS_FAILED:va.CAN_CONNECT:va.REASON_CHECKS_FAILED}getErrorMessage(b,
e,g){switch(b){case va.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case va.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case va.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case va.REASON_TARGET_NULL:return"Target connection is null.";case va.REASON_CHECKS_FAILED:return"Connection checks failed. "+(e+" expected "+e.getCheck()+", found "+g.getCheck());case va.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case va.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";
case va.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(b,e){if(!b||!e)return va.REASON_TARGET_NULL;let g,k,n;b.isSuperior()?(g=b.getSourceBlock(),k=e.getSourceBlock(),n=e):(k=b.getSourceBlock(),g=e.getSourceBlock(),n=b,b=e);return g===k?va.REASON_SELF_CONNECTION:n.type!==Tc[b.type]?va.REASON_WRONG_TYPE:g.workspace!==k.workspace?va.REASON_DIFFERENT_WORKSPACES:g.isShadow()&&
!k.isShadow()?va.REASON_SHADOW_PARENT:n.type===fa.OUTPUT_VALUE&&k.previousConnection&&k.previousConnection.isConnected()||n.type===fa.PREVIOUS_STATEMENT&&k.outputConnection&&k.outputConnection.isConnected()?va.REASON_PREVIOUS_AND_OUTPUT:va.CAN_CONNECT}doTypeChecks(b,e){b=b.getCheck();e=e.getCheck();if(!b||!e)return!0;for(let g=0;g<b.length;g++)if(-1!==e.indexOf(b[g]))return!0;return!1}doDragChecks(b,e,g){if(b.distanceFrom(e)>g||e.getSourceBlock().isInsertionMarker())return!1;switch(e.type){case fa.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(b,
e);case fa.OUTPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isInsertionMarker()||b.isConnected())return!1;break;case fa.INPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isMovable()&&!e.targetBlock().isShadow())return!1;break;case fa.NEXT_STATEMENT:if(e.isConnected()&&!b.getSourceBlock().nextConnection&&!e.targetBlock().isShadow()&&e.targetBlock().nextConnection||e.targetBlock()&&!e.targetBlock().isMovable()&&!e.targetBlock().isShadow())return!1;break;default:return!1}return-1!==zd.indexOf(e)?!1:
!0}canConnectToPrevious_(b,e){if(b.targetConnection||-1!==zd.indexOf(e))return!1;if(!e.targetConnection)return!0;b=e.targetBlock();return b.isInsertionMarker()?!b.getPreviousBlock():!1}};d(U.CONNECTION_CHECKER,Gb,yl);var Dh=class extends re{constructor(b){super(b);this.type="var_delete";b&&(this.varType=b.type,this.varName=b.name)}toJson(){const b=super.toJson();if(void 0===this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");
b.varType=this.varType;b.varName=this.varName;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Dh);e.varType=b.varType;e.varName=b.varName;return e}run(b){const e=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");b?e.deleteVariableById(this.varId):e.createVariable(this.varName,
this.varType,this.varId)}};d(U.EVENT,"var_delete",Dh);var Eh=class extends re{constructor(b,e){super(b);this.type="var_rename";b&&(this.oldName=b.name,this.newName="undefined"===typeof e?"":e)}toJson(){const b=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");b.oldName=this.oldName;b.newName=
this.newName;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Eh);e.oldName=b.oldName;e.newName=b.newName;return e}run(b){const e=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");
b?e.renameVariableById(this.varId,this.newName):e.renameVariableById(this.varId,this.oldName)}};d(U.EVENT,"var_rename",Eh);var Fh=class{constructor(b){this.workspace=b;this.variableMap=new Map}clear(){for(const b of this.variableMap.values())for(;0<b.length;)this.deleteVariable(b[0]);if(0!==this.variableMap.size)throw Error("Non-empty variable map");}renameVariable(b,e){if(b.name!==e){var g=this.getVariable(e,b.type),k=this.workspace.getAllBlocks(!1),n=a.getGroup$$module$build$src$core$events$utils();
n||a.setGroup$$module$build$src$core$events$utils(!0);try{g&&g.getId()!==b.getId()?this.renameVariableWithConflict_(b,e,g,k):this.renameVariableAndUses_(b,e,k)}finally{a.setGroup$$module$build$src$core$events$utils(n)}}}renameVariableById(b,e){const g=this.getVariableById(b);if(!g)throw Error("Tried to rename a variable that didn't exist. ID: "+b);this.renameVariable(g,e)}renameVariableAndUses_(b,e,g){ba(new (ja("var_rename"))(b,e));b.name=e;for(e=0;e<g.length;e++)g[e].updateVarName(b)}renameVariableWithConflict_(b,
e,g,k){const n=b.type;e!==g.name&&this.renameVariableAndUses_(g,e,k);for(e=0;e<k.length;e++)k[e].renameVarById(b.getId(),g.getId());ba(new (ja("var_delete"))(b));ib(this.variableMap.get(n),b)}createVariable(b,e,g){var k=this.getVariable(b,e);if(k){if(g&&k.getId()!==g)throw Error('Variable "'+b+'" is already in use and its id is "'+k.getId()+'" which conflicts with the passed in id, "'+g+'".');return k}if(g&&this.getVariableById(g))throw Error('Variable id, "'+g+'", is already in use.');k=g||R();e=
e||"";k=new Ud(this.workspace,b,e,k);b=this.variableMap.get(e)||[];b.push(k);this.variableMap.delete(e);this.variableMap.set(e,b);ba(new (ja(ld))(k));return k}deleteVariable(b){const e=b.getId(),g=this.variableMap.get(b.type);if(g)for(let k=0;k<g.length;k++)if(g[k].getId()===e){g.splice(k,1);ba(new (ja("var_delete"))(b));0===g.length&&this.variableMap.delete(b.type);break}}deleteVariableById(b){const e=this.getVariableById(b);if(e){var g=e.name;const k=this.getVariableUsesById(b);for(let n=0,r;r=
k[n];n++)if("procedures_defnoreturn"===r.type||"procedures_defreturn"===r.type){b=String(r.getFieldValue("NAME"));g=a.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",g).replace("%2",b);We(g);return}1<k.length?(g=a.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(k.length)).replace("%2",g),bg(g,n=>{n&&e&&this.deleteVariableInternal(e,k)})):this.deleteVariableInternal(e,k)}else console.warn("Can't delete non-existent variable: "+b)}deleteVariableInternal(b,
e){const g=a.getGroup$$module$build$src$core$events$utils();g||a.setGroup$$module$build$src$core$events$utils(!0);try{for(let k=0;k<e.length;k++)e[k].dispose(!0);this.deleteVariable(b)}finally{a.setGroup$$module$build$src$core$events$utils(g)}}getVariable(b,e){if(e=this.variableMap.get(e||""))for(let g=0,k;k=e[g];g++)if(a.Names$$module$build$src$core$names.equals(k.name,b))return k;return null}getVariableById(b){for(const e of this.variableMap.values())for(const g of e)if(g.getId()===b)return g;return null}getVariablesOfType(b){return(b=
this.variableMap.get(b||""))?b.slice():[]}getVariableTypes(b){const e=new Set(this.variableMap.keys());if(b&&b.getPotentialVariableMap())for(const g of b.getPotentialVariableMap().variableMap.keys())e.add(g);e.has("")||e.add("");return Array.from(e.values())}getAllVariables(){let b=[];for(const e of this.variableMap.values())b=b.concat(e);return b}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(b=>b.name)}getVariableUsesById(b){const e=[],g=this.workspace.getAllBlocks(!1);
for(let k=0;k<g.length;k++){const n=g[k].getVarModels();if(n)for(let r=0;r<n.length;r++)n[r].getId()===b&&e.push(g[k])}return e}},Ee=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(b){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1;this.MAX_UNDO=1024;this.connectionDBList=[];this.topBlocks=[];this.topComments=[];this.commentDB=new Map;this.listeners=[];this.undoStack_=[];this.redoStack_=[];this.blockDB=new Map;
this.typedBlocksDB=new Map;this.procedureMap=new ol;this.potentialVariableMap=null;this.id=R();X(this);this.options=b||new ub({});this.RTL=!!this.options.RTL;this.horizontalLayout=!!this.options.horizontalLayout;this.toolboxPosition=this.options.toolboxPosition;this.connectionChecker=new (y(U.CONNECTION_CHECKER,this.options,!0))(this);this.variableMap=new Fh(this)}dispose(){this.listeners.length=0;this.clear();M(this)}sortObjects_(b,e){const g=Math.sin($d(Ee.SCAN_ANGLE))*(this.RTL?-1:1);b=b.getRelativeToSurfaceXY();
e=e.getRelativeToSurfaceXY();return b.y+g*b.x-(e.y+g*e.x)}addTopBlock(b){this.topBlocks.push(b)}removeTopBlock(b){if(!ib(this.topBlocks,b))throw Error("Block not present in workspace's list of top-most blocks.");}getTopBlocks(b=!1){const e=[].concat(this.topBlocks);b&&1<e.length&&e.sort(this.sortObjects_.bind(this));return e}addTypedBlock(b){this.typedBlocksDB.has(b.type)||this.typedBlocksDB.set(b.type,[]);this.typedBlocksDB.get(b.type).push(b)}removeTypedBlock(b){ib(this.typedBlocksDB.get(b.type),
b);this.typedBlocksDB.get(b.type).length||this.typedBlocksDB.delete(b.type)}getBlocksByType(b,e=!1){if(!this.typedBlocksDB.has(b))return[];b=this.typedBlocksDB.get(b).slice(0);e&&b&&1<b.length&&b.sort(this.sortObjects_.bind(this));return b.filter(function(g){return!g.isInsertionMarker()})}addTopComment(b){this.topComments.push(b);this.commentDB.has(b.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+b.id+'"');this.commentDB.set(b.id,b)}removeTopComment(b){if(!ib(this.topComments,
b))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(b.id)}getTopComments(b=!1){const e=[].concat(this.topComments);b&&1<e.length&&e.sort(this.sortObjects_.bind(this));return e}getAllBlocks(b=!1){if(b){var e=this.getTopBlocks(!0);b=[];for(let g=0;g<e.length;g++)b.push(...e[g].getDescendants(!0))}else for(b=this.getTopBlocks(!1),e=0;e<b.length;e++)b.push(...b[e].getChildren(!1));return b.filter(function(g){return!g.isInsertionMarker()})}clear(){this.isClearing=
!0;try{const b=a.getGroup$$module$build$src$core$events$utils();for(b||a.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();a.setGroup$$module$build$src$core$events$utils(b);this.variableMap.clear();this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(b,e){this.variableMap.renameVariableById(b,e)}createVariable(b,
e,g){return this.variableMap.createVariable(b,e,g)}getVariableUsesById(b){return this.variableMap.getVariableUsesById(b)}deleteVariableById(b){this.variableMap.deleteVariableById(b)}getVariable(b,e){return this.variableMap.getVariable(b,e)}getVariableById(b){return this.variableMap.getVariableById(b)}getVariablesOfType(b){return this.variableMap.getVariablesOfType(b)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(b,
e){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts");}remainingCapacity(){return isNaN(this.options.maxBlocks)?Infinity:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(b){return this.options.maxInstances?(void 0!==this.options.maxInstances[b]?this.options.maxInstances[b]:Infinity)-this.getBlocksByType(b,!1).length:Infinity}isCapacityAvailable(b){if(!this.hasBlockLimits())return!0;let e=0;for(const g in b){if(b[g]>this.remainingCapacityOfType(g))return!1;
e+=b[g]}return e>this.remainingCapacity()?!1:!0}hasBlockLimits(){return Infinity!==this.options.maxBlocks||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(b){var e=b?this.redoStack_:this.undoStack_,g=b?this.undoStack_:this.redoStack_;const k=e.pop();if(k){for(var n=[k];e.length&&k.group&&k.group===e[e.length-1].group;){const r=e.pop();r&&n.push(r)}for(e=0;e<n.length;e++)g.push(n[e]);n=oa(n,b);S(!1);try{for(g=0;g<n.length;g++)n[g].run(b)}finally{S(!0)}}}clearUndo(){this.undoStack_.length=
0;this.redoStack_.length=0;sa()}addChangeListener(b){this.listeners.push(b);return b}removeChangeListener(b){ib(this.listeners,b)}fireChangeListener(b){if(b.recordUndo)for(this.undoStack_.push(b),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let e=0;e<this.listeners.length;e++)(0,this.listeners[e])(b)}getBlockById(b){return this.blockDB.get(b)||null}setBlockById(b,e){this.blockDB.set(b,e)}removeBlockById(b){this.blockDB.delete(b)}getCommentById(b){let e;
return null!=(e=this.commentDB.get(b))?e:null}allInputsFilled(b){const e=this.getTopBlocks(!1);for(let g=0;g<e.length;g++)if(!e[g].allInputsFilled(b))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new Fh(this)}getVariableMap(){return this.variableMap}setVariableMap(b){this.variableMap=b}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let b=null;const e=this.options.parentWorkspace;this.isFlyout?e&&e.options&&
(b=e.options.parentWorkspace):e&&(b=e);return b}static getById(b){return C(b)}static getAll(){return K()}};Ee.SCAN_ANGLE=3;var zl=class{constructor(b){this.parentWorkspace=b;this.sounds=new Map;this.lastSound_=null;this.muted=!1}dispose(){this.sounds.clear()}load(b,e){if(b.length){try{var g=new globalThis.Audio}catch(n){return}for(let n=0;n<b.length;n++){const r=b[n],w=r.match(/\.(\w+)$/);if(w&&g.canPlayType("audio/"+w[1])){var k=new globalThis.Audio(r);break}}k&&this.sounds.set(e,k)}}preload(){for(const b of this.sounds.values()){b.volume=
.01;const e=b.play();void 0!==e?e.then(b.pause).catch(function(){}):b.pause();if(yd||al)break}}play(b,e){if(!this.muted){var g=this.sounds.get(b);g?(b=new Date,null!==this.lastSound_&&100>b.getTime()-this.lastSound_.getTime()||(this.lastSound_=b,g=yd||tf?g:g.cloneNode(),g.volume=void 0===e?1:e,g.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(b,e)}}setMuted(b){this.muted=b}getMuted(){return this.muted}},bo=class{constructor(b){this.workspace=b;this.layers=new Map;if(b=b.getInjectionDiv())this.dragLayer=
this.createDragLayer(b);b=this.createLayer(50);la(b,"blocklyBlockCanvas");b=this.createLayer(100);la(b,"blocklyBubbleCanvas")}createDragLayer(b){const e=N(I.SVG,{"class":"blocklyBlockDragSurface",xmlns:Od,"xmlns:html":Pb,"xmlns:xlink":lb,version:"1.1"});b.append(e);return N(I.G,{},e)}translateLayers(b,e){b=`translate(${b.x}, ${b.y}) scale(${e})`;let g;null==(g=this.dragLayer)||g.setAttribute("transform",b);for(const [,k]of this.layers)k.setAttribute("transform",b)}moveToDragLayer(b){let e;null==(e=
this.dragLayer)||e.appendChild(b.getSvgRoot())}moveOffDragLayer(b,e){this.append(b,e)}append(b,e){this.layers.has(e)||this.createLayer(e);let g;null==(g=this.layers.get(e))||g.appendChild(b.getSvgRoot())}createLayer(b){const e=this.workspace.getSvgGroup(),g=N(I.G,{});let k=!1;const n=[...this.layers].sort((r,w)=>r[0]-w[0]);for(const [r,w]of n)if(b<r){e.insertBefore(g,w);k=!0;break}k||e.appendChild(g);this.layers.set(b,g);return g}hasLayer(b){return b===this.dragLayer||(new Set(this.layers.values())).has(b)}getBlockLayer(){return this.layers.get(50)}getBubbleLayer(){return this.layers.get(100)}},
Ab=class extends Ee{constructor(b){super(b);this.resizeHandlerWrapper=null;this.resizesEnabled=this.isVisible_=this.rendered=!0;this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0;this.dragDeltaXY=null;this.oldScale=this.scale=1;this.oldLeft=this.oldTop=0;this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null;this.inverseScreenCTMDirty=
!0;this.highlightedBlocks=[];this.toolboxCategoryCallbacks=new Map;this.flyoutButtonCallbacks=new Map;this.cachedParentSvg=null;this.keyboardAccessibilityMode=!1;this.topBoundedElements=[];this.dragTargetAreas=[];this.zoomControls_=this.layerManager=null;this.metricsManager=new (y(U.METRICS_MANAGER,b,!0))(this);this.getMetrics=b.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager);this.setMetrics=b.setMetrics||Ab.setTopLevelWorkspaceMetrics_;this.componentManager=new Ua;this.connectionDBList=
Dd.init(this.connectionChecker);this.audioManager=new zl(b.parentWorkspace);this.grid=this.options.gridPattern?new bh(this.options.gridPattern,b.gridOptions):null;this.markerManager=new we(this);Za&&dg&&this.registerToolboxCategoryCallback("VARIABLE",dg);Yc&&Zg&&this.registerToolboxCategoryCallback("VARIABLE_DYNAMIC",Zg);gb&&Xg&&(this.registerToolboxCategoryCallback("PROCEDURE",Xg),this.addChangeListener(gk));this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():
new xl(this,this.options.theme||xf);this.themeManager_.subscribeWorkspace(this);let e;this.renderer=ik(this.options.renderer||"geras",this.getTheme(),null!=(e=this.options.rendererOverrides)?e:void 0);this.cachedParentSvgSize=new Ja(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(b){this.metricsManager=b;this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(b){this.markerManager.setCursorSvg(b)}setMarkerSvg(b){this.markerManager.setMarkerSvg(b)}getMarker(b){return this.markerManager?
this.markerManager.getMarker(b):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(b){b||=xf;this.themeManager_.setTheme(b)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme());this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(e){return!!e.getStyleName()}));this.refreshToolboxSelection();this.toolbox_&&
this.toolbox_.refreshTheme();this.isVisible()&&this.setVisible(!0);const b=new (ja("theme_change"))(this.getTheme().name,this.id);ba(b)}updateBlockStyles_(b){for(let e=0,g;g=b[e];e++){const k=g.getStyleName();k&&g.setStyle(k)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const b=this.getParentSvg().getScreenCTM();b&&(this.inverseScreenCTM=b.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(b){let e=
0,g=0,k=1;if(this.getCanvas().contains(b)||this.getBubbleCanvas().contains(b))k=this.scale;do{const n=Pd(b);if(b===this.getCanvas()||b===this.getBubbleCanvas())k=1;e+=n.x*k;g+=n.y*k;b=b.parentNode}while(b&&b!==this.getParentSvg()&&b!==this.getInjectionDiv());return new Z(e,g)}getCachedParentSvgSize(){const b=this.cachedParentSvgSize;return new Ja(b.width,b.height)}getOriginOffsetInPixels(){return Sf(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let b=this.svgGroup_;for(;b;){if(-1!==(" "+
(b.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv=b;break}b=b.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(b){this.resizeHandlerWrapper=b}createDom(b,e){this.injectionDiv||(this.injectionDiv=null!=e?e:null);this.svgGroup_=N(I.G,{"class":"blocklyWorkspace"});b&&(this.svgBackground_=N(I.RECT,{height:"100%",width:"100%","class":b},this.svgGroup_),"blocklyMainBackground"===b&&this.grid?
this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill"));this.layerManager=new bo(this);this.svgBlockCanvas_=this.layerManager.getBlockLayer();this.svgBubbleCanvas_=this.layerManager.getBubbleLayer();this.isFlyout||(H(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),H(this.svgGroup_,"wheel",this,this.onMouseWheel_));
this.options.hasCategories&&(this.toolbox_=new (y(U.TOOLBOX,this.options,!0))(this));this.grid&&this.grid.update(this.scale);this.recordDragTargets();(b=y(U.CURSOR,this.options))&&this.markerManager.setCursor(new b);this.renderer.createDom(this.svgGroup_,this.getTheme());return this.svgGroup_}dispose(){this.rendered=!1;this.currentGesture_&&this.currentGesture_.cancel();this.svgGroup_&&Da(this.svgGroup_);this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null);this.flyout&&(this.flyout.dispose(),
this.flyout=null);this.trashcan&&(this.trashcan.dispose(),this.trashcan=null);this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null);this.zoomControls_&&this.zoomControls_.dispose();this.audioManager&&this.audioManager.dispose();this.grid&&(this.grid=null);this.renderer.dispose();this.markerManager&&this.markerManager.dispose();super.dispose();this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||
this.themeManager_.dispose());this.connectionDBList.length=0;this.toolboxCategoryCallbacks.clear();this.flyoutButtonCallbacks.clear();if(!this.options.parentWorkspace){const b=this.getParentSvg();b&&b.parentNode&&Da(b.parentNode)}this.resizeHandlerWrapper&&(ca(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null);this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=Ab.newTrashcan(this);const b=this.trashcan.createDom();
this.svgGroup_.insertBefore(b,this.getCanvas())}static newTrashcan(b){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts");}addZoomControls(){this.zoomControls_=new dl(this);const b=this.zoomControls_.createDom();this.svgGroup_.appendChild(b)}addFlyout(b){const e=new ub({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,
move:{scrollbars:!0}});e.toolboxPosition=this.options.toolboxPosition;this.flyout=this.horizontalLayout?new (y(U.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(e):new (y(U.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(e);this.flyout.autoClose=!1;this.flyout.getWorkspace().setVisible(!0);return this.flyout.createDom(b)}getFlyout(b){return this.flyout||b?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM();this.recordDragTargets()}resizeContents(){this.resizesEnabled&&
this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position();this.flyout&&this.flyout.position();const b=this.componentManager.getComponents(Ua.Capability.POSITIONABLE,!0),e=this.getMetricsManager().getUiMetrics(),g=[];for(let k=0,n;n=b[k];k++){n.position(e,g);const r=n.getBoundingRectangle();r&&g.push(r)}this.scrollbar&&this.scrollbar.resize();this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const b=vi();
Z.equals(this.lastRecordedPageScroll,b)||(this.lastRecordedPageScroll=b,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(b,e){const g=this.getParentSvg();null!=b&&(this.cachedParentSvgSize.width=b,g.setAttribute("data-cached-width",`${b}`));null!=e&&(this.cachedParentSvgSize.height=e,g.setAttribute("data-cached-height",`${e}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let b=
this.svgGroup_;for(;b;){if("svg"===b.tagName){this.cachedParentSvg=b;break}b=b.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(wa()){var b=this.scale,e=-this.scrollY,g=-this.scrollX;if(!(b===this.oldScale&&1>Math.abs(e-this.oldTop)&&1>Math.abs(g-this.oldLeft))){var k=new (ja(cd))(e,g,b,this.id,this.oldScale);this.oldScale=b;this.oldTop=e;this.oldLeft=g;ba(k)}}}translate(b,e){let g;null==(g=this.layerManager)||g.translateLayers(new Z(b,e),this.scale);let k;null==(k=this.grid)||
k.moveTo(b,e);this.maybeFireViewportChangeEvent()}getWidth(){const b=this.getMetrics();return b?b.viewWidth/this.scale:0}setVisible(b){this.isVisible_=b;this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(b),this.getFlyout()&&this.getFlyout().setContainerVisible(b),this.getParentSvg().style.display=b?"block":"none",this.toolbox_&&this.toolbox_.setVisible(b),b||this.hideChaff(!0))}render(){for(var b=this.getAllBlocks(!1),e=b.length-1;0<=e;e--)b[e].queueRender();if(this.currentGesture_)for(b=
this.currentGesture_.getInsertionMarkers(),e=0;e<b.length;e++)b[e].queueRender();id().then(()=>void this.markerManager.updateMarkers())}highlightBlock(b,e){if(void 0===e){for(let g=0,k;k=this.highlightedBlocks[g];g++)k.setHighlighted(!1);this.highlightedBlocks.length=0}if(b=b?this.getBlockById(b):null)(e=void 0===e||e)?-1===this.highlightedBlocks.indexOf(b)&&this.highlightedBlocks.push(b):ib(this.highlightedBlocks,b),b.setHighlighted(e)}paste(b){Na("Blockly.WorkspaceSvg.prototype.paste","v10","v11",
"Blockly.clipboard.paste");if(!this.rendered||!b.type&&!b.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const e=a.getGroup$$module$build$src$core$events$utils();e||a.setGroup$$module$build$src$core$events$utils(!0);let g;try{g=b.type?this.pasteBlock_(null,b):"comment"===b.tagName.toLowerCase()?this.pasteWorkspaceComment_(b):this.pasteBlock_(b,null)}finally{a.setGroup$$module$build$src$core$events$utils(e)}return g}pasteBlock_(b,e){a.disable$$module$build$src$core$events$utils();
let g;try{let k=0,n=0;if(b){g=Ec(b,this);let r;k=parseInt(null!=(r=b.getAttribute("x"))?r:"0");this.RTL&&(k=-k);let w;n=parseInt(null!=(w=b.getAttribute("y"))?w:"0")}else e&&(g=Fc(e,this),k=e.x||10,this.RTL&&(k=this.getWidth()-k),n=e.y||10);if(!isNaN(k)&&!isNaN(n)){let r;do{r=!1;const w=this.getAllBlocks(!1);for(let x=0,P;P=w[x];x++){const ea=P.getRelativeToSurfaceXY();if(1>=Math.abs(k-ea.x)&&1>=Math.abs(n-ea.y)){r=!0;break}}if(!r){const x=g.getConnections_(!1);for(let P=0,ea;ea=x[P];P++)if(ea.closest(a.config$$module$build$src$core$config.snapRadius,
new Z(k,n)).connection){r=!0;break}}r&&(k=this.RTL?k-a.config$$module$build$src$core$config.snapRadius:k+a.config$$module$build$src$core$config.snapRadius,n+=2*a.config$$module$build$src$core$config.snapRadius)}while(r);g.moveTo(new Z(k,n))}}finally{a.enable$$module$build$src$core$events$utils()}wa()&&!g.isShadow()&&ba(new (ja(a.CREATE$$module$build$src$core$events$utils))(g));g.select();return g}pasteWorkspaceComment_(b){a.disable$$module$build$src$core$events$utils();let e;try{e=Xa.fromXmlRendered(b,
this);let g,k=parseInt(null!=(g=b.getAttribute("x"))?g:"0"),n,r=parseInt(null!=(n=b.getAttribute("y"))?n:"0");isNaN(k)||isNaN(r)||(this.RTL&&(k=-k),e.moveBy(k+50,r+50))}finally{a.enable$$module$build$src$core$events$utils()}wa()&&Jb.fireCreateEvent(e);e.select();return e}refreshToolboxSelection(){const b=this.isFlyout?this.targetWorkspace:this;b&&!b.currentGesture_&&b.toolbox_&&b.toolbox_.getFlyout()&&b.toolbox_.refreshSelection()}renameVariableById(b,e){super.renameVariableById(b,e);this.refreshToolboxSelection()}deleteVariableById(b){super.deleteVariableById(b);
this.refreshToolboxSelection()}createVariable(b,e,g){b=super.createVariable(b,e,g);this.refreshToolboxSelection();return b}recordDragTargets(){const b=this.componentManager.getComponents(Ua.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let e=0,g;g=b[e];e++){const k=g.getClientRect();k&&this.dragTargetAreas.push({component:g,clientRect:k})}}newBlock(b,e){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts");}getDragTarget(b){for(let e=0,g;g=this.dragTargetAreas[e];e++)if(g.clientRect.contains(b.clientX,
b.clientY))return g.component;return null}onMouseDown_(b){const e=this.getGesture(b);e&&e.handleWsStart(b,this)}startDrag(b,e){b=db(b,this.getParentSvg(),this.getInverseScreenCTM());b.x/=this.scale;b.y/=this.scale;this.dragDeltaXY=Z.difference(e,b)}moveDrag(b){b=db(b,this.getParentSvg(),this.getInverseScreenCTM());b.x/=this.scale;b.y/=this.scale;return Z.sum(this.dragDeltaXY,b)}isDragging(){return null!==this.currentGesture_&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&
this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const b=!!this.scrollbar;return this.isMovable()&&(!b||b&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const b=!!this.scrollbar;
return this.isMovable()&&(!b||b&&this.scrollbar.canScrollVertically())}onMouseWheel_(b){if(cc.inProgress())b.preventDefault(),b.stopPropagation();else{var e=this.options.zoomOptions&&this.options.zoomOptions.wheel,g=this.options.moveOptions&&this.options.moveOptions.wheel;if(e||g){var k=Qe(b);if(Jf)var n=b.metaKey;e&&(b.ctrlKey||n||!g)?(k=-k.y/50,e=db(b,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(e.x,e.y,k)):(e=this.scrollX-k.x,g=this.scrollY-k.y,b.shiftKey&&!k.x&&(e=this.scrollX-k.y,
g=this.scrollY),this.scroll(e,g));b.preventDefault()}}}getBlocksBoundingBox(){const b=this.getTopBoundedElements();if(!b.length)return new Ga(0,0,0,0);const e=b[0].getBoundingRectangle();for(let k=1;k<b.length;k++){var g=b[k];g.isInsertionMarker&&g.isInsertionMarker()||(g=g.getBoundingRectangle(),g.top<e.top&&(e.top=g.top),g.bottom>e.bottom&&(e.bottom=g.bottom),g.left<e.left&&(e.left=g.left),g.right>e.right&&(e.right=g.right))}return e}cleanUp(){this.setResizesEnabled(!1);a.setGroup$$module$build$src$core$events$utils(!0);
const b=this.getTopBlocks(!0);let e=0;for(let g=0,k;k=b[g];g++){if(!k.isMovable())continue;const n=k.getRelativeToSurfaceXY();k.moveBy(-n.x,e-n.y,["cleanup"]);k.snapToGrid();e=k.getRelativeToSurfaceXY().y+k.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}a.setGroup$$module$build$src$core$events$utils(!1);this.setResizesEnabled(!0)}showContextMenu(b){if(!this.options.readOnly&&!this.isFlyout){var e=Ba.registry.getContextMenuOptions(Ba.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&
this.configureContextMenu(e,b);cf(b,e,this.RTL)}}updateToolbox(b){if(b=Uf(b)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Xf(b)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=b;this.toolbox_.render(b)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=b;this.flyout.show(b)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.");
}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(J(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(b,e,g){g=Math.pow(this.options.zoomOptions.scaleSpeed,g);const k=this.scale*g;if(this.scale!==k){k>this.options.zoomOptions.maxScale?g=this.options.zoomOptions.maxScale/this.scale:k<this.options.zoomOptions.minScale&&(g=this.options.zoomOptions.minScale/this.scale);var n=this.getCanvas().getCTM(),r=this.getParentSvg().createSVGPoint();r.x=b;r.y=e;r=r.matrixTransform(n.inverse());
b=r.x;e=r.y;n=n.translate(b*(1-g),e*(1-g)).scale(g);this.scrollX=n.e;this.scrollY=n.f;this.setScale(k)}}zoomCenter(b){var e=this.getMetrics();let g;this.flyout?(g=e.svgWidth?e.svgWidth/2:0,e=e.svgHeight?e.svgHeight/2:0):(g=e.viewWidth/2+e.absoluteLeft,e=e.viewHeight/2+e.absoluteTop);this.zoom(g,e,b)}zoomToFit(){if(this.isMovable()){var b=this.getMetrics(),e=b.viewWidth;b=b.viewHeight;var g=this.getBlocksBoundingBox(),k=g.right-g.left+40;g=g.bottom-g.top+40;if(k){this.flyout&&(this.horizontalLayout?
(b+=this.flyout.getHeight(),g+=this.flyout.getHeight()/this.scale):(e+=this.flyout.getWidth(),k+=this.flyout.getWidth()/this.scale));e/=k;b/=g;a.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(e,b)),this.scrollCenter()}finally{a.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){la(this.getCanvas(),"blocklyCanvasTransitioning");
la(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){za(this.getCanvas(),"blocklyCanvasTransitioning");za(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var b=this.getMetrics(),e=(b.scrollWidth-b.viewWidth)/2,g=(b.scrollHeight-b.viewHeight)/2;e=-e-b.scrollLeft;g=-g-b.scrollTop;this.scroll(e,g)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(b,e){if(this.isMovable()){var g=
b?this.getBlockById(b):null;if(g){b=g.getRelativeToSurfaceXY();g=e?{height:g.height,width:g.width}:g.getHeightWidth();var k=this.scale;e=(b.x+(this.RTL?-1:1)*g.width/2)*k;b=(b.y+g.height/2)*k;g=this.getMetrics();this.scroll(-(e-g.viewWidth/2),-(b-g.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(b){this.options.zoomOptions.maxScale&&b>this.options.zoomOptions.maxScale?b=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&
b<this.options.zoomOptions.minScale&&(b=this.options.zoomOptions.minScale);this.scale=b;this.hideChaff(!1);(b=this.getFlyout(!1))&&b.isVisible()&&(b.reflow(),this.recordDragTargets());this.grid&&this.grid.update(this.scale);b=this.getMetrics();this.scrollX-=b.absoluteLeft;this.scrollY-=b.absoluteTop;b.viewLeft+=b.absoluteLeft;b.viewTop+=b.absoluteTop;this.scroll(this.scrollX,this.scrollY);this.scrollbar&&(this.flyout?this.scrollbar.resizeView(b):this.scrollbar.resizeContent(b))}getScale(){return this.options.parentWorkspace?
this.options.parentWorkspace.getScale():this.scale}scroll(b,e){this.hideChaff(!0);const g=this.getMetrics();b=Math.min(b,-g.scrollLeft);e=Math.min(e,-g.scrollTop);const k=g.scrollTop+Math.max(0,g.scrollHeight-g.viewHeight);b=Math.max(b,-(g.scrollLeft+Math.max(0,g.scrollWidth-g.viewWidth)));e=Math.max(e,-k);this.scrollX=b;this.scrollY=e;this.scrollbar&&this.scrollbar.set(-(b+g.scrollLeft),-(e+g.scrollTop),!1);b+=g.absoluteLeft;e+=g.absoluteTop;this.translate(b,e)}getBlockById(b){return super.getBlockById(b)}getAllBlocks(b=
!1){return super.getAllBlocks(b)}getTopBlocks(b=!1){return super.getTopBlocks(b)}addTopBlock(b){this.addTopBoundedElement(b);super.addTopBlock(b)}removeTopBlock(b){this.removeTopBoundedElement(b);super.removeTopBlock(b)}addTopComment(b){this.addTopBoundedElement(b);super.addTopComment(b)}removeTopComment(b){this.removeTopBoundedElement(b);super.removeTopComment(b)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(b){this.topBoundedElements.push(b)}removeTopBoundedElement(b){ib(this.topBoundedElements,
b)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(b){const e=!this.resizesEnabled&&b;this.resizesEnabled=b;e&&this.resizeContents()}clear(){this.setResizesEnabled(!1);super.clear();this.topBoundedElements=[];this.setResizesEnabled(!0)}registerButtonCallback(b,e){if("function"!==typeof e)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(b,e)}getButtonCallback(b){let e;return null!=(e=this.flyoutButtonCallbacks.get(b))?e:null}removeButtonCallback(b){this.flyoutButtonCallbacks.delete(b)}registerToolboxCategoryCallback(b,
e){if("function"!==typeof e)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(b,e)}getToolboxCategoryCallback(b){return this.toolboxCategoryCallbacks.get(b)||null}removeToolboxCategoryCallback(b){this.toolboxCategoryCallbacks.delete(b)}getGesture(b){const e="pointerdown"===b.type,g=this.currentGesture_;return g?e&&g.hasStarted()?(console.warn("Tried to start the same gesture twice."),g.cancel(),null):g:e?this.currentGesture_=new cc(b,this):null}clearGesture(){this.currentGesture_=
null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(b=!1){pc();zb();Mb();this.hideComponents(b)}hideComponents(b=!1){this.getComponentManager().getComponents(Ua.Capability.AUTOHIDEABLE,!0).forEach(e=>e.autoHide(b))}static setTopLevelWorkspaceMetrics_(b){const e=this.getMetrics();"number"===typeof b.x&&(this.scrollX=-(e.scrollLeft+(e.scrollWidth-e.viewWidth)*b.x));"number"===typeof b.y&&(this.scrollY=
-(e.scrollTop+(e.scrollHeight-e.viewHeight)*b.y));this.translate(this.scrollX+e.absoluteLeft,this.scrollY+e.absoluteTop)}},Gh=class extends Qb{constructor(b,e){super(e);this.type="trashcan_open";this.isOpen=b}toJson(){const b=super.toJson();if(void 0===this.isOpen)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");b.isOpen=this.isOpen;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Gh);e.isOpen=b.isOpen;return e}};
d(U.EVENT,"trashcan_open",Gh);var Hh=class extends Rc{constructor(b){super(b);this.type=a.DELETE$$module$build$src$core$events$utils;if(b){if(b.getParent())throw Error("Connected blocks cannot be deleted.");b.isShadow()&&(this.recordUndo=!1);this.oldXml=Ye(b);this.ids=hb(b);this.wasShadow=b.isShadow();this.oldJson=$b(b,{addCoordinates:!0})}}toJson(){const b=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");
if(void 0===this.wasShadow)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");b.oldXml=Zb(this.oldXml);b.ids=this.ids;b.wasShadow=this.wasShadow;b.oldJson=this.oldJson;this.recordUndo||(b.recordUndo=this.recordUndo);return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Hh);e.oldXml=a.textToDom$$module$build$src$core$utils$xml(b.oldXml);
e.ids=b.ids;e.wasShadow=b.wasShadow||"shadow"===e.oldXml.tagName.toLowerCase();e.oldJson=b.oldJson;void 0!==b.recordUndo&&(e.recordUndo=b.recordUndo);return e}run(b){const e=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(b)for(b=0;b<this.ids.length;b++){const g=this.ids[b],k=e.getBlockById(g);
k?k.dispose(!1):g===this.blockId&&console.warn("Can't delete non-existent block: "+g)}else Fc(this.oldJson,e)}};d(U.EVENT,a.DELETE$$module$build$src$core$events$utils,Hh);var Gd=class{constructor(b,e,g){this.data=null;this.disposed=!1;this.hue_=null;this.colour_="#000000";this.styleName_="";this.suppressPrefixSuffix=!1;this.previousConnection=this.nextConnection=this.outputConnection=null;this.inputList=[];this.icons=[];this.disabled=!1;this.tooltip="";this.contextMenu=!0;this.parentBlock_=null;this.childBlocks_=
[];this.editable_=this.movable_=this.deletable_=!0;this.collapsed_=this.isShadow_=!1;this.outputShape_=null;this.isInsertionMarker_=this.disposing=!1;this.onchangeWrapper_=this.helpUrl=this.rendered=null;this.statementInputCount=0;this.workspace=b;this.id=g&&!b.getBlockById(g)?g:R();b.setBlockById(this.id,this);this.xy_=new Z(0,0);this.isInFlyout=b.isFlyout;this.isInMutator=b.isMutator;this.RTL=b.RTL;if(e){this.type=e;g=cb[e];if(!g||"object"!==typeof g)throw TypeError("Invalid block definition for type: "+
e);Object.assign(this,g)}b.addTopBlock(this);b.addTypedBlock(this);new.target===Gd&&this.doInit_()}doInit_(){const b=a.getGroup$$module$build$src$core$events$utils();b||a.setGroup$$module$build$src$core$events$utils(!0);const e=da();try{"function"===typeof this.init&&(S(!1),this.init(),S(e)),wa()&&ba(new (ja(a.CREATE$$module$build$src$core$events$utils))(this))}finally{a.setGroup$$module$build$src$core$events$utils(b),S(e)}this.inputsInlineDefault=this.inputsInline;"function"===typeof this.onchange&&
this.setOnChange(this.onchange)}dispose(b){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(b),wa()&&ba(new (ja(a.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal())}disposeInternal(){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=
!0,"function"===typeof this.destroy&&this.destroy(),this.childBlocks_.forEach(b=>b.disposeInternal()),this.inputList.forEach(b=>b.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(b=>b.dispose()),this.disposed=!0)}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(const b of this.inputList)for(const e of b.fieldRow)e.initModel&&e.initModel()}unplug(b){this.outputConnection&&this.unplugFromRow_(b);this.previousConnection&&this.unplugFromStack_(b)}unplugFromRow_(b){let e=
null,g;if(null==(g=this.outputConnection)?0:g.isConnected())e=this.outputConnection.targetConnection,this.outputConnection.disconnect();e&&b&&(b=this.getOnlyValueConnection_())&&b.isConnected()&&!b.targetBlock().isShadow()&&(b=b.targetConnection,null==b||b.disconnect(),this.workspace.connectionChecker.canConnect(b,e,!1)?e.connect(b):null==b||b.onFailedConnect(e))}getOnlyValueConnection_(){let b=null;for(let e=0;e<this.inputList.length;e++){const g=this.inputList[e].connection;if(g&&g.type===fa.INPUT_VALUE&&
g.targetConnection){if(b)return null;b=g}}return b}unplugFromStack_(b){let e=null;var g;if(null==(g=this.previousConnection)?0:g.isConnected())e=this.previousConnection.targetConnection,this.previousConnection.disconnect();g=this.getNextBlock();if(b&&g&&!g.isShadow()){let k,n;b=null!=(n=null==(k=this.nextConnection)?void 0:k.targetConnection)?n:null;null==b||b.disconnect();e&&this.workspace.connectionChecker.canConnect(e,b,!1)&&e.connect(b)}}getConnections_(b){b=[];this.outputConnection&&b.push(this.outputConnection);
this.previousConnection&&b.push(this.previousConnection);this.nextConnection&&b.push(this.nextConnection);for(let e=0,g;g=this.inputList[e];e++)g.connection&&b.push(g.connection);return b}lastConnectionInStack(b){let e=this.nextConnection;for(;e;){const g=e.targetBlock();if(!g||b&&g.isShadow())return e;e=g.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(b){for(let e=0,g;g=this.inputList[e];e++)if(g.connection&&g.connection.targetBlock()===b)return g;
return null}getSurroundParent(){let b=this,e;do if(e=b,b=b.getParent(),!b)return null;while(b.getNextBlock()===e);return b}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let b,e=this;do b=e,e=b.parentBlock_;while(e);return b}getTopStackBlock(){let b=this,e;do e=b.getPreviousBlock();while(e&&e.getNextBlock()===b&&(b=e));return b}getChildren(b){if(!b)return this.childBlocks_;
b=[];for(let g=0,k;k=this.inputList[g];g++)if(k.connection){var e=k.connection.targetBlock();e&&b.push(e)}(e=this.getNextBlock())&&b.push(e);return b}setParent(b){if(b!==this.parentBlock_){var e=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),g=!!e;if(g&&b&&e!==b)throw Error("Block connected to superior one that is not new parent.");if(!g&&b)throw Error("Block not connected to new parent.");if(g&&!b)throw Error("Cannot set parent to null while block is still connected to superior block.");
this.parentBlock_?ib(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this);(this.parentBlock_=b)?b.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(b){const e=[this],g=this.getChildren(b);for(let k,n=0;k=g[n];n++)e.push(...k.getDescendants(b));return e}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(b){this.deletable_=b}isMovable(){return this.movable_&&
!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(b){this.movable_=b}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(Y(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(b){this.isShadow_=b}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(b){this.isInsertionMarker_=b}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(b){this.editable_=
b;for(let e=0,g;g=this.inputList[e];e++)for(let k=0,n;n=g.fieldRow[k];k++)n.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const b of this.inputList)if(b.connection||1<b.fieldRow.length)return!1;return!0}getMatchingConnection(b,e){const g=this.getConnections_(!0);b=b.getConnections_(!0);if(g.length!==b.length)throw Error("Connection lists did not match in length.");for(let k=0;k<b.length;k++)if(b[k]===e)return g[k];return null}setHelpUrl(b){this.helpUrl=
b}setTooltip(b){this.tooltip=b}getTooltip(){return ge(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(b){b=ke(b);this.hue_=b.hue;this.colour_=b.hex}setStyle(b){this.styleName_=b}setOnChange(b){if(b&&"function"!==typeof b)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_);this.onchange=b;this.onchangeWrapper_=b.bind(this);this.workspace.addChangeListener(this.onchangeWrapper_)}getField(b){if("string"!==
typeof b)throw TypeError("Block.prototype.getField expects a string with the field name but received "+(void 0===b?"nothing":b+" of type "+typeof b)+" instead");for(let e=0,g;g=this.inputList[e];e++)for(let k=0,n;n=g.fieldRow[k];k++)if(n.name===b)return n;return null}getVars(){const b=[];for(let e=0,g;g=this.inputList[e];e++)for(let k=0,n;n=g.fieldRow[k];k++)n.referencesVariables()&&b.push(n.getValue());return b}getVarModels(){const b=[];for(let e=0,g;g=this.inputList[e];e++)for(let k=0,n;n=g.fieldRow[k];k++)if(n.referencesVariables()){const r=
this.workspace.getVariableById(n.getValue());r&&b.push(r)}return b}updateVarName(b){for(let e=0,g;g=this.inputList[e];e++)for(let k=0,n;n=g.fieldRow[k];k++)n.referencesVariables()&&b.getId()===n.getValue()&&n.refreshVariableName()}renameVarById(b,e){for(let g=0,k;k=this.inputList[g];g++)for(let n=0,r;r=k.fieldRow[n];n++)r.referencesVariables()&&b===r.getValue()&&r.setValue(e)}getFieldValue(b){return(b=this.getField(b))?b.getValue():null}setFieldValue(b,e){const g=this.getField(e);if(!g)throw Error('Field "'+
e+'" not found.');g.setValue(b)}setPreviousStatement(b,e){if(b)void 0===e&&(e=null),this.previousConnection||(this.previousConnection=this.makeConnection_(fa.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(e);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose();this.previousConnection=null}}setNextStatement(b,e){if(b)void 0===e&&(e=null),this.nextConnection||(this.nextConnection=
this.makeConnection_(fa.NEXT_STATEMENT)),this.nextConnection.setCheck(e);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose();this.nextConnection=null}}setOutput(b,e){if(b)void 0===e&&(e=null),this.outputConnection||(this.outputConnection=this.makeConnection_(fa.OUTPUT_VALUE)),this.outputConnection.setCheck(e);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");
this.outputConnection.dispose();this.outputConnection=null}}setInputsInline(b){this.inputsInline!==b&&(ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,b)),this.inputsInline=b)}getInputsInline(){if(void 0!==this.inputsInline)return this.inputsInline;for(var b=1;b<this.inputList.length;b++)if(this.inputList[b-1]instanceof Ub&&this.inputList[b]instanceof Ub)return!1;for(b=1;b<this.inputList.length;b++)if(this.inputList[b-1]instanceof a.ValueInput$$module$build$src$core$inputs$value_input&&
this.inputList[b]instanceof Ub)return!0;for(b=0;b<this.inputList.length;b++)if(this.inputList[b]instanceof jc)return!0;return!1}setOutputShape(b){this.outputShape_=b}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(b){if(this.isEnabled()!==b){const e=this.disabled;this.disabled=!b;ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,e,!b))}}getInheritedDisabled(){let b=this.getSurroundParent();for(;b;){if(b.disabled)return!0;b=b.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(b){this.collapsed_!==
b&&(ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,b)),this.collapsed_=b)}toString(b,e){e=this.toTokens(e);for(let k=2;k<e.length;k++)"("===e[k-2]&&")"===e[k]&&(e[k-2]=e[k-1],e.splice(k-1,2));let g="";e=e.reduce((k,n)=>{k=k+("("===g||")"===n?"":" ")+n;g=n[n.length-1];return k},"");e=e.trim()||"???";b&&e.length>b&&(e=e.substring(0,b-3)+"...");return e}toTokens(b="?"){const e=[];for(const k of this.inputList)if("_TEMP_COLLAPSED_INPUT"!=k.name){for(const n of k.fieldRow)e.push(n.getText());
if(k.connection){const n=k.connection.targetBlock();if(n){var g=k.connection;let r=g.getCheck();!r&&g.targetConnection&&(r=g.targetConnection.getCheck());(g=!!r&&(-1!==r.indexOf("Boolean")||-1!==r.indexOf("Number")))&&e.push("(");e.push(...n.toTokens(b));g&&e.push(")")}else e.push(b)}}return e}appendValueInput(b){return this.appendInput(new a.ValueInput$$module$build$src$core$inputs$value_input(b,this))}appendStatementInput(b){this.statementInputCount++;return this.appendInput(new pb(b,this))}appendDummyInput(b=
""){return this.appendInput(new Ub(b,this))}appendEndRowInput(b=""){return this.appendInput(new jc(b,this))}appendInput(b){this.inputList.push(b);return b}appendInputFromRegistry(b,e){return(b=p(U.INPUT,b,!1))?this.appendInput(new b(e,this)):null}jsonInit(b){var e=b.type?'Block "'+b.type+'": ':"";if(b.output&&b.previousStatement)throw Error(e+"Must not have both an output and a previousStatement.");for(var g=0;b["args"+g];){if(void 0===b["message"+g])throw Error(e+`args${g} must have a corresponding message (message${g}).`);
g++}b.style&&b.style.hat&&(this.hat=b.style.hat,b.style=null);if(b.style&&b.colour)throw Error(e+"Must not have both a colour and a style.");b.style?this.jsonInitStyle_(b,e):this.jsonInitColour_(b,e);for(g=0;void 0!==b["message"+g];)this.interpolate_(b["message"+g],b["args"+g]||[],b["implicitAlign"+g]||b["lastDummyAlign"+g],e),g++;void 0!==b.inputsInline&&(a.disable$$module$build$src$core$events$utils(),this.setInputsInline(b.inputsInline),a.enable$$module$build$src$core$events$utils());void 0!==
b.output&&this.setOutput(!0,b.output);void 0!==b.outputShape&&this.setOutputShape(b.outputShape);void 0!==b.previousStatement&&this.setPreviousStatement(!0,b.previousStatement);void 0!==b.nextStatement&&this.setNextStatement(!0,b.nextStatement);void 0!==b.tooltip&&(g=Ra(b.tooltip),this.setTooltip(g));void 0!==b.enableContextMenu&&(this.contextMenu=!!b.enableContextMenu);void 0!==b.suppressPrefixSuffix&&(this.suppressPrefixSuffix=!!b.suppressPrefixSuffix);void 0!==b.helpUrl&&(g=Ra(b.helpUrl),this.setHelpUrl(g));
"string"===typeof b.extensions&&(console.warn(e+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+b.type+"' block."),b.extensions=[b.extensions]);void 0!==b.mutator&&Ug(b.mutator,this,!0);b=b.extensions;if(Array.isArray(b))for(e=0;e<b.length;e++)Ug(b[e],this,!1)}jsonInitColour_(b,e){if("colour"in b)if(void 0===b.colour)console.warn(e+"Undefined colour value.");else{b=b.colour;try{this.setColour(b)}catch(g){console.warn(e+"Illegal colour value: ",b)}}}jsonInitStyle_(b,
e){b=b.style;try{this.setStyle(b)}catch(g){console.warn(e+"Style does not exist: ",b)}}mixin(b,e){if(void 0!==e&&"boolean"!==typeof e)throw Error("opt_disableCheck must be a boolean if provided");if(!e){e=[];for(const g in b)void 0!==this[g]&&e.push(g);if(e.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(e));}Object.assign(this,b)}interpolate_(b,e,g,k){b=Wj(b);this.validateTokens_(b,e.length);e=this.interpolateArguments_(b,e,g);g=[];for(let n=0,r;r=e[n];n++)if(this.isInputKeyword_(r.type)){if(b=
this.inputFromJson_(r,k)){for(let w=0,x;x=g[w];w++)b.appendField(x[0],x[1]);g.length=0}}else(b=this.fieldFromJson_(r))&&g.push([b,r.name])}validateTokens_(b,e){const g=[];let k=0;for(let n=0;n<b.length;n++){const r=b[n];if("number"===typeof r){if(1>r||r>e)throw Error('Block "'+this.type+'": Message index %'+r+" out of range.");if(g[r])throw Error('Block "'+this.type+'": Message index %'+r+" duplicated.");g[r]=!0;k++}}if(k!==e)throw Error('Block "'+this.type+'": Message does not reference all '+e+
" arg(s).");}interpolateArguments_(b,e,g){const k=[];for(let r=0;r<b.length;r++){var n=b[r];"number"===typeof n&&(n=e[n-1]);if("string"===typeof n)if("\n"===n)n={type:"input_end_row"},g&&(n.align=g);else if(n=this.stringToFieldJson_(n),!n)continue;k.push(n)}(b=k.length)&&!this.isInputKeyword_(k[b-1].type)&&(b={type:"input_dummy"},g&&(b.align=g),k.push(b));return k}fieldFromJson_(b){const e=a.fromJson$$module$build$src$core$field_registry(b);return!e&&b.alt?"string"===typeof b.alt?(b=this.stringToFieldJson_(b.alt))?
this.fieldFromJson_(b):null:this.fieldFromJson_(b.alt):e}inputFromJson_(b,e){var g={LEFT:a.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:a.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:a.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:a.Align$$module$build$src$core$inputs$align.CENTRE};let k;switch(b.type){case "input_value":k=this.appendValueInput(b.name);break;case "input_statement":k=this.appendStatementInput(b.name);break;case "input_dummy":k=this.appendDummyInput(b.name);
break;case "input_end_row":k=this.appendEndRowInput(b.name);break;default:k=this.appendInputFromRegistry(b.type,b.name)}if(!k)return null;b.check&&k.setCheck(b.check);b.align&&(g=g[b.align.toUpperCase()],void 0===g?console.warn(e+"Illegal align value: ",b.align):k.setAlign(g));return k}isInputKeyword_(b){return"input_value"===b||"input_statement"===b||"input_dummy"===b||"input_end_row"===b||m(U.INPUT,b)}stringToFieldJson_(b){return(b=b.trim())?{type:"field_label",text:b}:null}moveInputBefore(b,e){if(b!==
e){var g=-1,k=e?-1:this.inputList.length;for(let n=0,r;r=this.inputList[n];n++)if(r.name===b){if(g=n,-1!==k)break}else if(e&&r.name===e&&(k=n,-1!==g))break;if(-1===g)throw Error('Named input "'+b+'" not found.');if(-1===k)throw Error('Reference input "'+e+'" not found.');this.moveNumberedInputBefore(g,k)}}moveNumberedInputBefore(b,e){if(b===e)throw Error("Can't move input to itself.");if(b>=this.inputList.length)throw RangeError("Input index "+b+" out of bounds.");if(e>this.inputList.length)throw RangeError("Reference input "+
e+" out of bounds.");const g=this.inputList[b];this.inputList.splice(b,1);b<e&&e--;this.inputList.splice(e,0,g)}removeInput(b,e){for(let g=0,k;k=this.inputList[g];g++)if(k.name===b)return k instanceof pb&&this.statementInputCount--,k.dispose(),this.inputList.splice(g,1),!0;if(e)return!1;throw Error("Input not found: "+b);}getInput(b){for(let e=0,g;g=this.inputList[e];e++)if(g.name===b)return g;return null}getInputTargetBlock(b){return(b=this.getInput(b))&&b.connection&&b.connection.targetBlock()}getCommentText(){let b,
e;return null!=(e=null==(b=this.getIcon(ab.TYPE))?void 0:b.getText())?e:null}setCommentText(b){var e;let g;const k=null!=(g=null==(e=this.getIcon(ab.TYPE))?void 0:e.getText())?g:null;k!==b&&(null!==b?((e=this.getIcon(ab.TYPE))||(e=this.addIcon(new ab(this))),a.disable$$module$build$src$core$events$utils(),e.setText(b),a.enable$$module$build$src$core$events$utils()):this.removeIcon(ab.TYPE),ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,k,b)))}setWarningText(b,e){}setMutator(b){}addIcon(b){if(this.hasIcon(b.getType()))throw new ql(b);
this.icons.push(b);this.icons.sort((e,g)=>e.getWeight()-g.getWeight());return b}removeIcon(b){if(!this.hasIcon(b))return!1;let e;null==(e=this.getIcon(b))||e.dispose();this.icons=this.icons.filter(g=>!g.getType().equals(b));return!0}hasIcon(b){return this.icons.some(e=>e.getType().equals(b))}getIcon(b){return b instanceof eb?this.icons.find(e=>e.getType().equals(b)):this.icons.find(e=>e.getType().toString()===b)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(b,e,
g){if(this.parentBlock_)throw Error("Block has parent");const k=new (ja(a.MOVE$$module$build$src$core$events$utils))(this);g&&k.setReason(g);this.xy_.translate(b,e);k.recordNew();ba(k)}makeConnection_(b){return new va(this,b)}allInputsFilled(b){void 0===b&&(b=!0);if(!b&&this.isShadow())return!1;for(let g=0,k;k=this.inputList[g];g++)if(k.connection){var e=k.connection.targetBlock();if(!e||!e.allInputsFilled(b))return!1}return(e=this.getNextBlock())?e.allInputsFilled(b):!0}toDevString(){let b=this.type?
'"'+this.type+'" block':"Block";this.id&&(b+=' (id="'+this.id+'")');return b}};Gd.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT";Gd.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD";var Al=class{constructor(){this.drawer=this.curNode=this.colour=null;this.type="marker"}setDrawer(b){this.drawer=b}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(b){const e=this.curNode;this.curNode=b;this.drawer&&this.drawer.draw(e,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&
this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},Ih=class extends Al{constructor(){super();this.type="cursor"}next(){var b=this.getCurNode();if(!b)return null;for(b=b.next();b&&b.next()&&(b.getType()===T.types.NEXT||b.getType()===T.types.BLOCK);)b=b.next();b&&this.setCurNode(b);return b}in(){var b=this.getCurNode();if(!b)return null;if(b.getType()===T.types.PREVIOUS||b.getType()===T.types.OUTPUT)b=b.next();let e,g;(b=null!=(g=null==(e=b)?void 0:e.in())?g:null)&&this.setCurNode(b);
return b}prev(){var b=this.getCurNode();if(!b)return null;for(b=b.prev();b&&b.prev()&&(b.getType()===T.types.NEXT||b.getType()===T.types.BLOCK);)b=b.prev();b&&this.setCurNode(b);return b}out(){var b=this.getCurNode();if(!b)return null;(b=b.out())&&b.getType()===T.types.BLOCK&&(b=b.prev()||b);b&&this.setCurNode(b);return b}};d(U.CURSOR,Gb,Ih);var Fe=class extends Ih{constructor(){super()}next(){var b=this.getCurNode();if(!b)return null;(b=this.getNextNode_(b,this.validNode_))&&this.setCurNode(b);return b}in(){return this.next()}prev(){var b=
this.getCurNode();if(!b)return null;(b=this.getPreviousNode_(b,this.validNode_))&&this.setCurNode(b);return b}out(){return this.prev()}getNextNode_(b,e){if(!b)return null;const g=b.in()||b.next();if(e(g))return g;if(g)return this.getNextNode_(g,e);b=this.findSiblingOrParent(b.out());return e(b)?b:b?this.getNextNode_(b,e):null}getPreviousNode_(b,e){if(!b)return null;let g=b.prev();g=g?this.getRightMostChild(g):b.out();return e(g)?g:g?this.getPreviousNode_(g,e):null}validNode_(b){let e=!1;b=b&&b.getType();
if(b===T.types.OUTPUT||b===T.types.INPUT||b===T.types.FIELD||b===T.types.NEXT||b===T.types.PREVIOUS||b===T.types.WORKSPACE)e=!0;return e}findSiblingOrParent(b){if(!b)return null;const e=b.next();return e?e:this.findSiblingOrParent(b.out())}getRightMostChild(b){if(!b.in())return b;for(b=b.in();b&&b.next();)b=b.next();return this.getRightMostChild(b)}};Fe.registrationName="basicCursor";d(U.CURSOR,Fe.registrationName,Fe);var Bl=class extends Fe{validNode_(b){let e=!1;const g=b&&b.getType();b&&(b=b.getLocation(),
g===T.types.FIELD&&b&&b.isTabNavigable()&&b.isClickable()&&(e=!0));return e}},qb=class extends va{constructor(b,e){super(b,e);this.highlighted=!1;this.targetConnection=null;this.db=b.workspace.connectionDBList[e];this.dbOpposite=b.workspace.connectionDBList[Tc[e]];this.offsetInBlock=new Z(0,0);this.trackedState=qb.TrackedState.WILL_TRACK}dispose(){super.dispose();this.trackedState===qb.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let b,e;null==(e=(b=this.sourceBlock_.pathObject).removeConnectionHighlight)||
e.call(b,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(b){const e=this.x-b.x;b=this.y-b.y;return Math.sqrt(e*e+b*b)}bumpAwayFrom(b){if(!this.sourceBlock_.workspace.isDragging()){var e=this.sourceBlock_.getRootBlock();if(!e.isInFlyout){var g=!1;if(!e.isMovable()){e=b.getSourceBlock().getRootBlock();if(!e.isMovable())return;b=this;g=!0}var k=z()==e;k||e.addSelect();var n=b.x+a.config$$module$build$src$core$config.snapRadius+Math.floor(10*
Math.random())-this.x,r=b.y+a.config$$module$build$src$core$config.snapRadius+Math.floor(10*Math.random())-this.y;g&&(r=-r);e.RTL&&(n=b.x-a.config$$module$build$src$core$config.snapRadius-Math.floor(10*Math.random())-this.x);e.moveBy(n,r,["bump"]);k||e.removeSelect()}}}moveTo(b,e){let g=!1;this.trackedState===qb.TrackedState.WILL_TRACK?(this.db.addConnection(this,e),this.trackedState=qb.TrackedState.TRACKED,g=!0):this.trackedState===qb.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),
this.db.addConnection(this,e),g=!0);this.x=b;this.y=e;return g}moveBy(b,e){return this.moveTo(this.x+b,this.y+e)}moveToOffset(b){return this.moveTo(b.x+this.offsetInBlock.x,b.y+this.offsetInBlock.y)}setOffsetInBlock(b,e){this.offsetInBlock.x=b;this.offsetInBlock.y=e}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var b=this.targetConnection;const e=this.targetBlock();b&&e&&(b=Z.difference(this.offsetInBlock,b.offsetInBlock),e.translate(b.x,b.y))}closest(b,e){return this.dbOpposite.searchForClosest(this,
b,e)}highlight(){this.highlighted=!0;this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1;this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(b){b&&this.trackedState===qb.TrackedState.TRACKED||!b&&this.trackedState===qb.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(b?(this.db.addConnection(this,this.y),this.trackedState=qb.TrackedState.TRACKED):(this.trackedState===qb.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=
qb.TrackedState.UNTRACKED))}stopTrackingAll(){this.setTracking(!1);if(this.targetConnection){const b=this.targetBlock().getDescendants(!1);for(let e=0;e<b.length;e++){const g=b[e],k=g.getConnections_(!0);for(let n=0;n<k.length;n++)k[n].setTracking(!1);for(const n of g.getIcons())Jc(n)&&n.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let b=[];if(this.type!==fa.INPUT_VALUE&&this.type!==fa.NEXT_STATEMENT)return b;const e=this.targetBlock();if(e){let g;e.isCollapsed()?(g=[],e.outputConnection&&
g.push(e.outputConnection),e.nextConnection&&g.push(e.nextConnection),e.previousConnection&&g.push(e.previousConnection)):g=e.getConnections_(!0);for(let k=0;k<g.length;k++)b.push(...g[k].startTrackingAll());b.length||(b=[e])}return b}onFailedConnect(b){const e=this.getSourceBlock();if(da()){const g=a.getGroup$$module$build$src$core$events$utils();setTimeout(function(){e.isDisposed()||e.getParent()||(a.setGroup$$module$build$src$core$events$utils(g),this.bumpAwayFrom(b),a.setGroup$$module$build$src$core$events$utils(!1))}.bind(this),
a.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(b=!0){const {parentConnection:e,childConnection:g}=this.getParentAndChildConnections();if(e&&g){var k=e.getSourceBlock(),n=g.getSourceBlock();super.disconnectInternal(b);k.rendered&&k.queueRender();n.rendered&&(n.updateDisabled(),n.queueRender(),n.getSvgRoot().style.display="block")}}respawnShadow_(){super.respawnShadow_();const b=this.targetBlock();b&&(b.initSvg(),b.queueRender())}neighbours(b){return this.dbOpposite.getNeighbours(this,
b)}connect_(b){super.connect_(b);var e=this.getSourceBlock();b=b.getSourceBlock();const g=e.rendered,k=b.rendered;g&&e.updateDisabled();k&&b.updateDisabled();g&&k&&(this.type===fa.NEXT_STATEMENT||this.type===fa.PREVIOUS_STATEMENT?b.queueRender():e.queueRender());if(e=e.getInputWithBlock(b))e=e.isVisible(),b.getSvgRoot().style.display=e?"block":"none"}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?
this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}setCheck(b){super.setCheck(b);this.sourceBlock_.rendered&&this.sourceBlock_.queueRender();return this}};(function(b){b=b.TrackedState||(b.TrackedState={});b[b.WILL_TRACK=-1]="WILL_TRACK";b[b.UNTRACKED=0]="UNTRACKED";b[b.TRACKED=1]="TRACKED"})(qb||={});var Ob=class extends Gd{constructor(b,e,g){super(b,e,g);this.width=this.height=0;this.warningTextDb=new Map;this.warning=this.mutator=null;this.eventsInit_=this.renderIsInProgress_=
this.visuallyDisabled=this.rendered=!1;this.translation="";this.bumpNeighboursPid=0;this.dragging=!1;this.relativeCoords=new Z(0,0);this.workspace=b;this.svgGroup_=N(I.G,{});this.style=b.getRenderer().getConstants().getBlockStyle(null);this.pathObject=b.getRenderer().makePathObject(this.svgGroup_,this.style);b=this.pathObject.svgPath;b.tooltip=this;he(b);this.svgGroup_.setAttribute("data-id",this.id);this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let e=
0,g;g=this.inputList[e];e++)g.init();for(var b of this.getIcons())b.initView(this.createIconPointerDownListener(b)),b.updateEditable();this.applyColour();this.pathObject.updateMovable(this.isMovable());b=this.getSvgRoot();this.workspace.options.readOnly||this.eventsInit_||!b||H(b,"pointerdown",this,this.onMouseDown_);this.eventsInit_=!0;b.parentNode||this.workspace.getCanvas().appendChild(b)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&
this.getParent())this.getParent().select();else if(z()!==this){var b=null;if(z()){b=z().id;a.disable$$module$build$src$core$events$utils();try{z().unselect()}finally{a.enable$$module$build$src$core$events$utils()}}b=new (ja("selected"))(b,this.id,this.workspace.id);ba(b);B(this);this.addSelect()}}unselect(){if(z()===this){var b=new (ja("selected"))(this.id,null,this.workspace.id);b.workspaceId=this.workspace.id;ba(b);B(null);this.removeSelect()}}setParent(b){const e=this.parentBlock_;if(b!==e){ed();
super.setParent(b);fd();var g=this.getSvgRoot();if(!this.workspace.isClearing&&g){var k=this.getRelativeToSurfaceXY();b?b.getSvgRoot().appendChild(g):e&&((b=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(g,b):this.workspace.getCanvas().appendChild(g),this.translate(k.x,k.y));this.applyColour()}}}getRelativeToSurfaceXY(){const b=this.workspace.getLayerManager();if(!b)throw Error("Cannot calculate position because the workspace has not been appended");
let e=0,g=0,k=this.getSvgRoot();if(k){do{const n=Pd(k);e+=n.x;g+=n.y;k=k.parentNode}while(k&&!b.hasLayer(k))}return new Z(e,g)}moveBy(b,e,g){if(this.parentBlock_)throw Error("Block has parent");const k=wa();let n=null;k&&(n=new (ja(a.MOVE$$module$build$src$core$events$utils))(this),g&&n.setReason(g));b=new Z(b,e);e=this.getRelativeToSurfaceXY();b=Z.sum(e,b);this.translate(b.x,b.y);this.updateComponentLocations(b);k&&n&&(n.recordNew(),ba(n));this.workspace.resizeContents()}translate(b,e){this.translation=
`translate(${b}, ${e})`;this.relativeCoords=new Z(b,e);this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(b,e){const g=this.getRelativeToSurfaceXY();this.moveBy(b.x-g.x,b.y-g.y,e)}moveDuringDrag(b){this.translate(b.x,b.y);this.getSvgRoot().setAttribute("transform",this.getTranslation());this.updateComponentLocations(b)}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var b=this.workspace.getGrid();
if(b&&b.shouldSnap()){var e=b.getSpacing(),g=e/2,k=this.getRelativeToSurfaceXY();b=Math.round(Math.round((k.x-g)/e)*e+g-k.x);e=Math.round(Math.round((k.y-g)/e)*e+g-k.y);(b||e)&&this.moveBy(b,e,["snap"])}}}getBoundingRectangle(){const b=this.getRelativeToSurfaceXY(),e=this.getHeightWidth();let g,k;this.RTL?(g=b.x-e.width,k=b.x):(g=b.x,k=b.x+e.width);return new Ga(b.y,b.y+e.height,g,k)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let b=0,e;e=this.inputList[b];b++)e.markDirty()}setCollapsed(b){this.collapsed_!==
b&&(super.setCollapsed(b),this.updateCollapsed_())}updateCollapsed_(){var b=this.isCollapsed();for(let g=0,k;k=this.inputList[g];g++)"_TEMP_COLLAPSED_INPUT"!==k.name&&k.setVisible(!b);for(var e of this.getIcons())e.updateCollapsed();b?(b=this.toString(30),(e=this.getField("_TEMP_COLLAPSED_FIELD"))?e.setValue(b):(this.getInput("_TEMP_COLLAPSED_INPUT")||this.appendDummyInput("_TEMP_COLLAPSED_INPUT")).appendField(new Xc(b),"_TEMP_COLLAPSED_FIELD")):(this.updateDisabled(),this.removeInput("_TEMP_COLLAPSED_INPUT"))}tab(b,
e){const g=new Bl;g.setCurNode(T.createFieldNode(b));b=g.getCurNode();e?g.next():g.prev();(e=g.getCurNode())&&e!==b&&(e.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(e))}onMouseDown_(b){const e=this.workspace.getGesture(b);e&&e.handleBlockStart(b,this)}showHelp(){const b="function"===typeof this.helpUrl?this.helpUrl():this.helpUrl;b&&window.open(b)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const b=
Ba.registry.getContextMenuOptions(Ba.ScopeType.BLOCK,{block:this});this.customContextMenu&&this.customContextMenu(b);return b}showContextMenu(b){const e=this.generateContextMenu();e&&e.length&&(cf(b,e,this.RTL),hj(this))}updateComponentLocations(b){if(this.rendered){this.dragging||this.updateConnectionLocations(b);this.updateIconLocations(b);this.updateFieldLocations(b);for(const e of this.getChildren(!1))e.updateComponentLocations(Z.sum(b,e.relativeCoords))}}updateConnectionLocations(b){for(const e of this.getConnections_(!1))e.moveToOffset(b)}updateIconLocations(b){for(const e of this.getIcons())e.onLocationChange(b)}updateFieldLocations(b){for(const e of this.inputList)for(const g of e.fieldRow)g.onLocationChange(b)}setDragging(b){(this.dragging=
b)?(this.translation="",zd.push(...this.getConnections_(!0)),la(this.svgGroup_,"blocklyDragging")):(zd.length=0,za(this.svgGroup_,"blocklyDragging"));for(let e=0;e<this.childBlocks_.length;e++)this.childBlocks_[e].setDragging(b)}setMovable(b){super.setMovable(b);this.pathObject.updateMovable(b)}setEditable(b){super.setEditable(b);b=this.getIcons();for(let e=0;e<b.length;e++)b[e].updateEditable()}setShadow(b){super.setShadow(b);this.applyColour()}setInsertionMarker(b){this.isInsertionMarker_!==b&&
(this.isInsertionMarker_=b)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(b,e){this.isDeadOrDying()||(Oj(),bf(),e&&this.rendered&&(this.unplug(b),Cj(this)),super.dispose(!!b),Da(this.svgGroup_))}disposeInternal(){this.isDeadOrDying()||(super.disposeInternal(),this.rendered=!1,z()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(b=>
clearTimeout(b)),this.warningTextDb.clear(),this.getIcons().forEach(b=>b.dispose()))}checkAndDelete(){this.workspace.isFlyout||(a.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),a.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:te.TYPE,blockState:$b(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:Y(this,!0)}}applyColour(){this.pathObject.applyColour(this);
const b=this.getIcons();for(let e=0;e<b.length;e++)b[e].applyColour();for(let e=0,g;g=this.inputList[e];e++)for(let k=0,n;n=g.fieldRow[k];k++)n.applyColour()}updateDisabled(){const b=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===b){let e;null==(e=this.getNextBlock())||e.updateDisabled()}else{this.applyColour();this.visuallyDisabled=b;for(const e of this.getChildren(!1))e.updateDisabled()}}getCommentIcon(){Na("getCommentIcon","v10","v11","getIcon");let b;return null!=(b=
this.getIcon(ab.TYPE))?b:null}setWarningText(b,e=""){if(e)this.warningTextDb.has(e)&&(clearTimeout(this.warningTextDb.get(e)),this.warningTextDb.delete(e));else{for(var g of this.warningTextDb.values())clearTimeout(g);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(e,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(e),this.setWarningText(b,e))},100));else if(this.isInFlyout&&(b=null),g=this.getIcon(Cb.TYPE),b){let k=this.getSurroundParent(),n=null;
for(;k;)k.isCollapsed()&&(n=k),k=k.getSurroundParent();n&&n.setWarningText(a.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Ob.COLLAPSED_WARNING_ID);g?g.addMessage(b,e):this.addIcon((new Cb(this)).addMessage(b,e))}else g&&(e?(g.addMessage("",e),g.getText()||this.removeIcon(Cb.TYPE)):this.removeIcon(Cb.TYPE))}setMutator(b){this.removeIcon(a.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);b&&this.addIcon(b)}addIcon(b){super.addIcon(b);b instanceof Cb&&(this.warning=b);b instanceof
a.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=b);this.rendered&&(b.initView(this.createIconPointerDownListener(b)),b.applyColour(),b.updateEditable(),this.queueRender(),Ib(),this.bumpNeighbours());return b}createIconPointerDownListener(b){return e=>{this.isDeadOrDying()||(e=this.workspace.getGesture(e))&&e.setStartIcon(b)}}removeIcon(b){const e=super.removeIcon(b);b.equals(Cb.TYPE)&&(this.warning=null);b.equals(a.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&
(this.mutator=null);this.rendered&&(this.queueRender(),Ib(),this.bumpNeighbours());return e}setEnabled(b){this.isEnabled()!==b&&(super.setEnabled(b),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(b){this.rendered&&this.pathObject.updateHighlighted(b)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(b){this.pathObject.updateDraggingDelete(b)}getColour(){return this.style.colourPrimary}setColour(b){super.setColour(b);
b=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_);this.pathObject.setStyle(b.style);this.style=b.style;this.styleName_=b.name;this.applyColour()}setStyle(b){const e=this.workspace.getRenderer().getConstants().getBlockStyle(b);this.styleName_=b;if(e)this.hat=e.hat,this.pathObject.setStyle(e),this.colour_=e.colourPrimary,this.style=e,this.applyColour();else throw Error("Invalid style name: "+b);}bringToFront(b=!1){let e=this;if(!e.isDeadOrDying()){do{const g=e.getSvgRoot(),
k=g.parentNode,n=k.childNodes;n[n.length-1]!==g&&k.appendChild(g);if(b)break;e=e.getParent()}while(e)}}setPreviousStatement(b,e){super.setPreviousStatement(b,e);this.rendered&&(this.queueRender(),this.bumpNeighbours())}setNextStatement(b,e){super.setNextStatement(b,e);this.rendered&&(this.queueRender(),this.bumpNeighbours())}setOutput(b,e){super.setOutput(b,e);this.rendered&&(this.queueRender(),this.bumpNeighbours())}setInputsInline(b){super.setInputsInline(b);this.rendered&&(this.queueRender(),this.bumpNeighbours())}removeInput(b,
e){b=super.removeInput(b,e);this.rendered&&(this.queueRender(),this.bumpNeighbours());return b}moveNumberedInputBefore(b,e){super.moveNumberedInputBefore(b,e);this.rendered&&(this.queueRender(),this.bumpNeighbours())}appendInput(b){super.appendInput(b);this.rendered&&(this.queueRender(),this.bumpNeighbours());return b}setConnectionTracking(b){this.previousConnection&&this.previousConnection.setTracking(b);this.outputConnection&&this.outputConnection.setTracking(b);if(this.nextConnection){this.nextConnection.setTracking(b);
var e=this.nextConnection.targetBlock();e&&e.setConnectionTracking(b)}if(!this.collapsed_)for(e=0;e<this.inputList.length;e++){var g=this.inputList[e].connection;g&&(g.setTracking(b),(g=g.targetBlock())&&g.setConnectionTracking(b))}}getConnections_(b){const e=[];if(b||this.rendered)if(this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection),b||!this.collapsed_)for(let g=0,k;k=this.inputList[g];g++)k.connection&&
e.push(k.connection);return e}lastConnectionInStack(b){return super.lastConnectionInStack(b)}getMatchingConnection(b,e){return super.getMatchingConnection(b,e)}makeConnection_(b){return new qb(this,b)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.bumpNeighboursPid){var b=a.getGroup$$module$build$src$core$events$utils();this.bumpNeighboursPid=setTimeout(()=>{const e=a.getGroup$$module$build$src$core$events$utils();a.setGroup$$module$build$src$core$events$utils(b);
this.getRootBlock().bumpNeighboursInternal();a.setGroup$$module$build$src$core$events$utils(e);this.bumpNeighboursPid=0},a.config$$module$build$src$core$config.bumpDelay)}}bumpNeighboursInternal(){const b=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||b.isInFlyout))for(const e of this.getConnections_(!1)){if(e.isSuperior()){let g;null==(g=e.targetBlock())||g.bumpNeighboursInternal()}for(const g of e.neighbours(a.config$$module$build$src$core$config.snapRadius))g.getSourceBlock().getRootBlock()!==
b&&(e.isConnected()&&g.isConnected()||(e.isSuperior()?g.bumpAwayFrom(e):e.bumpAwayFrom(g)))}}scheduleSnapAndBump(){const b=a.getGroup$$module$build$src$core$events$utils();setTimeout(()=>{a.setGroup$$module$build$src$core$events$utils(b);this.snapToGrid();a.setGroup$$module$build$src$core$events$utils(!1)},a.config$$module$build$src$core$config.bumpDelay/2);this.bumpNeighbours()}positionNearConnection(b,e,g){if(b.type===fa.NEXT_STATEMENT||b.type===fa.INPUT_VALUE){let k=e.x;e=e.y;k+=g.x-b.getOffsetInBlock().x;
e+=g.y-b.getOffsetInBlock().y;this.moveBy(k,e)}}getChildren(b){return super.getChildren(b)}queueRender(){return Mi(this)}render(){this.queueRender();Ib()}renderEfficiently(){this.rendered=!0;ed();this.isCollapsed()&&this.updateCollapsed_();this.isEnabled()||this.updateDisabled();this.workspace.getRenderer().render(this);this.tightenChildrenEfficiently();fd();this.updateMarkers_()}tightenChildrenEfficiently(){for(const b of this.inputList){const e=b.connection;e&&e.tightenEfficiently()}this.nextConnection&&
this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw();this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(we.LOCAL_MARKER).draw();for(const b of this.inputList)for(const e of b.fieldRow)e.updateMarkers_()}setCursorSvg(b){this.pathObject.setCursorSvg(b)}setMarkerSvg(b){this.pathObject.setMarkerSvg(b)}getHeightWidth(){let b=this.height,e=this.width;var g=
this.getNextBlock();if(g){g=g.getHeightWidth();const k=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;b+=g.height-k;e=Math.max(e,g.width)}return{height:b,width:e}}fadeForReplacement(b){this.pathObject.updateReplacementFade(b)}highlightShapeForInput(b,e){this.pathObject.updateShapeForInputHighlight(b,e)}};Ob.INLINE=-1;Ob.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Cl=class{constructor(){}onDragEnter(b){}onDragOver(b){}onDragExit(b){}onDrop(b){}getClientRect(){return null}shouldPreventMove(b){return!1}},
Df=class extends Cl{constructor(){super();this.wouldDelete_=!1}wouldDelete(b,e){b instanceof Ob?(b=!b.getParent()&&b.isDeletable(),this.updateWouldDelete_(b&&!e)):this.updateWouldDelete_(b.isDeletable());return this.wouldDelete_}updateWouldDelete_(b){this.wouldDelete_=b}},Gl=class extends Df{constructor(b){super();this.workspace=b;this.id="trashcan";this.contents=[];this.flyout=null;this.isLidOpen=!1;this.minOpenness=0;this.lidTask=this.svgLid=this.svgGroup=null;this.top=this.left=this.lidOpen=0;
this.initialized=!1;0>=this.workspace.options.maxTrashcanContents||(b=new ub({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(b.toolboxPosition=this.workspace.toolboxPosition===pa.TOP?pa.BOTTOM:pa.TOP,this.flyout=new (y(U.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(b)):
(b.toolboxPosition=this.workspace.toolboxPosition===pa.RIGHT?pa.LEFT:pa.RIGHT,this.flyout=new (y(U.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(b)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=N(I.G,{"class":"blocklyTrash"});let b;const e=String(Math.random()).substring(2);b=N(I.CLIPPATH,{id:"blocklyTrashBodyClipPath"+e},this.svgGroup);N(I.RECT,{width:Hd,height:Ef,y:Id},b);const g=N(I.IMAGE,{width:96,x:-Jh,height:124,y:-Kh,"clip-path":"url(#blocklyTrashBodyClipPath"+
e+")"},this.svgGroup);g.setAttributeNS(lb,"xlink:href",this.workspace.options.pathToMedia+"sprites.png");b=N(I.CLIPPATH,{id:"blocklyTrashLidClipPath"+e},this.svgGroup);N(I.RECT,{width:Hd,height:Id},b);this.svgLid=N(I.IMAGE,{width:96,x:-Jh,height:124,y:-Kh,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup);this.svgLid.setAttributeNS(lb,"xlink:href",this.workspace.options.pathToMedia+"sprites.png");V(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable);V(this.svgGroup,"pointerup",
this,this.click);V(g,"pointerover",this,this.mouseOver);V(g,"pointerout",this,this.mouseOut);this.animateLid();return this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(dd(this.flyout.createDom(I.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace));this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ua.Capability.AUTOHIDEABLE,Ua.Capability.DELETE_AREA,Ua.Capability.DRAG_TARGET,Ua.Capability.POSITIONABLE]});this.initialized=!0;
this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan");this.svgGroup&&Da(this.svgGroup);this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var b=this.contents.map(function(g){return JSON.parse(g)}),e=this.workspace.getParentSvg().style;e.cursor="wait";setTimeout(()=>{let g;null==(g=this.flyout)||g.show(b);e.cursor="";let k;null==
(k=this.workspace.scrollbar)||k.setVisible(!1)},10);this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var b;null==(b=this.flyout)||b.hide();var e;null==(e=this.workspace.scrollbar)||e.setVisible(!0);this.fireUiEvent(!1);this.workspace.recordDragTargets()}}autoHide(b){!b&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(b,e){if(this.initialized){var g=$f(this.workspace,b);b=Zf(g,new Ja(Hd,Ef+
Id),co,Dl,b,this.workspace);e=ag(b,Dl,g.vertical===mc.TOP?Cc.DOWN:Cc.UP,e);this.top=e.top;this.left=e.left;var k;null==(k=this.svgGroup)||k.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new Ga(this.top,this.top+Ef+Id,this.left,this.left+Hd)}getClientRect(){if(!this.svgGroup)return null;var b=this.svgGroup.getBoundingClientRect();const e=b.top+Kh-Ff;b=b.left+Jh-Ff;return new Ga(e,e+Id+Ef+2*Ff,b,b+Hd+2*Ff)}onDragOver(b){this.setLidOpen(this.wouldDelete_)}onDragExit(b){this.setLidOpen(!1)}onDrop(b){setTimeout(this.setLidOpen.bind(this,
!1),100)}setLidOpen(b){this.isLidOpen!==b&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=b,this.animateLid())}animateLid(){const b=eo;var e=1/(b+1);this.lidOpen+=this.isLidOpen?e:-e;this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1);this.setLidAngle(this.lidOpen*El);e=Fl+this.lidOpen*(fo-Fl);this.svgGroup&&(this.svgGroup.style.opacity=`${e}`);this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),go/b))}setLidAngle(b){const e=this.workspace.toolboxPosition===
pa.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let g;null==(g=this.svgLid)||g.setAttribute("transform","rotate("+(e?-b:b)+","+(e?4:Hd-4)+","+(Id-2)+")")}setMinOpenness(b){this.minOpenness=b;this.isLidOpen||this.setLidAngle(b*El)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(b){b=new (ja("trashcan_open"))(b,this.workspace.id);ba(b)}blockMouseDownWhenOpenable(b){!this.contentsIsOpen()&&this.hasContents()&&b.stopPropagation()}mouseOver(){this.hasContents()&&
this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(b){if(!(0>=this.workspace.options.maxTrashcanContents||b.type!==a.DELETE$$module$build$src$core$events$utils||b.type!==a.DELETE$$module$build$src$core$events$utils||b.wasShadow)){if(!b.oldJson)throw Error("Encountered a delete event without proper oldJson");b=JSON.stringify(this.cleanBlockJson(b.oldJson));if(-1===this.contents.indexOf(b)){for(this.contents.unshift(b);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();
this.setMinOpenness(ho)}}}cleanBlockJson(b){function e(g){if(g){delete g.id;delete g.x;delete g.y;delete g.enabled;if(g.icons&&g.icons.comment){var k=g.icons.comment;delete k.height;delete k.width;delete k.pinned}k=g.inputs;for(var n in k){var r=k[n];const w=r.block;r=r.shadow;w&&e(w);r&&e(r)}g.next&&(n=g.next,g=n.block,n=n.shadow,g&&e(g),n&&e(n))}}b=JSON.parse(JSON.stringify(b));e(b);return Object.assign({},{kind:"BLOCK"},b)}},Hd=47,Ef=44,Id=16,Dl=20,co=20,Ff=10,Jh=0,Kh=32,ho=.1,go=80,eo=4,Fl=1,
fo=1,El=45,Aa=class{constructor(){this.shortcuts=new Map;this.keyMap=new Map;this.reset()}reset(){this.shortcuts.clear();this.keyMap.clear()}register(b,e){if(this.shortcuts.get(b.name)&&!e)throw Error(`Shortcut named "${b.name}" already exists.`);this.shortcuts.set(b.name,b);if((e=b.keyCodes)&&0<e.length)for(let g=0;g<e.length;g++)this.addKeyMapping(e[g],b.name,!!b.allowCollision)}unregister(b){if(!this.shortcuts.get(b))return console.warn(`Keyboard shortcut named "${b}" not found.`),!1;this.removeAllKeyMappings(b);
this.shortcuts.delete(b);return!0}addKeyMapping(b,e,g){b=`${b}`;const k=this.keyMap.get(b);if(k&&!g)throw Error(`Shortcut named "${e}" collides with shortcuts "${k}"`);k&&g?k.unshift(e):this.keyMap.set(b,[e])}removeKeyMapping(b,e,g){const k=this.keyMap.get(b);if(!k)return g||console.warn(`No keyboard shortcut named "${e}" registered with key code "${b}"`),!1;const n=k.indexOf(e);if(-1<n)return k.splice(n,1),0===k.length&&this.keyMap.delete(b),!0;g||console.warn(`No keyboard shortcut named "${e}" registered with key code "${b}"`);
return!1}removeAllKeyMappings(b){for(const e of this.keyMap.keys())this.removeKeyMapping(e,b,!0)}setKeyMap(b){this.keyMap.clear();for(const e in b)this.keyMap.set(e,b[e])}getKeyMap(){const b=Object.create(null);for(const [e,g]of this.keyMap)b[e]=g;return b}getRegistry(){const b=Object.create(null);for(const [e,g]of this.shortcuts)b[e]=g;return qc(Object.create(null),b)}onKeyDown(b,e){var g=this.serializeKeyEvent_(e);g=this.getShortcutNamesByKeyCode(g);if(!g)return!1;for(let k=0,n;n=g[k];k++){const r=
this.shortcuts.get(n);let w,x;if(null==(w=r)||!w.preconditionFn||(null==(x=r)?0:x.preconditionFn(b))){let P,ea;if((null==(P=r)?0:P.callback)&&(null==(ea=r)?0:ea.callback(b,e,r)))return!0}}return!1}getShortcutNamesByKeyCode(b){return this.keyMap.get(b)||[]}getKeyCodesByShortcutName(b){const e=[];for(const [g,k]of this.keyMap)-1<k.indexOf(b)&&e.push(g);return e}serializeKeyEvent_(b){let e="";for(const g in Aa.modifierKeys)b.getModifierState(g)&&(""!==e&&(e+="+"),e+=g);""!==e&&b.keyCode?e=e+"+"+b.keyCode:
b.keyCode&&(e=String(b.keyCode));return e}checkModifiers_(b){for(let e=0,g;g=b[e];e++)if(!(g in Aa.modifierKeys))throw Error(g+" is not a valid modifier key.");}createSerializedKey(b,e){let g="";if(e){this.checkModifiers_(e);for(const k in Aa.modifierKeys)-1<e.indexOf(Aa.modifierKeys[k])&&(""!==g&&(g+="+"),g+=k)}""!==g&&b?g=g+"+"+b:b&&(g=`${b}`);return g}};Aa.registry=new Aa;(function(b){b=b.modifierKeys||(b.modifierKeys={});b[b.Shift=16]="Shift";b[b.Control=17]="Control";b[b.Alt=18]="Alt";b[b.Meta=
91]="Meta"})(Aa||={});var bc;(function(b){b.ESCAPE="escape";b.DELETE="delete";b.COPY="copy";b.CUT="cut";b.PASTE="paste";b.UNDO="undo";b.REDO="redo"})(bc||={});var ne=null,of=null;uk();var Wb={};Wb.names=bc;Wb.registerCopy=pk;Wb.registerCut=qk;Wb.registerDefaultShortcuts=uk;Wb.registerDelete=ok;Wb.registerEscape=nk;Wb.registerPaste=rk;Wb.registerRedo=tk;Wb.registerUndo=sk;var Ge={ProcedureSerializer:class{constructor(b,e){this.procedureModelClass=b;this.parameterModelClass=e;this.priority=75}save(b){b=
b.getProcedureMap().getProcedures().map(e=>wk(e));return b.length?b:null}load(b,e){const g=e.getProcedureMap();for(const k of b)g.add(yk(this.procedureModelClass,this.parameterModelClass,k,e))}clear(b){b.getProcedureMap().clear()}}};Ge.loadParameter=xk;Ge.loadProcedure=yk;Ge.saveParameter=vk;Ge.saveProcedure=wk;var Hl=class{constructor(){this.priority=100}save(b){const e=[];for(const g of b.getAllVariables())b={name:g.name,id:g.getId()},g.type&&(b.type=g.type),e.push(b);return e.length?e:null}load(b,
e){for(const g of b)e.createVariable(g.name,g.type,g.id)}clear(b){b.getVariableMap().clear()}};og("variables",new Hl);var Il={};Il.VariableSerializer=Hl;var io={blocks:se,exceptions:Qc,priorities:{BLOCKS:50,PROCEDURES:75,VARIABLES:100},procedures:Ge,registry:nh,variables:Il,workspaces:{load:function(b,e,{recordUndo:g=!1}={}){var k=u(U.SERIALIZER,!0);if(k){k=Object.entries(k).sort((r,w)=>w[1].priority-r[1].priority);var n=da();S(g);(g=a.getGroup$$module$build$src$core$events$utils())||a.setGroup$$module$build$src$core$events$utils(!0);
ed();e instanceof Ab&&e.setResizesEnabled(!1);for(const [,r]of k.reverse()){let w;null==(w=r)||w.clear(e)}for(let [r,w]of k.reverse())if(b[r]){let x;null==(x=w)||x.load(b[r],e)}e instanceof Ab&&e.setResizesEnabled(!0);fd();ba(new (ja(Wd))(e));a.setGroup$$module$build$src$core$events$utils(g);S(n)}},save:function(b){const e=Object.create(null),g=u(U.SERIALIZER,!0);for(const k in g){let n;const r=null==(n=g[k])?void 0:n.save(b);r&&(e[k]=r)}return e}}},ch=class{constructor(b,e,g,k,n){this.workspace=
b;this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null;e=void 0===e?!0:e;g=void 0===g?!0:g;const r=e&&g;e&&(this.hScroll=new Qa(b,!0,r,k,n));g&&(this.vScroll=new Qa(b,!1,r,k,n));r&&(this.corner_=N(I.RECT,{height:Qa.scrollbarThickness,width:Qa.scrollbarThickness,"class":"blocklyScrollbarBackground"}),dd(this.corner_,b.getBubbleCanvas()))}dispose(){Da(this.corner_);this.oldHostMetrics_=this.corner_=null;this.hScroll&&(this.hScroll.dispose(),this.hScroll=null);this.vScroll&&(this.vScroll.dispose(),
this.vScroll=null)}resize(){const b=this.workspace.getMetrics();if(b){var e=!1,g=!1;this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===b.viewWidth&&this.oldHostMetrics_.viewHeight===b.viewHeight&&this.oldHostMetrics_.absoluteTop===b.absoluteTop&&this.oldHostMetrics_.absoluteLeft===b.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===b.scrollWidth&&this.oldHostMetrics_.viewLeft===b.viewLeft&&this.oldHostMetrics_.scrollLeft===b.scrollLeft||(e=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===
b.scrollHeight&&this.oldHostMetrics_.viewTop===b.viewTop&&this.oldHostMetrics_.scrollTop===b.scrollTop||(g=!0)):g=e=!0;if(e||g){try{a.disable$$module$build$src$core$events$utils(),this.hScroll&&e&&this.hScroll.resize(b),this.vScroll&&g&&this.vScroll.resize(b)}finally{a.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==b.viewWidth||this.oldHostMetrics_.absoluteLeft!==b.absoluteLeft){let k;
null==(k=this.corner_)||k.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==b.viewHeight||this.oldHostMetrics_.absoluteTop!==b.absoluteTop){let k;null==(k=this.corner_)||k.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=b}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(b,e){this.hScroll&&this.hScroll.setOrigin(b,e);this.vScroll&&this.vScroll.setOrigin(b,e)}set(b,e,
g){this.hScroll&&this.hScroll.set(b,!1);this.vScroll&&this.vScroll.set(e,!1);if(g||void 0===g)b={},this.hScroll&&(b.x=this.hScroll.getRatio_()),this.vScroll&&(b.y=this.vScroll.getRatio_()),this.workspace.setMetrics(b)}setX(b){this.hScroll&&this.hScroll.set(b,!0)}setY(b){this.vScroll&&this.vScroll.set(b,!0)}setContainerVisible(b){this.hScroll&&this.hScroll.setContainerVisible(b);this.vScroll&&this.vScroll.setContainerVisible(b)}isVisible(){let b=!1;this.hScroll&&(b=this.hScroll.isVisible());this.vScroll&&
(b=b||this.vScroll.isVisible());return b}setVisible(b){this.hScroll&&this.hScroll.setVisibleInternal(b);this.vScroll&&this.vScroll.setVisibleInternal(b)}resizeContent(b){this.hScroll&&this.hScroll.resizeContentHorizontal(b);this.vScroll&&this.vScroll.resizeContentVertical(b)}resizeView(b){this.hScroll&&this.hScroll.resizeViewHorizontal(b);this.vScroll&&this.vScroll.resizeViewVertical(b)}},Lh=class{constructor(b){this.workspace_=b}getDimensionsPx_(b){let e=0,g=0;b&&(e=b.getWidth(),g=b.getHeight());
return new Ja(e,g)}getFlyoutMetrics(b){b=this.getDimensionsPx_(this.workspace_.getFlyout(b));return{width:b.width,height:b.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const b=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:b.width,height:b.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let b=0,e=0;const g=this.getToolboxMetrics(),k=this.getFlyoutMetrics(),n=!!this.workspace_.getToolbox();
var r;const w=!(null==(r=this.workspace_.getFlyout())?0:r.autoClose);r=n?g.position:k.position;const x=r===pa.TOP;r===pa.LEFT&&(n&&(b+=g.width),w&&(b+=k.width));x&&(n&&(e+=g.height),w&&(e+=k.height));return{top:e,left:b}}getViewMetrics(b){b=b?this.workspace_.scale:1;const e=this.getSvgMetrics(),g=this.getToolboxMetrics(),k=this.getFlyoutMetrics(),n=!!this.workspace_.getToolbox();var r;const w=!(null==(r=this.workspace_.getFlyout())?0:r.autoClose);r=n?g.position:k.position;const x=r===pa.LEFT||r===
pa.RIGHT;if(r===pa.TOP||r===pa.BOTTOM)n&&(e.height-=g.height),w&&(e.height-=k.height);x&&(n&&(e.width-=g.width),w&&(e.width-=k.width));return{height:e.height/b,width:e.width/b,top:-this.workspace_.scrollY/b,left:-this.workspace_.scrollX/b}}getContentMetrics(b){b=b?1:this.workspace_.scale;const e=this.workspace_.getBlocksBoundingBox();return{height:(e.bottom-e.top)*b,width:(e.right-e.left)*b,top:e.top*b,left:e.left*b}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(b){if(!this.hasFixedEdges())return{};
const e=this.workspace_.isMovableHorizontally(),g=this.workspace_.isMovableVertically();b=b||this.getViewMetrics(!1);const k={};g||(k.top=b.top,k.bottom=b.top+b.height);e||(k.left=b.left,k.right=b.left+b.width);return k}getPaddedContent_(b,e){const g=e.top+e.height,k=e.left+e.width,n=b.width;b=b.height;const r=n/2,w=b/2;return{top:Math.min(e.top-w,g-b),bottom:Math.max(g+w,e.top+b),left:Math.min(e.left-r,k-n),right:Math.max(k+r,e.left+n)}}getScrollMetrics(b,e,g){b=b?this.workspace_.scale:1;e=e||this.getViewMetrics(!1);
var k=g||this.getContentMetrics();g=this.getComputedFixedEdges_(e);e=this.getPaddedContent_(e,k);k=void 0!==g.top?g.top:e.top;const n=void 0!==g.left?g.left:e.left;return{top:k/b,left:n/b,width:((void 0!==g.right?g.right:e.right)-n)/b,height:((void 0!==g.bottom?g.bottom:e.bottom)-k)/b}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const b=this.getToolboxMetrics(),e=this.getFlyoutMetrics(!0),g=
this.getSvgMetrics(),k=this.getAbsoluteMetrics(),n=this.getViewMetrics(),r=this.getContentMetrics(),w=this.getScrollMetrics(!1,n,r);return{contentHeight:r.height,contentWidth:r.width,contentTop:r.top,contentLeft:r.left,scrollHeight:w.height,scrollWidth:w.width,scrollTop:w.top,scrollLeft:w.left,viewHeight:n.height,viewWidth:n.width,viewTop:n.top,viewLeft:n.left,absoluteTop:k.top,absoluteLeft:k.left,svgHeight:g.height,svgWidth:g.width,toolboxWidth:b.width,toolboxHeight:b.height,toolboxPosition:b.position,
flyoutWidth:e.width,flyoutHeight:e.height}}};d(U.METRICS_MANAGER,Gb,Lh);var Jl=class extends Ad{constructor(b){super();this.isBlank=!0;this.recordUndo=!1;this.type=Wd;this.isBlank=!!b;b&&(this.workspaceId=b.id)}};d(U.EVENT,Wd,Jl);var Mh=class extends Qb{constructor(b,e,g){super(b?b.workspace.id:void 0);this.type="drag";b&&(this.blockId=b.id,this.isStart=e,this.blocks=g)}toJson(){const b=super.toJson();if(void 0===this.isStart)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");
if(void 0===this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");b.isStart=this.isStart;b.blockId=this.blockId;b.blocks=this.blocks;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Mh);e.isStart=b.isStart;e.blockId=b.blockId;e.blocks=b.blocks;return e}};d(U.EVENT,"drag",Mh);var Gf={};Gf.bumpIntoBounds=oe;Gf.bumpIntoBoundsHandler=Ak;Gf.bumpTopObjectsIntoBounds=$g;var Kl=class{constructor(b,e){this.connectionCandidate=this.dragTarget_=
null;this.wouldDeleteBlock_=!1;this.startChildConn=this.startParentConn=null;this.dragIconData_=[];this.draggingBlock_=b;this.workspace_=e;this.connectionPreviewer=new (y(U.CONNECTION_PREVIEWER,this.workspace_.options))(b);this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY();this.dragIconData_=Bk(b,this.startXY_)}dispose(){this.dragIconData_.length=0;this.connectionPreviewer.dispose()}startDrag(b,e){a.getGroup$$module$build$src$core$events$utils()||a.setGroup$$module$build$src$core$events$utils(!0);
this.fireDragStartEvent_();this.draggingBlock_.bringToFront(!0);ed();this.workspace_.setResizesEnabled(!1);ee();if(this.shouldDisconnect_(e)){let k,n,r;this.startParentConn=null!=(r=null==(k=this.draggingBlock_.outputConnection)?void 0:k.targetConnection)?r:null==(n=this.draggingBlock_.previousConnection)?void 0:n.targetConnection;if(e){let w;this.startChildConn=null==(w=this.draggingBlock_.nextConnection)?void 0:w.targetConnection}this.disconnectBlock_(e,b)}this.draggingBlock_.setDragging(!0);let g;
null==(g=this.workspace_.getLayerManager())||g.moveToDragLayer(this.draggingBlock_)}shouldDisconnect_(b){return!!(this.draggingBlock_.getParent()||b&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(b,e){this.draggingBlock_.unplug(b);b=this.pixelsToWorkspaceUnits_(e);b=Z.sum(this.startXY_,b);this.draggingBlock_.translate(b.x,b.y);Ej(this.draggingBlock_)}fireDragStartEvent_(){const b=new (ja("drag"))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));
ba(b)}drag(b,e){const g=this.draggingBlock_;this.moveBlock(g,e);this.updateDragTargets(b,g);this.wouldDeleteBlock_=this.wouldDeleteBlock(b,g,e);this.updateCursorDuringBlockDrag_();this.updateConnectionPreview(g,e)}moveBlock(b,e){e=this.pixelsToWorkspaceUnits_(e);e=Z.sum(this.startXY_,e);b.moveDuringDrag(e)}updateDragTargets(b,e){b=this.workspace_.getDragTarget(b);if(this.dragTarget_!==b){let g;null==(g=this.dragTarget_)||g.onDragExit(e);null==b||b.onDragEnter(e)}null==b||b.onDragOver(e);this.dragTarget_=
b}wouldDeleteBlock(b,e,g){return(b=this.workspace_.getDragTarget(b))&&this.workspace_.getComponentManager().hasCapability(b.id,Ua.Capability.DELETE_AREA)?b.wouldDelete(e,!!this.getConnectionCandidate(e,g)):!1}updateConnectionPreview(b,e){e=this.pixelsToWorkspaceUnits_(e);const g=this.connectionCandidate,k=this.getConnectionCandidate(b,e);if(k){this.connectionCandidate=e=g&&this.currCandidateIsBetter(g,e,k)?g:k;var {local:n,neighbour:r}=e;n.type!==fa.OUTPUT_VALUE&&n.type!==fa.PREVIOUS_STATEMENT||!r.isConnected()||
r.targetBlock().isInsertionMarker()||this.orphanCanConnectAtEnd(b,r.targetBlock(),n.type)?this.connectionPreviewer.previewConnection(n,r):this.connectionPreviewer.previewReplacement(n,r,r.targetBlock())}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(b,e,g){return!!va.getConnectionForOrphanedConnection(b,g===fa.OUTPUT_VALUE?e.outputConnection:e.previousConnection)}currCandidateIsBetter(b,e,g){const {local:k,neighbour:n}=b;b=new Z(k.x,k.y);const r=new Z(n.x,
n.y);e=Z.distance(Z.sum(b,e),r);return g.distance>e-a.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(b,e){b=this.getLocalConnections(b);let g=this.connectionCandidate?a.config$$module$build$src$core$config.connectingSnapRadius:a.config$$module$build$src$core$config.snapRadius,k=null;for(const n of b){const {connection:r,radius:w}=n.closest(g,e);r&&(k={local:n,neighbour:r,distance:w},g=w)}return k}getLocalConnections(b){const e=b.getConnections_(!1),g=b.lastConnectionInStack(!0);
g&&g!==b.nextConnection&&e.push(g);return e}endDrag(b,e){this.drag(b,e);this.fireDragEndEvent_();fd();ee();this.connectionPreviewer.hidePreview();b=!!this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_);let g=null;b||(g=this.getNewLocationAfterDrag_(e).delta);if(this.dragTarget_)this.dragTarget_.onDrop(this.draggingBlock_);if(!this.maybeDeleteBlock_()){let k;null==(k=this.workspace_.getLayerManager())||k.moveOffDragLayer(this.draggingBlock_,50);this.draggingBlock_.setDragging(!1);
b?this.moveToOriginalPosition():g&&this.updateBlockAfterMove_()}this.connectionPreviewer.dispose();this.workspace_.setResizesEnabled(!0);a.setGroup$$module$build$src$core$events$utils(!1)}moveToOriginalPosition(){let b;null==(b=this.startChildConn)||b.connect(this.draggingBlock_.nextConnection);if(this.startParentConn)switch(this.startParentConn.type){case fa.INPUT_VALUE:this.startParentConn.connect(this.draggingBlock_.outputConnection);break;case fa.NEXT_STATEMENT:this.startParentConn.connect(this.draggingBlock_.previousConnection)}else this.draggingBlock_.moveTo(this.startXY_,
["drag"]),oe(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)}getNewLocationAfterDrag_(b){b=this.pixelsToWorkspaceUnits_(b);const e=Z.sum(this.startXY_,b);return{delta:b,newLocation:e}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),zd.length=0,!0):!1}updateBlockAfterMove_(){this.fireMoveEvent_();this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.draggingBlock_.queueRender();
this.draggingBlock_.scheduleSnapAndBump()}applyConnections(b){const {local:e,neighbour:g}=b;e.connect(g);if(this.draggingBlock_.rendered){const k=e.isSuperior()?g:e,n=this.draggingBlock_.getRootBlock();id().then(()=>{Eg(k.getSourceBlock());setTimeout(()=>{n.bringToFront()},0)})}}fireDragEndEvent_(){const b=new (ja("drag"))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));ba(b)}updateToolboxStyle_(b){const e=this.workspace_.getToolbox();if(e){const g=this.draggingBlock_.isDeletable()?
"blocklyToolboxDelete":"blocklyToolboxGrab";b&&"function"===typeof e.removeStyle?e.removeStyle(g):b||"function"!==typeof e.addStyle||e.addStyle(g)}}fireMoveEvent_(){if(!this.draggingBlock_.isDeadOrDying()){var b=new (ja(a.MOVE$$module$build$src$core$events$utils))(this.draggingBlock_);b.setReason(["drag"]);b.oldCoordinate=this.startXY_;b.recordNew();ba(b)}}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(b){b=new Z(b.x/this.workspace_.scale,
b.y/this.workspace_.scale);this.workspace_.isMutator&&b.scale(1/this.workspace_.options.parentWorkspace.scale);return b}dragIcons_(){Na("Blockly.BlockDragger.prototype.dragIcons_","v10","v11")}getInsertionMarkers(){return this.workspace_.getAllBlocks().filter(b=>b.isInsertionMarker())}};d(U.BLOCK_DRAGGER,Gb,Kl);var He={};He.Bubble=ya;He.MiniWorkspaceBubble=gc;He.TextBubble=uh;He.TextInputBubble=pl;var Nh=class extends Rc{constructor(b,e,g,k){super(b);this.type=wd;this.recordUndo=!1;b&&(this.name=
e,this.oldValue=g,this.newValue=k)}toJson(){const b=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");b.name=this.name;b.oldValue=this.oldValue;b.newValue=this.newValue;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Nh);e.name=b.name;e.oldValue=b.oldValue;e.newValue=b.newValue;return e}isNull(){return this.oldValue===this.newValue}run(b){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");
e=e.getBlockById(this.blockId);if(!e)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");b=b?this.newValue:this.oldValue;(e=e.getField(this.name))?e.setValue(b):console.warn("Can't set non-existent field: "+this.name)}};d(U.EVENT,wd,Nh);var Oh=class extends Rc{constructor(b){super(b);this.type=a.MOVE$$module$build$src$core$events$utils;b&&(b.isShadow()&&(this.recordUndo=!1),b=this.currentLocation_(),this.oldParentId=b.parentId,this.oldInputName=
b.inputName,this.oldCoordinate=b.coordinate)}toJson(){const b=super.toJson();b.oldParentId=this.oldParentId;b.oldInputName=this.oldInputName;this.oldCoordinate&&(b.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, `+`${Math.round(this.oldCoordinate.y)}`);b.newParentId=this.newParentId;b.newInputName=this.newInputName;this.newCoordinate&&(b.newCoordinate=`${Math.round(this.newCoordinate.x)}, `+`${Math.round(this.newCoordinate.y)}`);this.reason&&(b.reason=this.reason);this.recordUndo||(b.recordUndo=
this.recordUndo);return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Oh);e.oldParentId=b.oldParentId;e.oldInputName=b.oldInputName;b.oldCoordinate&&(g=b.oldCoordinate.split(","),e.oldCoordinate=new Z(Number(g[0]),Number(g[1])));e.newParentId=b.newParentId;e.newInputName=b.newInputName;b.newCoordinate&&(g=b.newCoordinate.split(","),e.newCoordinate=new Z(Number(g[0]),Number(g[1])));void 0!==b.reason&&(e.reason=b.reason);void 0!==b.recordUndo&&(e.recordUndo=b.recordUndo);return e}recordNew(){const b=
this.currentLocation_();this.newParentId=b.parentId;this.newInputName=b.inputName;this.newCoordinate=b.coordinate}setReason(b){this.reason=b}currentLocation_(){var b=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var e=b.getBlockById(this.blockId);if(!e)throw Error("The block associated with the block move event could not be found");b={};const g=e.getParent();if(g){if(b.parentId=g.id,e=g.getInputWithBlock(e))b.inputName=
e.name}else b.coordinate=e.getRelativeToSurfaceXY();return b}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Z.equals(this.oldCoordinate,this.newCoordinate)}run(b){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var g=e.getBlockById(this.blockId);if(g){var k=b?this.newParentId:this.oldParentId,n=b?this.newInputName:this.oldInputName;b=b?this.newCoordinate:
this.oldCoordinate;if(k){var r=e.getBlockById(k);if(!r){console.warn("Can't connect to non-existent block: "+k);return}}g.getParent()&&g.unplug();if(b)n=g.getRelativeToSurfaceXY(),g.moveBy(b.x-n.x,b.y-n.y,this.reason);else{e=g.outputConnection;if(!e||g.previousConnection&&g.previousConnection.isConnected())e=g.previousConnection;let w,x;g=null==(x=e)?void 0:x.type;if(n){if(g=r.getInput(n))w=g.connection}else g===fa.PREVIOUS_STATEMENT&&(w=r.nextConnection);w&&e?e.connect(w):console.warn("Can't connect to non-existent input: "+
n)}}else console.warn("Can't move non-existent block: "+this.blockId)}};d(U.EVENT,a.MOVE$$module$build$src$core$events$utils,Oh);var Ph=class extends Qb{constructor(b,e,g){super(b?b.workspace.id:void 0);this.type=lc;b&&(this.blockId=b.id,this.isOpen=e,this.bubbleType=g)}toJson(){const b=super.toJson();if(void 0===this.isOpen)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");
b.isOpen=this.isOpen;b.bubbleType=this.bubbleType;b.blockId=this.blockId||"";return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Ph);e.isOpen=b.isOpen;e.bubbleType=b.bubbleType;e.blockId=b.blockId;return e}},Ll;(function(b){b.MUTATOR="mutator";b.COMMENT="comment";b.WARNING="warning"})(Ll||={});d(U.EVENT,lc,Ph);var xc=class extends Ad{constructor(b){super();this.isBlank=!b;b&&(this.commentId=b.id,this.workspaceId=b.workspace.id,this.group=a.getGroup$$module$build$src$core$events$utils(),
this.recordUndo=da())}toJson(){const b=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");b.commentId=this.commentId;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new xc);e.commentId=b.commentId;return e}static CommentCreateDeleteHelper(b,e){var g=b.getEventWorkspace_();if(e){e=a.createElement$$module$build$src$core$utils$xml("xml");if(!b.xml)throw Error("Ecountered a comment event without proper xml");
e.appendChild(b.xml);a.domToWorkspace$$module$build$src$core$xml(e,g)}else{if(!b.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(g=g.getCommentById(b.commentId))?g.dispose():console.warn("Can't uncreate non-existent comment: "+b.commentId)}}},Qh=class extends xc{constructor(b,e,g){super(b);this.type="comment_change";b&&(this.oldContents_="undefined"===typeof e?"":e,this.newContents_="undefined"===typeof g?"":g)}toJson(){const b=super.toJson();
if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");b.oldContents=this.oldContents_;b.newContents=this.newContents_;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Qh);e.oldContents_=b.oldContents;e.newContents_=b.newContents;return e}isNull(){return this.oldContents_===this.newContents_}run(b){var e=
this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId)){var g=b?this.newContents_:this.oldContents_;if(!g){if(b)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");}e.setContent(g)}else console.warn("Can't change non-existent comment: "+
this.commentId)}};d(U.EVENT,"comment_change",Qh);var Rh=class extends xc{constructor(b){super(b);this.type=xd;b&&(this.xml=b.toXmlWithXY())}toJson(){const b=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");b.xml=Zb(this.xml);return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Rh);e.xml=a.textToDom$$module$build$src$core$utils$xml(b.xml);return e}run(b){xc.CommentCreateDeleteHelper(this,b)}};d(U.EVENT,
xd,Rh);var Sh=class extends xc{constructor(b){super(b);this.type="comment_delete";b&&(this.xml=b.toXmlWithXY())}run(b){xc.CommentCreateDeleteHelper(this,!b)}toJson(){const b=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");b.xml=Zb(this.xml);return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Sh);e.xml=a.textToDom$$module$build$src$core$utils$xml(b.xml);return e}};d(U.EVENT,"comment_delete",Sh);var Th=
class extends xc{constructor(b){super(b);this.type=rc;b&&(this.comment_=b,this.oldCoordinate_=b.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setOldCoordinate(b){this.oldCoordinate_=b}toJson(){const b=super.toJson();
if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");b.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, `+`${Math.round(this.oldCoordinate_.y)}`;b.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y);return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:
new Th);g=b.oldCoordinate.split(",");e.oldCoordinate_=new Z(Number(g[0]),Number(g[1]));g=b.newCoordinate.split(",");e.newCoordinate_=new Z(Number(g[0]),Number(g[1]));return e}isNull(){return Z.equals(this.oldCoordinate_,this.newCoordinate_)}run(b){var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId)){b=b?this.newCoordinate_:this.oldCoordinate_;if(!b)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");
var g=e.getRelativeToSurfaceXY();e.moveBy(b.x-g.x,b.y-g.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};d(U.EVENT,rc,Th);var Uh=class extends Qb{constructor(b,e,g){super(g);this.type="toolbox_item_select";this.oldItem=null!=b?b:void 0;this.newItem=null!=e?e:void 0}toJson(){const b=super.toJson();b.oldItem=this.oldItem;b.newItem=this.newItem;return b}static fromJson(b,e,g){e=super.fromJson(b,e,null!=g?g:new Uh);e.oldItem=b.oldItem;e.newItem=b.newItem;return e}};d(U.EVENT,
"toolbox_item_select",Uh);var ia={};ia.Abstract=Ad;ia.BLOCK_CHANGE=a.CHANGE$$module$build$src$core$events$utils;ia.BLOCK_CREATE=a.CREATE$$module$build$src$core$events$utils;ia.BLOCK_DELETE=a.DELETE$$module$build$src$core$events$utils;ia.BLOCK_DRAG="drag";ia.BLOCK_FIELD_INTERMEDIATE_CHANGE=wd;ia.BLOCK_MOVE=a.MOVE$$module$build$src$core$events$utils;ia.BUBBLE_OPEN=lc;ia.BUMP_EVENTS=zk;ia.BlockBase=Rc;ia.BlockChange=Wc;ia.BlockCreate=oh;ia.BlockDelete=Hh;ia.BlockDrag=Mh;ia.BlockFieldIntermediateChange=
Nh;ia.BlockMove=Oh;ia.BubbleOpen=Ph;ia.BubbleType=Ll;ia.CHANGE=a.CHANGE$$module$build$src$core$events$utils;ia.CLICK=zc;ia.COMMENT_CHANGE="comment_change";ia.COMMENT_CREATE=xd;ia.COMMENT_DELETE="comment_delete";ia.COMMENT_MOVE=rc;ia.CREATE=a.CREATE$$module$build$src$core$events$utils;ia.Click=eh;ia.ClickTarget=Tk;ia.CommentBase=xc;ia.CommentChange=Qh;ia.CommentCreate=Rh;ia.CommentDelete=Sh;ia.CommentMove=Th;ia.DELETE=a.DELETE$$module$build$src$core$events$utils;ia.FINISHED_LOADING=Wd;ia.FinishedLoading=
Jl;ia.MARKER_MOVE="marker_move";ia.MOVE=a.MOVE$$module$build$src$core$events$utils;ia.MarkerMove=Bh;ia.SELECTED="selected";ia.Selected=lh;ia.THEME_CHANGE="theme_change";ia.TOOLBOX_ITEM_SELECT="toolbox_item_select";ia.TRASHCAN_OPEN="trashcan_open";ia.ThemeChange=ph;ia.ToolboxItemSelect=Uh;ia.TrashcanOpen=Gh;ia.UI=hi;ia.UiBase=Qb;ia.VAR_CREATE=ld;ia.VAR_DELETE="var_delete";ia.VAR_RENAME="var_rename";ia.VIEWPORT_CHANGE=cd;ia.VarBase=re;ia.VarCreate=kh;ia.VarDelete=Dh;ia.VarRename=Eh;ia.ViewportChange=
qh;ia.clearPendingUndo=sa;ia.disable=a.disable$$module$build$src$core$events$utils;ia.disableOrphans=function(b){if((b.type===a.MOVE$$module$build$src$core$events$utils||b.type===a.CREATE$$module$build$src$core$events$utils)&&b.workspaceId){var e=C(b.workspaceId);if(!b.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(b=e.getBlockById(b.blockId)){const g=Md;try{Md=!1;const k=b.getParent();if(k&&k.isEnabled()){const n=b.getDescendants(!1);for(let r=0,w;w=n[r];r++)w.setEnabled(!0)}else if((b.outputConnection||
b.previousConnection)&&!e.isDragging()){do b.setEnabled(!1),b=b.getNextBlock();while(b)}}finally{Md=g}}}};ia.enable=a.enable$$module$build$src$core$events$utils;ia.filter=oa;ia.fire=ba;ia.fromJson=function(b,e){const g=ja(b.type);if(!g)throw Error("Unknown event type.");return g.fromJson(b,e)};ia.get=ja;ia.getDescendantIds=hb;ia.getGroup=a.getGroup$$module$build$src$core$events$utils;ia.getRecordUndo=da;ia.isEnabled=wa;ia.setGroup=a.setGroup$$module$build$src$core$events$utils;ia.setRecordUndo=S;
var Ml=class extends Be{constructor(){super();this.GRID_UNIT=4;this.CURSOR_COLOUR="#ffa200";this.CURSOR_RADIUS=5;this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0;this.START_HAT_HEIGHT=22;this.START_HAT_WIDTH=96;this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5};this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,
2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}};this.FULL_BLOCK_FIELDS=!0;this.FIELD_TEXT_FONTWEIGHT="bold";this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif';this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0;this.SELECTED_GLOW_COLOUR="#fff200";this.SELECTED_GLOW_SIZE=.5;this.REPLACEMENT_GLOW_COLOUR="#fff200";this.REPLACEMENT_GLOW_SIZE=2;this.selectedGlowFilterId=
"";this.selectedGlowFilter=null;this.replacementGlowFilterId="";this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null;this.SMALL_PADDING=this.GRID_UNIT;this.MEDIUM_PADDING=2*this.GRID_UNIT;this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT;this.LARGE_PADDING=4*this.GRID_UNIT;this.CORNER_RADIUS=1*this.GRID_UNIT;this.NOTCH_WIDTH=9*this.GRID_UNIT;this.NOTCH_HEIGHT=2*this.GRID_UNIT;this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT;this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT;
this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT;this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT;this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS;this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING;this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS;this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT;this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT;this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT;this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT;this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT;
this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT;this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT;this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT;this.CURSOR_WS_WIDTH=20*this.GRID_UNIT;this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT;this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS;this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT;this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT;this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT;this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT;this.FIELD_DROPDOWN_SVG_ARROW_PADDING=
this.FIELD_BORDER_RECT_X_PADDING;this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT;this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT;this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT;this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(b){super.setFontConstants_(b);this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init();this.HEXAGONAL=this.makeHexagonal();this.ROUNDED=this.makeRounded();this.SQUARED=
this.makeSquared();this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(b){super.setDynamicProperties_(b);this.SELECTED_GLOW_COLOUR=b.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const e=Number(b.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=e&&!isNaN(e)?e:this.SELECTED_GLOW_SIZE;this.REPLACEMENT_GLOW_COLOUR=b.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR;this.REPLACEMENT_GLOW_SIZE=
(b=Number(b.getComponentStyle("replacementGlowSize")))&&!isNaN(b)?b:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose();this.selectedGlowFilter&&Da(this.selectedGlowFilter);this.replacementGlowFilter&&Da(this.replacementGlowFilter)}makeStartHat(){const b=this.START_HAT_HEIGHT,e=this.START_HAT_WIDTH,g=kb("c",[ka(25,-b),ka(71,-b),ka(e,0)]);return{height:b,width:e,path:g}}makeHexagonal(){function b(g,k,n){var r=g/2;r=r>e?e:r;n=n?-1:1;g=(k?-1:1)*g/2;return ac(-n*r,g)+ac(n*r,g)}const e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;
return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(g){g/=2;return g>e?e:g},height(g){return g},connectionOffsetY(g){return g/2},connectionOffsetX(g){return-g},pathDown(g){return b(g,!1,!1)},pathUp(g){return b(g,!0,!1)},pathRightDown(g){return b(g,!1,!0)},pathRightUp(g){return b(g,!1,!0)}}}makeRounded(){function b(k,n,r){const w=k>g?k-g:0;k=(k>g?g:k)/2;const x=r===n?"0":"1";return Sa("a","0 0,"+x,k,ka((r?1:-1)*k,(n?-1:1)*k))+ha("v",(n?-1:1)*w)+Sa("a","0 0,"+x,k,ka((r?-1:1)*k,(n?-1:1)*k))}const e=
this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,g=2*e;return{type:this.SHAPES.ROUND,isDynamic:!0,width(k){k/=2;return k>e?e:k},height(k){return k},connectionOffsetY(k){return k/2},connectionOffsetX(k){return-k},pathDown(k){return b(k,!1,!1)},pathUp(k){return b(k,!0,!1)},pathRightDown(k){return b(k,!1,!0)},pathRightUp(k){return b(k,!1,!0)}}}makeSquared(){function b(g,k,n){g-=2*e;const r=n===k?"0":"1";return Sa("a","0 0,"+r,e,ka((n?1:-1)*e,(k?-1:1)*e))+ha("v",(k?-1:1)*g)+Sa("a","0 0,"+r,e,ka((n?-1:1)*e,(k?
-1:1)*e))}const e=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(g){return e},height(g){return g},connectionOffsetY(g){return g/2},connectionOffsetX(g){return-g},pathDown(g){return b(g,!1,!1)},pathUp(g){return b(g,!0,!1)},pathRightDown(g){return b(g,!1,!0)},pathRightUp(g){return b(g,!1,!0)}}}shapeFor(b){let e=b.getCheck();!e&&b.targetConnection&&(e=b.targetConnection.getCheck());switch(b.type){case fa.INPUT_VALUE:case fa.OUTPUT_VALUE:b=b.getSourceBlock().getOutputShape();if(null!==
b)switch(b){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}if(e&&-1!==e.indexOf("Boolean"))return this.HEXAGONAL;if(e&&-1!==e.indexOf("Number"))return this.ROUNDED;e&&e.indexOf("String");return this.ROUNDED;case fa.PREVIOUS_STATEMENT:case fa.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type");}}makeNotch(){function b(ea){return kb("c",[ka(ea*n/2,0),ka(ea*n*3/4,w/2),ka(ea*n,w)])+le([ka(ea*n,r)])+
kb("c",[ka(ea*n/4,w/2),ka(ea*n/2,w),ka(ea*n,w)])+ha("h",ea*k)+kb("c",[ka(ea*n/2,0),ka(ea*n*3/4,-(w/2)),ka(ea*n,-w)])+le([ka(ea*n,-r)])+kb("c",[ka(ea*n/4,-(w/2)),ka(ea*n/2,-w),ka(ea*n,-w)])}const e=this.NOTCH_WIDTH,g=this.NOTCH_HEIGHT,k=e/3,n=k/3,r=g/2,w=r/2,x=b(1),P=b(-1);return{type:this.SHAPES.NOTCH,width:e,height:g,pathLeft:x,pathRight:P}}makeInsideCorners(){const b=this.CORNER_RADIUS,e=Sa("a","0 0,0",b,ka(-b,b)),g=Sa("a","0 0,1",b,ka(-b,b)),k=Sa("a","0 0,0",b,ka(b,b)),n=Sa("a","0 0,1",b,ka(b,
b));return{width:b,height:b,pathTop:e,pathBottom:k,rightWidth:b,rightHeight:b,pathTopRight:g,pathBottomRight:n}}generateSecondaryColour_(b){return ud("#000",b,.15)||b}generateTertiaryColour_(b){return ud("#000",b,.25)||b}createDom(b,e,g){super.createDom(b,e,g);b=N(I.DEFS,{},b);e=N(I.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},b);N(I.FEGAUSSIANBLUR,{"in":"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},e);g=N(I.FECOMPONENTTRANSFER,
{result:"outBlur"},e);N(I.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},g);N(I.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e);N(I.FECOMPOSITE,{"in":"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e);this.selectedGlowFilterId=e.id;this.selectedGlowFilter=e;b=N(I.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},b);N(I.FEGAUSSIANBLUR,{"in":"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},
b);e=N(I.FECOMPONENTTRANSFER,{result:"outBlur"},b);N(I.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},e);N(I.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},b);N(I.FECOMPOSITE,{"in":"outColor",in2:"outBlur",operator:"in",result:"outGlow"},b);N(I.FECOMPOSITE,{"in":"SourceGraphic",in2:"outGlow",operator:"over"},b);this.replacementGlowFilterId=b.id;this.replacementGlowFilter=b}getCSS_(b){return[`${b} .blocklyText,`,`${b} .blocklyFlyoutLabelText {`,
`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}`+`pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${b} .blocklyText {`,"fill: #fff;","}",`${b} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${b} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${b} .blocklyNonEditableText>text,`,`${b} .blocklyEditableText>text,`,`${b} .blocklyNonEditableText>g>text,`,`${b} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${b} .blocklyFlyoutLabelText {`,
"fill: #575E75;","}",`${b} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${b} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${b} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${b} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${b} .blocklyDropdownText {`,"fill: #fff !important;",
"}",`${b}.blocklyWidgetDiv .goog-menuitem,`,`${b}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${b}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${b} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${b} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${b} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,
"stroke: none;","}"]}},Nl=class extends Ce{constructor(b,e){super(b,e)}draw(){const b=this.block_.pathObject;b.beginDrawing();this.drawOutline_();this.drawInternals_();this.updateConnectionHighlights();b.setPath(this.outlinePath_+"\n"+this.inlinePath_);this.info_.RTL&&b.flipRTL();this.recordSizeOnBlock_();this.info_.outputConnection&&(b.outputShapeType=this.info_.outputConnection.shape.type);b.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&
!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(b){if(!(0>=b.height)){if(F.isSpacer(b)){const k=b.precedesStatement;var e=b.followsStatement;if(k||e){const n=this.constants_.INSIDE_CORNERS;var g=n.rightHeight;g=b.height-
(k?g:0);e=e?n.pathBottomRight:"";b=0<g?ha("V",b.yPos+g):"";this.outlinePath_+=e+b+(k?n.pathTopRight:"");return}}this.outlinePath_+=ha("V",b.yPos+b.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");
this.positionOutputConnection_();this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height);this.outlinePath_+="z"}drawFlatTop_(){const b=this.info_.topRow;this.positionPreviousConnection_();this.outlinePath_+=Ma(b.xPos,this.info_.startY);this.outlinePath_+=ha("h",b.width)}drawFlatBottom_(){const b=this.info_.bottomRow;this.positionNextConnection_();this.outlinePath_+=ha("V",b.baseline);this.outlinePath_+=ha("h",-b.width)}drawInlineInput_(b){this.positionInlineInputConnection_(b);
const e=b.input.name;b.connectedBlock||this.info_.isInsertionMarker||(b=Wa(b.xPos+b.connectionWidth,b.centerline-b.height/2)+this.getInlineInputPath(b),this.block_.pathObject.setOutlinePath(e,b))}getInlineInputPath(b){const e=b.width-2*b.connectionWidth,g=b.height;return ha("h",e)+b.shape.pathRightDown(g)+ha("h",-e)+b.shape.pathUp(g)+"z"}drawStatementInput_(b){var e=b.getLastInput();const g=e.xPos+e.notchOffset+e.shape.width,k=this.constants_.INSIDE_CORNERS,n=e.shape.pathRight+ha("h",-(e.notchOffset-
k.width))+k.pathTop,r=b.height-2*k.height;e=k.pathBottom+ha("h",e.notchOffset-k.width)+(e.connectedBottomNextConnection?"":e.shape.pathLeft);this.outlinePath_+=ha("H",g)+n+ha("v",r)+e+ha("H",b.xPos+b.width);this.positionStatementInputConnection_(b)}drawConnectionHighlightPath(b){const e=b.connectionModel;if(e.type===fa.NEXT_STATEMENT||e.type===fa.PREVIOUS_STATEMENT||e.type===fa.OUTPUT_VALUE&&!b.isDynamicShape)super.drawConnectionHighlightPath(b);else{b=e.type===fa.INPUT_VALUE?Wa(b.connectionWidth,
-b.height/2)+this.getInlineInputPath(b):Wa(b.width,-b.height/2)+b.shape.pathDown(b.height);var g=e.getSourceBlock(),k,n;null==(n=(k=g.pathObject).addConnectionHighlight)||n.call(k,e,b,e.getOffsetInBlock(),g.RTL)}}},Zc=class extends ua{constructor(b,e,g,k,n,r,w){super(ua.SKIP_SETUP);this.imageElement=this.clickHandler=null;this.flipRtl=this.isDirty_=this.EDITABLE=!1;this.altText="";g=Number(Ra(g));e=Number(Ra(e));if(isNaN(g)||isNaN(e))throw Error("Height and width values of an image field must cast to numbers.");
if(0>=g||0>=e)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Ja(e,g+Zc.Y_PADDING);this.imageHeight=g;"function"===typeof n&&(this.clickHandler=n);b!==ua.SKIP_SETUP&&(w?this.configure_(w):(this.flipRtl=!!r,this.altText=Ra(k)||""),this.setValue(Ra(b)))}configure_(b){super.configure_(b);b.flipRtl&&(this.flipRtl=b.flipRtl);b.alt&&(this.altText=Ra(b.alt))}initView(){this.imageElement=N(I.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},
this.fieldGroup_);this.imageElement.setAttributeNS(lb,"xlink:href",this.value_);this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(b){return"string"!==typeof b?null:b}doValueUpdate_(b){this.value_=b;this.imageElement&&this.imageElement.setAttributeNS(lb,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(b){b!==this.altText&&(this.altText=b||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&
this.clickHandler(this)}setOnClickHandler(b){this.clickHandler=b}getText_(){return this.altText}static fromJson(b){if(!b.src||!b.width||!b.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(b.src,b.width,b.height,void 0,void 0,void 0,b)}};Zc.Y_PADDING=1;tb("field_image",Zc);Zc.prototype.DEFAULT_VALUE="";var Ie=class extends ua{constructor(b,e,g){super(ua.SKIP_SETUP);this.spellcheck_=!0;this.htmlInput_=null;this.isTextValid_=
this.isBeingEdited_=!1;this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null;this.fullBlockClickTarget_=!1;this.workspace_=null;this.SERIALIZABLE=!0;this.CURSOR="text";b!==ua.SKIP_SETUP&&(g&&this.configure_(g),this.setValue(b),e&&this.setValidator(e))}configure_(b){super.configure_(b);void 0!==b.spellcheck&&(this.spellcheck_=b.spellcheck)}initView(){if(!this.getSourceBlock())throw new Ia;super.initView();this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const b=
this.getSourceBlock();if(!b)throw new Ia;let e;return this.fullBlockClickTarget_=!(null==(e=this.getConstants())||!e.FULL_BLOCK_FIELDS)&&b.isSimpleReporter()}doValueInvalid_(b){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,b=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&wa()&&ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,b,this.value_)))}doValueUpdate_(b){this.isTextValid_=this.isDirty_=
!0;this.value_=b}applyColour(){const b=this.getSourceBlock();if(!b)throw new Ia;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",b.style.colourTertiary)):(this.borderRect_.style.display="none",b.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let b;if(null==(b=this.getConstants())?0:b.FULL_BLOCK_FIELDS)this.render_(),this.isDirty_=
!1;return super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){super.render_();if(this.isBeingEdited_){var b=this.htmlInput_;this.isTextValid_?(za(b,"blocklyInvalidInput"),La(b,Ka.INVALID,!1)):(la(b,"blocklyInvalidInput"),La(b,Ka.INVALID,!0))}b=this.getSourceBlock();if(!b)throw new Ia;this.getConstants().FULL_BLOCK_FIELDS&&b.applyColour()}setSpellcheck(b){b!==this.spellcheck_&&(this.spellcheck_=b,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(b,
e=!1){this.workspace_=this.sourceBlock_.workspace;!e&&this.workspace_.options.modalInputs&&(ih||tf||yd)?this.showPromptEditor_():this.showInlineEditor_(e)}showPromptEditor_(){cg(a.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),b=>{null!==b&&this.setValue(this.getValueFromEditorText_(b));this.onFinishEditing_(this.value_)})}showInlineEditor_(b){const e=this.getSourceBlock();if(!e)throw new Ia;sg(this,e.RTL,this.widgetDispose_.bind(this));this.htmlInput_=this.widgetCreate_();this.isBeingEdited_=
!0;this.valueWhenEditorWasOpened_=this.value_;b||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var b=this.getSourceBlock();if(!b)throw new Ia;a.setGroup$$module$build$src$core$events$utils(!0);const e=md();var g=this.getClickTarget_();if(!g)throw Error("A click target has not been set.");la(g,"editing");g=document.createElement("input");g.className="blocklyHtmlInput";g.setAttribute("spellcheck",this.spellcheck_);const k=this.workspace_.getScale();var n=this.getConstants().FIELD_TEXT_FONTSIZE*
k+"pt";e.style.fontSize=n;g.style.fontSize=n;n=Ie.BORDERRADIUS*k+"px";this.isFullBlockField()&&(n=this.getScaledBBox(),n=(n.bottom-n.top)/2+"px",b=b.getParent()?b.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,g.style.border=1*k+"px solid "+b,e.style.borderRadius=n,e.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(e.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*k+"px"));g.style.borderRadius=n;e.appendChild(g);g.value=g.defaultValue=
this.getEditorText_(this.value_);g.setAttribute("data-untyped-default-value",String(this.value_));this.resizeEditor_();this.bindInputEvents_(g);return g}widgetDispose_(){this.isBeingEdited_=!1;this.isTextValid_=!0;this.forceRerender();this.onFinishEditing_(this.value_);this.sourceBlock_&&wa()&&null!==this.valueWhenEditorWasOpened_&&this.valueWhenEditorWasOpened_!==this.value_&&(ba(new (ja(a.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,
this.value_)),this.valueWhenEditorWasOpened_=null);a.setGroup$$module$build$src$core$events$utils(!1);this.unbindInputEvents_();var b=md().style;b.width="auto";b.height="auto";b.fontSize="";b.transition="";b.boxShadow="";this.htmlInput_=null;b=this.getClickTarget_();if(!b)throw Error("A click target has not been set.");za(b,"editing")}onFinishEditing_(b){}bindInputEvents_(b){this.onKeyDownWrapper_=H(b,"keydown",this,this.onHtmlInputKeyDown_);this.onKeyInputWrapper_=H(b,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&
(ca(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null);this.onKeyInputWrapper_&&(ca(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(b){"Enter"===b.key?(zb(),Mb()):"Escape"===b.key?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),zb(),Mb()):"Tab"===b.key&&(zb(),Mb(),this.sourceBlock_.tab(this,!b.shiftKey),b.preventDefault())}onHtmlInputChange_(b){b=this.value_;this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1);this.sourceBlock_&&
wa()&&this.value_!==b&&ba(new (ja(wd))(this.sourceBlock_,this.name||null,b,this.value_))}setEditorValue_(b,e=!0){this.isDirty_=!0;this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(b));this.setValue(b,e)}resizeEditor_(){var b=this.getSourceBlock();if(!b)throw new Ia;const e=md(),g=this.getScaledBBox();e.style.width=g.right-g.left+"px";e.style.height=g.bottom-g.top+"px";b=new Z(b.RTL?g.right-e.offsetWidth:g.left,g.top);e.style.left=b.x+"px";e.style.top=b.y+"px"}repositionForWindowResize(){const b=
this.getSourceBlock();if(!(b instanceof Ob))return!1;oe(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),b)||this.resizeEditor_();return!0}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(b){return`${b}`}getValueFromEditorText_(b){return b}};Ie.BORDERRADIUS=4;var Jd=class extends Ie{constructor(b,e,g){super(b,e,g)}doClassValidation_(b){return void 0===b?null:`${b}`}static fromJson(b){return new this(Ra(b.text),
void 0,b)}};tb("field_input",Jd);Jd.prototype.DEFAULT_VALUE="";var Ol=class extends vh{constructor(b){super(b)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(b){return!!b.outputConnection}hasRightSquareCorner(b){return!!b.outputConnection&&!b.statementInputCount&&!b.nextConnection}},qf=class extends ye{constructor(b,e){super(b,e);this.connectedBottomNextConnection=!1;if(this.connectedBlock){for(b=this.connectedBlock;e=b.getNextBlock();)b=e;b.nextConnection||(this.height=this.connectedBlockHeight,
this.connectedBottomNextConnection=!0)}}},Pl=class extends Tb{constructor(b){super(b);this.width=this.height=0;this.type|=F.getType("RIGHT_CONNECTION")}},Ql=class extends Ah{constructor(b){super(b)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(b){const e=(b.hat?"cap"===b.hat:this.constants_.ADD_START_HATS)&&!b.outputConnection&&!b.previousConnection;return!!b.outputConnection||e}hasRightSquareCorner(b){return!!b.outputConnection&&!b.statementInputCount&&!b.nextConnection}},Rl=class extends Fd{constructor(b,
e){super(b,e);this.isInline=!0;this.renderer_=b;this.constants_=this.renderer_.getConstants();this.topRow=new Ql(this.constants_);this.bottomRow=new Ol(this.constants_);this.isMultiRow=!e.getInputsInline()||e.isCollapsed();this.hasStatementInput=0<e.statementInputCount;this.rightSide=this.outputConnection?new Pl(this.constants_):null;this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_();this.addElemSpacing_();this.addRowSpacing_();this.adjustXPosition_();
this.computeBounds_();this.alignRowElements_();this.finalize_()}shouldStartNewRow_(b,e){return e?e instanceof jc||b instanceof pb||e instanceof pb?!0:b instanceof a.ValueInput$$module$build$src$core$inputs$value_input||b instanceof Ub||b instanceof jc?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(b){return b.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(b)}getInRowSpacing_(b,e){return b&&e||!this.outputConnection||!this.outputConnection.isDynamicShape||
this.hasStatementInput||this.bottomRow.hasNextConnection?!b&&e&&F.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:b&&F.isLeftRoundedCorner(b)&&e&&(F.isPreviousConnection(e)||F.isNextConnection(e))?e.notchOffset-this.constants_.CORNER_RADIUS:b&&F.isLeftSquareCorner(b)&&e&&F.isHat(e)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(b,e){if(F.isTopRow(b)&&F.isBottomRow(e))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const g=
F.isInputRow(b)&&b.hasStatement,k=F.isInputRow(e)&&e.hasStatement;return k||g?(b=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),k&&g?Math.max(b,this.constants_.DUMMY_INPUT_MIN_HEIGHT):b):F.isTopRow(b)?b.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):F.isBottomRow(e)?this.outputConnection?!e.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-
this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(b,e){const g=this.width-this.startX;return F.isInputRow(b)&&b.hasStatement||F.isInputRow(e)&&e.hasStatement?Math.max(g,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):g}getElemCenterline_(b,e){if(b.hasStatement&&!F.isSpacer(e)&&!F.isStatementInput(e))return b.yPos+
this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(F.isInlineInput(e)&&e instanceof vc){const g=e.connectedBlock;if(g&&g.outputConnection&&g.nextConnection)return b.yPos+g.height/2}return super.getElemCenterline_(b,e)}addInput_(b,e){if((b instanceof Ub||b instanceof jc)&&e.hasDummyInput&&e.align===a.Align$$module$build$src$core$inputs$align.LEFT&&b.align===a.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(e,b);else if(b instanceof pb){e.elements.push(new qf(this.constants_,
b));e.hasStatement=!0;null===e.align&&(e.align=b.align);return}super.addInput_(b,e)}addAlignmentPadding_(b,e){if(this.rightAlignedDummyInputs.get(b)){let g;for(let k=0;k<b.elements.length;k++){const n=b.elements[k];F.isSpacer(n)&&(g=n);if(F.isField(n)&&n instanceof Ed&&n.parentInput===this.rightAlignedDummyInputs.get(b))break}if(g){g.width+=e;b.width+=e;return}}super.addAlignmentPadding_(b,e)}adjustXPosition_(){const b=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let e=b;for(let n=
2;n<this.rows.length-1;n+=2){var g=this.rows[n-1];const r=this.rows[n];var k=this.rows[n+1];g=2===n?!!this.topRow.hasPreviousConnection:!!g.followsStatement;k=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!k.precedesStatement;if(F.isInputRow(r)&&r.hasStatement){r.measure();let w,x;e=r.width-(null!=(x=null==(w=r.getLastInput())?void 0:w.width)?x:0)+b}else if(g&&(2===n||k)&&F.isInputRow(r)&&!r.hasStatement){k=r.xPos;g=null;for(let w=0;w<r.elements.length;w++){const x=r.elements[w];F.isSpacer(x)&&
(g=x);g&&(F.isField(x)||F.isInput(x))&&k<e&&!(F.isField(x)&&x instanceof Ed&&(x.field instanceof Xc||x.field instanceof Zc))&&(g.width+=e-k);k+=x.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var b=this.outputConnection.shape;if("isDynamic"in b&&b.isDynamic){for(var e=0,g=0;g<this.rows.length;g++){const k=this.rows[g];k.yPos=e;e+=k.height}this.height=e;g=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height;e=
b.height(g);g=b.width(g);this.outputConnection.height=e;this.outputConnection.width=g;this.outputConnection.startX=g;this.outputConnection.connectionOffsetY=b.connectionOffsetY(e);this.outputConnection.connectionOffsetX=b.connectionOffsetX(g);b=0;this.hasStatementInput||this.bottomRow.hasNextConnection||(b=g,this.rightSide.height=e,this.rightSide.width=b,this.rightSide.centerline=e/2,this.rightSide.xPos=this.width+b);this.startX=g;this.width+=g+b;this.widthWithChildren+=g+b}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&
!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var b=0,e=0;e<this.rows.length;e++){var g=this.rows[e];if(!F.isInputRow(g))continue;b=g.elements[g.elements.length-2];let k=this.getNegativeSpacing_(g.elements[1]),n=this.getNegativeSpacing_(b);b=k+n;const r=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-b<r&&(b=this.width-r,k=b/2,n=b/2);g.elements.unshift(new ob(this.constants_,-k));g.elements.push(new ob(this.constants_,-n))}if(b)for(this.width-=b,this.widthWithChildren-=
b,this.rightSide.xPos-=b,e=0;e<this.rows.length;e++)g=this.rows[e],F.isTopOrBottomRow(g)&&(g.elements[1].width-=b),g.width-=b,g.widthWithConnectedBlocks-=b}}getNegativeSpacing_(b){if(!b||!this.outputConnection)return 0;const e=this.outputConnection.width;var g=this.outputConnection.shape.type;const k=this.constants_;if(1<this.inputRows.length)switch(g){case k.SHAPES.ROUND:return g=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,g=this.height/2>g?g:this.height/2,e-g*(1-Math.sin(Math.acos((g-this.constants_.SMALL_PADDING)/
g)));default:return 0}if(F.isInlineInput(b)&&b instanceof vc){const n=b.connectedBlock;b=n?n.pathObject.outputShapeType:b.shape.type;return null==b||n&&n.outputConnection&&(n.statementInputCount||n.nextConnection)||g===k.SHAPES.HEXAGONAL&&g!==b?0:e-this.constants_.SHAPE_IN_SHAPE_PADDING[g][b]}return F.isField(b)&&b instanceof Ed?g===k.SHAPES.ROUND&&b.field instanceof Jd?e-2.75*k.GRID_UNIT:e-this.constants_.SHAPE_IN_SHAPE_PADDING[g][0]:F.isIcon(b)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let k=
2;k<this.rows.length-1;k+=2){const n=this.rows[k-1],r=this.rows[k],w=this.rows[k+1];var b=2===k,e=k+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!w.precedesStatement;if(b?this.topRow.hasPreviousConnection:n.followsStatement){var g=r.elements[1];g=3===r.elements.length&&g instanceof Ed&&(g.field instanceof Xc||g.field instanceof Zc);if(!b&&g)n.height-=this.constants_.SMALL_PADDING,w.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.MEDIUM_PADDING;else if(!b&&!e)n.height+=
this.constants_.SMALL_PADDING;else if(e){b=!1;for(e=0;e<r.elements.length;e++)if(g=r.elements[e],g instanceof vc&&F.isInlineInput(g)&&g.connectedBlock&&!g.connectedBlock.isShadow()&&40<=g.connectedBlock.getHeightWidth().height){b=!0;break}b&&(n.height-=this.constants_.SMALL_PADDING,w.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_();this.finalizeHorizontalAlignment_();this.finalizeVerticalAlignment_();super.finalize_();this.rightSide&&(this.widthWithChildren+=
this.rightSide.width)}},Sl=class extends Ch{constructor(b,e,g){super(b,e,g);this.markerCircle=null}showWithInputOutput(b){const e=b.getSourceBlock();b=b.getLocation().getOffsetInBlock();this.positionCircle(b.x,b.y);this.setParent_(e);this.showCurrent_()}showWithOutput_(b){this.showWithInputOutput(b)}showWithInput_(b){this.showWithInputOutput(b)}showWithBlock_(b){b=b.getLocation();const e=b.getHeightWidth();this.positionRect_(0,0,e.width,e.height);this.setParent_(b);this.showCurrent_()}positionCircle(b,
e){let g;null==(g=this.markerCircle)||g.setAttribute("cx",`${b}`);let k;null==(k=this.markerCircle)||k.setAttribute("cy",`${e}`);this.currentMarkerSvg=this.markerCircle}hide(){super.hide();this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){super.createDomInternal_();this.markerCircle=N(I.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_);this.hide();if(this.isCursor()){const b=this.getBlinkProperties_();N(I.ANIMATE,
b,this.markerCircle)}return this.markerSvg_}applyColour_(b){super.applyColour_(b);let e;null==(e=this.markerCircle)||e.setAttribute("fill",this.colour_);let g;null==(g=this.markerCircle)||g.setAttribute("stroke",this.colour_);if(this.isCursor()){b=this.colour_+";transparent;transparent;";let k;null==(k=this.markerCircle)||k.firstElementChild.setAttribute("values",b)}}},Tl=class extends Cf{constructor(b,e,g){super(b,e,g);this.svgPathSelected=null;this.outlines=new Map;this.remainingOutlines=new Set;
this.outputShapeType=null;this.constants=g}setPath(b){super.setPath(b);this.svgPathSelected&&this.svgPathSelected.setAttribute("d",b)}applyColour(b){super.applyColour(b);const e=b.getParent();b.isShadow()&&e&&this.svgPath.setAttribute("stroke",e.style.colourTertiary);for(const g of this.outlines.values())g.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const b of this.outlines.values())b.setAttribute("transform","scale(-1 1)")}updateSelected(b){this.setClass_("blocklySelected",
b);b?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(b){this.setClass_("blocklyReplaceable",b);b?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+
")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(b,e){b=b.getParentInput().name;(b=this.getOutlinePath(b))&&(e?b.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):b.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const b of this.outlines.keys())this.remainingOutlines.add(b)}endDrawing(){if(this.remainingOutlines.size)for(const b of this.remainingOutlines)this.removeOutlinePath(b);this.remainingOutlines.clear()}setOutlinePath(b,
e){b=this.getOutlinePath(b);b.setAttribute("d",e);b.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(b){this.outlines.has(b)||this.outlines.set(b,N(I.PATH,{"class":"blocklyOutlinePath",d:""},this.svgRoot));this.remainingOutlines.delete(b);return this.outlines.get(b)}removeOutlinePath(b){let e,g;null==(e=this.outlines.get(b))||null==(g=e.parentNode)||g.removeChild(this.outlines.get(b));this.outlines.delete(b)}},Vh=class extends De{constructor(b){super(b)}makeConstants_(){return new Ml}makeRenderInfo_(b){return new Rl(this,
b)}makeDrawer_(b,e){return new Nl(b,e)}makeMarkerDrawer(b,e){return new Sl(b,this.getConstants(),e)}makePathObject(b,e){return new Tl(b,e,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(b,e,g){Na("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case.");return e.type===fa.OUTPUT_VALUE?b.isConnected()?Vb.PREVIEW_TYPE.REPLACEMENT_FADE:Vb.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(b,e,g)}};me("zelos",Vh);
var Db={};Db.BottomRow=Ol;Db.ConstantProvider=Ml;Db.Drawer=Nl;Db.MarkerSvg=Sl;Db.PathObject=Tl;Db.RenderInfo=Rl;Db.Renderer=Vh;Db.RightConnectionShape=Pl;Db.StatementInput=qf;Db.TopRow=Ql;Rk();var bb={};bb.registerCleanup=Ek;bb.registerCollapse=Gk;bb.registerCollapseExpandBlock=Nk;bb.registerComment=Lk;bb.registerDefaultOptions=Rk;bb.registerDelete=Pk;bb.registerDeleteAll=Jk;bb.registerDisable=Ok;bb.registerDuplicate=Kk;bb.registerExpand=Hk;bb.registerHelp=Qk;bb.registerInline=Mk;bb.registerRedo=
Dk;bb.registerUndo=Ck;var qa=class extends Ie{constructor(b,e,g){super(ua.SKIP_SETUP);this.clockwise=qa.CLOCKWISE;this.offset=qa.OFFSET;this.wrap=qa.WRAP;this.round=qa.ROUND;this.boundEvents=[];this.symbol_=this.gauge=this.line=null;b!==ua.SKIP_SETUP&&(g&&this.configure_(g),this.setValue(b),e&&this.setValidator(e))}configure_(b){super.configure_(b);switch(b.mode){case Wh.COMPASS:this.clockwise=!0;this.offset=90;break;case Wh.PROTRACTOR:this.clockwise=!1,this.offset=0}b.clockwise&&(this.clockwise=
b.clockwise);b.offset&&(this.offset=b.offset);b.wrap&&(this.wrap=b.wrap);b.round&&(this.round=b.round)}initView(){super.initView();this.symbol_=N(I.TSPAN,{});this.symbol_.appendChild(document.createTextNode("Â°"));this.getTextElement().appendChild(this.symbol_)}render_(){super.render_();this.updateGraph()}showEditor_(b){super.showEditor_(b,ih||tf||yd);b=this.dropdownCreate();be().appendChild(b);this.sourceBlock_ instanceof Ob&&yg(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary);
ef(this,this.dropdownDispose.bind(this));this.updateGraph()}dropdownCreate(){const b=N(I.SVG,{xmlns:Od,"xmlns:html":Pb,"xmlns:xlink":lb,version:"1.1",height:2*qa.HALF+"px",width:2*qa.HALF+"px"});b.style.touchAction="none";const e=N(I.CIRCLE,{cx:qa.HALF,cy:qa.HALF,r:qa.RADIUS,"class":"blocklyAngleCircle"},b);this.gauge=N(I.PATH,{"class":"blocklyAngleGauge"},b);this.line=N(I.LINE,{x1:qa.HALF,y1:qa.HALF,"class":"blocklyAngleLine"},b);for(let g=0;360>g;g+=15)N(I.LINE,{x1:qa.HALF+qa.RADIUS,y1:qa.HALF,
x2:qa.HALF+qa.RADIUS-(0===g%45?10:5),y2:qa.HALF,"class":"blocklyAngleMarks",transform:"rotate("+g+","+qa.HALF+","+qa.HALF+")"},b);this.boundEvents.push(H(b,"click",this,this.hide));this.boundEvents.push(H(e,"pointerdown",this,this.onMouseMove_,!0));this.boundEvents.push(H(e,"pointermove",this,this.onMouseMove_,!0));return b}dropdownDispose(){for(const b of this.boundEvents)ca(b);this.boundEvents.length=0;this.line=this.gauge=null}hide(){de(this);zb()}onMouseMove_(b){var e=this.gauge.ownerSVGElement.getBoundingClientRect();
const g=b.clientX-e.left-qa.HALF;b=b.clientY-e.top-qa.HALF;e=Math.atan(-b/g);isNaN(e)||(e=mj(e),0>g?e+=180:0<b&&(e+=360),e=this.clockwise?this.offset+360-e:360-(this.offset-e),this.displayMouseOrKeyboardValue(e))}displayMouseOrKeyboardValue(b){this.round&&(b=Math.round(b/this.round)*this.round);b=this.wrapValue(b);if(b!==this.value_){const e=this.value_;this.setEditorValue_(b,!1);this.sourceBlock_&&wa()&&this.value_!==e&&ba(new (ja(wd))(this.sourceBlock_,this.name||null,e,this.value_))}}updateGraph(){if(this.gauge&&
this.line){var b=Number(this.getText())+this.offset,e=$d(b%360);b=["M ",qa.HALF,",",qa.HALF];var g=qa.HALF,k=qa.HALF;if(!isNaN(e)){const n=Number(this.clockwise),r=$d(this.offset),w=Math.cos(r)*qa.RADIUS,x=Math.sin(r)*-qa.RADIUS;n&&(e=2*r-e);g+=Math.cos(e)*qa.RADIUS;k-=Math.sin(e)*qa.RADIUS;e=Math.abs(Math.floor((e-r)/Math.PI)%2);n&&(e=1-e);b.push(" l ",w,",",x," A ",qa.RADIUS,",",qa.RADIUS," 0 ",e," ",n," ",g,",",k," z")}this.gauge.setAttribute("d",b.join(""));this.line.setAttribute("x2",`${g}`);
this.line.setAttribute("y2",`${k}`)}}onHtmlInputKeyDown_(b){super.onHtmlInputKeyDown_(b);var e=this.getSourceBlock();if(!e)throw new Ia;let g=0;switch(b.key){case "ArrowLeft":g=e.RTL?1:-1;break;case "ArrowRight":g=e.RTL?-1:1;break;case "ArrowDown":g=-1;break;case "ArrowUp":g=1}g&&(e=this.getValue(),this.displayMouseOrKeyboardValue(e+g*this.round),b.preventDefault(),b.stopPropagation())}doClassValidation_(b){b=Number(b);return isNaN(b)||!isFinite(b)?null:this.wrapValue(b)}wrapValue(b){b%=360;0>b&&
(b+=360);b>this.wrap&&(b-=360);return b}static fromJson(b){return new this(b.angle,void 0,b)}};qa.HALF=50;qa.RADIUS=qa.HALF-1;qa.CLOCKWISE=!1;qa.OFFSET=0;qa.WRAP=360;qa.ROUND=15;tb("field_angle",qa);qa.prototype.DEFAULT_VALUE=0;yb("\n.blocklyAngleCircle {\n  stroke: #444;\n  stroke-width: 1;\n  fill: #ddd;\n  fill-opacity: 0.8;\n}\n\n.blocklyAngleMarks {\n  stroke: #444;\n  stroke-width: 1;\n}\n\n.blocklyAngleGauge {\n  fill: #f88;\n  fill-opacity: 0.8;\n  pointer-events: none;\n}\n\n.blocklyAngleLine {\n  stroke: #f00;\n  stroke-width: 2;\n  stroke-linecap: round;\n  pointer-events: none;\n}\n");
var Wh;(function(b){b.COMPASS="compass";b.PROTRACTOR="protractor"})(Wh||={});var $c=class extends ua{constructor(b,e,g){super(ua.SKIP_SETUP);this.SERIALIZABLE=!0;this.CURSOR="default";this.value_=this.value_;this.checkChar=$c.CHECK_CHAR;b!==ua.SKIP_SETUP&&(g&&this.configure_(g),this.setValue(b),e&&this.setValidator(e))}configure_(b){super.configure_(b);b.checkCharacter&&(this.checkChar=b.checkCharacter)}saveState(){const b=this.saveLegacyState($c);return null!==b?b:this.getValueBoolean()}initView(){super.initView();
const b=this.getTextElement();la(b,"blocklyCheckbox");b.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_());this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(b){this.checkChar=b||$c.CHECK_CHAR;this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(b){return!0===b||"TRUE"===b?"TRUE":!1===b||"FALSE"===b?"FALSE":null}doValueUpdate_(b){this.value_=
this.convertValueToBool_(b);this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(b){return"string"===typeof b?"TRUE"===b:!!b}static fromJson(b){return new this(b.checked,void 0,b)}};$c.CHECK_CHAR="âœ“";tb("field_checkbox",$c);$c.prototype.DEFAULT_VALUE=!1;var rb=class extends ua{constructor(b,e,g){super(ua.SKIP_SETUP);
this.highlightedIndex=this.picker=null;this.boundEvents=[];this.SERIALIZABLE=!0;this.CURSOR="default";this.isDirty_=!1;this.titles=this.colours=null;this.columns=0;b!==ua.SKIP_SETUP&&(g&&this.configure_(g),this.setValue(b),e&&this.setValidator(e))}configure_(b){super.configure_(b);b.colourOptions&&(this.colours=b.colourOptions);b.colourTitles&&(this.titles=b.colourTitles);b.columns&&(this.columns=b.columns)}initView(){this.size_=new Ja(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT);
this.createBorderRect_();this.getBorderRect().style.fillOpacity="1";this.getBorderRect().setAttribute("stroke","#fff");this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const b=this.getSourceBlock();if(!b)throw new Ia;const e=this.getConstants();return b.isSimpleReporter()&&!(null==e||!e.FIELD_COLOUR_FULL_BLOCK)}applyColour(){const b=this.getSourceBlock();if(!b)throw new Ia;if(this.fieldGroup_){var e=this.borderRect_;if(!e)throw Error("The border rect has not been initialized");
this.isFullBlockField()?(e.style.display="none",b.pathObject.svgPath.setAttribute("fill",this.getValue()),b.pathObject.svgPath.setAttribute("stroke","#fff")):(e.style.display="block",e.style.fill=this.getValue())}}getSize(){let b;if(null==(b=this.getConstants())?0:b.FIELD_COLOUR_FULL_BLOCK)this.render_(),this.isDirty_=!1;return super.getSize()}render_(){super.render_();const b=this.getSourceBlock();if(!b)throw new Ia;b.applyColour()}updateSize_(b){var e=this.getConstants();this.isFullBlockField()?
(b=2*(null!=b?b:0),e=e.FIELD_TEXT_HEIGHT):(b=e.FIELD_COLOUR_DEFAULT_WIDTH,e=e.FIELD_COLOUR_DEFAULT_HEIGHT);this.size_.height=e;this.size_.width=b;this.positionBorderRect_()}doClassValidation_(b){return"string"!==typeof b?null:Kc(b)}getText(){let b=this.value_;/^#(.)\1(.)\2(.)\3$/.test(b)&&(b="#"+b[1]+b[3]+b[5]);return b}setColours(b,e){this.colours=b;e&&(this.titles=e);return this}setColumns(b){this.columns=b;return this}showEditor_(){this.dropdownCreate();be().appendChild(this.picker);ef(this,this.dropdownDispose.bind(this));
this.picker.focus({preventScroll:!0})}onClick(b){b=(b=b.target)&&b.getAttribute("data-colour");null!==b&&(this.setValue(b),de(this))}onKeyDown(b){let e=!0;var g;switch(b.key){case "ArrowUp":this.moveHighlightBy(0,-1);break;case "ArrowDown":this.moveHighlightBy(0,1);break;case "ArrowLeft":this.moveHighlightBy(-1,0);break;case "ArrowRight":this.moveHighlightBy(1,0);break;case "Enter":if(g=this.getHighlighted())g=g.getAttribute("data-colour"),null!==g&&this.setValue(g);Mb();break;default:e=!1}e&&b.stopPropagation()}moveHighlightBy(b,
e){if(this.highlightedIndex){var g=this.colours||rb.COLOURS,k=this.columns||rb.COLUMNS,n=this.highlightedIndex%k,r=Math.floor(this.highlightedIndex/k);n+=b;r+=e;0>b?0>n&&0<r?(n=k-1,r--):0>n&&(n=0):0<b?n>k-1&&r<Math.floor(g.length/k)-1?(n=0,r++):n>k-1&&n--:0>e?0>r&&(r=0):0<e&&r>Math.floor(g.length/k)-1&&(r=Math.floor(g.length/k)-1);this.setHighlightedCell(this.picker.childNodes[r].childNodes[n],r*k+n)}}onMouseMove(b){const e=(b=b.target)&&Number(b.getAttribute("data-index"));null!==e&&e!==this.highlightedIndex&&
this.setHighlightedCell(b,e)}onMouseEnter(){let b;null==(b=this.picker)||b.focus({preventScroll:!0})}onMouseLeave(){var b;null==(b=this.picker)||b.blur();(b=this.getHighlighted())&&za(b,"blocklyColourHighlighted")}getHighlighted(){if(!this.highlightedIndex)return null;const b=this.columns||rb.COLUMNS,e=this.picker.childNodes[Math.floor(this.highlightedIndex/b)];return e?e.childNodes[this.highlightedIndex%b]:null}setHighlightedCell(b,e){const g=this.getHighlighted();g&&za(g,"blocklyColourHighlighted");
la(b,"blocklyColourHighlighted");this.highlightedIndex=e;(b=b.getAttribute("id"))&&this.picker&&La(this.picker,Ka.ACTIVEDESCENDANT,b)}dropdownCreate(){const b=this.columns||rb.COLUMNS,e=this.colours||rb.COLOURS,g=this.titles||rb.TITLES,k=this.getValue(),n=document.createElement("table");n.className="blocklyColourTable";n.tabIndex=0;n.dir="ltr";Kb(n,jb.GRID);La(n,Ka.EXPANDED,!0);La(n,Ka.ROWCOUNT,Math.floor(e.length/b));La(n,Ka.COLCOUNT,b);let r;for(let w=0;w<e.length;w++){0===w%b&&(r=document.createElement("tr"),
Kb(r,jb.ROW),n.appendChild(r));const x=document.createElement("td");r.appendChild(x);x.setAttribute("data-colour",e[w]);x.title=g[w]||e[w];x.id=aa();x.setAttribute("data-index",`${w}`);Kb(x,jb.GRIDCELL);La(x,Ka.LABEL,e[w]);La(x,Ka.SELECTED,e[w]===k);x.style.backgroundColor=e[w];e[w]===k&&(x.className="blocklyColourSelected",this.highlightedIndex=w)}this.boundEvents.push(H(n,"pointerdown",this,this.onClick,!0));this.boundEvents.push(H(n,"pointermove",this,this.onMouseMove,!0));this.boundEvents.push(H(n,
"pointerenter",this,this.onMouseEnter,!0));this.boundEvents.push(H(n,"pointerleave",this,this.onMouseLeave,!0));this.boundEvents.push(H(n,"keydown",this,this.onKeyDown,!1));this.picker=n}dropdownDispose(){for(const b of this.boundEvents)ca(b);this.boundEvents.length=0;this.highlightedIndex=this.picker=null}static fromJson(b){return new this(b.colour,void 0,b)}};rb.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" ");
rb.TITLES=[];rb.COLUMNS=7;rb.prototype.DEFAULT_VALUE=rb.COLOURS[0];tb("field_colour",rb);yb("\n.blocklyColourTable {\n  border-collapse: collapse;\n  display: block;\n  outline: none;\n  padding: 1px;\n}\n\n.blocklyColourTable>tr>td {\n  border: 0.5px solid #888;\n  box-sizing: border-box;\n  cursor: pointer;\n  display: inline-block;\n  height: 20px;\n  padding: 0;\n  width: 20px;\n}\n\n.blocklyColourTable>tr>td.blocklyColourHighlighted {\n  border-color: #eee;\n  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);\n  position: relative;\n}\n\n.blocklyColourSelected, .blocklyColourSelected:hover {\n  border-color: #eee !important;\n  outline: 1px solid #333;\n  position: relative;\n}\n");
var Ul=class extends Xc{constructor(b,e,g){super(String(null!=b?b:""),e,g);this.EDITABLE=!1;this.SERIALIZABLE=!0}static fromJson(b){return new this(Ra(b.text),void 0,b)}};tb("field_label_serializable",Ul);var Xh=class extends Jd{constructor(b,e,g){super(ua.SKIP_SETUP);this.textGroup=null;this.maxLines_=Infinity;this.isOverflowedY_=!1;b!==ua.SKIP_SETUP&&(g&&this.configure_(g),this.setValue(b),e&&this.setValidator(e))}configure_(b){super.configure_(b);b.maxLines&&this.setMaxLines(b.maxLines)}toXml(b){b.textContent=
this.getValue().replace(/\n/g,"&#10;");return b}fromXml(b){this.setValue(b.textContent.replace(/&#10;/g,"\n"))}saveState(){const b=this.saveLegacyState(Xh);return null!==b?b:this.getValue()}loadState(b){this.loadLegacyState(ua,b)||this.setValue(b)}initView(){this.createBorderRect_();this.textGroup=N(I.G,{"class":"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const b=this.getSourceBlock();if(!b)throw new Ia;let e=this.getText();if(!e)return ua.NBSP;const g=e.split("\n");e="";const k=this.isOverflowedY_?
this.maxLines_:g.length;for(let n=0;n<k;n++){let r=g[n];r.length>this.maxDisplayLength?r=r.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&n===k-1&&(r=r.substring(0,r.length-3)+"...");r=r.replace(/\s/g,ua.NBSP);e+=r;n!==k-1&&(e+="\n")}b.RTL&&(e+="â€");return e}doValueUpdate_(b){super.doValueUpdate_(b);null!==this.value_&&(this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_)}render_(){var b=this.getSourceBlock();if(!b)throw new Ia;for(var e,g=this.textGroup;e=g.firstChild;)g.removeChild(e);
e=this.getDisplayText_().split("\n");let k=0;for(let n=0;n<e.length;n++){const r=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;N(I.TEXT,{"class":"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:k+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},g).appendChild(document.createTextNode(e[n]));k+=r}this.isBeingEdited_&&(g=this.htmlInput_,this.isOverflowedY_?la(g,"blocklyHtmlTextAreaInputOverflowedY"):
za(g,"blocklyHtmlTextAreaInputOverflowedY"));this.updateSize_();this.isBeingEdited_&&(b.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),b=this.htmlInput_,this.isTextValid_?(za(b,"blocklyInvalidInput"),La(b,Ka.INVALID,!1)):(la(b,"blocklyInvalidInput"),La(b,Ka.INVALID,!0)))}updateSize_(){var b=this.textGroup.childNodes;const e=this.getConstants().FIELD_TEXT_FONTSIZE,g=this.getConstants().FIELD_TEXT_FONTWEIGHT,k=this.getConstants().FIELD_TEXT_FONTFAMILY;let n=0,r=0;for(var w=0;w<
b.length;w++){var x=gd(b[w],e,g,k);x>n&&(n=x);r+=this.getConstants().FIELD_TEXT_HEIGHT+(0<w?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){b=String(this.value_).split("\n");w=N(I.TEXT,{"class":"blocklyText blocklyMultilineText"});for(x=0;x<b.length;x++){b[x].length>this.maxDisplayLength&&(b[x]=b[x].substring(0,this.maxDisplayLength));w.textContent=b[x];const P=gd(w,e,g,k);P>n&&(n=P)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(r+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,
n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",`${n}`),this.borderRect_.setAttribute("height",`${r}`));this.size_.width=n;this.size_.height=r;this.positionBorderRect_()}showEditor_(b,e){super.showEditor_(b,e);this.forceRerender()}widgetCreate_(){const b=md(),e=this.workspace_.getScale(),g=document.createElement("textarea");g.className="blocklyHtmlInput blocklyHtmlTextAreaInput";g.setAttribute("spellcheck",String(this.spellcheck_));var k=this.getConstants().FIELD_TEXT_FONTSIZE*
e+"pt";b.style.fontSize=k;g.style.fontSize=k;g.style.borderRadius=Jd.BORDERRADIUS*e+"px";k=this.getConstants().FIELD_BORDER_RECT_X_PADDING*e;const n=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*e/2;g.style.padding=n+"px "+k+"px "+n+"px "+k+"px";k=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;g.style.lineHeight=k*e+"px";b.appendChild(g);g.value=g.defaultValue=this.getEditorText_(this.value_);g.setAttribute("data-untyped-default-value",String(this.value_));
g.setAttribute("data-old-value","");hh?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_();this.bindInputEvents_(g);return g}setMaxLines(b){"number"===typeof b&&0<b&&b!==this.maxLines_&&(this.maxLines_=b,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(b){if("Enter"!==b.key)super.onHtmlInputKeyDown_(b)}static fromJson(b){return new this(Ra(b.text),void 0,b)}};tb("field_multilinetext",Xh);yb("\n.blocklyHtmlTextAreaInput {\n  font-family: monospace;\n  resize: none;\n  overflow: hidden;\n  height: 100%;\n  text-align: left;\n}\n\n.blocklyHtmlTextAreaInputOverflowedY {\n  overflow-y: scroll;\n}\n");
var Yh=class extends Ie{constructor(b,e,g,k,n,r){super(ua.SKIP_SETUP);this.min_=-Infinity;this.max_=Infinity;this.precision_=0;this.decimalPlaces=null;this.spellcheck_=!1;b!==ua.SKIP_SETUP&&(r?this.configure_(r):this.setConstraints(e,g,k),this.setValue(b),n&&this.setValidator(n))}configure_(b){super.configure_(b);this.setMinInternal(b.min);this.setMaxInternal(b.max);this.setPrecisionInternal(b.precision)}setConstraints(b,e,g){this.setMinInternal(b);this.setMaxInternal(e);this.setPrecisionInternal(g);
this.setValue(this.getValue())}setMin(b){this.setMinInternal(b);this.setValue(this.getValue())}setMinInternal(b){null==b?this.min_=-Infinity:(b=Number(b),isNaN(b)||(this.min_=b))}getMin(){return this.min_}setMax(b){this.setMaxInternal(b);this.setValue(this.getValue())}setMaxInternal(b){null==b?this.max_=Infinity:(b=Number(b),isNaN(b)||(this.max_=b))}getMax(){return this.max_}setPrecision(b){this.setPrecisionInternal(b);this.setValue(this.getValue())}setPrecisionInternal(b){this.precision_=Number(b)||
0;let e=String(this.precision_);-1!==e.indexOf("e")&&(e=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const g=e.indexOf(".");this.decimalPlaces=-1===g?b?0:null:e.length-g-1}getPrecision(){return this.precision_}doClassValidation_(b){if(null===b)return null;b=`${b}`.replace(/O/gi,"0");b=b.replace(/,/g,"");b=b.replace(/infinity/i,"Infinity");b=Number(b||0);if(isNaN(b))return null;b=Math.min(Math.max(b,this.min_),this.max_);this.precision_&&isFinite(b)&&(b=Math.round(b/this.precision_)*
this.precision_);null!==this.decimalPlaces&&(b=Number(b.toFixed(this.decimalPlaces)));return b}widgetCreate_(){const b=super.widgetCreate_();-Infinity<this.min_&&(b.min=`${this.min_}`,La(b,Ka.VALUEMIN,this.min_));Infinity>this.max_&&(b.max=`${this.max_}`,La(b,Ka.VALUEMAX,this.max_));return b}static fromJson(b){return new this(b.value,void 0,void 0,void 0,void 0,b)}};tb("field_number",Yh);Yh.prototype.DEFAULT_VALUE=0;var Je=class extends Nb{constructor(b,e,g,k,n){super(ua.SKIP_SETUP);this.defaultType=
"";this.variableTypes=[];this.variable=null;this.SERIALIZABLE=!0;this.menuGenerator_=Je.dropdownCreate;this.defaultVariableName="string"===typeof b?b:"";this.size_=new Ja(0,0);b!==ua.SKIP_SETUP&&(n?this.configure_(n):this.setTypes(g,k),e&&this.setValidator(e))}configure_(b){super.configure_(b);this.setTypes(b.variableTypes,b.defaultType)}initModel(){var b=this.getSourceBlock();if(!b)throw new Ia;this.variable||(b=a.getOrCreateVariablePackage$$module$build$src$core$variables(b.workspace,null,this.defaultVariableName,
this.defaultType),this.doValueUpdate_(b.getId()))}shouldAddBorderRect_(){const b=this.getSourceBlock();if(!b)throw new Ia;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!==b.type)}fromXml(b){var e=this.getSourceBlock();if(!e)throw new Ia;const g=b.getAttribute("id"),k=b.textContent,n=b.getAttribute("variabletype")||b.getAttribute("variableType")||"";e=a.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,g,k,n);if(null!==
n&&n!==e.type)throw Error("Serialized variable type with id '"+e.getId()+"' had type "+e.type+", and does not match variable field that references it: "+Zb(b)+".");this.setValue(e.getId())}toXml(b){this.initModel();b.id=this.variable.getId();b.textContent=this.variable.name;this.variable.type&&b.setAttribute("variabletype",this.variable.type);return b}saveState(b){var e=this.saveLegacyState(Je);if(null!==e)return e;this.initModel();e={id:this.variable.getId()};b&&(e.name=this.variable.name,e.type=
this.variable.type);return e}loadState(b){const e=this.getSourceBlock();if(!e)throw new Ia;this.loadLegacyState(Je,b)||(b=a.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,b.id||null,b.name,b.type||""),this.setValue(b.getId()))}setSourceBlock(b){if(b.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(b)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?
this.validator_:null}doClassValidation_(b){if(null===b)return null;var e=this.getSourceBlock();if(!e)throw new Ia;e=a.getVariable$$module$build$src$core$variables(e.workspace,b);if(!e)return console.warn("Variable id doesn't point to a real variable! ID was "+b),null;e=e.type;return this.typeIsAllowed(e)?b:(console.warn("Variable type doesn't match this field!  Type was "+e),null)}doValueUpdate_(b){const e=this.getSourceBlock();if(!e)throw new Ia;this.variable=a.getVariable$$module$build$src$core$variables(e.workspace,
b);super.doValueUpdate_(b)}typeIsAllowed(b){const e=this.getVariableTypes();if(!e)return!0;for(let g=0;g<e.length;g++)if(b===e[g])return!0;return!1}getVariableTypes(){var b=this.variableTypes;if(null===b&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();b=b||[""];if(0===b.length)throw b=this.getText(),Error("'variableTypes' of field variable "+b+" was an empty list");return b}setTypes(b=null,e=""){if(Array.isArray(b)){let g=!1;for(let k=0;k<
b.length;k++)b[k]===e&&(g=!0);if(!g)throw Error("Invalid default type '"+e+"' in the definition of a FieldVariable");}else if(null!==b)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=e;this.variableTypes=b}refreshVariableName(){this.forceRerender()}onItemSelected_(b,e){b=e.getValue();if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if("RENAME_VARIABLE_ID"===b){a.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,
this.variable);return}if("DELETE_VARIABLE_ID"===b){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(b)}referencesVariables(){return!0}static fromJson(b){return new this(Ra(b.variable),void 0,void 0,void 0,b)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const b=this.getText();let e=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var g=this.getVariableTypes(),
k=0;k<g.length;k++){const n=this.sourceBlock_.workspace.getVariablesOfType(g[k]);e=e.concat(n)}e.sort(Ud.compareByName);g=[];for(k=0;k<e.length;k++)g[k]=[e[k].name,e[k].getId()];g.push([a.Msg$$module$build$src$core$msg.RENAME_VARIABLE,"RENAME_VARIABLE_ID"]);a.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&g.push([a.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",b),"DELETE_VARIABLE_ID"]);return g}};tb("field_variable",Je);var Eb=class{constructor(b,e,g,k){this.workspace=b;this.targetWorkspace=
e;this.isLabel_=k;this.onMouseUpWrapper=null;this.height=this.width=0;this.svgText=this.svgGroup=null;this.text=g.text;this.position=new Z(0,0);this.callbackKey=g.callbackKey||g.callbackkey;this.cssClass=g["web-class"]||null;this.info=g}createDom(){var b=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(b+=" "+this.cssClass);this.svgGroup=N(I.G,{"class":b},this.workspace.getCanvas());let e;this.isLabel_||(e=N(I.RECT,{"class":"blocklyFlyoutButtonShadow",rx:Eb.BORDER_RADIUS,ry:Eb.BORDER_RADIUS,
x:1,y:1},this.svgGroup));b=N(I.RECT,{"class":this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Eb.BORDER_RADIUS,ry:Eb.BORDER_RADIUS},this.svgGroup);const g=N(I.TEXT,{"class":this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var k=Ra(this.text);this.workspace.RTL&&(k+="â€");g.textContent=k;this.isLabel_&&(this.svgText=g,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const n=Yb(g,
"fontSize"),r=Yb(g,"fontWeight"),w=Yb(g,"fontFamily");this.width=Pf(g,n,r,w);k=Qf(k,n,r,w);this.height=k.height;if(!this.isLabel_){this.width+=2*Eb.TEXT_MARGIN_X;this.height+=2*Eb.TEXT_MARGIN_Y;let x;null==(x=e)||x.setAttribute("width",String(this.width));let P;null==(P=e)||P.setAttribute("height",String(this.height))}b.setAttribute("width",String(this.width));b.setAttribute("height",String(this.height));g.setAttribute("x",String(this.width/2));g.setAttribute("y",String(this.height/2-k.height/2+k.baseline));
this.updateTransform();this.onMouseUpWrapper=H(this.svgGroup,"pointerup",this,this.onMouseUp);return this.svgGroup}show(){this.updateTransform();this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(b,e){this.position.x=b;this.position.y=e;this.updateTransform()}isLabel(){return this.isLabel_}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper&&
ca(this.onMouseUpWrapper);this.svgGroup&&Da(this.svgGroup);this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}onMouseUp(b){(b=this.targetWorkspace.getGesture(b))&&b.cancel();this.isLabel_&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isLabel_||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isLabel_||(b=this.targetWorkspace.getButtonCallback(this.callbackKey))&&b(this):console.warn("Buttons should have callbacks. Button text: "+
this.text)}};Eb.TEXT_MARGIN_X=5;Eb.TEXT_MARGIN_Y=2;Eb.BORDER_RADIUS=4;yb("\n.blocklyFlyoutButton {\n  fill: #888;\n  cursor: default;\n}\n\n.blocklyFlyoutButtonShadow {\n  fill: #666;\n}\n\n.blocklyFlyoutButton:hover {\n  fill: #aaa;\n}\n\n.blocklyFlyoutLabel {\n  cursor: default;\n}\n\n.blocklyFlyoutLabelBackground {\n  opacity: 0;\n}\n");var Vl=class extends Lh{constructor(b,e){super(b);this.flyout_=e}getBoundingBox_(){let b;try{b=this.workspace_.getCanvas().getBBox()}catch(e){b={height:0,y:0,width:0,
x:0}}return b}getContentMetrics(b){const e=this.getBoundingBox_();b=b?1:this.workspace_.scale;return{height:e.height*b,width:e.width*b,top:e.y*b,left:e.x*b}}getScrollMetrics(b,e,g){e=g||this.getContentMetrics();g=this.flyout_.MARGIN*this.workspace_.scale;b=b?this.workspace_.scale:1;return{height:(e.height+2*g)/b,width:(e.width+e.left+g)/b,top:0,left:0}}},Ke;(function(b){b.BLOCK="block";b.BUTTON="button"})(Ke||={});var Hf=class extends Df{constructor(b){super();this.horizontalLayout=!1;this.boundEvents=
[];this.filterWrapper=this.reflowWrapper=null;this.mats=[];this.buttons_=[];this.listeners=[];this.permanentlyDisabled=[];this.recycledBlocks=[];this.autoClose=!0;this.isVisible_=!1;this.containerVisible=!0;this.CORNER_RADIUS=8;this.SCROLLBAR_MARGIN=2.5;this.height_=this.width_=0;this.dragAngleRange_=70;this.svgGroup_=this.svgBackground_=null;b.setMetrics=this.setMetrics_.bind(this);this.workspace_=new Ab(b);this.workspace_.setMetricsManager(new Vl(this.workspace_,this));this.workspace_.internalIsFlyout=
!0;this.workspace_.setVisible(this.isVisible_);this.id=R();this.RTL=!!b.RTL;this.toolboxPosition_=b.toolboxPosition;this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH;this.rectMap_=new WeakMap;this.MARGIN=this.CORNER_RADIUS;this.GAP_X=3*this.MARGIN;this.GAP_Y=3*this.MARGIN}createDom(b){this.svgGroup_=N(b,{"class":"blocklyFlyout"});this.svgGroup_.style.display="none";this.svgBackground_=N(I.PATH,{"class":"blocklyFlyoutBackground"},this.svgGroup_);this.svgGroup_.appendChild(this.workspace_.createDom());
this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill");this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity");return this.svgGroup_}init(b){this.targetWorkspace=b;this.workspace_.targetWorkspace=b;this.workspace_.scrollbar=new ch(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN);this.hide();this.boundEvents.push(H(this.svgGroup_,"wheel",this,this.wheel_));this.filterWrapper=
this.filterForCapacity.bind(this);this.targetWorkspace.addChangeListener(this.filterWrapper);this.boundEvents.push(H(this.svgBackground_,"pointerdown",this,this.onMouseDown));this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace);this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap());this.workspace_.createPotentialVariableMap();b.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ua.Capability.AUTOHIDEABLE,Ua.Capability.DELETE_AREA,
Ua.Capability.DRAG_TARGET]})}dispose(){this.hide();this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const b of this.boundEvents)ca(b);this.boundEvents.length=0;this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper);this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose());this.svgGroup_&&Da(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(b){this.autoClose=
b;this.targetWorkspace.recordDragTargets();this.targetWorkspace.resizeContents()}autoHide(b){!b&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}isVisible(){return this.isVisible_}setVisible(b){const e=b!==this.isVisible();this.isVisible_=b;e&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(b){const e=b!==this.containerVisible;this.containerVisible=b;e&&this.updateDisplay()}updateDisplay(){let b;b=this.containerVisible?this.isVisible():
!1;this.svgGroup_&&(this.svgGroup_.style.display=b?"block":"none");let e;null==(e=this.workspace_.scrollbar)||e.setContainerVisible(b)}positionAt_(b,e,g,k){let n;null==(n=this.svgGroup_)||n.setAttribute("width",`${b}`);let r;null==(r=this.svgGroup_)||r.setAttribute("height",`${e}`);this.workspace_.setCachedParentSvgSize(b,e);this.svgGroup_&&Nf(this.svgGroup_,"translate("+g+"px,"+k+"px)");if(b=this.workspace_.scrollbar)b.setOrigin(g,k),b.resize(),b.hScroll&&b.hScroll.setPosition(b.hScroll.position.x,
b.hScroll.position.y),b.vScroll&&b.vScroll.setPosition(b.vScroll.position.x,b.vScroll.position.y)}hide(){if(this.isVisible()){this.setVisible(!1);for(const b of this.listeners)ca(b);this.listeners.length=0;this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(b){this.workspace_.setResizesEnabled(!1);this.hide();this.clearOldBlocks();"string"===typeof b&&(b=this.getDynamicCategoryContents(b));this.setVisible(!0);b=Ve(b);b=this.createFlyoutInfo(b);
Ib(this.workspace_);this.layout_(b.contents,b.gaps);this.horizontalLayout?this.height_=0:this.width_=0;this.workspace_.setResizesEnabled(!0);this.reflow();this.filterForCapacity();this.position();this.reflowWrapper=this.reflow.bind(this);this.workspace_.addChangeListener(this.reflowWrapper);this.emptyRecycledBlocks()}createFlyoutInfo(b){const e=[],g=[];this.permanentlyDisabled.length=0;const k=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const n of b){if("custom"in n){b=this.getDynamicCategoryContents(n.custom);
b=Ve(b);const {contents:r,gaps:w}=this.createFlyoutInfo(b);e.push(...r);g.push(...w)}switch(n.kind.toUpperCase()){case "BLOCK":b=n;const r=this.createFlyoutBlock(b);e.push({type:Ke.BLOCK,block:r});this.addBlockGap(b,g,k);break;case "SEP":this.addSeparatorGap(n,g,k);break;case "LABEL":b=this.createButton(n,!0);e.push({type:Ke.BUTTON,button:b});g.push(k);break;case "BUTTON":b=this.createButton(n,!1),e.push({type:Ke.BUTTON,button:b}),g.push(k)}}return{contents:e,gaps:g}}getDynamicCategoryContents(b){b=
this.workspace_.targetWorkspace.getToolboxCategoryCallback(b);if("function"!==typeof b)throw TypeError("Couldn't find a callback function when opening a toolbox category.");return b(this.workspace_.targetWorkspace)}createButton(b,e){return new Eb(this.workspace_,this.targetWorkspace,b,e)}createFlyoutBlock(b){let e;b.blockxml?(b="string"===typeof b.blockxml?a.textToDom$$module$build$src$core$utils$xml(b.blockxml):b.blockxml,(e=this.getRecycledBlock(b.getAttribute("type")))||(e=Ec(b,this.workspace_))):
(e=this.getRecycledBlock(b.type),e||(void 0===b.enabled&&(b.enabled="true"!==b.disabled&&!0!==b.disabled),e=Xd(b,this.workspace_)));e.isEnabled()||this.permanentlyDisabled.push(e);return e}getRecycledBlock(b){let e=-1;for(let g=0;g<this.recycledBlocks.length;g++)if(this.recycledBlocks[g].type===b){e=g;break}return-1===e?void 0:this.recycledBlocks.splice(e,1)[0]}addBlockGap(b,e,g){let k;b.gap?k=parseInt(String(b.gap)):b.blockxml&&(b="string"===typeof b.blockxml?a.textToDom$$module$build$src$core$utils$xml(b.blockxml):
b.blockxml,k=parseInt(b.getAttribute("gap")));e.push(!k||isNaN(k)?g:k)}addSeparatorGap(b,e,g){b=parseInt(String(b.gap));!isNaN(b)&&0<e.length?e[e.length-1]=b:e.push(g)}clearOldBlocks(){var b=this.workspace_.getTopBlocks(!1);for(let g=0,k;k=b[g];g++)this.blockIsRecyclable_(k)?this.recycleBlock(k):k.dispose(!1,!1);for(b=0;b<this.mats.length;b++){const g=this.mats[b];g&&(Gg(g),Da(g))}this.mats.length=0;for(let g=0,k;k=this.buttons_[g];g++)k.dispose();this.buttons_.length=0;let e;null==(e=this.workspace_.getPotentialVariableMap())||
e.clear()}emptyRecycledBlocks(){for(let b=0;b<this.recycledBlocks.length;b++)this.recycledBlocks[b].dispose();this.recycledBlocks=[]}blockIsRecyclable_(b){return!1}recycleBlock(b){const e=b.getRelativeToSurfaceXY();b.moveBy(-e.x,-e.y);this.recycledBlocks.push(b)}addBlockListeners_(b,e,g){this.listeners.push(H(b,"pointerdown",null,this.blockMouseDown(e)));this.listeners.push(H(g,"pointerdown",null,this.blockMouseDown(e)));this.listeners.push(V(b,"pointerenter",e,()=>{this.targetWorkspace.isDragging()||
e.addSelect()}));this.listeners.push(V(b,"pointerleave",e,()=>{this.targetWorkspace.isDragging()||e.removeSelect()}));this.listeners.push(V(g,"pointerenter",e,()=>{this.targetWorkspace.isDragging()||e.addSelect()}));this.listeners.push(V(g,"pointerleave",e,()=>{this.targetWorkspace.isDragging()||e.removeSelect()}))}blockMouseDown(b){return e=>{const g=this.targetWorkspace.getGesture(e);g&&(g.setStartBlock(b),g.handleFlyoutStart(e,this))}}onMouseDown(b){const e=this.targetWorkspace.getGesture(b);e&&
e.handleFlyoutStart(b,this)}isBlockCreatable(b){return b.isEnabled()}createBlock(b){let e=null;a.disable$$module$build$src$core$events$utils();var g=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{e=this.placeNewBlock(b)}finally{a.enable$$module$build$src$core$events$utils()}this.targetWorkspace.hideChaff();b=hg(this.targetWorkspace,g);if(wa()){a.setGroup$$module$build$src$core$events$utils(!0);for(g=0;g<b.length;g++){const k=b[g];ba(new (ja(ld))(k))}ba(new (ja(a.CREATE$$module$build$src$core$events$utils))(e))}this.autoClose?
this.hide():this.filterForCapacity();return e}initFlyoutButton_(b,e,g){const k=b.createDom();b.moveTo(e,g);b.show();this.listeners.push(H(k,"pointerdown",this,this.onMouseDown));this.buttons_.push(b)}createRect_(b,e,g,k,n){e=N(I.RECT,{"fill-opacity":0,x:e,y:g,height:k.height,width:k.width});e.tooltip=b;he(e);this.workspace_.getCanvas().insertBefore(e,b.getSvgRoot());this.rectMap_.set(b,e);return this.mats[n]=e}moveRectToBlock_(b,e){const g=e.getHeightWidth();b.setAttribute("width",String(g.width));
b.setAttribute("height",String(g.height));e=e.getRelativeToSurfaceXY();b.setAttribute("y",String(e.y));b.setAttribute("x",String(this.RTL?e.x-g.width:e.x))}filterForCapacity(){const b=this.workspace_.getTopBlocks(!1);for(let e=0,g;g=b[e];e++)if(-1===this.permanentlyDisabled.indexOf(g)){const k=this.targetWorkspace.isCapacityAvailable(Y(g));for(;g;)g.setEnabled(k),g=g.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper);this.reflowInternal_();this.reflowWrapper&&
this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(b){var e=this.targetWorkspace;if(!b.getSvgRoot())throw Error("oldBlock is not rendered");const g=$b(b);e.setResizesEnabled(!1);e=Fc(g,e);this.positionNewBlock(b,e);return e}positionNewBlock(b,e){const g=this.targetWorkspace;var k=g.getOriginOffsetInPixels(),n=this.workspace_.getOriginOffsetInPixels();b=b.getRelativeToSurfaceXY();b.scale(this.workspace_.scale);
n=Z.sum(n,b);k=Z.difference(n,k);k.scale(1/g.scale);e.moveTo(new Z(k.x,k.y))}};Hf.FlyoutItemType=Ke;var Wl=class extends Hf{constructor(b){super(b);this.horizontalLayout=!0}setMetrics_(b){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),g=e.getScrollMetrics(),k=e.getViewMetrics();e=e.getAbsoluteMetrics();"number"===typeof b.x&&(this.workspace_.scrollX=-(g.left+(g.width-k.width)*b.x));this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;
var b=this.targetWorkspace.getMetricsManager();const e=b.getAbsoluteMetrics(),g=b.getViewMetrics();b=b.getToolboxMetrics();const k=this.toolboxPosition_===pa.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?k?b.height:g.height-this.height_:k?0:g.height:k?0:g.height+e.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var b=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=b.width;this.setBackgroundPath(b.width-
2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS);b=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,b,e)}}setBackgroundPath(b,e){const g=this.toolboxPosition_===pa.TOP,k=["M 0,"+(g?0:this.CORNER_RADIUS)];g?(k.push("h",b+2*this.CORNER_RADIUS),k.push("v",e),k.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),k.push("h",-b),k.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(k.push("a",
this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),k.push("h",b),k.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),k.push("v",e),k.push("h",-b-2*this.CORNER_RADIUS));k.push("z");this.svgBackground_.setAttribute("d",k.join(" "))}scrollToStart(){let b;null==(b=this.workspace_.scrollbar)||b.setX(this.RTL?Infinity:0)}wheel_(b){var e=Qe(b);if(e=e.x||e.y){const g=this.workspace_.getMetricsManager(),k=g.getScrollMetrics();e=g.getViewMetrics().left-
k.left+e;let n;null==(n=this.workspace_.scrollbar)||n.setX(e);zb();Mb()}b.preventDefault();b.stopPropagation()}layout_(b,e){this.workspace_.scale=this.targetWorkspace.scale;const g=this.MARGIN;let k=g+this.tabWidth_;this.RTL&&(b=b.reverse());for(let x=0,P;P=b[x];x++)if("block"===P.type){var n=P.block,r=n.getDescendants(!1);for(let Oa=0,Ha;Ha=r[Oa];Oa++)Ha.isInFlyout=!0;r=n.getSvgRoot();const ea=n.getHeightWidth();var w=n.outputConnection?this.tabWidth_:0;w=this.RTL?k+ea.width:k-w;n.moveBy(w,g);w=
this.createRect_(n,w,g,ea,x);k+=ea.width+e[x];this.addBlockListeners_(r,n,w)}else"button"===P.type&&(n=P.button,this.initFlyoutButton_(n,k,g),k+=n.width+e[x])}isDragTowardWorkspace(b){b=Math.atan2(b.y,b.x)/Math.PI*180;const e=this.dragAngleRange_;return b<90+e&&b>90-e||b>-90-e&&b<-90+e?!0:!1}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const b=this.svgGroup_.getBoundingClientRect(),e=b.top;return this.toolboxPosition_===pa.TOP?new Ga(-1E9,e+b.height,-1E9,1E9):
new Ga(e,1E9,-1E9,1E9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let b=0;const e=this.workspace_.getTopBlocks(!1);for(let k=0,n;n=e[k];k++)b=Math.max(b,n.getHeightWidth().height);const g=this.buttons_;for(let k=0,n;n=g[k];k++)b=Math.max(b,n.height);b+=1.5*this.MARGIN;b*=this.workspace_.scale;b+=Qa.scrollbarThickness;if(this.height_!==b){for(let k=0,n;n=e[k];k++)this.rectMap_.has(n)&&this.moveRectToBlock_(this.rectMap_.get(n),n);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==
this||this.toolboxPosition_!==pa.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+b);this.height_=b;this.position();this.targetWorkspace.resizeContents();this.targetWorkspace.recordDragTargets()}}};d(U.FLYOUTS_HORIZONTAL_TOOLBOX,Gb,Wl);var Zh=class extends Hf{constructor(b){super(b)}setMetrics_(b){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),g=e.getScrollMetrics(),k=e.getViewMetrics();e=e.getAbsoluteMetrics();"number"===typeof b.y&&(this.workspace_.scrollY=
-(g.top+(g.height-k.height)*b.y));this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}}getX(){if(!this.isVisible())return 0;var b=this.targetWorkspace.getMetricsManager();const e=b.getAbsoluteMetrics(),g=b.getViewMetrics();b=b.getToolboxMetrics();return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===pa.LEFT?b.width:g.width-this.width_:this.toolboxPosition_===pa.LEFT?0:g.width:this.toolboxPosition_===
pa.LEFT?0:g.width+e.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var b=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=b.height;this.setBackgroundPath(this.width_-this.CORNER_RADIUS,b.height-2*this.CORNER_RADIUS);b=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,b,e)}}setBackgroundPath(b,e){const g=this.toolboxPosition_===pa.RIGHT;var k=b+this.CORNER_RADIUS;k=["M "+(g?k:0)+",0"];k.push("h",g?-b:b);
k.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,g?0:1,g?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS);k.push("v",Math.max(0,e));k.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,g?0:1,g?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS);k.push("h",g?b:-b);k.push("z");this.svgBackground_.setAttribute("d",k.join(" "))}scrollToStart(){let b;null==(b=this.workspace_.scrollbar)||b.setY(0)}wheel_(b){var e=Qe(b);if(e.y){const g=this.workspace_.getMetricsManager(),k=g.getScrollMetrics();
e=g.getViewMetrics().top-k.top+e.y;let n;null==(n=this.workspace_.scrollbar)||n.setY(e);zb();Mb()}b.preventDefault();b.stopPropagation()}layout_(b,e){this.workspace_.scale=this.targetWorkspace.scale;var g=this.MARGIN;const k=this.RTL?g:g+this.tabWidth_;for(let x=0,P;P=b[x];x++)if("block"===P.type){var n=P.block,r=n.getDescendants(!1);for(let Oa=0,Ha;Ha=r[Oa];Oa++)Ha.isInFlyout=!0;r=n.getSvgRoot();const ea=n.getHeightWidth();var w=n.outputConnection?k-this.tabWidth_:k;n.moveBy(w,g);w=this.createRect_(n,
this.RTL?w-ea.width:w,g,ea,x);this.addBlockListeners_(r,n,w);g+=ea.height+e[x]}else"button"===P.type&&(n=P.button,this.initFlyoutButton_(n,k,g),g+=n.height+e[x])}isDragTowardWorkspace(b){b=Math.atan2(b.y,b.x)/Math.PI*180;const e=this.dragAngleRange_;return b<e&&b>-e||b<-180+e||b>180-e?!0:!1}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const b=this.svgGroup_.getBoundingClientRect(),e=b.left;return this.toolboxPosition_===pa.LEFT?new Ga(-1E9,1E9,-1E9,e+b.width):
new Ga(-1E9,1E9,e,1E9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let b=0;var e=this.workspace_.getTopBlocks(!1);for(let k=0,n;n=e[k];k++){var g=n.getHeightWidth().width;n.outputConnection&&(g-=this.tabWidth_);b=Math.max(b,g)}for(let k=0,n;n=this.buttons_[k];k++)b=Math.max(b,n.width);b+=1.5*this.MARGIN+this.tabWidth_;b*=this.workspace_.scale;b+=Qa.scrollbarThickness;if(this.width_!==b){for(let k=0,n;n=e[k];k++){if(this.RTL){g=n.getRelativeToSurfaceXY().x;let r=b/this.workspace_.scale-
this.MARGIN;n.outputConnection||(r-=this.tabWidth_);n.moveBy(r-g,0)}this.rectMap_.has(n)&&this.moveRectToBlock_(this.rectMap_.get(n),n)}if(this.RTL)for(let k=0,n;n=this.buttons_[k];k++)e=n.getPosition().y,n.moveTo(b/this.workspace_.scale-n.width-this.MARGIN-this.tabWidth_,e);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==pa.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+b,this.targetWorkspace.scrollY);this.width_=
b;this.position();this.targetWorkspace.resizeContents();this.targetWorkspace.recordDragTargets()}}};Zh.registryName="verticalFlyout";d(U.FLYOUTS_VERTICAL_TOOLBOX,Gb,Zh);a.CodeGenerator$$module$build$src$core$generator=class{constructor(b){this.forBlock=Object.create(null);this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}";this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null;this.INDENT="  ";this.COMMENT_WRAP=60;this.ORDER_OVERRIDES=[];this.isInitialized=null;this.RESERVED_WORDS_=
"";this.definitions_=Object.create(null);this.functionNames_=Object.create(null);this.nameDB_=void 0;this.name_=b;this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(b){b||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),b=G());var e=[];this.init(b);b=b.getTopBlocks(!0);for(let g=0,k;k=b[g];g++){let n=this.blockToCode(k);Array.isArray(n)&&(n=n[0]);n&&(k.outputConnection&&(n=this.scrubNakedValue(n),this.STATEMENT_PREFIX&&
!k.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,k)+n),this.STATEMENT_SUFFIX&&!k.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,k))),e.push(n))}e=e.join("\n");e=this.finish(e);e=e.replace(/^\s+\n/,"");e=e.replace(/\n\s+$/,"\n");return e.replace(/[ \t]+\n/g,"\n")}prefixLines(b,e){return e+b.replace(/(?!\n$)\n/g,"\n"+e)}allNestedComments(b){const e=[];b=b.getDescendants(!0);for(let g=0;g<b.length;g++){const k=b[g].getCommentText();k&&e.push(k)}e.length&&e.push("");return e.join("\n")}blockToCode(b,
e){!1===this.isInitialized&&console.warn("CodeGenerator init was not called before blockToCode was called.");if(!b)return"";if(!b.isEnabled())return e?"":this.blockToCode(b.getNextBlock());if(b.isInsertionMarker())return e?"":this.blockToCode(b.getChildren(!1)[0]);var g=this.forBlock[b.type];!g&&this[b.type]&&(Na("block generator functions on CodeGenerator objects","10.0","11.0","the .forBlock[blockType] dictionary"),g=this[b.type]);if("function"!==typeof g)throw Error(`${this.name_} generator does not know how to generate code `+
`for block type "${b.type}".`);g=g.call(b,b,this);if(Array.isArray(g)){if(!b.outputConnection)throw TypeError("Expecting string from statement block: "+b.type);return[this.scrub_(b,g[0],e),g[1]]}if("string"===typeof g)return this.STATEMENT_PREFIX&&!b.suppressPrefixSuffix&&(g=this.injectId(this.STATEMENT_PREFIX,b)+g),this.STATEMENT_SUFFIX&&!b.suppressPrefixSuffix&&(g+=this.injectId(this.STATEMENT_SUFFIX,b)),this.scrub_(b,g,e);if(null===g)return"";throw SyntaxError("Invalid code generated: "+g);}valueToCode(b,
e,g){if(isNaN(g))throw TypeError("Expecting valid order from block: "+b.type);var k=b.getInputTargetBlock(e);if(!k)return"";e=this.blockToCode(k);if(""===e)return"";if(!Array.isArray(e))throw TypeError(`Expecting tuple from value block: ${k.type} See `+"developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information");b=e[0];e=e[1];if(isNaN(e))throw TypeError("Expecting valid order from value block: "+k.type);if(!b)return"";k=!1;var n=Math.floor(g);const r=Math.floor(e);
if(n<=r&&(n!==r||0!==n&&99!==n))for(k=!0,n=0;n<this.ORDER_OVERRIDES.length;n++)if(this.ORDER_OVERRIDES[n][0]===g&&this.ORDER_OVERRIDES[n][1]===e){k=!1;break}k&&(b="("+b+")");return b}statementToCode(b,e){b=b.getInputTargetBlock(e);e=this.blockToCode(b);if("string"!==typeof e)throw TypeError("Expecting code from statement block: "+(b&&b.type));e&&=this.prefixLines(e,this.INDENT);return e}addLoopTrap(b,e){this.INFINITE_LOOP_TRAP&&(b=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,e),this.INDENT)+
b);this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(b=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,e),this.INDENT)+b);this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(b+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,e),this.INDENT));return b}injectId(b,e){e=e.id.replace(/\$/g,"$$$$");return b.replace(/%1/g,"'"+e+"'")}addReservedWords(b){this.RESERVED_WORDS_+=b+","}provideFunction_(b,e){if(!this.definitions_[b]){const g=this.nameDB_.getDistinctName(b,a.NameType$$module$build$src$core$names.PROCEDURE);
this.functionNames_[b]=g;Array.isArray(e)&&(e=e.join("\n"));e=e.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,g);let k;for(;k!==e;)k=e,e=e.replace(/^(( {2})*) {2}/gm,"$1\x00");e=e.replace(/\0/g,this.INDENT);this.definitions_[b]=e}return this.functionNames_[b]}getVariableName(b){return this.getName(b,a.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(b){return this.getName(b,a.NameType$$module$build$src$core$names.PROCEDURE)}getName(b,e){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");
return this.nameDB_.getName(b,e)}init(b){this.definitions_=Object.create(null);this.functionNames_=Object.create(null)}scrub_(b,e,g){return e}finish(b){this.definitions_=Object.create(null);this.functionNames_=Object.create(null);return b}scrubNakedValue(b){return b}};var Sk=!1,yc={};yc.Align=a.Align$$module$build$src$core$inputs$align;yc.DummyInput=Ub;yc.EndRowInput=jc;yc.Input=wc;yc.StatementInput=pb;yc.ValueInput=a.ValueInput$$module$build$src$core$inputs$value_input;yc.inputTypes=a.inputTypes$$module$build$src$core$inputs$input_types;
var Xl=class{constructor(b){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null;this.workspace=b.workspace}previewReplacement(b,e,g){a.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=g,g.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(e)&&(e.highlight(),this.staticConn=e)}finally{a.enable$$module$build$src$core$events$utils()}}previewConnection(b,e){if(b!==this.draggedConn||e!==this.staticConn){a.disable$$module$build$src$core$events$utils();
try{this.hidePreview(),this.shouldUseMarkerPreview(b,e)&&(this.markerConn=this.previewMarker(b,e)),this.workspace.getRenderer().shouldHighlightConnection(e)&&e.highlight(),this.draggedConn=b,this.staticConn=e}finally{a.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(b,e){return e.type===fa.PREVIOUS_STATEMENT||e.type===fa.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof Vh)}previewMarker(b,e){const g=b.getSourceBlock(),k=this.createInsertionMarker(g),n=this.getMatchingConnection(g,
k,b);if(!n)throw Error("Could not create insertion marker to preview connection");k.queueRender();Ib();n.connect(e);const r={x:e.x-n.x,y:e.y-n.y},w=n.getOffsetInBlock().clone();id().then(()=>{null==k||k.positionNearConnection(n,r,w);null==k||k.getSvgRoot().setAttribute("visibility","visible")});return n}createInsertionMarker(b){const e=this.workspace.newBlock(b.type);e.setInsertionMarker(!0);e.setInputsInline(b.getInputsInline());if(b.saveExtraState){var g=b.saveExtraState(!0);g&&e.loadExtraState&&
e.loadExtraState(g)}else b.mutationToDom&&(g=b.mutationToDom())&&e.domToMutation&&e.domToMutation(g);for(g=0;g<b.inputList.length;g++){const k=b.inputList[g];if("_TEMP_COLLAPSED_INPUT"===k.name)continue;const n=e.inputList[g];if(!n)throw Error("The insertion marker previewer tried to create a marker but the result is missing an input. If you are using a mutator, make sure your domToMutation method is properly defined.");for(let r=0;r<k.fieldRow.length;r++){const w=k.fieldRow[r],x=n.fieldRow[r];if(!x)throw Error("The insertion marker previewer tried to create a marker but the result is missing a field. If you are using a mutator, make sure your domToMutation method is properly defined.");
x.setValue(w.getValue())}}for(const k of e.getDescendants(!1))k.setInsertionMarker(!0);e.setCollapsed(b.isCollapsed());e.setInputsInline(b.getInputsInline());e.initSvg();e.getSvgRoot().setAttribute("visibility","hidden");return e}getMatchingConnection(b,e,g){b=b.getConnections_(!0);e=e.getConnections_(!0);if(b.length!==e.length)return null;for(let k=0;k<b.length;k++)if(b[k]===g)return e[k];return null}hidePreview(){a.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),
this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{a.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(b){const e=b.getSourceBlock(),g=e.outputConnection;let k;if((null==(k=e.previousConnection)?0:k.targetConnection)||(null==g?0:g.targetConnection))e.unplug(!0);else{let n;null==(n=b.targetBlock())||n.unplug(!1)}e.dispose()}dispose(){this.hidePreview()}};
d(U.CONNECTION_PREVIEWER,Gb,Xl);var Yl=class extends Be{constructor(){super();this.FIELD_TEXT_BASELINE_CENTER=!1;this.DARK_PATH_OFFSET=1;this.MAX_BOTTOM_WIDTH=30;this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(b){return super.getCSS_(b).concat([`${b} .blocklyInsertionMarker>.blocklyPathLight,`,`${b} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},Zl=class{constructor(b){this.inlineSteps_=this.steps_="";this.info_=b;this.RTL_=
this.info_.RTL;b=b.getRenderer();this.constants_=b.getConstants();this.highlightConstants_=b.getHighlightConstants();this.highlightOffset=this.highlightConstants_.OFFSET;this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER;this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER;this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB;this.notchPaths_=this.highlightConstants_.NOTCH;this.startPaths_=this.highlightConstants_.START_HAT;this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+
"\n"+this.inlineSteps_}drawTopCorner(b){this.steps_+=Ma(b.xPos,this.info_.startY);for(let e=0,g;g=b.elements[e];e++)F.isLeftSquareCorner(g)?this.steps_+=this.highlightConstants_.START_POINT:F.isLeftRoundedCorner(g)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):F.isPreviousConnection(g)?this.steps_+=this.notchPaths_.pathLeft:F.isHat(g)?this.steps_+=this.startPaths_.path(this.RTL_):F.isSpacer(g)&&0!==g.width&&(this.steps_+=ha("H",g.xPos+g.width-this.highlightOffset));this.steps_+=ha("H",
b.xPos+b.width-this.highlightOffset)}drawJaggedEdge_(b){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+ha("v",b.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(b){const e=b.getLastInput();if(this.RTL_){const g=b.height-e.connectionHeight;this.steps_+=Wa(e.xPos+e.width-this.highlightOffset,b.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+ha("v",g)}else this.steps_+=Wa(e.xPos+e.width,b.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(b){const e=
b.getLastInput();if(e)if(this.RTL_){const g=b.height-2*this.insideCornerPaths_.height;this.steps_+=Wa(e.xPos,b.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+ha("v",g)+this.insideCornerPaths_.pathBottom(this.RTL_)+ac(b.width-e.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Wa(e.xPos,b.yPos+b.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+ac(b.width-e.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(b){const e=b.xPos+b.width-this.highlightOffset;b instanceof zh&&b.followsStatement&&
(this.steps_+=ha("H",e));this.RTL_&&(this.steps_+=ha("H",e),b.height>this.highlightOffset&&(this.steps_+=ha("V",b.yPos+b.height-this.highlightOffset)))}drawBottomRow(b){if(this.RTL_)this.steps_+=ha("V",b.baseline-this.highlightOffset);else{const e=this.info_.bottomRow.elements[0];F.isLeftSquareCorner(e)?this.steps_+=Wa(b.xPos+this.highlightOffset,b.baseline-this.highlightOffset):F.isLeftRoundedCorner(e)&&(this.steps_+=Wa(b.xPos,b.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var b=
this.info_.outputConnection;b&&(b=b.connectionOffsetY+b.height,this.RTL_?this.steps_+=Wa(this.info_.startX,b):(this.steps_+=Wa(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=ha("V",b)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_));this.RTL_||(b=this.info_.topRow,F.isLeftRoundedCorner(b.elements[0])?this.steps_+=ha("V",this.outsideCornerPaths_.height):this.steps_+=ha("V",b.capline+this.highlightOffset))}drawInlineInput(b){const e=this.highlightOffset,
g=b.xPos+b.connectionWidth;var k=b.centerline-b.height/2;const n=b.width-b.connectionWidth,r=k+e;this.RTL_?(k=b.connectionOffsetY-e,b=b.height-(b.connectionOffsetY+b.connectionHeight)+e,this.inlineSteps_+=Wa(g-e,r)+ha("v",k)+this.puzzleTabPaths_.pathDown(this.RTL_)+ha("v",b)+ha("h",n)):this.inlineSteps_+=Wa(b.xPos+b.width+e,r)+ha("v",b.height)+ha("h",-n)+Wa(g,k+b.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},$l=class extends Ce{constructor(b,e){super(b,e);this.highlighter_=new Zl(e)}draw(){this.drawOutline_();
this.drawInternals_();this.updateConnectionHighlights();const b=this.block_.pathObject;b.setPath(this.outlinePath_+"\n"+this.inlinePath_);b.setHighlightPath(this.highlighter_.getPath());this.info_.RTL&&b.flipRTL();this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow);this.highlighter_.drawRightSideRow(this.info_.topRow);super.drawTop_()}drawJaggedEdge_(b){this.highlighter_.drawJaggedEdge_(b);super.drawJaggedEdge_(b)}drawValueInput_(b){this.highlighter_.drawValueInput(b);
super.drawValueInput_(b)}drawStatementInput_(b){this.highlighter_.drawStatementInput(b);super.drawStatementInput_(b)}drawRightSideRow_(b){this.highlighter_.drawRightSideRow(b);this.outlinePath_+=ha("H",b.xPos+b.width)+ha("V",b.yPos+b.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow);super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft();super.drawLeft_()}drawInlineInput_(b){this.highlighter_.drawInlineInput(b);super.drawInlineInput_(b)}positionInlineInputConnection_(b){const e=
b.centerline-b.height/2;if(b.connectionModel){let g=b.xPos+b.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(g*=-1);b.connectionModel.setOffsetInBlock(g,e+b.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(b){const e=b.getLastInput();if(null==e?0:e.connectionModel){let g=b.xPos+b.statementEdge+e.notchOffset;g=this.info_.RTL?-1*g:g+this.constants_.DARK_PATH_OFFSET;e.connectionModel.setOffsetInBlock(g,b.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(b){const e=
b.getLastInput();if(e&&e.connectionModel){let g=b.xPos+b.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(g*=-1);e.connectionModel.setOffsetInBlock(g,b.yPos)}}positionNextConnection_(){const b=this.info_.bottomRow;if(b.connection){const e=b.connection,g=e.xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-g:g)+this.constants_.DARK_PATH_OFFSET/2,b.baseline+this.constants_.DARK_PATH_OFFSET)}}},am=class{constructor(b){this.OFFSET=.5;this.constantProvider=b;this.START_POINT=Ma(this.OFFSET,
this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner();this.OUTSIDE_CORNER=this.makeOutsideCorner();this.PUZZLE_TAB=this.makePuzzleTab();this.NOTCH=this.makeNotch();this.JAGGED_TEETH=this.makeJaggedTeeth();this.START_HAT=this.makeStartHat()}makeInsideCorner(){const b=this.constantProvider.CORNER_RADIUS,e=this.OFFSET,g=(1-Math.SQRT1_2)*(b+e)-e,k=Ma(g,g)+Sa("a","0 0,0",b,ka(-g-e,b-g)),n=Sa("a","0 0,0",b+e,ka(b+e,b+e)),r=Ma(g,-g)+Sa("a","0 0,0",b+e,ka(b-g,g+e));return{width:b+e,height:b,pathTop(w){return w?
k:""},pathBottom(w){return w?n:r}}}makeOutsideCorner(){const b=this.constantProvider.CORNER_RADIUS,e=this.OFFSET,g=(1-Math.SQRT1_2)*(b-e)+e,k=Ma(g,g)+Sa("a","0 0,1",b-e,ka(b-g,-g+e)),n=Ma(e,b)+Sa("a","0 0,1",b-e,ka(b,-b+e)),r=-g,w=Ma(g,r)+Sa("a","0 0,1",b-e,ka(-g+e,-r-b));return{height:b,topLeft(x){return x?k:n},bottomLeft(){return w}}}makePuzzleTab(){const b=this.constantProvider.TAB_WIDTH,e=this.constantProvider.TAB_HEIGHT,g=Ma(-2,-e+3.4)+ac(-.45*b,-2.1),k=ha("v",2.5)+Ma(.97*-b,2.5)+kb("q",[ka(.05*
-b,10),ka(.3*b,9.5)])+Ma(.67*b,-1.9)+ha("v",2.5),n=ha("v",-1.5)+Ma(-.92*b,-.5)+kb("q",[ka(-.19*b,-5.5),ka(0,-11)])+Ma(.92*b,1),r=Ma(-5,e-.7)+ac(.46*b,-2.1);return{width:b,height:e,pathUp(w){return w?g:n},pathDown(w){return w?k:r}}}makeNotch(){return{pathLeft:ha("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:ac(5.1,2.6)+Ma(-10.2,6.8)+ac(5.1,2.6),height:12,width:10.2}}makeStartHat(){const b=this.constantProvider.START_HAT.height,e=Ma(25,-8.7)+kb("c",[ka(29.7,
-6.2),ka(57.2,-.5),ka(75,8.7)]),g=kb("c",[ka(17.8,-9.2),ka(45.3,-14.9),ka(75,-8.7)])+Wa(100.5,b+.5);return{path(k){return k?e:g}}}},bm=class extends xh{constructor(b,e){super(b,e);this.constants_=b;this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},cm=class extends ye{constructor(b,e){super(b,e);this.constants_=b;this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},dm=class extends Fd{constructor(b,e){super(b,e);this.renderer_=
b}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_();this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof pb||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(b,e){if(this.isInline&&b instanceof a.ValueInput$$module$build$src$core$inputs$value_input)e.elements.push(new bm(this.constants_,b)),e.hasInlineInput=!0;else if(b instanceof pb)e.elements.push(new cm(this.constants_,
b)),e.hasStatement=!0;else if(b instanceof a.ValueInput$$module$build$src$core$inputs$value_input)e.elements.push(new Bf(this.constants_,b)),e.hasExternalInput=!0;else if(b instanceof Ub||b instanceof jc)e.minHeight=Math.max(e.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),e.hasDummyInput=!0;this.isInline||null!==e.align||(e.align=b.align)}addElemSpacing_(){let b=!1;for(let g=0,k;k=this.rows[g];g++)k.hasExternalInput&&(b=!0);for(let g=0,k;k=this.rows[g];g++){var e=k.elements;k.elements=[];k.startsWithElemSpacer()&&
k.elements.push(new ob(this.constants_,this.getInRowSpacing_(null,e[0])));if(e.length){for(let n=0;n<e.length-1;n++){k.elements.push(e[n]);const r=this.getInRowSpacing_(e[n],e[n+1]);k.elements.push(new ob(this.constants_,r))}k.elements.push(e[e.length-1]);k.endsWithElemSpacer()&&(e=this.getInRowSpacing_(e[e.length-1],null),b&&k.hasDummyInput&&(e+=this.constants_.TAB_WIDTH),k.elements.push(new ob(this.constants_,e)))}}}getInRowSpacing_(b,e){if(!b)return e&&F.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:
e&&F.isInlineInput(e)?this.constants_.MEDIUM_LARGE_PADDING:e&&F.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!F.isInput(b)&&(!e||F.isStatementInput(e)))return F.isField(b)&&b.isEditable?this.constants_.MEDIUM_PADDING:F.isIcon(b)?2*this.constants_.LARGE_PADDING+1:F.isHat(b)?this.constants_.NO_PADDING:F.isPreviousOrNextConnection(b)?this.constants_.LARGE_PADDING:F.isLeftRoundedCorner(b)?this.constants_.MIN_BLOCK_WIDTH:F.isJaggedEdge(b)?this.constants_.NO_PADDING:
this.constants_.LARGE_PADDING;if(F.isInput(b)&&!e){if(F.isExternalInput(b))return this.constants_.NO_PADDING;if(F.isInlineInput(b))return this.constants_.LARGE_PADDING;if(F.isStatementInput(b))return this.constants_.NO_PADDING}if(!F.isInput(b)&&e&&F.isInput(e)){if(F.isField(b)&&b.isEditable){if(F.isInlineInput(e)||F.isExternalInput(e))return this.constants_.SMALL_PADDING}else{if(F.isInlineInput(e)||F.isExternalInput(e))return this.constants_.MEDIUM_LARGE_PADDING;if(F.isStatementInput(e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-
1}if(F.isIcon(b)&&e&&!F.isInput(e))return this.constants_.LARGE_PADDING;if(F.isInlineInput(b)&&e&&F.isField(e))return e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(F.isLeftSquareCorner(b)&&e){if(F.isHat(e))return this.constants_.NO_PADDING;if(F.isPreviousConnection(e))return e.notchOffset;if(F.isNextConnection(e))return e.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(F.isLeftRoundedCorner(b)&&e){if(F.isPreviousConnection(e))return e.notchOffset-this.constants_.CORNER_RADIUS;
if(F.isNextConnection(e))return e.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return F.isField(b)&&e&&F.isField(e)&&b.isEditable===e.isEditable||e&&F.isJaggedEdge(e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(b,e){return F.isTopRow(b)&&F.isBottomRow(e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:F.isTopRow(b)||F.isBottomRow(e)?this.constants_.NO_PADDING:b.hasExternalInput&&e.hasExternalInput?this.constants_.LARGE_PADDING:
!b.hasStatement&&e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:b.hasStatement&&e.hasStatement||!b.hasStatement&&e.hasDummyInput||b.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(b,e){if(F.isSpacer(e))return b.yPos+e.height/2;if(F.isBottomRow(b))return b=b.yPos+b.height-b.descenderHeight,F.isNextConnection(e)?b+e.height/2:b-e.height/2;if(F.isTopRow(b))return F.isHat(e)?b.capline-e.height/2:b.capline+e.height/2;let g=b.yPos;F.isField(e)||F.isIcon(e)?
(g+=e.height/2,(b.hasInlineInput||b.hasStatement)&&e.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=b.height&&(g+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):g=F.isInlineInput(e)?g+e.height/2:g+b.height/2;return g}alignRowElements_(){if(this.isInline){var b=0,e=new WeakMap,g=null;for(let k=this.rows.length-1,n;n=this.rows[k];k--)e.set(n,b),F.isInputRow(n)&&(n.hasStatement&&this.alignStatementRow_(n),g&&g.hasStatement&&n.width<g.width?e.set(n,g.width):b=n.hasStatement?n.width:Math.max(b,n.width),
g=n);b=0;for(let k=0,n;n=this.rows[k];k++)n.hasStatement?b=this.getDesiredRowWidth_(n):F.isSpacer(n)?n.width=Math.max(b,e.get(n)):(g=n.width,b=Math.max(b,e.get(n))-g,0<b&&this.addAlignmentPadding_(n,b),b=n.width)}else super.alignRowElements_()}getDesiredRowWidth_(b){return this.isInline&&b.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(b)}finalize_(){let b=0,e=0;for(let k=0,n;n=this.rows[k];k++){n.yPos=e;n.xPos=this.startX;e+=n.height;b=Math.max(b,
n.widthWithConnectedBlocks);var g=e-this.topRow.ascenderHeight;n===this.bottomRow&&g<this.constants_.MIN_BLOCK_HEIGHT&&(g=this.constants_.MIN_BLOCK_HEIGHT-g,this.bottomRow.height+=g,e+=g);this.recordElemPositions_(n)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(g=this.block_.nextConnection.targetBlock())&&(b=Math.max(b,g.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET));this.bottomRow.baseline=e-this.bottomRow.descenderHeight;this.widthWithChildren=
b+this.startX+this.constants_.DARK_PATH_OFFSET;this.width+=this.constants_.DARK_PATH_OFFSET;this.height=e+this.constants_.DARK_PATH_OFFSET;this.startY=this.topRow.capline}},em=class extends Cf{constructor(b,e,g){super(b,e,g);this.constants=g;this.colourDark="#000000";this.svgPathDark=N(I.PATH,{"class":"blocklyPathDark",transform:"translate(1,1)"});this.svgRoot.insertBefore(this.svgPathDark,this.svgPath);this.svgPathLight=N(I.PATH,{"class":"blocklyPathLight"},this.svgRoot)}setPath(b){this.svgPath.setAttribute("d",
b);this.svgPathDark.setAttribute("d",b)}setHighlightPath(b){this.svgPathLight.setAttribute("d",b)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)");this.svgPathLight.setAttribute("transform","scale(-1 1)");this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(b){this.svgPathLight.style.display="";this.svgPathDark.style.display="";if(!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",
this.style.colourTertiary);this.svgPathDark.setAttribute("fill",this.colourDark);super.applyColour(b);this.svgPath.setAttribute("stroke","none")}setStyle(b){this.style=b;this.colourDark=ud("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(b){b?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(b){if(b){this.svgPathLight.style.display=
"none";if(!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary);this.svgPath.setAttribute("stroke","none");this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(b){super.updateDisabled_(b);b&&this.svgPath.setAttribute("stroke","none")}},fm=class extends De{constructor(b){super(b);this.highlightConstants=null}init(b,e){super.init(b,
e);this.highlightConstants=this.makeHighlightConstants_();this.highlightConstants.init()}refreshDom(b,e){super.refreshDom(b,e);this.getHighlightConstants().init()}makeConstants_(){return new Yl}makeRenderInfo_(b){return new dm(this,b)}makeDrawer_(b,e){return new $l(b,e)}makePathObject(b,e){return new em(b,e,this.getConstants())}makeHighlightConstants_(){return new am(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");
return this.highlightConstants}};me("geras",fm);var Xb={};Xb.ConstantProvider=Yl;Xb.Drawer=$l;Xb.HighlightConstantProvider=am;Xb.Highlighter=Zl;Xb.InlineInput=bm;Xb.PathObject=em;Xb.RenderInfo=dm;Xb.Renderer=fm;Xb.StatementInput=cm;var gm=class extends Be{constructor(){super();Na("Blockly.minimalist.ConstantProvider","v10","v11","Blockly.blockRendering.ConstantProvider")}},hm=class extends Ce{constructor(b,e){super(b,e);Na("Blockly.minimalist.Drawer","v10","v11","Blockly.blockRendering.Drawer")}},
im=class extends Fd{constructor(b,e){super(b,e);Na("Blockly.minimalist.RenderInfo","v10","v11","Blockly.blockRendering.RenderInfo")}getRenderer(){return this.renderer_}},jm=class extends De{constructor(b){super(b);Na("Blockly.minimalist.Renderer","v10","v11","Blockly.blockRendering.Renderer")}makeConstants_(){return new gm}makeRenderInfo_(b){return new im(this,b)}makeDrawer_(b,e){return new hm(b,e)}};me("minimalist",jm);var Le={};Le.ConstantProvider=gm;Le.Drawer=hm;Le.RenderInfo=im;Le.Renderer=jm;
var km=class extends Fd{constructor(b,e){super(b,e)}getRenderer(){return this.renderer_}addElemSpacing_(){let b=!1;for(var e=0;e<this.rows.length;e++)if(this.rows[e].hasExternalInput){b=!0;break}for(e=0;e<this.rows.length;e++){const k=this.rows[e];var g=k.elements;k.elements=[];k.startsWithElemSpacer()&&k.elements.push(new ob(this.constants_,this.getInRowSpacing_(null,g[0])));if(g.length){for(let n=0;n<g.length-1;n++){k.elements.push(g[n]);const r=this.getInRowSpacing_(g[n],g[n+1]);k.elements.push(new ob(this.constants_,
r))}k.elements.push(g[g.length-1]);k.endsWithElemSpacer()&&(g=this.getInRowSpacing_(g[g.length-1],null),b&&k.hasDummyInput&&(g+=this.constants_.TAB_WIDTH),k.elements.push(new ob(this.constants_,g)))}}}getInRowSpacing_(b,e){if(!b)return e&&F.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:e&&F.isInlineInput(e)?this.constants_.MEDIUM_LARGE_PADDING:e&&F.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!F.isInput(b)&&!e)return F.isField(b)&&b.isEditable?
this.constants_.MEDIUM_PADDING:F.isIcon(b)?2*this.constants_.LARGE_PADDING+1:F.isHat(b)?this.constants_.NO_PADDING:F.isPreviousOrNextConnection(b)?this.constants_.LARGE_PADDING:F.isLeftRoundedCorner(b)?this.constants_.MIN_BLOCK_WIDTH:F.isJaggedEdge(b)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(F.isInput(b)&&!e){if(F.isExternalInput(b))return this.constants_.NO_PADDING;if(F.isInlineInput(b))return this.constants_.LARGE_PADDING;if(F.isStatementInput(b))return this.constants_.NO_PADDING}if(!F.isInput(b)&&
e&&F.isInput(e)){if(F.isField(b)&&b.isEditable){if(F.isInlineInput(e)||F.isExternalInput(e))return this.constants_.SMALL_PADDING}else{if(F.isInlineInput(e)||F.isExternalInput(e))return this.constants_.MEDIUM_LARGE_PADDING;if(F.isStatementInput(e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(F.isIcon(b)&&e&&!F.isInput(e))return this.constants_.LARGE_PADDING;if(F.isInlineInput(b)&&e&&F.isField(e))return e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;
if(F.isLeftSquareCorner(b)&&e){if(F.isHat(e))return this.constants_.NO_PADDING;if(F.isPreviousConnection(e)||F.isNextConnection(e))return e.notchOffset}return F.isLeftRoundedCorner(b)&&e?e.notchOffset-this.constants_.CORNER_RADIUS:F.isField(b)&&e&&F.isField(e)&&b.isEditable===e.isEditable||e&&F.isJaggedEdge(e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(b,e){return F.isTopRow(b)&&F.isBottomRow(e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:F.isTopRow(b)||F.isBottomRow(e)?
this.constants_.NO_PADDING:b.hasExternalInput&&e.hasExternalInput?this.constants_.LARGE_PADDING:!b.hasStatement&&e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:b.hasStatement&&e.hasStatement||b.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(b,e){if(F.isSpacer(e))return b.yPos+e.height/2;if(F.isBottomRow(b))return b=b.yPos+b.height-b.descenderHeight,F.isNextConnection(e)?b+e.height/2:b-e.height/2;if(F.isTopRow(b))return F.isHat(e)?
b.capline-e.height/2:b.capline+e.height/2;let g=b.yPos;return F.isField(e)&&b.hasStatement?g+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+e.height/2):g+b.height/2}finalize_(){let b=0,e=0;for(var g=0;g<this.rows.length;g++){const n=this.rows[g];n.yPos=e;n.xPos=this.startX;e+=n.height;b=Math.max(b,n.widthWithConnectedBlocks);var k=e-this.topRow.ascenderHeight;n===this.bottomRow&&k<this.constants_.MIN_BLOCK_HEIGHT&&(k=this.constants_.MIN_BLOCK_HEIGHT-k,this.bottomRow.height+=k,e+=k);this.recordElemPositions_(n)}this.outputConnection&&
this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(g=this.block_.nextConnection.targetBlock())&&(b=Math.max(b,g.getHeightWidth().width));this.bottomRow.baseline=e-this.bottomRow.descenderHeight;this.widthWithChildren=b+this.startX;this.height=e;this.startY=this.topRow.capline}},lm=class extends De{constructor(b){super(b)}makeRenderInfo_(b){return new km(this,b)}};me("thrasos",lm);var $h={};$h.RenderInfo=km;$h.Renderer=lm;var jo=new Vc("zelos",{colour_blocks:{colourPrimary:"#CF63CF",
colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},
text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},{colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},
math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}}),ko={Classic:xf,Zelos:jo},ai=class{constructor(b,e,g){this.id_=b.toolboxitemid||aa();this.level_=(this.parent_=g||null)?this.parent_.getLevel()+1:0;this.toolboxItemDef_=b;this.parentToolbox_=e;this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(b){}},
Fb=class extends ai{constructor(b,e,g){super(b,e,g);this.colour_=this.name_="";this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null;this.isDisabled_=this.isHidden_=!1;this.flyoutItems_=[];this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_);this.parseContents_(this.toolboxItemDef_);this.createDom_();"true"===this.toolboxItemDef_.hidden&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",
rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(b){if("custom"in b)this.flyoutItems_=b.custom;else if(b=b.contents)for(let e=0;e<b.length;e++){const g=b[e];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(g)}}parseCategoryDef_(b){this.name_="name"in b?Ra(b.name):"";this.colour_=this.getColour_(b);
Object.assign(this.cssConfig_,b.cssconfig||b.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_();Kb(this.htmlDiv_,jb.TREEITEM);La(this.htmlDiv_,Ka.SELECTED,!1);La(this.htmlDiv_,Ka.LEVEL,this.level_+1);this.rowDiv_=this.createRowContainer_();this.rowDiv_.style.pointerEvents="auto";this.htmlDiv_.appendChild(this.rowDiv_);this.rowContents_=this.createRowContentsContainer_();this.rowContents_.style.pointerEvents="none";this.rowDiv_.appendChild(this.rowContents_);this.iconDom_=this.createIconDom_();
Kb(this.iconDom_,jb.PRESENTATION);this.rowContents_.appendChild(this.iconDom_);this.labelDom_=this.createLabelDom_(this.name_);this.rowContents_.appendChild(this.labelDom_);const b=this.labelDom_.getAttribute("id");b&&La(this.htmlDiv_,Ka.LABELLEDBY,b);this.addColourBorder_(this.colour_);return this.htmlDiv_}createContainer_(){const b=document.createElement("div"),e=this.cssConfig_.container;e&&la(b,e);return b}createRowContainer_(){const b=document.createElement("div");var e=this.cssConfig_.row;e&&
la(b,e);e=`${Fb.nestedPadding*this.getLevel()}px`;this.workspace_.RTL?b.style.paddingRight=e:b.style.paddingLeft=e;return b}createRowContentsContainer_(){const b=document.createElement("div"),e=this.cssConfig_.rowcontentcontainer;e&&la(b,e);return b}createIconDom_(){const b=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const e=this.cssConfig_.icon;e&&la(b,e)}b.style.display="inline-block";return b}createLabelDom_(b){const e=document.createElement("span");e.setAttribute("id",
this.getId()+".label");e.textContent=b;(b=this.cssConfig_.label)&&la(e,b);return e}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_);this.addColourBorder_(this.colour_)}addColourBorder_(b){b&&(b=Fb.borderWidth+"px solid "+(b||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=b:this.rowDiv_.style.borderLeft=b)}getColour_(b){const e=b.categorystyle||b.categoryStyle;if((b=b.colour)&&e)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(e)return this.getColourfromStyle_(e);
if(b)return this.parseColour_(b)}return""}getColourfromStyle_(b){var e=this.workspace_.getTheme();if(b&&e){if((e=e.categoryStyles[b])&&e.colour)return this.parseColour_(e.colour);console.warn('Style "'+b+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(b){b=Ra(b);if(null==b||""===b)return"";var e=Number(b);if(isNaN(e)){if(e=Kc(b))return e;console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+b);return""}return Vj(e)}openIcon_(b){if(b){var e=
this.cssConfig_.closedicon;e&&Mf(b,e);(e=this.cssConfig_.openicon)&&la(b,e)}}closeIcon_(b){if(b){var e=this.cssConfig_.openicon;e&&Mf(b,e);(e=this.cssConfig_.closedicon)&&la(b,e)}}setVisible_(b){this.htmlDiv_.style.display=b?"block":"none";this.isHidden_=!b;this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let b=this;for(;b.getParent();)if(b=
b.getParent(),!b.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(b){}setSelected(b){if(this.rowDiv_){var e=this.cssConfig_.selected;if(b){const g=this.parseColour_(Fb.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||g;e&&la(this.rowDiv_,e)}else this.rowDiv_.style.backgroundColor="",e&&za(this.rowDiv_,e);La(this.htmlDiv_,Ka.SELECTED,b)}}setDisabled(b){this.isDisabled_=b;this.getDiv().setAttribute("disabled",`${b}`);b?this.getDiv().setAttribute("disabled",
"true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(b){this.flyoutItems_=[];this.toolboxItemDef_="string"===typeof b?{kind:this.toolboxItemDef_.kind,custom:b,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,
name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Ve(b),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden};this.parseContents_(this.toolboxItemDef_)}dispose(){Da(this.htmlDiv_)}};Fb.registrationName="category";Fb.nestedPadding=19;Fb.borderWidth=8;Fb.defaultBackgroundColour="#57e";yb('\n.blocklyTreeRow:not(.blocklyTreeSelected):hover {\n  background-color: rgba(255, 255, 255, .2);\n}\n\n.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {\n  margin: 1px 5px 1px 0;\n}\n\n.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {\n  margin: 1px 0 1px 5px;\n}\n\n.blocklyTreeRow {\n  height: 22px;\n  line-height: 22px;\n  margin-bottom: 3px;\n  padding-right: 8px;\n  white-space: nowrap;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {\n  margin-left: 8px;\n  padding-right: 0;\n}\n\n.blocklyTreeIcon {\n  background-image: url(<<<PATH>>>/sprites.png);\n  height: 16px;\n  vertical-align: middle;\n  visibility: hidden;\n  width: 16px;\n}\n\n.blocklyTreeIconClosed {\n  background-position: -32px -1px;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {\n  background-position: 0 -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: -32px -17px;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: 0 -17px;\n}\n\n.blocklyTreeIconOpen {\n  background-position: -16px -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconOpen {\n  background-position: -16px -17px;\n}\n\n.blocklyTreeLabel {\n  cursor: default;\n  font: 16px sans-serif;\n  padding: 0 3px;\n  vertical-align: middle;\n}\n\n.blocklyToolboxDelete .blocklyTreeLabel {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyTreeSelected .blocklyTreeLabel {\n  color: #fff;\n}\n');
d(U.TOOLBOX_ITEM,Fb.registrationName,Fb);var Me=class extends ai{constructor(b,e){super(b,e);this.cssConfig_={container:"blocklyTreeSeparator"};this.htmlDiv_=null;Object.assign(this.cssConfig_,b.cssconfig||b.cssConfig)}init(){this.createDom_()}createDom_(){const b=document.createElement("div"),e=this.cssConfig_.container;e&&la(b,e);return this.htmlDiv_=b}getDiv(){return this.htmlDiv_}dispose(){Da(this.htmlDiv_)}};Me.registrationName="sep";yb('\n.blocklyTreeSeparator {\n  border-bottom: solid #e5e5e5 1px;\n  height: 0;\n  margin: 5px 0;\n}\n\n.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {\n  border-right: solid #e5e5e5 1px;\n  border-bottom: none;\n  height: auto;\n  margin: 0 5px 0 5px;\n  padding: 5px 0;\n  width: 0;\n}\n');
d(U.TOOLBOX_ITEM,Me.registrationName,Me);var Kd=class extends Fb{constructor(b,e,g){super(b,e,g);this.subcategoriesDiv_=null;this.expanded_=!1;this.toolboxItems_=[]}makeDefaultCssConfig_(){const b=super.makeDefaultCssConfig_();b.contents="blocklyToolboxContents";return b}parseContents_(b){if("custom"in b)this.flyoutItems_=b.custom;else{const e=b.contents;if(e){this.flyoutItems_=[];b=!0;for(let g=0;g<e.length;g++){const k=e[g];!m(U.TOOLBOX_ITEM,k.kind)||k.kind.toLowerCase()===Me.registrationName&&
b?(this.flyoutItems_.push(k),b=!0):(this.createToolboxItem_(k),b=!1)}}}}createToolboxItem_(b){let e=b.kind;"CATEGORY"===e.toUpperCase()&&Yf(b)&&(e=Kd.registrationName);b=new (p(U.TOOLBOX_ITEM,e))(b,this.parentToolbox_,this);this.toolboxItems_.push(b)}init(){super.init();this.setExpanded("true"===this.toolboxItemDef_.expanded||!0===this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const b=this.getChildToolboxItems();this.subcategoriesDiv_=this.createSubCategoriesDom_(b);Kb(this.subcategoriesDiv_,
jb.GROUP);this.htmlDiv_.appendChild(this.subcategoriesDiv_);this.closeIcon_(this.iconDom_);La(this.htmlDiv_,Ka.EXPANDED,!1);return this.htmlDiv_}createIconDom_(){const b=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const e=this.cssConfig_.icon;e&&la(b,e);b.style.visibility="visible"}b.style.display="inline-block";return b}createSubCategoriesDom_(b){const e=document.createElement("div");e.style.display="none";var g=this.cssConfig_.contents;g&&la(e,g);for(g=0;g<b.length;g++){const k=
b[g];k.init();const n=k.getDiv();e.appendChild(n);if(k.getClickTarget){let r;null==(r=k.getClickTarget())||r.setAttribute("id",k.getId())}}return e}setExpanded(b){if(this.expanded_!==b){if(this.expanded_=b)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let e;null==(e=this.parentToolbox_.getFlyout())||e.setVisible(!1);this.subcategoriesDiv_.style.display="none";this.closeIcon_(this.iconDom_)}La(this.htmlDiv_,Ka.EXPANDED,b);this.parentToolbox_.handleToolboxItemResize()}}setVisible_(b){this.htmlDiv_.style.display=
b?"block":"none";const e=this.getChildToolboxItems();for(let g=0;g<e.length;g++)e[g].setVisible_(b);this.isHidden_=!b;this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(b){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Kd.registrationName="collapsibleCategory";d(U.TOOLBOX_ITEM,Kd.registrationName,
Kd);var mm=class extends Df{constructor(b){super();this.id="toolbox";this.contentsDiv_=this.HtmlDiv=null;this.isVisible_=!1;this.contents_=[];this.height_=this.width_=0;this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null;this.boundEvents_=[];this.workspace_=b;this.toolboxDef_=b.options.languageTree||{contents:[]};this.horizontalLayout_=b.options.horizontalLayout;this.RTL=b.options.RTL;this.contentMap_=Object.create(null);this.toolboxPosition=b.options.toolboxPosition}onShortcut(b){return!1}init(){var b=
this.workspace_;const e=b.getParentSvg();this.flyout_=this.createFlyout_();this.HtmlDiv=this.createDom_(this.workspace_);dd(this.flyout_.createDom("svg"),e);this.setVisible(!0);this.flyout_.init(b);this.render(this.toolboxDef_);b=b.getThemeManager();b.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color");b.subscribe(this.HtmlDiv,"toolboxForegroundColour","color");this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ua.Capability.AUTOHIDEABLE,Ua.Capability.DELETE_AREA,
Ua.Capability.DRAG_TARGET]})}createDom_(b){b=b.getParentSvg();const e=this.createContainer_();this.contentsDiv_=this.createContentsContainer_();this.contentsDiv_.tabIndex=0;Kb(this.contentsDiv_,jb.TREE);e.appendChild(this.contentsDiv_);b.parentNode.insertBefore(e,b);this.attachEvents_(e,this.contentsDiv_);return e}createContainer_(){const b=document.createElement("div");b.setAttribute("layout",this.isHorizontal()?"h":"v");la(b,"blocklyToolboxDiv");la(b,"blocklyNonSelectable");b.setAttribute("dir",
this.RTL?"RTL":"LTR");return b}createContentsContainer_(){const b=document.createElement("div");la(b,"blocklyToolboxContents");this.isHorizontal()&&(b.style.flexDirection="row");return b}attachEvents_(b,e){b=H(b,"pointerdown",this,this.onClick_,!1);this.boundEvents_.push(b);e=H(e,"keydown",this,this.onKeyDown_,!1);this.boundEvents_.push(e)}onClick_(b){if(Fa(b)||b.target===this.HtmlDiv)G().hideChaff(!1);else{var e=b.target.getAttribute("id");e&&(e=this.getToolboxItemById(e),e.isSelectable()&&(this.setSelectedItem(e),
e.onClick(b)));G().hideChaff(!0)}t()}onKeyDown_(b){let e=!1;switch(b.key){case "ArrowDown":e=this.selectNext_();break;case "ArrowUp":e=this.selectPrevious_();break;case "ArrowLeft":e=this.selectParent_();break;case "ArrowRight":e=this.selectChild_();break;case "Enter":case " ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),e=!0);break;default:e=!1}!e&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(e=this.selectedItem_.onKeyDown(b));e&&b.preventDefault()}createFlyout_(){const b=
this.workspace_,e=new ub({parentWorkspace:b,rtl:b.RTL,oneBasedIndex:b.options.oneBasedIndex,horizontalLayout:b.horizontalLayout,renderer:b.options.renderer,rendererOverrides:b.options.rendererOverrides,move:{scrollbars:!0}});e.toolboxPosition=b.options.toolboxPosition;return new (b.horizontalLayout?y(U.FLYOUTS_HORIZONTAL_TOOLBOX,b.options,!0):y(U.FLYOUTS_VERTICAL_TOOLBOX,b.options,!0))(e)}render(b){this.toolboxDef_=b;for(let e=0;e<this.contents_.length;e++){const g=this.contents_[e];g&&g.dispose()}this.contents_=
[];this.contentMap_=Object.create(null);this.renderContents_(b.contents);this.position();this.handleToolboxItemResize()}renderContents_(b){const e=document.createDocumentFragment();for(let g=0;g<b.length;g++)this.createToolboxItem_(b[g],e);this.contentsDiv_.appendChild(e)}createToolboxItem_(b,e){var g=b.kind;"CATEGORY"===g.toUpperCase()&&Yf(b)&&(g=Kd.registrationName);if(g=p(U.TOOLBOX_ITEM,g.toLowerCase()))b=new g(b,this),b.init(),this.addToolboxItem_(b),(g=b.getDiv())&&e.appendChild(g),b.getClickTarget()&&
b.getClickTarget().setAttribute("id",b.getId())}addToolboxItem_(b){this.contents_.push(b);this.contentMap_[b.getId()]=b;if(b.isCollapsible()){b=b.getChildToolboxItems();for(let e=0;e<b.length;e++)this.addToolboxItem_(b[e])}}getToolboxItems(){return this.contents_}addStyle(b){b&&this.HtmlDiv&&la(this.HtmlDiv,b)}removeStyle(b){b&&this.HtmlDiv&&za(this.HtmlDiv,b)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var b=this.HtmlDiv.getBoundingClientRect();const e=b.top,g=e+b.height,k=b.left;
b=k+b.width;return this.toolboxPosition===pa.TOP?new Ga(-1E7,g,-1E7,1E7):this.toolboxPosition===pa.BOTTOM?new Ga(e,1E7,-1E7,1E7):this.toolboxPosition===pa.LEFT?new Ga(-1E7,1E7,-1E7,b):new Ga(-1E7,1E7,k,1E7)}wouldDelete(b,e){b instanceof Ob?this.updateWouldDelete_(!b.getParent()&&b.isDeletable()):this.updateWouldDelete_(b.isDeletable());return this.wouldDelete_}onDragEnter(b){this.updateCursorDeleteStyle_(!0)}onDragExit(b){this.updateCursorDeleteStyle_(!1)}onDrop(b){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(b){b!==
this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=b,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(b){const e=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";b?this.addStyle(e):this.removeStyle(e)}getToolboxItemById(b){return this.contentMap_[b]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const b=
this.workspace_.getMetrics(),e=this.HtmlDiv;e&&(this.horizontalLayout_?(e.style.left="0",e.style.height="auto",e.style.width="100%",this.height_=e.offsetHeight,this.width_=b.viewWidth,this.toolboxPosition===pa.TOP?e.style.top="0":e.style.bottom="0"):(this.toolboxPosition===pa.RIGHT?e.style.right="0":e.style.left="0",e.style.height="100%",this.width_=e.offsetWidth,this.height_=b.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const b=this.workspace_,e=this.HtmlDiv.getBoundingClientRect();
b.translate(this.toolboxPosition===pa.LEFT?b.scrollX+e.width:b.scrollX,this.toolboxPosition===pa.TOP?b.scrollY+e.height:b.scrollY);W(b)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let b=0;b<this.contents_.length;b++){const e=this.contents_[b];e.refreshTheme&&e.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(b){this.isVisible_!==b&&(this.HtmlDiv.style.display=
b?"block":"none",this.isVisible_=b,this.workspace_.recordDragTargets())}autoHide(b){!b&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(b){const e=this.selectedItem_;!b&&!e||b&&!Tn(b)||(this.shouldDeselectItem_(e,b)&&null!==e&&this.deselectItem_(e),this.shouldSelectItem_(e,b)&&null!==b&&this.selectItem_(e,b),this.updateFlyout_(e,b),this.fireSelectEvent_(e,b))}shouldDeselectItem_(b,e){return null!==b&&(!b.isCollapsible()||b!==e)}shouldSelectItem_(b,e){return null!==e&&e!==
b}deselectItem_(b){this.selectedItem_=null;this.previouslySelectedItem_=b;b.setSelected(!1);La(this.contentsDiv_,Ka.ACTIVEDESCENDANT,"")}selectItem_(b,e){this.selectedItem_=e;this.previouslySelectedItem_=b;e.setSelected(!0);La(this.contentsDiv_,Ka.ACTIVEDESCENDANT,e.getId())}selectItemByPosition(b){-1<b&&b<this.contents_.length&&(b=this.contents_[b],b.isSelectable()&&this.setSelectedItem(b))}updateFlyout_(b,e){e&&(b!==e||e.isCollapsible())&&e.getContents().length?(this.flyout_.show(e.getContents()),
this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(b,e){const g=b&&b.getName();let k=e&&e.getName();b===e&&(k=null);b=new (ja("toolbox_item_select"))(g,k,this.workspace_.id);ba(b)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||
!this.selectedItem_.isCollapsible())return!1;const b=this.selectedItem_;b.isExpanded()?this.selectNext_():b.toggleExpanded();return!0}selectNext_(){if(!this.selectedItem_)return!1;let b=this.contents_.indexOf(this.selectedItem_)+1;if(-1<b&&b<this.contents_.length){let e=this.contents_[b];for(;e&&!e.isSelectable();)e=this.contents_[++b];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let b=this.contents_.indexOf(this.selectedItem_)-
1;if(-1<b&&b<this.contents_.length){let e=this.contents_[b];for(;e&&!e.isSelectable();)e=this.contents_[--b];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox");this.flyout_.dispose();for(var b=0;b<this.contents_.length;b++)this.contents_[b].dispose();for(b=0;b<this.boundEvents_.length;b++)ca(this.boundEvents_[b]);this.boundEvents_=[];this.contents_=[];this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),
Da(this.HtmlDiv))}};yb('\n.blocklyToolboxDelete {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyToolboxGrab {\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n/* Category tree in Toolbox. */\n.blocklyToolboxDiv {\n  background-color: #ddd;\n  overflow-x: visible;\n  overflow-y: auto;\n  padding: 4px 0 4px 0;\n  position: absolute;\n  z-index: 70;  /* so blocks go under toolbox when dragging */\n  -webkit-tap-highlight-color: transparent;  /* issue #1345 */\n}\n\n.blocklyToolboxContents {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n}\n\n.blocklyToolboxContents:focus {\n  outline: none;\n}\n');
d(U.TOOLBOX,Gb,mm);var lo=a.Align$$module$build$src$core$inputs$align.LEFT,mo=a.Align$$module$build$src$core$inputs$align.CENTRE,no=a.Align$$module$build$src$core$inputs$align.RIGHT,oo=fa.INPUT_VALUE,po=fa.OUTPUT_VALUE,qo=fa.NEXT_STATEMENT,ro=fa.PREVIOUS_STATEMENT,so=a.inputTypes$$module$build$src$core$inputs$input_types.DUMMY,to=pa.TOP,uo=pa.BOTTOM,vo=pa.LEFT,wo=pa.RIGHT;Ee.prototype.newBlock=function(b,e){return new Gd(this,b,e)};Ab.prototype.newBlock=function(b,e){return new Ob(this,b,e)};Ab.newTrashcan=
function(b){return new Gl(b)};Xa.prototype.showContextMenu=function(b){if(!this.workspace.options.readOnly){var e=[];this.isDeletable()&&this.isMovable()&&(e.push(lj(this)),e.push(kj(this)));cf(b,e,this.RTL)}};gc.prototype.newWorkspaceSvg=function(b){return new Ab(b)};a.Names$$module$build$src$core$names.prototype.populateProcedures=function(b){b=Wg(b);b=b[0].concat(b[1]);for(let e=0;e<b.length;e++)this.getName(b[e][0],a.Names$$module$build$src$core$names.NameType.PROCEDURE)};var xo=fa,L={ALIGN_CENTRE:mo,
ALIGN_LEFT:lo,ALIGN_RIGHT:no};L.ASTNode=T;L.BasicCursor=Fe;L.Block=Gd;L.BlockDragger=Kl;L.BlockSvg=Ob;L.Blocks=cb;L.Bubble=ya;L.BubbleDragger=hl;L.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD";L.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT";L.COLLAPSE_CHARS=30;L.CodeGenerator=a.CodeGenerator$$module$build$src$core$generator;L.CollapsibleToolboxCategory=Kd;L.ComponentManager=Ua;L.Connection=va;L.ConnectionChecker=yl;L.ConnectionDB=Dd;L.ConnectionType=fa;L.ContextMenu=Sb;L.ContextMenuItems=bb;L.ContextMenuRegistry=
Ba;L.Css=jh;L.Cursor=Ih;L.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID";L.DRAG_STACK=!0;L.DUMMY_INPUT=so;L.DeleteArea=Df;L.DragTarget=Cl;L.DropDownDiv=$a;L.Events=ia;L.Extensions=Bb;L.Field=ua;L.FieldAngle=qa;L.FieldCheckbox=$c;L.FieldColour=rb;L.FieldDropdown=Nb;L.FieldImage=Zc;L.FieldLabel=Xc;L.FieldLabelSerializable=Ul;L.FieldMultilineInput=Xh;L.FieldNumber=Yh;L.FieldTextInput=Jd;L.FieldVariable=Je;L.Flyout=Hf;L.FlyoutButton=Eb;L.FlyoutMetricsManager=Vl;L.Generator=a.CodeGenerator$$module$build$src$core$generator;
L.Gesture=cc;L.Grid=bh;L.HorizontalFlyout=Wl;L.INPUT_VALUE=oo;L.Input=wc;L.InsertionMarkerManager=Vb;L.InsertionMarkerPreviewer=Xl;L.Marker=Al;L.MarkerManager=we;L.Menu=ug;L.MenuItem=vg;L.MetricsManager=Lh;L.Msg=a.Msg$$module$build$src$core$msg;L.NEXT_STATEMENT=qo;L.Names=a.Names$$module$build$src$core$names;L.OPPOSITE_TYPE=Tc;L.OUTPUT_VALUE=po;L.Options=ub;L.PREVIOUS_STATEMENT=ro;L.PROCEDURE_CATEGORY_NAME="PROCEDURE";L.Procedures=gb;L.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID";L.RenderedConnection=
qb;L.Scrollbar=Qa;L.ScrollbarPair=ch;L.ShortcutItems=Wb;L.ShortcutRegistry=Aa;L.TOOLBOX_AT_BOTTOM=uo;L.TOOLBOX_AT_LEFT=vo;L.TOOLBOX_AT_RIGHT=wo;L.TOOLBOX_AT_TOP=to;L.TabNavigateCursor=Bl;L.Theme=Vc;L.ThemeManager=xl;L.Themes=ko;L.Toolbox=mm;L.ToolboxCategory=Fb;L.ToolboxItem=ai;L.ToolboxSeparator=Me;L.Tooltip=nb;L.Touch=Mc;L.Trashcan=Gl;L.UnattachedFieldError=Ia;L.VARIABLE_CATEGORY_NAME="VARIABLE";L.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC";L.VERSION="10.5.0-beta.1";L.VariableMap=Fh;L.VariableModel=
Ud;L.Variables=Za;L.VariablesDynamic=Yc;L.VerticalFlyout=Zh;L.WidgetDiv=Rb;L.Workspace=Ee;L.WorkspaceAudio=zl;L.WorkspaceComment=Jb;L.WorkspaceCommentSvg=Xa;L.WorkspaceDragger=il;L.WorkspaceSvg=Ab;L.Xml=mb;L.ZoomControls=dl;L.blockAnimations=ve;L.blockRendering=Ca;L.browserEvents=ec;L.bubbles=He;L.bumpObjects=Gf;L.clipboard=Sc;L.common=Ya;L.config=a.config$$module$build$src$core$config;L.connectionTypes=xo;L.constants={COLLAPSED_FIELD_NAME:"_TEMP_COLLAPSED_FIELD",COLLAPSED_INPUT_NAME:"_TEMP_COLLAPSED_INPUT"};
L.defineBlocksWithJsonArray=Q;L.dialog=Pc;L.fieldRegistry=Af;L.geras=Xb;L.getMainWorkspace=G;L.getSelected=z;L.hasBubble=Jc;L.hideChaff=function(b){G().hideChaff(b)};L.icons=uc;L.inject=function(b,e){var g=null;g="string"===typeof b?document.getElementById(b)||document.querySelector(b):b;let k;if(!document.contains(g)&&document!==(null==(k=g)?void 0:k.ownerDocument))throw Error("Error: container is not in current document");b=new ub(e||{});e=document.createElement("div");e.className="injectionDiv";
e.tabIndex=0;La(e,Ka.LABEL,a.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL);g.appendChild(e);g=Nn(e,b);const n=On(e,g,b);Rn(n);J(n);W(n);e.addEventListener("focusin",function(){J(n)});return n};L.inputTypes=a.inputTypes$$module$build$src$core$inputs$input_types;L.inputs=yc;L.isCopyable=nf;L.isIcon=function(b){return void 0!==b.getType&&void 0!==b.initView&&void 0!==b.dispose&&void 0!==b.getWeight&&void 0!==b.getSize&&void 0!==b.applyColour&&void 0!==b.hideForInsertionMarker&&void 0!==b.updateEditable&&
void 0!==b.updateCollapsed&&void 0!==b.isShownWhenCollapsed&&void 0!==b.setOffsetInBlock&&void 0!==b.onLocationChange&&void 0!==b.onClick};L.isObservable=Sg;L.isPaster=function(b){return void 0!==b.paste};L.isSerializable=ng;L.isVariableBackedParameterModel=Ei;L.minimalist=Le;L.procedures=gb;L.registry=dc;L.renderManagement=vf;L.serialization=io;L.setLocale=fl;L.setParentContainer=O;L.svgResize=W;L.thrasos=$h;L.uiPosition=Oc;L.utils=Pa;L.zelos=Db;Object.defineProperties(L,{HSV_SATURATION:{get:function(){Na("Blockly.HSV_SATURATION",
"version 10","version 11","Blockly.utils.colour.getHsvSaturation()");return Mg()},set:function(b){Na("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.setHsvSaturation()");Sj(b)}},HSV_VALUE:{get:function(){Na("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.getHsvValue()");return Og()},set:function(b){Na("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.setHsvValue()");Tj(b)}}});"Blockly"in globalThis||(globalThis.Blockly={Msg:Wn});L.__namespace__=
a;return L});/*
 For license information please see index.js.LICENSE.txt */
!function(a,d){if("object"==typeof exports&&"object"==typeof module)module.exports=d(require("blockly/core"));else if("function"==typeof define&&define.amd)define(["blockly/core"],d);else{d="object"==typeof exports?d(require("blockly/core")):d(a.Blockly);for(var f in d)("object"==typeof exports?exports:a)[f]=d[f]}}(this,a=>(()=>{function d(m){var p=h[m];if(void 0!==p)return p.exports;p=h[m]={exports:{}};return f[m](p,p.exports,d),p.exports}var f={573:m=>{m.exports=a}},h={};d.d=(m,p)=>{for(var q in p)d.o(p,
q)&&!d.o(m,q)&&Object.defineProperty(m,q,{enumerable:!0,get:p[q]})};d.o=(m,p)=>Object.prototype.hasOwnProperty.call(m,p);d.r=m=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"});Object.defineProperty(m,"__esModule",{value:!0})};var l={};return(()=>{d.r(l);d.d(l,{LexicalVariablesPlugin:()=>xb});var m={};d.r(m);d.d(m,{GLOBAL_KEYWORD:()=>"global",handlerParameterPrefix:()=>"input",localNamePrefix:()=>"local",loopParameterPrefix:()=>"item",loopRangeParameterPrefix:()=>
"counter",menuSeparator:()=>" ",possiblyPrefixGeneratedVarName:()=>M,possiblyPrefixMenuNameWith:()=>C,prefixGlobalMenuName:()=>K,prefixSeparator:()=>"_",procedureParameterPrefix:()=>"input",showPrefixToUser:()=>!1,unprefixName:()=>X,usePrefixInCode:()=>!1});const p=document.createElement("style");document.head.appendChild(p);var q=d(573);q.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_TITLE_INIT="initialize global";q.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_NAME="name";q.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_TO=
"to";q.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_COLLAPSED_TEXT="global";q.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_TOOLTIP="Creates a global variable and gives it the value of the attached blocks.";q.Msg.LANG_VARIABLES_GLOBAL_PREFIX="global";q.Msg.LANG_VARIABLES_GET_TITLE_GET="get";q.Msg.LANG_VARIABLES_GET_COLLAPSED_TEXT="get";q.Msg.LANG_VARIABLES_GET_TOOLTIP="Returns the value of this variable.";q.Msg.LANG_VARIABLES_SET_TITLE_SET="set";q.Msg.LANG_VARIABLES_SET_TITLE_TO="to";q.Msg.LANG_VARIABLES_SET_COLLAPSED_TEXT=
"set";q.Msg.LANG_VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.";q.Msg.LANG_VARIABLES_VARIABLE=" variable";q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_TITLE_INIT="initialize local";q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_DEFAULT_NAME="name";q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_INPUT_TO="to";q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_IN_DO="in";q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_COLLAPSED_TEXT="local";q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_TOOLTIP="Allows you to create variables that are only accessible in the do part of this block.";
q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_TRANSLATED_NAME="initialize local in do";q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_IN_RETURN="in";q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_COLLAPSED_TEXT="local";q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_TOOLTIP="Allows you to create variables that are only accessible in the return part of this block.";q.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_TRANSLATED_NAME="initialize local in return";q.Msg.LANG_VARIABLES_LOCAL_MUTATOR_CONTAINER_TITLE_LOCAL_NAMES=
"local names";q.Msg.LANG_VARIABLES_LOCAL_MUTATOR_CONTAINER_TOOLTIP="";q.Msg.LANG_VARIABLES_LOCAL_MUTATOR_ARG_TITLE_NAME="name";q.Msg.LANG_VARIABLES_LOCAL_MUTATOR_ARG_DEFAULT_VARIABLE="x";q.Msg.LANG_PROCEDURES_DEFNORETURN_DEFINE="to";q.Msg.LANG_PROCEDURES_DEFNORETURN_PROCEDURE="procedure";q.Msg.LANG_PROCEDURES_DEFNORETURN_DO="do";q.Msg.LANG_PROCEDURES_DEFNORETURN_COLLAPSED_PREFIX="to ";q.Msg.LANG_PROCEDURES_DEFNORETURN_TOOLTIP="A procedure that does not return a value.";q.Msg.LANG_PROCEDURES_DOTHENRETURN_THEN_RETURN=
"result";q.Msg.LANG_PROCEDURES_DOTHENRETURN_DO="do";q.Msg.LANG_PROCEDURES_DOTHENRETURN_RETURN="result";q.Msg.LANG_PROCEDURES_DOTHENRETURN_TOOLTIP="Runs the blocks in 'do' and returns a statement. Useful if you need to run a procedure before returning a value to a variable.";q.Msg.LANG_PROCEDURES_DOTHENRETURN_COLLAPSED_TEXT="do/result";q.Msg.LANG_PROCEDURES_DEFRETURN_DEFINE="to";q.Msg.LANG_PROCEDURES_DEFRETURN_PROCEDURE="procedure";q.Msg.LANG_PROCEDURES_DEFRETURN_RETURN="result";q.Msg.LANG_PROCEDURES_DEFRETURN_COLLAPSED_PREFIX=
"to ";q.Msg.LANG_PROCEDURES_DEFRETURN_TOOLTIP="A procedure returning a result value.";q.Msg.LANG_PROCEDURES_DEF_DUPLICATE_WARNING="Warning:\nThis procedure has\nduplicate inputs.";q.Msg.LANG_PROCEDURES_CALLNORETURN_CALL="call ";q.Msg.LANG_PROCEDURES_CALLNORETURN_PROCEDURE="procedure";q.Msg.LANG_PROCEDURES_CALLNORETURN_COLLAPSED_PREFIX="call ";q.Msg.LANG_PROCEDURES_CALLNORETURN_TOOLTIP="Call a procedure with no return value.";q.Msg.LANG_PROCEDURES_CALLNORETURN_TRANSLATED_NAME="call no return";q.Msg.LANG_PROCEDURES_CALLRETURN_CALL=
"call ";q.Msg.LANG_PROCEDURES_CALLRETURN_PROCEDURE="procedure";q.Msg.LANG_PROCEDURES_CALLRETURN_COLLAPSED_PREFIX="call ";q.Msg.LANG_PROCEDURES_CALLRETURN_TOOLTIP="Call a procedure with a return value.";q.Msg.LANG_PROCEDURES_CALLRETURN_TRANSLATED_NAME="call return";q.Msg.LANG_PROCEDURES_MUTATORCONTAINER_TITLE="inputs";q.Msg.LANG_PROCEDURES_MUTATORARG_TITLE="input:";q.Msg.LANG_PROCEDURES_HIGHLIGHT_DEF="Highlight Procedure";q.Msg.LANG_PROCEDURES_MUTATORCONTAINER_TOOLTIP="";q.Msg.LANG_PROCEDURES_MUTATORARG_TOOLTIP=
"";q.Msg.LANG_CONTROLS_FOR_INPUT_WITH="count with";q.Msg.LANG_CONTROLS_FOR_INPUT_VAR="x";q.Msg.LANG_CONTROLS_FOR_INPUT_FROM="from";q.Msg.LANG_CONTROLS_FOR_INPUT_TO="to";q.Msg.LANG_CONTROLS_FOR_INPUT_DO="do";q.Msg.LANG_CONTROLS_FOR_TOOLTIP="Count from a start number to an end number.\nFor each count, set the current count number to\nvariable '%1', and then do some statements.";q.Msg.LANG_CONTROLS_FORRANGE_INPUT_ITEM="for each";q.Msg.LANG_CONTROLS_FORRANGE_INPUT_VAR="number";q.Msg.LANG_CONTROLS_FORRANGE_INPUT_START=
"from";q.Msg.LANG_CONTROLS_FORRANGE_INPUT_END="to";q.Msg.LANG_CONTROLS_FORRANGE_INPUT_STEP="by";q.Msg.LANG_CONTROLS_FORRANGE_INPUT_DO="do";q.Msg.LANG_CONTROLS_FORRANGE_INPUT_COLLAPSED_TEXT="for number in range";q.Msg.LANG_CONTROLS_FORRANGE_INPUT_COLLAPSED_PREFIX="for";q.Msg.LANG_CONTROLS_FORRANGE_INPUT_COLLAPSED_SUFFIX=" in range";q.Msg.LANG_CONTROLS_FORRANGE_TOOLTIP="Runs the blocks in the 'do' section for each numeric value in the range from start to end, stepping the value each time.  Use the given variable name to refer to the current value.";
q.Msg.LANG_CONTROLS_FOREACH_INPUT_ITEM="for each";q.Msg.LANG_CONTROLS_FOREACH_INPUT_VAR="item";q.Msg.LANG_CONTROLS_FOREACH_INPUT_INLIST="in list";q.Msg.LANG_CONTROLS_FOREACH_INPUT_DO="do";q.Msg.LANG_CONTROLS_FOREACH_INPUT_COLLAPSED_TEXT="for item in list";q.Msg.LANG_CONTROLS_FOREACH_INPUT_COLLAPSED_PREFIX="for ";q.Msg.LANG_CONTROLS_FOREACH_INPUT_COLLAPSED_SUFFIX=" in list";q.Msg.LANG_CONTROLS_FOREACH_TOOLTIP="Runs the blocks in the 'do'  section for each item in the list.  Use the given variable name to refer to the current list item.";
q.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT="for each %1 with %2 in dictionary %3";q.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT_DO="do";q.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT_KEY="key";q.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT_VALUE="value";q.Msg.LANG_CONTROLS_FOREACH_DICT_TITLE="for each in dictionary";q.Msg.LANG_CONTROLS_FOREACH_DICT_TOOLTIP="Runs the blocks in the 'do' section for each key-value entry in the dictionary. Use the given variable names to refer to the key/value of the current dictionary item.";
q.Msg.ERROR_SELECT_VALID_ITEM_FROM_DROPDOWN="Select a valid item in the drop down.";q.Msg.ERROR_BLOCK_CANNOT_BE_IN_DEFINITION="This block cannot be in a definition";q.Msg.HORIZONTAL_PARAMETERS="Arrange Parameters Horizontally";q.Msg.VERTICAL_PARAMETERS="Arrange Parameters Vertically";q.Msg.LANG_CONTROLS_DO_THEN_RETURN_INPUT_DO="do";q.Msg.LANG_CONTROLS_DO_THEN_RETURN_INPUT_RETURN="result";q.Msg.LANG_CONTROLS_DO_THEN_RETURN_TOOLTIP="Runs the blocks in 'do' and returns a statement. Useful if you need to run a procedure before returning a value to a variable.";
q.Msg.LANG_CONTROLS_DO_THEN_RETURN_COLLAPSED_TEXT="do/result";q.Msg.LANG_CONTROLS_DO_THEN_RETURN_TITLE="do result";q.Msg.PROCEDURES_DEFNORETURN_PROCEDURE=q.Msg.LANG_PROCEDURES_DEFNORETURN_PROCEDURE;q.Msg.PROCEDURES_DEFRETURN_PROCEDURE=q.Msg.LANG_PROCEDURES_DEFRETURN_PROCEDURE;class u{checkErrors(t){if(t.getSvgRoot&&!t.getSvgRoot()||t.readOnly)return t.hasWarning&&(t.hasWarning=!1),void(t.hasError&&(t.hasError=!1));t.errors||(t.errors=[]);t.warnings||(t.warnings=[]);var v=t.errors;const A=t.warnings;
for(let D=0;D<v.length;D++)if(v[D].func&&v[D].func.call(this,t,v[D]))return t.hasError||(t.hasError=!0),void(t.hasWarning&&(t.hasWarning=!1));t.hasError&&(t.hasError=!1);for(v=0;v<A.length;v++)if(A[v].func&&A[v].func.call(this,t,A[v]))return void(t.hasWarning||(t.hasWarning=!0));t.warning&&t.setWarningText(null);t.hasWarning&&(t.hasWarning=!1)}setError(t,v){t.setWarningText(v)}setWarning(t,v){t.setWarningText(v)}}class y{static checkIsInDefinition(t){if("global_declaration"===t.getRootBlock().type){const v=
q.Msg.ERROR_BLOCK_CANNOT_BE_IN_DEFINITION;return t.workspace.getWarningHandler().setError(t,v),!0}return!1}static checkDropDownContainsValidValue(t,v){if(t.workspace.isDragging&&t.workspace.isDragging())return!1;for(let A=0;A<v.dropDowns.length;A++){const D=t.getField(v.dropDowns[A]),H=D.menuGenerator_(),V=D.getText(),ca=D.getValue();let ta=!1;D.updateMutation&&D.updateMutation();for(let Fa=0;Fa<H.length;Fa++)if(H[Fa][1]===ca&&" "!==ca){ta=!0;H[Fa][0]!==V&&D.setValue(H[Fa][0]);break}if(!ta)return v=
q.Msg.ERROR_SELECT_VALID_ITEM_FROM_DROPDOWN,t.workspace.getWarningHandler().setError(t,v),!0}return!1}}const C=function(t){return function(v){return""+v}},K=function(t){return q.Msg.LANG_VARIABLES_GLOBAL_PREFIX+" "+t},X=function(t){return 0===t.indexOf(q.Msg.LANG_VARIABLES_GLOBAL_PREFIX+" ")?[q.Msg.LANG_VARIABLES_GLOBAL_PREFIX,t.substring(q.Msg.LANG_VARIABLES_GLOBAL_PREFIX.length+1)]:0===t.indexOf("global ")?["global",t.substring(7)]:["",t]},M=function(t){return function(v){return""+v}},G=function(t){t||=
[];this.elements={};for(let v,A=0;v=t[A];A++)this.elements[v]=!0};G.prototype.isMember=function(t){return!!this.elements[t]};G.prototype.isEmpty=function(){for(let t in this.elements)return!1;return!0};G.prototype.size=function(){let t=0;for(let v in this.elements)t++;return t};G.prototype.toList=function(){const t=[];for(let v in this.elements)t.push(v);return t.sort()};G.prototype.toString=function(){return"NameSet{"+this.toList().join(",")+"}"};G.prototype.copy=function(){const t=new G;for(let v in this.elements)t.insert(v);
return t};G.prototype.mirror=function(t){let v;for(v in this.elements)delete this.elements[v];for(v in t.elements)this.elements[v]=!0};G.prototype.insert=function(t){this.elements[t]=!0};G.prototype.deleteName=function(t){delete this.elements[t]};G.prototype.unite=function(t){for(let v in t.elements)this.elements[v]=!0};G.prototype.intersect=function(t){for(let v in this.elements)t.elements[v]||delete this.elements[v]};G.prototype.subtract=function(t){for(let v in this.elements)t.elements[v]&&delete this.elements[v]};
G.prototype.rename=function(t){this.mirror(this.renamed(t))};G.prototype.insertion=function(t){const v=this.copy();return v.insert(t),v};G.prototype.deletion=function(t){const v=this.copy();return v.deleteName(t),v};G.prototype.union=function(t){const v=this.copy();return v.unite(t),v};G.prototype.intersection=function(t){const v=this.copy();return v.intersect(t),v};G.prototype.difference=function(t){const v=this.copy();return v.subtract(t),v};G.prototype.renamed=function(t){const v=new G;for(let A in this.elements){const D=
t.apply(A);D?v.insert(D):v.insert(A)}return v};G.unionAll=function(t){const v=new G;for(let A,D=0;A=t[D];D++)v.unite(A);return v};G.intersectAll=function(t){if(0===t.length)return new G;const v=t[0];for(let A,D=1;A=t[D];D++)v.intersect(A);return v};const J=function(t,v){if(this.bindings={},J.isAllStringsArray(v)&&J.isAllStringsArray(t)&&t.length===v.length)for(var A=0;A<t.length;A++)this.bindings[t[A]]=v[A];else if(!v&&J.isBindingsObject(t))for(A in this.bindings={},t)this.bindings[A]=t[A]};J.isAllStringsArray=
function(t){if("object"!=typeof t||!t.length)return!1;for(var v=0;v<t.length;v++)if("string"!=typeof t[v])return!1;return!0};J.isBindingsObject=function(t){if("object"!=typeof t)return!1;for(var v in t)if("string"!=typeof v||(t[v],0))return!1;return!0};J.simpleSubstitution=function(t,v){var A={};return A[t]=v,new J(A)};J.prototype.apply=function(t){return this.bindings[t]||t};J.prototype.map=function(t){const v=this;return t.map(function(A){return v.apply(A)})};J.prototype.toString=function(){var t=
[],v;for(v in this.bindings)t.push(v+":"+this.bindings[v]);return"Substitution{"+t.sort().join(",")+"}"};J.prototype.copy=function(){var t=new J,v;for(v in this.bindings)t.bindings[v]=this.bindings[v];return t};J.prototype.restrictDomain=function(t){for(var v=new J,A=0;A<t.length;A++){var D=this.bindings[t[A]];D&&(v.bindings[t[A]]=D)}return v};J.prototype.remove=function(t){var v=new J,A;for(A in this.bindings)-1==t.indexOf(A)&&(v.bindings[A]=this.bindings[A]);return v};J.prototype.extend=function(t){var v=
this.copy(),A;for(A in t.bindings)v.bindings[A]=t.bindings[A];return v};J.prototype.domain=function(){var t=[],v;for(v in this.bindings)t.push(v);return t.sort()};J.prototype.getBindings=function(){var t={},v;for(v in this.bindings)t[v]=this.bindings[v];return t};class z extends q.FieldDropdown{constructor(t,v){super(z.dropdownCreate);this.varname=t;this.translatedName=v;t?this.doValueUpdate_(t):this.doValueUpdate_(q.Variables.generateUniqueName())}setTranslatedValue(t,v){this.varname=v;this.translatedName=
t;this.getOptions(!1);this.setValue(v);this.forceRerender()}}z.prototype.doClassValidation_=function(t){return t};z.prototype.getBlock=function(){return this.block_};z.prototype.setBlock=function(t){this.block_=t};z.getGlobalNames=function(t){var v=q.common.getMainWorkspace(),A=v.getRootWorkspace()||v;if(A&&A.getWarningHandler&&A.getWarningHandler().cacheGlobalNames)return A.getWarningHandler().cachedGlobalNames;v=[];if(A&&!A.isFlyout){A=A.getTopBlocks();for(let D=0;D<A.length;D++){const H=A[D];H.getGlobalNames&&
H!=t&&v.push(...H.getGlobalNames())}}return v};z.prototype.getNamesInScope=function(){return z.getNamesInScope(this.block_)};z.getNamesInScope=function(t){let v=z.getGlobalNames();v=B.sortAndRemoveDuplicates(v);v=v.map(function(A){return[K(A),"global "+A]});t=z.getLexicalNamesInScope(t);return v.concat(t)};z.getLexicalNamesInScope=function(t){let v=[];const A={};let D,H;if(H=t,H&&(D=H.getParent(),D))for(;D;)D.withLexicalVarsAndPrefix&&D.withLexicalVarsAndPrefix(H,(V,ca,ta)=>{ta=ta||V;A[ta]||(A[ta]=
ca);ca=C(A[ta])(ta);v.push([ca,V])}),H=D,D=D.getParent();return B.sortAndRemoveDuplicates(v)};z.dropdownCreate=function(){const t=this.getNamesInScope();return 0<t.length?t:this.translatedName?[[this.translatedName,this.varname]]:[[" "," "]]};z.prototype.doValueUpdate_=function(t){if(Object.getPrototypeOf(q.FieldDropdown).prototype.doValueUpdate_.call(this,t),t&&" "!==t){var v=t.split(" ");2==v.length&&"global"!==v[0]&&(t="global "+v[1])}this.value_=t;v=this.getOptions(!0,[[(A=t,A.startsWith("global ")?
A.replace("global ",q.Msg.LANG_VARIABLES_GLOBAL_PREFIX+" "):A),t]]);var A;for(let D,H=0;D=v[H];H++)if(D[1]==this.value_){this.selectedOption=D;break}this.updateMutation();this.forceRerender()};z.prototype.updateMutation=function(){var t=this.getText();if(this.sourceBlock_&&this.sourceBlock_.getParent()){if(this.sourceBlock_.eventparam=void 0,0===t.indexOf(q.Msg.LANG_VARIABLES_GLOBAL_PREFIX+" "))return this.sourceBlock_.eventparam=null,this.translatedName=void 0,void(this.varname=void 0);let v,A=this.sourceBlock_.getParent();
for(;A;){const D=A.declaredVariables?A.declaredVariables():[];for(v=0;v<D.length;v++)if(D[v]==t)return"component_event"==A.type?(t=A.getParameters()[v].name,this.sourceBlock_.eventparam=t,this.translatedName=D[v],void(this.varname=t)):(this.sourceBlock_.eventparam=null,this.translatedName=void 0,void(this.varname=void 0));A=A.getParent()}}};z.prototype.getOptions=function(t,v){Array.isArray(t)&&(v=t);v=v||[];if(this.isOptionListDynamic()){if(!this.generatedOptions_||!t){t=this.generatedOptions_=this.menuGenerator_.call(this).concat(v);
if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");let A=!1;for(let D=0;D<t.length;++D){const H=t[D];Array.isArray(H)?"string"!=typeof H[1]?(A=!0,console.error("Invalid option["+D+"]: Each FieldDropdown option id must be a string. Found "+H[1]+" in: ",H)):H[0]&&"string"!=typeof H[0]&&"string"!=typeof H[0].src&&(A=!0,console.error("Invalid option["+D+"]: Each FieldDropdown option must have a string label or image description. Found"+
H[0]+" in: ",H)):(A=!0,console.error("Invalid option["+D+"]: Each FieldDropdown option must be an array. Found: ",H))}if(A)throw TypeError("Found invalid FieldDropdown options.");}v=this.generatedOptions_.concat(v)}else v=this.menuGenerator_;return v};z.dropdownChange=function(t){t&&(this.doValueUpdate_(t),t=this.sourceBlock_.workspace.getTopWorkspace(),t.getWarningHandler&&t.getWarningHandler().checkErrors(this.sourceBlock_))};z.nameNotIn=function(t,v){var A=z.prefixSuffix(t);const D=A[0];A=A[1];
let H=!1,V=!1;const ca=[];for(let ta=0;ta<v.length;ta++){const Fa=z.prefixSuffix(v[ta]),db=Fa[1];Fa[0]===D&&(db===A&&(V=!0),""===db?H=!0:ca.push(db))}if(V){if(H){t=ca.map(function(ta,Fa,db){return parseInt(ta,10)});t.sort(function(ta,Fa){return ta-Fa});v=2;for(A=0;A<t.length&&!(v<t[A]);)v==t[A]?(v++,A++):A++;return D+v}return D}return t};z.prefixSuffix=function(t){const v=t.match(/^(.*?)(\d+)$/);return v?[v[1],v[2]]:[t,""]};z.fromJson=function(t){t=q.utils.replaceMessageReferences(t.name);return new z(t)};
q.fieldRegistry.register("field_lexical_variable",z);const B={renameGlobal:function(t){const v=this.value_;t=B.makeLegalIdentifier(t);this.sourceBlock_.getField("NAME").doValueUpdate_(t);var A=z.getGlobalNames(this.sourceBlock_);if(t=z.nameNotIn(t,A),this.sourceBlock_.rendered&&q.common.getMainWorkspace()){A=q.common.getMainWorkspace().getAllBlocks();for(let D=0;D<A.length;D++){const H=A[D],V=H.renameLexicalVar;V&&V.call(H,"global "+v,"global "+t,q.Msg.LANG_VARIABLES_GLOBAL_PREFIX+" "+v,q.Msg.LANG_VARIABLES_GLOBAL_PREFIX+
" "+t)}}return t},renameParam:function(t){var v=this.htmlInput_;v=this.getValue()||v&&v.defaultValue||this.getText();return t=B.makeLegalIdentifier(t),B.renameParamFromTo(this.sourceBlock_,v,t,!1)},renameParamFromTo:function(t,v,A,D){return t.mustNotRenameCapturables?B.renameParamWithoutRenamingCapturables(t,v,A,[]):D?(B.renameParamRenamingCapturables(t,v,A),A):B.renameParamWithoutRenamingCapturables(t,v,A,[])},renameParamRenamingCapturables:function(t,v,A){if(A!==v){var D=t.declaredNames?t.declaredNames():
[];if(-1==D.indexOf(v))throw Error("LexicalVariable.renamingCapturables: oldName "+v+" is not in declarations {"+D.join(",")+"}");const H=[];z.getNamesInScope(t).map(function(V){V[0]==V[1]?H.push(V[0]):H.push(V[0],V[1])});D=D.concat(H);if(-1!=D.indexOf(A))throw Error("LexicalVariable.renameParamRenamingCapturables: newName "+A+" is in existing declarations {"+D.join(",")+"}");if(!t.renameBound)throw Error("LexicalVariable.renameParamRenamingCapturables: block "+t.type+" is not a declaration block.");
v=J.simpleSubstitution(v,A);A=new J;t.renameBound(v,A)}},renameFree:function(t,v){t&&(t.renameFree?t.renameFree(v):t.getChildren().map(function(A){B.renameFree(A,v)}))},freeVariables:function(t){let v=[];t?t.freeVariables?v=t.freeVariables():(t=t.getChildren().map(function(A){return B.freeVariables(A)}),v=G.unionAll(t)):v=new G;return v},renameParamWithoutRenamingCapturables:function(t,v,A,D){if(v===A)return v;var H=B.renameParamWithoutRenamingCapturablesInfo(t,v,"");const V=H[0];var ca=H[1];H=[];
t.declaredNames&&(H=t.declaredNames(),t=H.indexOf(v),-1!=t&&H.splice(t,1),-1!=D.indexOf(A))&&(D=H.indexOf(A),-1!=D&&H.splice(D,1));D=B.sortAndRemoveDuplicates(ca.concat(H));if((A=z.nameNotIn(A,D))!==v&&-1==H.indexOf(v))for(H=0;H<V.length;H++)D=V[H],(ca=D.renameLexicalVar)&&ca.call(D,C("")(v),C("")(A));return A},renameParamWithoutRenamingCapturablesInfo:function(t,v,A){var D=[];t.blocksInScope&&(D=t.blocksInScope());t=D.map(function(V){return B.referenceResult(V,v,A,[])});D=[];let H=[];for(let V=0;V<
t.length;V++)D=D.concat(t[V][0]),H=H.concat(t[V][1]);return H=B.sortAndRemoveDuplicates(H),[D,H]},checkIdentifier:function(t){t=t.trim().replace(/[\s\xa0]+/g,"_");return{isLegal:0==t.search(RegExp("^[^-0-9!&%^/>=<`'\"#:;,\\\\*+.()|{}[\\] ][^-!&%^/>=<'\"#:;,\\\\*+.()|{}[\\] ]*$")),transformed:t}},makeLegalIdentifier:function(t){t=B.checkIdentifier(t);return t.isLegal?t.transformed:""===t.transformed?"_":"name"},referenceResult:function(t,v,A,D){if(!t)return[[],[]];t=t.referenceResults?t.referenceResults(v,
A,D):t.getChildren().map(function(ca){return B.referenceResult(ca,v,A,D)});let H=[],V=[];for(let ca=0;ca<t.length;ca++)H=H.concat(t[ca][0]),V=V.concat(t[ca][1]);return[H,V]},sortAndRemoveDuplicates:function(t){const v=t.sort((D,H)=>{if("string"==typeof D&&"string"==typeof H)return D.localeCompare(H);if(Array.isArray(D)&&Array.isArray(H))return D[1].localeCompare(H[1]);throw Error("LexicalVariable.sortAndRemoveDuplicates: arguments must be strings or arrays of strings");}),A=[];if(1<=t.length){t=v[0];
A.push(t);for(let D=1;D<v.length;D++){let H=!1;const V=v[D];(H=Array.isArray(V)&&Array.isArray(t)?0===V[1].localeCompare(t[1]):V===t)||(t=V,A.push(t))}}return A},getNextTargetBlock:function(t){return t&&t.nextConnection&&t.nextConnection.targetBlock()?t.nextConnection.targetBlock():null},stringListsEqual:function(t,v){const A=t.length;if(A!==v.length)return!1;for(let D=0;D<A;D++)if(t[D]!==v[D])return!1;return!0}},E=["",""],O=function(t,v){v=(v||q.common.getMainWorkspace()).getTopBlocks();const A=
[E];for(let D=0;D<v.length;D++){const H=v[D].getFieldValue("NAME");"procedures_defnoreturn"!=v[D].type||t?"procedures_defreturn"==v[D].type&&t&&A.push([H,H]):A.push([H,H])}return 1<A.length&&A.splice(0,1),A},W=function(t){if(this.sourceBlock_&&this.sourceBlock_.isInFlyout)return t;const v=this.oldName_||this.getValue();var A=t;t=B.makeLegalIdentifier(t);var D=function(H){const V=H.workspace.getTopBlocks(!1),ca=[];for(let ta=0;ta<V.length;ta++)"procedures_defnoreturn"!==V[ta].type&&"procedures_defreturn"!==
V[ta].type||V[ta]!==H&&ca.push(V[ta]);return ca}(this.sourceBlock_).map(function(H){return H.getFieldValue("NAME")});(t=z.nameNotIn(t,D))!==A&&this.doValueUpdate_(t);A=this.sourceBlock_.workspace.getAllBlocks();for(D=0;D<A.length;D++){const H=A[D].renameProcedure;H&&H.call(A[D],v,t)}return this.oldName_=t,t},Y=function(t){this.workspace_=t;this.procedures_={};this.returnProcedures_={};this.voidProcedures_={};this.voidProcedures=this.returnProcedures=this.length=0};Y.defaultValue=["","none"];Y.prototype.getNames=
function(t){return O(t,this.workspace_).map(function(v){return v[0]})};Y.prototype.getMenuItems=function(t){return O(t,this.workspace_)};Y.prototype.getDeclarationBlocks=function(t){return q.utils.object.values(t?this.returnProcedures_:this.voidProcedures_)};Y.prototype.getDeclarationsBlocksExcept=function(t){const v=[];return q.utils.values(this.procedures_).forEach(function(A){A!==t&&v.push(A)}),v};Y.prototype.getAllDeclarationNames=function(){return q.utils.values(this.procedures_).map(function(t){return t.getFieldValue("NAME")})};
Y.prototype.addProcedure=function(t,v){if("procedures_defnoreturn"!=v.type&&"procedures_defreturn"!=v.type)return console.warn("Attempt to addProcedure with block type "+v.type),!1;t=v.id;return!(t in this.procedures_)&&(this.procedures_[t]=v,this.length++,"procedures_defnoreturn"==v.type?(this.voidProcedures_[t]=v,this.voidProcedures++):(this.returnProcedures_[t]=v,this.returnProcedures++),!0)};Y.prototype.removeProcedure=function(t){return t in this.procedures_&&("procedures_defnoreturn"==this.procedures_[t].type?
(delete this.voidProcedures_[t],this.voidProcedures--):(delete this.returnProcedures_[t],this.returnProcedures--),delete this.procedures_[t],this.length--),!0};Y.prototype.renameProcedure=function(t,v,A){};Y.prototype.getProcedure=function(t){return this.procedures_[t]||this.getProcedureByName(t)};Y.prototype.getProcedureByName=function(t){for(const v in this.procedures_)if(this.procedures_[v].getFieldValue("NAME")===t)return this.procedures_[v]};Y.prototype.clear=function(){this.procedures_={};this.returnProcedures_=
{};this.voidProcedures_={};this.voidProcedures=this.returnProcedures=this.length=0};q.Workspace.prototype.flydown_=q.Workspace.prototype.flydown_||null;q.Workspace.prototype.getFlydown=q.Workspace.prototype.getFlydown||function(){return this.flydown_};q.Workspace.prototype.getProcedureDatabase=q.Workspace.prototype.getProcedureDatabase||function(){return this.procedureDb_||(this.procedureDb_=new Y(this)),this.procedureDb_};q.Workspace.prototype.getTopWorkspace=q.Workspace.prototype.getTopWorkspace||
function(){let t=this;for(;t.targetWorkspace;)t=t.targetWorkspace;return t};q.Workspace.prototype.getWarningHandler=q.Workspace.prototype.getWarningHandler||function(){return this.warningHandler_||(this.warningHandler_=new u),this.warningHandler_};q.WorkspaceSvg.prototype.flydown_=q.WorkspaceSvg.prototype.flydown_||null;q.WorkspaceSvg.prototype.getFlydown=q.WorkspaceSvg.prototype.getFlydown||function(){return this.flydown_};q.WorkspaceSvg.prototype.getProcedureDatabase=q.WorkspaceSvg.prototype.getProcedureDatabase||
function(){return this.procedureDb_||(this.procedureDb_=new Y(this)),this.procedureDb_};q.WorkspaceSvg.prototype.getTopWorkspace=q.WorkspaceSvg.prototype.getTopWorkspace||function(){let t=this;for(;t.targetWorkspace;)t=t.targetWorkspace;return t};q.WorkspaceSvg.prototype.getWarningHandler=q.WorkspaceSvg.prototype.getWarningHandler||function(){return u};class na extends q.inputs.ValueInput{constructor(t,v){super(t,v);this.connection=this.makeConnection(q.ConnectionType.INPUT_VALUE);this.type=q.inputTypes.VALUE}}
q.registry.register(q.registry.Type.INPUT,"indented_input",na);class Q extends q.FieldTextInput{static timeout=500;static showPid_=0;static openFieldFlydown_=null;static DISPLAY_BELOW="BELOW";static DISPLAY_RIGHT="RIGHT";static DISPLAY_LOCATION=Q.DISPLAY_BELOW;constructor(t,v,A,D){super(t,D);this.EDITABLE=v;this.displayLocation=A||Q.DISPLAY_RIGHT}showEditor_(){this.EDITABLE&&(Q.showPid_&&(clearTimeout(Q.showPid_),Q.showPid_=0,q.common.getMainWorkspace().hideChaff()),super.showEditor_())}init(t){super.init(t);
q.utils.dom.addClass(this.fieldGroup_,this.fieldCSSClassName);this.mouseOverWrapper_=q.browserEvents.bind(this.fieldGroup_,"mouseover",this,this.onMouseOver_);this.mouseOutWrapper_=q.browserEvents.bind(this.fieldGroup_,"mouseout",this,this.onMouseOut_)}}Q.prototype.fieldCSSClassName="blocklyFieldFlydownField";Q.prototype.flyoutCSSClassName="blocklyFieldFlydownFlydown";Q.prototype.onMouseOver_=function(t){this.sourceBlock_.isInFlyout||0!=Q.showPid_||(Q.showPid_=window.setTimeout(this.showFlydownMaker_(),
Q.timeout));t.stopPropagation()};Q.prototype.onMouseOut_=function(t){window.clearTimeout(Q.showPid_);Q.showPid_=0;t.stopPropagation()};Q.prototype.showFlydownMaker_=function(){const t=this;return function(){if(0!==Q.showPid_&&!t.getSourceBlock().workspace.isDragging()&&!this.htmlInput_)try{t.showFlydown_()}catch(v){console.error("Failed to show flydown",v)}Q.showPid_=0}};Q.prototype.showFlydown_=function(){q.common.getMainWorkspace().hideChaff();const t=q.common.getMainWorkspace().getFlydown();q.common.getMainWorkspace().getParentSvg().appendChild(t.svgGroup_);
const v=t.targetWorkspace.scale;t.workspace_.setScale(v);t.setCSSClass(this.flyoutCSSClassName);var A=this.flydownBlocksXML_();A=void 0!==(D=q.utils.xml.textToDom(A)).children?D.children:Array.prototype.filter.call(D.childNodes,function(V){return V.nodeType==q.utils.dom.NodeType.ELEMENT_NODE});var D;D=q.common.getMainWorkspace().getSvgXY(this.borderRect_);const H=this.borderRect_.getBBox();this.displayLocation===Q.DISPLAY_BELOW?D.y+=H.height*v:D.x+=H.width*v;t.field_=this;t.showAt(A,D.x,D.y);Q.openFieldFlydown_=
this};Q.hide=function(){window.clearTimeout(Q.showPid_);const t=q.common.getMainWorkspace().getFlydown();t&&t.hide()};Q.prototype.onHtmlInputChange_=function(t){t=this.htmlInput_;const v=t.value;if(v!==t.oldValue_){t.oldValue_=v;var A=!0;if(this.sourceBlock_){A=t.value;var D=this.doClassValidation_(A);if(null===D)A=null;else if(void 0!==D&&(A=D),D=this.getValidator())D=D.call(this,A),null===D?A=null:void 0!==D&&(A=D)}null===A?q.utils.dom.addClass(t,"blocklyInvalidInput"):(q.utils.dom.removeClass(t,
"blocklyInvalidInput"),this.doValueUpdate_(A))}else q.utils.userAgent.WEBKIT&&this.sourceBlock_.render();this.textContent_.nodeValue=v;this.forceRerender();this.resizeEditor_();q.svgResize(this.sourceBlock_.workspace)};Q.prototype.dispose=function(){Q.openFieldFlydown_==this&&Q.hide();q.FieldTextInput.prototype.dispose.call(this)};Q.fromJson=function(t){const v=q.utils.replaceMessageReferences(t.name);return new Q(v,t.is_editable)};q.fieldRegistry.register("field_flydown",Q);class aa extends q.VerticalFlyout{constructor(t){super(t);
this.dragAngleRange_=360}}aa.prototype.previousCSSClassName_="";aa.prototype.VERTICAL_SEPARATION_FACTOR=1;aa.prototype.createDom=function(t){return this.previousCSSClassName_=t,this.svgGroup_=q.utils.dom.createSvgElement("g",{class:t},null),this.svgBackground_=q.utils.dom.createSvgElement("path",{},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.svgGroup_};aa.prototype.setCSSClass=function(t){t!==this.previousCSSClassName_&&(q.utils.dom.removeClass(this.svgGroup_,this.previousCSSClassName_),
q.utils.dom.addClass(this.svgGroup_,t),this.previousCSSClassName_=t)};aa.prototype.init=function(t){q.Flyout.prototype.init.call(this,t,!1);this.workspace_.setTheme(t.getTheme());t.getComponentManager().addCapability(this.id,q.ComponentManager.Capability.AUTOHIDEABLE)};aa.prototype.position=function(){};aa.prototype.showAt=function(t,v,A){q.Events.disable();try{this.show(t)}finally{q.Events.enable()}t=this.CORNER_RADIUS*this.workspace_.scale;const D=this.width_-2*t,H=this.height_-2*t,V=["M 0,"+t];
V.push("a",t,t,0,0,1,t,-t);V.push("h",D);V.push("a",t,t,0,0,1,t,t);V.push("v",H);V.push("a",t,t,0,0,1,-t,t);V.push("h",-D);V.push("a",t,t,0,0,1,-t,-t);V.push("z");this.svgBackground_.setAttribute("d",V.join(" "));this.svgGroup_.setAttribute("transform","translate("+v+", "+A+")")};aa.prototype.reflow=function(){this.workspace_.scale=this.targetWorkspace.scale;const t=this.workspace_.scale;let v=0,A=0;const D=this.CORNER_RADIUS*t,H=this.workspace_.getTopBlocks(!1);for(let ca,ta=0;ca=H[ta];ta++){var V=
ca.getHeightWidth();v=Math.max(v,V.width*t);A+=V.height*t}v+=2*D+this.tabWidth_*t;V=this.workspace_.getRenderer().getConstants();if(A+=3*D+D*this.VERTICAL_SEPARATION_FACTOR*H.length+(V.ADD_START_HATS?V.START_HAT_HEIGHT:0)*t/2,this.width_!=v){for(let ca,ta=0;ca=H[ta];ta++){V=ca.getHeightWidth();const Fa=ca.getRelativeToSurfaceXY();if(this.RTL){const db=v-D-t*(this.tabWidth_-Fa.x);ca.moveBy(db,0);Fa.x+=db}ca.flyoutRect_&&(ca.flyoutRect_.setAttribute("width",V.width),ca.flyoutRect_.setAttribute("height",
V.height),ca.flyoutRect_.setAttribute("x",this.RTL?Fa.x-V.width:Fa.x),ca.flyoutRect_.setAttribute("y",Fa.y))}this.width_=v;this.height_=A}};aa.prototype.onMouseMove_=function(t){};aa.prototype.placeNewBlock_=function(t){const v=this.targetWorkspace;var A=t.getSvgRoot();if(!A)throw Error("originBlock is not rendered.");A=this.workspace_.getSvgXY(A);var D=A.x;A.x+=D/v.scale-D;D=A.y;A.y+=D/v.scale-D;t=q.Xml.blockToDom(t);t=q.Xml.domToBlock(t,v);D=t.getSvgRoot();if(!D)throw Error("block is not rendered.");
D=v.getSvgXY(D);return D.x+=v.scrollX/v.scale-v.scrollX,D.y+=v.scrollY/v.scale-v.scrollY,v.toolbox_&&!v.scrollbar&&(D.x+=v.toolbox_.getWidth()/v.scale,D.y+=v.toolbox_.getHeight()/v.scale),t.moveBy(A.x-D.x,A.y-D.y),t};aa.prototype.shouldHide=!0;aa.prototype.hide=function(){this.shouldHide&&(q.Flyout.prototype.hide.call(this),Q.openFieldFlydown_=null);this.shouldHide=!0};aa.prototype.autoHide=function(){this.hide()};q.Blocks.lexical_variable_get={category:"Variables",helpUrl:q.Msg.LANG_VARIABLES_GET_HELPURL,
init:function(){this.setStyle("variable_blocks");this.fieldVar_=new z(" ");this.fieldVar_.setBlock(this);this.appendDummyInput().appendField(q.Msg.LANG_VARIABLES_GET_TITLE_GET).appendField(this.fieldVar_,"VAR");this.setOutput(!0,null);this.setTooltip(q.Msg.LANG_VARIABLES_GET_TOOLTIP);this.errors=[{func:y.checkIsInDefinition},{func:y.checkDropDownContainsValidValue,dropDowns:["VAR"]}];this.setOnChange(function(t){this.workspace.getWarningHandler().checkErrors(this)})},referenceResults:function(t,v,
A){var D=this.getChildren().map(function(Fa){return B.referenceResult(Fa,t,v,A)});let H=[],V=[];for(var ca=0;ca<D.length;ca++)H=H.concat(D[ca][0]),V=V.concat(D[ca][1]);D=this.getField("VAR").getText();ca=X(D);D=ca[0];ca=ca[1];const ta=-1==A.indexOf(ca);D!==q.Msg.LANG_VARIABLES_GLOBAL_PREFIX&&(ca===t&&ta?(H.push(this),V=V.concat(A)):!ta||V.push(ca));return[[H,V]]},getDeclaredVars:function(){return[this.getFieldValue("VAR")]},renameLexicalVar:function(t,v,A,D){void 0===A?t===this.getFieldValue("VAR")&&
this.setFieldValue(v,"VAR"):A&&A===this.fieldVar_.getText()&&(this.fieldVar_.getOptions(!1),this.fieldVar_.setValue(v),t===v&&this.setFieldValue(v,"VAR"),this.fieldVar_.forceRerender())},renameFree:function(t){var v=X(this.getFieldValue("VAR"));v[0]!==q.Msg.LANG_VARIABLES_GLOBAL_PREFIX&&(v=v[1],t=t.apply(v),t!==v&&this.renameLexicalVar(v,t))},freeVariables:function(){const t=X(this.getFieldValue("VAR"));return t[0]!==q.Msg.LANG_VARIABLES_GLOBAL_PREFIX?new G([t[1]]):new G}};q.Blocks.lexical_variable_set=
{category:"Variables",helpUrl:q.Msg.LANG_VARIABLES_SET_HELPURL,init:function(){this.setStyle("variable_blocks");this.fieldVar_=new z(" ");this.fieldVar_.setBlock(this);this.appendValueInput("VALUE").appendField(q.Msg.LANG_VARIABLES_SET_TITLE_SET).appendField(this.fieldVar_,"VAR").appendField(q.Msg.LANG_VARIABLES_SET_TITLE_TO);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(q.Msg.LANG_VARIABLES_SET_TOOLTIP);this.errors=[{func:y.checkIsInDefinition},{func:y.checkDropDownContainsValidValue,
dropDowns:["VAR"]}];this.setOnChange(function(t){this.workspace.getWarningHandler().checkErrors(this)})},referenceResults:q.Blocks.lexical_variable_get.referenceResults,getDeclaredVars:function(){return[this.getFieldValue("VAR")]},renameLexicalVar:q.Blocks.lexical_variable_get.renameLexicalVar,renameFree:function(t){var v=X(this.getFieldValue("VAR"));if(v[0]!==q.Msg.LANG_VARIABLES_GLOBAL_PREFIX){v=v[1];const A=t.apply(v);A!==v&&this.renameLexicalVar(v,A)}this.getChildren().map(function(A){B.renameFree(A,
t)})},freeVariables:function(){var t=this.getChildren().map(function(A){return B.freeVariables(A)});t=G.unionAll(t);const v=X(this.getFieldValue("VAR"));v[0]!==q.Msg.LANG_VARIABLES_GLOBAL_PREFIX&&t.insert(v[1]);return t}};class R extends Q{constructor(t,v){super(t,!0,v,B.renameGlobal)}}R.prototype.fieldCSSClassName="blocklyFieldParameter";R.prototype.flyoutCSSClassName="blocklyFieldParameterFlydown";R.prototype.flydownBlocksXML_=function(){const t=q.Msg.LANG_VARIABLES_GLOBAL_PREFIX+" "+this.getText();
return'<xml><block type="lexical_variable_get"><title name="VAR">'+t+'</title></block><block type="lexical_variable_set"><title name="VAR">'+t+"</title></block></xml>"};R.fromJson=function(t){t=q.utils.replaceMessageReferences(t.name);return new R(t)};q.fieldRegistry.register("field_global_flydown",R);class S extends q.FieldDropdown{constructor(...t){super(...t)}}S.prototype.doClassValidation_=function(t){let v=!1;const A=this.getOptions(!0);for(let D,H=0;D=A[H];H++)if(D[1]===t){v=!0;break}return v||
this.generatedOptions.push([t,t]),t};S.fromJson=function(t){return new S(t.options,void 0,t)};q.fieldRegistry.register("field_nocheck_dropdown",S);class da extends Q{constructor(t,v,A,D){super(t,v,A,function(H){if(!da.changeHandlerEnabled)return H;H=B.renameParam.call(this,H);return D&&D.call(this,H),H})}referencesVariables(){return!0}}da.prototype.fieldCSSClassName="blocklyFieldParameter";da.prototype.flyoutCSSClassName="blocklyFieldParameterFlydown";da.changeHandlerEnabled=!0;da.withChangeHanderDisabled=
function(t){const v=da.changeHandlerEnabled;da.changeHandlerEnabled=!1;try{t()}finally{da.changeHandlerEnabled=v}};da.prototype.flydownBlocksXML_=function(){const t=this.getText();return'<xml><block type="lexical_variable_get"><field name="VAR">'+t+'</field></block><block type="lexical_variable_set"><field name="VAR">'+t+"</field></block></xml>"};da.addHorizontalVerticalOption=function(t,v){var A=0;if(!(t.getParameters&&(A=t.getParameters().length),t.isCollapsed()||0>=A)){A={enabled:!0,text:t.horizontalParameters?
q.Msg.VERTICAL_PARAMETERS:q.Msg.HORIZONTAL_PARAMETERS,callback:function(){t.setParameterOrientation(!t.horizontalParameters)}};var D=0;for(let H;(H=v[D])&&H.text!=q.Msg.COLLAPSE_BLOCK;D++);v.splice(D,0,A);for(let H,V=0;H=v[V];V++)if(H.text==q.Msg.INLINE_INPUTS){v.splice(V,1);break}}};da.fromJson=function(t){const v=q.utils.replaceMessageReferences(t.name);return new da(v,t.is_editable)};q.fieldRegistry.register("field_parameter_flydown",da);class ba extends q.FieldTextInput{constructor(t){super(t,
W)}setValue(t){const v=this.getValue();if(this.oldName_=v,this.doValueUpdate_(t),super.setValue(t),!this.sourceBlock_||!this.sourceBlock_.isInFlyout){if("string"==typeof(t=this.getValue())&&this.sourceBlock_){const A=this.sourceBlock_.workspace.getProcedureDatabase();A&&(A.getProcedure(this.sourceBlock_.id)?A.renameProcedure(this.sourceBlock_.id,v,t):A.addProcedure(t,this.sourceBlock_))}this.oldName_=void 0}}}ba.fromJson=function(t){t=q.utils.replaceMessageReferences(t.name);return new ba(t)};q.fieldRegistry.register("field_procedurename",
ba);class Ea extends q.blockRendering.ExternalValueInput{constructor(t,v){super(t,v);this.connectedBlock?this.height=this.connectedBlockHeight:this.height=this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT}}class oa extends q.geras.Highlighter{constructor(t){super(t)}drawIndentedInput(t){const v=t.getLastInput();if(this.RTL_){const A=t.height-v.connectionHeight-v.connectionOffsetY;this.steps_+=q.utils.svgPaths.moveTo(v.xPos+this.highlightOffset+v.connectionWidth-1,t.yPos)+q.utils.svgPaths.lineOnAxis("v",
v.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)+q.utils.svgPaths.lineOnAxis("v",A)}else this.steps_+=q.utils.svgPaths.moveTo(v.xPos+v.connectionWidth,t.yPos+v.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)+q.utils.svgPaths.moveTo(v.xPos+v.connectionWidth+1,t.yPos+v.height)}}class sa extends q.geras.Drawer{constructor(t,v){super(t,v);this.highlighter_=new oa(v)}drawOutline_(){this.drawTop_();for(let t=1;t<this.info_.rows.length-1;t++){const v=this.info_.rows[t];v.getLastInput()instanceof
Ea?this.drawIndentedInput_(v):v.hasJaggedEdge?this.drawJaggedEdge_(v):v.hasStatement?this.drawStatementInput_(v):v.hasExternalInput?this.drawValueInput_(v):this.drawRightSideRow_(v)}this.drawBottom_();this.drawLeft_()}drawIndentedInput_(t){const v=t.getLastInput();this.positionIndentedValueConnection_(t);this.highlighter_.drawIndentedInput(t);const A="function"==typeof v.shape.pathDown?v.shape.pathDown(v.height):v.shape.pathDown;this.outlinePath_+=q.utils.svgPaths.lineOnAxis("H",v.xPos+v.connectionWidth)+
q.utils.svgPaths.lineOnAxis("v",v.connectionOffsetY)+A+q.utils.svgPaths.lineOnAxis("v",t.height-v.connectionHeight-v.connectionOffsetY)+q.utils.svgPaths.lineOnAxis("H",v.xPos+v.width)}positionIndentedValueConnection_=function(t){const v=t.getLastInput();if(v.connectionModel){let A=t.xPos+t.statementEdge+t.constants_.TAB_WIDTH;this.info_.RTL&&(A*=-1);v.connectionModel.setOffsetInBlock(A,t.yPos+v.connectionOffsetY)}};}class wa extends q.geras.RenderInfo{addInput_(t,v){t instanceof na?(v.elements.push(new Ea(this.constants_,
t)),v.hasStatement=!0):super.addInput_(t,v)}}class hb extends q.geras.Renderer{makeRenderInfo_(t){return new wa(this,t)}makeDrawer_(t,v){return new sa(t,v)}}var ja={referenceResults:function(t,v,A){const D=this;var H=D.getDeclaredVarFieldNamesAndPrefixes().map(([ca])=>D.getFieldValue(ca));const V=A.concat(H);H=D.inputList.map(ca=>B.referenceResult(D.getInputTargetBlock(ca.name),t,v,ca.name===D.getScopedInputName()?V:A));return D.nextConnection&&H.push(B.referenceResult(D.getNextBlock(),t,v,A)),H},
withLexicalVarsAndPrefix:function(t,v){const A=this;t&&A.getInputTargetBlock(A.getScopedInputName())===t&&A.getDeclaredVarFieldNamesAndPrefixes().forEach(([D,H])=>{D=A.getFieldValue(D);v(D,H)})},getDeclaredVars:function(){const t=this;return t.getDeclaredVarFieldNames().map(v=>t.getFieldValue(v))},blocksInScope:function(){const t=this.getInputTargetBlock(this.getScopedInputName());return t&&[t]||[]},declaredNames:function(){return this.getDeclaredVars()},renameVar:function(t,v){if(this.renameVars)this.renameVars(J.simpleSubstitution(t,
v));else{const A=this;A.getDeclaredVarFieldNames().forEach(D=>{q.Names.equals(t,A.getFieldValue(D))&&A.setFieldValue(v,D)})}},renameBound:function(t,v){const A=this;let D=v;if(A.inputList.forEach(H=>{H.name===A.getScopedInputName()?(A.getDeclaredVarFieldNames().forEach(V=>{V=A.getFieldValue(V);const ca=t.apply(V);ca!==V?(A.renameVar(V,ca),V=J.simpleSubstitution(V,ca),D=v.extend(V)):D=v.remove([V])}),B.renameFree(A.getInputTargetBlock(A.getScopedInputName()),D)):B.renameFree(A.getInputTargetBlock(H.name),
v)}),A.nextConnection){const H=A.nextConnection.targetBlock();B.renameFree(H,v)}},renameFree:function(t){const v=this,A=B.freeVariables(v.getInputTargetBlock(v.getScopedInputName())),D=new J;v.getDeclaredVarFieldNames().forEach(H=>{H=v.getFieldValue(H);A.deleteName(H);var V=A.renamed(t);V.isMember(H)&&(V=z.nameNotIn(H,V.toList()),H=J.simpleSubstitution(H,V),D.extend(H))});v.renameBound(D,t)},freeVariables:function(){const t=this,v=B.freeVariables(t.getInputTargetBlock(t.getScopedInputName()));if(t.getDeclaredVarFieldNames().forEach(D=>
{v.deleteName(t.getFieldValue(D))}),t.inputList.forEach(D=>{D.name!==t.getScopedInputName()&&v.unite(B.freeVariables(t.getInputTargetBlock(D.name)))}),t.nextConnection){var A=t.nextConnection.targetBlock();v.unite(B.freeVariables(A))}return v}};const Nd={...ja,getDeclaredVarFieldNamesAndPrefixes:function(){return this.getDeclaredVarFieldNames().map(t=>[t,void 0])}};ja={...ja,getDeclaredVarFieldNames:function(){return this.getDeclaredVarFieldNamesAndPrefixes().map(([t])=>t)}};q.Extensions.registerMixin("lexical_variable_scope_mixin",
Nd);q.Extensions.registerMixin("prefixed_lexical_variable_scope_mixin",ja);class xb{static init(t){var v=`.${t.getRenderer().getClassName()}.${t.getTheme().getClassName()}`;p.textContent=`\n  ${v}  .blocklyFieldParameter>rect {\n    fill: rgb(222, 143, 108);\n    fill-opacity: 1.0;\n    stroke-width: 2;\n    stroke: rgb(231, 175, 150);\n  }\n  ${v} .blocklyFieldParameter>text {\n    stroke-width: 1;\n    fill: #000;\n  }\n  ${v} .blocklyFieldParameter:hover>rect {\n    stroke-width: 2;\n    stroke: rgb(231,175,150);\n    fill: rgb(231,175,150);\n    fill-opacity: 1.0;\n  }\n  /*\n   * [lyn, 10/08/13] Control flydown with the getter/setter blocks.\n   */\n  ${v} .blocklyFieldParameterFlydown {\n    fill: rgb(231,175,150);\n    fill-opacity: 0.8;\n  }\n  /*\n   * [lyn, 10/08/13] Control parameter fields with flydown procedure\n   * caller block.\n   */\n  ${v} .blocklyFieldProcedure>rect {\n    fill: rgb(215,203,218);\n    fill-opacity: 1.0;\n    stroke-width: 0;\n    stroke: #000;\n  }\n  ${v} .blocklyFieldProcedure>text {\n    fill: #000;\n  }\n  ${v} .blocklyFieldProcedure:hover>rect {\n    stroke-width: 2;\n    stroke: #fff;\n    fill: rgb(215,203,218);\n    fill-opacity: 1.0;\n  }\n  /*\n   * [lyn, 10/08/13] Control flydown with the procedure caller block.\n   */\n  ${v} .blocklyFieldProcedureFlydown {\n    fill: rgb(215,203,218);\n    fill-opacity: 0.8;\n  }`;
v=new aa(new q.Options({scrollbars:!1,rtl:t.RTL,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,parentWorkspace:t}));t.flydown_=v;q.utils.dom.insertAfter(v.createDom("g"),t.svgBubbleCanvas_);v.init(t);v.autoClose=!0}static Flydown=aa;static FieldFlydown=Q;static FieldGlobalFlydown=R;static FieldParameterFlydown=da;static lexicalVariableScopeMixin=Nd;static LexicalVariable=B;static FieldLexicalVariable=z;static FieldProcedureName=ba;static FieldNoCheckDropdown=S;static NameSet=G;static Shared=m;static Substitution=J;}
q.blockRendering.register("geras2_renderer",hb)})(),l})());top.Blockly=Blockly;top.LexicalVariablesPlugin=LexicalVariablesPlugin;Object.keys(top.AI2.Msg).forEach(function(a){Blockly.Msg[a]=top.AI2.Msg[a]});/*

 @fileoverview Visual blocks editor for MIT App Inventor
 Color definitions for blocks

 @author mckinney@mit.edu (Andrew F. McKinney)
 @author ewpatton@mit.edu (Evan W. Patton)
*/
Blockly.utils.colour.setHsvSaturation(.7);Blockly.CONTROL_CATEGORY_HUE="#B18E35";Blockly.LOGIC_CATEGORY_HUE="#77AB41";Blockly.MATH_CATEGORY_HUE="#3F71B5";Blockly.TEXT_CATEGORY_HUE="#B32D5E";Blockly.LIST_CATEGORY_HUE="#49A6D4";Blockly.COLOR_CATEGORY_HUE="#7D7D7D";Blockly.VARIABLE_CATEGORY_HUE="#D05F2D";Blockly.PROCEDURE_CATEGORY_HUE="#7C5385";Blockly.DICTIONARY_CATEGORY_HUE="#2D1799";/*

 @fileoverview Visual blocks editor for MIT App Inventor
 Add additional "class methods" to Blockly.RenderedConnection
*/
var oldConnect=Blockly.RenderedConnection.prototype.connect_;Blockly.RenderedConnection.prototype.connect_=function(a){oldConnect.call(this,a);var d=this.getInput();d&&(d=d.isVisible(),a.getSourceBlock().getSvgRoot().style.display=d?"block":"none")};Blockly.RenderedConnection.prototype.input_=void 0;
Blockly.RenderedConnection.prototype.getInput=function(){if(void 0!==this.input_)return this.input_;for(var a=this.sourceBlock_.inputList,d=0,f;f=a[d];d++)if(f.connection==this)return this.input_=f;return this.input_=null};var oldDisconnectInternal=Blockly.RenderedConnection.prototype.disconnectInternal_;Blockly.RenderedConnection.prototype.disconnectInternal_=function(a,d){oldDisconnectInternal.call(this,a,d);d.getSvgRoot().style.display="block"};const tigerData=[{f:"#fff",s:{c:"#000",w:.172},p:[{t:"M",p:[77.696,284.285]},{t:"C",p:[77.696,284.285,77.797,286.179,76.973,286.16]},{t:"C",p:[76.149,286.141,59.695,238.066,39.167,240.309]},{t:"C",p:[39.167,240.309,56.95,232.956,77.696,284.285]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.172},p:[{t:"M",p:[81.226,281.262]},{t:"C",p:[81.226,281.262,80.677,283.078,79.908,282.779]},{t:"C",p:[79.14,282.481,80.023,231.675,59.957,226.801]},{t:"C",p:[59.957,226.801,79.18,225.937,81.226,281.262]},{t:"z",p:[]}]},
{f:"#fff",s:{c:"#000",w:.172},p:[{t:"M",p:[108.716,323.59]},{t:"C",p:[108.716,323.59,110.352,324.55,109.882,325.227]},{t:"C",p:[109.411,325.904,60.237,313.102,50.782,331.459]},{t:"C",p:[50.782,331.459,54.461,312.572,108.716,323.59]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.172},p:[{t:"M",p:[105.907,333.801]},{t:"C",p:[105.907,333.801,107.763,334.197,107.529,334.988]},{t:"C",p:[107.296,335.779,56.593,339.121,53.403,359.522]},{t:"C",p:[53.403,359.522,50.945,340.437,105.907,333.801]},{t:"z",p:[]}]},{f:"#fff",
s:{c:"#000",w:.172},p:[{t:"M",p:[101.696,328.276]},{t:"C",p:[101.696,328.276,103.474,328.939,103.128,329.687]},{t:"C",p:[102.782,330.435,52.134,326.346,46.002,346.064]},{t:"C",p:[46.002,346.064,46.354,326.825,101.696,328.276]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.172},p:[{t:"M",p:[90.991,310.072]},{t:"C",p:[90.991,310.072,92.299,311.446,91.66,311.967]},{t:"C",p:[91.021,312.488,47.278,286.634,33.131,301.676]},{t:"C",p:[33.131,301.676,41.872,284.533,90.991,310.072]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",
w:.172},p:[{t:"M",p:[83.446,314.263]},{t:"C",p:[83.446,314.263,84.902,315.48,84.326,316.071]},{t:"C",p:[83.75,316.661,37.362,295.922,25.008,312.469]},{t:"C",p:[25.008,312.469,31.753,294.447,83.446,314.263]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.172},p:[{t:"M",p:[80.846,318.335]},{t:"C",p:[80.846,318.335,82.454,319.343,81.964,320.006]},{t:"C",p:[81.474,320.669,32.692,306.446,22.709,324.522]},{t:"C",p:[22.709,324.522,26.934,305.749,80.846,318.335]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.172},p:[{t:"M",
p:[91.58,318.949]},{t:"C",p:[91.58,318.949,92.702,320.48,92.001,320.915]},{t:"C",p:[91.3,321.35,51.231,290.102,35.273,303.207]},{t:"C",p:[35.273,303.207,46.138,287.326,91.58,318.949]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.172},p:[{t:"M",p:[71.8,290]},{t:"C",p:[71.8,290,72.4,291.8,71.6,292]},{t:"C",p:[70.8,292.2,42.2,250.2,22.999,257.8]},{t:"C",p:[22.999,257.8,38.2,246,71.8,290]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.172},p:[{t:"M",p:[72.495,296.979]},{t:"C",p:[72.495,296.979,73.47,298.608,72.731,
298.975]},{t:"C",p:[71.993,299.343,35.008,264.499,17.899,276.061]},{t:"C",p:[17.899,276.061,30.196,261.261,72.495,296.979]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.172},p:[{t:"M",p:[72.38,301.349]},{t:"C",p:[72.38,301.349,73.502,302.88,72.801,303.315]},{t:"C",p:[72.1,303.749,32.031,272.502,16.073,285.607]},{t:"C",p:[16.073,285.607,26.938,269.726,72.38,301.349]},{t:"z",p:[]}]},{f:"#fff",s:"#000",p:[{t:"M",p:[70.17,303.065]},{t:"C",p:[70.673,309.113,71.661,315.682,73.4,318.801]},{t:"C",p:[73.4,318.801,
69.8,331.201,78.6,344.401]},{t:"C",p:[78.6,344.401,78.2,351.601,79.8,354.801]},{t:"C",p:[79.8,354.801,83.8,363.201,88.6,364.001]},{t:"C",p:[92.484,364.648,101.207,367.717,111.068,369.121]},{t:"C",p:[111.068,369.121,128.2,383.201,125,396.001]},{t:"C",p:[125,396.001,124.6,412.401,121,414.001]},{t:"C",p:[121,414.001,132.6,402.801,123,419.601]},{t:"L",p:[118.6,438.401]},{t:"C",p:[118.6,438.401,144.2,416.801,128.6,435.201]},{t:"L",p:[118.6,461.201]},{t:"C",p:[118.6,461.201,138.2,442.801,131,451.201]},
{t:"L",p:[127.8,460.001]},{t:"C",p:[127.8,460.001,171,432.801,140.2,462.401]},{t:"C",p:[140.2,462.401,148.2,458.801,152.6,461.601]},{t:"C",p:[152.6,461.601,159.4,460.401,158.6,462.001]},{t:"C",p:[158.6,462.001,137.8,472.401,134.2,490.801]},{t:"C",p:[134.2,490.801,142.6,480.801,139.4,491.601]},{t:"L",p:[139.8,503.201]},{t:"C",p:[139.8,503.201,143.8,481.601,143.4,519.201]},{t:"C",p:[143.4,519.201,162.6,501.201,151,522.001]},{t:"L",p:[151,538.801]},{t:"C",p:[151,538.801,166.2,522.401,159.8,535.201]},
{t:"C",p:[159.8,535.201,169.8,526.401,165.8,541.601]},{t:"C",p:[165.8,541.601,165,552.001,169.4,540.801]},{t:"C",p:[169.4,540.801,185.4,510.201,179.4,536.401]},{t:"C",p:[179.4,536.401,178.6,555.601,183.4,540.801]},{t:"C",p:[183.4,540.801,183.8,551.201,193,558.401]},{t:"C",p:[193,558.401,191.8,507.601,204.6,543.601]},{t:"L",p:[208.6,560.001]},{t:"C",p:[208.6,560.001,211.4,550.801,211,545.601]},{t:"C",p:[211,545.601,225.8,529.201,219,553.601]},{t:"C",p:[219,553.601,234.2,530.801,231,544.001]},{t:"C",
p:[231,544.001,223.4,560.001,225,564.801]},{t:"C",p:[225,564.801,241.8,530.001,243,528.401]},{t:"C",p:[243,528.401,241,570.802,251.8,534.801]},{t:"C",p:[251.8,534.801,257.4,546.801,254.6,551.201]},{t:"C",p:[254.6,551.201,262.6,543.201,261.8,540.001]},{t:"C",p:[261.8,540.001,266.4,531.801,269.2,545.401]},{t:"C",p:[269.2,545.401,271,554.801,272.6,551.601]},{t:"C",p:[272.6,551.601,276.6,575.602,277.8,552.801]},{t:"C",p:[277.8,552.801,279.4,539.201,272.2,527.601]},{t:"C",p:[272.2,527.601,273,524.401,
270.2,520.401]},{t:"C",p:[270.2,520.401,283.8,542.001,276.6,513.201]},{t:"C",p:[276.6,513.201,287.801,521.201,289.001,521.201]},{t:"C",p:[289.001,521.201,275.4,498.001,284.2,502.801]},{t:"C",p:[284.2,502.801,279,492.401,297.001,504.401]},{t:"C",p:[297.001,504.401,281,488.401,298.601,498.001]},{t:"C",p:[298.601,498.001,306.601,504.401,299.001,494.401]},{t:"C",p:[299.001,494.401,284.6,478.401,306.601,496.401]},{t:"C",p:[306.601,496.401,318.201,512.801,319.001,515.601]},{t:"C",p:[319.001,515.601,309.001,
486.401,304.601,483.601]},{t:"C",p:[304.601,483.601,313.001,447.201,354.201,462.801]},{t:"C",p:[354.201,462.801,361.001,480.001,365.401,461.601]},{t:"C",p:[365.401,461.601,378.201,455.201,389.401,482.801]},{t:"C",p:[389.401,482.801,393.401,469.201,392.601,466.401]},{t:"C",p:[392.601,466.401,399.401,467.601,398.601,466.401]},{t:"C",p:[398.601,466.401,411.801,470.801,413.001,470.001]},{t:"C",p:[413.001,470.001,419.801,476.801,420.201,473.201]},{t:"C",p:[420.201,473.201,429.401,476.001,427.401,472.401]},
{t:"C",p:[427.401,472.401,436.201,488.001,436.601,491.601]},{t:"L",p:[439.001,477.601]},{t:"L",p:[441.001,480.401]},{t:"C",p:[441.001,480.401,442.601,472.801,441.801,471.601]},{t:"C",p:[441.001,470.401,461.801,478.401,466.601,499.201]},{t:"L",p:[468.601,507.601]},{t:"C",p:[468.601,507.601,474.601,492.801,473.001,488.801]},{t:"C",p:[473.001,488.801,478.201,489.601,478.601,494.001]},{t:"C",p:[478.601,494.001,482.601,470.801,477.801,464.801]},{t:"C",p:[477.801,464.801,482.201,464.001,483.401,467.601]},
{t:"L",p:[483.401,460.401]},{t:"C",p:[483.401,460.401,490.601,461.201,490.601,458.801]},{t:"C",p:[490.601,458.801,495.001,454.801,497.001,459.601]},{t:"C",p:[497.001,459.601,484.601,424.401,503.001,443.601]},{t:"C",p:[503.001,443.601,510.201,454.401,506.601,435.601]},{t:"C",p:[503.001,416.801,499.001,415.201,503.801,414.801]},{t:"C",p:[503.801,414.801,504.601,411.201,502.601,409.601]},{t:"C",p:[500.601,408.001,503.801,409.601,503.801,409.601]},{t:"C",p:[503.801,409.601,508.601,413.601,503.401,391.601]},
{t:"C",p:[503.401,391.601,509.801,393.201,497.801,364.001]},{t:"C",p:[497.801,364.001,500.601,361.601,496.601,353.201]},{t:"C",p:[496.601,353.201,504.601,357.601,507.401,356.001]},{t:"C",p:[507.401,356.001,507.001,354.401,503.801,350.401]},{t:"C",p:[503.801,350.401,482.201,295.6,502.601,317.601]},{t:"C",p:[502.601,317.601,514.451,331.151,508.051,308.351]},{t:"C",p:[508.051,308.351,498.94,284.341,499.717,280.045]},{t:"L",p:[70.17,303.065]},{t:"z",p:[]}]},{f:"#cc7226",s:"#000",p:[{t:"M",p:[499.717,
280.245]},{t:"C",p:[500.345,280.426,502.551,281.55,503.801,283.2]},{t:"C",p:[503.801,283.2,510.601,294,505.401,275.6]},{t:"C",p:[505.401,275.6,496.201,246.8,505.001,258]},{t:"C",p:[505.001,258,511.001,265.2,507.801,251.6]},{t:"C",p:[503.936,235.173,501.401,228.8,501.401,228.8]},{t:"C",p:[501.401,228.8,513.001,233.6,486.201,194]},{t:"L",p:[495.001,197.6]},{t:"C",p:[495.001,197.6,475.401,158,453.801,152.8]},{t:"L",p:[445.801,146.8]},{t:"C",p:[445.801,146.8,484.201,108.8,471.401,72]},{t:"C",p:[471.401,
72,464.601,66.8,455.001,76]},{t:"C",p:[455.001,76,448.601,80.8,442.601,79.2]},{t:"C",p:[442.601,79.2,411.801,80.4,409.801,80.4]},{t:"C",p:[407.801,80.4,373.001,43.2,307.401,60.8]},{t:"C",p:[307.401,60.8,302.201,62.8,297.801,61.6]},{t:"C",p:[297.801,61.6,279.4,45.6,230.6,68.4]},{t:"C",p:[230.6,68.4,220.6,70.4,219,70.4]},{t:"C",p:[217.4,70.4,214.6,70.4,206.6,76.8]},{t:"C",p:[198.6,83.2,198.2,84,196.2,85.6]},{t:"C",p:[196.2,85.6,179.8,96.8,175,97.6]},{t:"C",p:[175,97.6,163.4,104,159,114]},{t:"L",p:[155.4,
115.2]},{t:"C",p:[155.4,115.2,153.8,122.4,153.4,123.6]},{t:"C",p:[153.4,123.6,148.6,127.2,147.8,132.8]},{t:"C",p:[147.8,132.8,139,138.8,139.4,143.2]},{t:"C",p:[139.4,143.2,137.8,148.4,137,153.2]},{t:"C",p:[137,153.2,129.8,158,130.6,160.8]},{t:"C",p:[130.6,160.8,123,174.8,124.2,181.6]},{t:"C",p:[124.2,181.6,117.8,181.2,115,183.6]},{t:"C",p:[115,183.6,114.2,188.4,112.6,188.8]},{t:"C",p:[112.6,188.8,109.8,190,112.2,194]},{t:"C",p:[112.2,194,110.6,196.8,110.2,198.4]},{t:"C",p:[110.2,198.4,111,201.2,106.6,
206.8]},{t:"C",p:[106.6,206.8,100.2,225.6,102.2,230.8]},{t:"C",p:[102.2,230.8,102.6,235.6,99.8,237.2]},{t:"C",p:[99.8,237.2,96.2,236.8,104.6,248.8]},{t:"C",p:[104.6,248.8,105.4,250,102.2,252.4]},{t:"C",p:[102.2,252.4,85,256,82.6,272.4]},{t:"C",p:[82.6,272.4,69,287.2,69,292.4]},{t:"C",p:[69,294.705,69.271,297.852,69.97,302.465]},{t:"C",p:[69.97,302.465,69.4,310.801,97,311.601]},{t:"C",p:[124.6,312.401,499.717,280.245,499.717,280.245]},{t:"z",p:[]}]},{f:"#cc7226",s:null,p:[{t:"M",p:[84.4,302.6]},{t:"C",
p:[59.4,263.2,73.8,319.601,73.8,319.601]},{t:"C",p:[82.6,354.001,212.2,316.401,212.2,316.401]},{t:"C",p:[212.2,316.401,381.001,286,392.201,282]},{t:"C",p:[403.401,278,498.601,284.4,498.601,284.4]},{t:"L",p:[493.001,267.6]},{t:"C",p:[428.201,221.2,409.001,244.4,395.401,240.4]},{t:"C",p:[381.801,236.4,384.201,246,381.001,246.8]},{t:"C",p:[377.801,247.6,338.601,222.8,332.201,223.6]},{t:"C",p:[325.801,224.4,300.459,200.649,315.401,232.4]},{t:"C",p:[331.401,266.4,257,271.6,240.2,260.4]},{t:"C",p:[223.4,
249.2,247.4,278.8,247.4,278.8]},{t:"C",p:[265.8,298.8,231.4,282,231.4,282]},{t:"C",p:[197,269.2,173,294.8,169.8,295.6]},{t:"C",p:[166.6,296.4,161.8,299.6,161,293.2]},{t:"C",p:[160.2,286.8,152.69,270.099,121,296.4]},{t:"C",p:[101,313.001,87.2,291,87.2,291]},{t:"L",p:[84.4,302.6]},{t:"z",p:[]}]},{f:"#e87f3a",s:null,p:[{t:"M",p:[333.51,225.346]},{t:"C",p:[327.11,226.146,301.743,202.407,316.71,234.146]},{t:"C",p:[333.31,269.346,258.31,273.346,241.51,262.146]},{t:"C",p:[224.709,250.946,248.71,280.546,
248.71,280.546]},{t:"C",p:[267.11,300.546,232.709,283.746,232.709,283.746]},{t:"C",p:[198.309,270.946,174.309,296.546,171.109,297.346]},{t:"C",p:[167.909,298.146,163.109,301.346,162.309,294.946]},{t:"C",p:[161.509,288.546,154.13,272.012,122.309,298.146]},{t:"C",p:[101.073,315.492,87.582,294.037,87.582,294.037]},{t:"L",p:[84.382,304.146]},{t:"C",p:[59.382,264.346,74.454,322.655,74.454,322.655]},{t:"C",p:[83.255,357.056,213.509,318.146,213.509,318.146]},{t:"C",p:[213.509,318.146,382.31,287.746,393.51,
283.746]},{t:"C",p:[404.71,279.746,499.038,286.073,499.038,286.073]},{t:"L",p:[493.51,268.764]},{t:"C",p:[428.71,222.364,410.31,246.146,396.71,242.146]},{t:"C",p:[383.11,238.146,385.51,247.746,382.31,248.546]},{t:"C",p:[379.11,249.346,339.91,224.546,333.51,225.346]},{t:"z",p:[]}]},{f:"#ea8c4d",s:null,p:[{t:"M",p:[334.819,227.091]},{t:"C",p:[328.419,227.891,303.685,203.862,318.019,235.891]},{t:"C",p:[334.219,272.092,259.619,275.092,242.819,263.892]},{t:"C",p:[226.019,252.692,250.019,282.292,250.019,
282.292]},{t:"C",p:[268.419,302.292,234.019,285.492,234.019,285.492]},{t:"C",p:[199.619,272.692,175.618,298.292,172.418,299.092]},{t:"C",p:[169.218,299.892,164.418,303.092,163.618,296.692]},{t:"C",p:[162.818,290.292,155.57,273.925,123.618,299.892]},{t:"C",p:[101.145,317.983,87.964,297.074,87.964,297.074]},{t:"L",p:[84.364,305.692]},{t:"C",p:[60.564,266.692,75.109,325.71,75.109,325.71]},{t:"C",p:[83.909,360.11,214.819,319.892,214.819,319.892]},{t:"C",p:[214.819,319.892,383.619,289.492,394.819,285.492]},
{t:"C",p:[406.019,281.492,499.474,287.746,499.474,287.746]},{t:"L",p:[494.02,269.928]},{t:"C",p:[429.219,223.528,411.619,247.891,398.019,243.891]},{t:"C",p:[384.419,239.891,386.819,249.491,383.619,250.292]},{t:"C",p:[380.419,251.092,341.219,226.291,334.819,227.091]},{t:"z",p:[]}]},{f:"#ec9961",s:null,p:[{t:"M",p:[336.128,228.837]},{t:"C",p:[329.728,229.637,304.999,205.605,319.328,237.637]},{t:"C",p:[336.128,275.193,260.394,276.482,244.128,265.637]},{t:"C",p:[227.328,254.437,251.328,284.037,251.328,
284.037]},{t:"C",p:[269.728,304.037,235.328,287.237,235.328,287.237]},{t:"C",p:[200.928,274.437,176.928,300.037,173.728,300.837]},{t:"C",p:[170.528,301.637,165.728,304.837,164.928,298.437]},{t:"C",p:[164.128,292.037,157.011,275.839,124.927,301.637]},{t:"C",p:[101.218,320.474,88.345,300.11,88.345,300.11]},{t:"L",p:[84.345,307.237]},{t:"C",p:[62.545,270.437,75.764,328.765,75.764,328.765]},{t:"C",p:[84.564,363.165,216.128,321.637,216.128,321.637]},{t:"C",p:[216.128,321.637,384.928,291.237,396.129,287.237]},
{t:"C",p:[407.329,283.237,499.911,289.419,499.911,289.419]},{t:"L",p:[494.529,271.092]},{t:"C",p:[429.729,224.691,412.929,249.637,399.329,245.637]},{t:"C",p:[385.728,241.637,388.128,251.237,384.928,252.037]},{t:"C",p:[381.728,252.837,342.528,228.037,336.128,228.837]},{t:"z",p:[]}]},{f:"#eea575",s:null,p:[{t:"M",p:[337.438,230.583]},{t:"C",p:[331.037,231.383,306.814,207.129,320.637,239.383]},{t:"C",p:[337.438,278.583,262.237,278.583,245.437,267.383]},{t:"C",p:[228.637,256.183,252.637,285.783,252.637,
285.783]},{t:"C",p:[271.037,305.783,236.637,288.983,236.637,288.983]},{t:"C",p:[202.237,276.183,178.237,301.783,175.037,302.583]},{t:"C",p:[171.837,303.383,167.037,306.583,166.237,300.183]},{t:"C",p:[165.437,293.783,158.452,277.752,126.237,303.383]},{t:"C",p:[101.291,322.965,88.727,303.146,88.727,303.146]},{t:"L",p:[84.327,308.783]},{t:"C",p:[64.527,273.982,76.418,331.819,76.418,331.819]},{t:"C",p:[85.218,366.22,217.437,323.383,217.437,323.383]},{t:"C",p:[217.437,323.383,386.238,292.983,397.438,288.983]},
{t:"C",p:[408.638,284.983,500.347,291.092,500.347,291.092]},{t:"L",p:[495.038,272.255]},{t:"C",p:[430.238,225.855,414.238,251.383,400.638,247.383]},{t:"C",p:[387.038,243.383,389.438,252.983,386.238,253.783]},{t:"C",p:[383.038,254.583,343.838,229.783,337.438,230.583]},{t:"z",p:[]}]},{f:"#f1b288",s:null,p:[{t:"M",p:[338.747,232.328]},{t:"C",p:[332.347,233.128,306.383,209.677,321.947,241.128]},{t:"C",p:[341.147,279.928,263.546,280.328,246.746,269.128]},{t:"C",p:[229.946,257.928,253.946,287.528,253.946,
287.528]},{t:"C",p:[272.346,307.528,237.946,290.728,237.946,290.728]},{t:"C",p:[203.546,277.928,179.546,303.528,176.346,304.328]},{t:"C",p:[173.146,305.128,168.346,308.328,167.546,301.928]},{t:"C",p:[166.746,295.528,159.892,279.665,127.546,305.128]},{t:"C",p:[101.364,325.456,89.109,306.183,89.109,306.183]},{t:"L",p:[84.309,310.328]},{t:"C",p:[66.309,277.128,77.073,334.874,77.073,334.874]},{t:"C",p:[85.873,369.274,218.746,325.128,218.746,325.128]},{t:"C",p:[218.746,325.128,387.547,294.728,398.747,
290.728]},{t:"C",p:[409.947,286.728,500.783,292.764,500.783,292.764]},{t:"L",p:[495.547,273.419]},{t:"C",p:[430.747,227.019,415.547,253.128,401.947,249.128]},{t:"C",p:[388.347,245.128,390.747,254.728,387.547,255.528]},{t:"C",p:[384.347,256.328,345.147,231.528,338.747,232.328]},{t:"z",p:[]}]},{f:"#f3bf9c",s:null,p:[{t:"M",p:[340.056,234.073]},{t:"C",p:[333.655,234.873,307.313,211.613,323.255,242.873]},{t:"C",p:[343.656,282.874,264.855,282.074,248.055,270.874]},{t:"C",p:[231.255,259.674,255.255,289.274,
255.255,289.274]},{t:"C",p:[273.655,309.274,239.255,292.474,239.255,292.474]},{t:"C",p:[204.855,279.674,180.855,305.274,177.655,306.074]},{t:"C",p:[174.455,306.874,169.655,310.074,168.855,303.674]},{t:"C",p:[168.055,297.274,161.332,281.578,128.855,306.874]},{t:"C",p:[101.436,327.947,89.491,309.219,89.491,309.219]},{t:"L",p:[84.291,311.874]},{t:"C",p:[68.291,281.674,77.727,337.929,77.727,337.929]},{t:"C",p:[86.527,372.329,220.055,326.874,220.055,326.874]},{t:"C",p:[220.055,326.874,388.856,296.474,
400.056,292.474]},{t:"C",p:[411.256,288.474,501.22,294.437,501.22,294.437]},{t:"L",p:[496.056,274.583]},{t:"C",p:[431.256,228.183,416.856,254.874,403.256,250.874]},{t:"C",p:[389.656,246.873,392.056,256.474,388.856,257.274]},{t:"C",p:[385.656,258.074,346.456,233.273,340.056,234.073]},{t:"z",p:[]}]},{f:"#f5ccb0",s:null,p:[{t:"M",p:[341.365,235.819]},{t:"C",p:[334.965,236.619,307.523,213.944,324.565,244.619]},{t:"C",p:[346.565,284.219,266.164,283.819,249.364,272.619]},{t:"C",p:[232.564,261.419,256.564,
291.019,256.564,291.019]},{t:"C",p:[274.964,311.019,240.564,294.219,240.564,294.219]},{t:"C",p:[206.164,281.419,182.164,307.019,178.964,307.819]},{t:"C",p:[175.764,308.619,170.964,311.819,170.164,305.419]},{t:"C",p:[169.364,299.019,162.773,283.492,130.164,308.619]},{t:"C",p:[101.509,330.438,89.873,312.256,89.873,312.256]},{t:"L",p:[84.273,313.419]},{t:"C",p:[69.872,285.019,78.382,340.983,78.382,340.983]},{t:"C",p:[87.182,375.384,221.364,328.619,221.364,328.619]},{t:"C",p:[221.364,328.619,390.165,
298.219,401.365,294.219]},{t:"C",p:[412.565,290.219,501.656,296.11,501.656,296.11]},{t:"L",p:[496.565,275.746]},{t:"C",p:[431.765,229.346,418.165,256.619,404.565,252.619]},{t:"C",p:[390.965,248.619,393.365,258.219,390.165,259.019]},{t:"C",p:[386.965,259.819,347.765,235.019,341.365,235.819]},{t:"z",p:[]}]},{f:"#f8d8c4",s:null,p:[{t:"M",p:[342.674,237.565]},{t:"C",p:[336.274,238.365,308.832,215.689,325.874,246.365]},{t:"C",p:[347.874,285.965,267.474,285.565,250.674,274.365]},{t:"C",p:[233.874,263.165,
257.874,292.765,257.874,292.765]},{t:"C",p:[276.274,312.765,241.874,295.965,241.874,295.965]},{t:"C",p:[207.473,283.165,183.473,308.765,180.273,309.565]},{t:"C",p:[177.073,310.365,172.273,313.565,171.473,307.165]},{t:"C",p:[170.673,300.765,164.214,285.405,131.473,310.365]},{t:"C",p:[101.582,332.929,90.255,315.293,90.255,315.293]},{t:"L",p:[84.255,314.965]},{t:"C",p:[70.654,288.564,79.037,344.038,79.037,344.038]},{t:"C",p:[87.837,378.438,222.673,330.365,222.673,330.365]},{t:"C",p:[222.673,330.365,
391.474,299.965,402.674,295.965]},{t:"C",p:[413.874,291.965,502.093,297.783,502.093,297.783]},{t:"L",p:[497.075,276.91]},{t:"C",p:[432.274,230.51,419.474,258.365,405.874,254.365]},{t:"C",p:[392.274,250.365,394.674,259.965,391.474,260.765]},{t:"C",p:[388.274,261.565,349.074,236.765,342.674,237.565]},{t:"z",p:[]}]},{f:"#fae5d7",s:null,p:[{t:"M",p:[343.983,239.31]},{t:"C",p:[337.583,240.11,310.529,217.223,327.183,248.11]},{t:"C",p:[349.183,288.91,268.783,287.31,251.983,276.11]},{t:"C",p:[235.183,264.91,
259.183,294.51,259.183,294.51]},{t:"C",p:[277.583,314.51,243.183,297.71,243.183,297.71]},{t:"C",p:[208.783,284.91,184.783,310.51,181.583,311.31]},{t:"C",p:[178.382,312.11,173.582,315.31,172.782,308.91]},{t:"C",p:[171.982,302.51,165.654,287.318,132.782,312.11]},{t:"C",p:[101.655,335.42,90.637,318.329,90.637,318.329]},{t:"L",p:[84.236,316.51]},{t:"C",p:[71.236,292.51,79.691,347.093,79.691,347.093]},{t:"C",p:[88.491,381.493,223.983,332.11,223.983,332.11]},{t:"C",p:[223.983,332.11,392.783,301.71,403.983,
297.71]},{t:"C",p:[415.183,293.71,502.529,299.456,502.529,299.456]},{t:"L",p:[497.583,278.074]},{t:"C",p:[432.783,231.673,420.783,260.11,407.183,256.11]},{t:"C",p:[393.583,252.11,395.983,261.71,392.783,262.51]},{t:"C",p:[389.583,263.31,350.383,238.51,343.983,239.31]},{t:"z",p:[]}]},{f:"#fcf2eb",s:null,p:[{t:"M",p:[345.292,241.055]},{t:"C",p:[338.892,241.855,312.917,218.411,328.492,249.855]},{t:"C",p:[349.692,292.656,270.092,289.056,253.292,277.856]},{t:"C",p:[236.492,266.656,260.492,296.256,260.492,
296.256]},{t:"C",p:[278.892,316.256,244.492,299.456,244.492,299.456]},{t:"C",p:[210.092,286.656,186.092,312.256,182.892,313.056]},{t:"C",p:[179.692,313.856,174.892,317.056,174.092,310.656]},{t:"C",p:[173.292,304.256,167.095,289.232,134.092,313.856]},{t:"C",p:[101.727,337.911,91.018,321.365,91.018,321.365]},{t:"L",p:[84.218,318.056]},{t:"C",p:[71.418,294.856,80.346,350.147,80.346,350.147]},{t:"C",p:[89.146,384.547,225.292,333.856,225.292,333.856]},{t:"C",p:[225.292,333.856,394.093,303.456,405.293,
299.456]},{t:"C",p:[416.493,295.456,502.965,301.128,502.965,301.128]},{t:"L",p:[498.093,279.237]},{t:"C",p:[433.292,232.837,422.093,261.856,408.493,257.856]},{t:"C",p:[394.893,253.855,397.293,263.456,394.093,264.256]},{t:"C",p:[390.892,265.056,351.692,240.255,345.292,241.055]},{t:"z",p:[]}]},{f:"#fff",s:null,p:[{t:"M",p:[84.2,319.601]},{t:"C",p:[71.4,297.6,81,353.201,81,353.201]},{t:"C",p:[89.8,387.601,226.6,335.601,226.6,335.601]},{t:"C",p:[226.6,335.601,395.401,305.2,406.601,301.2]},{t:"C",p:[417.801,
297.2,503.401,302.8,503.401,302.8]},{t:"L",p:[498.601,280.4]},{t:"C",p:[433.801,234,423.401,263.6,409.801,259.6]},{t:"C",p:[396.201,255.6,398.601,265.2,395.401,266]},{t:"C",p:[392.201,266.8,353.001,242,346.601,242.8]},{t:"C",p:[340.201,243.6,314.981,219.793,329.801,251.6]},{t:"C",p:[352.028,299.307,269.041,289.227,254.6,279.6]},{t:"C",p:[237.8,268.4,261.8,298,261.8,298]},{t:"C",p:[280.2,318.001,245.8,301.2,245.8,301.2]},{t:"C",p:[211.4,288.4,187.4,314.001,184.2,314.801]},{t:"C",p:[181,315.601,176.2,
318.801,175.4,312.401]},{t:"C",p:[174.6,306,168.535,291.144,135.4,315.601]},{t:"C",p:[101.8,340.401,91.4,324.401,91.4,324.401]},{t:"L",p:[84.2,319.601]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[125.8,349.601]},{t:"C",p:[125.8,349.601,118.6,361.201,139.4,374.401]},{t:"C",p:[139.4,374.401,140.8,375.801,122.8,371.601]},{t:"C",p:[122.8,371.601,116.6,369.601,115,359.201]},{t:"C",p:[115,359.201,110.2,354.801,105.4,349.201]},{t:"C",p:[100.6,343.601,125.8,349.601,125.8,349.601]},{t:"z",p:[]}]},{f:"#ccc",
s:null,p:[{t:"M",p:[265.8,302]},{t:"C",p:[265.8,302,283.498,328.821,282.9,333.601]},{t:"C",p:[281.6,344.001,281.4,353.601,284.6,357.601]},{t:"C",p:[287.801,361.601,296.601,394.801,296.601,394.801]},{t:"C",p:[296.601,394.801,296.201,396.001,308.601,358.001]},{t:"C",p:[308.601,358.001,320.201,342.001,300.201,323.601]},{t:"C",p:[300.201,323.601,265,294.8,265.8,302]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[145.8,376.401]},{t:"C",p:[145.8,376.401,157,383.601,142.6,414.801]},{t:"L",p:[149,412.401]},
{t:"C",p:[149,412.401,148.2,423.601,145,426.001]},{t:"L",p:[152.2,422.801]},{t:"C",p:[152.2,422.801,157,430.801,153,435.601]},{t:"C",p:[153,435.601,169.8,443.601,169,450.001]},{t:"C",p:[169,450.001,175.4,442.001,171.4,435.601]},{t:"C",p:[167.4,429.201,160.2,433.201,161,414.801]},{t:"L",p:[152.2,418.001]},{t:"C",p:[152.2,418.001,157.8,409.201,157.8,402.801]},{t:"L",p:[149.8,405.201]},{t:"C",p:[149.8,405.201,165.269,378.623,154.6,377.201]},{t:"C",p:[148.6,376.401,145.8,376.401,145.8,376.401]},{t:"z",
p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[178.2,393.201]},{t:"C",p:[178.2,393.201,181,388.801,178.2,389.601]},{t:"C",p:[175.4,390.401,144.2,405.201,138.2,414.801]},{t:"C",p:[138.2,414.801,172.6,390.401,178.2,393.201]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[188.6,401.201]},{t:"C",p:[188.6,401.201,191.4,396.801,188.6,397.601]},{t:"C",p:[185.8,398.401,154.6,413.201,148.6,422.801]},{t:"C",p:[148.6,422.801,183,398.401,188.6,401.201]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[201.8,386.001]},{t:"C",
p:[201.8,386.001,204.6,381.601,201.8,382.401]},{t:"C",p:[199,383.201,167.8,398.001,161.8,407.601]},{t:"C",p:[161.8,407.601,196.2,383.201,201.8,386.001]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[178.6,429.601]},{t:"C",p:[178.6,429.601,178.6,423.601,175.8,424.401]},{t:"C",p:[173,425.201,137,442.801,131,452.401]},{t:"C",p:[131,452.401,173,426.801,178.6,429.601]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[179.8,418.801]},{t:"C",p:[179.8,418.801,181,414.001,178.2,414.801]},{t:"C",p:[176.2,414.801,
149.8,426.401,143.8,436.001]},{t:"C",p:[143.8,436.001,173.4,414.401,179.8,418.801]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[165.4,466.401]},{t:"L",p:[155.4,474.001]},{t:"C",p:[155.4,474.001,165.8,466.401,169.4,467.601]},{t:"C",p:[169.4,467.601,162.6,478.801,161.8,484.001]},{t:"C",p:[161.8,484.001,172.2,471.201,177.8,471.601]},{t:"C",p:[177.8,471.601,185.4,472.001,185.4,482.801]},{t:"C",p:[185.4,482.801,191,472.401,194.2,472.801]},{t:"C",p:[194.2,472.801,195.4,479.201,194.2,486.001]},{t:"C",p:[194.2,
486.001,198.2,478.401,202.2,480.001]},{t:"C",p:[202.2,480.001,208.6,478.001,207.8,489.601]},{t:"C",p:[207.8,489.601,207.8,500.001,207,502.801]},{t:"C",p:[207,502.801,212.6,476.401,215,476.001]},{t:"C",p:[215,476.001,223,474.801,227.8,483.601]},{t:"C",p:[227.8,483.601,223.8,476.001,228.6,478.001]},{t:"C",p:[228.6,478.001,239.4,479.601,242.6,486.401]},{t:"C",p:[242.6,486.401,235.8,474.401,241.4,477.601]},{t:"C",p:[241.4,477.601,248.2,477.601,249.4,484.001]},{t:"C",p:[249.4,484.001,257.8,505.201,259.8,
506.801]},{t:"C",p:[259.8,506.801,252.2,485.201,253.8,485.201]},{t:"C",p:[253.8,485.201,251.8,473.201,257,488.001]},{t:"C",p:[257,488.001,253.8,474.001,259.4,474.801]},{t:"C",p:[265,475.601,269.4,485.601,277.8,483.201]},{t:"C",p:[277.8,483.201,287.401,488.801,289.401,419.601]},{t:"L",p:[165.4,466.401]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[170.2,373.601]},{t:"C",p:[170.2,373.601,185,367.601,225,373.601]},{t:"C",p:[225,373.601,232.2,374.001,239,365.201]},{t:"C",p:[245.8,356.401,272.6,349.201,
279,351.201]},{t:"L",p:[288.601,357.601]},{t:"L",p:[289.401,358.801]},{t:"C",p:[289.401,358.801,301.801,369.201,302.201,376.801]},{t:"C",p:[302.601,384.401,287.801,432.401,278.2,448.401]},{t:"C",p:[268.6,464.401,259,476.801,239.8,474.401]},{t:"C",p:[239.8,474.401,219,470.401,193.4,474.401]},{t:"C",p:[193.4,474.401,164.2,472.801,161.4,464.801]},{t:"C",p:[158.6,456.801,172.6,441.601,172.6,441.601]},{t:"C",p:[172.6,441.601,177,433.201,175.8,418.801]},{t:"C",p:[174.6,404.401,175,376.401,170.2,373.601]},
{t:"z",p:[]}]},{f:"#e5668c",s:null,p:[{t:"M",p:[192.2,375.601]},{t:"C",p:[200.6,394.001,171,459.201,171,459.201]},{t:"C",p:[169,460.801,183.66,466.846,193.8,464.401]},{t:"C",p:[204.746,461.763,245,466.001,245,466.001]},{t:"C",p:[268.6,450.401,281.4,406.001,281.4,406.001]},{t:"C",p:[281.4,406.001,291.801,382.001,274.2,378.801]},{t:"C",p:[256.6,375.601,192.2,375.601,192.2,375.601]},{t:"z",p:[]}]},{f:"#b23259",s:null,p:[{t:"M",p:[190.169,406.497]},{t:"C",p:[193.495,393.707,195.079,381.906,192.2,375.601]},
{t:"C",p:[192.2,375.601,254.6,382.001,265.8,361.201]},{t:"C",p:[270.041,353.326,284.801,384.001,284.4,393.601]},{t:"C",p:[284.4,393.601,221.4,408.001,206.6,396.801]},{t:"L",p:[190.169,406.497]},{t:"z",p:[]}]},{f:"#a5264c",s:null,p:[{t:"M",p:[194.6,422.801]},{t:"C",p:[194.6,422.801,196.6,430.001,194.2,434.001]},{t:"C",p:[194.2,434.001,192.6,434.801,191.4,435.201]},{t:"C",p:[191.4,435.201,192.6,438.801,198.6,440.401]},{t:"C",p:[198.6,440.401,200.6,444.801,203,445.201]},{t:"C",p:[205.4,445.601,210.2,
451.201,214.2,450.001]},{t:"C",p:[218.2,448.801,229.4,444.801,229.4,444.801]},{t:"C",p:[229.4,444.801,235,441.601,243.8,445.201]},{t:"C",p:[243.8,445.201,246.175,444.399,246.6,440.401]},{t:"C",p:[247.1,435.701,250.2,432.001,252.2,430.001]},{t:"C",p:[254.2,428.001,263.8,415.201,262.6,414.801]},{t:"C",p:[261.4,414.401,194.6,422.801,194.6,422.801]},{t:"z",p:[]}]},{f:"#ff727f",s:"#000",p:[{t:"M",p:[190.2,374.401]},{t:"C",p:[190.2,374.401,187.4,396.801,190.6,405.201]},{t:"C",p:[193.8,413.601,193,415.601,
192.2,419.601]},{t:"C",p:[191.4,423.601,195.8,433.601,201.4,439.601]},{t:"L",p:[213.4,441.201]},{t:"C",p:[213.4,441.201,228.6,437.601,237.8,440.401]},{t:"C",p:[237.8,440.401,246.794,441.744,250.2,426.801]},{t:"C",p:[250.2,426.801,255,420.401,262.2,417.601]},{t:"C",p:[269.4,414.801,276.6,373.201,272.6,365.201]},{t:"C",p:[268.6,357.201,254.2,352.801,238.2,368.401]},{t:"C",p:[222.2,384.001,220.2,367.201,190.2,374.401]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[191.8,449.201]},{t:"C",p:[191.8,
449.201,191,447.201,186.6,446.801]},{t:"C",p:[186.6,446.801,164.2,443.201,155.8,430.801]},{t:"C",p:[155.8,430.801,149,425.201,153.4,436.801]},{t:"C",p:[153.4,436.801,163.8,457.201,170.6,460.001]},{t:"C",p:[170.6,460.001,187,464.001,191.8,449.201]},{t:"z",p:[]}]},{f:"#cc3f4c",s:null,p:[{t:"M",p:[271.742,385.229]},{t:"C",p:[272.401,377.323,274.354,368.709,272.6,365.201]},{t:"C",p:[266.154,352.307,249.181,357.695,238.2,368.401]},{t:"C",p:[222.2,384.001,220.2,367.201,190.2,374.401]},{t:"C",p:[190.2,374.401,
188.455,388.364,189.295,398.376]},{t:"C",p:[189.295,398.376,226.6,386.801,227.4,392.401]},{t:"C",p:[227.4,392.401,229,389.201,238.2,389.201]},{t:"C",p:[247.4,389.201,270.142,388.029,271.742,385.229]},{t:"z",p:[]}]},{f:null,s:{c:"#a51926",w:2},p:[{t:"M",p:[228.6,375.201]},{t:"C",p:[228.6,375.201,233.4,380.001,229.8,389.601]},{t:"C",p:[229.8,389.601,215.4,405.601,217.4,419.601]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[180.6,460.001]},{t:"C",p:[180.6,460.001,176.2,447.201,185,454.001]},{t:"C",p:[185,
454.001,189.8,456.001,188.6,457.601]},{t:"C",p:[187.4,459.201,181.8,463.201,180.6,460.001]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[185.64,461.201]},{t:"C",p:[185.64,461.201,182.12,450.961,189.16,456.401]},{t:"C",p:[189.16,456.401,193.581,458.849,192.04,459.281]},{t:"C",p:[187.48,460.561,192.04,463.121,185.64,461.201]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[190.44,461.201]},{t:"C",p:[190.44,461.201,186.92,450.961,193.96,456.401]},{t:"C",p:[193.96,456.401,198.335,458.711,
196.84,459.281]},{t:"C",p:[193.48,460.561,196.84,463.121,190.44,461.201]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[197.04,461.401]},{t:"C",p:[197.04,461.401,193.52,451.161,200.56,456.601]},{t:"C",p:[200.56,456.601,204.943,458.933,203.441,459.481]},{t:"C",p:[200.48,460.561,203.441,463.321,197.04,461.401]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[203.52,461.321]},{t:"C",p:[203.52,461.321,200,451.081,207.041,456.521]},{t:"C",p:[207.041,456.521,210.881,458.121,209.921,459.401]},
{t:"C",p:[208.961,460.681,209.921,463.241,203.52,461.321]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[210.2,462.001]},{t:"C",p:[210.2,462.001,205.4,449.601,214.6,456.001]},{t:"C",p:[214.6,456.001,219.4,458.001,218.2,459.601]},{t:"C",p:[217,461.201,218.2,464.401,210.2,462.001]},{t:"z",p:[]}]},{f:null,s:{c:"#a5264c",w:2},p:[{t:"M",p:[181.8,444.801]},{t:"C",p:[181.8,444.801,195,442.001,201,445.201]},{t:"C",p:[201,445.201,207,446.401,208.2,446.001]},{t:"C",p:[209.4,445.601,212.6,445.201,
212.6,445.201]}]},{f:null,s:{c:"#a5264c",w:2},p:[{t:"M",p:[215.8,453.601]},{t:"C",p:[215.8,453.601,227.8,440.001,239.8,444.401]},{t:"C",p:[246.816,446.974,245.8,443.601,246.6,440.801]},{t:"C",p:[247.4,438.001,247.6,433.801,252.6,430.801]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[233,437.601]},{t:"C",p:[233,437.601,229,426.801,226.2,439.601]},{t:"C",p:[223.4,452.401,220.2,456.001,218.6,458.801]},{t:"C",p:[218.6,458.801,218.6,464.001,227,463.601]},{t:"C",p:[227,463.601,237.8,463.201,238.2,460.401]},
{t:"C",p:[238.6,457.601,237,446.001,233,437.601]},{t:"z",p:[]}]},{f:null,s:{c:"#a5264c",w:2},p:[{t:"M",p:[247,444.801]},{t:"C",p:[247,444.801,250.6,442.401,253,443.601]}]},{f:null,s:{c:"#a5264c",w:2},p:[{t:"M",p:[253.5,428.401]},{t:"C",p:[253.5,428.401,256.4,423.501,261.2,422.701]}]},{f:"#b2b2b2",s:null,p:[{t:"M",p:[174.2,465.201]},{t:"C",p:[174.2,465.201,192.2,468.401,196.6,466.801]},{t:"C",p:[196.6,466.801,205.4,466.801,197,468.801]},{t:"C",p:[197,468.801,184.2,468.801,176.2,467.601]},{t:"C",p:[176.2,
467.601,164.6,462.001,174.2,465.201]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[188.2,372.001]},{t:"C",p:[188.2,372.001,205.8,372.001,207.8,372.801]},{t:"C",p:[207.8,372.801,215,403.601,211.4,411.201]},{t:"C",p:[211.4,411.201,210.2,414.001,207.4,408.401]},{t:"C",p:[207.4,408.401,189,375.601,185.8,373.601]},{t:"C",p:[182.6,371.601,187,372.001,188.2,372.001]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[111.1,369.301]},{t:"C",p:[111.1,369.301,120,371.001,132.6,373.601]},{t:"C",
p:[132.6,373.601,137.4,396.001,140.6,400.801]},{t:"C",p:[143.8,405.601,140.2,405.601,136.6,402.801]},{t:"C",p:[133,400.001,118.2,386.001,116.2,381.601]},{t:"C",p:[114.2,377.201,111.1,369.301,111.1,369.301]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[132.961,373.818]},{t:"C",p:[132.961,373.818,138.761,375.366,139.77,377.581]},{t:"C",p:[140.778,379.795,138.568,383.092,138.568,383.092]},{t:"C",p:[138.568,383.092,137.568,386.397,136.366,384.235]},{t:"C",p:[135.164,382.072,132.292,374.412,
132.961,373.818]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[133,373.601]},{t:"C",p:[133,373.601,136.6,378.801,140.2,378.801]},{t:"C",p:[143.8,378.801,144.182,378.388,147,379.001]},{t:"C",p:[151.6,380.001,151.2,378.001,157.8,379.201]},{t:"C",p:[160.44,379.681,163,378.801,165.8,380.001]},{t:"C",p:[168.6,381.201,171.8,380.401,173,378.401]},{t:"C",p:[174.2,376.401,179,372.201,179,372.201]},{t:"C",p:[179,372.201,166.2,374.001,163.4,374.801]},{t:"C",p:[163.4,374.801,141,376.001,133,373.601]},{t:"z",
p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[177.6,373.801]},{t:"C",p:[177.6,373.801,171.15,377.301,170.75,379.701]},{t:"C",p:[170.35,382.101,176,385.801,176,385.801]},{t:"C",p:[176,385.801,178.75,390.401,179.35,388.001]},{t:"C",p:[179.95,385.601,178.4,374.201,177.6,373.801]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[140.115,379.265]},{t:"C",p:[140.115,379.265,147.122,390.453,147.339,379.242]},{t:"C",p:[147.339,379.242,147.896,377.984,146.136,377.962]},{t:"C",p:[140.061,377.886,
141.582,373.784,140.115,379.265]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[147.293,379.514]},{t:"C",p:[147.293,379.514,155.214,390.701,154.578,379.421]},{t:"C",p:[154.578,379.421,154.585,379.089,152.832,378.936]},{t:"C",p:[148.085,378.522,148.43,374.004,147.293,379.514]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[154.506,379.522]},{t:"C",p:[154.506,379.522,162.466,390.15,161.797,380.484]},{t:"C",p:[161.797,380.484,161.916,379.251,160.262,378.95]},{t:"C",p:[156.37,378.244,
156.159,374.995,154.506,379.522]},{t:"z",p:[]}]},{f:"#ffc",s:{c:"#000",w:.5},p:[{t:"M",p:[161.382,379.602]},{t:"C",p:[161.382,379.602,169.282,391.163,169.63,381.382]},{t:"C",p:[169.63,381.382,171.274,380.004,169.528,379.782]},{t:"C",p:[163.71,379.042,164.508,374.588,161.382,379.602]},{t:"z",p:[]}]},{f:"#e5e5b2",s:null,p:[{t:"M",p:[125.208,383.132]},{t:"L",p:[117.55,381.601]},{t:"C",p:[114.95,376.601,112.85,370.451,112.85,370.451]},{t:"C",p:[112.85,370.451,119.2,371.451,131.7,374.251]},{t:"C",p:[131.7,
374.251,132.576,377.569,134.048,383.364]},{t:"L",p:[125.208,383.132]},{t:"z",p:[]}]},{f:"#e5e5b2",s:null,p:[{t:"M",p:[190.276,378.47]},{t:"C",p:[188.61,375.964,187.293,374.206,186.643,373.8]},{t:"C",p:[183.63,371.917,187.773,372.294,188.902,372.294]},{t:"C",p:[188.902,372.294,205.473,372.294,207.356,373.047]},{t:"C",p:[207.356,373.047,207.88,375.289,208.564,378.68]},{t:"C",p:[208.564,378.68,198.476,376.67,190.276,378.47]},{t:"z",p:[]}]},{f:"#cc7226",s:null,p:[{t:"M",p:[243.88,240.321]},{t:"C",p:[271.601,
244.281,297.121,208.641,298.881,198.96]},{t:"C",p:[300.641,189.28,290.521,177.4,290.521,177.4]},{t:"C",p:[291.841,174.32,287.001,160.24,281.721,151]},{t:"C",p:[276.441,141.76,260.54,142.734,243,141.76]},{t:"C",p:[227.16,140.88,208.68,164.2,207.36,165.96]},{t:"C",p:[206.04,167.72,212.2,206.001,213.52,211.721]},{t:"C",p:[214.84,217.441,212.2,243.841,212.2,243.841]},{t:"C",p:[246.44,234.741,216.16,236.361,243.88,240.321]},{t:"z",p:[]}]},{f:"#ea8e51",s:null,p:[{t:"M",p:[208.088,166.608]},{t:"C",p:[206.792,
168.336,212.84,205.921,214.136,211.537]},{t:"C",p:[215.432,217.153,212.84,243.073,212.84,243.073]},{t:"C",p:[245.512,234.193,216.728,235.729,243.944,239.617]},{t:"C",p:[271.161,243.505,296.217,208.513,297.945,199.008]},{t:"C",p:[299.673,189.504,289.737,177.84,289.737,177.84]},{t:"C",p:[291.033,174.816,286.281,160.992,281.097,151.92]},{t:"C",p:[275.913,142.848,260.302,143.805,243.08,142.848]},{t:"C",p:[227.528,141.984,209.384,164.88,208.088,166.608]},{t:"z",p:[]}]},{f:"#efaa7c",s:null,p:[{t:"M",p:[208.816,
167.256]},{t:"C",p:[207.544,168.952,213.48,205.841,214.752,211.353]},{t:"C",p:[216.024,216.865,213.48,242.305,213.48,242.305]},{t:"C",p:[244.884,233.145,217.296,235.097,244.008,238.913]},{t:"C",p:[270.721,242.729,295.313,208.385,297.009,199.056]},{t:"C",p:[298.705,189.728,288.953,178.28,288.953,178.28]},{t:"C",p:[290.225,175.312,285.561,161.744,280.473,152.84]},{t:"C",p:[275.385,143.936,260.063,144.875,243.16,143.936]},{t:"C",p:[227.896,143.088,210.088,165.56,208.816,167.256]},{t:"z",p:[]}]},{f:"#f4c6a8",
s:null,p:[{t:"M",p:[209.544,167.904]},{t:"C",p:[208.296,169.568,214.12,205.761,215.368,211.169]},{t:"C",p:[216.616,216.577,214.12,241.537,214.12,241.537]},{t:"C",p:[243.556,232.497,217.864,234.465,244.072,238.209]},{t:"C",p:[270.281,241.953,294.409,208.257,296.073,199.105]},{t:"C",p:[297.737,189.952,288.169,178.72,288.169,178.72]},{t:"C",p:[289.417,175.808,284.841,162.496,279.849,153.76]},{t:"C",p:[274.857,145.024,259.824,145.945,243.24,145.024]},{t:"C",p:[228.264,144.192,210.792,166.24,209.544,167.904]},
{t:"z",p:[]}]},{f:"#f9e2d3",s:null,p:[{t:"M",p:[210.272,168.552]},{t:"C",p:[209.048,170.184,214.76,205.681,215.984,210.985]},{t:"C",p:[217.208,216.289,214.76,240.769,214.76,240.769]},{t:"C",p:[242.628,231.849,218.432,233.833,244.136,237.505]},{t:"C",p:[269.841,241.177,293.505,208.129,295.137,199.152]},{t:"C",p:[296.769,190.176,287.385,179.16,287.385,179.16]},{t:"C",p:[288.609,176.304,284.121,163.248,279.225,154.68]},{t:"C",p:[274.329,146.112,259.585,147.015,243.32,146.112]},{t:"C",p:[228.632,145.296,
211.496,166.92,210.272,168.552]},{t:"z",p:[]}]},{f:"#fff",s:null,p:[{t:"M",p:[244.2,236.8]},{t:"C",p:[269.4,240.4,292.601,208,294.201,199.2]},{t:"C",p:[295.801,190.4,286.601,179.6,286.601,179.6]},{t:"C",p:[287.801,176.8,283.4,164,278.6,155.6]},{t:"C",p:[273.8,147.2,259.346,148.086,243.4,147.2]},{t:"C",p:[229,146.4,212.2,167.6,211,169.2]},{t:"C",p:[209.8,170.8,215.4,205.6,216.6,210.8]},{t:"C",p:[217.8,216,215.4,240,215.4,240]},{t:"C",p:[240.9,231.4,219,233.2,244.2,236.8]},{t:"z",p:[]}]},{f:"#ccc",
s:null,p:[{t:"M",p:[290.601,202.8]},{t:"C",p:[290.601,202.8,262.8,210.4,251.2,208.8]},{t:"C",p:[251.2,208.8,235.4,202.2,226.6,224]},{t:"C",p:[226.6,224,223,231.2,221,233.2]},{t:"C",p:[219,235.2,290.601,202.8,290.601,202.8]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[294.401,200.6]},{t:"C",p:[294.401,200.6,265.4,212.8,255.4,212.4]},{t:"C",p:[255.4,212.4,239,207.8,230.6,222.4]},{t:"C",p:[230.6,222.4,222.2,231.6,219,233.2]},{t:"C",p:[219,233.2,218.6,234.8,225,230.8]},{t:"L",p:[235.4,236]},{t:"C",p:[235.4,
236,250.2,245.6,259.8,229.6]},{t:"C",p:[259.8,229.6,263.8,218.4,263.8,216.4]},{t:"C",p:[263.8,214.4,285,208.8,286.601,208.4]},{t:"C",p:[288.201,208,294.801,203.8,294.401,200.6]},{t:"z",p:[]}]},{f:"#99cc32",s:null,p:[{t:"M",p:[247,236.514]},{t:"C",p:[240.128,236.514,231.755,232.649,231.755,226.4]},{t:"C",p:[231.755,220.152,240.128,213.887,247,213.887]},{t:"C",p:[253.874,213.887,259.446,218.952,259.446,225.2]},{t:"C",p:[259.446,231.449,253.874,236.514,247,236.514]},{t:"z",p:[]}]},{f:"#659900",s:null,
p:[{t:"M",p:[243.377,219.83]},{t:"C",p:[238.531,220.552,233.442,222.055,233.514,221.839]},{t:"C",p:[235.054,217.22,241.415,213.887,247,213.887]},{t:"C",p:[251.296,213.887,255.084,215.865,257.32,218.875]},{t:"C",p:[257.32,218.875,252.004,218.545,243.377,219.83]},{t:"z",p:[]}]},{f:"#fff",s:null,p:[{t:"M",p:[255.4,219.6]},{t:"C",p:[255.4,219.6,251,216.4,251,218.6]},{t:"C",p:[251,218.6,254.6,223,255.4,219.6]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[245.4,227.726]},{t:"C",p:[242.901,227.726,240.875,
225.7,240.875,223.2]},{t:"C",p:[240.875,220.701,242.901,218.675,245.4,218.675]},{t:"C",p:[247.9,218.675,249.926,220.701,249.926,223.2]},{t:"C",p:[249.926,225.7,247.9,227.726,245.4,227.726]},{t:"z",p:[]}]},{f:"#cc7226",s:null,p:[{t:"M",p:[141.4,214.4]},{t:"C",p:[141.4,214.4,138.2,193.2,140.6,188.8]},{t:"C",p:[140.6,188.8,151.4,178.8,151,175.2]},{t:"C",p:[151,175.2,150.6,157.2,149.4,156.4]},{t:"C",p:[148.2,155.6,140.6,149.6,134.6,156]},{t:"C",p:[134.6,156,124.2,174,125,180.4]},{t:"L",p:[125,182.4]},
{t:"C",p:[125,182.4,117.4,182,115.8,184]},{t:"C",p:[115.8,184,114.6,189.2,113.4,189.6]},{t:"C",p:[113.4,189.6,110.6,192,112.6,194.8]},{t:"C",p:[112.6,194.8,110.6,197.2,111,201.2]},{t:"L",p:[118.6,205.2]},{t:"C",p:[118.6,205.2,120.6,219.6,131.4,224.8]},{t:"C",p:[136.236,227.129,139.4,220.4,141.4,214.4]},{t:"z",p:[]}]},{f:"#fff",s:null,p:[{t:"M",p:[140.4,212.56]},{t:"C",p:[140.4,212.56,137.52,193.48,139.68,189.52]},{t:"C",p:[139.68,189.52,149.4,180.52,149.04,177.28]},{t:"C",p:[149.04,177.28,148.68,
161.08,147.6,160.36]},{t:"C",p:[146.52,159.64,139.68,154.24,134.28,160]},{t:"C",p:[134.28,160,124.92,176.2,125.64,181.96]},{t:"L",p:[125.64,183.76]},{t:"C",p:[125.64,183.76,118.8,183.4,117.36,185.2]},{t:"C",p:[117.36,185.2,116.28,189.88,115.2,190.24]},{t:"C",p:[115.2,190.24,112.68,192.4,114.48,194.92]},{t:"C",p:[114.48,194.92,112.68,197.08,113.04,200.68]},{t:"L",p:[119.88,204.28]},{t:"C",p:[119.88,204.28,121.68,217.24,131.4,221.92]},{t:"C",p:[135.752,224.015,138.6,217.96,140.4,212.56]},{t:"z",p:[]}]},
{f:"#eb955c",s:null,p:[{t:"M",p:[148.95,157.39]},{t:"C",p:[147.86,156.53,140.37,150.76,134.52,157]},{t:"C",p:[134.52,157,124.38,174.55,125.16,180.79]},{t:"L",p:[125.16,182.74]},{t:"C",p:[125.16,182.74,117.75,182.35,116.19,184.3]},{t:"C",p:[116.19,184.3,115.02,189.37,113.85,189.76]},{t:"C",p:[113.85,189.76,111.12,192.1,113.07,194.83]},{t:"C",p:[113.07,194.83,111.12,197.17,111.51,201.07]},{t:"L",p:[118.92,204.97]},{t:"C",p:[118.92,204.97,120.87,219.01,131.4,224.08]},{t:"C",p:[136.114,226.35,139.2,219.79,
141.15,213.94]},{t:"C",p:[141.15,213.94,138.03,193.27,140.37,188.98]},{t:"C",p:[140.37,188.98,150.9,179.23,150.51,175.72]},{t:"C",p:[150.51,175.72,150.12,158.17,148.95,157.39]},{t:"z",p:[]}]},{f:"#f2b892",s:null,p:[{t:"M",p:[148.5,158.38]},{t:"C",p:[147.52,157.46,140.14,151.92,134.44,158]},{t:"C",p:[134.44,158,124.56,175.1,125.32,181.18]},{t:"L",p:[125.32,183.08]},{t:"C",p:[125.32,183.08,118.1,182.7,116.58,184.6]},{t:"C",p:[116.58,184.6,115.44,189.54,114.3,189.92]},{t:"C",p:[114.3,189.92,111.64,192.2,
113.54,194.86]},{t:"C",p:[113.54,194.86,111.64,197.14,112.02,200.94]},{t:"L",p:[119.24,204.74]},{t:"C",p:[119.24,204.74,121.14,218.42,131.4,223.36]},{t:"C",p:[135.994,225.572,139,219.18,140.9,213.48]},{t:"C",p:[140.9,213.48,137.86,193.34,140.14,189.16]},{t:"C",p:[140.14,189.16,150.4,179.66,150.02,176.24]},{t:"C",p:[150.02,176.24,149.64,159.14,148.5,158.38]},{t:"z",p:[]}]},{f:"#f8dcc8",s:null,p:[{t:"M",p:[148.05,159.37]},{t:"C",p:[147.18,158.39,139.91,153.08,134.36,159]},{t:"C",p:[134.36,159,124.74,
175.65,125.48,181.57]},{t:"L",p:[125.48,183.42]},{t:"C",p:[125.48,183.42,118.45,183.05,116.97,184.9]},{t:"C",p:[116.97,184.9,115.86,189.71,114.75,190.08]},{t:"C",p:[114.75,190.08,112.16,192.3,114.01,194.89]},{t:"C",p:[114.01,194.89,112.16,197.11,112.53,200.81]},{t:"L",p:[119.56,204.51]},{t:"C",p:[119.56,204.51,121.41,217.83,131.4,222.64]},{t:"C",p:[135.873,224.794,138.8,218.57,140.65,213.02]},{t:"C",p:[140.65,213.02,137.69,193.41,139.91,189.34]},{t:"C",p:[139.91,189.34,149.9,180.09,149.53,176.76]},
{t:"C",p:[149.53,176.76,149.16,160.11,148.05,159.37]},{t:"z",p:[]}]},{f:"#fff",s:null,p:[{t:"M",p:[140.4,212.46]},{t:"C",p:[140.4,212.46,137.52,193.48,139.68,189.52]},{t:"C",p:[139.68,189.52,149.4,180.52,149.04,177.28]},{t:"C",p:[149.04,177.28,148.68,161.08,147.6,160.36]},{t:"C",p:[146.84,159.32,139.68,154.24,134.28,160]},{t:"C",p:[134.28,160,124.92,176.2,125.64,181.96]},{t:"L",p:[125.64,183.76]},{t:"C",p:[125.64,183.76,118.8,183.4,117.36,185.2]},{t:"C",p:[117.36,185.2,116.28,189.88,115.2,190.24]},
{t:"C",p:[115.2,190.24,112.68,192.4,114.48,194.92]},{t:"C",p:[114.48,194.92,112.68,197.08,113.04,200.68]},{t:"L",p:[119.88,204.28]},{t:"C",p:[119.88,204.28,121.68,217.24,131.4,221.92]},{t:"C",p:[135.752,224.015,138.6,217.86,140.4,212.46]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[137.3,206.2]},{t:"C",p:[137.3,206.2,115.7,196,114.8,195.2]},{t:"C",p:[114.8,195.2,123.9,203.4,124.7,203.4]},{t:"C",p:[125.5,203.4,137.3,206.2,137.3,206.2]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[120.2,200]},{t:"C",
p:[120.2,200,138.6,203.6,138.6,208]},{t:"C",p:[138.6,210.912,138.357,224.331,133,222.8]},{t:"C",p:[124.6,220.4,128.2,206,120.2,200]},{t:"z",p:[]}]},{f:"#99cc32",s:null,p:[{t:"M",p:[128.6,203.8]},{t:"C",p:[128.6,203.8,137.578,205.274,138.6,208]},{t:"C",p:[139.2,209.6,139.863,217.908,134.4,219]},{t:"C",p:[129.848,219.911,127.618,209.69,128.6,203.8]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[214.595,246.349]},{t:"C",p:[214.098,244.607,215.409,244.738,217.2,244.2]},{t:"C",p:[219.2,243.6,231.4,239.8,
232.2,237.2]},{t:"C",p:[233,234.6,246.2,239,246.2,239]},{t:"C",p:[248,239.8,252.4,242.4,252.4,242.4]},{t:"C",p:[257.2,243.6,263.8,244,263.8,244]},{t:"C",p:[266.2,245,269.6,247.8,269.6,247.8]},{t:"C",p:[284.2,258,296.601,250.8,296.601,250.8]},{t:"C",p:[316.601,244.2,310.601,227,310.601,227]},{t:"C",p:[307.601,218,310.801,214.6,310.801,214.6]},{t:"C",p:[311.001,210.8,318.201,217.2,318.201,217.2]},{t:"C",p:[320.801,221.4,321.601,226.4,321.601,226.4]},{t:"C",p:[329.601,237.6,326.201,219.8,326.201,219.8]},
{t:"C",p:[326.401,218.8,323.601,215.2,323.601,214]},{t:"C",p:[323.601,212.8,321.801,209.4,321.801,209.4]},{t:"C",p:[318.801,206,321.201,199,321.201,199]},{t:"C",p:[323.001,185.2,320.801,187,320.801,187]},{t:"C",p:[319.601,185.2,310.401,195.2,310.401,195.2]},{t:"C",p:[308.201,198.6,302.201,200.2,302.201,200.2]},{t:"C",p:[299.401,202,296.001,200.6,296.001,200.6]},{t:"C",p:[293.401,200.2,287.801,207.2,287.801,207.2]},{t:"C",p:[290.601,207,293.001,211.4,295.401,211.6]},{t:"C",p:[297.801,211.8,299.601,
209.2,301.201,208.6]},{t:"C",p:[302.801,208,305.601,213.8,305.601,213.8]},{t:"C",p:[306.001,216.4,300.401,221.2,300.401,221.2]},{t:"C",p:[300.001,225.8,298.401,224.2,298.401,224.2]},{t:"C",p:[295.401,223.6,294.201,227.4,293.201,232]},{t:"C",p:[292.201,236.6,288.001,237,288.001,237]},{t:"C",p:[286.401,244.4,285.2,241.4,285.2,241.4]},{t:"C",p:[285,235.8,279,241.6,279,241.6]},{t:"C",p:[277.8,243.6,273.2,241.4,273.2,241.4]},{t:"C",p:[266.4,239.4,268.8,237.4,268.8,237.4]},{t:"C",p:[270.6,235.2,281.8,237.4,
281.8,237.4]},{t:"C",p:[284,235.8,276,231.8,276,231.8]},{t:"C",p:[275.4,230,276.4,225.6,276.4,225.6]},{t:"C",p:[277.6,222.4,284.4,216.8,284.4,216.8]},{t:"C",p:[293.801,215.6,291.001,214,291.001,214]},{t:"C",p:[284.801,208.8,279,216.4,279,216.4]},{t:"C",p:[276.8,222.6,259.4,237.6,259.4,237.6]},{t:"C",p:[254.6,241,257.2,234.2,253.2,237.6]},{t:"C",p:[249.2,241,228.6,232,228.6,232]},{t:"C",p:[217.038,230.807,214.306,246.549,210.777,243.429]},{t:"C",p:[210.777,243.429,216.195,251.949,214.595,246.349]},
{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[409.401,80]},{t:"C",p:[409.401,80,383.801,88,381.001,106.8]},{t:"C",p:[381.001,106.8,378.601,129.6,399.001,147.2]},{t:"C",p:[399.001,147.2,399.401,153.6,401.401,156.8]},{t:"C",p:[401.401,156.8,399.801,161.6,418.601,154]},{t:"L",p:[445.801,145.6]},{t:"C",p:[445.801,145.6,452.201,143.2,457.401,134.4]},{t:"C",p:[462.601,125.6,477.801,106.8,474.201,81.6]},{t:"C",p:[474.201,81.6,475.401,70.4,469.401,70]},{t:"C",p:[469.401,70,461.001,68.4,453.801,76]},{t:"C",
p:[453.801,76,447.001,79.2,444.601,78.8]},{t:"L",p:[409.401,80]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[464.022,79.01]},{t:"C",p:[464.022,79.01,466.122,70.08,461.282,74.92]},{t:"C",p:[461.282,74.92,454.242,80.64,446.761,80.64]},{t:"C",p:[446.761,80.64,432.241,82.84,427.841,96.04]},{t:"C",p:[427.841,96.04,423.881,122.88,431.801,128.6]},{t:"C",p:[431.801,128.6,436.641,136.08,443.681,129.48]},{t:"C",p:[450.722,122.88,466.222,92.65,464.022,79.01]},{t:"z",p:[]}]},{f:"#323232",s:null,p:[{t:"M",p:[463.648,
79.368]},{t:"C",p:[463.648,79.368,465.738,70.624,460.986,75.376]},{t:"C",p:[460.986,75.376,454.074,80.992,446.729,80.992]},{t:"C",p:[446.729,80.992,432.473,83.152,428.153,96.112]},{t:"C",p:[428.153,96.112,424.265,122.464,432.041,128.08]},{t:"C",p:[432.041,128.08,436.793,135.424,443.705,128.944]},{t:"C",p:[450.618,122.464,465.808,92.76,463.648,79.368]},{t:"z",p:[]}]},{f:"#666",s:null,p:[{t:"M",p:[463.274,79.726]},{t:"C",p:[463.274,79.726,465.354,71.168,460.69,75.832]},{t:"C",p:[460.69,75.832,453.906,
81.344,446.697,81.344]},{t:"C",p:[446.697,81.344,432.705,83.464,428.465,96.184]},{t:"C",p:[428.465,96.184,424.649,122.048,432.281,127.56]},{t:"C",p:[432.281,127.56,436.945,134.768,443.729,128.408]},{t:"C",p:[450.514,122.048,465.394,92.87,463.274,79.726]},{t:"z",p:[]}]},{f:"#999",s:null,p:[{t:"M",p:[462.9,80.084]},{t:"C",p:[462.9,80.084,464.97,71.712,460.394,76.288]},{t:"C",p:[460.394,76.288,453.738,81.696,446.665,81.696]},{t:"C",p:[446.665,81.696,432.937,83.776,428.777,96.256]},{t:"C",p:[428.777,
96.256,425.033,121.632,432.521,127.04]},{t:"C",p:[432.521,127.04,437.097,134.112,443.753,127.872]},{t:"C",p:[450.41,121.632,464.98,92.98,462.9,80.084]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[462.526,80.442]},{t:"C",p:[462.526,80.442,464.586,72.256,460.098,76.744]},{t:"C",p:[460.098,76.744,453.569,82.048,446.633,82.048]},{t:"C",p:[446.633,82.048,433.169,84.088,429.089,96.328]},{t:"C",p:[429.089,96.328,425.417,121.216,432.761,126.52]},{t:"C",p:[432.761,126.52,437.249,133.456,443.777,127.336]},
{t:"C",p:[450.305,121.216,464.566,93.09,462.526,80.442]},{t:"z",p:[]}]},{f:"#fff",s:null,p:[{t:"M",p:[462.151,80.8]},{t:"C",p:[462.151,80.8,464.201,72.8,459.801,77.2]},{t:"C",p:[459.801,77.2,453.401,82.4,446.601,82.4]},{t:"C",p:[446.601,82.4,433.401,84.4,429.401,96.4]},{t:"C",p:[429.401,96.4,425.801,120.8,433.001,126]},{t:"C",p:[433.001,126,437.401,132.8,443.801,126.8]},{t:"C",p:[450.201,120.8,464.151,93.2,462.151,80.8]},{t:"z",p:[]}]},{f:"#992600",s:null,p:[{t:"M",p:[250.6,284]},{t:"C",p:[250.6,
284,230.2,264.8,222.2,264]},{t:"C",p:[222.2,264,187.8,260,173,278]},{t:"C",p:[173,278,190.6,257.6,218.2,263.2]},{t:"C",p:[218.2,263.2,196.6,258.8,184.2,262]},{t:"C",p:[184.2,262,167.4,262,157.8,276]},{t:"L",p:[155,280.8]},{t:"C",p:[155,280.8,159,266,177.4,260]},{t:"C",p:[177.4,260,200.2,255.2,211,260]},{t:"C",p:[211,260,189.4,253.2,179.4,255.2]},{t:"C",p:[179.4,255.2,149,252.8,136.2,279.2]},{t:"C",p:[136.2,279.2,140.2,264.8,155,257.6]},{t:"C",p:[155,257.6,168.6,248.8,189,251.6]},{t:"C",p:[189,251.6,
203.4,254.8,208.6,257.2]},{t:"C",p:[213.8,259.6,212.6,256.8,204.2,252]},{t:"C",p:[204.2,252,198.6,242,184.6,242.4]},{t:"C",p:[184.6,242.4,141.8,246,131.4,258]},{t:"C",p:[131.4,258,145,246.8,155.4,244]},{t:"C",p:[155.4,244,177.8,236,186.2,236.8]},{t:"C",p:[186.2,236.8,211,237.8,218.6,233.8]},{t:"C",p:[218.6,233.8,207.4,238.8,210.6,242]},{t:"C",p:[213.8,245.2,220.6,252.8,220.6,254]},{t:"C",p:[220.6,255.2,244.8,277.3,248.4,281.7]},{t:"L",p:[250.6,284]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[389,
478]},{t:"C",p:[389,478,373.5,441.5,361,432]},{t:"C",p:[361,432,387,448,390.5,466]},{t:"C",p:[390.5,466,390.5,476,389,478]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[436,485.5]},{t:"C",p:[436,485.5,409.5,430.5,391,406.5]},{t:"C",p:[391,406.5,434.5,444,439.5,470.5]},{t:"L",p:[440,476]},{t:"L",p:[437,473.5]},{t:"C",p:[437,473.5,436.5,482.5,436,485.5]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[492.5,437]},{t:"C",p:[492.5,437,430,377.5,428.5,375]},{t:"C",p:[428.5,375,489,441,492,448.5]},{t:"C",
p:[492,448.5,490,439.5,492.5,437]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[304,480.5]},{t:"C",p:[304,480.5,323.5,428.5,342.5,451]},{t:"C",p:[342.5,451,357.5,461,357,464]},{t:"C",p:[357,464,353,457.5,335,458]},{t:"C",p:[335,458,316,455,304,480.5]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[494.5,353]},{t:"C",p:[494.5,353,449.5,324.5,442,323]},{t:"C",p:[430.193,320.639,491.5,352,496.5,362.5]},{t:"C",p:[496.5,362.5,498.5,360,494.5,353]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[343.801,459.601]},
{t:"C",p:[343.801,459.601,364.201,457.601,371.001,450.801]},{t:"L",p:[375.401,454.401]},{t:"L",p:[393.001,416.001]},{t:"L",p:[396.601,421.201]},{t:"C",p:[396.601,421.201,411.001,406.401,410.201,398.401]},{t:"C",p:[409.401,390.401,423.001,404.401,423.001,404.401]},{t:"C",p:[423.001,404.401,422.201,392.801,429.401,399.601]},{t:"C",p:[429.401,399.601,427.001,384.001,435.401,392.001]},{t:"C",p:[435.401,392.001,424.864,361.844,447.401,387.601]},{t:"C",p:[453.001,394.001,448.601,387.201,448.601,387.201]},
{t:"C",p:[448.601,387.201,422.601,339.201,444.201,353.601]},{t:"C",p:[444.201,353.601,446.201,330.801,445.001,326.401]},{t:"C",p:[443.801,322.001,441.801,299.6,437.001,294.4]},{t:"C",p:[432.201,289.2,437.401,287.6,443.001,292.8]},{t:"C",p:[443.001,292.8,431.801,268.8,445.001,280.8]},{t:"C",p:[445.001,280.8,441.401,265.6,437.001,262.8]},{t:"C",p:[437.001,262.8,431.401,245.6,446.601,256.4]},{t:"C",p:[446.601,256.4,442.201,244,439.001,240.8]},{t:"C",p:[439.001,240.8,427.401,213.2,434.601,218]},{t:"L",
p:[439.001,221.6]},{t:"C",p:[439.001,221.6,432.201,207.6,438.601,212]},{t:"C",p:[445.001,216.4,445.001,216,445.001,216]},{t:"C",p:[445.001,216,423.801,182.8,444.201,200.4]},{t:"C",p:[444.201,200.4,436.042,186.482,432.601,179.6]},{t:"C",p:[432.601,179.6,413.801,159.2,428.201,165.6]},{t:"L",p:[433.001,167.2]},{t:"C",p:[433.001,167.2,424.201,157.2,416.201,155.6]},{t:"C",p:[408.201,154,418.601,147.6,425.001,149.6]},{t:"C",p:[431.401,151.6,447.001,159.2,447.001,159.2]},{t:"C",p:[447.001,159.2,459.801,
178,463.801,178.4]},{t:"C",p:[463.801,178.4,443.801,170.8,449.801,178.8]},{t:"C",p:[449.801,178.8,464.201,192.8,457.001,192.4]},{t:"C",p:[457.001,192.4,451.001,199.6,455.801,208.4]},{t:"C",p:[455.801,208.4,437.342,190.009,452.201,215.6]},{t:"L",p:[459.001,232]},{t:"C",p:[459.001,232,434.601,207.2,445.801,229.2]},{t:"C",p:[445.801,229.2,463.001,252.8,465.001,253.2]},{t:"C",p:[467.001,253.6,471.401,262.4,471.401,262.4]},{t:"L",p:[467.001,260.4]},{t:"L",p:[472.201,269.2]},{t:"C",p:[472.201,269.2,461.001,
257.2,467.001,270.4]},{t:"L",p:[472.601,284.8]},{t:"C",p:[472.601,284.8,452.201,262.8,465.801,292.4]},{t:"C",p:[465.801,292.4,449.401,287.2,458.201,304.4]},{t:"C",p:[458.201,304.4,456.601,320.401,457.001,325.601]},{t:"C",p:[457.401,330.801,458.601,359.201,454.201,367.201]},{t:"C",p:[449.801,375.201,460.201,394.401,462.201,398.401]},{t:"C",p:[464.201,402.401,467.801,413.201,459.001,404.001]},{t:"C",p:[450.201,394.801,454.601,400.401,456.601,409.201]},{t:"C",p:[458.601,418.001,464.601,433.601,463.801,
439.201]},{t:"C",p:[463.801,439.201,462.601,440.401,459.401,436.801]},{t:"C",p:[459.401,436.801,444.601,414.001,446.201,428.401]},{t:"C",p:[446.201,428.401,445.001,436.401,441.801,445.201]},{t:"C",p:[441.801,445.201,438.601,456.001,438.601,447.201]},{t:"C",p:[438.601,447.201,435.401,430.401,432.601,438.001]},{t:"C",p:[429.801,445.601,426.201,451.601,423.401,454.001]},{t:"C",p:[420.601,456.401,415.401,433.601,414.201,444.001]},{t:"C",p:[414.201,444.001,402.201,431.601,397.401,448.001]},{t:"L",p:[385.801,
464.401]},{t:"C",p:[385.801,464.401,385.401,452.001,384.201,458.001]},{t:"C",p:[384.201,458.001,354.201,464.001,343.801,459.601]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[309.401,102.8]},{t:"C",p:[309.401,102.8,297.801,94.8,293.801,95.2]},{t:"C",p:[289.801,95.6,321.401,86.4,362.601,114]},{t:"C",p:[362.601,114,367.401,116.8,371.001,116.4]},{t:"C",p:[371.001,116.4,374.201,118.8,371.401,122.4]},{t:"C",p:[371.401,122.4,362.601,132,373.801,143.2]},{t:"C",p:[373.801,143.2,392.201,150,386.601,141.2]},
{t:"C",p:[386.601,141.2,397.401,145.2,399.801,149.2]},{t:"C",p:[402.201,153.2,401.001,149.2,401.001,149.2]},{t:"C",p:[401.001,149.2,394.601,142,388.601,136.8]},{t:"C",p:[388.601,136.8,383.401,134.8,380.601,126.4]},{t:"C",p:[377.801,118,375.401,108,379.801,104.8]},{t:"C",p:[379.801,104.8,375.801,109.2,376.601,105.2]},{t:"C",p:[377.401,101.2,381.001,97.6,382.601,97.2]},{t:"C",p:[384.201,96.8,400.601,81,407.401,80.6]},{t:"C",p:[407.401,80.6,398.201,82,395.201,81]},{t:"C",p:[392.201,80,365.601,68.6,359.601,
67.4]},{t:"C",p:[359.601,67.4,342.801,60.8,354.801,62.8]},{t:"C",p:[354.801,62.8,390.601,66.6,408.801,79.8]},{t:"C",p:[408.801,79.8,401.601,71.4,383.201,64.4]},{t:"C",p:[383.201,64.4,361.001,51.8,325.801,56.8]},{t:"C",p:[325.801,56.8,308.001,60,300.201,61.8]},{t:"C",p:[300.201,61.8,297.601,61.2,297.001,60.8]},{t:"C",p:[296.401,60.4,284.6,51.4,257,58.4]},{t:"C",p:[257,58.4,240,63,231.4,67.8]},{t:"C",p:[231.4,67.8,216.2,69,212.6,72.2]},{t:"C",p:[212.6,72.2,194,86.8,192,87.6]},{t:"C",p:[190,88.4,178.6,
96,177.8,96.4]},{t:"C",p:[177.8,96.4,202.4,89.8,204.8,87.4]},{t:"C",p:[207.2,85,224.6,82.4,227,83.8]},{t:"C",p:[229.4,85.2,237.8,84.6,228.2,85.2]},{t:"C",p:[228.2,85.2,303.801,100,304.601,102]},{t:"C",p:[305.401,104,309.401,102.8,309.401,102.8]},{t:"z",p:[]}]},{f:"#cc7226",s:null,p:[{t:"M",p:[380.801,93.6]},{t:"C",p:[380.801,93.6,370.601,86.2,368.601,86.2]},{t:"C",p:[366.601,86.2,354.201,76,350.001,76.4]},{t:"C",p:[345.801,76.8,333.601,66.8,306.201,75]},{t:"C",p:[306.201,75,305.601,73,309.201,72.2]},
{t:"C",p:[309.201,72.2,315.601,70,316.001,69.4]},{t:"C",p:[316.001,69.4,336.201,65.2,343.401,68.8]},{t:"C",p:[343.401,68.8,352.601,71.4,358.801,77.6]},{t:"C",p:[358.801,77.6,370.001,80.8,373.201,79.8]},{t:"C",p:[373.201,79.8,382.001,82,382.401,83.8]},{t:"C",p:[382.401,83.8,388.201,86.8,386.401,89.4]},{t:"C",p:[386.401,89.4,386.801,91,380.801,93.6]},{t:"z",p:[]}]},{f:"#cc7226",s:null,p:[{t:"M",p:[368.33,91.491]},{t:"C",p:[369.137,92.123,370.156,92.221,370.761,93.03]},{t:"C",p:[370.995,93.344,370.706,
93.67,370.391,93.767]},{t:"C",p:[369.348,94.084,368.292,93.514,367.15,94.102]},{t:"C",p:[366.748,94.309,366.106,94.127,365.553,93.978]},{t:"C",p:[363.921,93.537,362.092,93.512,360.401,94.2]},{t:"C",p:[358.416,93.071,356.056,93.655,353.975,92.654]},{t:"C",p:[353.917,92.627,353.695,92.973,353.621,92.946]},{t:"C",p:[350.575,91.801,346.832,92.084,344.401,89.8]},{t:"C",p:[341.973,89.388,339.616,88.926,337.188,88.246]},{t:"C",p:[335.37,87.737,333.961,86.748,332.341,85.916]},{t:"C",p:[330.964,85.208,329.507,
84.686,327.973,84.314]},{t:"C",p:[326.11,83.862,324.279,83.974,322.386,83.454]},{t:"C",p:[322.293,83.429,322.101,83.773,322.019,83.746]},{t:"C",p:[321.695,83.638,321.405,83.055,321.234,83.108]},{t:"C",p:[319.553,83.63,318.065,82.658,316.401,83]},{t:"C",p:[315.223,81.776,313.495,82.021,311.949,81.579]},{t:"C",p:[308.985,80.731,305.831,82.001,302.801,81]},{t:"C",p:[306.914,79.158,311.601,80.39,315.663,78.321]},{t:"C",p:[317.991,77.135,320.653,78.237,323.223,77.477]},{t:"C",p:[323.71,77.333,324.401,
77.131,324.801,77.8]},{t:"C",p:[324.935,77.665,325.117,77.426,325.175,77.454]},{t:"C",p:[327.625,78.611,329.94,79.885,332.422,80.951]},{t:"C",p:[332.763,81.097,333.295,80.865,333.547,81.067]},{t:"C",p:[335.067,82.283,337.01,82.18,338.401,83.4]},{t:"C",p:[340.099,82.898,341.892,83.278,343.621,82.654]},{t:"C",p:[343.698,82.627,343.932,82.968,343.965,82.946]},{t:"C",p:[345.095,82.198,346.25,82.469,347.142,82.773]},{t:"C",p:[347.48,82.888,348.143,83.135,348.448,83.209]},{t:"C",p:[349.574,83.485,350.43,
83.965,351.609,84.148]},{t:"C",p:[351.723,84.166,351.908,83.826,351.98,83.854]},{t:"C",p:[353.103,84.292,354.145,84.236,354.801,85.4]},{t:"C",p:[354.936,85.265,355.101,85.027,355.183,85.054]},{t:"C",p:[356.21,85.392,356.859,86.147,357.96,86.388]},{t:"C",p:[358.445,86.494,359.057,87.12,359.633,87.296]},{t:"C",p:[362.025,88.027,363.868,89.556,366.062,90.451]},{t:"C",p:[366.821,90.761,367.697,90.995,368.33,91.491]},{t:"z",p:[]}]},{f:"#cc7226",s:null,p:[{t:"M",p:[291.696,77.261]},{t:"C",p:[289.178,75.536,
286.81,74.43,284.368,72.644]},{t:"C",p:[284.187,72.511,283.827,72.681,283.625,72.559]},{t:"C",p:[282.618,71.95,281.73,71.369,280.748,70.673]},{t:"C",p:[280.209,70.291,279.388,70.302,278.88,70.044]},{t:"C",p:[276.336,68.752,273.707,68.194,271.2,67]},{t:"C",p:[271.882,66.362,273.004,66.606,273.6,65.8]},{t:"C",p:[273.795,66.08,274.033,66.364,274.386,66.173]},{t:"C",p:[276.064,65.269,277.914,65.116,279.59,65.206]},{t:"C",p:[281.294,65.298,283.014,65.603,284.789,65.875]},{t:"C",p:[285.096,65.922,285.295,
66.445,285.618,66.542]},{t:"C",p:[287.846,67.205,290.235,66.68,292.354,67.518]},{t:"C",p:[293.945,68.147,295.515,68.97,296.754,70.245]},{t:"C",p:[297.006,70.505,296.681,70.806,296.401,71]},{t:"C",p:[296.789,70.891,297.062,71.097,297.173,71.41]},{t:"C",p:[297.257,71.649,297.257,71.951,297.173,72.19]},{t:"C",p:[297.061,72.502,296.782,72.603,296.408,72.654]},{t:"C",p:[295.001,72.844,296.773,71.464,296.073,71.912]},{t:"C",p:[294.8,72.726,295.546,74.132,294.801,75.4]},{t:"C",p:[294.521,75.206,294.291,
74.988,294.401,74.6]},{t:"C",p:[294.635,75.122,294.033,75.412,293.865,75.728]},{t:"C",p:[293.48,76.453,292.581,77.868,291.696,77.261]},{t:"z",p:[]}]},{f:"#cc7226",s:null,p:[{t:"M",p:[259.198,84.609]},{t:"C",p:[256.044,83.815,252.994,83.93,249.978,82.654]},{t:"C",p:[249.911,82.626,249.688,82.973,249.624,82.946]},{t:"C",p:[248.258,82.352,247.34,81.386,246.264,80.34]},{t:"C",p:[245.351,79.452,243.693,79.839,242.419,79.352]},{t:"C",p:[242.095,79.228,241.892,78.716,241.591,78.677]},{t:"C",p:[240.372,78.52,
239.445,77.571,238.4,77]},{t:"C",p:[240.736,76.205,243.147,76.236,245.609,75.852]},{t:"C",p:[245.722,75.834,245.867,76.155,246,76.155]},{t:"C",p:[246.136,76.155,246.266,75.934,246.4,75.8]},{t:"C",p:[246.595,76.08,246.897,76.406,247.154,76.152]},{t:"C",p:[247.702,75.612,248.258,75.802,248.798,75.842]},{t:"C",p:[248.942,75.852,249.067,76.155,249.2,76.155]},{t:"C",p:[249.336,76.155,249.467,75.844,249.6,75.844]},{t:"C",p:[249.736,75.845,249.867,76.155,250,76.155]},{t:"C",p:[250.136,76.155,250.266,75.934,
250.4,75.8]},{t:"C",p:[251.092,76.582,251.977,76.028,252.799,76.207]},{t:"C",p:[253.837,76.434,254.104,77.582,255.178,77.88]},{t:"C",p:[259.893,79.184,264.03,81.329,268.393,83.416]},{t:"C",p:[268.7,83.563,268.91,83.811,268.8,84.2]},{t:"C",p:[269.067,84.2,269.38,84.112,269.57,84.244]},{t:"C",p:[270.628,84.976,271.669,85.524,272.366,86.622]},{t:"C",p:[272.582,86.961,272.253,87.368,272.02,87.316]},{t:"C",p:[267.591,86.321,263.585,85.713,259.198,84.609]},{t:"z",p:[]}]},{f:"#cc7226",s:null,p:[{t:"M",p:[245.338,
128.821]},{t:"C",p:[243.746,127.602,243.162,125.571,242.034,123.779]},{t:"C",p:[241.82,123.439,242.094,123.125,242.411,123.036]},{t:"C",p:[242.971,122.877,243.514,123.355,243.923,123.557]},{t:"C",p:[245.668,124.419,247.203,125.661,249.2,125.8]},{t:"C",p:[251.19,128.034,255.45,128.419,255.457,131.8]},{t:"C",p:[255.458,132.659,254.03,131.741,253.6,132.6]},{t:"C",p:[251.149,131.597,248.76,131.7,246.38,130.233]},{t:"C",p:[245.763,129.852,246.093,129.399,245.338,128.821]},{t:"z",p:[]}]},{f:"#cc7226",s:null,
p:[{t:"M",p:[217.8,76.244]},{t:"C",p:[217.935,76.245,224.966,76.478,224.949,76.592]},{t:"C",p:[224.904,76.901,217.174,77.95,216.81,77.78]},{t:"C",p:[216.646,77.704,209.134,80.134,209,80]},{t:"C",p:[209.268,79.865,217.534,76.244,217.8,76.244]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[233.2,86]},{t:"C",p:[233.2,86,218.4,87.8,214,89]},{t:"C",p:[209.6,90.2,191,97.8,188,99.8]},{t:"C",p:[188,99.8,174.6,105.2,157.6,125.2]},{t:"C",p:[157.6,125.2,165.2,121.8,167.4,119]},{t:"C",p:[167.4,119,181,106.4,180.8,
109]},{t:"C",p:[180.8,109,193,100.4,192.4,102.6]},{t:"C",p:[192.4,102.6,216.8,91.4,214.8,94.6]},{t:"C",p:[214.8,94.6,236.4,90,235.4,92]},{t:"C",p:[235.4,92,254.2,96.4,251.4,96.6]},{t:"C",p:[251.4,96.6,245.6,97.8,252,101.4]},{t:"C",p:[252,101.4,248.6,105.8,243.2,101.8]},{t:"C",p:[237.8,97.8,240.8,100,235.8,101]},{t:"C",p:[235.8,101,233.2,101.8,228.6,97.8]},{t:"C",p:[228.6,97.8,223,93.2,214.2,96.8]},{t:"C",p:[214.2,96.8,183.6,109.4,181.6,110]},{t:"C",p:[181.6,110,178,112.8,175.6,116.4]},{t:"C",p:[175.6,
116.4,169.8,120.8,166.8,122.2]},{t:"C",p:[166.8,122.2,154,133.8,152.8,135.2]},{t:"C",p:[152.8,135.2,149.4,140.4,148.6,140.8]},{t:"C",p:[148.6,140.8,155,137,157,135]},{t:"C",p:[157,135,171,125,176.4,124.2]},{t:"C",p:[176.4,124.2,180.8,121.2,181.6,119.8]},{t:"C",p:[181.6,119.8,196,110.6,200.2,110.6]},{t:"C",p:[200.2,110.6,209.4,115.8,211.8,108.8]},{t:"C",p:[211.8,108.8,217.6,107,223.2,108.2]},{t:"C",p:[223.2,108.2,226.4,105.6,225.6,103.4]},{t:"C",p:[225.6,103.4,227.2,101.6,228.2,105.4]},{t:"C",p:[228.2,
105.4,231.6,109,236.4,107]},{t:"C",p:[236.4,107,240.4,106.8,238.4,109.2]},{t:"C",p:[238.4,109.2,234,113,222.2,113.2]},{t:"C",p:[222.2,113.2,209.8,113.8,193.4,121.4]},{t:"C",p:[193.4,121.4,163.6,131.8,154.4,142.2]},{t:"C",p:[154.4,142.2,148,151,142.6,152.2]},{t:"C",p:[142.6,152.2,136.8,153,130.8,160.4]},{t:"C",p:[130.8,160.4,140.6,154.6,149.6,154.6]},{t:"C",p:[149.6,154.6,153.6,152.2,149.8,155.8]},{t:"C",p:[149.8,155.8,146.2,163.4,147.8,168.8]},{t:"C",p:[147.8,168.8,147.2,174,146.4,175.6]},{t:"C",
p:[146.4,175.6,138.6,188.4,138.6,190.8]},{t:"C",p:[138.6,193.2,139.8,203,140.2,203.6]},{t:"C",p:[140.6,204.2,139.2,202,143,204.4]},{t:"C",p:[146.8,206.8,149.6,208.4,150.4,211.2]},{t:"C",p:[151.2,214,148.4,205.8,148.2,204]},{t:"C",p:[148,202.2,143.8,195,144.6,192.6]},{t:"C",p:[144.6,192.6,145.6,193.6,146.4,195]},{t:"C",p:[146.4,195,145.8,194.4,146.4,190.8]},{t:"C",p:[146.4,190.8,147.2,185.6,148.6,182.4]},{t:"C",p:[150,179.2,152,175.4,152.4,174.6]},{t:"C",p:[152.8,173.8,152.8,168,154.2,170.6]},{t:"L",
p:[157.6,173.2]},{t:"C",p:[157.6,173.2,154.8,170.6,157,168.4]},{t:"C",p:[157,168.4,156,162.8,157.8,160.2]},{t:"C",p:[157.8,160.2,164.8,151.8,166.4,150.8]},{t:"C",p:[168,149.8,166.6,150.2,166.6,150.2]},{t:"C",p:[166.6,150.2,172.6,146,166.8,147.6]},{t:"C",p:[166.8,147.6,162.8,149.2,159.8,149.2]},{t:"C",p:[159.8,149.2,152.2,151.2,156.2,147]},{t:"C",p:[160.2,142.8,170.2,137.4,174,137.6]},{t:"L",p:[174.8,139.2]},{t:"L",p:[186,136.8]},{t:"L",p:[184.8,137.6]},{t:"C",p:[184.8,137.6,184.6,137.4,188.8,137]},
{t:"C",p:[193,136.6,198.8,138,200.2,136.2]},{t:"C",p:[201.6,134.4,205,133.4,204.6,134.8]},{t:"C",p:[204.2,136.2,204,138.2,204,138.2]},{t:"C",p:[204,138.2,209,132.4,208.4,134.6]},{t:"C",p:[207.8,136.8,199.6,142,198.2,148.2]},{t:"L",p:[208.6,140]},{t:"L",p:[212.2,137]},{t:"C",p:[212.2,137,215.8,139.2,216,137.6]},{t:"C",p:[216.2,136,220.8,130.2,222,130.4]},{t:"C",p:[223.2,130.6,225.2,127.8,225,130.4]},{t:"C",p:[224.8,133,232.4,138.4,232.4,138.4]},{t:"C",p:[232.4,138.4,235.6,136.6,237,138]},{t:"C",p:[238.4,
139.4,242.6,118.2,242.6,118.2]},{t:"L",p:[267.6,107.6]},{t:"L",p:[311.201,104.2]},{t:"L",p:[294.201,97.4]},{t:"L",p:[233.2,86]},{t:"z",p:[]}]},{f:null,s:{c:"#4c0000",w:2},p:[{t:"M",p:[251.4,285]},{t:"C",p:[251.4,285,236.4,268.2,228,265.6]},{t:"C",p:[228,265.6,214.6,258.8,190,266.6]}]},{f:null,s:{c:"#4c0000",w:2},p:[{t:"M",p:[224.8,264.2]},{t:"C",p:[224.8,264.2,199.6,256.2,184.2,260.4]},{t:"C",p:[184.2,260.4,165.8,262.4,157.4,276.2]}]},{f:null,s:{c:"#4c0000",w:2},p:[{t:"M",p:[221.2,263]},{t:"C",p:[221.2,
263,204.2,255.8,189.4,253.6]},{t:"C",p:[189.4,253.6,172.8,251,156.2,258.2]},{t:"C",p:[156.2,258.2,144,264.2,138.6,274.4]}]},{f:null,s:{c:"#4c0000",w:2},p:[{t:"M",p:[222.2,263.4]},{t:"C",p:[222.2,263.4,206.8,252.4,205.8,251]},{t:"C",p:[205.8,251,198.8,240,185.8,239.6]},{t:"C",p:[185.8,239.6,164.4,240.4,147.2,248.4]}]},{f:"#000",s:null,p:[{t:"M",p:[220.895,254.407]},{t:"C",p:[222.437,255.87,249.4,284.8,249.4,284.8]},{t:"C",p:[284.6,321.401,256.6,287.2,256.6,287.2]},{t:"C",p:[249,282.4,239.8,263.6,239.8,
263.6]},{t:"C",p:[238.6,260.8,253.8,270.8,253.8,270.8]},{t:"C",p:[257.8,271.6,271.4,290.8,271.4,290.8]},{t:"C",p:[264.6,288.4,269.4,295.6,269.4,295.6]},{t:"C",p:[272.2,297.6,292.601,313.201,292.601,313.201]},{t:"C",p:[296.201,317.201,300.201,318.801,300.201,318.801]},{t:"C",p:[314.201,313.601,307.801,326.801,307.801,326.801]},{t:"C",p:[310.201,333.601,315.801,322.001,315.801,322.001]},{t:"C",p:[327.001,305.2,310.601,307.601,310.601,307.601]},{t:"C",p:[280.6,310.401,273.8,294.4,273.8,294.4]},{t:"C",
p:[271.4,292,280.2,294.4,280.2,294.4]},{t:"C",p:[288.601,296.4,273,282,273,282]},{t:"C",p:[275.4,282,284.6,288.8,284.6,288.8]},{t:"C",p:[295.001,298,297.001,296,297.001,296]},{t:"C",p:[315.001,287.2,325.401,294.8,325.401,294.8]},{t:"C",p:[327.401,296.4,321.801,303.2,323.401,308.401]},{t:"C",p:[325.001,313.601,329.801,326.001,329.801,326.001]},{t:"C",p:[327.401,327.601,327.801,338.401,327.801,338.401]},{t:"C",p:[344.601,361.601,335.001,359.601,335.001,359.601]},{t:"C",p:[319.401,359.201,334.201,366.801,
334.201,366.801]},{t:"C",p:[337.401,368.801,346.201,376.001,346.201,376.001]},{t:"C",p:[343.401,374.801,341.801,380.001,341.801,380.001]},{t:"C",p:[346.601,384.001,343.801,388.801,343.801,388.801]},{t:"C",p:[337.801,390.001,336.601,394.001,336.601,394.001]},{t:"C",p:[343.401,402.001,333.401,402.401,333.401,402.401]},{t:"C",p:[337.001,406.801,332.201,418.801,332.201,418.801]},{t:"C",p:[327.401,418.801,321.001,424.401,321.001,424.401]},{t:"C",p:[323.401,429.201,313.001,434.801,313.001,434.801]},{t:"C",
p:[304.601,436.401,307.401,443.201,307.401,443.201]},{t:"C",p:[299.401,449.201,297.001,465.201,297.001,465.201]},{t:"C",p:[296.201,475.601,293.801,478.801,299.001,476.801]},{t:"C",p:[304.201,474.801,303.401,462.401,303.401,462.401]},{t:"C",p:[298.601,446.801,341.401,430.801,341.401,430.801]},{t:"C",p:[345.401,429.201,346.201,424.001,346.201,424.001]},{t:"C",p:[348.201,424.401,357.001,432.001,357.001,432.001]},{t:"C",p:[364.601,443.201,365.001,434.001,365.001,434.001]},{t:"C",p:[366.201,430.401,364.601,
424.401,364.601,424.401]},{t:"C",p:[370.601,402.801,356.601,396.401,356.601,396.401]},{t:"C",p:[346.601,362.801,360.601,371.201,360.601,371.201]},{t:"C",p:[363.401,376.801,374.201,382.001,374.201,382.001]},{t:"L",p:[377.801,379.601]},{t:"C",p:[376.201,374.801,384.601,368.801,384.601,368.801]},{t:"C",p:[387.401,375.201,393.401,367.201,393.401,367.201]},{t:"C",p:[397.001,342.801,409.401,357.201,409.401,357.201]},{t:"C",p:[413.401,358.401,414.601,351.601,414.601,351.601]},{t:"C",p:[418.201,341.201,414.601,
327.601,414.601,327.601]},{t:"C",p:[418.201,327.201,427.801,333.201,427.801,333.201]},{t:"C",p:[430.601,329.601,421.401,312.801,425.401,315.201]},{t:"C",p:[429.401,317.601,433.801,319.201,433.801,319.201]},{t:"C",p:[434.601,317.201,424.601,304.801,424.601,304.801]},{t:"C",p:[420.201,302,415.001,281.6,415.001,281.6]},{t:"C",p:[422.201,285.2,412.201,270,412.201,270]},{t:"C",p:[412.201,266.8,418.201,255.6,418.201,255.6]},{t:"C",p:[417.401,248.8,418.201,249.2,418.201,249.2]},{t:"C",p:[421.001,250.4,429.001,
252,422.201,245.6]},{t:"C",p:[415.401,239.2,423.001,234.4,423.001,234.4]},{t:"C",p:[427.401,231.6,413.801,232,413.801,232]},{t:"C",p:[408.601,227.6,409.001,223.6,409.001,223.6]},{t:"C",p:[417.001,225.6,402.601,211.2,400.201,207.6]},{t:"C",p:[397.801,204,407.401,198.8,407.401,198.8]},{t:"C",p:[420.601,195.2,409.001,192,409.001,192]},{t:"C",p:[389.401,192.4,400.201,181.6,400.201,181.6]},{t:"C",p:[406.201,182,404.601,179.6,404.601,179.6]},{t:"C",p:[399.401,178.4,389.801,172,389.801,172]},{t:"C",p:[385.801,
168.4,389.401,169.2,389.401,169.2]},{t:"C",p:[406.201,170.4,377.401,159.2,377.401,159.2]},{t:"C",p:[385.401,159.2,367.401,148.8,367.401,148.8]},{t:"C",p:[365.401,147.2,362.201,139.6,362.201,139.6]},{t:"C",p:[356.201,134.4,351.401,127.6,351.401,127.6]},{t:"C",p:[351.001,123.2,346.201,118.4,346.201,118.4]},{t:"C",p:[334.601,104.8,329.001,105.2,329.001,105.2]},{t:"C",p:[314.201,101.6,309.001,102.4,309.001,102.4]},{t:"L",p:[256.2,106.8]},{t:"C",p:[229.8,119.6,237.6,140.6,237.6,140.6]},{t:"C",p:[244,149,
253.2,145.2,253.2,145.2]},{t:"C",p:[257.8,139,269.4,141.2,269.4,141.2]},{t:"C",p:[289.801,144.4,287.201,140.8,287.201,140.8]},{t:"C",p:[284.801,136.2,268.6,130,268.4,129.4]},{t:"C",p:[268.2,128.8,259.4,125.4,259.4,125.4]},{t:"C",p:[256.4,124.2,252,115,252,115]},{t:"C",p:[248.8,111.6,264.6,117.4,264.6,117.4]},{t:"C",p:[263.4,118.4,270.8,122.4,270.8,122.4]},{t:"C",p:[288.201,121.4,298.801,132.2,298.801,132.2]},{t:"C",p:[309.601,148.8,309.801,140.6,309.801,140.6]},{t:"C",p:[312.601,131.2,300.801,110,
300.801,110]},{t:"C",p:[301.201,108,309.401,114.6,309.401,114.6]},{t:"C",p:[310.801,112.6,311.601,118.4,311.601,118.4]},{t:"C",p:[311.801,120.8,315.601,128.8,315.601,128.8]},{t:"C",p:[318.401,141.8,322.001,134.4,322.001,134.4]},{t:"L",p:[326.601,143.8]},{t:"C",p:[328.001,146.4,322.001,154,322.001,154]},{t:"C",p:[321.801,156.8,322.601,156.6,317.001,164.2]},{t:"C",p:[311.401,171.8,314.801,176.2,314.801,176.2]},{t:"C",p:[313.401,182.8,322.201,182.4,322.201,182.4]},{t:"C",p:[324.801,184.6,328.201,184.6,
328.201,184.6]},{t:"C",p:[330.001,186.6,332.401,186,332.401,186]},{t:"C",p:[334.001,182.2,340.201,184.2,340.201,184.2]},{t:"C",p:[341.601,181.8,349.801,181.4,349.801,181.4]},{t:"C",p:[350.801,178.8,351.201,177.2,354.601,176.6]},{t:"C",p:[358.001,176,333.401,133,333.401,133]},{t:"C",p:[339.801,132.2,331.601,119.8,331.601,119.8]},{t:"C",p:[329.401,113.2,340.801,127.8,343.001,129.2]},{t:"C",p:[345.201,130.6,346.201,132.8,344.601,132.6]},{t:"C",p:[343.001,132.4,341.201,134.6,342.601,134.8]},{t:"C",p:[344.001,
135,357.001,150,360.401,160.2]},{t:"C",p:[363.801,170.4,369.801,174.4,376.001,180.4]},{t:"C",p:[382.201,186.4,381.401,210.6,381.401,210.6]},{t:"C",p:[381.001,219.4,387.001,230,387.001,230]},{t:"C",p:[389.001,233.8,384.801,252,384.801,252]},{t:"C",p:[382.801,254.2,384.201,255,384.201,255]},{t:"C",p:[385.201,256.2,392.001,269.4,392.001,269.4]},{t:"C",p:[390.201,269.2,393.801,272.8,393.801,272.8]},{t:"C",p:[399.001,278.8,392.601,275.8,392.601,275.8]},{t:"C",p:[386.601,274.2,393.601,284,393.601,284]},
{t:"C",p:[394.801,285.8,385.801,281.2,385.801,281.2]},{t:"C",p:[376.601,280.6,388.201,287.8,388.201,287.8]},{t:"C",p:[396.801,295,385.401,290.6,385.401,290.6]},{t:"C",p:[380.801,288.8,384.001,295.6,384.001,295.6]},{t:"C",p:[387.201,297.2,404.401,304.2,404.401,304.2]},{t:"C",p:[404.801,308.001,401.801,313.001,401.801,313.001]},{t:"C",p:[402.201,317.001,400.001,320.401,400.001,320.401]},{t:"C",p:[398.801,328.601,398.201,329.401,398.201,329.401]},{t:"C",p:[394.001,329.601,386.601,343.401,386.601,343.401]},
{t:"C",p:[384.801,346.001,374.601,358.001,374.601,358.001]},{t:"C",p:[372.601,365.001,354.601,357.801,354.601,357.801]},{t:"C",p:[348.001,361.201,350.001,357.801,350.001,357.801]},{t:"C",p:[349.601,355.601,354.401,349.601,354.401,349.601]},{t:"C",p:[361.401,347.001,358.801,336.201,358.801,336.201]},{t:"C",p:[362.801,334.801,351.601,332.001,351.801,330.801]},{t:"C",p:[352.001,329.601,357.801,328.201,357.801,328.201]},{t:"C",p:[365.801,326.201,361.401,323.801,361.401,323.801]},{t:"C",p:[360.801,319.801,
363.801,314.201,363.801,314.201]},{t:"C",p:[375.401,313.401,363.801,297.2,363.801,297.2]},{t:"C",p:[353.001,289.6,352.001,283.8,352.001,283.8]},{t:"C",p:[364.601,275.6,356.401,263.2,356.601,259.6]},{t:"C",p:[356.801,256,358.001,234.4,358.001,234.4]},{t:"C",p:[356.001,228.2,353.001,214.6,353.001,214.6]},{t:"C",p:[355.201,209.4,362.601,196.8,362.601,196.8]},{t:"C",p:[365.401,192.6,374.201,187.8,372.001,184.8]},{t:"C",p:[369.801,181.8,362.001,183.6,362.001,183.6]},{t:"C",p:[354.201,182.2,354.801,187.4,
354.801,187.4]},{t:"C",p:[353.201,188.4,352.401,193.4,352.401,193.4]},{t:"C",p:[351.68,201.333,342.801,207.6,342.801,207.6]},{t:"C",p:[331.601,213.8,340.801,217.8,340.801,217.8]},{t:"C",p:[346.801,224.4,337.001,224.6,337.001,224.6]},{t:"C",p:[326.001,222.8,334.201,233,334.201,233]},{t:"C",p:[345.001,245.8,342.001,248.6,342.001,248.6]},{t:"C",p:[331.801,249.6,344.401,258.8,344.401,258.8]},{t:"C",p:[344.401,258.8,343.601,256.8,343.801,258.6]},{t:"C",p:[344.001,260.4,347.001,264.6,347.801,266.6]},{t:"C",
p:[348.601,268.6,344.601,268.8,344.601,268.8]},{t:"C",p:[345.201,278.4,329.801,274.2,329.801,274.2]},{t:"C",p:[329.801,274.2,329.801,274.2,328.201,274.4]},{t:"C",p:[326.601,274.6,315.401,273.8,309.601,271.6]},{t:"C",p:[303.801,269.4,297.001,269.4,297.001,269.4]},{t:"C",p:[297.001,269.4,293.001,271.2,285.4,271]},{t:"C",p:[277.8,270.8,269.8,273.6,269.8,273.6]},{t:"C",p:[265.4,273.2,274,268.8,274.2,269]},{t:"C",p:[274.4,269.2,280,263.6,272,264.2]},{t:"C",p:[250.203,265.835,239.4,255.6,239.4,255.6]},
{t:"C",p:[237.4,254.2,234.8,251.4,234.8,251.4]},{t:"C",p:[224.8,249.4,236.2,263.8,236.2,263.8]},{t:"C",p:[237.4,265.2,236,266.2,236,266.2]},{t:"C",p:[235.2,264.6,227.4,259.2,227.4,259.2]},{t:"C",p:[224.589,258.227,223.226,256.893,220.895,254.407]},{t:"z",p:[]}]},{f:"#4c0000",s:null,p:[{t:"M",p:[197,242.8]},{t:"C",p:[197,242.8,208.6,248.4,211.2,251.2]},{t:"C",p:[213.8,254,227.8,265.4,227.8,265.4]},{t:"C",p:[227.8,265.4,222.4,263.4,219.8,261.6]},{t:"C",p:[217.2,259.8,206.4,251.6,206.4,251.6]},{t:"C",
p:[206.4,251.6,202.6,245.6,197,242.8]},{t:"z",p:[]}]},{f:"#99cc32",s:null,p:[{t:"M",p:[138.991,211.603]},{t:"C",p:[139.328,211.455,138.804,208.743,138.6,208.2]},{t:"C",p:[137.578,205.474,128.6,204,128.6,204]},{t:"C",p:[128.373,205.365,128.318,206.961,128.424,208.599]},{t:"C",p:[128.424,208.599,133.292,214.118,138.991,211.603]},{t:"z",p:[]}]},{f:"#659900",s:null,p:[{t:"M",p:[138.991,211.403]},{t:"C",p:[138.542,211.561,138.976,208.669,138.8,208.2]},{t:"C",p:[137.778,205.474,128.6,203.9,128.6,203.9]},
{t:"C",p:[128.373,205.265,128.318,206.861,128.424,208.499]},{t:"C",p:[128.424,208.499,132.692,213.618,138.991,211.403]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[134.6,211.546]},{t:"C",p:[133.975,211.546,133.469,210.406,133.469,209]},{t:"C",p:[133.469,207.595,133.975,206.455,134.6,206.455]},{t:"C",p:[135.225,206.455,135.732,207.595,135.732,209]},{t:"C",p:[135.732,210.406,135.225,211.546,134.6,211.546]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[134.6,209]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",
p:[89,309.601]},{t:"C",p:[89,309.601,83.4,319.601,108.2,313.601]},{t:"C",p:[108.2,313.601,122.2,312.401,124.6,310.001]},{t:"C",p:[125.8,310.801,134.166,313.734,137,314.401]},{t:"C",p:[143.8,316.001,152.2,306,152.2,306]},{t:"C",p:[152.2,306,156.8,295.5,159.6,295.5]},{t:"C",p:[162.4,295.5,159.2,297.1,159.2,297.1]},{t:"C",p:[159.2,297.1,152.6,307.201,153,308.801]},{t:"C",p:[153,308.801,147.8,328.801,131.8,329.601]},{t:"C",p:[131.8,329.601,115.65,330.551,117,336.401]},{t:"C",p:[117,336.401,125.8,334.001,
128.2,336.401]},{t:"C",p:[128.2,336.401,139,336.001,131,342.401]},{t:"L",p:[124.2,354.001]},{t:"C",p:[124.2,354.001,124.34,357.919,114.2,354.401]},{t:"C",p:[104.4,351.001,94.1,338.101,94.1,338.101]},{t:"C",p:[94.1,338.101,78.15,323.551,89,309.601]},{t:"z",p:[]}]},{f:"#e59999",s:null,p:[{t:"M",p:[87.8,313.601]},{t:"C",p:[87.8,313.601,85.8,323.201,122.6,312.801]},{t:"C",p:[122.6,312.801,127,312.801,129.4,313.601]},{t:"C",p:[131.8,314.401,143.8,317.201,145.8,316.001]},{t:"C",p:[145.8,316.001,138.6,329.601,
127,328.001]},{t:"C",p:[127,328.001,113.8,329.601,114.2,334.401]},{t:"C",p:[114.2,334.401,118.2,341.601,123,344.001]},{t:"C",p:[123,344.001,125.8,346.401,125.4,349.601]},{t:"C",p:[125,352.801,122.2,354.401,120.2,355.201]},{t:"C",p:[118.2,356.001,115,352.801,113.4,352.801]},{t:"C",p:[111.8,352.801,103.4,346.401,99,341.601]},{t:"C",p:[94.6,336.801,86.2,324.801,86.6,322.001]},{t:"C",p:[87,319.201,87.8,313.601,87.8,313.601]},{t:"z",p:[]}]},{f:"#b26565",s:null,p:[{t:"M",p:[91,331.051]},{t:"C",p:[93.6,
335.001,96.8,339.201,99,341.601]},{t:"C",p:[103.4,346.401,111.8,352.801,113.4,352.801]},{t:"C",p:[115,352.801,118.2,356.001,120.2,355.201]},{t:"C",p:[122.2,354.401,125,352.801,125.4,349.601]},{t:"C",p:[125.8,346.401,123,344.001,123,344.001]},{t:"C",p:[119.934,342.468,117.194,338.976,115.615,336.653]},{t:"C",p:[115.615,336.653,115.8,339.201,110.6,338.401]},{t:"C",p:[105.4,337.601,100.2,334.801,98.6,331.601]},{t:"C",p:[97,328.401,94.6,326.001,96.2,329.601]},{t:"C",p:[97.8,333.201,100.2,336.801,101.8,
337.201]},{t:"C",p:[103.4,337.601,103,338.801,100.6,338.401]},{t:"C",p:[98.2,338.001,95.4,337.601,91,332.401]},{t:"z",p:[]}]},{f:"#992600",s:null,p:[{t:"M",p:[88.4,310.001]},{t:"C",p:[88.4,310.001,90.2,296.4,91.4,292.4]},{t:"C",p:[91.4,292.4,90.6,285.6,93,281.4]},{t:"C",p:[95.4,277.2,97.4,271,100.4,265.6]},{t:"C",p:[103.4,260.2,103.6,256.2,107.6,254.6]},{t:"C",p:[111.6,253,117.6,244.4,120.4,243.4]},{t:"C",p:[123.2,242.4,123,243.2,123,243.2]},{t:"C",p:[123,243.2,129.8,228.4,143.4,232.4]},{t:"C",p:[143.4,
232.4,127.2,229.6,143,220.2]},{t:"C",p:[143,220.2,138.2,221.3,141.5,214.3]},{t:"C",p:[143.701,209.632,143.2,216.4,132.2,228.2]},{t:"C",p:[132.2,228.2,127.2,236.8,122,239.8]},{t:"C",p:[116.8,242.8,104.8,249.8,103.6,253.6]},{t:"C",p:[102.4,257.4,99.2,263.2,97.2,264.8]},{t:"C",p:[95.2,266.4,92.4,270.6,92,274]},{t:"C",p:[92,274,90.8,278,89.4,279.2]},{t:"C",p:[88,280.4,87.8,283.6,87.8,285.6]},{t:"C",p:[87.8,287.6,85.8,290.4,86,292.8]},{t:"C",p:[86,292.8,86.8,311.801,86.4,313.801]},{t:"L",p:[88.4,310.001]},
{t:"z",p:[]}]},{f:"#fff",s:null,p:[{t:"M",p:[79.8,314.601]},{t:"C",p:[79.8,314.601,77.8,313.201,73.4,319.201]},{t:"C",p:[73.4,319.201,80.7,352.201,80.7,353.601]},{t:"C",p:[80.7,353.601,81.8,351.501,80.5,344.301]},{t:"C",p:[79.2,337.101,78.3,324.401,78.3,324.401]},{t:"L",p:[79.8,314.601]},{t:"z",p:[]}]},{f:"#992600",s:null,p:[{t:"M",p:[101.4,254]},{t:"C",p:[101.4,254,83.8,257.2,84.2,286.4]},{t:"L",p:[83.4,311.201]},{t:"C",p:[83.4,311.201,82.2,285.6,81,284]},{t:"C",p:[79.8,282.4,83.8,271.2,80.6,277.2]},
{t:"C",p:[80.6,277.2,66.6,291.2,74.6,312.401]},{t:"C",p:[74.6,312.401,76.1,315.701,73.1,311.101]},{t:"C",p:[73.1,311.101,68.5,298.5,69.6,292.1]},{t:"C",p:[69.6,292.1,69.8,289.9,71.7,287.1]},{t:"C",p:[71.7,287.1,80.3,275.4,83,273.1]},{t:"C",p:[83,273.1,84.8,258.7,100.2,253.5]},{t:"C",p:[100.2,253.5,105.9,251.2,101.4,254]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[240.8,187.8]},{t:"C",p:[241.46,187.446,241.451,186.476,242.031,186.303]},{t:"C",p:[243.18,185.959,243.344,184.892,243.862,184.108]},{t:"C",
p:[244.735,182.789,244.928,181.256,245.51,179.765]},{t:"C",p:[245.782,179.065,245.809,178.11,245.496,177.45]},{t:"C",p:[244.322,174.969,243.62,172.52,242.178,170.094]},{t:"C",p:[241.91,169.644,241.648,168.85,241.447,168.252]},{t:"C",p:[240.984,166.868,239.727,165.877,238.867,164.557]},{t:"C",p:[238.579,164.116,239.104,163.191,238.388,163.107]},{t:"C",p:[237.491,163.002,236.042,162.422,235.809,163.448]},{t:"C",p:[235.221,166.035,236.232,168.558,237.2,171]},{t:"C",p:[236.418,171.692,236.752,172.613,
236.904,173.38]},{t:"C",p:[237.614,176.986,236.416,180.338,235.655,183.812]},{t:"C",p:[235.632,183.916,235.974,184.114,235.946,184.176]},{t:"C",p:[234.724,186.862,233.272,189.307,231.453,191.688]},{t:"C",p:[230.695,192.68,229.823,193.596,229.326,194.659]},{t:"C",p:[228.958,195.446,228.55,196.412,228.8,197.4]},{t:"C",p:[225.365,200.18,223.115,204.025,220.504,207.871]},{t:"C",p:[220.042,208.551,220.333,209.76,220.884,210.029]},{t:"C",p:[221.697,210.427,222.653,209.403,223.123,208.557]},{t:"C",p:[223.512,
207.859,223.865,207.209,224.356,206.566]},{t:"C",p:[224.489,206.391,224.31,205.972,224.445,205.851]},{t:"C",p:[227.078,203.504,228.747,200.568,231.2,198.2]},{t:"C",p:[233.15,197.871,234.687,196.873,236.435,195.86]},{t:"C",p:[236.743,195.681,237.267,195.93,237.557,195.735]},{t:"C",p:[239.31,194.558,239.308,192.522,239.414,190.612]},{t:"C",p:[239.464,189.728,239.66,188.411,240.8,187.8]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[231.959,183.334]},{t:"C",p:[232.083,183.257,231.928,182.834,232.037,
182.618]},{t:"C",p:[232.199,182.294,232.602,182.106,232.764,181.782]},{t:"C",p:[232.873,181.566,232.71,181.186,232.846,181.044]},{t:"C",p:[235.179,178.597,235.436,175.573,234.4,172.6]},{t:"C",p:[235.424,171.98,235.485,170.718,235.06,169.871]},{t:"C",p:[234.207,168.171,234.014,166.245,233.039,164.702]},{t:"C",p:[232.237,163.433,230.659,162.189,229.288,163.492]},{t:"C",p:[228.867,163.892,228.546,164.679,228.824,165.391]},{t:"C",p:[228.888,165.554,229.173,165.7,229.146,165.782]},{t:"C",p:[229.039,166.106,
228.493,166.33,228.487,166.602]},{t:"C",p:[228.457,168.098,227.503,169.609,228.133,170.938]},{t:"C",p:[228.905,172.567,229.724,174.424,230.4,176.2]},{t:"C",p:[229.166,178.316,230.199,180.765,228.446,182.642]},{t:"C",p:[228.31,182.788,228.319,183.174,228.441,183.376]},{t:"C",p:[228.733,183.862,229.139,184.268,229.625,184.56]},{t:"C",p:[229.827,184.681,230.175,184.683,230.375,184.559]},{t:"C",p:[230.953,184.197,231.351,183.71,231.959,183.334]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[294.771,173.023]},
{t:"C",p:[296.16,174.815,296.45,177.61,294.401,179]},{t:"C",p:[294.951,182.309,298.302,180.33,300.401,179.8]},{t:"C",p:[300.292,179.412,300.519,179.068,300.802,179.063]},{t:"C",p:[301.859,179.048,302.539,178.016,303.601,178.2]},{t:"C",p:[304.035,176.643,305.673,175.941,306.317,174.561]},{t:"C",p:[308.043,170.866,307.452,166.593,304.868,163.347]},{t:"C",p:[304.666,163.093,304.883,162.576,304.759,162.214]},{t:"C",p:[304.003,160.003,301.935,159.688,300.001,159]},{t:"C",p:[298.824,155.125,298.163,151.094,
296.401,147.4]},{t:"C",p:[294.787,147.15,294.089,145.411,292.752,144.691]},{t:"C",p:[291.419,143.972,290.851,145.551,290.892,146.597]},{t:"C",p:[290.899,146.802,291.351,147.026,291.181,147.391]},{t:"C",p:[291.105,147.555,290.845,147.666,290.845,147.8]},{t:"C",p:[290.846,147.935,291.067,148.066,291.201,148.2]},{t:"C",p:[290.283,149.02,288.86,149.497,288.565,150.642]},{t:"C",p:[287.611,154.352,290.184,157.477,291.852,160.678]},{t:"C",p:[292.443,161.813,291.707,163.084,290.947,164.292]},{t:"C",p:[290.509,
164.987,290.617,166.114,290.893,166.97]},{t:"C",p:[291.645,169.301,293.236,171.04,294.771,173.023]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[257.611,191.409]},{t:"C",p:[256.124,193.26,252.712,195.829,255.629,197.757]},{t:"C",p:[255.823,197.886,256.193,197.89,256.366,197.756]},{t:"C",p:[258.387,196.191,260.39,195.288,262.826,194.706]},{t:"C",p:[262.95,194.677,263.224,195.144,263.593,194.983]},{t:"C",p:[265.206,194.28,267.216,194.338,268.4,193]},{t:"C",p:[272.167,193.224,275.732,192.108,279.123,
190.8]},{t:"C",p:[280.284,190.352,281.554,189.793,282.755,189.291]},{t:"C",p:[284.131,188.715,285.335,187.787,286.447,186.646]},{t:"C",p:[286.58,186.51,286.934,186.6,287.201,186.6]},{t:"C",p:[287.161,185.737,288.123,185.61,288.37,184.988]},{t:"C",p:[288.462,184.756,288.312,184.36,288.445,184.258]},{t:"C",p:[290.583,182.628,291.503,180.61,290.334,178.233]},{t:"C",p:[290.049,177.655,289.8,177.037,289.234,176.561]},{t:"C",p:[288.149,175.65,287.047,176.504,286,176.2]},{t:"C",p:[285.841,176.828,285.112,
176.656,284.726,176.854]},{t:"C",p:[283.867,177.293,282.534,176.708,281.675,177.146]},{t:"C",p:[280.313,177.841,279.072,178.01,277.65,178.387]},{t:"C",p:[277.338,178.469,276.56,178.373,276.4,179]},{t:"C",p:[276.266,178.866,276.118,178.632,276.012,178.654]},{t:"C",p:[274.104,179.05,272.844,179.264,271.543,180.956]},{t:"C",p:[271.44,181.089,270.998,180.91,270.839,181.045]},{t:"C",p:[269.882,181.853,269.477,183.087,268.376,183.759]},{t:"C",p:[268.175,183.882,267.823,183.714,267.629,183.843]},{t:"C",
p:[266.983,184.274,266.616,184.915,265.974,185.362]},{t:"C",p:[265.645,185.591,265.245,185.266,265.277,185.01]},{t:"C",p:[265.522,183.063,266.175,181.276,265.6,179.4]},{t:"C",p:[267.677,176.88,270.194,174.931,272,172.2]},{t:"C",p:[272.015,170.034,272.707,167.888,272.594,165.811]},{t:"C",p:[272.584,165.618,272.296,164.885,272.17,164.538]},{t:"C",p:[271.858,163.684,272.764,162.618,271.92,161.894]},{t:"C",p:[270.516,160.691,269.224,161.567,268.4,163]},{t:"C",p:[266.562,163.39,264.496,164.083,262.918,
162.849]},{t:"C",p:[261.911,162.062,261.333,161.156,260.534,160.1]},{t:"C",p:[259.549,158.798,259.884,157.362,259.954,155.798]},{t:"C",p:[259.96,155.67,259.645,155.534,259.645,155.4]},{t:"C",p:[259.646,155.265,259.866,155.134,260,155]},{t:"C",p:[259.294,154.374,259.019,153.316,258,153]},{t:"C",p:[258.305,151.908,257.629,151.024,256.758,150.722]},{t:"C",p:[254.763,150.031,253.086,151.943,251.194,152.016]},{t:"C",p:[250.68,152.035,250.213,150.997,249.564,150.672]},{t:"C",p:[249.132,150.456,248.428,
150.423,248.066,150.689]},{t:"C",p:[247.378,151.193,246.789,151.307,246.031,151.512]},{t:"C",p:[244.414,151.948,243.136,153.042,241.656,153.897]},{t:"C",p:[240.171,154.754,239.216,156.191,238.136,157.511]},{t:"C",p:[237.195,158.663,237.059,161.077,238.479,161.577]},{t:"C",p:[240.322,162.227,241.626,159.524,243.592,159.85]},{t:"C",p:[243.904,159.901,244.11,160.212,244,160.6]},{t:"C",p:[244.389,160.709,244.607,160.48,244.8,160.2]},{t:"C",p:[245.658,161.219,246.822,161.556,247.76,162.429]},{t:"C",p:[248.73,
163.333,250.476,162.915,251.491,163.912]},{t:"C",p:[253.02,165.414,252.461,168.095,254.4,169.4]},{t:"C",p:[253.814,170.713,253.207,171.99,252.872,173.417]},{t:"C",p:[252.59,174.623,253.584,175.82,254.795,175.729]},{t:"C",p:[256.053,175.635,256.315,174.876,256.8,173.8]},{t:"C",p:[257.067,174.067,257.536,174.364,257.495,174.58]},{t:"C",p:[257.038,176.967,256.011,178.96,255.553,181.391]},{t:"C",p:[255.494,181.708,255.189,181.91,254.8,181.8]},{t:"C",p:[254.332,185.949,250.28,188.343,247.735,191.508]},
{t:"C",p:[247.332,192.01,247.328,193.259,247.737,193.662]},{t:"C",p:[249.14,195.049,251.1,193.503,252.8,193]},{t:"C",p:[253.013,191.794,253.872,190.852,255.204,190.908]},{t:"C",p:[255.46,190.918,255.695,190.376,256.019,190.246]},{t:"C",p:[256.367,190.108,256.869,190.332,257.155,190.134]},{t:"C",p:[258.884,188.939,260.292,187.833,262.03,186.644]},{t:"C",p:[262.222,186.513,262.566,186.672,262.782,186.564]},{t:"C",p:[263.107,186.402,263.294,186.015,263.617,185.83]},{t:"C",p:[263.965,185.63,264.207,185.92,
264.4,186.2]},{t:"C",p:[263.754,186.549,263.75,187.506,263.168,187.708]},{t:"C",p:[262.393,187.976,261.832,188.489,261.158,188.936]},{t:"C",p:[260.866,189.129,260.207,188.881,260.103,189.06]},{t:"C",p:[259.505,190.088,258.321,190.526,257.611,191.409]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[202.2,142]},{t:"C",p:[202.2,142,192.962,139.128,181.8,164.8]},{t:"C",p:[181.8,164.8,179.4,170,177,172]},{t:"C",p:[174.6,174,163.4,177.6,161.4,181.6]},{t:"L",p:[151,197.6]},{t:"C",p:[151,197.6,165.8,181.6,
169,179.2]},{t:"C",p:[169,179.2,177,170.8,173.8,177.6]},{t:"C",p:[173.8,177.6,159.8,188.4,161,197.6]},{t:"C",p:[161,197.6,155.4,212,154.6,214]},{t:"C",p:[154.6,214,170.6,182,173,180.8]},{t:"C",p:[175.4,179.6,176.6,179.6,175.4,183.2]},{t:"C",p:[174.2,186.8,173.8,203.2,171,205.2]},{t:"C",p:[171,205.2,179,184.8,178.2,181.6]},{t:"C",p:[178.2,181.6,181.4,178,183.8,183.2]},{t:"L",p:[182.6,199.2]},{t:"L",p:[187,211.2]},{t:"C",p:[187,211.2,184.6,200,186.2,184.4]},{t:"C",p:[186.2,184.4,184.2,174,188.2,179.6]},
{t:"C",p:[192.2,185.2,201.8,191.2,201.8,196]},{t:"C",p:[201.8,196,196.6,178.4,187.4,173.6]},{t:"L",p:[183.4,179.6]},{t:"L",p:[182.2,177.6]},{t:"C",p:[182.2,177.6,178.6,176.8,183,170]},{t:"C",p:[187.4,163.2,187,162.4,187,162.4]},{t:"C",p:[187,162.4,193.4,169.6,195,169.6]},{t:"C",p:[195,169.6,208.2,162,209.4,186.4]},{t:"C",p:[209.4,186.4,216.2,172,207,165.2]},{t:"C",p:[207,165.2,192.2,163.2,193.4,158]},{t:"L",p:[200.6,145.6]},{t:"C",p:[204.2,140.4,202.6,143.2,202.6,143.2]},{t:"z",p:[]}]},{f:"#000",
s:null,p:[{t:"M",p:[182.2,158.4]},{t:"C",p:[182.2,158.4,169.4,158.4,166.2,163.6]},{t:"L",p:[159,173.2]},{t:"C",p:[159,173.2,176.2,163.2,180.2,162]},{t:"C",p:[184.2,160.8,182.2,158.4,182.2,158.4]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[142.2,164.8]},{t:"C",p:[142.2,164.8,140.2,166,139.8,168.8]},{t:"C",p:[139.4,171.6,137,172,137.8,174.8]},{t:"C",p:[138.6,177.6,140.6,180,140.6,176]},{t:"C",p:[140.6,172,142.2,170,143,168.8]},{t:"C",p:[143.8,167.6,145.4,163.2,142.2,164.8]},{t:"z",p:[]}]},{f:"#000",
s:null,p:[{t:"M",p:[133.4,226]},{t:"C",p:[133.4,226,125,222,121.8,218.4]},{t:"C",p:[118.6,214.8,119.052,219.966,114.2,219.6]},{t:"C",p:[108.353,219.159,109.4,203.2,109.4,203.2]},{t:"L",p:[105.4,210.8]},{t:"C",p:[105.4,210.8,104.2,225.2,112.2,222.8]},{t:"C",p:[116.107,221.628,117.4,223.2,115.8,224]},{t:"C",p:[114.2,224.8,121.4,225.2,118.6,226.8]},{t:"C",p:[115.8,228.4,130.2,223.2,127.8,233.6]},{t:"L",p:[133.4,226]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[120.8,240.4]},{t:"C",p:[120.8,240.4,105.4,
244.8,101.8,235.2]},{t:"C",p:[101.8,235.2,97,237.6,99.2,240.6]},{t:"C",p:[101.4,243.6,102.6,244,102.6,244]},{t:"C",p:[102.6,244,108,245.2,107.4,246]},{t:"C",p:[106.8,246.8,104.4,250.2,104.4,250.2]},{t:"C",p:[104.4,250.2,114.6,244.2,120.8,240.4]},{t:"z",p:[]}]},{f:"#fff",s:null,p:[{t:"M",p:[349.201,318.601]},{t:"C",p:[348.774,320.735,347.103,321.536,345.201,322.201]},{t:"C",p:[343.284,321.243,340.686,318.137,338.801,320.201]},{t:"C",p:[338.327,319.721,337.548,319.661,337.204,318.999]},{t:"C",p:[336.739,
318.101,337.011,317.055,336.669,316.257]},{t:"C",p:[336.124,314.985,335.415,313.619,335.601,312.201]},{t:"C",p:[337.407,311.489,338.002,309.583,337.528,307.82]},{t:"C",p:[337.459,307.563,337.03,307.366,337.23,307.017]},{t:"C",p:[337.416,306.694,337.734,306.467,338.001,306.2]},{t:"C",p:[337.866,306.335,337.721,306.568,337.61,306.548]},{t:"C",p:[337,306.442,337.124,305.805,337.254,305.418]},{t:"C",p:[337.839,303.672,339.853,303.408,341.201,304.6]},{t:"C",p:[341.457,304.035,341.966,304.229,342.401,304.2]},
{t:"C",p:[342.351,303.621,342.759,303.094,342.957,302.674]},{t:"C",p:[343.475,301.576,345.104,302.682,345.901,302.07]},{t:"C",p:[346.977,301.245,348.04,300.546,349.118,301.149]},{t:"C",p:[350.927,302.162,352.636,303.374,353.835,305.115]},{t:"C",p:[354.41,305.949,354.65,307.23,354.592,308.188]},{t:"C",p:[354.554,308.835,353.173,308.483,352.83,309.412]},{t:"C",p:[352.185,311.16,354.016,311.679,354.772,313.017]},{t:"C",p:[354.97,313.366,354.706,313.67,354.391,313.768]},{t:"C",p:[353.98,313.896,353.196,
313.707,353.334,314.16]},{t:"C",p:[354.306,317.353,351.55,318.031,349.201,318.601]},{t:"z",p:[]}]},{f:"#fff",s:null,p:[{t:"M",p:[339.6,338.201]},{t:"C",p:[339.593,336.463,337.992,334.707,339.201,333.001]},{t:"C",p:[339.336,333.135,339.467,333.356,339.601,333.356]},{t:"C",p:[339.736,333.356,339.867,333.135,340.001,333.001]},{t:"C",p:[341.496,335.217,345.148,336.145,345.006,338.991]},{t:"C",p:[344.984,339.438,343.897,340.356,344.801,341.001]},{t:"C",p:[342.988,342.349,342.933,344.719,342.001,346.601]},
{t:"C",p:[340.763,346.315,339.551,345.952,338.401,345.401]},{t:"C",p:[338.753,343.915,338.636,342.231,339.456,340.911]},{t:"C",p:[339.89,340.213,339.603,339.134,339.6,338.201]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[173.4,329.201]},{t:"C",p:[173.4,329.201,156.542,339.337,170.6,324.001]},{t:"C",p:[179.4,314.401,189.4,308.801,189.4,308.801]},{t:"C",p:[189.4,308.801,199.8,304.4,203.4,303.2]},{t:"C",p:[207,302,222.2,296.8,225.4,296.4]},{t:"C",p:[228.6,296,238.2,292,245,296]},{t:"C",p:[251.8,300,
259.8,304.4,259.8,304.4]},{t:"C",p:[259.8,304.4,243.4,296,239.8,298.4]},{t:"C",p:[236.2,300.8,229,300.4,223,303.6]},{t:"C",p:[223,303.6,208.2,308.001,205,310.001]},{t:"C",p:[201.8,312.001,191.4,323.601,189.8,322.801]},{t:"C",p:[188.2,322.001,190.2,321.601,191.4,318.801]},{t:"C",p:[192.6,316.001,190.6,314.401,182.6,320.801]},{t:"C",p:[174.6,327.201,173.4,329.201,173.4,329.201]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[180.805,323.234]},{t:"C",p:[180.805,323.234,182.215,310.194,190.693,311.859]},
{t:"C",p:[190.693,311.859,198.919,307.689,201.641,305.721]},{t:"C",p:[201.641,305.721,209.78,304.019,211.09,303.402]},{t:"C",p:[229.569,294.702,244.288,299.221,244.835,298.101]},{t:"C",p:[245.381,296.982,265.006,304.099,268.615,308.185]},{t:"C",p:[269.006,308.628,258.384,302.588,248.686,300.697]},{t:"C",p:[240.413,299.083,218.811,300.944,207.905,306.48]},{t:"C",p:[204.932,307.989,195.987,313.773,193.456,313.662]},{t:"C",p:[190.925,313.55,180.805,323.234,180.805,323.234]},{t:"z",p:[]}]},{f:"#ccc",
s:null,p:[{t:"M",p:[177,348.801]},{t:"C",p:[177,348.801,161.8,346.401,178.6,344.801]},{t:"C",p:[178.6,344.801,196.6,342.801,200.6,337.601]},{t:"C",p:[200.6,337.601,214.2,328.401,217,328.001]},{t:"C",p:[219.8,327.601,249.8,320.401,250.2,318.001]},{t:"C",p:[250.6,315.601,256.2,315.601,257.8,316.401]},{t:"C",p:[259.4,317.201,258.6,318.401,255.8,319.201]},{t:"C",p:[253,320.001,221.8,336.401,215.4,337.601]},{t:"C",p:[209,338.801,197.4,346.401,192.6,347.601]},{t:"C",p:[187.8,348.801,177,348.801,177,348.801]},
{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[196.52,341.403]},{t:"C",p:[196.52,341.403,187.938,340.574,196.539,339.755]},{t:"C",p:[196.539,339.755,205.355,336.331,207.403,333.668]},{t:"C",p:[207.403,333.668,214.367,328.957,215.8,328.753]},{t:"C",p:[217.234,328.548,231.194,324.861,231.399,323.633]},{t:"C",p:[231.604,322.404,265.67,309.823,270.09,313.013]},{t:"C",p:[273.001,315.114,263.1,313.437,253.466,317.847]},{t:"C",p:[252.111,318.467,218.258,333.054,214.981,333.668]},{t:"C",p:[211.704,334.283,
205.765,338.174,203.307,338.788]},{t:"C",p:[200.85,339.403,196.52,341.403,196.52,341.403]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[188.6,343.601]},{t:"C",p:[188.6,343.601,193.8,343.201,192.6,344.801]},{t:"C",p:[191.4,346.401,189,345.601,189,345.601]},{t:"L",p:[188.6,343.601]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[181.4,345.201]},{t:"C",p:[181.4,345.201,186.6,344.801,185.4,346.401]},{t:"C",p:[184.2,348.001,181.8,347.201,181.8,347.201]},{t:"L",p:[181.4,345.201]},{t:"z",p:[]}]},{f:"#000",
s:null,p:[{t:"M",p:[171,346.801]},{t:"C",p:[171,346.801,176.2,346.401,175,348.001]},{t:"C",p:[173.8,349.601,171.4,348.801,171.4,348.801]},{t:"L",p:[171,346.801]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[163.4,347.601]},{t:"C",p:[163.4,347.601,168.6,347.201,167.4,348.801]},{t:"C",p:[166.2,350.401,163.8,349.601,163.8,349.601]},{t:"L",p:[163.4,347.601]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[201.8,308.001]},{t:"C",p:[201.8,308.001,206.2,308.001,205,309.601]},{t:"C",p:[203.8,311.201,200.6,310.801,
200.6,310.801]},{t:"L",p:[201.8,308.001]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[191.8,313.601]},{t:"C",p:[191.8,313.601,198.306,311.46,195.8,314.801]},{t:"C",p:[194.6,316.401,192.2,315.601,192.2,315.601]},{t:"L",p:[191.8,313.601]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[180.6,318.401]},{t:"C",p:[180.6,318.401,185.8,318.001,184.6,319.601]},{t:"C",p:[183.4,321.201,181,320.401,181,320.401]},{t:"L",p:[180.6,318.401]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[173,324.401]},{t:"C",p:[173,
324.401,178.2,324.001,177,325.601]},{t:"C",p:[175.8,327.201,173.4,326.401,173.4,326.401]},{t:"L",p:[173,324.401]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[166.2,329.201]},{t:"C",p:[166.2,329.201,171.4,328.801,170.2,330.401]},{t:"C",p:[169,332.001,166.6,331.201,166.6,331.201]},{t:"L",p:[166.2,329.201]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[205.282,335.598]},{t:"C",p:[205.282,335.598,212.203,335.066,210.606,337.195]},{t:"C",p:[209.009,339.325,205.814,338.26,205.814,338.26]},{t:"L",p:[205.282,
335.598]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[215.682,330.798]},{t:"C",p:[215.682,330.798,222.603,330.266,221.006,332.395]},{t:"C",p:[219.409,334.525,216.214,333.46,216.214,333.46]},{t:"L",p:[215.682,330.798]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[226.482,326.398]},{t:"C",p:[226.482,326.398,233.403,325.866,231.806,327.995]},{t:"C",p:[230.209,330.125,227.014,329.06,227.014,329.06]},{t:"L",p:[226.482,326.398]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[236.882,321.598]},{t:"C",p:[236.882,
321.598,243.803,321.066,242.206,323.195]},{t:"C",p:[240.609,325.325,237.414,324.26,237.414,324.26]},{t:"L",p:[236.882,321.598]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[209.282,303.598]},{t:"C",p:[209.282,303.598,216.203,303.066,214.606,305.195]},{t:"C",p:[213.009,307.325,209.014,307.06,209.014,307.06]},{t:"L",p:[209.282,303.598]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[219.282,300.398]},{t:"C",p:[219.282,300.398,226.203,299.866,224.606,301.995]},{t:"C",p:[223.009,304.125,218.614,303.86,
218.614,303.86]},{t:"L",p:[219.282,300.398]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[196.6,340.401]},{t:"C",p:[196.6,340.401,201.8,340.001,200.6,341.601]},{t:"C",p:[199.4,343.201,197,342.401,197,342.401]},{t:"L",p:[196.6,340.401]},{t:"z",p:[]}]},{f:"#992600",s:null,p:[{t:"M",p:[123.4,241.2]},{t:"C",p:[123.4,241.2,119,250,118.6,253.2]},{t:"C",p:[118.6,253.2,119.4,244.4,120.6,242.4]},{t:"C",p:[121.8,240.4,123.4,241.2,123.4,241.2]},{t:"z",p:[]}]},{f:"#992600",s:null,p:[{t:"M",p:[105,255.2]},{t:"C",
p:[105,255.2,101.8,269.6,102.2,272.4]},{t:"C",p:[102.2,272.4,101,260.8,101.4,259.6]},{t:"C",p:[101.8,258.4,105,255.2,105,255.2]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[125.8,180.6]},{t:"L",p:[125.6,183.8]},{t:"L",p:[123.4,184]},{t:"C",p:[123.4,184,137.6,196.6,138.2,204.2]},{t:"C",p:[138.2,204.2,139,196,125.8,180.6]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[129.784,181.865]},{t:"C",p:[129.353,181.449,129.572,180.704,129.164,180.444]},{t:"C",p:[128.355,179.928,130.462,179.871,130.234,179.155]},
{t:"C",p:[129.851,177.949,130.038,177.928,129.916,176.652]},{t:"C",p:[129.859,176.054,130.447,174.514,130.832,174.074]},{t:"C",p:[132.278,172.422,130.954,169.49,132.594,167.939]},{t:"C",p:[132.898,167.65,133.274,167.098,133.559,166.68]},{t:"C",p:[134.218,165.717,135.402,165.229,136.352,164.401]},{t:"C",p:[136.67,164.125,136.469,163.298,137.038,163.39]},{t:"C",p:[137.752,163.505,138.993,163.375,138.948,164.216]},{t:"C",p:[138.835,166.336,137.506,168.056,136.226,169.724]},{t:"C",p:[136.677,170.428,
136.219,171.063,135.935,171.62]},{t:"C",p:[134.6,174.24,134.789,177.081,134.615,179.921]},{t:"C",p:[134.61,180.006,134.303,180.084,134.311,180.137]},{t:"C",p:[134.664,182.472,135.248,184.671,136.127,186.9]},{t:"C",p:[136.493,187.83,136.964,188.725,137.114,189.652]},{t:"C",p:[137.225,190.338,137.328,191.171,136.92,191.876]},{t:"C",p:[138.955,194.766,137.646,197.417,138.815,200.948]},{t:"C",p:[139.022,201.573,140.714,203.487,140.251,203.326]},{t:"C",p:[137.738,202.455,137.626,202.057,137.449,201.304]},
{t:"C",p:[137.303,200.681,136.973,199.304,136.736,198.702]},{t:"C",p:[136.672,198.538,136.501,196.654,136.423,196.532]},{t:"C",p:[134.91,194.15,136.268,194.326,134.898,191.968]},{t:"C",p:[133.47,191.288,132.504,190.184,131.381,189.022]},{t:"C",p:[131.183,188.818,132.326,188.094,132.145,187.881]},{t:"C",p:[131.053,186.592,129.9,185.825,130.236,184.332]},{t:"C",p:[130.391,183.642,130.528,182.585,129.784,181.865]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[126.2,183.6]},{t:"C",p:[126.2,183.6,126.6,
190.4,129,192]},{t:"C",p:[131.4,193.6,130.2,192.8,127,191.6]},{t:"C",p:[123.8,190.4,125,189.6,125,189.6]},{t:"C",p:[125,189.6,122.2,190,124.6,192]},{t:"C",p:[127,194,130.6,196.4,129,196.4]},{t:"C",p:[127.4,196.4,119.8,192.4,119.8,189.6]},{t:"C",p:[119.8,186.8,118.8,182.7,118.8,182.7]},{t:"C",p:[118.8,182.7,119.9,181.9,124.7,182]},{t:"C",p:[124.7,182,126.1,182.7,126.2,183.6]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[125.4,202.2]},{t:"C",p:[125.4,202.2,116.88,199.409,98.4,202.8]},{t:"C",
p:[98.4,202.8,107.431,200.722,126.2,203]},{t:"C",p:[136.5,204.25,125.4,202.2,125.4,202.2]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[127.498,202.129]},{t:"C",p:[127.498,202.129,119.252,198.611,100.547,200.392]},{t:"C",p:[100.547,200.392,109.725,199.103,128.226,202.995]},{t:"C",p:[138.38,205.131,127.498,202.129,127.498,202.129]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[129.286,202.222]},{t:"C",p:[129.286,202.222,121.324,198.101,102.539,198.486]},{t:"C",p:[102.539,198.486,
111.787,197.882,129.948,203.14]},{t:"C",p:[139.914,206.025,129.286,202.222,129.286,202.222]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[130.556,202.445]},{t:"C",p:[130.556,202.445,123.732,198.138,106.858,197.04]},{t:"C",p:[106.858,197.04,115.197,197.21,131.078,203.319]},{t:"C",p:[139.794,206.672,130.556,202.445,130.556,202.445]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[245.84,212.961]},{t:"C",p:[245.84,212.961,244.91,213.605,245.124,212.424]},{t:"C",p:[245.339,211.243,
273.547,198.073,277.161,198.323]},{t:"C",p:[277.161,198.323,246.913,211.529,245.84,212.961]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[242.446,213.6]},{t:"C",p:[242.446,213.6,241.57,214.315,241.691,213.121]},{t:"C",p:[241.812,211.927,268.899,196.582,272.521,196.548]},{t:"C",p:[272.521,196.548,243.404,212.089,242.446,213.6]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[239.16,214.975]},{t:"C",p:[239.16,214.975,238.332,215.747,238.374,214.547]},{t:"C",p:[238.416,213.348,258.233,
197.851,268.045,195.977]},{t:"C",p:[268.045,195.977,250.015,204.104,239.16,214.975]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[236.284,216.838]},{t:"C",p:[236.284,216.838,235.539,217.532,235.577,216.453]},{t:"C",p:[235.615,215.373,253.449,201.426,262.28,199.74]},{t:"C",p:[262.28,199.74,246.054,207.054,236.284,216.838]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[204.6,364.801]},{t:"C",p:[204.6,364.801,189.4,362.401,206.2,360.801]},{t:"C",p:[206.2,360.801,224.2,358.801,228.2,353.601]},
{t:"C",p:[228.2,353.601,241.8,344.401,244.6,344.001]},{t:"C",p:[247.4,343.601,263.8,340.001,264.2,337.601]},{t:"C",p:[264.6,335.201,270.6,332.801,272.2,333.601]},{t:"C",p:[273.8,334.401,273.8,343.601,271,344.401]},{t:"C",p:[268.2,345.201,249.4,352.401,243,353.601]},{t:"C",p:[236.6,354.801,225,362.401,220.2,363.601]},{t:"C",p:[215.4,364.801,204.6,364.801,204.6,364.801]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[277.6,327.401]},{t:"C",p:[277.6,327.401,274.6,329.001,273.4,331.601]},{t:"C",p:[273.4,
331.601,267,342.201,252.8,345.401]},{t:"C",p:[252.8,345.401,229.8,354.401,222,356.401]},{t:"C",p:[222,356.401,208.6,361.401,201.2,360.601]},{t:"C",p:[201.2,360.601,194.2,360.801,200.4,362.401]},{t:"C",p:[200.4,362.401,220.6,360.401,224,358.601]},{t:"C",p:[224,358.601,239.6,353.401,242.6,350.801]},{t:"C",p:[245.6,348.201,263.8,343.201,266,341.201]},{t:"C",p:[268.2,339.201,278,330.801,277.6,327.401]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[218.882,358.911]},{t:"C",p:[218.882,358.911,224.111,358.685,
222.958,360.234]},{t:"C",p:[221.805,361.784,219.357,360.91,219.357,360.91]},{t:"L",p:[218.882,358.911]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[211.68,360.263]},{t:"C",p:[211.68,360.263,216.908,360.037,215.756,361.586]},{t:"C",p:[214.603,363.136,212.155,362.263,212.155,362.263]},{t:"L",p:[211.68,360.263]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[201.251,361.511]},{t:"C",p:[201.251,361.511,206.48,361.284,205.327,362.834]},{t:"C",p:[204.174,364.383,201.726,363.51,201.726,363.51]},{t:"L",p:[201.251,
361.511]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[193.617,362.055]},{t:"C",p:[193.617,362.055,198.846,361.829,197.693,363.378]},{t:"C",p:[196.54,364.928,194.092,364.054,194.092,364.054]},{t:"L",p:[193.617,362.055]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[235.415,351.513]},{t:"C",p:[235.415,351.513,242.375,351.212,240.84,353.274]},{t:"C",p:[239.306,355.336,236.047,354.174,236.047,354.174]},{t:"L",p:[235.415,351.513]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[245.73,347.088]},{t:"C",p:[245.73,
347.088,251.689,343.787,251.155,348.849]},{t:"C",p:[250.885,351.405,246.362,349.749,246.362,349.749]},{t:"L",p:[245.73,347.088]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[254.862,344.274]},{t:"C",p:[254.862,344.274,262.021,340.573,260.287,346.035]},{t:"C",p:[259.509,348.485,255.493,346.935,255.493,346.935]},{t:"L",p:[254.862,344.274]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[264.376,339.449]},{t:"C",p:[264.376,339.449,268.735,334.548,269.801,341.21]},{t:"C",p:[270.207,343.748,265.008,342.11,
265.008,342.11]},{t:"L",p:[264.376,339.449]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[226.834,355.997]},{t:"C",p:[226.834,355.997,232.062,355.77,230.91,357.32]},{t:"C",p:[229.757,358.869,227.308,357.996,227.308,357.996]},{t:"L",p:[226.834,355.997]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[262.434,234.603]},{t:"C",p:[262.434,234.603,261.708,235.268,261.707,234.197]},{t:"C",p:[261.707,233.127,279.191,219.863,288.034,218.479]},{t:"C",p:[288.034,218.479,271.935,225.208,262.434,234.603]},
{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[265.4,298.4]},{t:"C",p:[265.4,298.4,287.401,320.801,296.601,324.401]},{t:"C",p:[296.601,324.401,305.801,335.601,301.801,361.601]},{t:"C",p:[301.801,361.601,298.601,369.201,295.401,348.401]},{t:"C",p:[295.401,348.401,298.601,323.201,287.401,339.201]},{t:"C",p:[287.401,339.201,279,329.301,285.4,329.601]},{t:"C",p:[285.4,329.601,288.601,331.601,289.001,330.001]},{t:"C",p:[289.401,328.401,281.4,314.801,264.2,300.4]},{t:"C",p:[247,286,265.4,298.4,265.4,298.4]},
{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[207,337.201]},{t:"C",p:[207,337.201,206.8,335.401,208.6,336.201]},{t:"C",p:[210.4,337.001,304.601,343.201,336.201,367.201]},{t:"C",p:[336.201,367.201,291.001,344.001,207,337.201]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[217.4,332.801]},{t:"C",p:[217.4,332.801,217.2,331.001,219,331.801]},{t:"C",p:[220.8,332.601,357.401,331.601,381.001,364.001]},{t:"C",p:[381.001,364.001,359.001,338.801,217.4,332.801]},{t:"z",p:[]}]},{f:"#fff",
s:{c:"#000",w:.1},p:[{t:"M",p:[229,328.801]},{t:"C",p:[229,328.801,228.8,327.001,230.6,327.801]},{t:"C",p:[232.4,328.601,405.801,315.601,429.401,348.001]},{t:"C",p:[429.401,348.001,419.801,322.401,229,328.801]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[239,324.001]},{t:"C",p:[239,324.001,238.8,322.201,240.6,323.001]},{t:"C",p:[242.4,323.801,364.601,285.2,388.201,317.601]},{t:"C",p:[388.201,317.601,374.801,293,239,324.001]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[181,
346.801]},{t:"C",p:[181,346.801,180.8,345.001,182.6,345.801]},{t:"C",p:[184.4,346.601,202.2,348.801,204.2,387.601]},{t:"C",p:[204.2,387.601,197,345.601,181,346.801]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[172.2,348.401]},{t:"C",p:[172.2,348.401,172,346.601,173.8,347.401]},{t:"C",p:[175.6,348.201,189.8,343.601,187,382.401]},{t:"C",p:[187,382.401,188.2,347.201,172.2,348.401]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[164.2,348.801]},{t:"C",p:[164.2,348.801,164,347.001,
165.8,347.801]},{t:"C",p:[167.6,348.601,183,349.201,170.6,371.601]},{t:"C",p:[170.6,371.601,180.2,347.601,164.2,348.801]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[211.526,304.465]},{t:"C",p:[211.526,304.465,211.082,306.464,212.631,305.247]},{t:"C",p:[228.699,292.622,261.141,233.72,316.826,228.086]},{t:"C",p:[316.826,228.086,278.518,215.976,211.526,304.465]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[222.726,302.665]},{t:"C",p:[222.726,302.665,221.363,301.472,223.231,300.847]},
{t:"C",p:[225.099,300.222,337.541,227.72,376.826,235.686]},{t:"C",p:[376.826,235.686,349.719,228.176,222.726,302.665]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[201.885,308.767]},{t:"C",p:[201.885,308.767,201.376,310.366,203.087,309.39]},{t:"C",p:[212.062,304.27,215.677,247.059,259.254,245.804]},{t:"C",p:[259.254,245.804,226.843,231.09,201.885,308.767]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[181.962,319.793]},{t:"C",p:[181.962,319.793,180.885,321.079,182.838,320.825]},
{t:"C",p:[193.084,319.493,214.489,278.222,258.928,283.301]},{t:"C",p:[258.928,283.301,226.962,268.955,181.962,319.793]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[193.2,313.667]},{t:"C",p:[193.2,313.667,192.389,315.136,194.258,314.511]},{t:"C",p:[204.057,311.237,217.141,266.625,261.729,263.078]},{t:"C",p:[261.729,263.078,227.603,255.135,193.2,313.667]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[174.922,324.912]},{t:"C",p:[174.922,324.912,174.049,325.954,175.631,325.748]},
{t:"C",p:[183.93,324.669,201.268,291.24,237.264,295.354]},{t:"C",p:[237.264,295.354,211.371,283.734,174.922,324.912]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[167.323,330.821]},{t:"C",p:[167.323,330.821,166.318,331.866,167.909,331.748]},{t:"C",p:[172.077,331.439,202.715,298.36,221.183,313.862]},{t:"C",p:[221.183,313.862,209.168,295.139,167.323,330.821]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[236.855,298.898]},{t:"C",p:[236.855,298.898,235.654,297.543,237.586,297.158]},
{t:"C",p:[239.518,296.774,360.221,239.061,398.184,251.927]},{t:"C",p:[398.184,251.927,372.243,241.053,236.855,298.898]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[203.4,363.201]},{t:"C",p:[203.4,363.201,203.2,361.401,205,362.201]},{t:"C",p:[206.8,363.001,222.2,363.601,209.8,386.001]},{t:"C",p:[209.8,386.001,219.4,362.001,203.4,363.201]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[213.8,361.601]},{t:"C",p:[213.8,361.601,213.6,359.801,215.4,360.601]},{t:"C",p:[217.2,361.401,
235,363.601,237,402.401]},{t:"C",p:[237,402.401,229.8,360.401,213.8,361.601]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[220.6,360.001]},{t:"C",p:[220.6,360.001,220.4,358.201,222.2,359.001]},{t:"C",p:[224,359.801,248.6,363.201,272.2,395.601]},{t:"C",p:[272.2,395.601,236.6,358.801,220.6,360.001]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[228.225,357.972]},{t:"C",p:[228.225,357.972,227.788,356.214,229.678,356.768]},{t:"C",p:[231.568,357.322,252.002,355.423,290.099,389.599]},
{t:"C",p:[290.099,389.599,243.924,354.656,228.225,357.972]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[238.625,353.572]},{t:"C",p:[238.625,353.572,238.188,351.814,240.078,352.368]},{t:"C",p:[241.968,352.922,276.802,357.423,328.499,392.399]},{t:"C",p:[328.499,392.399,254.324,350.256,238.625,353.572]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[198.2,342.001]},{t:"C",p:[198.2,342.001,198,340.201,199.8,341.001]},{t:"C",p:[201.6,341.801,255,344.401,285.4,371.201]},{t:"C",p:[285.4,
371.201,250.499,346.426,198.2,342.001]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[188.2,346.001]},{t:"C",p:[188.2,346.001,188,344.201,189.8,345.001]},{t:"C",p:[191.6,345.801,216.2,349.201,239.8,381.601]},{t:"C",p:[239.8,381.601,204.2,344.801,188.2,346.001]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[249.503,348.962]},{t:"C",p:[249.503,348.962,248.938,347.241,250.864,347.655]},{t:"C",p:[252.79,348.068,287.86,350.004,341.981,381.098]},{t:"C",p:[341.981,381.098,264.317,346.704,
249.503,348.962]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[257.903,346.562]},{t:"C",p:[257.903,346.562,257.338,344.841,259.264,345.255]},{t:"C",p:[261.19,345.668,296.26,347.604,350.381,378.698]},{t:"C",p:[350.381,378.698,273.317,343.904,257.903,346.562]},{t:"z",p:[]}]},{f:"#fff",s:{c:"#000",w:.1},p:[{t:"M",p:[267.503,341.562]},{t:"C",p:[267.503,341.562,266.938,339.841,268.864,340.255]},{t:"C",p:[270.79,340.668,313.86,345.004,403.582,379.298]},{t:"C",p:[403.582,379.298,282.917,338.904,
267.503,341.562]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[156.2,348.401]},{t:"C",p:[156.2,348.401,161.4,348.001,160.2,349.601]},{t:"C",p:[159,351.201,156.6,350.401,156.6,350.401]},{t:"L",p:[156.2,348.401]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[187,362.401]},{t:"C",p:[187,362.401,192.2,362.001,191,363.601]},{t:"C",p:[189.8,365.201,187.4,364.401,187.4,364.401]},{t:"L",p:[187,362.401]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[178.2,362.001]},{t:"C",p:[178.2,362.001,183.4,361.601,182.2,
363.201]},{t:"C",p:[181,364.801,178.6,364.001,178.6,364.001]},{t:"L",p:[178.2,362.001]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[82.831,350.182]},{t:"C",p:[82.831,350.182,87.876,351.505,86.218,352.624]},{t:"C",p:[84.561,353.744,82.554,352.202,82.554,352.202]},{t:"L",p:[82.831,350.182]},{t:"z",p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[84.831,340.582]},{t:"C",p:[84.831,340.582,89.876,341.905,88.218,343.024]},{t:"C",p:[86.561,344.144,84.554,342.602,84.554,342.602]},{t:"L",p:[84.831,340.582]},{t:"z",
p:[]}]},{f:"#000",s:null,p:[{t:"M",p:[77.631,336.182]},{t:"C",p:[77.631,336.182,82.676,337.505,81.018,338.624]},{t:"C",p:[79.361,339.744,77.354,338.202,77.354,338.202]},{t:"L",p:[77.631,336.182]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[157.4,411.201]},{t:"C",p:[157.4,411.201,155.8,411.201,151.8,413.201]},{t:"C",p:[149.8,413.201,138.6,416.801,133,426.801]},{t:"C",p:[133,426.801,145.4,417.201,157.4,411.201]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[245.116,503.847]},{t:"C",p:[245.257,504.105,
245.312,504.525,245.604,504.542]},{t:"C",p:[246.262,504.582,247.495,504.883,247.37,504.247]},{t:"C",p:[246.522,499.941,245.648,495.004,241.515,493.197]},{t:"C",p:[240.876,492.918,239.434,493.331,239.36,494.215]},{t:"C",p:[239.233,495.739,239.116,497.088,239.425,498.554]},{t:"C",p:[239.725,499.975,241.883,499.985,242.8,498.601]},{t:"C",p:[243.736,500.273,244.168,502.116,245.116,503.847]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[234.038,508.581]},{t:"C",p:[234.786,509.994,234.659,511.853,236.074,
512.416]},{t:"C",p:[236.814,512.71,238.664,511.735,238.246,510.661]},{t:"C",p:[237.444,508.6,237.056,506.361,235.667,504.55]},{t:"C",p:[235.467,504.288,235.707,503.755,235.547,503.427]},{t:"C",p:[234.953,502.207,233.808,501.472,232.4,501.801]},{t:"C",p:[231.285,504.004,232.433,506.133,233.955,507.842]},{t:"C",p:[234.091,507.994,233.925,508.37,234.038,508.581]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[194.436,503.391]},{t:"C",p:[194.328,503.014,194.29,502.551,194.455,502.23]},{t:"C",p:[194.986,
501.197,195.779,500.075,195.442,499.053]},{t:"C",p:[195.094,497.997,193.978,498.179,193.328,498.748]},{t:"C",p:[192.193,499.742,192.144,501.568,191.453,502.927]},{t:"C",p:[191.257,503.313,191.308,503.886,190.867,504.277]},{t:"C",p:[190.393,504.698,189.953,506.222,190.049,506.793]},{t:"C",p:[190.102,507.106,189.919,517.014,190.141,516.751]},{t:"C",p:[190.76,516.018,193.81,506.284,193.879,505.392]},{t:"C",p:[193.936,504.661,194.668,504.196,194.436,503.391]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",
p:[168.798,496.599]},{t:"C",p:[171.432,494.1,174.222,491.139,173.78,487.427]},{t:"C",p:[173.664,486.451,171.889,486.978,171.702,487.824]},{t:"C",p:[170.9,491.449,168.861,494.11,166.293,496.502]},{t:"C",p:[164.097,498.549,162.235,504.893,162,505.401]},{t:"C",p:[165.697,500.145,167.954,497.399,168.798,496.599]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[155.224,490.635]},{t:"C",p:[155.747,490.265,155.445,489.774,155.662,489.442]},{t:"C",p:[156.615,487.984,157.916,486.738,157.934,485]},{t:"C",p:[157.937,
484.723,157.559,484.414,157.224,484.638]},{t:"C",p:[156.947,484.822,156.605,484.952,156.497,485.082]},{t:"C",p:[154.467,487.531,153.067,490.202,151.624,493.014]},{t:"C",p:[151.441,493.371,150.297,497.862,150.61,497.973]},{t:"C",p:[150.849,498.058,152.569,493.877,152.779,493.763]},{t:"C",p:[154.042,493.077,154.054,491.462,155.224,490.635]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[171.957,510.179]},{t:"C",p:[172.401,509.31,173.977,508.108,173.864,507.219]},{t:"C",p:[173.746,506.291,174.214,504.848,
173.302,505.536]},{t:"C",p:[172.045,506.484,168.596,507.833,168.326,513.641]},{t:"C",p:[168.3,514.212,171.274,511.519,171.957,510.179]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[186.4,493.001]},{t:"C",p:[186.8,492.333,187.508,492.806,187.967,492.543]},{t:"C",p:[188.615,492.171,189.226,491.613,189.518,490.964]},{t:"C",p:[190.488,488.815,192.257,486.995,192.4,484.601]},{t:"C",p:[190.909,483.196,190.23,485.236,189.6,486.201]},{t:"C",p:[188.277,484.554,187.278,486.428,185.978,486.947]},{t:"C",p:[185.908,
486.975,185.695,486.628,185.62,486.655]},{t:"C",p:[184.443,487.095,183.763,488.176,182.765,488.957]},{t:"C",p:[182.594,489.091,182.189,488.911,182.042,489.047]},{t:"C",p:[181.39,489.65,180.417,489.975,180.137,490.657]},{t:"C",p:[179.027,493.364,175.887,495.459,174,503.001]},{t:"C",p:[174.381,503.91,178.512,496.359,178.999,495.661]},{t:"C",p:[179.835,494.465,179.953,497.322,181.229,496.656]},{t:"C",p:[181.28,496.629,181.466,496.867,181.6,497.001]},{t:"C",p:[181.794,496.721,182.012,496.492,182.4,496.601]},
{t:"C",p:[182.4,496.201,182.266,495.645,182.467,495.486]},{t:"C",p:[183.704,494.509,183.62,493.441,184.4,492.201]},{t:"C",p:[184.858,492.99,185.919,492.271,186.4,493.001]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[246.2,547.401]},{t:"C",p:[246.2,547.401,253.6,527.001,249.2,515.801]},{t:"C",p:[249.2,515.801,260.6,537.401,256,548.601]},{t:"C",p:[256,548.601,255.6,538.201,251.6,533.201]},{t:"C",p:[251.6,533.201,247.6,546.001,246.2,547.401]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[231.4,544.801]},
{t:"C",p:[231.4,544.801,236.8,536.001,228.8,517.601]},{t:"C",p:[228.8,517.601,228,538.001,221.2,549.001]},{t:"C",p:[221.2,549.001,235.4,528.801,231.4,544.801]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[221.4,542.801]},{t:"C",p:[221.4,542.801,221.2,522.801,221.6,519.801]},{t:"C",p:[221.6,519.801,217.8,536.401,207.6,546.001]},{t:"C",p:[207.6,546.001,222,534.001,221.4,542.801]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[211.8,510.801]},{t:"C",p:[211.8,510.801,217.8,524.401,207.8,542.801]},{t:"C",
p:[207.8,542.801,214.2,530.601,209.4,523.601]},{t:"C",p:[209.4,523.601,212,520.201,211.8,510.801]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[192.6,542.401]},{t:"C",p:[192.6,542.401,191.6,526.801,193.4,524.601]},{t:"C",p:[193.4,524.601,193.6,518.201,193.2,517.201]},{t:"C",p:[193.2,517.201,197.2,511.001,197.4,518.401]},{t:"C",p:[197.4,518.401,198.8,526.201,201.6,530.801]},{t:"C",p:[201.6,530.801,205.2,536.201,205,542.601]},{t:"C",p:[205,542.601,195,512.401,192.6,542.401]},{t:"z",p:[]}]},{f:"#ccc",
s:null,p:[{t:"M",p:[189,514.801]},{t:"C",p:[189,514.801,182.4,525.601,180.6,544.601]},{t:"C",p:[180.6,544.601,179.2,538.401,183,524.001]},{t:"C",p:[183,524.001,187.2,508.601,189,514.801]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[167.2,534.601]},{t:"C",p:[167.2,534.601,172.2,529.201,173.6,524.201]},{t:"C",p:[173.6,524.201,177.2,508.401,170.8,517.001]},{t:"C",p:[170.8,517.001,171,525.001,162.8,532.401]},{t:"C",p:[162.8,532.401,167.6,530.001,167.2,534.601]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",
p:[161.4,529.601]},{t:"C",p:[161.4,529.601,164.8,512.201,165.6,511.401]},{t:"C",p:[165.6,511.401,167.4,508.001,164.6,511.201]},{t:"C",p:[164.6,511.201,155.8,530.401,151.8,537.001]},{t:"C",p:[151.8,537.001,159.8,527.801,161.4,529.601]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[155.6,513.001]},{t:"C",p:[155.6,513.001,167.2,490.601,145.4,516.401]},{t:"C",p:[145.4,516.401,156.4,506.601,155.6,513.001]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[140.2,498.401]},{t:"C",p:[140.2,498.401,145,479.601,
147.6,479.801]},{t:"C",p:[147.6,479.801,155.8,470.801,149.2,481.401]},{t:"C",p:[149.2,481.401,143.2,491.001,143.8,500.801]},{t:"C",p:[143.8,500.801,143.2,491.201,140.2,498.401]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[470.5,487]},{t:"C",p:[470.5,487,458.5,477,456,473.5]},{t:"C",p:[456,473.5,469.5,492,469.5,499]},{t:"C",p:[469.5,499,472,491.5,470.5,487]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[476,465]},{t:"C",p:[476,465,455,450,451.5,442.5]},{t:"C",p:[451.5,442.5,478,472,478,476.5]},{t:"C",
p:[478,476.5,478.5,467.5,476,465]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[493,311]},{t:"C",p:[493,311,481,303,479.5,305]},{t:"C",p:[479.5,305,490,311.5,492.5,320]},{t:"C",p:[492.5,320,491,311,493,311]},{t:"z",p:[]}]},{f:"#ccc",s:null,p:[{t:"M",p:[501.5,391.5]},{t:"L",p:[484,379.5]},{t:"C",p:[484,379.5,503,396.5,503.5,400.5]},{t:"L",p:[501.5,391.5]},{t:"z",p:[]}]},{f:null,s:"#000",p:[{t:"M",p:[110.75,369]},{t:"L",p:[132.75,373.75]}]},{f:null,s:"#000",p:[{t:"M",p:[161,531]},{t:"C",p:[161,531,
160.5,527.5,151.5,538]}]},{f:null,s:"#000",p:[{t:"M",p:[166.5,536]},{t:"C",p:[166.5,536,168.5,529.5,162,534]}]},{f:null,s:"#000",p:[{t:"M",p:[220.5,544.5]},{t:"C",p:[220.5,544.5,222,533.5,210.5,546.5]}]}];const testData=["Countries",[["A",[["Afghanistan"],["Albania"],["Algeria"],["American Samoa"],["Andorra"],["Angola"],["Anguilla"],["Antarctica"],["Antigua and Barbuda"],["Argentina"],["Armenia"],["Aruba"],["Australia"],["Austria"],["Azerbaijan"]]],["B",[["Bahamas"],["Bahrain"],["Bangladesh"],["Barbados"],["Belarus"],["Belgium"],["Belize"],["Benin"],["Bermuda"],["Bhutan"],["Bolivia"],["Bosnia and Herzegovina"],["Botswana"],["Bouvet Island"],["Brazil"],["British Indian Ocean Territory"],["Brunei Darussalam"],
["Bulgaria"],["Burkina Faso"],["Burundi"]]],["C",[["Cambodia"],["Cameroon"],["Canada"],["Cape Verde"],["Cayman Islands"],["Central African Republic"],["Chad"],["Chile"],["China"],["Christmas Island"],["Cocos (Keeling) Islands"],["Colombia"],["Comoros"],["Congo"],["Congo, the Democratic Republic of the"],["Cook Islands"],["Costa Rica"],["Croatia"],["Cuba"],["Cyprus"],["Czech Republic"],["CÃ´te dâ€™Ivoire"]]],["D",[["Denmark"],["Djibouti"],["Dominica"],["Dominican Republic"]]],["E",[["Ecuador"],["Egypt"],
["El Salvador"],["Equatorial Guinea"],["Eritrea"],["Estonia"],["Ethiopia"]]],["F",[["Falkland Islands (Malvinas)"],["Faroe Islands"],["Fiji"],["Finland"],["France"],["French Guiana"],["French Polynesia"],["French Southern Territories"]]],["G",[["Gabon"],["Gambia"],["Georgia"],["Germany"],["Ghana"],["Gibraltar"],["Greece"],["Greenland"],["Grenada"],["Guadeloupe"],["Guam"],["Guatemala"],["Guernsey"],["Guinea"],["Guinea-Bissau"],["Guyana"]]],["H",[["Haiti"],["Heard Island and McDonald Islands"],["Holy See (Vatican City State)"],
["Honduras"],["Hong Kong"],["Hungary"]]],["I",[["Iceland"],["India"],["Indonesia"],["Iran, Islamic Republic of"],["Iraq"],["Ireland"],["Isle of Man"],["Israel"],["Italy"]]],["J",[["Jamaica"],["Japan"],["Jersey"],["Jordan"]]],["K",[["Kazakhstan"],["Kenya"],["Kiribati"],["Korea, Democratic Peopleâ€™s Republic of"],["Korea, Republic of"],["Kuwait"],["Kyrgyzstan"]]],["L",[["Lao Peopleâ€™s Democratic Republic"],["Latvia"],["Lebanon"],["Lesotho"],["Liberia"],["Libyan Arab Jamahiriya"],["Liechtenstein"],["Lithuania"],
["Luxembourg"]]],["M",[["Macao"],["Macedonia, the former Yugoslav Republic of"],["Madagascar"],["Malawi"],["Malaysia"],["Maldives"],["Mali"],["Malta"],["Marshall Islands"],["Martinique"],["Mauritania"],["Mauritius"],["Mayotte"],["Mexico"],["Micronesia, Federated States of"],["Moldova, Republic of"],["Monaco"],["Mongolia"],["Montenegro"],["Montserrat"],["Morocco"],["Mozambique"],["Myanmar"]]],["N",[["Namibia"],["Nauru"],["Nepal"],["Netherlands"],["Netherlands Antilles"],["New Caledonia"],["New Zealand"],
["Nicaragua"],["Niger"],["Nigeria"],["Niue"],["Norfolk Island"],["Northern Mariana Islands"],["Norway"]]],["O",[["Oman"]]],["P",[["Pakistan"],["Palau"],["Palestinian Territory, Occupied"],["Panama"],["Papua New Guinea"],["Paraguay"],["Peru"],["Philippines"],["Pitcairn"],["Poland"],["Portugal"],["Puerto Rico"]]],["Q",[["Qatar"]]],["R",[["Romania"],["Russian Federation"],["Rwanda"],["RÃ©union"]]],["S",[["Saint BarthÃ©lemy"],["Saint Helena"],["Saint Kitts and Nevis"],["Saint Lucia"],["Saint Martin (French part)"],
["Saint Pierre and Miquelon"],["Saint Vincent and the Grenadines"],["Samoa"],["San Marino"],["Sao Tome and Principe"],["Saudi Arabia"],["Senegal"],["Serbia"],["Seychelles"],["Sierra Leone"],["Singapore"],["Slovakia"],["Slovenia"],["Solomon Islands"],["Somalia"],["South Africa"],["South Georgia and the South Sandwich Islands"],["Spain"],["Sri Lanka"],["Sudan"],["Suriname"],["Svalbard and Jan Mayen"],["Swaziland"],["Sweden"],["Switzerland"],["Syrian Arab Republic"]]],["T",[["Taiwan, Province of China"],
["Tajikistan"],["Tanzania, United Republic of"],["Thailand"],["Timor-Leste"],["Togo"],["Tokelau"],["Tonga"],["Trinidad and Tobago"],["Tunisia"],["Turkey"],["Turkmenistan"],["Turks and Caicos Islands"],["Tuvalu"]]],["U",[["Uganda"],["Ukraine"],["United Arab Emirates"],["United Kingdom"],["United States"],["United States Minor Outlying Islands"],["Uruguay"],["Uzbekistan"]]],["V",[["Vanuatu"],["Venezuela"],["Viet Nam"],["Virgin Islands, British"],["Virgin Islands, U.S."]]],["W",[["Wallis and Futuna"],
["Western Sahara"]]],["Y",[["Yemen"]]],["Z",[["Zambia"],["Zimbabwe"]]],["Ã…",[["Ã…land Islands"]]]]];goog.debug={};function module$contents$goog$debug$Error_DebugError(a,d){if(Error.captureStackTrace)Error.captureStackTrace(this,module$contents$goog$debug$Error_DebugError);else{const f=Error().stack;f&&(this.stack=f)}a&&(this.message=String(a));void 0!==d&&(this.cause=d);this.reportErrorToServer=!0}goog.inherits(module$contents$goog$debug$Error_DebugError,Error);module$contents$goog$debug$Error_DebugError.prototype.name="CustomError";goog.debug.Error=module$contents$goog$debug$Error_DebugError;goog.dom={};goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(a,d){module$contents$goog$debug$Error_DebugError.call(this,goog.asserts.subs_(a,d));this.messagePattern=a};goog.inherits(goog.asserts.AssertionError,module$contents$goog$debug$Error_DebugError);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(a){throw a;};goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;
goog.asserts.subs_=function(a,d){a=a.split("%s");for(var f="",h=a.length-1,l=0;l<h;l++)f+=a[l]+(l<d.length?d[l]:"%s");return f+a[h]};goog.asserts.doAssertFailure_=function(a,d,f,h){var l="Assertion failed";if(f){l+=": "+f;var m=h}else a&&(l+=": "+a,m=d);a=new goog.asserts.AssertionError(""+l,m||[]);goog.asserts.errorHandler_(a)};goog.asserts.setErrorHandler=function(a){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=a)};
goog.asserts.assert=function(a,d,f){goog.asserts.ENABLE_ASSERTS&&!a&&goog.asserts.doAssertFailure_("",null,d,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertExists=function(a,d,f){goog.asserts.ENABLE_ASSERTS&&null==a&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[a],d,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.fail=function(a,d){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};goog.asserts.assertNumber=function(a,d,f){goog.asserts.ENABLE_ASSERTS&&"number"!==typeof a&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(a),a],d,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertString=function(a,d,f){goog.asserts.ENABLE_ASSERTS&&"string"!==typeof a&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(a),a],d,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertFunction=function(a,d,f){goog.asserts.ENABLE_ASSERTS&&"function"!==typeof a&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(a),a],d,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertObject=function(a,d,f){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(a)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(a),a],d,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertArray=function(a,d,f){goog.asserts.ENABLE_ASSERTS&&!Array.isArray(a)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(a),a],d,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertBoolean=function(a,d,f){goog.asserts.ENABLE_ASSERTS&&"boolean"!==typeof a&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(a),a],d,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertElement=function(a,d,f){!goog.asserts.ENABLE_ASSERTS||goog.isObject(a)&&a.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(a),a],d,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertInstanceof=function(a,d,f,h){!goog.asserts.ENABLE_ASSERTS||a instanceof d||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(d),goog.asserts.getType_(a)],f,Array.prototype.slice.call(arguments,3));return a};goog.asserts.assertFinite=function(a,d,f){!goog.asserts.ENABLE_ASSERTS||"number"==typeof a&&isFinite(a)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[a],d,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.getType_=function(a){return a instanceof Function?a.displayName||a.name||"unknown type name":a instanceof Object?a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a):null===a?"null":typeof a};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE;const module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR;goog.array.ASSUME_NATIVE_FUNCTIONS=module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS;function module$contents$goog$array_peek(a){return a[a.length-1]}goog.array.peek=module$contents$goog$array_peek;goog.array.last=module$contents$goog$array_peek;
const module$contents$goog$array_indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(a,d,f){goog.asserts.assert(null!=a.length);return Array.prototype.indexOf.call(a,d,f)}:function(a,d,f){f=null==f?0:0>f?Math.max(0,a.length+f):f;if("string"===typeof a)return"string"!==typeof d||1!=d.length?-1:a.indexOf(d,f);for(;f<a.length;f++)if(f in a&&a[f]===d)return f;return-1};goog.array.indexOf=module$contents$goog$array_indexOf;
const module$contents$goog$array_lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(a,d,f){goog.asserts.assert(null!=a.length);return Array.prototype.lastIndexOf.call(a,d,null==f?a.length-1:f)}:function(a,d,f){f=null==f?a.length-1:f;0>f&&(f=Math.max(0,a.length+f));if("string"===typeof a)return"string"!==typeof d||1!=d.length?-1:a.lastIndexOf(d,f);for(;0<=f;f--)if(f in a&&a[f]===d)return f;return-1};
goog.array.lastIndexOf=module$contents$goog$array_lastIndexOf;const module$contents$goog$array_forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(a,d,f){goog.asserts.assert(null!=a.length);Array.prototype.forEach.call(a,d,f)}:function(a,d,f){const h=a.length,l="string"===typeof a?a.split(""):a;for(let m=0;m<h;m++)m in l&&d.call(f,l[m],m,a)};goog.array.forEach=module$contents$goog$array_forEach;
function module$contents$goog$array_forEachRight(a,d,f){var h=a.length;const l="string"===typeof a?a.split(""):a;for(--h;0<=h;--h)h in l&&d.call(f,l[h],h,a)}goog.array.forEachRight=module$contents$goog$array_forEachRight;
const module$contents$goog$array_filter=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(a,d,f){goog.asserts.assert(null!=a.length);return Array.prototype.filter.call(a,d,f)}:function(a,d,f){const h=a.length,l=[];let m=0;const p="string"===typeof a?a.split(""):a;for(let q=0;q<h;q++)if(q in p){const u=p[q];d.call(f,u,q,a)&&(l[m++]=u)}return l};goog.array.filter=module$contents$goog$array_filter;
const module$contents$goog$array_map=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(a,d,f){goog.asserts.assert(null!=a.length);return Array.prototype.map.call(a,d,f)}:function(a,d,f){const h=a.length,l=Array(h),m="string"===typeof a?a.split(""):a;for(let p=0;p<h;p++)p in m&&(l[p]=d.call(f,m[p],p,a));return l};goog.array.map=module$contents$goog$array_map;
const module$contents$goog$array_reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(a,d,f,h){goog.asserts.assert(null!=a.length);h&&(d=goog.bind(d,h));return Array.prototype.reduce.call(a,d,f)}:function(a,d,f,h){let l=f;module$contents$goog$array_forEach(a,function(m,p){l=d.call(h,l,m,p,a)});return l};goog.array.reduce=module$contents$goog$array_reduce;
const module$contents$goog$array_reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(a,d,f,h){goog.asserts.assert(null!=a.length);goog.asserts.assert(null!=d);h&&(d=goog.bind(d,h));return Array.prototype.reduceRight.call(a,d,f)}:function(a,d,f,h){let l=f;module$contents$goog$array_forEachRight(a,function(m,p){l=d.call(h,l,m,p,a)});return l};goog.array.reduceRight=module$contents$goog$array_reduceRight;
const module$contents$goog$array_some=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(a,d,f){goog.asserts.assert(null!=a.length);return Array.prototype.some.call(a,d,f)}:function(a,d,f){const h=a.length,l="string"===typeof a?a.split(""):a;for(let m=0;m<h;m++)if(m in l&&d.call(f,l[m],m,a))return!0;return!1};goog.array.some=module$contents$goog$array_some;
const module$contents$goog$array_every=goog.NATIVE_ARRAY_PROTOTYPES&&(module$contents$goog$array_ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(a,d,f){goog.asserts.assert(null!=a.length);return Array.prototype.every.call(a,d,f)}:function(a,d,f){const h=a.length,l="string"===typeof a?a.split(""):a;for(let m=0;m<h;m++)if(m in l&&!d.call(f,l[m],m,a))return!1;return!0};goog.array.every=module$contents$goog$array_every;
function module$contents$goog$array_count(a,d,f){let h=0;module$contents$goog$array_forEach(a,function(l,m,p){d.call(f,l,m,p)&&++h},f);return h}goog.array.count=module$contents$goog$array_count;function module$contents$goog$array_find(a,d,f){d=module$contents$goog$array_findIndex(a,d,f);return 0>d?null:"string"===typeof a?a.charAt(d):a[d]}goog.array.find=module$contents$goog$array_find;
function module$contents$goog$array_findIndex(a,d,f){const h=a.length,l="string"===typeof a?a.split(""):a;for(let m=0;m<h;m++)if(m in l&&d.call(f,l[m],m,a))return m;return-1}goog.array.findIndex=module$contents$goog$array_findIndex;function module$contents$goog$array_findRight(a,d,f){d=module$contents$goog$array_findIndexRight(a,d,f);return 0>d?null:"string"===typeof a?a.charAt(d):a[d]}goog.array.findRight=module$contents$goog$array_findRight;
function module$contents$goog$array_findIndexRight(a,d,f){var h=a.length;const l="string"===typeof a?a.split(""):a;for(--h;0<=h;h--)if(h in l&&d.call(f,l[h],h,a))return h;return-1}goog.array.findIndexRight=module$contents$goog$array_findIndexRight;function module$contents$goog$array_contains(a,d){return 0<=module$contents$goog$array_indexOf(a,d)}goog.array.contains=module$contents$goog$array_contains;function module$contents$goog$array_isEmpty(a){return 0==a.length}goog.array.isEmpty=module$contents$goog$array_isEmpty;
function module$contents$goog$array_clear(a){if(!Array.isArray(a))for(let d=a.length-1;0<=d;d--)delete a[d];a.length=0}goog.array.clear=module$contents$goog$array_clear;function module$contents$goog$array_insert(a,d){module$contents$goog$array_contains(a,d)||a.push(d)}goog.array.insert=module$contents$goog$array_insert;function module$contents$goog$array_insertAt(a,d,f){module$contents$goog$array_splice(a,f,0,d)}goog.array.insertAt=module$contents$goog$array_insertAt;
function module$contents$goog$array_insertArrayAt(a,d,f){goog.partial(module$contents$goog$array_splice,a,f,0).apply(null,d)}goog.array.insertArrayAt=module$contents$goog$array_insertArrayAt;function module$contents$goog$array_insertBefore(a,d,f){let h;2==arguments.length||0>(h=module$contents$goog$array_indexOf(a,f))?a.push(d):module$contents$goog$array_insertAt(a,d,h)}goog.array.insertBefore=module$contents$goog$array_insertBefore;
function module$contents$goog$array_remove(a,d){d=module$contents$goog$array_indexOf(a,d);let f;(f=0<=d)&&module$contents$goog$array_removeAt(a,d);return f}goog.array.remove=module$contents$goog$array_remove;function module$contents$goog$array_removeLast(a,d){d=module$contents$goog$array_lastIndexOf(a,d);return 0<=d?(module$contents$goog$array_removeAt(a,d),!0):!1}goog.array.removeLast=module$contents$goog$array_removeLast;
function module$contents$goog$array_removeAt(a,d){goog.asserts.assert(null!=a.length);return 1==Array.prototype.splice.call(a,d,1).length}goog.array.removeAt=module$contents$goog$array_removeAt;function module$contents$goog$array_removeIf(a,d,f){d=module$contents$goog$array_findIndex(a,d,f);return 0<=d?(module$contents$goog$array_removeAt(a,d),!0):!1}goog.array.removeIf=module$contents$goog$array_removeIf;
function module$contents$goog$array_removeAllIf(a,d,f){let h=0;module$contents$goog$array_forEachRight(a,function(l,m){d.call(f,l,m,a)&&module$contents$goog$array_removeAt(a,m)&&h++});return h}goog.array.removeAllIf=module$contents$goog$array_removeAllIf;function module$contents$goog$array_concat(a){return Array.prototype.concat.apply([],arguments)}goog.array.concat=module$contents$goog$array_concat;function module$contents$goog$array_join(a){return Array.prototype.concat.apply([],arguments)}
goog.array.join=module$contents$goog$array_join;function module$contents$goog$array_toArray(a){const d=a.length;if(0<d){const f=Array(d);for(let h=0;h<d;h++)f[h]=a[h];return f}return[]}const module$contents$goog$array_clone=goog.array.toArray=module$contents$goog$array_toArray;goog.array.clone=module$contents$goog$array_toArray;
function module$contents$goog$array_extend(a,d){for(let f=1;f<arguments.length;f++){const h=arguments[f];if(goog.isArrayLike(h)){const l=a.length||0,m=h.length||0;a.length=l+m;for(let p=0;p<m;p++)a[l+p]=h[p]}else a.push(h)}}goog.array.extend=module$contents$goog$array_extend;function module$contents$goog$array_splice(a,d,f,h){goog.asserts.assert(null!=a.length);return Array.prototype.splice.apply(a,module$contents$goog$array_slice(arguments,1))}goog.array.splice=module$contents$goog$array_splice;
function module$contents$goog$array_slice(a,d,f){goog.asserts.assert(null!=a.length);return 2>=arguments.length?Array.prototype.slice.call(a,d):Array.prototype.slice.call(a,d,f)}goog.array.slice=module$contents$goog$array_slice;
function module$contents$goog$array_removeDuplicates(a,d,f){d=d||a;var h=function(p){return goog.isObject(p)?"o"+goog.getUid(p):(typeof p).charAt(0)+p};f=f||h;let l=h=0;const m={};for(;l<a.length;){const p=a[l++],q=f(p);Object.prototype.hasOwnProperty.call(m,q)||(m[q]=!0,d[h++]=p)}d.length=h}goog.array.removeDuplicates=module$contents$goog$array_removeDuplicates;
function module$contents$goog$array_binarySearch(a,d,f){return module$contents$goog$array_binarySearch_(a,f||module$contents$goog$array_defaultCompare,!1,d)}goog.array.binarySearch=module$contents$goog$array_binarySearch;function module$contents$goog$array_binarySelect(a,d,f){return module$contents$goog$array_binarySearch_(a,d,!0,void 0,f)}goog.array.binarySelect=module$contents$goog$array_binarySelect;
function module$contents$goog$array_binarySearch_(a,d,f,h,l){let m=0,p=a.length,q;for(;m<p;){const u=m+(p-m>>>1);let y;y=f?d.call(l,a[u],u,a):d(h,a[u]);0<y?m=u+1:(p=u,q=!y)}return q?m:-m-1}function module$contents$goog$array_sort(a,d){a.sort(d||module$contents$goog$array_defaultCompare)}goog.array.sort=module$contents$goog$array_sort;
function module$contents$goog$array_stableSort(a,d){const f=Array(a.length);for(let l=0;l<a.length;l++)f[l]={index:l,value:a[l]};const h=d||module$contents$goog$array_defaultCompare;module$contents$goog$array_sort(f,function(l,m){return h(l.value,m.value)||l.index-m.index});for(d=0;d<a.length;d++)a[d]=f[d].value}goog.array.stableSort=module$contents$goog$array_stableSort;
function module$contents$goog$array_sortByKey(a,d,f){const h=f||module$contents$goog$array_defaultCompare;module$contents$goog$array_sort(a,function(l,m){return h(d(l),d(m))})}goog.array.sortByKey=module$contents$goog$array_sortByKey;function module$contents$goog$array_sortObjectsByKey(a,d,f){module$contents$goog$array_sortByKey(a,function(h){return h[d]},f)}goog.array.sortObjectsByKey=module$contents$goog$array_sortObjectsByKey;
function module$contents$goog$array_isSorted(a,d,f){d=d||module$contents$goog$array_defaultCompare;for(let h=1;h<a.length;h++){const l=d(a[h-1],a[h]);if(0<l||0==l&&f)return!1}return!0}goog.array.isSorted=module$contents$goog$array_isSorted;function module$contents$goog$array_equals(a,d,f){if(!goog.isArrayLike(a)||!goog.isArrayLike(d)||a.length!=d.length)return!1;const h=a.length;f=f||module$contents$goog$array_defaultCompareEquality;for(let l=0;l<h;l++)if(!f(a[l],d[l]))return!1;return!0}
goog.array.equals=module$contents$goog$array_equals;function module$contents$goog$array_compare3(a,d,f){f=f||module$contents$goog$array_defaultCompare;const h=Math.min(a.length,d.length);for(let l=0;l<h;l++){const m=f(a[l],d[l]);if(0!=m)return m}return module$contents$goog$array_defaultCompare(a.length,d.length)}goog.array.compare3=module$contents$goog$array_compare3;function module$contents$goog$array_defaultCompare(a,d){return a>d?1:a<d?-1:0}goog.array.defaultCompare=module$contents$goog$array_defaultCompare;
function module$contents$goog$array_inverseDefaultCompare(a,d){return-module$contents$goog$array_defaultCompare(a,d)}goog.array.inverseDefaultCompare=module$contents$goog$array_inverseDefaultCompare;function module$contents$goog$array_defaultCompareEquality(a,d){return a===d}goog.array.defaultCompareEquality=module$contents$goog$array_defaultCompareEquality;
function module$contents$goog$array_binaryInsert(a,d,f){f=module$contents$goog$array_binarySearch(a,d,f);return 0>f?(module$contents$goog$array_insertAt(a,d,-(f+1)),!0):!1}goog.array.binaryInsert=module$contents$goog$array_binaryInsert;function module$contents$goog$array_binaryRemove(a,d,f){d=module$contents$goog$array_binarySearch(a,d,f);return 0<=d?module$contents$goog$array_removeAt(a,d):!1}goog.array.binaryRemove=module$contents$goog$array_binaryRemove;
function module$contents$goog$array_bucket(a,d,f){const h={};for(let l=0;l<a.length;l++){const m=a[l],p=d.call(f,m,l,a);void 0!==p&&(h[p]||(h[p]=[])).push(m)}return h}goog.array.bucket=module$contents$goog$array_bucket;function module$contents$goog$array_bucketToMap(a,d){const f=new Map;for(let h=0;h<a.length;h++){const l=a[h],m=d(l,h,a);if(void 0!==m){let p=f.get(m);p||(p=[],f.set(m,p));p.push(l)}}return f}goog.array.bucketToMap=module$contents$goog$array_bucketToMap;
function module$contents$goog$array_toObject(a,d,f){const h={};module$contents$goog$array_forEach(a,function(l,m){h[d.call(f,l,m,a)]=l});return h}goog.array.toObject=module$contents$goog$array_toObject;function module$contents$goog$array_toMap(a,d){const f=new Map;for(let h=0;h<a.length;h++){const l=a[h];f.set(d(l,h,a),l)}return f}goog.array.toMap=module$contents$goog$array_toMap;
function module$contents$goog$array_range(a,d,f){const h=[];let l=0,m=a;f=f||1;void 0!==d&&(l=a,m=d);if(0>f*(m-l))return[];if(0<f)for(a=l;a<m;a+=f)h.push(a);else for(a=l;a>m;a+=f)h.push(a);return h}goog.array.range=module$contents$goog$array_range;function module$contents$goog$array_repeat(a,d){const f=[];for(let h=0;h<d;h++)f[h]=a;return f}goog.array.repeat=module$contents$goog$array_repeat;
function module$contents$goog$array_flatten(a){const d=[];for(let h=0;h<arguments.length;h++){const l=arguments[h];if(Array.isArray(l))for(let m=0;m<l.length;m+=8192){var f=module$contents$goog$array_slice(l,m,m+8192);f=module$contents$goog$array_flatten.apply(null,f);for(let p=0;p<f.length;p++)d.push(f[p])}else d.push(l)}return d}goog.array.flatten=module$contents$goog$array_flatten;
function module$contents$goog$array_rotate(a,d){goog.asserts.assert(null!=a.length);a.length&&(d%=a.length,0<d?Array.prototype.unshift.apply(a,a.splice(-d,d)):0>d&&Array.prototype.push.apply(a,a.splice(0,-d)));return a}goog.array.rotate=module$contents$goog$array_rotate;function module$contents$goog$array_moveItem(a,d,f){goog.asserts.assert(0<=d&&d<a.length);goog.asserts.assert(0<=f&&f<a.length);d=Array.prototype.splice.call(a,d,1);Array.prototype.splice.call(a,f,0,d[0])}goog.array.moveItem=module$contents$goog$array_moveItem;
function module$contents$goog$array_zip(a){if(!arguments.length)return[];const d=[];let f=arguments[0].length;for(var h=1;h<arguments.length;h++)arguments[h].length<f&&(f=arguments[h].length);for(h=0;h<f;h++){const l=[];for(let m=0;m<arguments.length;m++)l.push(arguments[m][h]);d.push(l)}return d}goog.array.zip=module$contents$goog$array_zip;function module$contents$goog$array_shuffle(a,d){d=d||Math.random;for(let f=a.length-1;0<f;f--){const h=Math.floor(d()*(f+1)),l=a[f];a[f]=a[h];a[h]=l}}
goog.array.shuffle=module$contents$goog$array_shuffle;function module$contents$goog$array_copyByIndex(a,d){const f=[];module$contents$goog$array_forEach(d,function(h){f.push(a[h])});return f}goog.array.copyByIndex=module$contents$goog$array_copyByIndex;function module$contents$goog$array_concatMap(a,d,f){return module$contents$goog$array_concat.apply([],module$contents$goog$array_map(a,d,f))}goog.array.concatMap=module$contents$goog$array_concatMap;goog.color={};
goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};goog.math={};goog.math.randomInt=function(a){return Math.floor(Math.random()*a)};goog.math.uniformRandom=function(a,d){return a+Math.random()*(d-a)};goog.math.clamp=function(a,d,f){return Math.min(Math.max(a,d),f)};goog.math.modulo=function(a,d){a%=d;return 0>a*d?a+d:a};goog.math.lerp=function(a,d,f){return a+f*(d-a)};goog.math.nearlyEquals=function(a,d,f){return Math.abs(a-d)<=(f||1E-6)};goog.math.standardAngle=function(a){return goog.math.modulo(a,360)};
goog.math.standardAngleInRadians=function(a){return goog.math.modulo(a,2*Math.PI)};goog.math.toRadians=function(a){return a*Math.PI/180};goog.math.toDegrees=function(a){return 180*a/Math.PI};goog.math.angleDx=function(a,d){return d*Math.cos(goog.math.toRadians(a))};goog.math.angleDy=function(a,d){return d*Math.sin(goog.math.toRadians(a))};goog.math.angle=function(a,d,f,h){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(h-d,f-a)))};
goog.math.angleDifference=function(a,d){a=goog.math.standardAngle(d)-goog.math.standardAngle(a);180<a?a-=360:-180>=a&&(a=360+a);return a};goog.math.sign=function(a){return 0<a?1:0>a?-1:a};
goog.math.longestCommonSubsequence=function(a,d,f,h){f=f||function(C,K){return C==K};h=h||function(C,K){return a[C]};for(var l=a.length,m=d.length,p=[],q=0;q<l+1;q++)p[q]=[],p[q][0]=0;for(var u=0;u<m+1;u++)p[0][u]=0;for(q=1;q<=l;q++)for(u=1;u<=m;u++)f(a[q-1],d[u-1])?p[q][u]=p[q-1][u-1]+1:p[q][u]=Math.max(p[q-1][u],p[q][u-1]);var y=[];q=l;for(u=m;0<q&&0<u;)f(a[q-1],d[u-1])?(y.unshift(h(q-1,u-1)),q--,u--):p[q-1][u]>p[q][u-1]?q--:u--;return y};
goog.math.sum=function(a){return Array.prototype.reduce.call(arguments,function(d,f){return d+f},0)};goog.math.average=function(a){return goog.math.sum.apply(null,arguments)/arguments.length};goog.math.sampleVariance=function(a){var d=arguments.length;if(2>d)return 0;var f=goog.math.average.apply(null,arguments);return goog.math.sum.apply(null,Array.prototype.map.call(arguments,function(h){return Math.pow(h-f,2)}))/(d-1)};
goog.math.standardDeviation=function(a){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))};goog.math.isInt=function(a){return isFinite(a)&&0==a%1};goog.math.isFiniteNumber=function(a){return isFinite(a)};goog.math.isNegativeZero=function(a){return 0==a&&0>1/a};goog.math.log10Floor=function(a){if(0<a){var d=Math.round(Math.log(a)*Math.LOG10E);return d-(parseFloat("1e"+d)>a?1:0)}return 0==a?-Infinity:NaN};
goog.math.safeFloor=function(a,d){goog.asserts.assert(void 0===d||0<d);return Math.floor(a+(d||2E-15))};goog.math.safeCeil=function(a,d){goog.asserts.assert(void 0===d||0<d);return Math.ceil(a-(d||2E-15))};goog.color.Hsl={};goog.color.Hsv={};goog.color.Rgb={};goog.color.parse=function(a){const d={};a=String(a);var f=goog.color.prependHashIfNecessaryHelper(a);if(goog.color.isValidHexColor_(f))return d.hex=goog.color.normalizeHex(f),d.type="hex",d;f=goog.color.isValidRgbColor_(a);if(f.length)return d.hex=goog.color.rgbArrayToHex(f),d.type="rgb",d;if(goog.color.names&&(f=goog.color.names[a.toLowerCase()]))return d.hex=f,d.type="named",d;throw Error(a+" is not a valid color string");};
goog.color.isValidColor=function(a){const d=goog.color.prependHashIfNecessaryHelper(a);return!!(goog.color.isValidHexColor_(d)||goog.color.isValidRgbColor_(a).length||goog.color.names&&goog.color.names[a.toLowerCase()])};goog.color.parseRgb=function(a){const d=goog.color.isValidRgbColor_(a);if(!d.length)throw Error(a+" is not a valid RGB color");return d};goog.color.hexToRgbStyle=function(a){return goog.color.rgbStyle_(goog.color.hexToRgb(a))};goog.color.hexTripletRe_=/#(.)(.)(.)/;
goog.color.normalizeHex=function(a){if(!goog.color.isValidHexColor_(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3"));return a.toLowerCase()};goog.color.hexToRgb=function(a){a=goog.color.normalizeHex(a);a=parseInt(a.substr(1),16);return[a>>16,a>>8&255,a&255]};
goog.color.rgbToHex=function(a,d,f){a=Number(a);d=Number(d);f=Number(f);if(a!=(a&255)||d!=(d&255)||f!=(f&255))throw Error('"('+a+","+d+","+f+'") is not a valid RGB color');d=a<<16|d<<8|f;return 16>a?"#"+(16777216|d).toString(16).substr(1):"#"+d.toString(16)};goog.color.rgbArrayToHex=function(a){return goog.color.rgbToHex(a[0],a[1],a[2])};
goog.color.rgbToHsl=function(a,d,f){a/=255;d/=255;f/=255;const h=Math.max(a,d,f),l=Math.min(a,d,f);let m=0,p=0;const q=.5*(h+l);h!=l&&(h==a?m=60*(d-f)/(h-l):h==d?m=60*(f-a)/(h-l)+120:h==f&&(m=60*(a-d)/(h-l)+240),p=0<q&&.5>=q?(h-l)/(2*q):(h-l)/(2-2*q));return[Math.round(m+360)%360,p,q]};goog.color.rgbArrayToHsl=function(a){return goog.color.rgbToHsl(a[0],a[1],a[2])};goog.color.hueToRgb_=function(a,d,f){0>f?f+=1:1<f&&--f;return 1>6*f?a+6*(d-a)*f:1>2*f?d:2>3*f?a+(d-a)*(2/3-f)*6:a};
goog.color.hslToRgb=function(a,d,f){a/=360;if(0==d)f=d=a=255*f;else{let h,l;l=.5>f?f*(1+d):f+d-d*f;h=2*f-l;f=255*goog.color.hueToRgb_(h,l,a+1/3);d=255*goog.color.hueToRgb_(h,l,a);a=255*goog.color.hueToRgb_(h,l,a-1/3)}return[Math.round(f),Math.round(d),Math.round(a)]};goog.color.hslArrayToRgb=function(a){return goog.color.hslToRgb(a[0],a[1],a[2])};goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i;goog.color.isValidHexColor_=function(a){return goog.color.validHexColorRe_.test(a)};
goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;goog.color.isValidRgbColor_=function(a){var d=a.match(goog.color.rgbColorRe_);if(d){a=Number(d[1]);const f=Number(d[2]);d=Number(d[3]);if(0<=a&&255>=a&&0<=f&&255>=f&&0<=d&&255>=d)return[a,f,d]}return[]};goog.color.prependZeroIfNecessaryHelper=function(a){return 1==a.length?"0"+a:a};goog.color.prependHashIfNecessaryHelper=function(a){return"#"==a.charAt(0)?a:"#"+a};
goog.color.rgbStyle_=function(a){return"rgb("+a.join(",")+")"};goog.color.hsvToRgb=function(a,d,f){let h=0,l=0,m=0;if(0==d)m=l=h=f;else{const p=Math.floor(a/60),q=a/60-p;a=f*(1-d);const u=f*(1-d*q);d=f*(1-d*(1-q));switch(p){case 1:h=u;l=f;m=a;break;case 2:h=a;l=f;m=d;break;case 3:h=a;l=u;m=f;break;case 4:h=d;l=a;m=f;break;case 5:h=f;l=a;m=u;break;case 6:case 0:h=f,l=d,m=a}}return[Math.round(h),Math.round(l),Math.round(m)]};
goog.color.rgbToHsv=function(a,d,f){const h=Math.max(Math.max(a,d),f);var l=Math.min(Math.min(a,d),f);if(l==h)l=a=0;else{const m=h-l;l=m/h;a=a==h?(d-f)/m:d==h?2+(f-a)/m:4+(a-d)/m;a*=60;0>a&&(a+=360);360<a&&(a-=360)}return[a,l,h]};goog.color.rgbArrayToHsv=function(a){return goog.color.rgbToHsv(a[0],a[1],a[2])};goog.color.hsvArrayToRgb=function(a){return goog.color.hsvToRgb(a[0],a[1],a[2])};goog.color.hexToHsl=function(a){a=goog.color.hexToRgb(a);return goog.color.rgbToHsl(a[0],a[1],a[2])};
goog.color.hslToHex=function(a,d,f){return goog.color.rgbArrayToHex(goog.color.hslToRgb(a,d,f))};goog.color.hslArrayToHex=function(a){return goog.color.rgbArrayToHex(goog.color.hslToRgb(a[0],a[1],a[2]))};goog.color.hexToHsv=function(a){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(a))};goog.color.hsvToHex=function(a,d,f){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(a,d,f))};goog.color.hsvArrayToHex=function(a){return goog.color.hsvToHex(a[0],a[1],a[2])};
goog.color.hslDistance=function(a,d){let f,h;f=.5>=a[2]?a[1]*a[2]:a[1]*(1-a[2]);h=.5>=d[2]?d[1]*d[2]:d[1]*(1-d[2]);return(a[2]-d[2])*(a[2]-d[2])+f*f+h*h-2*f*h*Math.cos(2*(a[0]/360-d[0]/360)*Math.PI)};goog.color.blend=function(a,d,f){f=goog.math.clamp(f,0,1);return[Math.round(d[0]+f*(a[0]-d[0])),Math.round(d[1]+f*(a[1]-d[1])),Math.round(d[2]+f*(a[2]-d[2]))]};goog.color.darken=function(a,d){return goog.color.blend([0,0,0],a,d)};
goog.color.lighten=function(a,d){return goog.color.blend([255,255,255],a,d)};goog.color.highContrast=function(a,d){const f=[];for(let h=0;h<d.length;h++)f.push({color:d[h],diff:goog.color.yiqBrightnessDiff_(d[h],a)+goog.color.colorDiff_(d[h],a)});f.sort(function(h,l){return l.diff-h.diff});return f[0].color};goog.color.yiqBrightness_=function(a){return Math.round((299*a[0]+587*a[1]+114*a[2])/1E3)};goog.color.yiqBrightnessDiff_=function(a,d){return Math.abs(goog.color.yiqBrightness_(a)-goog.color.yiqBrightness_(d))};
goog.color.colorDiff_=function(a,d){return Math.abs(a[0]-d[0])+Math.abs(a[1]-d[1])+Math.abs(a[2]-d[2])};goog.color.alpha={};
goog.color.alpha.parse=function(a){const d={};a=String(a);var f=goog.color.prependHashIfNecessaryHelper(a);if(goog.color.alpha.isValidAlphaHexColor_(f))return d.hex=goog.color.alpha.normalizeAlphaHex_(f),d.type="hex",d;f=goog.color.alpha.isValidRgbaColor_(a);if(f.length)return d.hex=goog.color.alpha.rgbaArrayToHex(f),d.type="rgba",d;f=goog.color.alpha.isValidHslaColor_(a);if(f.length)return d.hex=goog.color.alpha.hslaArrayToHex(f),d.type="hsla",d;throw Error(a+" is not a valid color string");};
goog.color.alpha.hexToRgbaStyle=function(a){return goog.color.alpha.rgbaStyle_(goog.color.alpha.hexToRgba(a))};goog.color.alpha.extractColor_=function(a,d,f){if(goog.color.alpha.isValidAlphaHexColor_(a))return a=goog.color.prependHashIfNecessaryHelper(a),goog.color.alpha.normalizeAlphaHex_(a).substring(d,f);throw Error(a+" is not a valid 8-hex color string");};goog.color.alpha.extractHexColor=function(a){return goog.color.alpha.extractColor_(a,0,7)};
goog.color.alpha.extractAlpha=function(a){return goog.color.alpha.extractColor_(a,7,9)};goog.color.alpha.hexQuadrupletRe_=/#(.)(.)(.)(.)/;goog.color.alpha.normalizeAlphaHex_=function(a){if(!goog.color.alpha.isValidAlphaHexColor_(a))throw Error("'"+a+"' is not a valid alpha hex color");5==a.length&&(a=a.replace(goog.color.alpha.hexQuadrupletRe_,"#$1$1$2$2$3$3$4$4"));return a.toLowerCase()};
goog.color.alpha.hexToRgba=function(a){a=goog.color.alpha.normalizeAlphaHex_(a);const d=parseInt(a.substr(1,2),16),f=parseInt(a.substr(3,2),16),h=parseInt(a.substr(5,2),16);a=parseInt(a.substr(7,2),16);return[d,f,h,a/255]};goog.color.alpha.rgbaToHex=function(a,d,f,h){const l=Math.floor(255*h);if(isNaN(l)||0>l||255<l)throw Error('"('+a+","+d+","+f+","+h+'") is not a valid RGBA color');h=goog.color.prependZeroIfNecessaryHelper(l.toString(16));return goog.color.rgbToHex(a,d,f)+h};
goog.color.alpha.hslaToHex=function(a,d,f,h){const l=Math.floor(255*h);if(isNaN(l)||0>l||255<l)throw Error('"('+a+","+d+","+f+","+h+'") is not a valid HSLA color');h=goog.color.prependZeroIfNecessaryHelper(l.toString(16));return goog.color.hslToHex(a,d/100,f/100)+h};goog.color.alpha.rgbaArrayToHex=function(a){return goog.color.alpha.rgbaToHex(a[0],a[1],a[2],a[3])};
goog.color.alpha.rgbaToRgbaStyle=function(a,d,f,h){if(isNaN(a)||0>a||255<a||isNaN(d)||0>d||255<d||isNaN(f)||0>f||255<f||isNaN(h)||0>h||1<h)throw Error('"('+a+","+d+","+f+","+h+')" is not a valid RGBA color');return goog.color.alpha.rgbaStyle_([a,d,f,h])};goog.color.alpha.rgbaArrayToRgbaStyle=function(a){return goog.color.alpha.rgbaToRgbaStyle(a[0],a[1],a[2],a[3])};goog.color.alpha.hslaArrayToHex=function(a){return goog.color.alpha.hslaToHex(a[0],a[1],a[2],a[3])};
goog.color.alpha.hslaArrayToRgbaStyle=function(a){return goog.color.alpha.hslaToRgbaStyle(a[0],a[1],a[2],a[3])};goog.color.alpha.hslaToRgbaStyle=function(a,d,f,h){return goog.color.alpha.rgbaStyle_(goog.color.alpha.hslaToRgba(a,d,f,h))};goog.color.alpha.hslaToRgba=function(a,d,f,h){return goog.color.hslToRgb(a,d/100,f/100).concat(h)};goog.color.alpha.rgbaToHsla=function(a,d,f,h){return goog.color.rgbToHsl(a,d,f).concat(h)};
goog.color.alpha.rgbaArrayToHsla=function(a){return goog.color.alpha.rgbaToHsla(a[0],a[1],a[2],a[3])};goog.color.alpha.validAlphaHexColorRe_=/^#(?:[0-9a-f]{4}){1,2}$/i;goog.color.alpha.isValidAlphaHexColor_=function(a){return goog.color.alpha.validAlphaHexColorRe_.test(a)};goog.color.alpha.normalizedAlphaHexColorRe_=/^#[0-9a-f]{8}$/;goog.color.alpha.isNormalizedAlphaHexColor_=function(a){return goog.color.alpha.normalizedAlphaHexColorRe_.test(a)};goog.color.alpha.re0_999_=/(0|[1-9]\d{0,2})/;
goog.color.alpha.re0_1_=/(0|1|0\.\d{1,10}|1\.0{1,10})/;goog.color.alpha.rgbaColorRe_=new RegExp("^\\s*(?:rgba)?\\("+goog.color.alpha.re0_999_.source+",\\s*"+goog.color.alpha.re0_999_.source+",\\s*"+goog.color.alpha.re0_999_.source+",\\s*"+goog.color.alpha.re0_1_.source+"\\)\\s*$","i");
goog.color.alpha.hslaColorRe_=new RegExp("^\\s*(?:hsla)?\\("+goog.color.alpha.re0_999_.source+",\\s*"+goog.color.alpha.re0_999_.source+"%,\\s*"+goog.color.alpha.re0_999_.source+"%,\\s*"+goog.color.alpha.re0_1_.source+"\\)\\s*$","i");goog.color.alpha.isValidRgbaColor_=function(a){var d=a.match(goog.color.alpha.rgbaColorRe_);if(d){a=Number(d[1]);const f=Number(d[2]),h=Number(d[3]);d=Number(d[4]);if(0<=a&&255>=a&&0<=f&&255>=f&&0<=h&&255>=h&&0<=d&&1>=d)return[a,f,h,d]}return[]};
goog.color.alpha.isValidHslaColor_=function(a){var d=a.match(goog.color.alpha.hslaColorRe_);if(d){a=Number(d[1]);const f=Number(d[2]),h=Number(d[3]);d=Number(d[4]);if(0<=a&&360>=a&&0<=f&&100>=f&&0<=h&&100>=h&&0<=d&&1>=d)return[a,f,h,d]}return[]};goog.color.alpha.rgbaStyle_=function(a){const d=a.slice(0);d[3]=Math.round(1E3*a[3])/1E3;return"rgba("+d.join(",")+")"};goog.color.alpha.hsvaToHex=function(a,d,f,h){h=Math.floor(255*h);return goog.color.hsvArrayToHex([a,d,f])+goog.color.prependZeroIfNecessaryHelper(h.toString(16))};
goog.color.alpha.hsvaArrayToHex=function(a){return goog.color.alpha.hsvaToHex(a[0],a[1],a[2],a[3])};goog.dom.HtmlElement=function(){};goog.dom.TagName=class{static cast(a,d){return a}constructor(){}toString(){}};goog.dom.TagName.A="A";goog.dom.TagName.ABBR="ABBR";goog.dom.TagName.ACRONYM="ACRONYM";goog.dom.TagName.ADDRESS="ADDRESS";goog.dom.TagName.APPLET="APPLET";goog.dom.TagName.AREA="AREA";goog.dom.TagName.ARTICLE="ARTICLE";goog.dom.TagName.ASIDE="ASIDE";goog.dom.TagName.AUDIO="AUDIO";goog.dom.TagName.B="B";goog.dom.TagName.BASE="BASE";goog.dom.TagName.BASEFONT="BASEFONT";goog.dom.TagName.BDI="BDI";goog.dom.TagName.BDO="BDO";
goog.dom.TagName.BIG="BIG";goog.dom.TagName.BLOCKQUOTE="BLOCKQUOTE";goog.dom.TagName.BODY="BODY";goog.dom.TagName.BR="BR";goog.dom.TagName.BUTTON="BUTTON";goog.dom.TagName.CANVAS="CANVAS";goog.dom.TagName.CAPTION="CAPTION";goog.dom.TagName.CENTER="CENTER";goog.dom.TagName.CITE="CITE";goog.dom.TagName.CODE="CODE";goog.dom.TagName.COL="COL";goog.dom.TagName.COLGROUP="COLGROUP";goog.dom.TagName.COMMAND="COMMAND";goog.dom.TagName.DATA="DATA";goog.dom.TagName.DATALIST="DATALIST";goog.dom.TagName.DD="DD";
goog.dom.TagName.DEL="DEL";goog.dom.TagName.DETAILS="DETAILS";goog.dom.TagName.DFN="DFN";goog.dom.TagName.DIALOG="DIALOG";goog.dom.TagName.DIR="DIR";goog.dom.TagName.DIV="DIV";goog.dom.TagName.DL="DL";goog.dom.TagName.DT="DT";goog.dom.TagName.EM="EM";goog.dom.TagName.EMBED="EMBED";goog.dom.TagName.FIELDSET="FIELDSET";goog.dom.TagName.FIGCAPTION="FIGCAPTION";goog.dom.TagName.FIGURE="FIGURE";goog.dom.TagName.FONT="FONT";goog.dom.TagName.FOOTER="FOOTER";goog.dom.TagName.FORM="FORM";
goog.dom.TagName.FRAME="FRAME";goog.dom.TagName.FRAMESET="FRAMESET";goog.dom.TagName.H1="H1";goog.dom.TagName.H2="H2";goog.dom.TagName.H3="H3";goog.dom.TagName.H4="H4";goog.dom.TagName.H5="H5";goog.dom.TagName.H6="H6";goog.dom.TagName.HEAD="HEAD";goog.dom.TagName.HEADER="HEADER";goog.dom.TagName.HGROUP="HGROUP";goog.dom.TagName.HR="HR";goog.dom.TagName.HTML="HTML";goog.dom.TagName.I="I";goog.dom.TagName.IFRAME="IFRAME";goog.dom.TagName.IMG="IMG";goog.dom.TagName.INPUT="INPUT";
goog.dom.TagName.INS="INS";goog.dom.TagName.ISINDEX="ISINDEX";goog.dom.TagName.KBD="KBD";goog.dom.TagName.KEYGEN="KEYGEN";goog.dom.TagName.LABEL="LABEL";goog.dom.TagName.LEGEND="LEGEND";goog.dom.TagName.LI="LI";goog.dom.TagName.LINK="LINK";goog.dom.TagName.MAIN="MAIN";goog.dom.TagName.MAP="MAP";goog.dom.TagName.MARK="MARK";goog.dom.TagName.MATH="MATH";goog.dom.TagName.MENU="MENU";goog.dom.TagName.MENUITEM="MENUITEM";goog.dom.TagName.META="META";goog.dom.TagName.METER="METER";
goog.dom.TagName.NAV="NAV";goog.dom.TagName.NOFRAMES="NOFRAMES";goog.dom.TagName.NOSCRIPT="NOSCRIPT";goog.dom.TagName.OBJECT="OBJECT";goog.dom.TagName.OL="OL";goog.dom.TagName.OPTGROUP="OPTGROUP";goog.dom.TagName.OPTION="OPTION";goog.dom.TagName.OUTPUT="OUTPUT";goog.dom.TagName.P="P";goog.dom.TagName.PARAM="PARAM";goog.dom.TagName.PICTURE="PICTURE";goog.dom.TagName.PRE="PRE";goog.dom.TagName.PROGRESS="PROGRESS";goog.dom.TagName.Q="Q";goog.dom.TagName.RP="RP";goog.dom.TagName.RT="RT";
goog.dom.TagName.RTC="RTC";goog.dom.TagName.RUBY="RUBY";goog.dom.TagName.S="S";goog.dom.TagName.SAMP="SAMP";goog.dom.TagName.SCRIPT="SCRIPT";goog.dom.TagName.SECTION="SECTION";goog.dom.TagName.SELECT="SELECT";goog.dom.TagName.SMALL="SMALL";goog.dom.TagName.SOURCE="SOURCE";goog.dom.TagName.SPAN="SPAN";goog.dom.TagName.STRIKE="STRIKE";goog.dom.TagName.STRONG="STRONG";goog.dom.TagName.STYLE="STYLE";goog.dom.TagName.SUB="SUB";goog.dom.TagName.SUMMARY="SUMMARY";goog.dom.TagName.SUP="SUP";
goog.dom.TagName.SVG="SVG";goog.dom.TagName.TABLE="TABLE";goog.dom.TagName.TBODY="TBODY";goog.dom.TagName.TD="TD";goog.dom.TagName.TEMPLATE="TEMPLATE";goog.dom.TagName.TEXTAREA="TEXTAREA";goog.dom.TagName.TFOOT="TFOOT";goog.dom.TagName.TH="TH";goog.dom.TagName.THEAD="THEAD";goog.dom.TagName.TIME="TIME";goog.dom.TagName.TITLE="TITLE";goog.dom.TagName.TR="TR";goog.dom.TagName.TRACK="TRACK";goog.dom.TagName.TT="TT";goog.dom.TagName.U="U";goog.dom.TagName.UL="UL";goog.dom.TagName.VAR="VAR";
goog.dom.TagName.VIDEO="VIDEO";goog.dom.TagName.WBR="WBR";goog.debug.entryPointRegistry={};goog.debug.entryPointRegistry.EntryPointMonitor=function(){};goog.debug.EntryPointMonitor=goog.debug.entryPointRegistry.EntryPointMonitor;goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=!1;
goog.debug.entryPointRegistry.register=function(a){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=a;if(goog.debug.entryPointRegistry.monitorsMayExist_)for(var d=goog.debug.entryPointRegistry.monitors_,f=0;f<d.length;f++)a(goog.bind(d[f].wrap,d[f]))};
goog.debug.entryPointRegistry.monitorAll=function(a){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var d=goog.bind(a.wrap,a),f=0;f<goog.debug.entryPointRegistry.refList_.length;f++)goog.debug.entryPointRegistry.refList_[f](d);goog.debug.entryPointRegistry.monitors_.push(a)};
goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(a){var d=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(a==d[d.length-1],"Only the most recent monitor can be unwrapped.");a=goog.bind(a.unwrap,a);for(var f=0;f<goog.debug.entryPointRegistry.refList_.length;f++)goog.debug.entryPointRegistry.refList_[f](a);d.length--};goog.debug.errorcontext={};goog.debug.errorcontext.addErrorContext=function(a,d,f){a[goog.debug.errorcontext.CONTEXT_KEY_]||(a[goog.debug.errorcontext.CONTEXT_KEY_]={});a[goog.debug.errorcontext.CONTEXT_KEY_][d]=f};goog.debug.errorcontext.getErrorContext=function(a){return a[goog.debug.errorcontext.CONTEXT_KEY_]||{}};goog.debug.errorcontext.CONTEXT_KEY_="__closure__error__context__984382";goog.debug.LOGGING_ENABLED=goog.DEBUG;goog.debug.FORCE_SLOPPY_STACKS=!1;goog.debug.CHECK_FOR_THROWN_EVENT=!1;goog.debug.catchErrors=function(a,d,f){f=f||goog.global;var h=f.onerror,l=!!d;f.onerror=function(m,p,q,u,y){h&&h(m,p,q,u,y);a({message:m,fileName:p,line:q,lineNumber:q,col:u,error:y});return l}};
goog.debug.expose=function(a,d){if("undefined"==typeof a)return"undefined";if(null==a)return"NULL";var f=[],h;for(h in a)if(d||"function"!==typeof a[h]){var l=h+" = ";try{l+=a[h]}catch(m){l+="*** "+m+" ***"}f.push(l)}return f.join("\n")};
goog.debug.deepExpose=function(a,d){var f=[],h=[],l={},m=function(p,q){var u=q+"  ";try{if(void 0===p)f.push("undefined");else if(null===p)f.push("NULL");else if("string"===typeof p)f.push('"'+p.replace(/\n/g,"\n"+q)+'"');else if("function"===typeof p)f.push(String(p).replace(/\n/g,"\n"+q));else if(goog.isObject(p)){goog.hasUid(p)||h.push(p);var y=goog.getUid(p);if(l[y])f.push("*** reference loop detected (id="+y+") ***");else{l[y]=!0;f.push("{");for(var C in p)if(d||"function"!==typeof p[C])f.push("\n"),
f.push(u),f.push(C+" = "),m(p[C],u);f.push("\n"+q+"}");delete l[y]}}else f.push(p)}catch(K){f.push("*** "+K+" ***")}};m(a,"");for(a=0;a<h.length;a++)goog.removeUid(h[a]);return f.join("")};goog.debug.exposeArray=function(a){for(var d=[],f=0;f<a.length;f++)Array.isArray(a[f])?d.push(goog.debug.exposeArray(a[f])):d.push(a[f]);return"[ "+d.join(", ")+" ]"};
goog.debug.normalizeErrorObject=function(a){var d=goog.getObjectByName("window.location.href");null==a&&(a='Unknown Error of type "null/undefined"');if("string"===typeof a)return{message:a,name:"Unknown error",lineNumber:"Not available",fileName:d,stack:"Not available"};var f=!1;try{var h=a.lineNumber||a.line||"Not available"}catch(p){h="Not available",f=!0}try{var l=a.fileName||a.filename||a.sourceURL||goog.global.$googDebugFname||d}catch(p){l="Not available",f=!0}d=goog.debug.serializeErrorStack_(a);
if(!(!f&&a.lineNumber&&a.fileName&&a.stack&&a.message&&a.name)){f=a.message;if(null==f){if(a.constructor&&a.constructor instanceof Function){var m=a.constructor.name?a.constructor.name:goog.debug.getFunctionName(a.constructor);f='Unknown Error of type "'+m+'"';if(goog.debug.CHECK_FOR_THROWN_EVENT&&"Event"==m)try{f=f+' with Event.type "'+(a.type||"")+'"'}catch(p){}}else f="Unknown Error of unknown type";"function"===typeof a.toString&&Object.prototype.toString!==a.toString&&(f+=": "+a.toString())}return{message:f,
name:a.name||"UnknownError",lineNumber:h,fileName:l,stack:d||"Not available"}}a.stack=d;return{message:a.message,name:a.name,lineNumber:a.lineNumber,fileName:a.fileName,stack:a.stack}};goog.debug.serializeErrorStack_=function(a,d){d||={};d[goog.debug.serializeErrorAsKey_(a)]=!0;var f=a.stack||"";(a=a.cause)&&!d[goog.debug.serializeErrorAsKey_(a)]&&(f+="\nCaused by: ",a.stack&&0==a.stack.indexOf(a.toString())||(f+="string"===typeof a?a:a.message+"\n"),f+=goog.debug.serializeErrorStack_(a,d));return f};
goog.debug.serializeErrorAsKey_=function(a){var d="";"function"===typeof a.toString&&(d=""+a);return d+a.stack};goog.debug.enhanceError=function(a,d){a instanceof Error||(a=Error(a),Error.captureStackTrace&&Error.captureStackTrace(a,goog.debug.enhanceError));a.stack||(a.stack=goog.debug.getStacktrace(goog.debug.enhanceError));if(d){for(var f=0;a["message"+f];)++f;a["message"+f]=String(d)}return a};
goog.debug.enhanceErrorWithContext=function(a,d){a=goog.debug.enhanceError(a);if(d)for(var f in d)goog.debug.errorcontext.addErrorContext(a,f,d[f]);return a};
goog.debug.getStacktraceSimple=function(a){if(!goog.debug.FORCE_SLOPPY_STACKS){var d=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(d)return d}d=[];for(var f=arguments.callee.caller,h=0;f&&(!a||h<a);){d.push(goog.debug.getFunctionName(f));d.push("()\n");try{f=f.caller}catch(l){d.push("[exception trying to get caller]\n");break}h++;if(h>=goog.debug.MAX_STACK_DEPTH){d.push("[...long stack...]");break}}a&&h>=a?d.push("[...reached max depth limit...]"):d.push("[end]");return d.join("")};
goog.debug.MAX_STACK_DEPTH=50;goog.debug.getNativeStackTrace_=function(a){var d=Error();if(Error.captureStackTrace)return Error.captureStackTrace(d,a),String(d.stack);try{throw d;}catch(f){d=f}return(a=d.stack)?String(a):null};goog.debug.getStacktrace=function(a){var d;goog.debug.FORCE_SLOPPY_STACKS||(d=goog.debug.getNativeStackTrace_(a||goog.debug.getStacktrace));d||=goog.debug.getStacktraceHelper_(a||arguments.callee.caller,[]);return d};
goog.debug.getStacktraceHelper_=function(a,d){var f=[];if(module$contents$goog$array_contains(d,a))f.push("[...circular reference...]");else if(a&&d.length<goog.debug.MAX_STACK_DEPTH){f.push(goog.debug.getFunctionName(a)+"(");for(var h=a.arguments,l=0;h&&l<h.length;l++){0<l&&f.push(", ");var m=h[l];switch(typeof m){case "object":m=m?"object":"null";break;case "string":break;case "number":m=String(m);break;case "boolean":m=m?"true":"false";break;case "function":m=(m=goog.debug.getFunctionName(m))?
m:"[fn]";break;default:m=typeof m}40<m.length&&(m=m.substr(0,40)+"...");f.push(m)}d.push(a);f.push(")\n");try{f.push(goog.debug.getStacktraceHelper_(a.caller,d))}catch(p){f.push("[exception trying to get caller]\n")}}else a?f.push("[...long stack...]"):f.push("[end]");return f.join("")};
goog.debug.getFunctionName=function(a){if(goog.debug.fnNameCache_[a])return goog.debug.fnNameCache_[a];a=String(a);if(!goog.debug.fnNameCache_[a]){var d=/function\s+([^\(]+)/m.exec(a);goog.debug.fnNameCache_[a]=d?d[1]:"[Anonymous]"}return goog.debug.fnNameCache_[a]};goog.debug.makeWhitespaceVisible=function(a){return a.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};
goog.debug.runtimeType=function(a){return a instanceof Function?a.displayName||a.name||"unknown type name":a instanceof Object?a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a):null===a?"null":typeof a};goog.debug.fnNameCache_={};goog.debug.freezeInternal_=goog.DEBUG&&Object.freeze||function(a){return a};goog.debug.freeze=function(a){return goog.debug.freezeInternal_(a)};goog.disposable={};goog.disposable.IDisposable=function(){};goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod;goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod;function module$contents$goog$dispose_dispose(a){a&&"function"==typeof a.dispose&&a.dispose()}goog.dispose=module$contents$goog$dispose_dispose;function module$contents$goog$disposeAll_disposeAll(a){for(let d=0,f=arguments.length;d<f;++d){const h=arguments[d];goog.isArrayLike(h)?module$contents$goog$disposeAll_disposeAll.apply(null,h):module$contents$goog$dispose_dispose(h)}}goog.disposeAll=module$contents$goog$disposeAll_disposeAll;goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this);this.disposed_=this.disposed_;this.onDisposeCallbacks_=this.onDisposeCallbacks_};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.Disposable.MONITORING_MODE=0;goog.Disposable.INCLUDE_STACK_ON_CREATION=!0;goog.Disposable.instances_={};
goog.Disposable.getUndisposedObjects=function(){var a=[],d;for(d in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(d)&&a.push(goog.Disposable.instances_[Number(d)]);return a};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=!1;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;
goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var a=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(a))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&
this.onDisposeCallbacks_&&0<this.onDisposeCallbacks_.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete goog.Disposable.instances_[a]}};goog.Disposable.prototype.registerDisposable=function(a){this.addOnDisposeCallback(goog.partial(module$contents$goog$dispose_dispose,a))};
goog.Disposable.prototype.addOnDisposeCallback=function(a,d){this.disposed_?void 0!==d?a.call(d):a():(this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(void 0!==d?goog.bind(a,d):a))};goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()};goog.Disposable.isDisposed=function(a){return a&&"function"==typeof a.isDisposed?a.isDisposed():!1};goog.events={};goog.events.EventId=function(a){this.id=a};goog.events.EventId.prototype.toString=function(){return this.id};goog.events.Event=function(a,d){this.type=a instanceof goog.events.EventId?String(a):a;this.currentTarget=this.target=d;this.defaultPrevented=this.propagationStopped_=!1};goog.events.Event.prototype.hasPropagationStopped=function(){return this.propagationStopped_};goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0};goog.events.Event.stopPropagation=function(a){a.stopPropagation()};
goog.events.Event.preventDefault=function(a){a.preventDefault()};const module$contents$goog$events$BrowserFeature_purify=a=>({valueOf:a}).valueOf();
goog.events.BrowserFeature={HAS_W3C_BUTTON:!0,HAS_W3C_EVENT_SUPPORT:!0,SET_KEY_CODE_TO_PREVENT_DEFAULT:!1,HAS_NAVIGATOR_ONLINE_PROPERTY:!0,HAS_HTML5_NETWORK_EVENT_SUPPORT:!0,HTML5_NETWORK_EVENTS_FIRE_ON_BODY:!1,TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.maxTouchPoints&&!goog.global.navigator.msMaxTouchPoints),POINTER_EVENTS:"PointerEvent"in goog.global,MSPOINTER_EVENTS:"MSPointerEvent"in
goog.global&&!(!goog.global.navigator||!goog.global.navigator.msPointerEnabled),PASSIVE_EVENTS:module$contents$goog$events$BrowserFeature_purify(function(){if(!goog.global.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{goog.global.addEventListener("test",goog.nullFunction,d),goog.global.removeEventListener("test",goog.nullFunction,d)}catch(f){}return a})};var module$exports$goog$labs$userAgent={};const module$contents$goog$labs$userAgent_USE_CLIENT_HINTS_OVERRIDE="",module$contents$goog$labs$userAgent_USE_CLIENT_HINTS=!1;module$exports$goog$labs$userAgent.USE_CLIENT_HINTS=(()=>{const a=module$contents$goog$labs$userAgent_USE_CLIENT_HINTS_OVERRIDE?goog.getObjectByName(module$contents$goog$labs$userAgent_USE_CLIENT_HINTS_OVERRIDE):null;return null!=a?a:module$contents$goog$labs$userAgent_USE_CLIENT_HINTS})();goog.string={};goog.string.internal={};goog.string.internal.startsWith=function(a,d){return 0==a.lastIndexOf(d,0)};goog.string.internal.endsWith=function(a,d){const f=a.length-d.length;return 0<=f&&a.indexOf(d,f)==f};goog.string.internal.caseInsensitiveStartsWith=function(a,d){return 0==goog.string.internal.caseInsensitiveCompare(d,a.substr(0,d.length))};goog.string.internal.caseInsensitiveEndsWith=function(a,d){return 0==goog.string.internal.caseInsensitiveCompare(d,a.substr(a.length-d.length,d.length))};
goog.string.internal.caseInsensitiveEquals=function(a,d){return a.toLowerCase()==d.toLowerCase()};goog.string.internal.isEmptyOrWhitespace=function(a){return/^[\s\xa0]*$/.test(a)};goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};goog.string.internal.caseInsensitiveCompare=function(a,d){a=String(a).toLowerCase();d=String(d).toLowerCase();return a<d?-1:a==d?0:1};
goog.string.internal.newLineToBr=function(a,d){return a.replace(/(\r\n|\r|\n)/g,d?"<br />":"<br>")};
goog.string.internal.htmlEscape=function(a,d){if(d)a=a.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(goog.string.internal.AMP_RE_,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(goog.string.internal.LT_RE_,
"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(goog.string.internal.GT_RE_,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(goog.string.internal.QUOT_RE_,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(goog.string.internal.NULL_RE_,"&#0;"))}return a};goog.string.internal.AMP_RE_=/&/g;goog.string.internal.LT_RE_=/</g;goog.string.internal.GT_RE_=/>/g;goog.string.internal.QUOT_RE_=/"/g;goog.string.internal.SINGLE_QUOTE_RE_=/'/g;
goog.string.internal.NULL_RE_=/\x00/g;goog.string.internal.ALL_RE_=/[\x00&<>"']/;goog.string.internal.whitespaceEscape=function(a,d){return goog.string.internal.newLineToBr(a.replace(/  /g," &#160;"),d)};goog.string.internal.contains=function(a,d){return-1!=a.indexOf(d)};goog.string.internal.caseInsensitiveContains=function(a,d){return goog.string.internal.contains(a.toLowerCase(),d.toLowerCase())};
goog.string.internal.compareVersions=function(a,d){var f=0;a=goog.string.internal.trim(String(a)).split(".");d=goog.string.internal.trim(String(d)).split(".");const h=Math.max(a.length,d.length);for(let p=0;0==f&&p<h;p++){var l=a[p]||"",m=d[p]||"";do{l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""];m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""];if(0==l[0].length&&0==m[0].length)break;f=0==l[1].length?0:parseInt(l[1],10);const q=0==m[1].length?0:parseInt(m[1],10);f=goog.string.internal.compareElements_(f,q)||
goog.string.internal.compareElements_(0==l[2].length,0==m[2].length)||goog.string.internal.compareElements_(l[2],m[2]);l=l[3];m=m[3]}while(0==f)}return f};goog.string.internal.compareElements_=function(a,d){return a<d?-1:a>d?1:0};goog.labs={};goog.labs.userAgent={};goog.labs.userAgent.util={};const module$contents$goog$labs$userAgent$util_ASSUME_CLIENT_HINTS_SUPPORT=!1;function module$contents$goog$labs$userAgent$util_getNativeUserAgentString(){var a=module$contents$goog$labs$userAgent$util_getNavigator();return a&&(a=a.userAgent)?a:""}
function module$contents$goog$labs$userAgent$util_getNativeUserAgentData(){if(!module$exports$goog$labs$userAgent.USE_CLIENT_HINTS)return null;const a=module$contents$goog$labs$userAgent$util_getNavigator();return a?a.userAgentData||null:null}function module$contents$goog$labs$userAgent$util_getNavigator(){return goog.global.navigator}let module$contents$goog$labs$userAgent$util_userAgentInternal=null,module$contents$goog$labs$userAgent$util_userAgentDataInternal=module$contents$goog$labs$userAgent$util_getNativeUserAgentData();
function module$contents$goog$labs$userAgent$util_setUserAgent(a){module$contents$goog$labs$userAgent$util_userAgentInternal="string"===typeof a?a:module$contents$goog$labs$userAgent$util_getNativeUserAgentString()}function module$contents$goog$labs$userAgent$util_getUserAgent(){return null==module$contents$goog$labs$userAgent$util_userAgentInternal?module$contents$goog$labs$userAgent$util_getNativeUserAgentString():module$contents$goog$labs$userAgent$util_userAgentInternal}
function module$contents$goog$labs$userAgent$util_setUserAgentData(a){module$contents$goog$labs$userAgent$util_userAgentDataInternal=a}function module$contents$goog$labs$userAgent$util_resetUserAgentData(){module$contents$goog$labs$userAgent$util_userAgentDataInternal=module$contents$goog$labs$userAgent$util_getNativeUserAgentData()}function module$contents$goog$labs$userAgent$util_getUserAgentData(){return module$contents$goog$labs$userAgent$util_userAgentDataInternal}
function module$contents$goog$labs$userAgent$util_matchUserAgentDataBrand(a){const d=module$contents$goog$labs$userAgent$util_getUserAgentData();return d?d.brands.some(({brand:f})=>f&&(0,goog.string.internal.contains)(f,a)):!1}function module$contents$goog$labs$userAgent$util_matchUserAgent(a){const d=module$contents$goog$labs$userAgent$util_getUserAgent();return(0,goog.string.internal.contains)(d,a)}
function module$contents$goog$labs$userAgent$util_matchUserAgentIgnoreCase(a){const d=module$contents$goog$labs$userAgent$util_getUserAgent();return(0,goog.string.internal.caseInsensitiveContains)(d,a)}function module$contents$goog$labs$userAgent$util_extractVersionTuples(a){const d=RegExp("([A-Z][\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),f=[];let h;for(;h=d.exec(a);)f.push([h[1],h[2],h[3]||void 0]);return f}goog.labs.userAgent.util.ASSUME_CLIENT_HINTS_SUPPORT=module$contents$goog$labs$userAgent$util_ASSUME_CLIENT_HINTS_SUPPORT;
goog.labs.userAgent.util.extractVersionTuples=module$contents$goog$labs$userAgent$util_extractVersionTuples;goog.labs.userAgent.util.getNativeUserAgentString=module$contents$goog$labs$userAgent$util_getNativeUserAgentString;goog.labs.userAgent.util.getUserAgent=module$contents$goog$labs$userAgent$util_getUserAgent;goog.labs.userAgent.util.getUserAgentData=module$contents$goog$labs$userAgent$util_getUserAgentData;goog.labs.userAgent.util.matchUserAgent=module$contents$goog$labs$userAgent$util_matchUserAgent;
goog.labs.userAgent.util.matchUserAgentDataBrand=module$contents$goog$labs$userAgent$util_matchUserAgentDataBrand;goog.labs.userAgent.util.matchUserAgentIgnoreCase=module$contents$goog$labs$userAgent$util_matchUserAgentIgnoreCase;goog.labs.userAgent.util.resetUserAgentData=module$contents$goog$labs$userAgent$util_resetUserAgentData;goog.labs.userAgent.util.setUserAgent=module$contents$goog$labs$userAgent$util_setUserAgent;goog.labs.userAgent.util.setUserAgentData=module$contents$goog$labs$userAgent$util_setUserAgentData;var module$exports$goog$labs$userAgent$highEntropy$highEntropyValue={AsyncValue:class{getIfLoaded(){}load(){}},HighEntropyValue:class{constructor(a){this.key_=a;this.promise_=this.value_=void 0;this.pending_=!1}getIfLoaded(){if(module$contents$goog$labs$userAgent$util_getUserAgentData())return this.value_}async load(){const a=module$contents$goog$labs$userAgent$util_getUserAgentData();if(a)return this.promise_||(this.pending_=!0,this.promise_=(async()=>{try{return this.value_=(await a.getHighEntropyValues([this.key_]))[this.key_]}finally{this.pending_=
!1}})()),await this.promise_}resetForTesting(){if(this.pending_)throw Error("Unsafe call to resetForTesting");this.value_=this.promise_=void 0;this.pending_=!1}},Version:class{constructor(a){this.versionString_=a}toVersionStringForLogging(){return this.versionString_}isAtLeast(a){return 0<=(0,goog.string.internal.compareVersions)(this.versionString_,a)}}};var module$exports$goog$labs$userAgent$highEntropy$highEntropyData={};let module$contents$goog$labs$userAgent$highEntropy$highEntropyData_fullVersionListAvailable=!1;function module$contents$goog$labs$userAgent$highEntropy$highEntropyData_hasFullVersionList(){return module$contents$goog$labs$userAgent$highEntropy$highEntropyData_fullVersionListAvailable}module$exports$goog$labs$userAgent$highEntropy$highEntropyData.hasFullVersionList=module$contents$goog$labs$userAgent$highEntropy$highEntropyData_hasFullVersionList;
function module$contents$goog$labs$userAgent$highEntropy$highEntropyData_setHasFullVersionListForTesting(a){module$contents$goog$labs$userAgent$highEntropy$highEntropyData_fullVersionListAvailable=a}module$exports$goog$labs$userAgent$highEntropy$highEntropyData.setHasFullVersionListForTesting=module$contents$goog$labs$userAgent$highEntropy$highEntropyData_setHasFullVersionListForTesting;module$exports$goog$labs$userAgent$highEntropy$highEntropyData.fullVersionList=new module$exports$goog$labs$userAgent$highEntropy$highEntropyValue.HighEntropyValue("fullVersionList");
module$exports$goog$labs$userAgent$highEntropy$highEntropyData.platformVersion=new module$exports$goog$labs$userAgent$highEntropy$highEntropyValue.HighEntropyValue("platformVersion");function module$contents$goog$labs$userAgent$highEntropy$highEntropyData_resetAllForTesting(){module$exports$goog$labs$userAgent$highEntropy$highEntropyData.fullVersionList.resetForTesting();module$exports$goog$labs$userAgent$highEntropy$highEntropyData.platformVersion.resetForTesting()}
module$exports$goog$labs$userAgent$highEntropy$highEntropyData.resetAllForTesting=module$contents$goog$labs$userAgent$highEntropy$highEntropyData_resetAllForTesting;goog.labs.userAgent.browser={};const module$contents$goog$labs$userAgent$browser_Brand={ANDROID_BROWSER:"Android Browser",CHROMIUM:"Chromium",EDGE:"Microsoft Edge",FIREFOX:"Firefox",IE:"Internet Explorer",OPERA:"Opera",SAFARI:"Safari",SILK:"Silk"};goog.labs.userAgent.browser.Brand=module$contents$goog$labs$userAgent$browser_Brand;
function module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand(){if(module$contents$goog$labs$userAgent$util_ASSUME_CLIENT_HINTS_SUPPORT)return!0;const a=module$contents$goog$labs$userAgent$util_getUserAgentData();return!!a&&0<a.brands.length}function module$contents$goog$labs$userAgent$browser_matchOpera(){return module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()?!1:module$contents$goog$labs$userAgent$util_matchUserAgent("Opera")}
function module$contents$goog$labs$userAgent$browser_matchIE(){return module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()?!1:module$contents$goog$labs$userAgent$util_matchUserAgent("Trident")||module$contents$goog$labs$userAgent$util_matchUserAgent("MSIE")}function module$contents$goog$labs$userAgent$browser_matchEdgeHtml(){return module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()?!1:module$contents$goog$labs$userAgent$util_matchUserAgent("Edge")}
function module$contents$goog$labs$userAgent$browser_matchEdgeChromium(){return module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()?module$contents$goog$labs$userAgent$util_matchUserAgentDataBrand(module$contents$goog$labs$userAgent$browser_Brand.EDGE):module$contents$goog$labs$userAgent$util_matchUserAgent("Edg/")}
function module$contents$goog$labs$userAgent$browser_matchOperaChromium(){return module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()?module$contents$goog$labs$userAgent$util_matchUserAgentDataBrand(module$contents$goog$labs$userAgent$browser_Brand.OPERA):module$contents$goog$labs$userAgent$util_matchUserAgent("OPR")}
function module$contents$goog$labs$userAgent$browser_matchFirefox(){return module$contents$goog$labs$userAgent$util_matchUserAgent("Firefox")||module$contents$goog$labs$userAgent$util_matchUserAgent("FxiOS")}
function module$contents$goog$labs$userAgent$browser_matchSafari(){return module$contents$goog$labs$userAgent$util_matchUserAgent("Safari")&&!(module$contents$goog$labs$userAgent$browser_matchChrome()||module$contents$goog$labs$userAgent$browser_matchCoast()||module$contents$goog$labs$userAgent$browser_matchOpera()||module$contents$goog$labs$userAgent$browser_matchEdgeHtml()||module$contents$goog$labs$userAgent$browser_matchEdgeChromium()||module$contents$goog$labs$userAgent$browser_matchOperaChromium()||
module$contents$goog$labs$userAgent$browser_matchFirefox()||module$contents$goog$labs$userAgent$browser_isSilk()||module$contents$goog$labs$userAgent$util_matchUserAgent("Android"))}function module$contents$goog$labs$userAgent$browser_matchCoast(){return module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()?!1:module$contents$goog$labs$userAgent$util_matchUserAgent("Coast")}
function module$contents$goog$labs$userAgent$browser_matchIosWebview(){return(module$contents$goog$labs$userAgent$util_matchUserAgent("iPad")||module$contents$goog$labs$userAgent$util_matchUserAgent("iPhone"))&&!module$contents$goog$labs$userAgent$browser_matchSafari()&&!module$contents$goog$labs$userAgent$browser_matchChrome()&&!module$contents$goog$labs$userAgent$browser_matchCoast()&&!module$contents$goog$labs$userAgent$browser_matchFirefox()&&module$contents$goog$labs$userAgent$util_matchUserAgent("AppleWebKit")}
function module$contents$goog$labs$userAgent$browser_matchChrome(){return module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()?module$contents$goog$labs$userAgent$util_matchUserAgentDataBrand(module$contents$goog$labs$userAgent$browser_Brand.CHROMIUM):(module$contents$goog$labs$userAgent$util_matchUserAgent("Chrome")||module$contents$goog$labs$userAgent$util_matchUserAgent("CriOS"))&&!module$contents$goog$labs$userAgent$browser_matchEdgeHtml()||module$contents$goog$labs$userAgent$browser_isSilk()}
function module$contents$goog$labs$userAgent$browser_matchAndroidBrowser(){return module$contents$goog$labs$userAgent$util_matchUserAgent("Android")&&!(module$contents$goog$labs$userAgent$browser_matchChrome()||module$contents$goog$labs$userAgent$browser_matchFirefox()||module$contents$goog$labs$userAgent$browser_matchOpera()||module$contents$goog$labs$userAgent$browser_isSilk())}const module$contents$goog$labs$userAgent$browser_isOpera=module$contents$goog$labs$userAgent$browser_matchOpera;
goog.labs.userAgent.browser.isOpera=module$contents$goog$labs$userAgent$browser_matchOpera;const module$contents$goog$labs$userAgent$browser_isIE=module$contents$goog$labs$userAgent$browser_matchIE;goog.labs.userAgent.browser.isIE=module$contents$goog$labs$userAgent$browser_matchIE;const module$contents$goog$labs$userAgent$browser_isEdge=module$contents$goog$labs$userAgent$browser_matchEdgeHtml;goog.labs.userAgent.browser.isEdge=module$contents$goog$labs$userAgent$browser_matchEdgeHtml;
const module$contents$goog$labs$userAgent$browser_isEdgeChromium=module$contents$goog$labs$userAgent$browser_matchEdgeChromium;goog.labs.userAgent.browser.isEdgeChromium=module$contents$goog$labs$userAgent$browser_matchEdgeChromium;const module$contents$goog$labs$userAgent$browser_isOperaChromium=module$contents$goog$labs$userAgent$browser_matchOperaChromium;goog.labs.userAgent.browser.isOperaChromium=module$contents$goog$labs$userAgent$browser_matchOperaChromium;
const module$contents$goog$labs$userAgent$browser_isFirefox=module$contents$goog$labs$userAgent$browser_matchFirefox;goog.labs.userAgent.browser.isFirefox=module$contents$goog$labs$userAgent$browser_matchFirefox;const module$contents$goog$labs$userAgent$browser_isSafari=module$contents$goog$labs$userAgent$browser_matchSafari;goog.labs.userAgent.browser.isSafari=module$contents$goog$labs$userAgent$browser_matchSafari;const module$contents$goog$labs$userAgent$browser_isCoast=module$contents$goog$labs$userAgent$browser_matchCoast;
goog.labs.userAgent.browser.isCoast=module$contents$goog$labs$userAgent$browser_matchCoast;const module$contents$goog$labs$userAgent$browser_isIosWebview=module$contents$goog$labs$userAgent$browser_matchIosWebview;goog.labs.userAgent.browser.isIosWebview=module$contents$goog$labs$userAgent$browser_matchIosWebview;const module$contents$goog$labs$userAgent$browser_isChrome=module$contents$goog$labs$userAgent$browser_matchChrome;goog.labs.userAgent.browser.isChrome=module$contents$goog$labs$userAgent$browser_matchChrome;
const module$contents$goog$labs$userAgent$browser_isAndroidBrowser=module$contents$goog$labs$userAgent$browser_matchAndroidBrowser;goog.labs.userAgent.browser.isAndroidBrowser=module$contents$goog$labs$userAgent$browser_matchAndroidBrowser;function module$contents$goog$labs$userAgent$browser_isSilk(){return module$contents$goog$labs$userAgent$util_matchUserAgent("Silk")}goog.labs.userAgent.browser.isSilk=module$contents$goog$labs$userAgent$browser_isSilk;
function module$contents$goog$labs$userAgent$browser_createVersionMap(a){const d={};a.forEach(f=>{d[f[0]]=f[1]});return f=>d[f.find(h=>h in d)]||""}
function module$contents$goog$labs$userAgent$browser_getVersion(){var a=module$contents$goog$labs$userAgent$util_getUserAgent();if(module$contents$goog$labs$userAgent$browser_matchIE())return module$contents$goog$labs$userAgent$browser_getIEVersion(a);a=module$contents$goog$labs$userAgent$util_extractVersionTuples(a);const d=module$contents$goog$labs$userAgent$browser_createVersionMap(a);return module$contents$goog$labs$userAgent$browser_matchOpera()?d(["Version","Opera"]):module$contents$goog$labs$userAgent$browser_matchEdgeHtml()?
d(["Edge"]):module$contents$goog$labs$userAgent$browser_matchEdgeChromium()?d(["Edg"]):module$contents$goog$labs$userAgent$browser_isSilk()?d(["Silk"]):module$contents$goog$labs$userAgent$browser_matchChrome()?d(["Chrome","CriOS","HeadlessChrome"]):(a=a[2])&&a[1]||""}goog.labs.userAgent.browser.getVersion=module$contents$goog$labs$userAgent$browser_getVersion;
function module$contents$goog$labs$userAgent$browser_isVersionOrHigher(a){return 0<=(0,goog.string.internal.compareVersions)(module$contents$goog$labs$userAgent$browser_getVersion(),a)}goog.labs.userAgent.browser.isVersionOrHigher=module$contents$goog$labs$userAgent$browser_isVersionOrHigher;
function module$contents$goog$labs$userAgent$browser_getIEVersion(a){var d=/rv: *([\d\.]*)/.exec(a);if(d&&d[1])return d[1];d="";const f=/MSIE +([\d\.]+)/.exec(a);if(f&&f[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==f[1])if(a&&a[1])switch(a[1]){case "4.0":d="8.0";break;case "5.0":d="9.0";break;case "6.0":d="10.0";break;case "7.0":d="11.0"}else d="7.0";else d=f[1];return d}
function module$contents$goog$labs$userAgent$browser_getFullVersionFromUserAgentString(a){var d=module$contents$goog$labs$userAgent$util_getUserAgent();if(a===module$contents$goog$labs$userAgent$browser_Brand.IE)return module$contents$goog$labs$userAgent$browser_matchIE()?module$contents$goog$labs$userAgent$browser_getIEVersion(d):"";d=module$contents$goog$labs$userAgent$util_extractVersionTuples(d);const f=module$contents$goog$labs$userAgent$browser_createVersionMap(d);switch(a){case module$contents$goog$labs$userAgent$browser_Brand.OPERA:if(module$contents$goog$labs$userAgent$browser_matchOpera())return f(["Version",
"Opera"]);if(module$contents$goog$labs$userAgent$browser_matchOperaChromium())return f(["OPR"]);break;case module$contents$goog$labs$userAgent$browser_Brand.EDGE:if(module$contents$goog$labs$userAgent$browser_matchEdgeHtml())return f(["Edge"]);if(module$contents$goog$labs$userAgent$browser_matchEdgeChromium())return f(["Edg"]);break;case module$contents$goog$labs$userAgent$browser_Brand.CHROMIUM:if(module$contents$goog$labs$userAgent$browser_matchChrome())return f(["Chrome","CriOS","HeadlessChrome"])}return a===
module$contents$goog$labs$userAgent$browser_Brand.FIREFOX&&module$contents$goog$labs$userAgent$browser_matchFirefox()||a===module$contents$goog$labs$userAgent$browser_Brand.SAFARI&&module$contents$goog$labs$userAgent$browser_matchSafari()||a===module$contents$goog$labs$userAgent$browser_Brand.ANDROID_BROWSER&&module$contents$goog$labs$userAgent$browser_matchAndroidBrowser()||a===module$contents$goog$labs$userAgent$browser_Brand.SILK&&module$contents$goog$labs$userAgent$browser_isSilk()?(a=d[2])&&
a[1]||"":""}
function module$contents$goog$labs$userAgent$browser_versionOf(a){if(module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()&&a!==module$contents$goog$labs$userAgent$browser_Brand.SILK){var d=module$contents$goog$labs$userAgent$util_getUserAgentData().brands.find(({brand:f})=>f===a);if(!d||!d.version)return NaN;d=d.version.split(".")}else{d=module$contents$goog$labs$userAgent$browser_getFullVersionFromUserAgentString(a);if(""===d)return NaN;d=d.split(".")}return 0===d.length?NaN:Number(d[0])}
goog.labs.userAgent.browser.versionOf=module$contents$goog$labs$userAgent$browser_versionOf;function module$contents$goog$labs$userAgent$browser_isAtLeast(a,d){goog.asserts.assert(Math.floor(d)===d,"Major version must be an integer");return module$contents$goog$labs$userAgent$browser_versionOf(a)>=d}goog.labs.userAgent.browser.isAtLeast=module$contents$goog$labs$userAgent$browser_isAtLeast;
function module$contents$goog$labs$userAgent$browser_isAtMost(a,d){goog.asserts.assert(Math.floor(d)===d,"Major version must be an integer");return module$contents$goog$labs$userAgent$browser_versionOf(a)<=d}goog.labs.userAgent.browser.isAtMost=module$contents$goog$labs$userAgent$browser_isAtMost;
class module$contents$goog$labs$userAgent$browser_HighEntropyBrandVersion{constructor(a){this.brand_=a}getIfLoaded(){var a=module$exports$goog$labs$userAgent$highEntropy$highEntropyData.fullVersionList.getIfLoaded();if(void 0!==a)return a=a.find(({brand:d})=>this.brand_===d),goog.asserts.assertExists(a),new module$exports$goog$labs$userAgent$highEntropy$highEntropyValue.Version(a.version)}async load(){const a=(await module$exports$goog$labs$userAgent$highEntropy$highEntropyData.fullVersionList.load()).find(({brand:d})=>
this.brand_===d);goog.asserts.assertExists(a);return new module$exports$goog$labs$userAgent$highEntropy$highEntropyValue.Version(a.version)}}class module$contents$goog$labs$userAgent$browser_UserAgentStringFallbackBrandVersion{constructor(a){this.version_=new module$exports$goog$labs$userAgent$highEntropy$highEntropyValue.Version(a)}getIfLoaded(){return this.version_}async load(){return this.version_}}
async function module$contents$goog$labs$userAgent$browser_loadFullVersions(){module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()&&module$contents$goog$labs$userAgent$highEntropy$highEntropyData_hasFullVersionList()&&await module$exports$goog$labs$userAgent$highEntropy$highEntropyData.fullVersionList.load()}goog.labs.userAgent.browser.loadFullVersions=module$contents$goog$labs$userAgent$browser_loadFullVersions;
function module$contents$goog$labs$userAgent$browser_fullVersionOf(a){if(module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()&&module$contents$goog$labs$userAgent$highEntropy$highEntropyData_hasFullVersionList())return module$contents$goog$labs$userAgent$util_getUserAgentData().brands.find(({brand:f})=>f===a)?new module$contents$goog$labs$userAgent$browser_HighEntropyBrandVersion(a):void 0;const d=module$contents$goog$labs$userAgent$browser_getFullVersionFromUserAgentString(a);return""===
d?void 0:new module$contents$goog$labs$userAgent$browser_UserAgentStringFallbackBrandVersion(d)}goog.labs.userAgent.browser.fullVersionOf=module$contents$goog$labs$userAgent$browser_fullVersionOf;
function module$contents$goog$labs$userAgent$browser_getVersionStringForLogging(a){if(module$contents$goog$labs$userAgent$browser_useUserAgentDataBrand()){var d=module$contents$goog$labs$userAgent$browser_fullVersionOf(a);if(d){if(d=d.getIfLoaded())return d.toVersionStringForLogging();d=module$contents$goog$labs$userAgent$util_getUserAgentData().brands.find(({brand:f})=>f===a);goog.asserts.assertExists(d);return d.version}return""}return module$contents$goog$labs$userAgent$browser_getFullVersionFromUserAgentString(a)}
goog.labs.userAgent.browser.getVersionStringForLogging=module$contents$goog$labs$userAgent$browser_getVersionStringForLogging;goog.labs.userAgent.engine={};function module$contents$goog$labs$userAgent$engine_isPresto(){return module$contents$goog$labs$userAgent$util_matchUserAgent("Presto")}function module$contents$goog$labs$userAgent$engine_isTrident(){return module$contents$goog$labs$userAgent$util_matchUserAgent("Trident")||module$contents$goog$labs$userAgent$util_matchUserAgent("MSIE")}
function module$contents$goog$labs$userAgent$engine_isEdge(){return module$contents$goog$labs$userAgent$util_matchUserAgent("Edge")}function module$contents$goog$labs$userAgent$engine_isWebKit(){return module$contents$goog$labs$userAgent$util_matchUserAgentIgnoreCase("WebKit")&&!module$contents$goog$labs$userAgent$engine_isEdge()}
function module$contents$goog$labs$userAgent$engine_isGecko(){return module$contents$goog$labs$userAgent$util_matchUserAgent("Gecko")&&!module$contents$goog$labs$userAgent$engine_isWebKit()&&!module$contents$goog$labs$userAgent$engine_isTrident()&&!module$contents$goog$labs$userAgent$engine_isEdge()}
function module$contents$goog$labs$userAgent$engine_getVersion(){var a=module$contents$goog$labs$userAgent$util_getUserAgent();if(a){a=module$contents$goog$labs$userAgent$util_extractVersionTuples(a);const f=module$contents$goog$labs$userAgent$engine_getEngineTuple(a);if(f)return"Gecko"==f[0]?module$contents$goog$labs$userAgent$engine_getVersionForKey(a,"Firefox"):f[1];a=a[0];var d;if(a&&(d=a[2])&&(d=/Trident\/([^\s;]+)/.exec(d)))return d[1]}return""}
function module$contents$goog$labs$userAgent$engine_getEngineTuple(a){if(!module$contents$goog$labs$userAgent$engine_isEdge())return a[1];for(let d=0;d<a.length;d++){const f=a[d];if("Edge"==f[0])return f}}function module$contents$goog$labs$userAgent$engine_isVersionOrHigher(a){return 0<=goog.string.internal.compareVersions(module$contents$goog$labs$userAgent$engine_getVersion(),a)}
function module$contents$goog$labs$userAgent$engine_getVersionForKey(a,d){return(a=module$contents$goog$array_find(a,function(f){return d==f[0]}))&&a[1]||""}goog.labs.userAgent.engine.getVersion=module$contents$goog$labs$userAgent$engine_getVersion;goog.labs.userAgent.engine.isEdge=module$contents$goog$labs$userAgent$engine_isEdge;goog.labs.userAgent.engine.isGecko=module$contents$goog$labs$userAgent$engine_isGecko;goog.labs.userAgent.engine.isPresto=module$contents$goog$labs$userAgent$engine_isPresto;
goog.labs.userAgent.engine.isTrident=module$contents$goog$labs$userAgent$engine_isTrident;goog.labs.userAgent.engine.isVersionOrHigher=module$contents$goog$labs$userAgent$engine_isVersionOrHigher;goog.labs.userAgent.engine.isWebKit=module$contents$goog$labs$userAgent$engine_isWebKit;goog.labs.userAgent.platform={};function module$contents$goog$labs$userAgent$platform_useUserAgentDataPlatform(){if(module$contents$goog$labs$userAgent$util_ASSUME_CLIENT_HINTS_SUPPORT)return!0;const a=module$contents$goog$labs$userAgent$util_getUserAgentData();return!!a&&!!a.platform}
function module$contents$goog$labs$userAgent$platform_isAndroid(){return module$contents$goog$labs$userAgent$platform_useUserAgentDataPlatform()?"Android"===module$contents$goog$labs$userAgent$util_getUserAgentData().platform:module$contents$goog$labs$userAgent$util_matchUserAgent("Android")}function module$contents$goog$labs$userAgent$platform_isIpod(){return module$contents$goog$labs$userAgent$util_matchUserAgent("iPod")}
function module$contents$goog$labs$userAgent$platform_isIphone(){return module$contents$goog$labs$userAgent$util_matchUserAgent("iPhone")&&!module$contents$goog$labs$userAgent$util_matchUserAgent("iPod")&&!module$contents$goog$labs$userAgent$util_matchUserAgent("iPad")}function module$contents$goog$labs$userAgent$platform_isIpad(){return module$contents$goog$labs$userAgent$util_matchUserAgent("iPad")}
function module$contents$goog$labs$userAgent$platform_isIos(){return module$contents$goog$labs$userAgent$platform_isIphone()||module$contents$goog$labs$userAgent$platform_isIpad()||module$contents$goog$labs$userAgent$platform_isIpod()}
function module$contents$goog$labs$userAgent$platform_isMacintosh(){return module$contents$goog$labs$userAgent$platform_useUserAgentDataPlatform()?"macOS"===module$contents$goog$labs$userAgent$util_getUserAgentData().platform:module$contents$goog$labs$userAgent$util_matchUserAgent("Macintosh")}
function module$contents$goog$labs$userAgent$platform_isLinux(){return module$contents$goog$labs$userAgent$platform_useUserAgentDataPlatform()?"Linux"===module$contents$goog$labs$userAgent$util_getUserAgentData().platform:module$contents$goog$labs$userAgent$util_matchUserAgent("Linux")}
function module$contents$goog$labs$userAgent$platform_isWindows(){return module$contents$goog$labs$userAgent$platform_useUserAgentDataPlatform()?"Windows"===module$contents$goog$labs$userAgent$util_getUserAgentData().platform:module$contents$goog$labs$userAgent$util_matchUserAgent("Windows")}
function module$contents$goog$labs$userAgent$platform_isChromeOS(){return module$contents$goog$labs$userAgent$platform_useUserAgentDataPlatform()?"Chrome OS"===module$contents$goog$labs$userAgent$util_getUserAgentData().platform:module$contents$goog$labs$userAgent$util_matchUserAgent("CrOS")}function module$contents$goog$labs$userAgent$platform_isChromecast(){return module$contents$goog$labs$userAgent$util_matchUserAgent("CrKey")}
function module$contents$goog$labs$userAgent$platform_isKaiOS(){return module$contents$goog$labs$userAgent$util_matchUserAgentIgnoreCase("KaiOS")}
function module$contents$goog$labs$userAgent$platform_getVersion(){var a=module$contents$goog$labs$userAgent$util_getUserAgent(),d="";module$contents$goog$labs$userAgent$platform_isWindows()?(d=/Windows (?:NT|Phone) ([0-9.]+)/,d=(a=d.exec(a))?a[1]:"0.0"):module$contents$goog$labs$userAgent$platform_isIos()?(d=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,d=(a=d.exec(a))&&a[1].replace(/_/g,".")):module$contents$goog$labs$userAgent$platform_isMacintosh()?(d=/Mac OS X ([0-9_.]+)/,d=(a=d.exec(a))?a[1].replace(/_/g,
"."):"10"):module$contents$goog$labs$userAgent$platform_isKaiOS()?(d=/(?:KaiOS)\/(\S+)/i,d=(a=d.exec(a))&&a[1]):module$contents$goog$labs$userAgent$platform_isAndroid()?(d=/Android\s+([^\);]+)(\)|;)/,d=(a=d.exec(a))&&a[1]):module$contents$goog$labs$userAgent$platform_isChromeOS()&&(d=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,d=(a=d.exec(a))&&a[1]);return d||""}
function module$contents$goog$labs$userAgent$platform_isVersionOrHigher(a){return 0<=goog.string.internal.compareVersions(module$contents$goog$labs$userAgent$platform_getVersion(),a)}
class module$contents$goog$labs$userAgent$platform_PlatformVersion{getIfLoaded(){if(module$contents$goog$labs$userAgent$util_getUserAgentData()){const a=module$exports$goog$labs$userAgent$highEntropy$highEntropyData.platformVersion.getIfLoaded();if(void 0!==a)return new module$exports$goog$labs$userAgent$highEntropy$highEntropyValue.Version(a)}else return new module$exports$goog$labs$userAgent$highEntropy$highEntropyValue.Version(module$contents$goog$labs$userAgent$platform_getVersion())}async load(){return module$contents$goog$labs$userAgent$util_getUserAgentData()?new module$exports$goog$labs$userAgent$highEntropy$highEntropyValue.Version(await module$exports$goog$labs$userAgent$highEntropy$highEntropyData.platformVersion.load()):
new module$exports$goog$labs$userAgent$highEntropy$highEntropyValue.Version(module$contents$goog$labs$userAgent$platform_getVersion())}}const module$contents$goog$labs$userAgent$platform_version=new module$contents$goog$labs$userAgent$platform_PlatformVersion;goog.labs.userAgent.platform.getVersion=module$contents$goog$labs$userAgent$platform_getVersion;goog.labs.userAgent.platform.isAndroid=module$contents$goog$labs$userAgent$platform_isAndroid;goog.labs.userAgent.platform.isChromeOS=module$contents$goog$labs$userAgent$platform_isChromeOS;
goog.labs.userAgent.platform.isChromecast=module$contents$goog$labs$userAgent$platform_isChromecast;goog.labs.userAgent.platform.isIos=module$contents$goog$labs$userAgent$platform_isIos;goog.labs.userAgent.platform.isIpad=module$contents$goog$labs$userAgent$platform_isIpad;goog.labs.userAgent.platform.isIphone=module$contents$goog$labs$userAgent$platform_isIphone;goog.labs.userAgent.platform.isIpod=module$contents$goog$labs$userAgent$platform_isIpod;goog.labs.userAgent.platform.isKaiOS=module$contents$goog$labs$userAgent$platform_isKaiOS;
goog.labs.userAgent.platform.isLinux=module$contents$goog$labs$userAgent$platform_isLinux;goog.labs.userAgent.platform.isMacintosh=module$contents$goog$labs$userAgent$platform_isMacintosh;goog.labs.userAgent.platform.isVersionOrHigher=module$contents$goog$labs$userAgent$platform_isVersionOrHigher;goog.labs.userAgent.platform.isWindows=module$contents$goog$labs$userAgent$platform_isWindows;goog.labs.userAgent.platform.version=module$contents$goog$labs$userAgent$platform_version;goog.reflect={};goog.reflect.object=function(a,d){return d};goog.reflect.objectProperty=function(a,d){return a};goog.reflect.sinkValue=function(a){goog.reflect.sinkValue[" "](a);return a};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(a,d){try{return goog.reflect.sinkValue(a[d]),!0}catch(f){}return!1};goog.reflect.cache=function(a,d,f,h){h=h?h(d):d;return Object.prototype.hasOwnProperty.call(a,h)?a[h]:a[h]=f(d)};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_EDGE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.ASSUME_ANY_VERSION=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;goog.userAgent.getUserAgentString=function(){return module$contents$goog$labs$userAgent$util_getUserAgent()};
goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null};goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()};goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:module$contents$goog$labs$userAgent$browser_matchOpera();goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:module$contents$goog$labs$userAgent$browser_matchIE();
goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:module$contents$goog$labs$userAgent$engine_isEdge();goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:module$contents$goog$labs$userAgent$engine_isGecko();goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:module$contents$goog$labs$userAgent$engine_isWebKit();
goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&module$contents$goog$labs$userAgent$util_matchUserAgent("Mobile")};goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_();goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var a=goog.userAgent.getNavigatorTyped();return a&&a.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;
goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.ASSUME_ANDROID=!1;goog.userAgent.ASSUME_IPHONE=!1;goog.userAgent.ASSUME_IPAD=!1;goog.userAgent.ASSUME_IPOD=!1;goog.userAgent.ASSUME_KAIOS=!1;goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD;
goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:module$contents$goog$labs$userAgent$platform_isMacintosh();goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:module$contents$goog$labs$userAgent$platform_isWindows();goog.userAgent.isLegacyLinux_=function(){return module$contents$goog$labs$userAgent$platform_isLinux()||module$contents$goog$labs$userAgent$platform_isChromeOS()};
goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_();goog.userAgent.isX11_=function(){var a=goog.userAgent.getNavigatorTyped();return!!a&&goog.string.internal.contains(a.appVersion||"","X11")};goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_();goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:module$contents$goog$labs$userAgent$platform_isAndroid();
goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:module$contents$goog$labs$userAgent$platform_isIphone();goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:module$contents$goog$labs$userAgent$platform_isIpad();goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:module$contents$goog$labs$userAgent$platform_isIpod();
goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:module$contents$goog$labs$userAgent$platform_isIos();goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:module$contents$goog$labs$userAgent$platform_isKaiOS();
goog.userAgent.determineVersion_=function(){var a="",d=goog.userAgent.getVersionRegexResult_();d&&(a=d?d[1]:"");return goog.userAgent.IE&&(d=goog.userAgent.getDocumentMode_(),null!=d&&d>parseFloat(a))?String(d):a};
goog.userAgent.getVersionRegexResult_=function(){var a=goog.userAgent.getUserAgentString();if(goog.userAgent.GECKO)return/rv:([^\);]+)(\)|;)/.exec(a);if(goog.userAgent.EDGE)return/Edge\/([\d\.]+)/.exec(a);if(goog.userAgent.IE)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(goog.userAgent.WEBKIT)return/WebKit\/(\S+)/.exec(a);if(goog.userAgent.OPERA)return/(?:Version)[ \/]?(\S+)/.exec(a)};goog.userAgent.getDocumentMode_=function(){var a=goog.global.document;return a?a.documentMode:void 0};
goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(a,d){return goog.string.internal.compareVersions(a,d)};goog.userAgent.isVersionOrHigherCache_={};goog.userAgent.isVersionOrHigher=function(a){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,a,function(){return 0<=goog.string.internal.compareVersions(goog.userAgent.VERSION,a)})};
goog.userAgent.isDocumentModeOrHigher=function(a){return Number(goog.userAgent.DOCUMENT_MODE)>=a};goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher;goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE){var a=goog.userAgent.getDocumentMode_();return a?a:parseInt(goog.userAgent.VERSION,10)||void 0}}();goog.events.EventTypeHelpers={};goog.events.MouseEvents={};goog.events.EventTypeHelpers.getVendorPrefixedName_=function(a){return goog.userAgent.WEBKIT?"webkit"+a:a.toLowerCase()};
goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",AUXCLICK:"auxclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSECANCEL:"mousecancel",SELECTIONCHANGE:"selectionchange",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:"focusin",FOCUSOUT:"focusout",CHANGE:"change",
RESET:"reset",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DEVICECHANGE:"devicechange",DEVICEMOTION:"devicemotion",DEVICEORIENTATION:"deviceorientation",DOMCONTENTLOADED:"DOMContentLoaded",
ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",CANPLAY:"canplay",CANPLAYTHROUGH:"canplaythrough",DURATIONCHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",LOADEDDATA:"loadeddata",LOADEDMETADATA:"loadedmetadata",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATECHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",
TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",WAITING:"waiting",SOURCEOPEN:"sourceopen",SOURCEENDED:"sourceended",SOURCECLOSED:"sourceclosed",ABORT:"abort",UPDATE:"update",UPDATESTART:"updatestart",UPDATEEND:"updateend",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",INSTALL:"install",
ACTIVATE:"activate",FETCH:"fetch",FOREIGNFETCH:"foreignfetch",MESSAGEERROR:"messageerror",STATECHANGE:"statechange",UPDATEFOUND:"updatefound",CONTROLLERCHANGE:"controllerchange",ANIMATIONSTART:goog.events.EventTypeHelpers.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.EventTypeHelpers.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.EventTypeHelpers.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.EventTypeHelpers.getVendorPrefixedName_("TransitionEnd"),
POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",
MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:goog.userAgent.IE?"textinput":"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",BEFOREINPUT:"beforeinput",
EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",
DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified",BEFOREPRINT:"beforeprint",AFTERPRINT:"afterprint",BEFOREINSTALLPROMPT:"beforeinstallprompt",APPINSTALLED:"appinstalled"};goog.events.EventTypeHelpers.getPointerFallbackEventName_=function(a,d,f){return goog.events.BrowserFeature.POINTER_EVENTS?a:goog.events.BrowserFeature.MSPOINTER_EVENTS?d:f};
goog.events.PointerFallbackEventType={POINTERDOWN:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTERDOWN,goog.events.EventType.MSPOINTERDOWN,goog.events.EventType.MOUSEDOWN),POINTERUP:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTERUP,goog.events.EventType.MSPOINTERUP,goog.events.EventType.MOUSEUP),POINTERCANCEL:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTERCANCEL,goog.events.EventType.MSPOINTERCANCEL,
goog.events.EventType.MOUSECANCEL),POINTERMOVE:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTERMOVE,goog.events.EventType.MSPOINTERMOVE,goog.events.EventType.MOUSEMOVE),POINTEROVER:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTEROVER,goog.events.EventType.MSPOINTEROVER,goog.events.EventType.MOUSEOVER),POINTEROUT:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTEROUT,goog.events.EventType.MSPOINTEROUT,
goog.events.EventType.MOUSEOUT),POINTERENTER:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTERENTER,goog.events.EventType.MSPOINTERENTER,goog.events.EventType.MOUSEENTER),POINTERLEAVE:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTERLEAVE,goog.events.EventType.MSPOINTERLEAVE,goog.events.EventType.MOUSELEAVE)};
goog.events.PointerTouchFallbackEventType={POINTERDOWN:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTERDOWN,goog.events.EventType.MSPOINTERDOWN,goog.events.EventType.TOUCHSTART),POINTERUP:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTERUP,goog.events.EventType.MSPOINTERUP,goog.events.EventType.TOUCHEND),POINTERCANCEL:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTERCANCEL,goog.events.EventType.MSPOINTERCANCEL,
goog.events.EventType.TOUCHCANCEL),POINTERMOVE:goog.events.EventTypeHelpers.getPointerFallbackEventName_(goog.events.EventType.POINTERMOVE,goog.events.EventType.MSPOINTERMOVE,goog.events.EventType.TOUCHMOVE)};
goog.events.PointerAsMouseEventType={MOUSEDOWN:goog.events.PointerFallbackEventType.POINTERDOWN,MOUSEUP:goog.events.PointerFallbackEventType.POINTERUP,MOUSECANCEL:goog.events.PointerFallbackEventType.POINTERCANCEL,MOUSEMOVE:goog.events.PointerFallbackEventType.POINTERMOVE,MOUSEOVER:goog.events.PointerFallbackEventType.POINTEROVER,MOUSEOUT:goog.events.PointerFallbackEventType.POINTEROUT,MOUSEENTER:goog.events.PointerFallbackEventType.POINTERENTER,MOUSELEAVE:goog.events.PointerFallbackEventType.POINTERLEAVE};
goog.events.MouseAsMouseEventType={MOUSEDOWN:goog.events.EventType.MOUSEDOWN,MOUSEUP:goog.events.EventType.MOUSEUP,MOUSECANCEL:goog.events.EventType.MOUSECANCEL,MOUSEMOVE:goog.events.EventType.MOUSEMOVE,MOUSEOVER:goog.events.EventType.MOUSEOVER,MOUSEOUT:goog.events.EventType.MOUSEOUT,MOUSEENTER:goog.events.EventType.MOUSEENTER,MOUSELEAVE:goog.events.EventType.MOUSELEAVE};
goog.events.PointerAsTouchEventType={TOUCHCANCEL:goog.events.PointerTouchFallbackEventType.POINTERCANCEL,TOUCHEND:goog.events.PointerTouchFallbackEventType.POINTERUP,TOUCHMOVE:goog.events.PointerTouchFallbackEventType.POINTERMOVE,TOUCHSTART:goog.events.PointerTouchFallbackEventType.POINTERDOWN};goog.events.BrowserEvent=function(a,d){goog.events.Event.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.platformModifierKey=!1;this.pointerId=0;this.pointerType="";this.event_=null;a&&this.init(a,d)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);
goog.events.BrowserEvent.USE_LAYER_XY_AS_OFFSET_XY=!1;goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.PointerType={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"};goog.events.BrowserEvent.IEButtonMap=goog.debug.freeze([1,4,2]);goog.events.BrowserEvent.IE_BUTTON_MAP=goog.events.BrowserEvent.IEButtonMap;goog.events.BrowserEvent.IE_POINTER_TYPE_MAP=goog.debug.freeze({2:goog.events.BrowserEvent.PointerType.TOUCH,3:goog.events.BrowserEvent.PointerType.PEN,4:goog.events.BrowserEvent.PointerType.MOUSE});
goog.events.BrowserEvent.prototype.init=function(a,d){var f=this.type=a.type,h=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=d;(d=a.relatedTarget)?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(d,"nodeName")||(d=null)):f==goog.events.EventType.MOUSEOVER?d=a.fromElement:f==goog.events.EventType.MOUSEOUT&&(d=a.toElement);this.relatedTarget=d;h?(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?
h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0):(goog.events.BrowserEvent.USE_LAYER_XY_AS_OFFSET_XY?(this.offsetX=void 0!==a.layerX?a.layerX:a.offsetX,this.offsetY=void 0!==a.layerY?a.layerY:a.offsetY):(this.offsetX=goog.userAgent.WEBKIT||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==a.offsetY?a.offsetY:a.layerY),this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,
this.screenY=a.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==f?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.platformModifierKey=goog.userAgent.MAC?a.metaKey:a.ctrlKey;this.pointerId=a.pointerId||0;this.pointerType=goog.events.BrowserEvent.getPointerType_(a);this.state=a.state;this.event_=a;a.defaultPrevented&&goog.events.BrowserEvent.superClass_.preventDefault.call(this)};
goog.events.BrowserEvent.prototype.isButton=function(a){return this.event_.button==a};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.MAC&&this.ctrlKey)};goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var a=this.event_;a.preventDefault?a.preventDefault():a.returnValue=!1};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};goog.events.BrowserEvent.getPointerType_=function(a){return"string"===typeof a.pointerType?a.pointerType:goog.events.BrowserEvent.IE_POINTER_TYPE_MAP[a.pointerType]||""};goog.events.Listenable=function(){};goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1E6*Math.random()|0);goog.events.Listenable.addImplementation=function(a){a.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0};goog.events.Listenable.isImplementedBy=function(a){return!(!a||!a[goog.events.Listenable.IMPLEMENTED_BY_PROP])};goog.events.Listenable.prototype.listen=function(a,d,f,h){};goog.events.Listenable.prototype.listenOnce=function(a,d,f,h){};
goog.events.Listenable.prototype.unlisten=function(a,d,f,h){};goog.events.Listenable.prototype.unlistenByKey=function(a){};goog.events.Listenable.prototype.dispatchEvent=function(a){};goog.events.Listenable.prototype.removeAllListeners=function(a){};goog.events.Listenable.prototype.getParentEventTarget=function(){};goog.events.Listenable.prototype.fireListeners=function(a,d,f){};goog.events.Listenable.prototype.getListeners=function(a,d){};
goog.events.Listenable.prototype.getListener=function(a,d,f,h){};goog.events.Listenable.prototype.hasListener=function(a,d){};goog.events.ListenableKey=function(){};goog.events.ListenableKey.counter_=0;goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_};goog.events.Listener=function(a,d,f,h,l,m){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack);this.listener=a;this.proxy=d;this.src=f;this.type=h;this.capture=!!l;this.handler=m;this.key=goog.events.ListenableKey.reserveKey();this.removed=this.callOnce=!1};goog.events.Listener.ENABLE_MONITORING=!1;goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0;this.handler=this.src=this.proxy=this.listener=null};goog.object={};function module$contents$goog$object_forEach(a,d,f){for(const h in a)d.call(f,a[h],h,a)}function module$contents$goog$object_filter(a,d,f){const h={};for(const l in a)d.call(f,a[l],l,a)&&(h[l]=a[l]);return h}function module$contents$goog$object_map(a,d,f){const h={};for(const l in a)h[l]=d.call(f,a[l],l,a);return h}function module$contents$goog$object_some(a,d,f){for(const h in a)if(d.call(f,a[h],h,a))return!0;return!1}
function module$contents$goog$object_every(a,d,f){for(const h in a)if(!d.call(f,a[h],h,a))return!1;return!0}function module$contents$goog$object_getCount(a){let d=0;for(const f in a)d++;return d}function module$contents$goog$object_getAnyKey(a){for(const d in a)return d}function module$contents$goog$object_getAnyValue(a){for(const d in a)return a[d]}function module$contents$goog$object_contains(a,d){return module$contents$goog$object_containsValue(a,d)}
function module$contents$goog$object_getValues(a){const d=[];let f=0;for(const h in a)d[f++]=a[h];return d}function module$contents$goog$object_getKeys(a){const d=[];let f=0;for(const h in a)d[f++]=h;return d}function module$contents$goog$object_getValueByKeys(a,d){var f=goog.isArrayLike(d);const h=f?d:arguments;for(f=f?0:1;f<h.length;f++){if(null==a)return;a=a[h[f]]}return a}function module$contents$goog$object_containsKey(a,d){return null!==a&&d in a}
function module$contents$goog$object_containsValue(a,d){for(const f in a)if(a[f]==d)return!0;return!1}function module$contents$goog$object_findKey(a,d,f){for(const h in a)if(d.call(f,a[h],h,a))return h}function module$contents$goog$object_findValue(a,d,f){return(d=module$contents$goog$object_findKey(a,d,f))&&a[d]}function module$contents$goog$object_isEmpty(a){for(const d in a)return!1;return!0}function module$contents$goog$object_clear(a){for(const d in a)delete a[d]}
function module$contents$goog$object_remove(a,d){let f;(f=d in a)&&delete a[d];return f}function module$contents$goog$object_add(a,d,f){if(null!==a&&d in a)throw Error(`The object already contains the key "${d}"`);module$contents$goog$object_set(a,d,f)}function module$contents$goog$object_get(a,d,f){return null!==a&&d in a?a[d]:f}function module$contents$goog$object_set(a,d,f){a[d]=f}function module$contents$goog$object_setIfUndefined(a,d,f){return d in a?a[d]:a[d]=f}
function module$contents$goog$object_setWithReturnValueIfNotSet(a,d,f){if(d in a)return a[d];f=f();return a[d]=f}function module$contents$goog$object_equals(a,d){for(const f in a)if(!(f in d)||a[f]!==d[f])return!1;for(const f in d)if(!(f in a))return!1;return!0}function module$contents$goog$object_clone(a){const d={};for(const f in a)d[f]=a[f];return d}
function module$contents$goog$object_unsafeClone(a){if(!a||"object"!==typeof a)return a;if("function"===typeof a.clone)return a.clone();if("undefined"!==typeof Map&&a instanceof Map)return new Map(a);if("undefined"!==typeof Set&&a instanceof Set)return new Set(a);const d=Array.isArray(a)?[]:"function"!==typeof ArrayBuffer||"function"!==typeof ArrayBuffer.isView||!ArrayBuffer.isView(a)||a instanceof DataView?{}:new a.constructor(a.length);for(const f in a)d[f]=module$contents$goog$object_unsafeClone(a[f]);
return d}function module$contents$goog$object_transpose(a){const d={};for(const f in a)d[a[f]]=f;return d}const module$contents$goog$object_PROTOTYPE_FIELDS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function module$contents$goog$object_extend(a,d){let f,h;for(let l=1;l<arguments.length;l++){h=arguments[l];for(f in h)a[f]=h[f];for(let m=0;m<module$contents$goog$object_PROTOTYPE_FIELDS.length;m++)f=module$contents$goog$object_PROTOTYPE_FIELDS[m],Object.prototype.hasOwnProperty.call(h,f)&&(a[f]=h[f])}}
function module$contents$goog$object_create(a){const d=arguments.length;if(1==d&&Array.isArray(arguments[0]))return module$contents$goog$object_create.apply(null,arguments[0]);if(d%2)throw Error("Uneven number of arguments");const f={};for(let h=0;h<d;h+=2)f[arguments[h]]=arguments[h+1];return f}
function module$contents$goog$object_createSet(a){const d=arguments.length;if(1==d&&Array.isArray(arguments[0]))return module$contents$goog$object_createSet.apply(null,arguments[0]);const f={};for(let h=0;h<d;h++)f[arguments[h]]=!0;return f}function module$contents$goog$object_createImmutableView(a){let d=a;Object.isFrozen&&!Object.isFrozen(a)&&(d=Object.create(a),Object.freeze(d));return d}function module$contents$goog$object_isImmutableView(a){return!!Object.isFrozen&&Object.isFrozen(a)}
function module$contents$goog$object_getAllPropertyNames(a,d,f){if(!a)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return module$contents$goog$object_getKeys(a);const h={};for(;a&&(a!==Object.prototype||d)&&(a!==Function.prototype||f);){const l=Object.getOwnPropertyNames(a);for(let m=0;m<l.length;m++)h[l[m]]=!0;a=Object.getPrototypeOf(a)}return module$contents$goog$object_getKeys(h)}
function module$contents$goog$object_getSuperClass(a){return(a=Object.getPrototypeOf(a.prototype))&&a.constructor}goog.object.add=module$contents$goog$object_add;goog.object.clear=module$contents$goog$object_clear;goog.object.clone=module$contents$goog$object_clone;goog.object.contains=module$contents$goog$object_contains;goog.object.containsKey=module$contents$goog$object_containsKey;goog.object.containsValue=module$contents$goog$object_containsValue;goog.object.create=module$contents$goog$object_create;
goog.object.createImmutableView=module$contents$goog$object_createImmutableView;goog.object.createSet=module$contents$goog$object_createSet;goog.object.equals=module$contents$goog$object_equals;goog.object.every=module$contents$goog$object_every;goog.object.extend=module$contents$goog$object_extend;goog.object.filter=module$contents$goog$object_filter;goog.object.findKey=module$contents$goog$object_findKey;goog.object.findValue=module$contents$goog$object_findValue;goog.object.forEach=module$contents$goog$object_forEach;
goog.object.get=module$contents$goog$object_get;goog.object.getAllPropertyNames=module$contents$goog$object_getAllPropertyNames;goog.object.getAnyKey=module$contents$goog$object_getAnyKey;goog.object.getAnyValue=module$contents$goog$object_getAnyValue;goog.object.getCount=module$contents$goog$object_getCount;goog.object.getKeys=module$contents$goog$object_getKeys;goog.object.getSuperClass=module$contents$goog$object_getSuperClass;goog.object.getValueByKeys=module$contents$goog$object_getValueByKeys;
goog.object.getValues=module$contents$goog$object_getValues;goog.object.isEmpty=module$contents$goog$object_isEmpty;goog.object.isImmutableView=module$contents$goog$object_isImmutableView;goog.object.map=module$contents$goog$object_map;goog.object.remove=module$contents$goog$object_remove;goog.object.set=module$contents$goog$object_set;goog.object.setIfUndefined=module$contents$goog$object_setIfUndefined;goog.object.setWithReturnValueIfNotSet=module$contents$goog$object_setWithReturnValueIfNotSet;
goog.object.some=module$contents$goog$object_some;goog.object.transpose=module$contents$goog$object_transpose;goog.object.unsafeClone=module$contents$goog$object_unsafeClone;goog.events.ListenerMap=function(a){this.src=a;this.listeners={};this.typeCount_=0};goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_};goog.events.ListenerMap.prototype.getListenerCount=function(){var a=0,d;for(d in this.listeners)a+=this.listeners[d].length;return a};
goog.events.ListenerMap.prototype.add=function(a,d,f,h,l){var m=a.toString();a=this.listeners[m];a||(a=this.listeners[m]=[],this.typeCount_++);var p=goog.events.ListenerMap.findListenerIndex_(a,d,h,l);-1<p?(d=a[p],f||(d.callOnce=!1)):(d=new goog.events.Listener(d,null,this.src,m,!!h,l),d.callOnce=f,a.push(d));return d};
goog.events.ListenerMap.prototype.remove=function(a,d,f,h){a=a.toString();if(!(a in this.listeners))return!1;var l=this.listeners[a];d=goog.events.ListenerMap.findListenerIndex_(l,d,f,h);return-1<d?(l[d].markAsRemoved(),module$contents$goog$array_removeAt(l,d),0==l.length&&(delete this.listeners[a],this.typeCount_--),!0):!1};
goog.events.ListenerMap.prototype.removeByKey=function(a){var d=a.type;if(!(d in this.listeners))return!1;var f=module$contents$goog$array_remove(this.listeners[d],a);f&&(a.markAsRemoved(),0==this.listeners[d].length&&(delete this.listeners[d],this.typeCount_--));return f};goog.events.ListenerMap.prototype.removeAll=function(a){a=a&&a.toString();var d=0,f;for(f in this.listeners)if(!a||f==a){for(var h=this.listeners[f],l=0;l<h.length;l++)++d,h[l].markAsRemoved();delete this.listeners[f];this.typeCount_--}return d};
goog.events.ListenerMap.prototype.getListeners=function(a,d){a=this.listeners[a.toString()];var f=[];if(a)for(var h=0;h<a.length;++h){var l=a[h];l.capture==d&&f.push(l)}return f};goog.events.ListenerMap.prototype.getListener=function(a,d,f,h){a=this.listeners[a.toString()];var l=-1;a&&(l=goog.events.ListenerMap.findListenerIndex_(a,d,f,h));return-1<l?a[l]:null};
goog.events.ListenerMap.prototype.hasListener=function(a,d){var f=void 0!==a,h=f?a.toString():"",l=void 0!==d;return module$contents$goog$object_some(this.listeners,function(m,p){for(p=0;p<m.length;++p)if(!(f&&m[p].type!=h||l&&m[p].capture!=d))return!0;return!1})};goog.events.ListenerMap.findListenerIndex_=function(a,d,f,h){for(var l=0;l<a.length;++l){var m=a[l];if(!m.removed&&m.listener==d&&m.capture==!!f&&m.handler==h)return l}return-1};goog.events.Key={};goog.events.ListenableType={};goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1E6*Math.random()|0);goog.events.onString_="on";goog.events.onStringMap_={};goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2};goog.events.CAPTURE_SIMULATION_MODE=2;goog.events.listenerCountEstimate_=0;
goog.events.listen=function(a,d,f,h,l){if(h&&h.once)return goog.events.listenOnce(a,d,f,h,l);if(Array.isArray(d)){for(var m=0;m<d.length;m++)goog.events.listen(a,d[m],f,h,l);return null}f=goog.events.wrapListener(f);return goog.events.Listenable.isImplementedBy(a)?(h=goog.isObject(h)?!!h.capture:!!h,a.listen(d,f,h,l)):goog.events.listen_(a,d,f,!1,h,l)};
goog.events.listen_=function(a,d,f,h,l,m){if(!d)throw Error("Invalid event type");var p=goog.isObject(l)?!!l.capture:!!l,q=goog.events.getListenerMap_(a);q||(a[goog.events.LISTENER_MAP_PROP_]=q=new goog.events.ListenerMap(a));f=q.add(d,f,h,p,m);if(f.proxy)return f;h=goog.events.getProxy();f.proxy=h;h.src=a;h.listener=f;if(a.addEventListener)goog.events.BrowserFeature.PASSIVE_EVENTS||(l=p),void 0===l&&(l=!1),a.addEventListener(d.toString(),h,l);else if(a.attachEvent)a.attachEvent(goog.events.getOnString_(d.toString()),
h);else if(a.addListener&&a.removeListener)goog.asserts.assert("change"===d,"MediaQueryList only has a change event"),a.addListener(h);else throw Error("addEventListener and attachEvent are unavailable.");goog.events.listenerCountEstimate_++;return f};goog.events.getProxy=function(){const a=goog.events.handleBrowserEvent_,d=function(f){return a.call(d.src,d.listener,f)};return d};
goog.events.listenOnce=function(a,d,f,h,l){if(Array.isArray(d)){for(var m=0;m<d.length;m++)goog.events.listenOnce(a,d[m],f,h,l);return null}f=goog.events.wrapListener(f);return goog.events.Listenable.isImplementedBy(a)?(h=goog.isObject(h)?!!h.capture:!!h,a.listenOnce(d,f,h,l)):goog.events.listen_(a,d,f,!0,h,l)};goog.events.listenWithWrapper=function(a,d,f,h,l){d.listen(a,f,h,l)};
goog.events.unlisten=function(a,d,f,h,l){if(Array.isArray(d)){for(var m=0;m<d.length;m++)goog.events.unlisten(a,d[m],f,h,l);return null}h=goog.isObject(h)?!!h.capture:!!h;f=goog.events.wrapListener(f);if(goog.events.Listenable.isImplementedBy(a))return a.unlisten(d,f,h,l);if(!a)return!1;if(a=goog.events.getListenerMap_(a))if(d=a.getListener(d,f,h,l))return goog.events.unlistenByKey(d);return!1};
goog.events.unlistenByKey=function(a){if("number"===typeof a||!a||a.removed)return!1;var d=a.src;if(goog.events.Listenable.isImplementedBy(d))return d.unlistenByKey(a);var f=a.type,h=a.proxy;d.removeEventListener?d.removeEventListener(f,h,a.capture):d.detachEvent?d.detachEvent(goog.events.getOnString_(f),h):d.addListener&&d.removeListener&&d.removeListener(h);goog.events.listenerCountEstimate_--;(f=goog.events.getListenerMap_(d))?(f.removeByKey(a),0==f.getTypeCount()&&(f.src=null,d[goog.events.LISTENER_MAP_PROP_]=
null)):a.markAsRemoved();return!0};goog.events.unlistenWithWrapper=function(a,d,f,h,l){d.unlisten(a,f,h,l)};goog.events.removeAll=function(a,d){if(!a)return 0;if(goog.events.Listenable.isImplementedBy(a))return a.removeAllListeners(d);a=goog.events.getListenerMap_(a);if(!a)return 0;var f=0;d=d&&d.toString();for(var h in a.listeners)if(!d||h==d)for(var l=a.listeners[h].concat(),m=0;m<l.length;++m)goog.events.unlistenByKey(l[m])&&++f;return f};
goog.events.getListeners=function(a,d,f){return goog.events.Listenable.isImplementedBy(a)?a.getListeners(d,f):a?(a=goog.events.getListenerMap_(a))?a.getListeners(d,f):[]:[]};goog.events.getListener=function(a,d,f,h,l){f=goog.events.wrapListener(f);h=!!h;return goog.events.Listenable.isImplementedBy(a)?a.getListener(d,f,h,l):a?(a=goog.events.getListenerMap_(a))?a.getListener(d,f,h,l):null:null};
goog.events.hasListener=function(a,d,f){if(goog.events.Listenable.isImplementedBy(a))return a.hasListener(d,f);a=goog.events.getListenerMap_(a);return!!a&&a.hasListener(d,f)};goog.events.expose=function(a){var d=[],f;for(f in a)a[f]&&a[f].id?d.push(f+" = "+a[f]+" ("+a[f].id+")"):d.push(f+" = "+a[f]);return d.join("\n")};goog.events.getOnString_=function(a){return a in goog.events.onStringMap_?goog.events.onStringMap_[a]:goog.events.onStringMap_[a]=goog.events.onString_+a};
goog.events.fireListeners=function(a,d,f,h){return goog.events.Listenable.isImplementedBy(a)?a.fireListeners(d,f,h):goog.events.fireListeners_(a,d,f,h)};goog.events.fireListeners_=function(a,d,f,h){var l=!0;if(a=goog.events.getListenerMap_(a))if(d=a.listeners[d.toString()])for(d=d.concat(),a=0;a<d.length;a++){var m=d[a];m&&m.capture==f&&!m.removed&&(m=goog.events.fireListener(m,h),l=l&&!1!==m)}return l};
goog.events.fireListener=function(a,d){var f=a.listener,h=a.handler||a.src;a.callOnce&&goog.events.unlistenByKey(a);return f.call(h,d)};goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_};goog.events.dispatchEvent=function(a,d){goog.asserts.assert(goog.events.Listenable.isImplementedBy(a),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance.");return a.dispatchEvent(d)};
goog.events.protectBrowserEventEntryPoint=function(a){goog.events.handleBrowserEvent_=a.protectEntryPoint(goog.events.handleBrowserEvent_)};goog.events.handleBrowserEvent_=function(a,d){return a.removed?!0:goog.events.fireListener(a,new goog.events.BrowserEvent(d,this))};goog.events.markIeEvent_=function(a){var d=!1;if(0==a.keyCode)try{a.keyCode=-1;return}catch(f){d=!0}if(d||void 0==a.returnValue)a.returnValue=!0};goog.events.isMarkedIeEvent_=function(a){return 0>a.keyCode||void 0!=a.returnValue};
goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(a){return a+"_"+goog.events.uniqueIdCounter_++};goog.events.getListenerMap_=function(a){a=a[goog.events.LISTENER_MAP_PROP_];return a instanceof goog.events.ListenerMap?a:null};goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1E9*Math.random()>>>0);
goog.events.wrapListener=function(a){goog.asserts.assert(a,"Listener can not be null.");if("function"===typeof a)return a;goog.asserts.assert(a.handleEvent,"An object listener must have handleEvent method.");a[goog.events.LISTENER_WRAPPER_PROP_]||(a[goog.events.LISTENER_WRAPPER_PROP_]=function(d){return a.handleEvent(d)});return a[goog.events.LISTENER_WRAPPER_PROP_]};goog.debug.entryPointRegistry.register(function(a){goog.events.handleBrowserEvent_=a(goog.events.handleBrowserEvent_)});goog.dom.BrowserFeature={};goog.dom.BrowserFeature.ASSUME_NO_OFFSCREEN_CANVAS=!1;goog.dom.BrowserFeature.ASSUME_OFFSCREEN_CANVAS=!1;goog.dom.BrowserFeature.detectOffscreenCanvas_=function(a){try{return!!(new self.OffscreenCanvas(0,0)).getContext(a)}catch(d){}return!1};goog.dom.BrowserFeature.OFFSCREEN_CANVAS_2D=!goog.dom.BrowserFeature.ASSUME_NO_OFFSCREEN_CANVAS&&(goog.dom.BrowserFeature.ASSUME_OFFSCREEN_CANVAS||goog.dom.BrowserFeature.detectOffscreenCanvas_("2d"));
goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES=!0;goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE=!0;goog.dom.BrowserFeature.CAN_USE_INNER_TEXT=!1;goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY=goog.userAgent.IE||goog.userAgent.WEBKIT;goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT=goog.userAgent.IE;goog.dom.asserts={};goog.dom.asserts.assertIsLocation=function(a){if(goog.asserts.ENABLE_ASSERTS){var d=goog.dom.asserts.getWindow_(a);d&&(!a||!(a instanceof d.Location)&&a instanceof d.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(a))}return a};
goog.dom.asserts.assertIsElementType_=function(a,d){if(goog.asserts.ENABLE_ASSERTS){var f=goog.dom.asserts.getWindow_(a);f&&"undefined"!=typeof f[d]&&(a&&(a instanceof f[d]||!(a instanceof f.Location||a instanceof f.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",d,goog.dom.asserts.debugStringForType_(a)))}return a};goog.dom.asserts.assertIsHTMLAnchorElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLAnchorElement")};
goog.dom.asserts.assertIsHTMLButtonElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLButtonElement")};goog.dom.asserts.assertIsHTMLLinkElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLLinkElement")};goog.dom.asserts.assertIsHTMLImageElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLImageElement")};goog.dom.asserts.assertIsHTMLAudioElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLAudioElement")};
goog.dom.asserts.assertIsHTMLVideoElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLVideoElement")};goog.dom.asserts.assertIsHTMLInputElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLInputElement")};goog.dom.asserts.assertIsHTMLTextAreaElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLTextAreaElement")};goog.dom.asserts.assertIsHTMLCanvasElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLCanvasElement")};
goog.dom.asserts.assertIsHTMLEmbedElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLEmbedElement")};goog.dom.asserts.assertIsHTMLFormElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLFormElement")};goog.dom.asserts.assertIsHTMLFrameElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLFrameElement")};goog.dom.asserts.assertIsHTMLIFrameElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLIFrameElement")};
goog.dom.asserts.assertIsHTMLObjectElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLObjectElement")};goog.dom.asserts.assertIsHTMLScriptElement=function(a){return goog.dom.asserts.assertIsElementType_(a,"HTMLScriptElement")};
goog.dom.asserts.debugStringForType_=function(a){if(goog.isObject(a))try{return a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch(d){return"<object could not be stringified>"}else return void 0===a?"undefined":null===a?"null":typeof a};goog.dom.asserts.getWindow_=function(a){try{var d=a&&a.ownerDocument,f=d&&(d.defaultView||d.parentWindow);f=f||goog.global;if(f.Element&&f.Location)return f}catch(h){}return null};goog.functions={};goog.functions.constant=function(a){return function(){return a}};goog.functions.FALSE=function(){return!1};goog.functions.TRUE=function(){return!0};goog.functions.NULL=function(){return null};goog.functions.UNDEFINED=function(){};goog.functions.EMPTY=goog.functions.UNDEFINED;goog.functions.identity=function(a,d){return a};goog.functions.error=function(a){return function(){throw Error(a);}};goog.functions.fail=function(a){return function(){throw a;}};
goog.functions.lock=function(a,d){d=d||0;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,d))}};goog.functions.nth=function(a){return function(){return arguments[a]}};goog.functions.partialRight=function(a,d){const f=Array.prototype.slice.call(arguments,1);return function(){let h=this;h===goog.global&&(h=void 0);const l=Array.prototype.slice.call(arguments);l.push.apply(l,f);return a.apply(h,l)}};
goog.functions.withReturnValue=function(a,d){return goog.functions.sequence(a,goog.functions.constant(d))};goog.functions.equalTo=function(a,d){return function(f){return d?a==f:a===f}};goog.functions.compose=function(a,d){const f=arguments,h=f.length;return function(){let l;h&&(l=f[h-1].apply(this,arguments));for(let m=h-2;0<=m;m--)l=f[m].call(this,l);return l}};
goog.functions.sequence=function(a){const d=arguments,f=d.length;return function(){let h;for(let l=0;l<f;l++)h=d[l].apply(this,arguments);return h}};goog.functions.and=function(a){const d=arguments,f=d.length;return function(){for(let h=0;h<f;h++)if(!d[h].apply(this,arguments))return!1;return!0}};goog.functions.or=function(a){const d=arguments,f=d.length;return function(){for(let h=0;h<f;h++)if(d[h].apply(this,arguments))return!0;return!1}};
goog.functions.not=function(a){return function(){return!a.apply(this,arguments)}};goog.functions.create=function(a,d){var f=function(){};f.prototype=a.prototype;f=new f;a.apply(f,Array.prototype.slice.call(arguments,1));return f};goog.functions.CACHE_RETURN_VALUE=!0;goog.functions.cacheReturnValue=function(a){let d=!1,f;return function(){if(!goog.functions.CACHE_RETURN_VALUE)return a();d||(f=a(),d=!0);return f}};goog.functions.once=function(a){let d=a;return function(){if(d){const f=d;d=null;f()}}};
goog.functions.debounce=function(a,d,f){let h=0;return function(l){goog.global.clearTimeout(h);const m=arguments;h=goog.global.setTimeout(function(){a.apply(f,m)},d)}};goog.functions.throttle=function(a,d,f){let h=0,l=!1,m=[];const p=function(){h=0;l&&(l=!1,q())},q=function(){h=goog.global.setTimeout(p,d);let u=m;m=[];a.apply(f,u)};return function(u){m=arguments;h?l=!0:q()}};
goog.functions.rateLimit=function(a,d,f){let h=0;const l=function(){h=0};return function(m){h||(h=goog.global.setTimeout(l,d),a.apply(f,arguments))}};goog.functions.isFunction=a=>"function"===typeof a;goog.string.TypedString=function(){};goog.string.Const=function(a,d){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=a===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&d||"";this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_};goog.string.Const.prototype.implementsGoogStringTypedString=!0;goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_};
goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"});goog.string.Const.unwrap=function(a){if(a instanceof goog.string.Const&&a.constructor===goog.string.Const&&a.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_)return a.stringConstValueWithSecurityContract__googStringSecurityPrivate_;goog.asserts.fail("expected object of type Const, got '"+a+"'");return"type_error:Const"};
goog.string.Const.from=function(a){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,a)};goog.string.Const.TYPE_MARKER_={};goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={};goog.string.Const.EMPTY=goog.string.Const.from("");goog.i18n={};goog.i18n.bidi={};goog.i18n.bidi.FORCE_RTL=!1;
goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||
"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,
7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase());
goog.i18n.bidi.Format={LRE:"â€ª",RLE:"â€«",PDF:"â€¬",LRM:"â€Ž",RLM:"â€"};goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0};goog.i18n.bidi.RIGHT="right";goog.i18n.bidi.LEFT="left";goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT;goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT;
goog.i18n.bidi.toDir=function(a,d){return"number"==typeof a?0<a?goog.i18n.bidi.Dir.LTR:0>a?goog.i18n.bidi.Dir.RTL:d?null:goog.i18n.bidi.Dir.NEUTRAL:null==a?null:a?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};goog.i18n.bidi.ltrChars_="A-Za-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ê¸Ì€-Öà¤€-á¿¿â€Žâ°€-\ud801\ud804-\ud839\ud83c-\udbffï¤€-ï¬œï¸€-ï¹¯ï»½-ï¿¿";goog.i18n.bidi.rtlChars_="Ö‘-Û¯Ûº-à£¿â€\ud802-\ud803\ud83a-\ud83bï¬-ï·¿ï¹°-ï»¼";goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g;
goog.i18n.bidi.stripHtmlIfNeeded_=function(a,d){return d?a.replace(goog.i18n.bidi.htmlSkipReg_,""):a};goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.hasAnyRtl=function(a,d){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,d))};goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl;
goog.i18n.bidi.hasAnyLtr=function(a,d){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,d))};goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.isRtlChar=function(a){return goog.i18n.bidi.rtlRe_.test(a)};goog.i18n.bidi.isLtrChar=function(a){return goog.i18n.bidi.ltrRe_.test(a)};goog.i18n.bidi.isNeutralChar=function(a){return!goog.i18n.bidi.isLtrChar(a)&&!goog.i18n.bidi.isRtlChar(a)};
goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]");goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.startsWithRtl=function(a,d){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,d))};goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl;
goog.i18n.bidi.startsWithLtr=function(a,d){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,d))};goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr;goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/;goog.i18n.bidi.isNeutralText=function(a,d){a=goog.i18n.bidi.stripHtmlIfNeeded_(a,d);return goog.i18n.bidi.isRequiredLtrRe_.test(a)||!goog.i18n.bidi.hasAnyLtr(a)&&!goog.i18n.bidi.hasAnyRtl(a)};
goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$");goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$");goog.i18n.bidi.endsWithLtr=function(a,d){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,d))};goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr;
goog.i18n.bidi.endsWithRtl=function(a,d){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(a,d))};goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl;goog.i18n.bidi.rtlLocalesRe_=RegExp("^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)","i");goog.i18n.bidi.isRtlLanguage=function(a){return goog.i18n.bidi.rtlLocalesRe_.test(a)};goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g;
goog.i18n.bidi.guardBracketInText=function(a,d){d=(void 0===d?goog.i18n.bidi.hasAnyRtl(a):d)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return a.replace(goog.i18n.bidi.bracketGuardTextRe_,d+"$&"+d)};goog.i18n.bidi.enforceRtlInHtml=function(a){return"<"==a.charAt(0)?a.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+a+"</span>"};goog.i18n.bidi.enforceRtlInText=function(a){return goog.i18n.bidi.Format.RLE+a+goog.i18n.bidi.Format.PDF};
goog.i18n.bidi.enforceLtrInHtml=function(a){return"<"==a.charAt(0)?a.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+a+"</span>"};goog.i18n.bidi.enforceLtrInText=function(a){return goog.i18n.bidi.Format.LRE+a+goog.i18n.bidi.Format.PDF};goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g;goog.i18n.bidi.leftRe_=/left/gi;goog.i18n.bidi.rightRe_=/right/gi;goog.i18n.bidi.tempRe_=/%%%%/g;
goog.i18n.bidi.mirrorCSS=function(a){return a.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)};goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g;goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g;
goog.i18n.bidi.normalizeHebrewQuote=function(a){return a.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1×´").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1×³")};goog.i18n.bidi.wordSeparatorRe_=/\s+/;goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/;goog.i18n.bidi.rtlDetectionThreshold_=.4;
goog.i18n.bidi.estimateDirection=function(a,d){let f=0,h=0,l=!1;a=goog.i18n.bidi.stripHtmlIfNeeded_(a,d).split(goog.i18n.bidi.wordSeparatorRe_);for(d=0;d<a.length;d++){const m=a[d];goog.i18n.bidi.startsWithRtl(m)?(f++,h++):goog.i18n.bidi.isRequiredLtrRe_.test(m)?l=!0:goog.i18n.bidi.hasAnyLtr(m)?h++:goog.i18n.bidi.hasNumeralsRe_.test(m)&&(l=!0)}return 0==h?l?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:f/h>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};
goog.i18n.bidi.detectRtlDirectionality=function(a,d){return goog.i18n.bidi.estimateDirection(a,d)==goog.i18n.bidi.Dir.RTL};goog.i18n.bidi.setElementDirAndAlign=function(a,d){a&&(d=goog.i18n.bidi.toDir(d))&&(a.style.textAlign=d==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,a.dir=d==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")};
goog.i18n.bidi.setElementDirByTextDirectionality=function(a,d){switch(goog.i18n.bidi.estimateDirection(d)){case goog.i18n.bidi.Dir.LTR:"ltr"!==a.dir&&(a.dir="ltr");break;case goog.i18n.bidi.Dir.RTL:"rtl"!==a.dir&&(a.dir="rtl");break;default:a.removeAttribute("dir")}};goog.i18n.bidi.DirectionalString=function(){};goog.html={};goog.html.trustedtypes={};goog.html.trustedtypes.getPolicyPrivateDoNotAccessOrElse=function(){if(!goog.TRUSTED_TYPES_POLICY_NAME)return null;void 0===goog.html.trustedtypes.cachedPolicy_&&(goog.html.trustedtypes.cachedPolicy_=goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"));return goog.html.trustedtypes.cachedPolicy_};const module$contents$goog$html$SafeScript_CONSTRUCTOR_TOKEN_PRIVATE={};
class module$contents$goog$html$SafeScript_SafeScript{constructor(a,d){this.privateDoNotAccessOrElseSafeScriptWrappedValue_=d===module$contents$goog$html$SafeScript_CONSTRUCTOR_TOKEN_PRIVATE?a:"";this.implementsGoogStringTypedString=!0}static fromConstant(a){a=goog.string.Const.unwrap(a);return 0===a.length?module$contents$goog$html$SafeScript_SafeScript.EMPTY:module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(a)}static fromJson(a){return module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(module$contents$goog$html$SafeScript_SafeScript.stringify_(a))}getTypedStringValue(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()}static unwrap(a){return module$contents$goog$html$SafeScript_SafeScript.unwrapTrustedScript(a).toString()}static unwrapTrustedScript(a){if(a instanceof module$contents$goog$html$SafeScript_SafeScript&&
a.constructor===module$contents$goog$html$SafeScript_SafeScript)return a.privateDoNotAccessOrElseSafeScriptWrappedValue_;(0,goog.asserts.fail)("expected object of type SafeScript, got '"+a+"' of type "+goog.typeOf(a));return"type_error:SafeScript"}static stringify_(a){return JSON.stringify(a).replace(/</g,"\\x3c")}static createSafeScriptSecurityPrivateDoNotAccessOrElse(a){const d=goog.html.trustedtypes.getPolicyPrivateDoNotAccessOrElse();a=d?d.createScript(a):a;return new module$contents$goog$html$SafeScript_SafeScript(a,
module$contents$goog$html$SafeScript_CONSTRUCTOR_TOKEN_PRIVATE)}}module$contents$goog$html$SafeScript_SafeScript.prototype.toString=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()};module$contents$goog$html$SafeScript_SafeScript.EMPTY=function(){return module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("")}();goog.html.SafeScript=module$contents$goog$html$SafeScript_SafeScript;goog.fs={};goog.fs.url={};goog.fs.url.createObjectUrl=function(a){return goog.fs.url.getUrlObject_().createObjectURL(a)};goog.fs.url.revokeObjectUrl=function(a){goog.fs.url.getUrlObject_().revokeObjectURL(a)};goog.fs.url.UrlObject_=function(){};goog.fs.url.UrlObject_.prototype.createObjectURL=function(a){};goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(a){};
goog.fs.url.getUrlObject_=function(){const a=goog.fs.url.findUrlObject_();if(null!=a)return a;throw Error("This browser doesn't seem to support blob URLs");};goog.fs.url.findUrlObject_=function(){return void 0!==goog.global.URL&&void 0!==goog.global.URL.createObjectURL?goog.global.URL:void 0!==goog.global.createObjectURL?goog.global:null};goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()};goog.fs.blob={};goog.fs.blob.getBlob=function(a){var d=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==d){d=new d;for(let f=0;f<arguments.length;f++)d.append(arguments[f]);return d.getBlob()}return goog.fs.blob.getBlobWithProperties(Array.prototype.slice.call(arguments))};
goog.fs.blob.getBlobWithProperties=function(a,d,f){var h=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(void 0!==h){h=new h;for(let l=0;l<a.length;l++)h.append(a[l],f);return h.getBlob(d)}if(void 0!==goog.global.Blob)return h={},d&&(h.type=d),f&&(h.endings=f),new Blob(a,h);throw Error("This browser doesn't seem to support creating Blobs");};goog.html.TrustedResourceUrl=class{constructor(a,d){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=d===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_?a:""}};goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0;goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()};goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0;
goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(a,d){var f=goog.html.TrustedResourceUrl.unwrap(this);f=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(f);var h=f[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(f[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",f[2]||"",a)+goog.html.TrustedResourceUrl.stringifyParams_("#",h,d))};
goog.html.TrustedResourceUrl.prototype.toString=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+""};goog.html.TrustedResourceUrl.unwrap=function(a){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(a).toString()};
goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(a){if(a instanceof goog.html.TrustedResourceUrl&&a.constructor===goog.html.TrustedResourceUrl)return a.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_;goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+a+"' of type "+goog.typeOf(a));return"type_error:TrustedResourceUrl"};
goog.html.TrustedResourceUrl.format=function(a,d){var f=goog.string.Const.unwrap(a);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(f))throw Error("Invalid TrustedResourceUrl format: "+f);a=f.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(h,l){if(!Object.prototype.hasOwnProperty.call(d,l))throw Error('Found marker, "'+l+'", in format string, "'+f+'", but no valid label mapping found in args: '+JSON.stringify(d));h=d[l];return h instanceof goog.string.Const?goog.string.Const.unwrap(h):
encodeURIComponent(String(h))});return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g;goog.html.TrustedResourceUrl.BASE_URL_=RegExp("^((https:)?//[0-9a-z.:[\\]-]+/|/[^/\\\\]|[^:/\\\\%]+/|[^:/\\\\%]*[?#]|about:blank#)","i");goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/;
goog.html.TrustedResourceUrl.formatWithParams=function(a,d,f,h){return goog.html.TrustedResourceUrl.format(a,d).cloneWithParams(f,h)};goog.html.TrustedResourceUrl.fromConstant=function(a){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(a))};goog.html.TrustedResourceUrl.fromConstants=function(a){for(var d="",f=0;f<a.length;f++)d+=goog.string.Const.unwrap(a[f]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(d)};
goog.html.TrustedResourceUrl.fromSafeScript=function(a){a=goog.fs.blob.getBlobWithProperties([module$contents$goog$html$SafeScript_SafeScript.unwrap(a)],"text/javascript");a=goog.fs.url.createObjectUrl(a);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={};
goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(a){const d=goog.html.trustedtypes.getPolicyPrivateDoNotAccessOrElse();a=d?d.createScriptURL(a):a;return new goog.html.TrustedResourceUrl(a,goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_)};
goog.html.TrustedResourceUrl.stringifyParams_=function(a,d,f){if(null==f)return d;if("string"===typeof f)return f?a+encodeURIComponent(f):"";for(var h in f)if(Object.prototype.hasOwnProperty.call(f,h)){var l=f[h];l=Array.isArray(l)?l:[l];for(var m=0;m<l.length;m++){var p=l[m];null!=p&&(d||=a,d+=(d.length>a.length?"&":"")+encodeURIComponent(h)+"="+encodeURIComponent(String(p)))}}return d};goog.html.SafeUrl=class{constructor(a,d){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=d===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_?a:""}};goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez";goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0;goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()};goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0;
goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR};goog.html.SafeUrl.prototype.toString=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()};goog.html.SafeUrl.unwrap=function(a){if(a instanceof goog.html.SafeUrl&&a.constructor===goog.html.SafeUrl)return a.privateDoNotAccessOrElseSafeUrlWrappedValue_;goog.asserts.fail("expected object of type SafeUrl, got '"+a+"' of type "+goog.typeOf(a));return"type_error:SafeUrl"};
goog.html.SafeUrl.fromConstant=function(a){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(a))};goog.html.SAFE_MIME_TYPE_PATTERN_=RegExp('^(?:audio/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font/\\w+|image/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|video/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\\w+=(?:\\w+|"[\\w;,= ]+"))*$',"i");goog.html.SafeUrl.isSafeMimeType=function(a){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(a)};
goog.html.SafeUrl.fromBlob=function(a){a=goog.html.SafeUrl.isSafeMimeType(a.type)?goog.fs.url.createObjectUrl(a):goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.SafeUrl.revokeObjectUrl=function(a){a=a.getTypedStringValue();a!==goog.html.SafeUrl.INNOCUOUS_STRING&&goog.fs.url.revokeObjectUrl(a)};
goog.html.SafeUrl.fromMediaSource=function(a){goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource");a=a instanceof MediaSource?goog.fs.url.createObjectUrl(a):goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i;
goog.html.SafeUrl.tryFromDataUrl=function(a){a=String(a);a=a.replace(/(%0A|%0D)/g,"");var d=a.match(goog.html.DATA_URL_PATTERN_);return d&&goog.html.SafeUrl.isSafeMimeType(d[1])?goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a):null};goog.html.SafeUrl.fromDataUrl=function(a){return goog.html.SafeUrl.tryFromDataUrl(a)||goog.html.SafeUrl.INNOCUOUS_URL};
goog.html.SafeUrl.fromTelUrl=function(a){goog.string.internal.caseInsensitiveStartsWith(a,"tel:")||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.SIP_URL_PATTERN_=RegExp("^sip[s]?:[+a-z0-9_.!$%&'*\\/=^`{|}~-]+@([a-z0-9-]+\\.)+[a-z0-9]{2,63}$","i");goog.html.SafeUrl.fromSipUrl=function(a){goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(a))||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};
goog.html.SafeUrl.fromFacebookMessengerUrl=function(a){goog.string.internal.caseInsensitiveStartsWith(a,"fb-messenger://share")||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.SafeUrl.fromWhatsAppUrl=function(a){goog.string.internal.caseInsensitiveStartsWith(a,"whatsapp://send")||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};
goog.html.SafeUrl.fromSmsUrl=function(a){goog.string.internal.caseInsensitiveStartsWith(a,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(a)||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.SafeUrl.isSmsUrlBodyValid_=function(a){var d=a.indexOf("#");0<d&&(a=a.substring(0,d));d=a.match(/[?&]body=/gi);if(!d)return!0;if(1<d.length)return!1;a=a.match(/[?&]body=([^&]*)/)[1];if(!a)return!0;try{decodeURIComponent(a)}catch(f){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(a)};
goog.html.SafeUrl.fromSshUrl=function(a){goog.string.internal.caseInsensitiveStartsWith(a,"ssh://")||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(a,d){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,a,d)};
goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(a,d){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,a,d)};goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(a,d){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,a,d)};
goog.html.SafeUrl.sanitizeExtensionUrl_=function(a,d,f){(a=a.exec(d))?(a=a[1],-1==(f instanceof goog.string.Const?[goog.string.Const.unwrap(f)]:f.map(function(h){return goog.string.Const.unwrap(h)})).indexOf(a)&&(d=goog.html.SafeUrl.INNOCUOUS_STRING)):d=goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(d)};goog.html.SafeUrl.fromTrustedResourceUrl=function(a){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(a))};
goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_;goog.html.SafeUrl.trySanitize=function(a){if(a instanceof goog.html.SafeUrl)return a;a="object"==typeof a&&a.implementsGoogStringTypedString?a.getTypedStringValue():String(a);return goog.html.SAFE_URL_PATTERN_.test(a)?goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a):goog.html.SafeUrl.tryFromDataUrl(a)};
goog.html.SafeUrl.sanitize=function(a){return goog.html.SafeUrl.trySanitize(a)||goog.html.SafeUrl.INNOCUOUS_URL};
goog.html.SafeUrl.sanitizeAssertUnchanged=function(a,d){if(a instanceof goog.html.SafeUrl)return a;a="object"==typeof a&&a.implementsGoogStringTypedString?a.getTypedStringValue():String(a);if(d&&/^data:/i.test(a)&&(d=goog.html.SafeUrl.fromDataUrl(a),d.getTypedStringValue()==a))return d;goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(a),"%s does not match the safe URL pattern",a)||(a=goog.html.SafeUrl.INNOCUOUS_STRING);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};
goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={};goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(a){return new goog.html.SafeUrl(a,goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_)};goog.html.SafeUrl.INNOCUOUS_URL=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.SafeUrl.INNOCUOUS_STRING);goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank");const module$contents$goog$html$SafeStyle_CONSTRUCTOR_TOKEN_PRIVATE={};
class module$contents$goog$html$SafeStyle_SafeStyle{constructor(a,d){this.privateDoNotAccessOrElseSafeStyleWrappedValue_=d===module$contents$goog$html$SafeStyle_CONSTRUCTOR_TOKEN_PRIVATE?a:"";this.implementsGoogStringTypedString=!0}static fromConstant(a){a=goog.string.Const.unwrap(a);if(0===a.length)return module$contents$goog$html$SafeStyle_SafeStyle.EMPTY;(0,goog.asserts.assert)((0,goog.string.internal.endsWith)(a,";"),`Last character of style string is not ';': ${a}`);(0,goog.asserts.assert)((0,goog.string.internal.contains)(a,
":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+a);return module$contents$goog$html$SafeStyle_SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(a)}getTypedStringValue(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_}toString(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_.toString()}static unwrap(a){if(a instanceof module$contents$goog$html$SafeStyle_SafeStyle&&a.constructor===module$contents$goog$html$SafeStyle_SafeStyle)return a.privateDoNotAccessOrElseSafeStyleWrappedValue_;
(0,goog.asserts.fail)(`expected object of type SafeStyle, got '${a}`+"' of type "+goog.typeOf(a));return"type_error:SafeStyle"}static createSafeStyleSecurityPrivateDoNotAccessOrElse(a){return new module$contents$goog$html$SafeStyle_SafeStyle(a,module$contents$goog$html$SafeStyle_CONSTRUCTOR_TOKEN_PRIVATE)}static create(a){let d="";for(let f in a)if(Object.prototype.hasOwnProperty.call(a,f)){if(!/^[-_a-zA-Z0-9]+$/.test(f))throw Error(`Name allows only [-_a-zA-Z0-9], got: ${f}`);let h=a[f];null!=h&&
(h=Array.isArray(h)?h.map(module$contents$goog$html$SafeStyle_sanitizePropertyValue).join(" "):module$contents$goog$html$SafeStyle_sanitizePropertyValue(h),d+=`${f}:${h};`)}return d?module$contents$goog$html$SafeStyle_SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(d):module$contents$goog$html$SafeStyle_SafeStyle.EMPTY}static concat(a){let d="";const f=h=>{Array.isArray(h)?h.forEach(f):d+=module$contents$goog$html$SafeStyle_SafeStyle.unwrap(h)};Array.prototype.forEach.call(arguments,f);
return d?module$contents$goog$html$SafeStyle_SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(d):module$contents$goog$html$SafeStyle_SafeStyle.EMPTY}}module$contents$goog$html$SafeStyle_SafeStyle.EMPTY=module$contents$goog$html$SafeStyle_SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse("");module$contents$goog$html$SafeStyle_SafeStyle.INNOCUOUS_STRING="zClosurez";
function module$contents$goog$html$SafeStyle_sanitizePropertyValue(a){if(a instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(a).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';a=a instanceof goog.string.Const?goog.string.Const.unwrap(a):module$contents$goog$html$SafeStyle_sanitizePropertyValueString(String(a));if(/[{;}]/.test(a))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[a]);return a}
function module$contents$goog$html$SafeStyle_sanitizePropertyValueString(a){const d=a.replace(module$contents$goog$html$SafeStyle_FUNCTIONS_RE,"$1").replace(module$contents$goog$html$SafeStyle_FUNCTIONS_RE,"$1").replace(module$contents$goog$html$SafeStyle_URL_RE,"url");if(module$contents$goog$html$SafeStyle_VALUE_RE.test(d)){if(module$contents$goog$html$SafeStyle_COMMENT_RE.test(a))return(0,goog.asserts.fail)(`String value disallows comments, got: ${a}`),module$contents$goog$html$SafeStyle_SafeStyle.INNOCUOUS_STRING;
if(!module$contents$goog$html$SafeStyle_hasBalancedQuotes(a))return(0,goog.asserts.fail)(`String value requires balanced quotes, got: ${a}`),module$contents$goog$html$SafeStyle_SafeStyle.INNOCUOUS_STRING;if(!module$contents$goog$html$SafeStyle_hasBalancedSquareBrackets(a))return(0,goog.asserts.fail)("String value requires balanced square brackets and one identifier per pair of brackets, got: "+a),module$contents$goog$html$SafeStyle_SafeStyle.INNOCUOUS_STRING}else return(0,goog.asserts.fail)(`String value allows only ${module$contents$goog$html$SafeStyle_VALUE_ALLOWED_CHARS}`+
" and simple functions, got: "+a),module$contents$goog$html$SafeStyle_SafeStyle.INNOCUOUS_STRING;return module$contents$goog$html$SafeStyle_sanitizeUrl(a)}function module$contents$goog$html$SafeStyle_hasBalancedQuotes(a){let d=!0,f=!0;for(let h=0;h<a.length;h++){const l=a.charAt(h);"'"==l&&f?d=!d:'"'==l&&d&&(f=!f)}return d&&f}
function module$contents$goog$html$SafeStyle_hasBalancedSquareBrackets(a){let d=!0;const f=/^[-_a-zA-Z0-9]$/;for(let h=0;h<a.length;h++){const l=a.charAt(h);if("]"==l){if(d)return!1;d=!0}else if("["==l){if(!d)return!1;d=!1}else if(!d&&!f.test(l))return!1}return d}
const module$contents$goog$html$SafeStyle_VALUE_ALLOWED_CHARS="[-,.\"'%_!#/ a-zA-Z0-9\\[\\]]",module$contents$goog$html$SafeStyle_VALUE_RE=new RegExp(`^${module$contents$goog$html$SafeStyle_VALUE_ALLOWED_CHARS}+\$`),module$contents$goog$html$SafeStyle_URL_RE=RegExp("\\b(url\\([ \t\n]*)('[ -&(-\\[\\]-~]*'|\"[ !#-\\[\\]-~]*\"|[!#-&*-\\[\\]-~]*)([ \t\n]*\\))","g"),module$contents$goog$html$SafeStyle_ALLOWED_FUNCTIONS="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)? var".split(" "),
module$contents$goog$html$SafeStyle_FUNCTIONS_RE=new RegExp("\\b("+module$contents$goog$html$SafeStyle_ALLOWED_FUNCTIONS.join("|")+")\\([-+*/0-9a-zA-Z.%#\\[\\], ]+\\)","g"),module$contents$goog$html$SafeStyle_COMMENT_RE=/\/\*/;function module$contents$goog$html$SafeStyle_sanitizeUrl(a){return a.replace(module$contents$goog$html$SafeStyle_URL_RE,(d,f,h,l)=>{let m="";h=h.replace(/^(['"])(.*)\1$/,(p,q,u)=>{m=q;return u});d=goog.html.SafeUrl.sanitize(h).getTypedStringValue();return f+m+d+m+l})}
goog.html.SafeStyle=module$contents$goog$html$SafeStyle_SafeStyle;const module$contents$goog$html$SafeStyleSheet_CONSTRUCTOR_TOKEN_PRIVATE={};
class module$contents$goog$html$SafeStyleSheet_SafeStyleSheet{constructor(a,d){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=d===module$contents$goog$html$SafeStyleSheet_CONSTRUCTOR_TOKEN_PRIVATE?a:"";this.implementsGoogStringTypedString=!0}static createRule(a,d){if((0,goog.string.internal.contains)(a,"<"))throw Error(`Selector does not allow '<', got: ${a}`);const f=a.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(f))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+
a);if(!module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.hasBalancedBrackets_(f))throw Error("() and [] in selector must be balanced, got: "+a);d instanceof module$contents$goog$html$SafeStyle_SafeStyle||(d=module$contents$goog$html$SafeStyle_SafeStyle.create(d));a=`${a}{`+module$contents$goog$html$SafeStyle_SafeStyle.unwrap(d).replace(/</g,"\\3C ")+"}";return module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(a)}static hasBalancedBrackets_(a){const d=
{"(":")","[":"]"},f=[];for(let h=0;h<a.length;h++){const l=a[h];if(d[l])f.push(d[l]);else if(module$contents$goog$object_contains(d,l)&&f.pop()!=l)return!1}return 0==f.length}static concat(a){let d="";const f=h=>{Array.isArray(h)?h.forEach(f):d+=module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.unwrap(h)};Array.prototype.forEach.call(arguments,f);return module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(d)}static fromConstant(a){a=goog.string.Const.unwrap(a);
if(0===a.length)return module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.EMPTY;(0,goog.asserts.assert)(!(0,goog.string.internal.contains)(a,"<"),`Forbidden '<' character in style sheet string: ${a}`);return module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(a)}getTypedStringValue(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_}static unwrap(a){if(a instanceof module$contents$goog$html$SafeStyleSheet_SafeStyleSheet&&
a.constructor===module$contents$goog$html$SafeStyleSheet_SafeStyleSheet)return a.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_;(0,goog.asserts.fail)("expected object of type SafeStyleSheet, got '"+a+"' of type "+goog.typeOf(a));return"type_error:SafeStyleSheet"}static createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(a){return new module$contents$goog$html$SafeStyleSheet_SafeStyleSheet(a,module$contents$goog$html$SafeStyleSheet_CONSTRUCTOR_TOKEN_PRIVATE)}}
module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.prototype.toString=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_.toString()};module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.EMPTY=module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse("");goog.html.SafeStyleSheet=module$contents$goog$html$SafeStyleSheet_SafeStyleSheet;goog.dom.tags={};goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};goog.dom.tags.isVoidTag=function(a){return!0===goog.dom.tags.VOID_TAGS_[a]};const module$contents$goog$html$SafeHtml_CONSTRUCTOR_TOKEN_PRIVATE={};
class module$contents$goog$html$SafeHtml_SafeHtml{constructor(a,d,f){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=f===module$contents$goog$html$SafeHtml_CONSTRUCTOR_TOKEN_PRIVATE?a:"";this.dir_=d;this.implementsGoogStringTypedString=this.implementsGoogI18nBidiDirectionalString=!0}getDirection(){return this.dir_}getTypedStringValue(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()}toString(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()}static unwrap(a){return module$contents$goog$html$SafeHtml_SafeHtml.unwrapTrustedHTML(a).toString()}static unwrapTrustedHTML(a){if(a instanceof module$contents$goog$html$SafeHtml_SafeHtml&&
a.constructor===module$contents$goog$html$SafeHtml_SafeHtml)return a.privateDoNotAccessOrElseSafeHtmlWrappedValue_;goog.asserts.fail(`expected object of type SafeHtml, got '${a}' of type `+goog.typeOf(a));return"type_error:SafeHtml"}static htmlEscape(a){if(a instanceof module$contents$goog$html$SafeHtml_SafeHtml)return a;const d="object"==typeof a;let f=null;d&&a.implementsGoogI18nBidiDirectionalString&&(f=a.getDirection());a=d&&a.implementsGoogStringTypedString?a.getTypedStringValue():String(a);
return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(a),f)}static htmlEscapePreservingNewlines(a){if(a instanceof module$contents$goog$html$SafeHtml_SafeHtml)return a;a=module$contents$goog$html$SafeHtml_SafeHtml.htmlEscape(a);return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(module$contents$goog$html$SafeHtml_SafeHtml.unwrap(a)),a.getDirection())}static htmlEscapePreservingNewlinesAndSpaces(a){if(a instanceof
module$contents$goog$html$SafeHtml_SafeHtml)return a;a=module$contents$goog$html$SafeHtml_SafeHtml.htmlEscape(a);return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(module$contents$goog$html$SafeHtml_SafeHtml.unwrap(a)),a.getDirection())}static comment(a){return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("\x3c!--"+goog.string.internal.htmlEscape(a)+"--\x3e",null)}static create(a,
d,f){module$contents$goog$html$SafeHtml_SafeHtml.verifyTagName(String(a));return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(a),d,f)}static verifyTagName(a){if(!module$contents$goog$html$SafeHtml_VALID_NAMES_IN_TAG.test(a))throw Error(module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES?`Invalid tag name <${a}>.`:"");if(a.toUpperCase()in module$contents$goog$html$SafeHtml_NOT_ALLOWED_TAG_NAMES)throw Error(module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES?
`Tag name <${a}> is not allowed for SafeHtml.`:"");}static createIframe(a,d,f,h){a&&goog.html.TrustedResourceUrl.unwrap(a);const l={};l.src=a||null;l.srcdoc=d&&module$contents$goog$html$SafeHtml_SafeHtml.unwrap(d);a=module$contents$goog$html$SafeHtml_SafeHtml.combineAttributes(l,{sandbox:""},f);return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",a,h)}static createSandboxIframe(a,d,f,h){if(!module$contents$goog$html$SafeHtml_SafeHtml.canUseSandboxIframe())throw Error(module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES?
"The browser does not support sandboxed iframes.":"");const l={};l.src=a?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(a)):null;l.srcdoc=d||null;l.sandbox="";a=module$contents$goog$html$SafeHtml_SafeHtml.combineAttributes(l,{},f);return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",a,h)}static canUseSandboxIframe(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype}static createScriptSrc(a,d){goog.html.TrustedResourceUrl.unwrap(a);
a=module$contents$goog$html$SafeHtml_SafeHtml.combineAttributes({src:a},{},d);return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",a)}static createScript(a,d){for(var f in d)if(Object.prototype.hasOwnProperty.call(d,f)){var h=f.toLowerCase();if("language"==h||"src"==h||"text"==h||"type"==h)throw Error(module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES?`Cannot set "${h}" attribute`:"");}f="";a=module$contents$goog$array_concat(a);
for(h=0;h<a.length;h++)f+=module$contents$goog$html$SafeScript_SafeScript.unwrap(a[h]);a=module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(f,goog.i18n.bidi.Dir.NEUTRAL);return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",d,a)}static createStyle(a,d){d=module$contents$goog$html$SafeHtml_SafeHtml.combineAttributes({type:"text/css"},{},d);let f="";a=module$contents$goog$array_concat(a);for(let h=0;h<a.length;h++)f+=
module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.unwrap(a[h]);a=module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(f,goog.i18n.bidi.Dir.NEUTRAL);return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",d,a)}static createMetaRefresh(a,d){a=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(a));(module$contents$goog$labs$userAgent$browser_matchIE()||module$contents$goog$labs$userAgent$browser_matchEdgeHtml())&&
goog.string.internal.contains(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'");return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(d||0)+"; url="+a})}static createWithDir(a,d,f,h){d=module$contents$goog$html$SafeHtml_SafeHtml.create(d,f,h);d.dir_=a;return d}static join(a,d){a=module$contents$goog$html$SafeHtml_SafeHtml.htmlEscape(a);let f=a.getDirection();const h=[],l=m=>{Array.isArray(m)?m.forEach(l):(m=module$contents$goog$html$SafeHtml_SafeHtml.htmlEscape(m),
h.push(module$contents$goog$html$SafeHtml_SafeHtml.unwrap(m)),m=m.getDirection(),f==goog.i18n.bidi.Dir.NEUTRAL?f=m:m!=goog.i18n.bidi.Dir.NEUTRAL&&f!=m&&(f=null))};d.forEach(l);return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(h.join(module$contents$goog$html$SafeHtml_SafeHtml.unwrap(a)),f)}static concat(a){return module$contents$goog$html$SafeHtml_SafeHtml.join(module$contents$goog$html$SafeHtml_SafeHtml.EMPTY,Array.prototype.slice.call(arguments))}static concatWithDir(a,
d){const f=module$contents$goog$html$SafeHtml_SafeHtml.concat(Array.prototype.slice.call(arguments,1));f.dir_=a;return f}static createSafeHtmlSecurityPrivateDoNotAccessOrElse(a,d){const f=goog.html.trustedtypes.getPolicyPrivateDoNotAccessOrElse();a=f?f.createHTML(a):a;return new module$contents$goog$html$SafeHtml_SafeHtml(a,d,module$contents$goog$html$SafeHtml_CONSTRUCTOR_TOKEN_PRIVATE)}static createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(a,d,f){var h=null;let l;l=`<${a}`+module$contents$goog$html$SafeHtml_SafeHtml.stringifyAttributes(a,
d);null==f?f=[]:Array.isArray(f)||(f=[f]);goog.dom.tags.isVoidTag(a.toLowerCase())?(goog.asserts.assert(!f.length,`Void tag <${a}> does not allow content.`),l+=">"):(h=module$contents$goog$html$SafeHtml_SafeHtml.concat(f),l+=">"+module$contents$goog$html$SafeHtml_SafeHtml.unwrap(h)+"</"+a+">",h=h.getDirection());(a=d&&d.dir)&&(h=/^(ltr|rtl|auto)$/i.test(a)?goog.i18n.bidi.Dir.NEUTRAL:null);return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(l,h)}static stringifyAttributes(a,
d){let f="";if(d)for(let h in d)if(Object.prototype.hasOwnProperty.call(d,h)){if(!module$contents$goog$html$SafeHtml_VALID_NAMES_IN_TAG.test(h))throw Error(module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES?`Invalid attribute name "${h}".`:"");const l=d[h];null!=l&&(f+=" "+module$contents$goog$html$SafeHtml_getAttrNameAndValue(a,h,l))}return f}static combineAttributes(a,d,f){const h={};for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(goog.asserts.assert(l.toLowerCase()==l,
"Must be lower case"),h[l]=a[l]);for(const m in d)Object.prototype.hasOwnProperty.call(d,m)&&(goog.asserts.assert(m.toLowerCase()==m,"Must be lower case"),h[m]=d[m]);if(f)for(const m in f)if(Object.prototype.hasOwnProperty.call(f,m)){l=m.toLowerCase();if(l in a)throw Error(module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES?`Cannot override "${l}" attribute, got "`+m+'" with value "'+f[m]+'"':"");l in d&&delete h[l];h[m]=f[m]}return h}}
module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG;module$contents$goog$html$SafeHtml_SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0;module$contents$goog$html$SafeHtml_SafeHtml.from=module$contents$goog$html$SafeHtml_SafeHtml.htmlEscape;
const module$contents$goog$html$SafeHtml_VALID_NAMES_IN_TAG=/^[a-zA-Z0-9-]+$/,module$contents$goog$html$SafeHtml_URL_ATTRIBUTES={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},module$contents$goog$html$SafeHtml_NOT_ALLOWED_TAG_NAMES={[goog.dom.TagName.APPLET]:!0,[goog.dom.TagName.BASE]:!0,[goog.dom.TagName.EMBED]:!0,[goog.dom.TagName.IFRAME]:!0,[goog.dom.TagName.LINK]:!0,[goog.dom.TagName.MATH]:!0,[goog.dom.TagName.META]:!0,[goog.dom.TagName.OBJECT]:!0,[goog.dom.TagName.SCRIPT]:!0,
[goog.dom.TagName.STYLE]:!0,[goog.dom.TagName.SVG]:!0,[goog.dom.TagName.TEMPLATE]:!0};
function module$contents$goog$html$SafeHtml_getAttrNameAndValue(a,d,f){if(f instanceof goog.string.Const)f=goog.string.Const.unwrap(f);else if("style"==d.toLowerCase())if(module$contents$goog$html$SafeHtml_SafeHtml.SUPPORT_STYLE_ATTRIBUTE)f=module$contents$goog$html$SafeHtml_getStyleValue(f);else throw Error(module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");else{if(/^on/i.test(d))throw Error(module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES?
`Attribute "${d}`+'" requires goog.string.Const value, "'+f+'" given.':"");if(d.toLowerCase()in module$contents$goog$html$SafeHtml_URL_ATTRIBUTES)if(f instanceof goog.html.TrustedResourceUrl)f=goog.html.TrustedResourceUrl.unwrap(f);else if(f instanceof goog.html.SafeUrl)f=goog.html.SafeUrl.unwrap(f);else if("string"===typeof f)f=goog.html.SafeUrl.sanitize(f).getTypedStringValue();else throw Error(module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES?`Attribute "${d}" on tag "${a}`+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+
f+'" given.':"");}f.implementsGoogStringTypedString&&(f=f.getTypedStringValue());goog.asserts.assert("string"===typeof f||"number"===typeof f,"String or number value expected, got "+typeof f+" with value: "+f);return`${d}="`+goog.string.internal.htmlEscape(String(f))+'"'}
function module$contents$goog$html$SafeHtml_getStyleValue(a){if(!goog.isObject(a))throw Error(module$contents$goog$html$SafeHtml_SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof a+" given: "+a:"");a instanceof module$contents$goog$html$SafeStyle_SafeStyle||(a=module$contents$goog$html$SafeStyle_SafeStyle.create(a));return module$contents$goog$html$SafeStyle_SafeStyle.unwrap(a)}
module$contents$goog$html$SafeHtml_SafeHtml.DOCTYPE_HTML=function(){return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL)}();module$contents$goog$html$SafeHtml_SafeHtml.EMPTY=new module$contents$goog$html$SafeHtml_SafeHtml(goog.global.trustedTypes&&goog.global.trustedTypes.emptyHTML||"",goog.i18n.bidi.Dir.NEUTRAL,module$contents$goog$html$SafeHtml_CONSTRUCTOR_TOKEN_PRIVATE);
module$contents$goog$html$SafeHtml_SafeHtml.BR=function(){return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL)}();goog.html.SafeHtml=module$contents$goog$html$SafeHtml_SafeHtml;goog.html.uncheckedconversions={};goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(a,d,f){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(d,f||null)};
goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(a,d){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(d)};
goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(a,d){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return module$contents$goog$html$SafeStyle_SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(d)};
goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(a,d){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(d)};
goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(a,d){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(d)};
goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(a,d){goog.asserts.assertString(goog.string.Const.unwrap(a),"must provide justification");goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(a)),"must provide non-empty justification");return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(d)};goog.dom.safe={};goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"};goog.dom.safe.insertAdjacentHtml=function(a,d,f){a.insertAdjacentHTML(d,module$contents$goog$html$SafeHtml_SafeHtml.unwrapTrustedHTML(f))};goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0};
goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&"undefined"===typeof document)return!1;var a=document.createElement("div"),d=document.createElement("div");d.appendChild(document.createElement("div"));a.appendChild(d);if(goog.DEBUG&&!a.firstChild)return!1;d=a.firstChild.firstChild;a.innerHTML=module$contents$goog$html$SafeHtml_SafeHtml.unwrapTrustedHTML(module$contents$goog$html$SafeHtml_SafeHtml.EMPTY);return!d.parentElement});
goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(a,d){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;a.lastChild;)a.removeChild(a.lastChild);a.innerHTML=module$contents$goog$html$SafeHtml_SafeHtml.unwrapTrustedHTML(d)};
goog.dom.safe.setInnerHtml=function(a,d){if(goog.asserts.ENABLE_ASSERTS&&a.tagName){var f=a.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[f])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+a.tagName+".");}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(a,d)};
goog.dom.safe.setInnerHtmlFromConstant=function(a,d){goog.dom.safe.setInnerHtml(a,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Constant HTML to be immediatelly used."),goog.string.Const.unwrap(d)))};goog.dom.safe.setOuterHtml=function(a,d){a.outerHTML=module$contents$goog$html$SafeHtml_SafeHtml.unwrapTrustedHTML(d)};
goog.dom.safe.setFormElementAction=function(a,d){d=d instanceof goog.html.SafeUrl?d:goog.html.SafeUrl.sanitizeAssertUnchanged(d);goog.dom.asserts.assertIsHTMLFormElement(a).action=goog.html.SafeUrl.unwrap(d)};goog.dom.safe.setButtonFormAction=function(a,d){d=d instanceof goog.html.SafeUrl?d:goog.html.SafeUrl.sanitizeAssertUnchanged(d);goog.dom.asserts.assertIsHTMLButtonElement(a).formAction=goog.html.SafeUrl.unwrap(d)};
goog.dom.safe.setInputFormAction=function(a,d){d=d instanceof goog.html.SafeUrl?d:goog.html.SafeUrl.sanitizeAssertUnchanged(d);goog.dom.asserts.assertIsHTMLInputElement(a).formAction=goog.html.SafeUrl.unwrap(d)};goog.dom.safe.setStyle=function(a,d){a.style.cssText=module$contents$goog$html$SafeStyle_SafeStyle.unwrap(d)};goog.dom.safe.documentWrite=function(a,d){a.write(module$contents$goog$html$SafeHtml_SafeHtml.unwrapTrustedHTML(d))};
goog.dom.safe.setAnchorHref=function(a,d){goog.dom.asserts.assertIsHTMLAnchorElement(a);d=d instanceof goog.html.SafeUrl?d:goog.html.SafeUrl.sanitizeAssertUnchanged(d);a.href=goog.html.SafeUrl.unwrap(d)};goog.dom.safe.setImageSrc=function(a,d){goog.dom.asserts.assertIsHTMLImageElement(a);if(!(d instanceof goog.html.SafeUrl)){var f=/^data:image\//i.test(d);d=goog.html.SafeUrl.sanitizeAssertUnchanged(d,f)}a.src=goog.html.SafeUrl.unwrap(d)};
goog.dom.safe.setAudioSrc=function(a,d){goog.dom.asserts.assertIsHTMLAudioElement(a);if(!(d instanceof goog.html.SafeUrl)){var f=/^data:audio\//i.test(d);d=goog.html.SafeUrl.sanitizeAssertUnchanged(d,f)}a.src=goog.html.SafeUrl.unwrap(d)};goog.dom.safe.setVideoSrc=function(a,d){goog.dom.asserts.assertIsHTMLVideoElement(a);if(!(d instanceof goog.html.SafeUrl)){var f=/^data:video\//i.test(d);d=goog.html.SafeUrl.sanitizeAssertUnchanged(d,f)}a.src=goog.html.SafeUrl.unwrap(d)};
goog.dom.safe.setEmbedSrc=function(a,d){goog.dom.asserts.assertIsHTMLEmbedElement(a);a.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(d)};goog.dom.safe.setFrameSrc=function(a,d){goog.dom.asserts.assertIsHTMLFrameElement(a);a.src=goog.html.TrustedResourceUrl.unwrap(d)};goog.dom.safe.setIframeSrc=function(a,d){goog.dom.asserts.assertIsHTMLIFrameElement(a);a.src=goog.html.TrustedResourceUrl.unwrap(d)};
goog.dom.safe.setIframeSrcdoc=function(a,d){goog.dom.asserts.assertIsHTMLIFrameElement(a);a.srcdoc=module$contents$goog$html$SafeHtml_SafeHtml.unwrapTrustedHTML(d)};
goog.dom.safe.setLinkHrefAndRel=function(a,d,f){goog.dom.asserts.assertIsHTMLLinkElement(a);a.rel=f;goog.string.internal.caseInsensitiveContains(f,"stylesheet")?(goog.asserts.assert(d instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),a.href=goog.html.TrustedResourceUrl.unwrap(d),(d=goog.dom.safe.getStyleNonce(a.ownerDocument&&a.ownerDocument.defaultView))&&a.setAttribute("nonce",d)):a.href=d instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(d):
d instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(d):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(d))};goog.dom.safe.setObjectData=function(a,d){goog.dom.asserts.assertIsHTMLObjectElement(a);a.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(d)};goog.dom.safe.setScriptSrc=function(a,d){goog.dom.asserts.assertIsHTMLScriptElement(a);a.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(d);goog.dom.safe.setNonceForScriptElement_(a)};
goog.dom.safe.setScriptContent=function(a,d){goog.dom.asserts.assertIsHTMLScriptElement(a);a.textContent=module$contents$goog$html$SafeScript_SafeScript.unwrapTrustedScript(d);goog.dom.safe.setNonceForScriptElement_(a)};goog.dom.safe.setNonceForScriptElement_=function(a){const d=goog.dom.safe.getScriptNonce(a.ownerDocument&&a.ownerDocument.defaultView);d&&a.setAttribute("nonce",d)};
goog.dom.safe.setLocationHref=function(a,d){goog.dom.asserts.assertIsLocation(a);d=d instanceof goog.html.SafeUrl?d:goog.html.SafeUrl.sanitizeAssertUnchanged(d);a.href=goog.html.SafeUrl.unwrap(d)};goog.dom.safe.assignLocation=function(a,d){goog.dom.asserts.assertIsLocation(a);d=d instanceof goog.html.SafeUrl?d:goog.html.SafeUrl.sanitizeAssertUnchanged(d);a.assign(goog.html.SafeUrl.unwrap(d))};
goog.dom.safe.replaceLocation=function(a,d){d=d instanceof goog.html.SafeUrl?d:goog.html.SafeUrl.sanitizeAssertUnchanged(d);a.replace(goog.html.SafeUrl.unwrap(d))};goog.dom.safe.openInWindow=function(a,d,f,h){a=a instanceof goog.html.SafeUrl?a:goog.html.SafeUrl.sanitizeAssertUnchanged(a);d=d||goog.global;f=f instanceof goog.string.Const?goog.string.Const.unwrap(f):f||"";return void 0!==h?d.open(goog.html.SafeUrl.unwrap(a),f,h):d.open(goog.html.SafeUrl.unwrap(a),f)};
goog.dom.safe.parseFromStringHtml=function(a,d){return goog.dom.safe.parseFromString(a,d,"text/html")};goog.dom.safe.parseFromString=function(a,d,f){return a.parseFromString(module$contents$goog$html$SafeHtml_SafeHtml.unwrapTrustedHTML(d),f)};
goog.dom.safe.createImageFromBlob=function(a){if(!/^image\/.*/g.test(a.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var d=goog.global.URL.createObjectURL(a);a=new goog.global.Image;a.onload=function(){goog.global.URL.revokeObjectURL(d)};goog.dom.safe.setImageSrc(a,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),d));return a};goog.dom.safe.createContextualFragment=function(a,d){return a.createContextualFragment(module$contents$goog$html$SafeHtml_SafeHtml.unwrapTrustedHTML(d))};
goog.dom.safe.getScriptNonce=function(a){return goog.dom.safe.getNonce_("script[nonce]",a)};goog.dom.safe.getStyleNonce=function(a){return goog.dom.safe.getNonce_('style[nonce],link[rel="stylesheet"][nonce]',a)};goog.dom.safe.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/;goog.dom.safe.getNonce_=function(a,d){d=(d||goog.global).document;return d.querySelector?(a=d.querySelector(a))&&(a=a.nonce||a.getAttribute("nonce"))&&goog.dom.safe.NONCE_PATTERN_.test(a)?a:"":""};goog.math.Coordinate=function(a,d){this.x=void 0!==a?a:0;this.y=void 0!==d?d:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"});goog.math.Coordinate.prototype.equals=function(a){return a instanceof goog.math.Coordinate&&goog.math.Coordinate.equals(this,a)};goog.math.Coordinate.equals=function(a,d){return a==d?!0:a&&d?a.x==d.x&&a.y==d.y:!1};
goog.math.Coordinate.distance=function(a,d){var f=a.x-d.x;a=a.y-d.y;return Math.sqrt(f*f+a*a)};goog.math.Coordinate.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)};goog.math.Coordinate.azimuth=function(a){return goog.math.angle(0,0,a.x,a.y)};goog.math.Coordinate.squaredDistance=function(a,d){var f=a.x-d.x;a=a.y-d.y;return f*f+a*a};goog.math.Coordinate.difference=function(a,d){return new goog.math.Coordinate(a.x-d.x,a.y-d.y)};
goog.math.Coordinate.sum=function(a,d){return new goog.math.Coordinate(a.x+d.x,a.y+d.y)};goog.math.Coordinate.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};goog.math.Coordinate.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};goog.math.Coordinate.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
goog.math.Coordinate.prototype.translate=function(a,d){a instanceof goog.math.Coordinate?(this.x+=a.x,this.y+=a.y):(this.x+=Number(a),"number"===typeof d&&(this.y+=d));return this};goog.math.Coordinate.prototype.scale=function(a,d){this.x*=a;this.y*="number"===typeof d?d:a;return this};goog.math.Coordinate.prototype.rotateRadians=function(a,d){d=d||new goog.math.Coordinate(0,0);var f=this.x,h=this.y,l=Math.cos(a);a=Math.sin(a);this.x=(f-d.x)*l-(h-d.y)*a+d.x;this.y=(f-d.x)*a+(h-d.y)*l+d.y};
goog.math.Coordinate.prototype.rotateDegrees=function(a,d){this.rotateRadians(goog.math.toRadians(a),d)};goog.math.Size=function(a,d){this.width=a;this.height=d};goog.math.Size.equals=function(a,d){return a==d?!0:a&&d?a.width==d.width&&a.height==d.height:!1};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"});goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};
goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
goog.math.Size.prototype.fitsInside=function(a){return this.width<=a.width&&this.height<=a.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(a,d){this.width*=a;this.height*="number"===typeof d?d:a;return this};
goog.math.Size.prototype.scaleToCover=function(a){a=this.aspectRatio()<=a.aspectRatio()?a.width/this.width:a.height/this.height;return this.scale(a)};goog.math.Size.prototype.scaleToFit=function(a){a=this.aspectRatio()>a.aspectRatio()?a.width/this.width:a.height/this.height;return this.scale(a)};goog.string.DETECT_DOUBLE_ESCAPING=!1;goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1;goog.string.Unicode={NBSP:"Â "};goog.string.startsWith=goog.string.internal.startsWith;goog.string.endsWith=goog.string.internal.endsWith;goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith;goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith;goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals;
goog.string.subs=function(a,d){const f=a.split("%s");let h="";const l=Array.prototype.slice.call(arguments,1);for(;l.length&&1<f.length;)h+=f.shift()+l.shift();return h+f.join("%s")};goog.string.collapseWhitespace=function(a){return a.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace;goog.string.isEmptyString=function(a){return 0==a.length};goog.string.isEmpty=goog.string.isEmptyOrWhitespace;
goog.string.isEmptyOrWhitespaceSafe=function(a){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(a))};goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe;goog.string.isBreakingWhitespace=function(a){return!/[^\t\n\r ]/.test(a)};goog.string.isAlpha=function(a){return!/[^a-zA-Z]/.test(a)};goog.string.isNumeric=function(a){return!/[^0-9]/.test(a)};goog.string.isAlphaNumeric=function(a){return!/[^a-zA-Z0-9]/.test(a)};goog.string.isSpace=function(a){return" "==a};
goog.string.isUnicodeChar=function(a){return 1==a.length&&" "<=a&&"~">=a||"Â€"<=a&&"ï¿½">=a};goog.string.stripNewlines=function(a){return a.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(a){return a.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(a){return a.replace(/\xa0|[ \t]+/g," ")};
goog.string.collapseBreakingSpaces=function(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=goog.string.internal.trim;goog.string.trimLeft=function(a){return a.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(a){return a.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare;
goog.string.numberAwareCompare_=function(a,d,f){if(a==d)return 0;if(!a)return-1;if(!d)return 1;const h=a.toLowerCase().match(f),l=d.toLowerCase().match(f),m=Math.min(h.length,l.length);for(let p=0;p<m;p++){f=h[p];const q=l[p];if(f!=q)return a=parseInt(f,10),!isNaN(a)&&(d=parseInt(q,10),!isNaN(d)&&a-d)?a-d:f<q?-1:1}return h.length!=l.length?h.length-l.length:a<d?-1:1};goog.string.intAwareCompare=function(a,d){return goog.string.numberAwareCompare_(a,d,/\d+|\D+/g)};
goog.string.floatAwareCompare=function(a,d){return goog.string.numberAwareCompare_(a,d,/\d+|\.\d+|\D+/g)};goog.string.numerateCompare=goog.string.floatAwareCompare;goog.string.urlEncode=function(a){return encodeURIComponent(String(a))};goog.string.urlDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};goog.string.newLineToBr=goog.string.internal.newLineToBr;
goog.string.htmlEscape=function(a,d){a=goog.string.internal.htmlEscape(a,d);goog.string.DETECT_DOUBLE_ESCAPING&&(a=a.replace(goog.string.E_RE_,"&#101;"));return a};goog.string.E_RE_=/e/g;goog.string.unescapeEntities=function(a){return goog.string.contains(a,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(a):goog.string.unescapePureXmlEntities_(a):a};
goog.string.unescapeEntitiesWithDocument=function(a,d){return goog.string.contains(a,"&")?goog.string.unescapeEntitiesUsingDom_(a,d):a};
goog.string.unescapeEntitiesUsingDom_=function(a,d){const f={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};let h;h=d?d.createElement("div"):goog.global.document.createElement("div");return a.replace(goog.string.HTML_ENTITY_PATTERN_,function(l,m){let p=f[l];if(p)return p;"#"==m.charAt(0)&&(m=Number("0"+m.substr(1)),isNaN(m)||(p=String.fromCharCode(m)));p||(goog.dom.safe.setInnerHtml(h,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),
l+" ")),p=h.firstChild.nodeValue.slice(0,-1));return f[l]=p})};goog.string.unescapePureXmlEntities_=function(a){return a.replace(/&([^;]+);/g,function(d,f){switch(f){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:return"#"!=f.charAt(0)||(f=Number("0"+f.substr(1)),isNaN(f))?d:String.fromCharCode(f)}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(a,d){return goog.string.newLineToBr(a.replace(/  /g," &#160;"),d)};
goog.string.preserveSpaces=function(a){return a.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)};goog.string.stripQuotes=function(a,d){const f=d.length;for(let h=0;h<f;h++){const l=1==f?d:d.charAt(h);if(a.charAt(0)==l&&a.charAt(a.length-1)==l)return a.substring(1,a.length-1)}return a};goog.string.truncate=function(a,d,f){f&&(a=goog.string.unescapeEntities(a));a.length>d&&(a=a.substring(0,d-3)+"...");f&&(a=goog.string.htmlEscape(a));return a};
goog.string.truncateMiddle=function(a,d,f,h){f&&(a=goog.string.unescapeEntities(a));if(h&&a.length>d){h>d&&(h=d);var l=a.length-h;a=a.substring(0,d-h)+"..."+a.substring(l)}else a.length>d&&(h=Math.floor(d/2),l=a.length-h,h+=d%2,a=a.substring(0,h)+"..."+a.substring(l));f&&(a=goog.string.htmlEscape(a));return a};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(a){a=String(a);const d=['"'];for(let f=0;f<a.length;f++){const h=a.charAt(f),l=h.charCodeAt(0);d[f+1]=goog.string.specialEscapeChars_[h]||(31<l&&127>l?h:goog.string.escapeChar(h))}d.push('"');return d.join("")};goog.string.escapeString=function(a){const d=[];for(let f=0;f<a.length;f++)d[f]=goog.string.escapeChar(a.charAt(f));return d.join("")};
goog.string.escapeChar=function(a){if(a in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[a];if(a in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[a]=goog.string.specialEscapeChars_[a];let d;const f=a.charCodeAt(0);if(31<f&&127>f)d=a;else{if(256>f){if(d="\\x",16>f||256<f)d+="0"}else d="\\u",4096>f&&(d+="0");d+=f.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[a]=d};goog.string.contains=goog.string.internal.contains;
goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains;goog.string.countOf=function(a,d){return a&&d?a.split(d).length-1:0};goog.string.removeAt=function(a,d,f){let h=a;0<=d&&d<a.length&&0<f&&(h=a.substr(0,d)+a.substr(d+f,a.length-d-f));return h};goog.string.remove=function(a,d){return a.replace(d,"")};goog.string.removeAll=function(a,d){d=new RegExp(goog.string.regExpEscape(d),"g");return a.replace(d,"")};
goog.string.replaceAll=function(a,d,f){d=new RegExp(goog.string.regExpEscape(d),"g");return a.replace(d,f.replace(/\$/g,"$$$$"))};goog.string.regExpEscape=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=String.prototype.repeat?function(a,d){return a.repeat(d)}:function(a,d){return Array(d+1).join(a)};
goog.string.padNumber=function(a,d,f){if(!Number.isFinite(a))return String(a);a=void 0!==f?a.toFixed(f):String(a);f=a.indexOf(".");-1===f&&(f=a.length);const h="-"===a[0]?"-":"";h&&(a=a.substring(1));return h+goog.string.repeat("0",Math.max(0,d-f))+a};goog.string.makeSafe=function(a){return null==a?"":String(a)};goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};
goog.string.compareVersions=goog.string.internal.compareVersions;goog.string.hashCode=function(a){let d=0;for(let f=0;f<a.length;++f)d=31*d+a.charCodeAt(f)>>>0;return d};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};goog.string.toNumber=function(a){const d=Number(a);return 0==d&&goog.string.isEmptyOrWhitespace(a)?NaN:d};goog.string.isLowerCamelCase=function(a){return/^[a-z]+([A-Z][a-z]*)*$/.test(a)};
goog.string.isUpperCamelCase=function(a){return/^([A-Z][a-z]*)+$/.test(a)};goog.string.toCamelCase=function(a){return String(a).replace(/\-([a-z])/g,function(d,f){return f.toUpperCase()})};goog.string.toSelectorCase=function(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()};goog.string.toTitleCase=function(a,d){d="string"===typeof d?goog.string.regExpEscape(d):"\\s";return a.replace(new RegExp("(^"+(d?"|["+d+"]+":"")+")([a-z])","g"),function(f,h,l){return h+l.toUpperCase()})};
goog.string.capitalize=function(a){return String(a.charAt(0)).toUpperCase()+String(a.substr(1)).toLowerCase()};goog.string.parseInt=function(a){isFinite(a)&&(a=String(a));return"string"===typeof a?/^\s*-?0x/i.test(a)?parseInt(a,16):parseInt(a,10):NaN};goog.string.splitLimit=function(a,d,f){a=a.split(d);const h=[];for(;0<f&&a.length;)h.push(a.shift()),f--;a.length&&h.push(a.join(d));return h};
goog.string.lastComponent=function(a,d){if(d)"string"==typeof d&&(d=[d]);else return a;let f=-1;for(let h=0;h<d.length;h++){if(""==d[h])continue;const l=a.lastIndexOf(d[h]);l>f&&(f=l)}return-1==f?a:a.slice(f+1)};
goog.string.editDistance=function(a,d){const f=[],h=[];if(a==d)return 0;if(!a.length||!d.length)return Math.max(a.length,d.length);for(var l=0;l<d.length+1;l++)f[l]=l;for(l=0;l<a.length;l++){h[0]=l+1;for(var m=0;m<d.length;m++)h[m+1]=Math.min(h[m]+1,f[m+1]+1,f[m]+Number(a[l]!=d[m]));for(m=0;m<f.length;m++)f[m]=h[m]}return h[d.length]};goog.dom.Appendable={};goog.dom.ASSUME_QUIRKS_MODE=!1;goog.dom.ASSUME_STANDARDS_MODE=!1;goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.getDomHelper=function(a){return a?new goog.dom.DomHelper(goog.dom.getOwnerDocument(a)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};goog.dom.getDocument=function(){return document};goog.dom.getElement=function(a){return goog.dom.getElementHelper_(document,a)};
goog.dom.getHTMLElement=function(a){return(a=goog.dom.getElement(a))?goog.asserts.assertInstanceof(a,HTMLElement):null};goog.dom.getElementHelper_=function(a,d){return"string"===typeof d?a.getElementById(d):d};goog.dom.getRequiredElement=function(a){return goog.dom.getRequiredElementHelper_(document,a)};goog.dom.getRequiredHTMLElement=function(a){return goog.asserts.assertInstanceof(goog.dom.getRequiredElementHelper_(document,a),HTMLElement)};
goog.dom.getRequiredElementHelper_=function(a,d){goog.asserts.assertString(d);a=goog.dom.getElementHelper_(a,d);return a=goog.asserts.assertElement(a,"No element found with id: "+d)};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagName=function(a,d){return(d||document).getElementsByTagName(String(a))};goog.dom.getElementsByTagNameAndClass=function(a,d,f){return goog.dom.getElementsByTagNameAndClass_(document,a,d,f)};
goog.dom.getElementByTagNameAndClass=function(a,d,f){return goog.dom.getElementByTagNameAndClass_(document,a,d,f)};goog.dom.getElementsByClass=function(a,d){var f=d||document;return goog.dom.canUseQuerySelector_(f)?f.querySelectorAll("."+a):goog.dom.getElementsByTagNameAndClass_(document,"*",a,d)};goog.dom.getElementByClass=function(a,d){var f=d||document;return(f.getElementsByClassName?f.getElementsByClassName(a)[0]:goog.dom.getElementByTagNameAndClass_(document,"*",a,d))||null};
goog.dom.getHTMLElementByClass=function(a,d){return(a=goog.dom.getElementByClass(a,d))?goog.asserts.assertInstanceof(a,HTMLElement):null};goog.dom.getRequiredElementByClass=function(a,d){d=goog.dom.getElementByClass(a,d);return goog.asserts.assert(d,"No element found with className: "+a)};goog.dom.getRequiredHTMLElementByClass=function(a,d){d=goog.dom.getElementByClass(a,d);return goog.asserts.assertInstanceof(d,HTMLElement,"No HTMLElement found with className: "+a)};
goog.dom.canUseQuerySelector_=function(a){return!(!a.querySelectorAll||!a.querySelector)};
goog.dom.getElementsByTagNameAndClass_=function(a,d,f,h){a=h||a;d=d&&"*"!=d?String(d).toUpperCase():"";if(goog.dom.canUseQuerySelector_(a)&&(d||f))return a.querySelectorAll(d+(f?"."+f:""));if(f&&a.getElementsByClassName){a=a.getElementsByClassName(f);if(d){h={};for(var l=0,m=0,p;p=a[m];m++)d==p.nodeName&&(h[l++]=p);h.length=l;return h}return a}a=a.getElementsByTagName(d||"*");if(f){h={};for(m=l=0;p=a[m];m++)d=p.className,"function"==typeof d.split&&module$contents$goog$array_contains(d.split(/\s+/),
f)&&(h[l++]=p);h.length=l;return h}return a};goog.dom.getElementByTagNameAndClass_=function(a,d,f,h){var l=h||a,m=d&&"*"!=d?String(d).toUpperCase():"";return goog.dom.canUseQuerySelector_(l)&&(m||f)?l.querySelector(m+(f?"."+f:"")):goog.dom.getElementsByTagNameAndClass_(a,d,f,h)[0]||null};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;
goog.dom.setProperties=function(a,d){module$contents$goog$object_forEach(d,function(f,h){f&&"object"==typeof f&&f.implementsGoogStringTypedString&&(f=f.getTypedStringValue());"style"==h?a.style.cssText=f:"class"==h?a.className=f:"for"==h?a.htmlFor=f:goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(h)?a.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[h],f):goog.string.startsWith(h,"aria-")||goog.string.startsWith(h,"data-")?a.setAttribute(h,f):a[h]=f})};
goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};goog.dom.getViewportSize=function(a){return goog.dom.getViewportSize_(a||window)};goog.dom.getViewportSize_=function(a){a=a.document;a=goog.dom.isCss1CompatMode_(a)?a.documentElement:a.body;return new goog.math.Size(a.clientWidth,a.clientHeight)};
goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};goog.dom.getDocumentHeightForWindow=function(a){return goog.dom.getDocumentHeight_(a)};
goog.dom.getDocumentHeight_=function(a){var d=a.document,f=0;if(d){f=d.body;var h=d.documentElement;if(!h||!f)return 0;a=goog.dom.getViewportSize_(a).height;if(goog.dom.isCss1CompatMode_(d)&&h.scrollHeight)f=h.scrollHeight!=a?h.scrollHeight:h.offsetHeight;else{d=h.scrollHeight;var l=h.offsetHeight;h.clientHeight!=l&&(d=f.scrollHeight,l=f.offsetHeight);f=d>a?d>l?d:l:d<l?d:l}}return f};goog.dom.getPageScroll=function(a){return goog.dom.getDomHelper((a||goog.global||window).document).getDocumentScroll()};
goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};goog.dom.getDocumentScroll_=function(a){var d=goog.dom.getDocumentScrollElement_(a);a=goog.dom.getWindow_(a);return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&a.pageYOffset!=d.scrollTop?new goog.math.Coordinate(d.scrollLeft,d.scrollTop):new goog.math.Coordinate(a.pageXOffset||d.scrollLeft,a.pageYOffset||d.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};
goog.dom.getDocumentScrollElement_=function(a){return a.scrollingElement?a.scrollingElement:!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(a)?a.documentElement:a.body||a.documentElement};goog.dom.getWindow=function(a){return a?goog.dom.getWindow_(a):window};goog.dom.getWindow_=function(a){return a.parentWindow||a.defaultView};goog.dom.createDom=function(a,d,f){return goog.dom.createDom_(document,arguments)};
goog.dom.createDom_=function(a,d){var f=d[1],h=goog.dom.createElement_(a,String(d[0]));f&&("string"===typeof f?h.className=f:Array.isArray(f)?h.className=f.join(" "):goog.dom.setProperties(h,f));2<d.length&&goog.dom.append_(a,h,d,2);return h};
goog.dom.append_=function(a,d,f,h){function l(p){p&&d.appendChild("string"===typeof p?a.createTextNode(p):p)}for(;h<f.length;h++){var m=f[h];goog.isArrayLike(m)&&!goog.dom.isNodeLike(m)?module$contents$goog$array_forEach(goog.dom.isNodeList(m)?module$contents$goog$array_toArray(m):m,l):l(m)}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(a){return goog.dom.createElement_(document,a)};
goog.dom.createElement_=function(a,d){d=String(d);"application/xhtml+xml"===a.contentType&&(d=d.toLowerCase());return a.createElement(d)};goog.dom.createTextNode=function(a){return document.createTextNode(String(a))};goog.dom.createTable=function(a,d,f){return goog.dom.createTable_(document,a,d,!!f)};
goog.dom.createTable_=function(a,d,f,h){for(var l=goog.dom.createElement_(a,goog.dom.TagName.TABLE),m=l.appendChild(goog.dom.createElement_(a,goog.dom.TagName.TBODY)),p=0;p<d;p++){for(var q=goog.dom.createElement_(a,goog.dom.TagName.TR),u=0;u<f;u++){var y=goog.dom.createElement_(a,goog.dom.TagName.TD);h&&goog.dom.setTextContent(y,goog.string.Unicode.NBSP);q.appendChild(y)}m.appendChild(q)}return l};
goog.dom.constHtmlToNode=function(a){var d=Array.prototype.map.call(arguments,goog.string.Const.unwrap);d=goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Constant HTML string, that gets turned into a Node later, so it will be automatically balanced."),d.join(""));return goog.dom.safeHtmlToNode(d)};goog.dom.safeHtmlToNode=function(a){return goog.dom.safeHtmlToNode_(document,a)};
goog.dom.safeHtmlToNode_=function(a,d){var f=goog.dom.createElement_(a,goog.dom.TagName.DIV);goog.userAgent.IE?(goog.dom.safe.setInnerHtml(f,module$contents$goog$html$SafeHtml_SafeHtml.concat(module$contents$goog$html$SafeHtml_SafeHtml.BR,d)),f.removeChild(goog.asserts.assert(f.firstChild))):goog.dom.safe.setInnerHtml(f,d);return goog.dom.childrenToNode_(a,f)};
goog.dom.childrenToNode_=function(a,d){if(1==d.childNodes.length)return d.removeChild(goog.asserts.assert(d.firstChild));for(a=a.createDocumentFragment();d.firstChild;)a.appendChild(d.firstChild);return a};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};goog.dom.isCss1CompatMode_=function(a){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==a.compatMode};
goog.dom.canHaveChildren=function(a){if(a.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(a.tagName){case String(goog.dom.TagName.APPLET):case String(goog.dom.TagName.AREA):case String(goog.dom.TagName.BASE):case String(goog.dom.TagName.BR):case String(goog.dom.TagName.COL):case String(goog.dom.TagName.COMMAND):case String(goog.dom.TagName.EMBED):case String(goog.dom.TagName.FRAME):case String(goog.dom.TagName.HR):case String(goog.dom.TagName.IMG):case String(goog.dom.TagName.INPUT):case String(goog.dom.TagName.IFRAME):case String(goog.dom.TagName.ISINDEX):case String(goog.dom.TagName.KEYGEN):case String(goog.dom.TagName.LINK):case String(goog.dom.TagName.NOFRAMES):case String(goog.dom.TagName.NOSCRIPT):case String(goog.dom.TagName.META):case String(goog.dom.TagName.OBJECT):case String(goog.dom.TagName.PARAM):case String(goog.dom.TagName.SCRIPT):case String(goog.dom.TagName.SOURCE):case String(goog.dom.TagName.STYLE):case String(goog.dom.TagName.TRACK):case String(goog.dom.TagName.WBR):return!1}return!0};
goog.dom.appendChild=function(a,d){goog.asserts.assert(null!=a&&null!=d,"goog.dom.appendChild expects non-null arguments");a.appendChild(d)};goog.dom.append=function(a,d){goog.dom.append_(goog.dom.getOwnerDocument(a),a,arguments,1)};goog.dom.removeChildren=function(a){for(var d;d=a.firstChild;)a.removeChild(d)};goog.dom.insertSiblingBefore=function(a,d){goog.asserts.assert(null!=a&&null!=d,"goog.dom.insertSiblingBefore expects non-null arguments");d.parentNode&&d.parentNode.insertBefore(a,d)};
goog.dom.insertSiblingAfter=function(a,d){goog.asserts.assert(null!=a&&null!=d,"goog.dom.insertSiblingAfter expects non-null arguments");d.parentNode&&d.parentNode.insertBefore(a,d.nextSibling)};goog.dom.insertChildAt=function(a,d,f){goog.asserts.assert(null!=a,"goog.dom.insertChildAt expects a non-null parent");a.insertBefore(d,a.childNodes[f]||null)};goog.dom.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};
goog.dom.replaceNode=function(a,d){goog.asserts.assert(null!=a&&null!=d,"goog.dom.replaceNode expects non-null arguments");var f=d.parentNode;f&&f.replaceChild(a,d)};goog.dom.copyContents=function(a,d){goog.asserts.assert(null!=a&&null!=d,"goog.dom.copyContents expects non-null arguments");d=d.cloneNode(!0).childNodes;for(goog.dom.removeChildren(a);d.length;)a.appendChild(d[0])};
goog.dom.flattenElement=function(a){var d,f=a.parentNode;if(f&&f.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(a.removeNode)return a.removeNode(!1);for(;d=a.firstChild;)f.insertBefore(d,a);return goog.dom.removeNode(a)}};goog.dom.getChildren=function(a){return void 0!=a.children?a.children:Array.prototype.filter.call(a.childNodes,function(d){return d.nodeType==goog.dom.NodeType.ELEMENT})};
goog.dom.getFirstElementChild=function(a){return void 0!==a.firstElementChild?a.firstElementChild:goog.dom.getNextElementNode_(a.firstChild,!0)};goog.dom.getLastElementChild=function(a){return void 0!==a.lastElementChild?a.lastElementChild:goog.dom.getNextElementNode_(a.lastChild,!1)};goog.dom.getNextElementSibling=function(a){return void 0!==a.nextElementSibling?a.nextElementSibling:goog.dom.getNextElementNode_(a.nextSibling,!0)};
goog.dom.getPreviousElementSibling=function(a){return void 0!==a.previousElementSibling?a.previousElementSibling:goog.dom.getNextElementNode_(a.previousSibling,!1)};goog.dom.getNextElementNode_=function(a,d){for(;a&&a.nodeType!=goog.dom.NodeType.ELEMENT;)a=d?a.nextSibling:a.previousSibling;return a};goog.dom.getNextNode=function(a){if(!a)return null;if(a.firstChild)return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null};
goog.dom.getPreviousNode=function(a){if(!a)return null;if(!a.previousSibling)return a.parentNode;for(a=a.previousSibling;a&&a.lastChild;)a=a.lastChild;return a};goog.dom.isNodeLike=function(a){return goog.isObject(a)&&0<a.nodeType};goog.dom.isElement=function(a){return goog.isObject(a)&&a.nodeType==goog.dom.NodeType.ELEMENT};goog.dom.isWindow=function(a){return goog.isObject(a)&&a.window==a};
goog.dom.getParentElement=function(a){var d;if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY&&!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&a instanceof goog.global.SVGElement)&&(d=a.parentElement))return d;d=a.parentNode;return goog.dom.isElement(d)?d:null};
goog.dom.contains=function(a,d){if(!a||!d)return!1;if(a.contains&&d.nodeType==goog.dom.NodeType.ELEMENT)return a==d||a.contains(d);if("undefined"!=typeof a.compareDocumentPosition)return a==d||!!(a.compareDocumentPosition(d)&16);for(;d&&a!=d;)d=d.parentNode;return d==a};
goog.dom.compareNodeOrder=function(a,d){if(a==d)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(d)&2?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(a.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(d.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var f=a.nodeType==goog.dom.NodeType.ELEMENT,h=d.nodeType==goog.dom.NodeType.ELEMENT;if(f&&h)return a.sourceIndex-d.sourceIndex;var l=a.parentNode,
m=d.parentNode;return l==m?goog.dom.compareSiblingOrder_(a,d):!f&&goog.dom.contains(l,d)?-1*goog.dom.compareParentsDescendantNodeIe_(a,d):!h&&goog.dom.contains(m,a)?goog.dom.compareParentsDescendantNodeIe_(d,a):(f?a.sourceIndex:l.sourceIndex)-(h?d.sourceIndex:m.sourceIndex)}h=goog.dom.getOwnerDocument(a);f=h.createRange();f.selectNode(a);f.collapse(!0);a=h.createRange();a.selectNode(d);a.collapse(!0);return f.compareBoundaryPoints(goog.global.Range.START_TO_END,a)};
goog.dom.compareParentsDescendantNodeIe_=function(a,d){var f=a.parentNode;if(f==d)return-1;for(;d.parentNode!=f;)d=d.parentNode;return goog.dom.compareSiblingOrder_(d,a)};goog.dom.compareSiblingOrder_=function(a,d){for(;d=d.previousSibling;)if(d==a)return-1;return 1};
goog.dom.findCommonAncestor=function(a){var d,f=arguments.length;if(!f)return null;if(1==f)return arguments[0];var h=[],l=Infinity;for(d=0;d<f;d++){for(var m=[],p=arguments[d];p;)m.unshift(p),p=p.parentNode;h.push(m);l=Math.min(l,m.length)}m=null;for(d=0;d<l;d++){p=h[0][d];for(var q=1;q<f;q++)if(p!=h[q][d])return m;m=p}return m};goog.dom.isInDocument=function(a){return 16==(a.ownerDocument.compareDocumentPosition(a)&16)};
goog.dom.getOwnerDocument=function(a){goog.asserts.assert(a,"Node cannot be null or undefined.");return a.nodeType==goog.dom.NodeType.DOCUMENT?a:a.ownerDocument||a.document};goog.dom.getFrameContentDocument=function(a){return a.contentDocument||a.contentWindow.document};goog.dom.getFrameContentWindow=function(a){try{return a.contentWindow||(a.contentDocument?goog.dom.getWindow(a.contentDocument):null)}catch(d){}return null};
goog.dom.setTextContent=function(a,d){goog.asserts.assert(null!=a,"goog.dom.setTextContent expects a non-null value for node");if("textContent"in a)a.textContent=d;else if(a.nodeType==goog.dom.NodeType.TEXT)a.data=String(d);else if(a.firstChild&&a.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;a.lastChild!=a.firstChild;)a.removeChild(goog.asserts.assert(a.lastChild));a.firstChild.data=String(d)}else{goog.dom.removeChildren(a);var f=goog.dom.getOwnerDocument(a);a.appendChild(f.createTextNode(String(d)))}};
goog.dom.getOuterHtml=function(a){goog.asserts.assert(null!==a,"goog.dom.getOuterHtml expects a non-null value for element");if("outerHTML"in a)return a.outerHTML;var d=goog.dom.getOwnerDocument(a);d=goog.dom.createElement_(d,goog.dom.TagName.DIV);d.appendChild(a.cloneNode(!0));return d.innerHTML};goog.dom.findNode=function(a,d){var f=[];return goog.dom.findNodes_(a,d,f,!0)?f[0]:void 0};goog.dom.findNodes=function(a,d){var f=[];goog.dom.findNodes_(a,d,f,!1);return f};
goog.dom.findNodes_=function(a,d,f,h){if(null!=a)for(a=a.firstChild;a;){if(d(a)&&(f.push(a),h)||goog.dom.findNodes_(a,d,f,h))return!0;a=a.nextSibling}return!1};goog.dom.findElement=function(a,d){for(a=goog.dom.getChildrenReverse_(a);0<a.length;){var f=a.pop();if(d(f))return f;for(f=f.lastElementChild;f;f=f.previousElementSibling)a.push(f)}return null};
goog.dom.findElements=function(a,d){var f=[];for(a=goog.dom.getChildrenReverse_(a);0<a.length;){var h=a.pop();d(h)&&f.push(h);for(h=h.lastElementChild;h;h=h.previousElementSibling)a.push(h)}return f};goog.dom.getChildrenReverse_=function(a){if(a.nodeType==goog.dom.NodeType.DOCUMENT)return[a.documentElement];var d=[];for(a=a.lastElementChild;a;a=a.previousElementSibling)d.push(a);return d};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};
goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};goog.dom.isFocusableTabIndex=function(a){return goog.dom.hasSpecifiedTabIndex_(a)&&goog.dom.isTabIndexFocusable_(a)};goog.dom.setFocusableTabIndex=function(a,d){d?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))};
goog.dom.isFocusable=function(a){var d;return(d=goog.dom.nativelySupportsFocus_(a)?!a.disabled&&(!goog.dom.hasSpecifiedTabIndex_(a)||goog.dom.isTabIndexFocusable_(a)):goog.dom.isFocusableTabIndex(a))&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(a):d};goog.dom.hasSpecifiedTabIndex_=function(a){return a.hasAttribute("tabindex")};goog.dom.isTabIndexFocusable_=function(a){a=a.tabIndex;return"number"===typeof a&&0<=a&&32768>a};
goog.dom.nativelySupportsFocus_=function(a){return a.tagName==goog.dom.TagName.A&&a.hasAttribute("href")||a.tagName==goog.dom.TagName.INPUT||a.tagName==goog.dom.TagName.TEXTAREA||a.tagName==goog.dom.TagName.SELECT||a.tagName==goog.dom.TagName.BUTTON};goog.dom.hasNonZeroBoundingRect_=function(a){a="function"!==typeof a.getBoundingClientRect||goog.userAgent.IE&&null==a.parentElement?{height:a.offsetHeight,width:a.offsetWidth}:a.getBoundingClientRect();return null!=a&&0<a.height&&0<a.width};
goog.dom.getTextContent=function(a){var d=[];goog.dom.getTextContent_(a,d,!0);a=d.join("");a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");a=a.replace(/ +/g," ");" "!=a&&(a=a.replace(/^\s*/,""));return a};goog.dom.getRawTextContent=function(a){var d=[];goog.dom.getTextContent_(a,d,!1);return d.join("")};
goog.dom.getTextContent_=function(a,d,f){if(!(a.nodeName in goog.dom.TAGS_TO_IGNORE_))if(a.nodeType==goog.dom.NodeType.TEXT)f?d.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):d.push(a.nodeValue);else if(a.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)d.push(goog.dom.PREDEFINED_TAG_VALUES_[a.nodeName]);else for(a=a.firstChild;a;)goog.dom.getTextContent_(a,d,f),a=a.nextSibling};goog.dom.getNodeTextLength=function(a){return goog.dom.getTextContent(a).length};
goog.dom.getNodeTextOffset=function(a,d){d=d||goog.dom.getOwnerDocument(a).body;for(var f=[];a&&a!=d;){for(var h=a;h=h.previousSibling;)f.unshift(goog.dom.getTextContent(h));a=a.parentNode}return goog.string.trimLeft(f.join("")).replace(/ +/g," ").length};
goog.dom.getNodeAtOffset=function(a,d,f){a=[a];for(var h=0,l=null;0<a.length&&h<d;)if(l=a.pop(),!(l.nodeName in goog.dom.TAGS_TO_IGNORE_))if(l.nodeType==goog.dom.NodeType.TEXT){var m=l.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");h+=m.length}else if(l.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)h+=goog.dom.PREDEFINED_TAG_VALUES_[l.nodeName].length;else for(m=l.childNodes.length-1;0<=m;m--)a.push(l.childNodes[m]);goog.isObject(f)&&(f.remainder=l?l.nodeValue.length+d-h-1:0,f.node=l);return l};
goog.dom.isNodeList=function(a){if(a&&"number"==typeof a.length){if(goog.isObject(a))return"function"==typeof a.item||"string"==typeof a.item;if("function"===typeof a)return"function"==typeof a.item}return!1};goog.dom.getAncestorByTagNameAndClass=function(a,d,f,h){if(!d&&!f)return null;var l=d?String(d).toUpperCase():null;return goog.dom.getAncestor(a,function(m){return(!l||m.nodeName==l)&&(!f||"string"===typeof m.className&&module$contents$goog$array_contains(m.className.split(/\s+/),f))},!0,h)};
goog.dom.getAncestorByClass=function(a,d,f){return goog.dom.getAncestorByTagNameAndClass(a,null,d,f)};goog.dom.getAncestor=function(a,d,f,h){a&&!f&&(a=a.parentNode);for(f=0;a&&(null==h||f<=h);){goog.asserts.assert("parentNode"!=a.name);if(d(a))return a;a=a.parentNode;f++}return null};goog.dom.getActiveElement=function(a){try{var d=a&&a.activeElement;return d&&d.nodeName?d:null}catch(f){return null}};
goog.dom.getPixelRatio=function(){var a=goog.dom.getWindow();return void 0!==a.devicePixelRatio?a.devicePixelRatio:a.matchMedia?goog.dom.matchesPixelRatio_(3)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(1)||.75:1};goog.dom.matchesPixelRatio_=function(a){return goog.dom.getWindow().matchMedia("(min-resolution: "+a+"dppx),(min--moz-device-pixel-ratio: "+a+"),(min-resolution: "+96*a+"dpi)").matches?a:0};goog.dom.getCanvasContext2D=function(a){return a.getContext("2d")};
goog.dom.DomHelper=function(a){this.document_=a||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;goog.dom.DomHelper.prototype.setDocument=function(a){this.document_=a};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(a){return goog.dom.getElementHelper_(this.document_,a)};
goog.dom.DomHelper.prototype.getRequiredElement=function(a){return goog.dom.getRequiredElementHelper_(this.document_,a)};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagName=function(a,d){return(d||this.document_).getElementsByTagName(String(a))};goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(a,d,f){return goog.dom.getElementsByTagNameAndClass_(this.document_,a,d,f)};
goog.dom.DomHelper.prototype.getElementByTagNameAndClass=function(a,d,f){return goog.dom.getElementByTagNameAndClass_(this.document_,a,d,f)};goog.dom.DomHelper.prototype.getElementsByClass=function(a,d){return goog.dom.getElementsByClass(a,d||this.document_)};goog.dom.DomHelper.prototype.getElementByClass=function(a,d){return goog.dom.getElementByClass(a,d||this.document_)};goog.dom.DomHelper.prototype.getRequiredElementByClass=function(a,d){return goog.dom.getRequiredElementByClass(a,d||this.document_)};
goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(a){return goog.dom.getViewportSize(a||this.getWindow())};goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.DomHelper.prototype.createDom=function(a,d,f){return goog.dom.createDom_(this.document_,arguments)};
goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(a){return goog.dom.createElement_(this.document_,a)};goog.dom.DomHelper.prototype.createTextNode=function(a){return this.document_.createTextNode(String(a))};goog.dom.DomHelper.prototype.createTable=function(a,d,f){return goog.dom.createTable_(this.document_,a,d,!!f)};goog.dom.DomHelper.prototype.safeHtmlToNode=function(a){return goog.dom.safeHtmlToNode_(this.document_,a)};
goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};
goog.dom.DomHelper.prototype.getActiveElement=function(a){return goog.dom.getActiveElement(a||this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;
goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;goog.dom.DomHelper.prototype.copyContents=goog.dom.copyContents;goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;
goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.isElement=goog.dom.isElement;
goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow;goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder;goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;
goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex;goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex;
goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset;goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;
goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.dom.DomHelper.prototype.getCanvasContext2D=goog.dom.getCanvasContext2D;goog.dom.vendor={};goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":null};goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":null};
goog.dom.vendor.getPrefixedPropertyName=function(a,d){if(d&&a in d)return a;var f=goog.dom.vendor.getVendorJsPrefix();return f?(f=f.toLowerCase(),a=f+goog.string.toTitleCase(a),void 0===d||a in d?a:null):null};goog.dom.vendor.getPrefixedEventType=function(a){return((goog.dom.vendor.getVendorJsPrefix()||"")+a).toLowerCase()};goog.math.Box=function(a,d,f,h){this.top=a;this.right=d;this.bottom=f;this.left=h};goog.math.Box.boundingBox=function(a){for(var d=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),f=1;f<arguments.length;f++)d.expandToIncludeCoordinate(arguments[f]);return d};goog.math.Box.prototype.getWidth=function(){return this.right-this.left};goog.math.Box.prototype.getHeight=function(){return this.bottom-this.top};
goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"});goog.math.Box.prototype.contains=function(a){return goog.math.Box.contains(this,a)};
goog.math.Box.prototype.expand=function(a,d,f,h){goog.isObject(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=Number(d),this.bottom+=Number(f),this.left-=Number(h));return this};goog.math.Box.prototype.expandToInclude=function(a){this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.right=Math.max(this.right,a.right);this.bottom=Math.max(this.bottom,a.bottom)};
goog.math.Box.prototype.expandToIncludeCoordinate=function(a){this.top=Math.min(this.top,a.y);this.right=Math.max(this.right,a.x);this.bottom=Math.max(this.bottom,a.y);this.left=Math.min(this.left,a.x)};goog.math.Box.equals=function(a,d){return a==d?!0:a&&d?a.top==d.top&&a.right==d.right&&a.bottom==d.bottom&&a.left==d.left:!1};
goog.math.Box.contains=function(a,d){return a&&d?d instanceof goog.math.Box?d.left>=a.left&&d.right<=a.right&&d.top>=a.top&&d.bottom<=a.bottom:d.x>=a.left&&d.x<=a.right&&d.y>=a.top&&d.y<=a.bottom:!1};goog.math.Box.relativePositionX=function(a,d){return d.x<a.left?d.x-a.left:d.x>a.right?d.x-a.right:0};goog.math.Box.relativePositionY=function(a,d){return d.y<a.top?d.y-a.top:d.y>a.bottom?d.y-a.bottom:0};
goog.math.Box.distance=function(a,d){var f=goog.math.Box.relativePositionX(a,d);a=goog.math.Box.relativePositionY(a,d);return Math.sqrt(f*f+a*a)};goog.math.Box.intersects=function(a,d){return a.left<=d.right&&d.left<=a.right&&a.top<=d.bottom&&d.top<=a.bottom};goog.math.Box.intersectsWithPadding=function(a,d,f){return a.left<=d.right+f&&d.left<=a.right+f&&a.top<=d.bottom+f&&d.top<=a.bottom+f};
goog.math.Box.prototype.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};goog.math.Box.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};
goog.math.Box.prototype.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};goog.math.Box.prototype.translate=function(a,d){a instanceof goog.math.Coordinate?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(goog.asserts.assertNumber(a),this.left+=a,this.right+=a,"number"===typeof d&&(this.top+=d,this.bottom+=d));return this};
goog.math.Box.prototype.scale=function(a,d){d="number"===typeof d?d:a;this.left*=a;this.right*=a;this.top*=d;this.bottom*=d;return this};goog.math.IRect=function(){};goog.math.Rect=function(a,d,f,h){this.left=a;this.top=d;this.width=f;this.height=h};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)};goog.math.Rect.createFromPositionAndSize=function(a,d){return new goog.math.Rect(a.x,a.y,d.width,d.height)};
goog.math.Rect.createFromBox=function(a){return new goog.math.Rect(a.left,a.top,a.right-a.left,a.bottom-a.top)};goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"});goog.math.Rect.equals=function(a,d){return a==d?!0:a&&d?a.left==d.left&&a.width==d.width&&a.top==d.top&&a.height==d.height:!1};
goog.math.Rect.prototype.intersection=function(a){var d=Math.max(this.left,a.left),f=Math.min(this.left+this.width,a.left+a.width);if(d<=f){var h=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(h<=a)return this.left=d,this.top=h,this.width=f-d,this.height=a-h,!0}return!1};
goog.math.Rect.intersection=function(a,d){var f=Math.max(a.left,d.left),h=Math.min(a.left+a.width,d.left+d.width);if(f<=h){var l=Math.max(a.top,d.top);a=Math.min(a.top+a.height,d.top+d.height);if(l<=a)return new goog.math.Rect(f,l,h-f,a-l)}return null};goog.math.Rect.intersects=function(a,d){return a.left<=d.left+d.width&&d.left<=a.left+a.width&&a.top<=d.top+d.height&&d.top<=a.top+a.height};goog.math.Rect.prototype.intersects=function(a){return goog.math.Rect.intersects(this,a)};
goog.math.Rect.difference=function(a,d){var f=goog.math.Rect.intersection(a,d);if(!f||!f.height||!f.width)return[a.clone()];f=[];var h=a.top,l=a.height,m=a.left+a.width,p=a.top+a.height,q=d.left+d.width,u=d.top+d.height;d.top>a.top&&(f.push(new goog.math.Rect(a.left,a.top,a.width,d.top-a.top)),h=d.top,l-=d.top-a.top);u<p&&(f.push(new goog.math.Rect(a.left,u,a.width,p-u)),l=u-h);d.left>a.left&&f.push(new goog.math.Rect(a.left,h,d.left-a.left,l));q<m&&f.push(new goog.math.Rect(q,h,m-q,l));return f};
goog.math.Rect.prototype.difference=function(a){return goog.math.Rect.difference(this,a)};goog.math.Rect.prototype.boundingRect=function(a){var d=Math.max(this.left+this.width,a.left+a.width),f=Math.max(this.top+this.height,a.top+a.height);this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.width=d-this.left;this.height=f-this.top};goog.math.Rect.boundingRect=function(a,d){if(!a||!d)return null;a=new goog.math.Rect(a.left,a.top,a.width,a.height);a.boundingRect(d);return a};
goog.math.Rect.prototype.contains=function(a){return a instanceof goog.math.Coordinate?a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height:this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height};goog.math.Rect.prototype.squaredDistance=function(a){var d=a.x<this.left?this.left-a.x:Math.max(a.x-(this.left+this.width),0);a=a.y<this.top?this.top-a.y:Math.max(a.y-(this.top+this.height),0);return d*d+a*a};
goog.math.Rect.prototype.distance=function(a){return Math.sqrt(this.squaredDistance(a))};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)};goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)};
goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)};goog.math.Rect.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Rect.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
goog.math.Rect.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Rect.prototype.translate=function(a,d){a instanceof goog.math.Coordinate?(this.left+=a.x,this.top+=a.y):(this.left+=goog.asserts.assertNumber(a),"number"===typeof d&&(this.top+=d));return this};
goog.math.Rect.prototype.scale=function(a,d){d="number"===typeof d?d:a;this.left*=a;this.width*=a;this.top*=d;this.height*=d;return this};goog.style={};goog.style.setStyle=function(a,d,f){if("string"===typeof d)goog.style.setStyle_(a,f,d);else for(var h in d)goog.style.setStyle_(a,d[h],h)};goog.style.setStyle_=function(a,d,f){(f=goog.style.getVendorJsStyleName_(a,f))&&(a.style[f]=d)};goog.style.styleNameCache_={};
goog.style.getVendorJsStyleName_=function(a,d){var f=goog.style.styleNameCache_[d];if(!f){var h=goog.string.toCamelCase(d);f=h;void 0===a.style[h]&&(h=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(h),void 0!==a.style[h]&&(f=h));goog.style.styleNameCache_[d]=f}return f};
goog.style.getVendorStyleName_=function(a,d){var f=goog.string.toCamelCase(d);return void 0===a.style[f]&&(f=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(f),void 0!==a.style[f])?goog.dom.vendor.getVendorPrefix()+"-"+d:d};goog.style.getStyle=function(a,d){var f=a.style[goog.string.toCamelCase(d)];return"undefined"!==typeof f?f:a.style[goog.style.getVendorJsStyleName_(a,d)]||""};
goog.style.getComputedStyle=function(a,d){var f=goog.dom.getOwnerDocument(a);return f.defaultView&&f.defaultView.getComputedStyle&&(a=f.defaultView.getComputedStyle(a,null))?a[d]||a.getPropertyValue(d)||"":""};goog.style.getCascadedStyle=function(a,d){return a.currentStyle?a.currentStyle[d]:null};goog.style.getStyle_=function(a,d){return goog.style.getComputedStyle(a,d)||goog.style.getCascadedStyle(a,d)||a.style&&a.style[d]};
goog.style.getComputedBoxSizing=function(a){return goog.style.getStyle_(a,"boxSizing")||goog.style.getStyle_(a,"MozBoxSizing")||goog.style.getStyle_(a,"WebkitBoxSizing")||null};goog.style.getComputedPosition=function(a){return goog.style.getStyle_(a,"position")};goog.style.getBackgroundColor=function(a){return goog.style.getStyle_(a,"backgroundColor")};goog.style.getComputedOverflowX=function(a){return goog.style.getStyle_(a,"overflowX")};
goog.style.getComputedOverflowY=function(a){return goog.style.getStyle_(a,"overflowY")};goog.style.getComputedZIndex=function(a){return goog.style.getStyle_(a,"zIndex")};goog.style.getComputedTextAlign=function(a){return goog.style.getStyle_(a,"textAlign")};goog.style.getComputedCursor=function(a){return goog.style.getStyle_(a,"cursor")};goog.style.getComputedTransform=function(a){var d=goog.style.getVendorStyleName_(a,"transform");return goog.style.getStyle_(a,d)||goog.style.getStyle_(a,"transform")};
goog.style.setPosition=function(a,d,f){if(d instanceof goog.math.Coordinate){var h=d.x;d=d.y}else h=d,d=f;a.style.left=goog.style.getPixelStyleValue_(h,!1);a.style.top=goog.style.getPixelStyleValue_(d,!1)};goog.style.getPosition=function(a){return new goog.math.Coordinate(a.offsetLeft,a.offsetTop)};
goog.style.getClientViewportElement=function(a){a=a?goog.dom.getOwnerDocument(a):goog.dom.getDocument();return!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||goog.dom.getDomHelper(a).isCss1CompatMode()?a.documentElement:a.body};goog.style.getViewportPageOffset=function(a){var d=a.body;a=a.documentElement;return new goog.math.Coordinate(d.scrollLeft||a.scrollLeft,d.scrollTop||a.scrollTop)};
goog.style.getBoundingClientRect_=function(a){try{return a.getBoundingClientRect()}catch(d){return{left:0,top:0,right:0,bottom:0}}};
goog.style.getOffsetParent=function(a){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return goog.asserts.assert(a&&"offsetParent"in a),a.offsetParent;var d=goog.dom.getOwnerDocument(a),f=goog.style.getStyle_(a,"position"),h="fixed"==f||"absolute"==f;for(a=a.parentNode;a&&a!=d;a=a.parentNode)if(a.nodeType==goog.dom.NodeType.DOCUMENT_FRAGMENT&&a.host&&(a=a.host),f=goog.style.getStyle_(a,"position"),h=h&&"static"==f&&a!=d.documentElement&&a!=d.body,!h&&(a.scrollWidth>a.clientWidth||
a.scrollHeight>a.clientHeight||"fixed"==f||"absolute"==f||"relative"==f))return a;return null};
goog.style.getVisibleRectForElement=function(a){for(var d=new goog.math.Box(0,Infinity,Infinity,0),f=goog.dom.getDomHelper(a),h=f.getDocument().body,l=f.getDocument().documentElement,m=f.getDocumentScrollElement();a=goog.style.getOffsetParent(a);)if(!(goog.userAgent.IE&&0==a.clientWidth||goog.userAgent.WEBKIT&&0==a.clientHeight&&a==h)&&a!=h&&a!=l&&"visible"!=goog.style.getStyle_(a,"overflow")){var p=goog.style.getPageOffset(a),q=goog.style.getClientLeftTop(a);p.x+=q.x;p.y+=q.y;d.top=Math.max(d.top,
p.y);d.right=Math.min(d.right,p.x+a.clientWidth);d.bottom=Math.min(d.bottom,p.y+a.clientHeight);d.left=Math.max(d.left,p.x)}h=m.scrollLeft;m=m.scrollTop;d.left=Math.max(d.left,h);d.top=Math.max(d.top,m);f=f.getViewportSize();d.right=Math.min(d.right,h+f.width);d.bottom=Math.min(d.bottom,m+f.height);return 0<=d.top&&0<=d.left&&d.bottom>d.top&&d.right>d.left?d:null};
goog.style.getContainerOffsetToScrollInto=function(a,d,f){var h=d||goog.dom.getDocumentScrollElement(),l=goog.style.getPageOffset(a),m=goog.style.getPageOffset(h),p=goog.style.getBorderBox(h);h==goog.dom.getDocumentScrollElement()?(d=l.x-h.scrollLeft,l=l.y-h.scrollTop,goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)&&(d+=p.left,l+=p.top)):(d=l.x-m.x-p.left,l=l.y-m.y-p.top);p=goog.style.getSizeWithDisplay_(a);a=h.clientWidth-p.width;p=h.clientHeight-p.height;m=h.scrollLeft;h=h.scrollTop;
f?(m+=d-a/2,h+=l-p/2):(m+=Math.min(d,Math.max(d-a,0)),h+=Math.min(l,Math.max(l-p,0)));return new goog.math.Coordinate(m,h)};goog.style.scrollIntoContainerView=function(a,d,f){d=d||goog.dom.getDocumentScrollElement();a=goog.style.getContainerOffsetToScrollInto(a,d,f);d.scrollLeft=a.x;d.scrollTop=a.y};goog.style.getClientLeftTop=function(a){return new goog.math.Coordinate(a.clientLeft,a.clientTop)};
goog.style.getPageOffset=function(a){var d=goog.dom.getOwnerDocument(a);goog.asserts.assertObject(a,"Parameter is required");var f=new goog.math.Coordinate(0,0),h=goog.style.getClientViewportElement(d);if(a==h)return f;a=goog.style.getBoundingClientRect_(a);d=goog.dom.getDomHelper(d).getDocumentScroll();f.x=a.left+d.x;f.y=a.top+d.y;return f};goog.style.getPageOffsetLeft=function(a){return goog.style.getPageOffset(a).x};goog.style.getPageOffsetTop=function(a){return goog.style.getPageOffset(a).y};
goog.style.getFramedPageOffset=function(a,d){var f=new goog.math.Coordinate(0,0),h=goog.dom.getWindow(goog.dom.getOwnerDocument(a));if(!goog.reflect.canAccessProperty(h,"parent"))return f;do{var l=h==d?goog.style.getPageOffset(a):goog.style.getClientPositionForElement_(goog.asserts.assert(a));f.x+=l.x;f.y+=l.y}while(h&&h!=d&&h!=h.parent&&(a=h.frameElement)&&(h=h.parent));return f};
goog.style.translateRectForAnotherFrame=function(a,d,f){if(d.getDocument()!=f.getDocument()){var h=d.getDocument().body;f=goog.style.getFramedPageOffset(h,f.getWindow());f=goog.math.Coordinate.difference(f,goog.style.getPageOffset(h));!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||d.isCss1CompatMode()||(f=goog.math.Coordinate.difference(f,d.getDocumentScroll()));a.left+=f.x;a.top+=f.y}};
goog.style.getRelativePosition=function(a,d){a=goog.style.getClientPosition(a);d=goog.style.getClientPosition(d);return new goog.math.Coordinate(a.x-d.x,a.y-d.y)};goog.style.getClientPositionForElement_=function(a){a=goog.style.getBoundingClientRect_(a);return new goog.math.Coordinate(a.left,a.top)};
goog.style.getClientPosition=function(a){goog.asserts.assert(a);if(a.nodeType==goog.dom.NodeType.ELEMENT)return goog.style.getClientPositionForElement_(a);a=a.changedTouches?a.changedTouches[0]:a;return new goog.math.Coordinate(a.clientX,a.clientY)};goog.style.setPageOffset=function(a,d,f){var h=goog.style.getPageOffset(a);d instanceof goog.math.Coordinate&&(f=d.y,d=d.x);d=goog.asserts.assertNumber(d)-h.x;goog.style.setPosition(a,a.offsetLeft+d,a.offsetTop+(Number(f)-h.y))};
goog.style.setSize=function(a,d,f){if(d instanceof goog.math.Size)f=d.height,d=d.width;else if(void 0==f)throw Error("missing height argument");goog.style.setWidth(a,d);goog.style.setHeight(a,f)};goog.style.getPixelStyleValue_=function(a,d){"number"==typeof a&&(a=(d?Math.round(a):a)+"px");return a};goog.style.setHeight=function(a,d){a.style.height=goog.style.getPixelStyleValue_(d,!0)};goog.style.setWidth=function(a,d){a.style.width=goog.style.getPixelStyleValue_(d,!0)};
goog.style.getSize=function(a){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,a)};goog.style.evaluateWithTemporaryDisplay_=function(a,d){if("none"!=goog.style.getStyle_(d,"display"))return a(d);var f=d.style,h=f.display,l=f.visibility,m=f.position;f.visibility="hidden";f.position="absolute";f.display="inline";a=a(d);f.display=h;f.position=m;f.visibility=l;return a};
goog.style.getSizeWithDisplay_=function(a){var d=a.offsetWidth,f=a.offsetHeight,h=goog.userAgent.WEBKIT&&!d&&!f;return(void 0===d||h)&&a.getBoundingClientRect?(a=goog.style.getBoundingClientRect_(a),new goog.math.Size(a.right-a.left,a.bottom-a.top)):new goog.math.Size(d,f)};goog.style.getTransformedSize=function(a){if(!a.getBoundingClientRect)return null;a=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,a);return new goog.math.Size(a.right-a.left,a.bottom-a.top)};
goog.style.getBounds=function(a){var d=goog.style.getPageOffset(a);a=goog.style.getSize(a);return new goog.math.Rect(d.x,d.y,a.width,a.height)};goog.style.toCamelCase=function(a){return goog.string.toCamelCase(String(a))};goog.style.toSelectorCase=function(a){return goog.string.toSelectorCase(a)};
goog.style.getOpacity=function(a){goog.asserts.assert(a);var d=a.style;a="";"opacity"in d?a=d.opacity:"MozOpacity"in d?a=d.MozOpacity:"filter"in d&&(d=d.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(a=String(d[1]/100));return""==a?a:Number(a)};goog.style.setOpacity=function(a,d){goog.asserts.assert(a);a=a.style;"opacity"in a?a.opacity=d:"MozOpacity"in a?a.MozOpacity=d:"filter"in a&&(a.filter=""===d?"":"alpha(opacity="+100*Number(d)+")")};
goog.style.setTransparentBackgroundImage=function(a,d){a=a.style;a.backgroundImage="url("+d+")";a.backgroundPosition="top left";a.backgroundRepeat="no-repeat"};goog.style.clearTransparentBackgroundImage=function(a){a=a.style;"filter"in a?a.filter="":a.backgroundImage="none"};goog.style.showElement=function(a,d){goog.style.setElementShown(a,d)};goog.style.setElementShown=function(a,d){a.style.display=d?"":"none"};goog.style.isElementShown=function(a){return"none"!=a.style.display};
goog.style.installSafeStyleSheet=function(a,d){d=goog.dom.getDomHelper(d);var f=d.getDocument();if(goog.userAgent.IE&&f.createStyleSheet)return d=f.createStyleSheet(),goog.style.setSafeStyleSheet(d,a),d;f=d.getElementsByTagNameAndClass(goog.dom.TagName.HEAD)[0];if(!f){var h=d.getElementsByTagNameAndClass(goog.dom.TagName.BODY)[0];f=d.createDom(goog.dom.TagName.HEAD);h.parentNode.insertBefore(f,h)}h=d.createDom(goog.dom.TagName.STYLE);const l=goog.dom.safe.getStyleNonce();l&&h.setAttribute("nonce",
l);goog.style.setSafeStyleSheet(h,a);d.appendChild(f,h);return h};goog.style.uninstallStyles=function(a){goog.dom.removeNode(a.ownerNode||a.owningElement||a)};goog.style.setSafeStyleSheet=function(a,d){d=module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.unwrap(d);goog.userAgent.IE&&void 0!==a.cssText?a.cssText=d:goog.global.trustedTypes?goog.dom.setTextContent(a,d):a.innerHTML=d};goog.style.setPreWrap=function(a){a.style.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"};
goog.style.setInlineBlock=function(a){a=a.style;a.position="relative";a.display="inline-block"};goog.style.isRightToLeft=function(a){return"rtl"==goog.style.getStyle_(a,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT||goog.userAgent.EDGE?"WebkitUserSelect":null;
goog.style.isUnselectable=function(a){return goog.style.unselectableStyle_?"none"==a.style[goog.style.unselectableStyle_].toLowerCase():goog.userAgent.IE?"on"==a.getAttribute("unselectable"):!1};
goog.style.setUnselectable=function(a,d,f){f=f?null:a.getElementsByTagName("*");var h=goog.style.unselectableStyle_;if(h){if(d=d?"none":"",a.style&&(a.style[h]=d),f){a=0;for(var l;l=f[a];a++)l.style&&(l.style[h]=d)}}else if(goog.userAgent.IE&&(d=d?"on":"",a.setAttribute("unselectable",d),f))for(a=0;l=f[a];a++)l.setAttribute("unselectable",d)};goog.style.getBorderBoxSize=function(a){return new goog.math.Size(a.offsetWidth,a.offsetHeight)};
goog.style.setBorderBoxSize=function(a,d){var f=goog.dom.getOwnerDocument(a),h=goog.dom.getDomHelper(f).isCss1CompatMode();!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||h?goog.style.setBoxSizingSize_(a,d,"border-box"):(f=a.style,h?(h=goog.style.getPaddingBox(a),a=goog.style.getBorderBox(a),f.pixelWidth=d.width-a.left-h.left-h.right-a.right,f.pixelHeight=d.height-a.top-h.top-h.bottom-a.bottom):(f.pixelWidth=d.width,f.pixelHeight=d.height))};
goog.style.getContentBoxSize=function(a){var d=goog.dom.getOwnerDocument(a),f=goog.userAgent.IE&&a.currentStyle;if(f&&goog.dom.getDomHelper(d).isCss1CompatMode()&&"auto"!=f.width&&"auto"!=f.height&&!f.boxSizing)return d=goog.style.getIePixelValue_(a,f.width,"width","pixelWidth"),a=goog.style.getIePixelValue_(a,f.height,"height","pixelHeight"),new goog.math.Size(d,a);f=goog.style.getBorderBoxSize(a);d=goog.style.getPaddingBox(a);a=goog.style.getBorderBox(a);return new goog.math.Size(f.width-a.left-
d.left-d.right-a.right,f.height-a.top-d.top-d.bottom-a.bottom)};
goog.style.setContentBoxSize=function(a,d){var f=goog.dom.getOwnerDocument(a),h=goog.dom.getDomHelper(f).isCss1CompatMode();!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||h?goog.style.setBoxSizingSize_(a,d,"content-box"):(f=a.style,h?(f.pixelWidth=d.width,f.pixelHeight=d.height):(h=goog.style.getPaddingBox(a),a=goog.style.getBorderBox(a),f.pixelWidth=d.width+a.left+h.left+h.right+a.right,f.pixelHeight=d.height+a.top+h.top+h.bottom+a.bottom))};
goog.style.setBoxSizingSize_=function(a,d,f){a=a.style;goog.userAgent.GECKO?a.MozBoxSizing=f:goog.userAgent.WEBKIT?a.WebkitBoxSizing=f:a.boxSizing=f;a.width=Math.max(d.width,0)+"px";a.height=Math.max(d.height,0)+"px"};goog.style.getIePixelValue_=function(a,d,f,h){if(/^\d+px?$/.test(d))return parseInt(d,10);var l=a.style[f],m=a.runtimeStyle[f];a.runtimeStyle[f]=a.currentStyle[f];a.style[f]=d;d=a.style[h];a.style[f]=l;a.runtimeStyle[f]=m;return+d};
goog.style.getIePixelDistance_=function(a,d){return(d=goog.style.getCascadedStyle(a,d))?goog.style.getIePixelValue_(a,d,"left","pixelLeft"):0};
goog.style.getBox_=function(a,d){if(goog.userAgent.IE){var f=goog.style.getIePixelDistance_(a,d+"Left"),h=goog.style.getIePixelDistance_(a,d+"Right"),l=goog.style.getIePixelDistance_(a,d+"Top");a=goog.style.getIePixelDistance_(a,d+"Bottom");return new goog.math.Box(l,h,a,f)}f=goog.style.getComputedStyle(a,d+"Left");h=goog.style.getComputedStyle(a,d+"Right");l=goog.style.getComputedStyle(a,d+"Top");a=goog.style.getComputedStyle(a,d+"Bottom");return new goog.math.Box(parseFloat(l),parseFloat(h),parseFloat(a),
parseFloat(f))};goog.style.getPaddingBox=function(a){return goog.style.getBox_(a,"padding")};goog.style.getMarginBox=function(a){return goog.style.getBox_(a,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};goog.style.getIePixelBorder_=function(a,d){if("none"==goog.style.getCascadedStyle(a,d+"Style"))return 0;d=goog.style.getCascadedStyle(a,d+"Width");return d in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[d]:goog.style.getIePixelValue_(a,d,"left","pixelLeft")};
goog.style.getBorderBox=function(a){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var d=goog.style.getIePixelBorder_(a,"borderLeft"),f=goog.style.getIePixelBorder_(a,"borderRight"),h=goog.style.getIePixelBorder_(a,"borderTop");a=goog.style.getIePixelBorder_(a,"borderBottom");return new goog.math.Box(h,f,a,d)}d=goog.style.getComputedStyle(a,"borderLeftWidth");f=goog.style.getComputedStyle(a,"borderRightWidth");h=goog.style.getComputedStyle(a,"borderTopWidth");a=goog.style.getComputedStyle(a,
"borderBottomWidth");return new goog.math.Box(parseFloat(h),parseFloat(f),parseFloat(a),parseFloat(d))};goog.style.getFontFamily=function(a){var d=goog.dom.getOwnerDocument(a),f="";if(d.body.createTextRange&&goog.dom.contains(d,a)){d=d.body.createTextRange();d.moveToElementText(a);try{f=d.queryCommandValue("FontName")}catch(h){f=""}}f||=goog.style.getStyle_(a,"fontFamily");a=f.split(",");1<a.length&&(f=a[0]);return goog.string.stripQuotes(f,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;
goog.style.getLengthUnits=function(a){return(a=a.match(goog.style.lengthUnitRegex_))&&a[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};
goog.style.getFontSize=function(a){var d=goog.style.getStyle_(a,"fontSize"),f=goog.style.getLengthUnits(d);if(d&&"px"==f)return parseInt(d,10);if(goog.userAgent.IE){if(String(f)in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(a,d,"left","pixelLeft");if(a.parentNode&&a.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&String(f)in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return a=a.parentNode,f=goog.style.getStyle_(a,"fontSize"),goog.style.getIePixelValue_(a,d==f?"1em":d,
"left","pixelLeft")}f=goog.dom.createDom(goog.dom.TagName.SPAN,{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(a,f);d=f.offsetHeight;goog.dom.removeNode(f);return d};goog.style.parseStyleAttribute=function(a){var d={};a.split(/\s*;\s*/).forEach(function(f){var h=f.match(/\s*([\w-]+)\s*:(.+)/);h&&(f=h[1],h=goog.string.trim(h[2]),d[goog.string.toCamelCase(f.toLowerCase())]=h)});return d};
goog.style.toStyleAttribute=function(a){var d=[];module$contents$goog$object_forEach(a,function(f,h){d.push(goog.string.toSelectorCase(h),":",f,";")});return d.join("")};goog.style.setFloat=function(a,d){a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=d};goog.style.getFloat=function(a){return a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};
goog.style.getScrollbarWidth=function(a){var d=goog.dom.createElement(goog.dom.TagName.DIV);a&&(d.className=a);d.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px";a=goog.dom.createElement(goog.dom.TagName.DIV);goog.style.setSize(a,"200px","200px");d.appendChild(a);goog.dom.appendChild(goog.dom.getDocument().body,d);a=d.offsetWidth-d.clientWidth;goog.dom.removeNode(d);return a};goog.style.MATRIX_TRANSLATION_REGEX_=RegExp("matrix\\([0-9\\.\\-]+, [0-9\\.\\-]+, [0-9\\.\\-]+, [0-9\\.\\-]+, ([0-9\\.\\-]+)p?x?, ([0-9\\.\\-]+)p?x?\\)");
goog.style.getCssTranslation=function(a){a=goog.style.getComputedTransform(a);return a?(a=a.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(a[1]),parseFloat(a[2])):new goog.math.Coordinate(0,0):new goog.math.Coordinate(0,0)};goog.events.EventHandler=function(a){goog.Disposable.call(this);this.handler_=a;this.keys_={}};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(a,d,f,h){return this.listen_(a,d,f,h)};goog.events.EventHandler.prototype.listenWithScope=function(a,d,f,h,l){return this.listen_(a,d,f,h,l)};
goog.events.EventHandler.prototype.listen_=function(a,d,f,h,l){Array.isArray(d)||(d&&(goog.events.EventHandler.typeArray_[0]=d.toString()),d=goog.events.EventHandler.typeArray_);for(var m=0;m<d.length;m++){var p=goog.events.listen(a,d[m],f||this.handleEvent,h||!1,l||this.handler_||this);if(!p)break;this.keys_[p.key]=p}return this};goog.events.EventHandler.prototype.listenOnce=function(a,d,f,h){return this.listenOnce_(a,d,f,h)};
goog.events.EventHandler.prototype.listenOnceWithScope=function(a,d,f,h,l){return this.listenOnce_(a,d,f,h,l)};goog.events.EventHandler.prototype.listenOnce_=function(a,d,f,h,l){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.listenOnce_(a,d[m],f,h,l);else{a=goog.events.listenOnce(a,d,f||this.handleEvent,h,l||this.handler_||this);if(!a)return this;this.keys_[a.key]=a}return this};goog.events.EventHandler.prototype.listenWithWrapper=function(a,d,f,h){return this.listenWithWrapper_(a,d,f,h)};
goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(a,d,f,h,l){return this.listenWithWrapper_(a,d,f,h,l)};goog.events.EventHandler.prototype.listenWithWrapper_=function(a,d,f,h,l){d.listen(a,f,h,l||this.handler_||this,this);return this};goog.events.EventHandler.prototype.getListenerCount=function(){var a=0,d;for(d in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,d)&&a++;return a};
goog.events.EventHandler.prototype.unlisten=function(a,d,f,h,l){if(Array.isArray(d))for(var m=0;m<d.length;m++)this.unlisten(a,d[m],f,h,l);else if(h=goog.isObject(h)?!!h.capture:!!h,a=goog.events.getListener(a,d,f||this.handleEvent,h,l||this.handler_||this))goog.events.unlistenByKey(a),delete this.keys_[a.key];return this};goog.events.EventHandler.prototype.unlistenWithWrapper=function(a,d,f,h,l){d.unlisten(a,f,h,l||this.handler_||this,this);return this};
goog.events.EventHandler.prototype.removeAll=function(){module$contents$goog$object_forEach(this.keys_,function(a,d){this.keys_.hasOwnProperty(d)&&goog.events.unlistenByKey(a)},this);this.keys_={}};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};goog.events.EventHandler.prototype.handleEvent=function(a){throw Error("EventHandler.handleEvent not implemented");};goog.events.EventTarget=function(){goog.Disposable.call(this);this.eventTargetListeners_=new goog.events.ListenerMap(this);this.actualEventTarget_=this;this.parentEventTarget_=null};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.Listenable.addImplementation(goog.events.EventTarget);goog.events.EventTarget.MAX_ANCESTORS_=1E3;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};
goog.events.EventTarget.prototype.setParentEventTarget=function(a){this.parentEventTarget_=a};goog.events.EventTarget.prototype.addEventListener=function(a,d,f,h){goog.events.listen(this,a,d,f,h)};goog.events.EventTarget.prototype.removeEventListener=function(a,d,f,h){goog.events.unlisten(this,a,d,f,h)};
goog.events.EventTarget.prototype.dispatchEvent=function(a){this.assertInitialized_();var d=this.getParentEventTarget();if(d){var f=[];for(var h=1;d;d=d.getParentEventTarget())f.push(d),goog.asserts.assert(++h<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop")}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,a,f)};
goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);this.removeAllListeners();this.parentEventTarget_=null};goog.events.EventTarget.prototype.listen=function(a,d,f,h){this.assertInitialized_();return this.eventTargetListeners_.add(String(a),d,!1,f,h)};goog.events.EventTarget.prototype.listenOnce=function(a,d,f,h){return this.eventTargetListeners_.add(String(a),d,!0,f,h)};
goog.events.EventTarget.prototype.unlisten=function(a,d,f,h){return this.eventTargetListeners_.remove(String(a),d,f,h)};goog.events.EventTarget.prototype.unlistenByKey=function(a){return this.eventTargetListeners_.removeByKey(a)};goog.events.EventTarget.prototype.removeAllListeners=function(a){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(a):0};
goog.events.EventTarget.prototype.fireListeners=function(a,d,f){a=this.eventTargetListeners_.listeners[String(a)];if(!a)return!0;a=a.concat();for(var h=!0,l=0;l<a.length;++l){var m=a[l];if(m&&!m.removed&&m.capture==d){var p=m.listener,q=m.handler||m.src;m.callOnce&&this.unlistenByKey(m);h=!1!==p.call(q,f)&&h}}return h&&!f.defaultPrevented};goog.events.EventTarget.prototype.getListeners=function(a,d){return this.eventTargetListeners_.getListeners(String(a),d)};
goog.events.EventTarget.prototype.getListener=function(a,d,f,h){return this.eventTargetListeners_.getListener(String(a),d,f,h)};goog.events.EventTarget.prototype.hasListener=function(a,d){return this.eventTargetListeners_.hasListener(void 0!==a?String(a):void 0,d)};goog.events.EventTarget.prototype.setTargetForTesting=function(a){this.actualEventTarget_=a};goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")};
goog.events.EventTarget.dispatchEventInternal_=function(a,d,f){var h=d.type||d;if("string"===typeof d)d=new goog.events.Event(d,a);else if(d instanceof goog.events.Event)d.target=d.target||a;else{var l=d;d=new goog.events.Event(h,a);module$contents$goog$object_extend(d,l)}l=!0;if(f)for(var m=f.length-1;!d.hasPropagationStopped()&&0<=m;m--){var p=d.currentTarget=f[m];l=p.fireListeners(h,!0,d)&&l}d.hasPropagationStopped()||(p=d.currentTarget=a,l=p.fireListeners(h,!0,d)&&l,d.hasPropagationStopped()||
(l=p.fireListeners(h,!1,d)&&l));if(f)for(m=0;!d.hasPropagationStopped()&&m<f.length;m++)p=d.currentTarget=f[m],l=p.fireListeners(h,!1,d)&&l;return l};goog.ui={};goog.ui.IdGenerator=function(){};goog.addSingletonGetter(goog.ui.IdGenerator);goog.ui.IdGenerator.prototype.nextId_=0;goog.ui.IdGenerator.prototype.idPrefix_="";goog.ui.IdGenerator.prototype.setIdPrefix=function(a){this.idPrefix_=a};goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return this.idPrefix_+":"+(this.nextId_++).toString(36)};goog.ui.Component=function(a){goog.events.EventTarget.call(this);this.dom_=a||goog.dom.getDomHelper();this.rightToLeft_=goog.ui.Component.defaultRightToLeft_;this.id_=null;this.inDocument_=!1;this.element_=null;this.googUiComponentHandler_=void 0;this.childIndex_=this.children_=this.parent_=this.model_=null;this.pointerEventsEnabled_=this.wasDecorated_=!1};goog.inherits(goog.ui.Component,goog.events.EventTarget);goog.ui.Component.ALLOW_DETACHED_DECORATION=!1;
goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance();goog.ui.Component.DEFAULT_BIDI_DIR=0;goog.ui.Component.defaultRightToLeft_=1==goog.ui.Component.DEFAULT_BIDI_DIR?!1:-1==goog.ui.Component.DEFAULT_BIDI_DIR?!0:null;
goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"};
goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"};
goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64};
goog.ui.Component.getStateTransitionEvent=function(a,d){switch(a){case goog.ui.Component.State.DISABLED:return d?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return d?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return d?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return d?goog.ui.Component.EventType.SELECT:
goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return d?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return d?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return d?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID);};
goog.ui.Component.setDefaultRightToLeft=function(a){goog.ui.Component.defaultRightToLeft_=a};goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())};goog.ui.Component.prototype.setId=function(a){this.parent_&&this.parent_.childIndex_&&(module$contents$goog$object_remove(this.parent_.childIndex_,this.id_),module$contents$goog$object_add(this.parent_.childIndex_,a,this));this.id_=a};goog.ui.Component.prototype.getElement=function(){return this.element_};
goog.ui.Component.prototype.getElementStrict=function(){var a=this.element_;goog.asserts.assert(a,"Can not call getElementStrict before rendering/decorating.");return a};goog.ui.Component.prototype.setElementInternal=function(a){this.element_=a};goog.ui.Component.prototype.getElementsByClass=function(a){return this.element_?this.dom_.getElementsByClass(a,this.element_):[]};goog.ui.Component.prototype.getElementByClass=function(a){return this.element_?this.dom_.getElementByClass(a,this.element_):null};
goog.ui.Component.prototype.getRequiredElementByClass=function(a){var d=this.getElementByClass(a);goog.asserts.assert(d,"Expected element in component with class: %s",a);return d};goog.ui.Component.prototype.getHandler=function(){this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this));return goog.asserts.assert(this.googUiComponentHandler_)};
goog.ui.Component.prototype.setParent=function(a){if(this==a)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(a&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=a)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=a;goog.ui.Component.superClass_.setParentEventTarget.call(this,a)};goog.ui.Component.prototype.getParent=function(){return this.parent_};
goog.ui.Component.prototype.setParentEventTarget=function(a){if(this.parent_&&this.parent_!=a)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,a)};goog.ui.Component.prototype.getDomHelper=function(){return this.dom_};goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_};goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement(goog.dom.TagName.DIV)};
goog.ui.Component.prototype.render=function(a){this.render_(a)};goog.ui.Component.prototype.renderBefore=function(a){this.render_(a.parentNode,a)};goog.ui.Component.prototype.render_=function(a,d){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom();a?a.insertBefore(this.element_,d||null):this.dom_.getDocument().body.appendChild(this.element_);this.parent_&&!this.parent_.isInDocument()||this.enterDocument()};
goog.ui.Component.prototype.decorate=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(a&&this.canDecorate(a)){this.wasDecorated_=!0;var d=goog.dom.getOwnerDocument(a);this.dom_&&this.dom_.getDocument()==d||(this.dom_=goog.dom.getDomHelper(a));this.decorateInternal(a);goog.ui.Component.ALLOW_DETACHED_DECORATION&&!goog.dom.contains(d,a)||this.enterDocument()}else throw Error(goog.ui.Component.Error.DECORATE_INVALID);};goog.ui.Component.prototype.canDecorate=function(a){return!0};
goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_};goog.ui.Component.prototype.decorateInternal=function(a){this.element_=a};goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(a){!a.isInDocument()&&a.getElement()&&a.enterDocument()})};
goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(a){a.isInDocument()&&a.exitDocument()});this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll();this.inDocument_=!1};
goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument();this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_);this.forEachChild(function(a){a.dispose()});!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_);this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null;goog.ui.Component.superClass_.disposeInternal.call(this)};
goog.ui.Component.prototype.makeId=function(a){return this.getId()+"."+a};goog.ui.Component.prototype.makeIds=function(a){var d={},f;for(f in a)d[f]=this.makeId(a[f]);return d};goog.ui.Component.prototype.getModel=function(){return this.model_};goog.ui.Component.prototype.setModel=function(a){this.model_=a};goog.ui.Component.prototype.getFragmentFromId=function(a){return a.substring(this.getId().length+1)};
goog.ui.Component.prototype.getElementByFragment=function(a){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(a))};goog.ui.Component.prototype.addChild=function(a,d){this.addChildAt(a,this.getChildCount(),d)};
goog.ui.Component.prototype.addChildAt=function(a,d,f){goog.asserts.assert(!!a,"Provided element must not be null.");if(a.inDocument_&&(f||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(0>d||d>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]);a.getParent()==this?(module$contents$goog$object_set(this.childIndex_,a.getId(),a),module$contents$goog$array_remove(this.children_,
a)):module$contents$goog$object_add(this.childIndex_,a.getId(),a);a.setParent(this);module$contents$goog$array_insertAt(this.children_,a,d);a.inDocument_&&this.inDocument_&&a.getParent()==this?(f=this.getContentElement(),(f.childNodes[d]||null)!=a.getElement()&&(a.getElement().parentElement==f&&f.removeChild(a.getElement()),d=f.childNodes[d]||null,f.insertBefore(a.getElement(),d))):f?(this.element_||this.createDom(),d=this.getChildAt(d+1),a.render_(this.getContentElement(),d?d.element_:null)):this.inDocument_&&
!a.inDocument_&&a.element_&&a.element_.parentNode&&a.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&a.enterDocument()};goog.ui.Component.prototype.getContentElement=function(){return this.element_};goog.ui.Component.prototype.isRightToLeft=function(){null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body));return this.rightToLeft_};
goog.ui.Component.prototype.setRightToLeft=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=a};goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length};goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0};goog.ui.Component.prototype.getChildIds=function(){var a=[];this.forEachChild(function(d){a.push(d.getId())});return a};
goog.ui.Component.prototype.getChild=function(a){return this.childIndex_&&a?module$contents$goog$object_get(this.childIndex_,a)||null:null};goog.ui.Component.prototype.getChildAt=function(a){return this.children_?this.children_[a]||null:null};goog.ui.Component.prototype.forEachChild=function(a,d){this.children_&&this.children_.forEach(a,d)};goog.ui.Component.prototype.indexOfChild=function(a){return this.children_&&a?this.children_.indexOf(a):-1};
goog.ui.Component.prototype.removeChild=function(a,d){if(a){var f="string"===typeof a?a:a.getId();a=this.getChild(f);f&&a&&(module$contents$goog$object_remove(this.childIndex_,f),module$contents$goog$array_remove(this.children_,a),d&&(a.exitDocument(),a.element_&&goog.dom.removeNode(a.element_)),a.setParent(null))}if(!a)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return a};goog.ui.Component.prototype.removeChildAt=function(a,d){return this.removeChild(this.getChildAt(a),d)};
goog.ui.Component.prototype.removeChildren=function(a){for(var d=[];this.hasChildren();)d.push(this.removeChildAt(0,a));return d};goog.ui.Component.prototype.pointerEventsEnabled=function(){return this.pointerEventsEnabled_};goog.ui.Component.prototype.setPointerEventsEnabled=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.pointerEventsEnabled_=a};goog.dom.InputType={BUTTON:"button",CHECKBOX:"checkbox",COLOR:"color",DATE:"date",DATETIME:"datetime",DATETIME_LOCAL:"datetime-local",EMAIL:"email",FILE:"file",HIDDEN:"hidden",IMAGE:"image",MENU:"menu",MONTH:"month",NUMBER:"number",PASSWORD:"password",RADIO:"radio",RANGE:"range",RESET:"reset",SEARCH:"search",SELECT_MULTIPLE:"select-multiple",SELECT_ONE:"select-one",SUBMIT:"submit",TEL:"tel",TEXT:"text",TEXTAREA:"textarea",TIME:"time",URL:"url",WEEK:"week"};goog.Thenable=function(){};goog.Thenable.prototype.then=function(a,d,f){};goog.Thenable.IMPLEMENTED_BY_PROP="$goog_Thenable";goog.Thenable.addImplementation=function(a){COMPILED?a.prototype[goog.Thenable.IMPLEMENTED_BY_PROP]=!0:a.prototype.$goog_Thenable=!0};goog.Thenable.isImplementedBy=function(a){if(!a)return!1;try{return COMPILED?!!a[goog.Thenable.IMPLEMENTED_BY_PROP]:!!a.$goog_Thenable}catch(d){return!1}};goog.async={};goog.async.FreeList=class{constructor(a,d,f){this.limit_=f;this.create_=a;this.reset_=d;this.occupants_=0;this.head_=null}get(){let a;0<this.occupants_?(this.occupants_--,a=this.head_,this.head_=a.next,a.next=null):a=this.create_();return a}put(a){this.reset_(a);this.occupants_<this.limit_&&(this.occupants_++,a.next=this.head_,this.head_=a)}occupants(){return this.occupants_}};class module$contents$goog$async$WorkQueue_WorkQueue{constructor(){this.workTail_=this.workHead_=null}add(a,d){const f=this.getUnusedItem_();f.set(a,d);this.workTail_?this.workTail_.next=f:((0,goog.asserts.assert)(!this.workHead_),this.workHead_=f);this.workTail_=f}remove(){let a=null;this.workHead_&&(a=this.workHead_,this.workHead_=this.workHead_.next,this.workHead_||(this.workTail_=null),a.next=null);return a}returnUnused(a){module$contents$goog$async$WorkQueue_WorkQueue.freelist_.put(a)}getUnusedItem_(){return module$contents$goog$async$WorkQueue_WorkQueue.freelist_.get()}}
module$contents$goog$async$WorkQueue_WorkQueue.DEFAULT_MAX_UNUSED=100;module$contents$goog$async$WorkQueue_WorkQueue.freelist_=new goog.async.FreeList(()=>new module$contents$goog$async$WorkQueue_WorkItem,a=>a.reset(),module$contents$goog$async$WorkQueue_WorkQueue.DEFAULT_MAX_UNUSED);class module$contents$goog$async$WorkQueue_WorkItem{constructor(){this.next=this.scope=this.fn=null}set(a,d){this.fn=a;this.scope=d;this.next=null}reset(){this.next=this.scope=this.fn=null}}goog.async.WorkQueue=module$contents$goog$async$WorkQueue_WorkQueue;goog.async.nextTick=function(a,d,f){var h=a;d&&(h=goog.bind(a,d));h=goog.async.nextTick.wrapCallback_(h);"function"===typeof goog.global.setImmediate&&(f||goog.async.nextTick.useSetImmediate_())?goog.global.setImmediate(h):(goog.async.nextTick.setImmediate_||(goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()),goog.async.nextTick.setImmediate_(h))};
goog.async.nextTick.useSetImmediate_=function(){return goog.global.Window&&goog.global.Window.prototype&&!module$contents$goog$labs$userAgent$browser_matchEdgeHtml()&&goog.global.Window.prototype.setImmediate==goog.global.setImmediate?!1:!0};
goog.async.nextTick.getSetImmediateEmulator_=function(){var a=goog.global.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!module$contents$goog$labs$userAgent$engine_isPresto()&&(a=function(){var l=goog.dom.createElement(goog.dom.TagName.IFRAME);l.style.display="none";document.documentElement.appendChild(l);var m=l.contentWindow;l=m.document;l.open();l.close();var p="callImmediate"+Math.random(),q="file:"==m.location.protocol?"*":m.location.protocol+
"//"+m.location.host;l=goog.bind(function(u){if(("*"==q||u.origin==q)&&u.data==p)this.port1.onmessage()},this);m.addEventListener("message",l,!1);this.port1={};this.port2={postMessage:function(){m.postMessage(p,q)}}});if("undefined"!==typeof a&&!module$contents$goog$labs$userAgent$browser_matchIE()){var d=new a,f={},h=f;d.port1.onmessage=function(){if(void 0!==f.next){f=f.next;var l=f.cb;f.cb=null;l()}};return function(l){h.next={cb:l};h=h.next;d.port2.postMessage(0)}}return function(l){goog.global.setTimeout(l,
0)}};goog.async.nextTick.wrapCallback_=goog.functions.identity;goog.debug.entryPointRegistry.register(function(a){goog.async.nextTick.wrapCallback_=a});function module$contents$goog$async$throwException_throwException(a){goog.global.setTimeout(()=>{throw a;},0)}goog.async.throwException=module$contents$goog$async$throwException_throwException;goog.ASSUME_NATIVE_PROMISE=!1;goog.async.run=function(a,d){goog.async.run.schedule_||goog.async.run.initializeRunner_();goog.async.run.workQueueScheduled_||(goog.async.run.schedule_(),goog.async.run.workQueueScheduled_=!0);goog.async.run.workQueue_.add(a,d)};
goog.async.run.initializeRunner_=function(){if(goog.ASSUME_NATIVE_PROMISE||goog.global.Promise&&goog.global.Promise.resolve){var a=goog.global.Promise.resolve(void 0);goog.async.run.schedule_=function(){a.then(goog.async.run.processWorkQueue)}}else goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}};goog.async.run.forceNextTick=function(a){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue);a&&a(goog.async.run.processWorkQueue)}};
goog.async.run.workQueueScheduled_=!1;goog.async.run.workQueue_=new module$contents$goog$async$WorkQueue_WorkQueue;goog.DEBUG&&(goog.async.run.resetQueue=function(){goog.async.run.workQueueScheduled_=!1;goog.async.run.workQueue_=new module$contents$goog$async$WorkQueue_WorkQueue},goog.async.run.resetSchedulerForTest=function(){goog.async.run.initializeRunner_()});
goog.async.run.processWorkQueue=function(){for(var a;a=goog.async.run.workQueue_.remove();){try{a.fn.call(a.scope)}catch(d){module$contents$goog$async$throwException_throwException(d)}goog.async.run.workQueue_.returnUnused(a)}goog.async.run.workQueueScheduled_=!1};goog.promise={};class module$contents$goog$promise$Resolver_Resolver{constructor(){}}goog.promise.Resolver=module$contents$goog$promise$Resolver_Resolver;goog.Promise=function(a,d){this.state_=goog.Promise.State_.PENDING;this.result_=void 0;this.callbackEntriesTail_=this.callbackEntries_=this.parent_=null;this.executing_=!1;0<goog.Promise.UNHANDLED_REJECTION_DELAY?this.unhandledRejectionId_=0:0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1);goog.Promise.LONG_STACK_TRACES&&(this.stack_=[],this.addStackTrace_(Error("created")),this.currentStep_=0);if(a!=goog.nullFunction)try{var f=this;a.call(d,function(h){f.resolve_(goog.Promise.State_.FULFILLED,
h)},function(h){if(goog.DEBUG&&!(h instanceof goog.Promise.CancellationError))try{if(h instanceof Error)throw h;throw Error("Promise rejected.");}catch(l){}f.resolve_(goog.Promise.State_.REJECTED,h)})}catch(h){this.resolve_(goog.Promise.State_.REJECTED,h)}};goog.Promise.LONG_STACK_TRACES=!1;goog.Promise.UNHANDLED_REJECTION_DELAY=0;goog.Promise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3};
goog.Promise.CallbackEntry_=function(){this.next=this.context=this.onRejected=this.onFulfilled=this.child=null;this.always=!1};goog.Promise.CallbackEntry_.prototype.reset=function(){this.context=this.onRejected=this.onFulfilled=this.child=null;this.always=!1};goog.Promise.DEFAULT_MAX_UNUSED=100;goog.Promise.freelist_=new goog.async.FreeList(function(){return new goog.Promise.CallbackEntry_},function(a){a.reset()},goog.Promise.DEFAULT_MAX_UNUSED);
goog.Promise.getCallbackEntry_=function(a,d,f){var h=goog.Promise.freelist_.get();h.onFulfilled=a;h.onRejected=d;h.context=f;return h};goog.Promise.returnEntry_=function(a){goog.Promise.freelist_.put(a)};goog.Promise.resolve=function(a){if(a instanceof goog.Promise)return a;var d=new goog.Promise(goog.nullFunction);d.resolve_(goog.Promise.State_.FULFILLED,a);return d};goog.Promise.reject=function(a){return new goog.Promise(function(d,f){f(a)})};
goog.Promise.resolveThen_=function(a,d,f){goog.Promise.maybeThen_(a,d,f,null)||goog.async.run(goog.partial(d,a))};goog.Promise.race=function(a){return new goog.Promise(function(d,f){a.length||d(void 0);for(var h=0,l;h<a.length;h++)l=a[h],goog.Promise.resolveThen_(l,d,f)})};
goog.Promise.all=function(a){return new goog.Promise(function(d,f){var h=a.length,l=[];if(h)for(var m=function(y,C){h--;l[y]=C;0==h&&d(l)},p=function(y){f(y)},q=0,u;q<a.length;q++)u=a[q],goog.Promise.resolveThen_(u,goog.partial(m,q),p);else d(l)})};
goog.Promise.allSettled=function(a){return new goog.Promise(function(d,f){var h=a.length,l=[];if(h){f=function(q,u,y){h--;l[q]=u?{fulfilled:!0,value:y}:{fulfilled:!1,reason:y};0==h&&d(l)};for(var m=0,p;m<a.length;m++)p=a[m],goog.Promise.resolveThen_(p,goog.partial(f,m,!0),goog.partial(f,m,!1))}else d(l)})};
goog.Promise.firstFulfilled=function(a){return new goog.Promise(function(d,f){var h=a.length,l=[];if(h)for(var m=function(y){d(y)},p=function(y,C){h--;l[y]=C;0==h&&f(l)},q=0,u;q<a.length;q++)u=a[q],goog.Promise.resolveThen_(u,m,goog.partial(p,q));else d(void 0)})};goog.Promise.withResolver=function(){var a,d,f=new goog.Promise(function(h,l){a=h;d=l});return new goog.Promise.Resolver_(f,a,d)};
goog.Promise.prototype.then=function(a,d,f){null!=a&&goog.asserts.assertFunction(a,"opt_onFulfilled should be a function.");null!=d&&goog.asserts.assertFunction(d,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then"));return this.addChildPromise_("function"===typeof a?a:null,"function"===typeof d?d:null,f)};goog.Thenable.addImplementation(goog.Promise);
goog.Promise.prototype.thenVoid=function(a,d,f){null!=a&&goog.asserts.assertFunction(a,"opt_onFulfilled should be a function.");null!=d&&goog.asserts.assertFunction(d,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?");goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then"));this.addCallbackEntry_(goog.Promise.getCallbackEntry_(a||goog.nullFunction,d||null,f))};
goog.Promise.prototype.thenAlways=function(a,d){goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenAlways"));a=goog.Promise.getCallbackEntry_(a,a,d);a.always=!0;this.addCallbackEntry_(a);return this};goog.Promise.prototype.thenCatch=function(a,d){goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenCatch"));return this.addChildPromise_(null,a,d)};goog.Promise.prototype.catch=goog.Promise.prototype.thenCatch;
goog.Promise.prototype.cancel=function(a){if(this.state_==goog.Promise.State_.PENDING){var d=new goog.Promise.CancellationError(a);goog.async.run(function(){this.cancelInternal_(d)},this)}};goog.Promise.prototype.cancelInternal_=function(a){this.state_==goog.Promise.State_.PENDING&&(this.parent_?(this.parent_.cancelChild_(this,a),this.parent_=null):this.resolve_(goog.Promise.State_.REJECTED,a))};
goog.Promise.prototype.cancelChild_=function(a,d){if(this.callbackEntries_){for(var f=0,h=null,l=null,m=this.callbackEntries_;m&&(m.always||(f++,m.child==a&&(h=m),!(h&&1<f)));m=m.next)h||(l=m);h&&(this.state_==goog.Promise.State_.PENDING&&1==f?this.cancelInternal_(d):(l?this.removeEntryAfter_(l):this.popEntry_(),this.executeCallback_(h,goog.Promise.State_.REJECTED,d)))}};
goog.Promise.prototype.addCallbackEntry_=function(a){this.hasEntry_()||this.state_!=goog.Promise.State_.FULFILLED&&this.state_!=goog.Promise.State_.REJECTED||this.scheduleCallbacks_();this.queueEntry_(a)};
goog.Promise.prototype.addChildPromise_=function(a,d,f){var h=goog.Promise.getCallbackEntry_(null,null,null);h.child=new goog.Promise(function(l,m){h.onFulfilled=a?function(p){try{var q=a.call(f,p);l(q)}catch(u){m(u)}}:l;h.onRejected=d?function(p){try{var q=d.call(f,p);void 0===q&&p instanceof goog.Promise.CancellationError?m(p):l(q)}catch(u){m(u)}}:m});h.child.parent_=this;this.addCallbackEntry_(h);return h.child};
goog.Promise.prototype.unblockAndFulfill_=function(a){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED);this.state_=goog.Promise.State_.PENDING;this.resolve_(goog.Promise.State_.FULFILLED,a)};goog.Promise.prototype.unblockAndReject_=function(a){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED);this.state_=goog.Promise.State_.PENDING;this.resolve_(goog.Promise.State_.REJECTED,a)};
goog.Promise.prototype.resolve_=function(a,d){this.state_==goog.Promise.State_.PENDING&&(this===d&&(a=goog.Promise.State_.REJECTED,d=new TypeError("Promise cannot resolve to itself")),this.state_=goog.Promise.State_.BLOCKED,goog.Promise.maybeThen_(d,this.unblockAndFulfill_,this.unblockAndReject_,this)||(this.result_=d,this.state_=a,this.parent_=null,this.scheduleCallbacks_(),a!=goog.Promise.State_.REJECTED||d instanceof goog.Promise.CancellationError||goog.Promise.addUnhandledRejection_(this,d)))};
goog.Promise.maybeThen_=function(a,d,f,h){if(a instanceof goog.Promise)return a.thenVoid(d,f,h),!0;if(goog.Thenable.isImplementedBy(a))return a.then(d,f,h),!0;if(goog.isObject(a))try{var l=a.then;if("function"===typeof l)return goog.Promise.tryThen_(a,l,d,f,h),!0}catch(m){return f.call(h,m),!0}return!1};goog.Promise.tryThen_=function(a,d,f,h,l){var m=!1,p=function(u){m||(m=!0,f.call(l,u))},q=function(u){m||(m=!0,h.call(l,u))};try{d.call(a,p,q)}catch(u){q(u)}};
goog.Promise.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,goog.async.run(this.executeCallbacks_,this))};goog.Promise.prototype.hasEntry_=function(){return!!this.callbackEntries_};goog.Promise.prototype.queueEntry_=function(a){goog.asserts.assert(null!=a.onFulfilled);this.callbackEntriesTail_?this.callbackEntriesTail_.next=a:this.callbackEntries_=a;this.callbackEntriesTail_=a};
goog.Promise.prototype.popEntry_=function(){var a=null;this.callbackEntries_&&(a=this.callbackEntries_,this.callbackEntries_=a.next,a.next=null);this.callbackEntries_||(this.callbackEntriesTail_=null);null!=a&&goog.asserts.assert(null!=a.onFulfilled);return a};goog.Promise.prototype.removeEntryAfter_=function(a){goog.asserts.assert(this.callbackEntries_);goog.asserts.assert(null!=a);a.next==this.callbackEntriesTail_&&(this.callbackEntriesTail_=a);a.next=a.next.next};
goog.Promise.prototype.executeCallbacks_=function(){for(var a;a=this.popEntry_();)goog.Promise.LONG_STACK_TRACES&&this.currentStep_++,this.executeCallback_(a,this.state_,this.result_);this.executing_=!1};
goog.Promise.prototype.executeCallback_=function(a,d,f){d==goog.Promise.State_.REJECTED&&a.onRejected&&!a.always&&this.removeUnhandledRejection_();if(a.child)a.child.parent_=null,goog.Promise.invokeCallback_(a,d,f);else try{a.always?a.onFulfilled.call(a.context):goog.Promise.invokeCallback_(a,d,f)}catch(h){goog.Promise.handleRejection_.call(null,h)}goog.Promise.returnEntry_(a)};
goog.Promise.invokeCallback_=function(a,d,f){d==goog.Promise.State_.FULFILLED?a.onFulfilled.call(a.context,f):a.onRejected&&a.onRejected.call(a.context,f)};goog.Promise.prototype.addStackTrace_=function(a){if(goog.Promise.LONG_STACK_TRACES&&"string"===typeof a.stack){var d=a.stack.split("\n",4)[3];a=a.message;a+=Array(11-a.length).join(" ");this.stack_.push(a+d)}};
goog.Promise.prototype.appendLongStack_=function(a){if(goog.Promise.LONG_STACK_TRACES&&a&&"string"===typeof a.stack&&this.stack_.length){for(var d=["Promise trace:"],f=this;f;f=f.parent_){for(var h=this.currentStep_;0<=h;h--)d.push(f.stack_[h]);d.push("Value: ["+(f.state_==goog.Promise.State_.REJECTED?"REJECTED":"FULFILLED")+"] <"+String(f.result_)+">")}a.stack+="\n\n"+d.join("\n")}};
goog.Promise.prototype.removeUnhandledRejection_=function(){if(0<goog.Promise.UNHANDLED_REJECTION_DELAY)for(var a=this;a&&a.unhandledRejectionId_;a=a.parent_)goog.global.clearTimeout(a.unhandledRejectionId_),a.unhandledRejectionId_=0;else if(0==goog.Promise.UNHANDLED_REJECTION_DELAY)for(a=this;a&&a.hadUnhandledRejection_;a=a.parent_)a.hadUnhandledRejection_=!1};
goog.Promise.addUnhandledRejection_=function(a,d){0<goog.Promise.UNHANDLED_REJECTION_DELAY?a.unhandledRejectionId_=goog.global.setTimeout(function(){a.appendLongStack_(d);goog.Promise.handleRejection_.call(null,d)},goog.Promise.UNHANDLED_REJECTION_DELAY):0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(a.hadUnhandledRejection_=!0,goog.async.run(function(){a.hadUnhandledRejection_&&(a.appendLongStack_(d),goog.Promise.handleRejection_.call(null,d))}))};goog.Promise.handleRejection_=module$contents$goog$async$throwException_throwException;
goog.Promise.setUnhandledRejectionHandler=function(a){goog.Promise.handleRejection_=a};goog.Promise.CancellationError=function(a){module$contents$goog$debug$Error_DebugError.call(this,a);this.reportErrorToServer=!1};goog.inherits(goog.Promise.CancellationError,module$contents$goog$debug$Error_DebugError);goog.Promise.CancellationError.prototype.name="cancel";goog.Promise.Resolver_=function(a,d,f){this.promise=a;this.resolve=d;this.reject=f};goog.Timer=function(a,d){goog.events.EventTarget.call(this);this.interval_=a||1;this.timerObject_=d||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.INVALID_TIMEOUT_ID_=-1;goog.Timer.prototype.enabled=!1;goog.Timer.defaultTimerObject=goog.global;goog.Timer.intervalScale=.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};
goog.Timer.prototype.setInterval=function(a){this.interval_=a;this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()};goog.Timer.prototype.tick_=function(){if(this.enabled){var a=goog.now()-this.last_;0<a&&a<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-a):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.stop(),this.start()))}};
goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};goog.Timer.prototype.start=function(){this.enabled=!0;this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())};goog.Timer.prototype.stop=function(){this.enabled=!1;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};
goog.Timer.TICK="tick";goog.Timer.callOnce=function(a,d,f){if("function"===typeof a)f&&(a=goog.bind(a,f));else if(a&&"function"==typeof a.handleEvent)a=goog.bind(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>goog.Timer.MAX_TIMEOUT_?goog.Timer.INVALID_TIMEOUT_ID_:goog.Timer.defaultTimerObject.setTimeout(a,d||0)};goog.Timer.clear=function(a){goog.Timer.defaultTimerObject.clearTimeout(a)};
goog.Timer.promise=function(a,d){var f=null;return(new goog.Promise(function(h,l){f=goog.Timer.callOnce(function(){h(d)},a);f==goog.Timer.INVALID_TIMEOUT_ID_&&l(Error("Failed to schedule timer."))})).thenCatch(function(h){goog.Timer.clear(f);throw h;})};goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,FF_JP_QUOTE:58,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,
K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,
COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};
goog.events.KeyCodes.isTextModifyingKeyEvent=function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||a.keyCode>=goog.events.KeyCodes.F1&&a.keyCode<=goog.events.KeyCodes.F12)return!1;if(goog.events.KeyCodes.isCharacterKey(a.keyCode))return!0;switch(a.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.VK_NONAME:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;
default:return a.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||a.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};
goog.events.KeyCodes.firesKeyPressEvent=function(a,d,f,h,l,m){if(goog.userAgent.MAC&&l)return goog.events.KeyCodes.isCharacterKey(a);if(l&&!h)return!1;if(!goog.userAgent.GECKO){"number"===typeof d&&(d=goog.events.KeyCodes.normalizeKeyCode(d));var p=d==goog.events.KeyCodes.CTRL||d==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&d==goog.events.KeyCodes.META,q=d==goog.events.KeyCodes.SHIFT&&(h||m);if((!f||goog.userAgent.MAC)&&p||goog.userAgent.MAC&&q)return!1}if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&
h&&f)switch(a){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&h&&d==a)return!1;switch(a){case goog.events.KeyCodes.ENTER:return goog.userAgent.GECKO?
m||l?!1:!(f&&h):!0;case goog.events.KeyCodes.ESC:return!(goog.userAgent.WEBKIT||goog.userAgent.EDGE||goog.userAgent.GECKO)}return goog.userAgent.GECKO&&(h||l||m)?!1:goog.events.KeyCodes.isCharacterKey(a)};
goog.events.KeyCodes.isCharacterKey=function(a){if(a>=goog.events.KeyCodes.ZERO&&a<=goog.events.KeyCodes.NINE||a>=goog.events.KeyCodes.NUM_ZERO&&a<=goog.events.KeyCodes.NUM_MULTIPLY||a>=goog.events.KeyCodes.A&&a<=goog.events.KeyCodes.Z||(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&0==a)return!0;switch(a){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.PLUS_SIGN:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.AT_SIGN:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.FF_HASH:case goog.events.KeyCodes.FF_JP_QUOTE:return!0;
case goog.events.KeyCodes.FF_DASH:return goog.userAgent.GECKO;default:return!1}};goog.events.KeyCodes.normalizeKeyCode=function(a){return goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(a):goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.KeyCodes.normalizeMacWebKitKeyCode(a):a};
goog.events.KeyCodes.normalizeGeckoKeyCode=function(a){switch(a){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return a}};
goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(a){switch(a){case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:return goog.events.KeyCodes.META;default:return a}};goog.events.InputHandler=function(a){goog.events.EventTarget.call(this);this.timer_=null;this.element_=a;a=goog.userAgent.IE||goog.userAgent.EDGE;this.eventHandler_=new goog.events.EventHandler(this);this.eventHandler_.listen(this.element_,a?["keydown","paste","cut","drop","input"]:"input",this)};goog.inherits(goog.events.InputHandler,goog.events.EventTarget);goog.events.InputHandler.EventType={INPUT:"input"};
goog.events.InputHandler.prototype.handleEvent=function(a){if("input"==a.type)goog.userAgent.IE&&goog.userAgent.isVersionOrHigher(10)&&0==a.keyCode&&0==a.charCode||(this.cancelTimerIfSet_(),this.dispatchEvent(this.createInputEvent_(a)));else if("keydown"!=a.type||goog.events.KeyCodes.isTextModifyingKeyEvent(a)){var d="keydown"==a.type?this.element_.value:null;goog.userAgent.IE&&a.keyCode==goog.events.KeyCodes.WIN_IME&&(d=null);var f=this.createInputEvent_(a);this.cancelTimerIfSet_();this.timer_=goog.Timer.callOnce(function(){this.timer_=
null;this.element_.value!=d&&this.dispatchEvent(f)},0,this)}};goog.events.InputHandler.prototype.cancelTimerIfSet_=function(){null!=this.timer_&&(goog.Timer.clear(this.timer_),this.timer_=null)};goog.events.InputHandler.prototype.createInputEvent_=function(a){a=new goog.events.BrowserEvent(a.getBrowserEvent());a.type=goog.events.InputHandler.EventType.INPUT;return a};
goog.events.InputHandler.prototype.disposeInternal=function(){goog.events.InputHandler.superClass_.disposeInternal.call(this);this.eventHandler_.dispose();this.cancelTimerIfSet_();delete this.element_};goog.userAgent.platform={};
goog.userAgent.platform.determineVersion_=function(){if(goog.userAgent.WINDOWS){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(goog.userAgent.getUserAgentString()))?a[1]:"0"}return goog.userAgent.MAC?(a=/1[0|1][_.][0-9_.]+/,(a=a.exec(goog.userAgent.getUserAgentString()))?a[0].replace(/_/g,"."):"10"):goog.userAgent.ANDROID?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(goog.userAgent.getUserAgentString()))?a[1]:""):goog.userAgent.IPHONE||goog.userAgent.IPAD||goog.userAgent.IPOD?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,
(a=a.exec(goog.userAgent.getUserAgentString()))?a[1].replace(/_/g,"."):""):""};goog.userAgent.platform.VERSION=goog.userAgent.platform.determineVersion_();goog.userAgent.platform.isVersion=function(a){return 0<=goog.string.compareVersions(goog.userAgent.platform.VERSION,a)};goog.userAgent.product={};goog.userAgent.product.ASSUME_FIREFOX=!1;goog.userAgent.product.ASSUME_IPHONE=!1;goog.userAgent.product.ASSUME_IPAD=!1;goog.userAgent.product.ASSUME_ANDROID=!1;goog.userAgent.product.ASSUME_CHROME=!1;goog.userAgent.product.ASSUME_SAFARI=!1;
goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI;goog.userAgent.product.OPERA=goog.userAgent.OPERA;goog.userAgent.product.IE=goog.userAgent.IE;goog.userAgent.product.EDGE=goog.userAgent.EDGE;
goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:module$contents$goog$labs$userAgent$browser_matchFirefox();goog.userAgent.product.isIphoneOrIpod_=function(){return module$contents$goog$labs$userAgent$platform_isIphone()||module$contents$goog$labs$userAgent$platform_isIpod()};goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_();
goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:module$contents$goog$labs$userAgent$platform_isIpad();goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:module$contents$goog$labs$userAgent$browser_matchAndroidBrowser();goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:module$contents$goog$labs$userAgent$browser_matchChrome();
goog.userAgent.product.isSafariDesktop_=function(){return module$contents$goog$labs$userAgent$browser_matchSafari()&&!module$contents$goog$labs$userAgent$platform_isIos()};goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_();goog.userAgent.product.determineVersion_=function(){if(goog.userAgent.product.FIREFOX)return goog.userAgent.product.getFirstRegExpGroup_(/Firefox\/([0-9.]+)/);if(goog.userAgent.product.IE||goog.userAgent.product.EDGE||goog.userAgent.product.OPERA)return goog.userAgent.VERSION;if(goog.userAgent.product.CHROME){if(module$contents$goog$labs$userAgent$platform_isIos()||module$contents$goog$labs$userAgent$platform_isMacintosh()){var a=goog.userAgent.product.getFirstRegExpGroup_(/CriOS\/([0-9.]+)/);if(a)return a}return goog.userAgent.product.getFirstRegExpGroup_(/Chrome\/([0-9.]+)/)}if(goog.userAgent.product.SAFARI&&
!module$contents$goog$labs$userAgent$platform_isIos())return goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);if(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD){if(a=goog.userAgent.product.execRegExp_(/Version\/(\S+).*Mobile\/(\S+)/))return a[1]+"."+a[2]}else if(goog.userAgent.product.ANDROID)return(a=goog.userAgent.product.getFirstRegExpGroup_(/Android\s+([0-9.]+)/))?a:goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);return""};
goog.userAgent.product.getFirstRegExpGroup_=function(a){return(a=goog.userAgent.product.execRegExp_(a))?a[1]:""};goog.userAgent.product.execRegExp_=function(a){return a.exec(goog.userAgent.getUserAgentString())};goog.userAgent.product.VERSION=goog.userAgent.product.determineVersion_();goog.userAgent.product.isVersion=function(a){return 0<=goog.string.compareVersions(goog.userAgent.product.VERSION,a)};goog.style.bidi={};goog.style.bidi.getScrollLeft=function(a){var d=goog.style.isRightToLeft(a);return d&&goog.style.bidi.usesNegativeScrollLeftInRtl_()?-a.scrollLeft:d&&!goog.userAgent.EDGE_OR_IE&&"visible"!=goog.style.getComputedOverflowX(a)?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft};
goog.style.bidi.getOffsetStart=function(a){var d=a.offsetLeft,f=a.offsetParent;f||"fixed"!=goog.style.getComputedPosition(a)||(f=goog.dom.getOwnerDocument(a).documentElement);if(!f)return d;if(goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher(58)){var h=goog.style.getBorderBox(f);d+=h.left}else goog.userAgent.isDocumentModeOrHigher(8)&&!goog.userAgent.isDocumentModeOrHigher(9)&&(h=goog.style.getBorderBox(f),d-=h.left);return goog.style.isRightToLeft(f)?f.clientWidth-(d+a.offsetWidth):d};
goog.style.bidi.setScrollOffset=function(a,d){d=Math.max(d,0);goog.style.isRightToLeft(a)?goog.style.bidi.usesNegativeScrollLeftInRtl_()?a.scrollLeft=-d:a.scrollLeft=goog.userAgent.EDGE_OR_IE?d:a.scrollWidth-d-a.clientWidth:a.scrollLeft=d};
goog.style.bidi.usesNegativeScrollLeftInRtl_=function(){var a=goog.userAgent.product.SAFARI&&goog.userAgent.product.isVersion(10),d=goog.userAgent.IOS&&goog.userAgent.platform.isVersion(10);const f=goog.userAgent.product.CHROME&&goog.userAgent.product.isVersion(85);return goog.userAgent.GECKO||a||d||f};goog.style.bidi.setPosition=function(a,d,f,h){null!==f&&(a.style.top=f+"px");h?(a.style.right=d+"px",a.style.left=""):(a.style.left=d+"px",a.style.right="")};goog.ui.HsvPalette=function(a,d,f){goog.ui.Component.call(this,a);this.setColorInternal(d||"#f00");this.className=f||"goog-hsv-palette";this.document_=this.getDomHelper().getDocument()};goog.inherits(goog.ui.HsvPalette,goog.ui.Component);goog.ui.HsvPalette.MSG_HSV_PALETTE_HEX_COLOR_=goog.getMsg("Hex color");goog.ui.HsvPalette.prototype.getColor=function(){return this.color};goog.ui.HsvPalette.prototype.getAlpha=function(){return 1};
goog.ui.HsvPalette.prototype.updateInput=function(){try{var a=goog.color.parse(this.inputElement.value).hex}catch(d){}this.color!=a&&(this.inputElement.value=this.color)};goog.ui.HsvPalette.prototype.setColor=function(a,d){a!=this.color&&(this.setColorInternal(a),this.updateUi(),d||this.dispatchEvent(goog.ui.Component.EventType.ACTION))};
goog.ui.HsvPalette.prototype.setColorInternal=function(a){a=goog.color.parse(a).hex;var d=goog.color.hexToRgb(a);this.hsv_=goog.color.rgbArrayToHsv(d);this.hsv_[0]/=360;this.color=a};goog.ui.HsvPalette.prototype.setHsv=function(a,d,f){if(null!=a||null!=d||null!=f)this.setHsv_(a,d,f),this.updateUi(),this.dispatchEvent(goog.ui.Component.EventType.ACTION)};
goog.ui.HsvPalette.prototype.setHsv_=function(a,d,f){this.hsv_[0]=null!=a?a:this.hsv_[0];this.hsv_[1]=null!=d?d:this.hsv_[1];this.hsv_[2]=null!=f?f:this.hsv_[2];this.color=goog.color.hsvArrayToHex([360*this.hsv_[0],this.hsv_[1],this.hsv_[2]])};goog.ui.HsvPalette.prototype.canDecorate=function(a){return!1};
goog.ui.HsvPalette.prototype.createDom=function(){var a=this.getDomHelper(),d=a.createDom(goog.dom.TagName.DIV,this.className+"-hs-backdrop");this.hsHandleEl_=a.createDom(goog.dom.TagName.DIV,this.className+"-hs-handle");this.hsImageEl_=a.createDom(goog.dom.TagName.DIV,this.className+"-hs-image",this.hsHandleEl_);this.valueBackgroundImageElement=a.createDom(goog.dom.TagName.DIV,this.className+"-v-image");this.vHandleEl_=a.createDom(goog.dom.TagName.DIV,this.className+"-v-handle");this.swatchElement=
a.createDom(goog.dom.TagName.DIV,this.className+"-swatch");this.inputElement=a.createDom(goog.dom.TagName.INPUT,{"class":this.className+"-input","aria-label":goog.ui.HsvPalette.MSG_HSV_PALETTE_HEX_COLOR_,type:goog.dom.InputType.TEXT,dir:"ltr"});this.inputElement.spellcheck=!1;var f=a.createDom(goog.dom.TagName.LABEL,null,this.inputElement);a=a.createDom(goog.dom.TagName.DIV,this.className+"",d,this.hsImageEl_,this.valueBackgroundImageElement,this.vHandleEl_,this.swatchElement,f);this.setElementInternal(a)};
goog.ui.HsvPalette.prototype.enterDocument=function(){goog.ui.HsvPalette.superClass_.enterDocument.call(this);this.updateUi();var a=this.getHandler();a.listen(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDown);this.inputHandler_||(this.inputHandler_=new goog.events.InputHandler(this.inputElement));a.listen(this.inputHandler_,goog.events.InputHandler.EventType.INPUT,this.handleInput)};
goog.ui.HsvPalette.prototype.disposeInternal=function(){goog.ui.HsvPalette.superClass_.disposeInternal.call(this);delete this.hsImageEl_;delete this.hsHandleEl_;delete this.valueBackgroundImageElement;delete this.vHandleEl_;delete this.swatchElement;delete this.inputElement;this.inputHandler_&&(this.inputHandler_.dispose(),delete this.inputHandler_);goog.events.unlistenByKey(this.mouseMoveListener);goog.events.unlistenByKey(this.mouseUpListener)};
goog.ui.HsvPalette.prototype.updateUi=function(){if(this.isInDocument()){var a=this.hsv_[1],d=this.hsv_[2],f=this.hsImageEl_.offsetWidth*this.hsv_[0];this.isRightToLeft()&&(f=this.hsImageEl_.offsetWidth-f);var h=Math.ceil(this.hsHandleEl_.offsetWidth/2);a=this.hsImageEl_.offsetHeight*(1-a);a-=Math.ceil(this.hsHandleEl_.offsetHeight/2);goog.style.bidi.setPosition(this.hsHandleEl_,f-h,a,this.isRightToLeft());a=this.valueBackgroundImageElement.offsetTop-Math.floor(this.vHandleEl_.offsetHeight/2)+(255-
d)/255*this.valueBackgroundImageElement.offsetHeight;this.vHandleEl_.style.top=a+"px";goog.style.setOpacity(this.hsImageEl_,d/255);goog.style.setStyle(this.valueBackgroundImageElement,"background-color",goog.color.hsvToHex(360*this.hsv_[0],this.hsv_[1],255));goog.style.setStyle(this.swatchElement,"background-color",this.color);goog.style.setStyle(this.swatchElement,"color",127.5<this.hsv_[2]?"#000":"#fff");this.updateInput()}};
goog.ui.HsvPalette.prototype.handleMouseDown=function(a){if(a.target==this.valueBackgroundImageElement||a.target==this.vHandleEl_){var d=goog.style.getBounds(this.valueBackgroundImageElement);this.handleMouseMoveV_(d,a);this.mouseMoveListener=goog.events.listen(this.document_,goog.events.EventType.MOUSEMOVE,goog.bind(this.handleMouseMoveV_,this,d));this.mouseUpListener=goog.events.listen(this.document_,goog.events.EventType.MOUSEUP,this.handleMouseUp,!1,this)}else if(a.target==this.hsImageEl_||a.target==
this.hsHandleEl_)d=goog.style.getBounds(this.hsImageEl_),this.handleMouseMoveHs_(d,a),this.mouseMoveListener=goog.events.listen(this.document_,goog.events.EventType.MOUSEMOVE,goog.bind(this.handleMouseMoveHs_,this,d)),this.mouseUpListener=goog.events.listen(this.document_,goog.events.EventType.MOUSEUP,this.handleMouseUp,!1,this)};
goog.ui.HsvPalette.prototype.handleMouseMoveV_=function(a,d){d.preventDefault();var f=this.getDomHelper().getDocumentScroll();this.setHsv(null,null,Math.round(255*(a.top+a.height-Math.min(Math.max(f.y+d.clientY,a.top),a.top+a.height))/a.height))};
goog.ui.HsvPalette.prototype.handleMouseMoveHs_=function(a,d){d.preventDefault();var f=this.getDomHelper().getDocumentScroll();this.setHsv((Math.min(Math.max(f.x+d.clientX,a.left),a.left+a.width)-a.left)/a.width,(-Math.min(Math.max(f.y+d.clientY,a.top),a.top+a.height)+a.top+a.height)/a.height,null)};goog.ui.HsvPalette.prototype.handleMouseUp=function(a){goog.events.unlistenByKey(this.mouseMoveListener);goog.events.unlistenByKey(this.mouseUpListener)};
goog.ui.HsvPalette.prototype.handleInput=function(a){/^#?[0-9a-f]{6}$/i.test(this.inputElement.value)&&this.setColor(this.inputElement.value)};goog.ui.HsvaPalette=function(a,d,f,h){goog.ui.HsvPalette.call(this,a,d,h);this.alpha_=void 0!==f?f:1;this.className=h||"goog-hsva-palette"};goog.inherits(goog.ui.HsvaPalette,goog.ui.HsvPalette);goog.ui.HsvaPalette.prototype.getAlpha=function(){return this.alpha_};goog.ui.HsvaPalette.prototype.setAlpha=function(a){this.setColorAlphaHelper_(this.color,a)};goog.ui.HsvaPalette.prototype.setColor=function(a){this.setColorAlphaHelper_(a,1)};
goog.ui.HsvaPalette.prototype.getColorRgbaHex=function(){var a=Math.floor(255*this.alpha_).toString(16);return this.color+(1==a.length?"0"+a:a)};goog.ui.HsvaPalette.prototype.setColorRgbaHex=function(a){a=goog.ui.HsvaPalette.parseColorRgbaHex_(a);this.setColorAlphaHelper_(a[0],a[1])};goog.ui.HsvaPalette.prototype.setColorAlphaHelper_=function(a,d){var f=this.color!=a,h=this.alpha_!=d;this.alpha_=d;this.color=a;f&&this.setColorInternal(a);if(f||h)this.updateUi(),this.dispatchEvent(goog.ui.Component.EventType.ACTION)};
goog.ui.HsvaPalette.prototype.createDom=function(){goog.ui.HsvaPalette.superClass_.createDom.call(this);var a=this.getDomHelper();this.aImageEl_=a.createDom(goog.dom.TagName.DIV,this.className+"-a-image");this.aHandleEl_=a.createDom(goog.dom.TagName.DIV,this.className+"-a-handle");this.swatchBackdropEl_=a.createDom(goog.dom.TagName.DIV,this.className+"-swatch-backdrop");var d=this.getElement();a.appendChild(d,this.aImageEl_);a.appendChild(d,this.aHandleEl_);a.appendChild(d,this.swatchBackdropEl_)};
goog.ui.HsvaPalette.prototype.disposeInternal=function(){goog.ui.HsvaPalette.superClass_.disposeInternal.call(this);delete this.aImageEl_;delete this.aHandleEl_;delete this.swatchBackdropEl_};
goog.ui.HsvaPalette.prototype.updateUi=function(){goog.ui.HsvaPalette.superClass_.updateUi.call(this);if(this.isInDocument()){var a=255*this.alpha_;this.aHandleEl_.style.top=this.aImageEl_.offsetTop-Math.floor(this.aHandleEl_.offsetHeight/2)+(255-a)/255*this.aImageEl_.offsetHeight+"px";this.aImageEl_.style.backgroundColor=this.color;goog.style.setOpacity(this.swatchElement,a/255)}};
goog.ui.HsvaPalette.prototype.updateInput=function(){module$contents$goog$array_equals([this.color,this.alpha_],goog.ui.HsvaPalette.parseUserInput_(this.inputElement.value))||(this.inputElement.value=this.getColorRgbaHex())};
goog.ui.HsvaPalette.prototype.handleMouseDown=function(a){goog.ui.HsvaPalette.superClass_.handleMouseDown.call(this,a);if(a.target==this.aImageEl_||a.target==this.aHandleEl_){var d=goog.style.getBounds(this.valueBackgroundImageElement);this.handleMouseMoveA_(d,a);this.mouseMoveListener=goog.events.listen(this.getDomHelper().getDocument(),goog.events.EventType.MOUSEMOVE,goog.bind(this.handleMouseMoveA_,this,d));this.mouseUpListener=goog.events.listen(this.getDomHelper().getDocument(),goog.events.EventType.MOUSEUP,
this.handleMouseUp,!1,this)}};goog.ui.HsvaPalette.prototype.handleMouseMoveA_=function(a,d){d.preventDefault();var f=this.getDomHelper().getDocumentScroll();this.setAlpha((a.top+a.height-Math.min(Math.max(f.y+d.clientY,a.top),a.top+a.height))/a.height)};goog.ui.HsvaPalette.prototype.handleInput=function(a){(a=goog.ui.HsvaPalette.parseUserInput_(this.inputElement.value))&&this.setColorAlphaHelper_(a[0],a[1])};
goog.ui.HsvaPalette.parseUserInput_=function(a){return/^#?[0-9a-f]{8}$/i.test(a)?goog.ui.HsvaPalette.parseColorRgbaHex_(a):/^#?[0-9a-f]{6}$/i.test(a)?[a,1]:null};goog.ui.HsvaPalette.parseColorRgbaHex_=function(a){a=goog.color.alpha.parse(a).hex;return[goog.color.alpha.extractHexColor(a),parseInt(goog.color.alpha.extractAlpha(a),16)/255]};goog.events.KeyEvent=function(a,d,f,h){goog.events.BrowserEvent.call(this,h);this.type=goog.events.KeyEvent.EventType.KEY;this.keyCode=a;this.charCode=d;this.repeat=f};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.events.KeyEvent.EventType={KEY:"key"};goog.events.KeyHandler=function(a,d){goog.events.EventTarget.call(this);a&&this.attach(a,d)};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.prototype.altKey_=!1;
goog.events.KeyHandler.EventType=goog.events.KeyEvent.EventType;
goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,
63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT};
goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,
"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO;
goog.events.KeyHandler.prototype.handleKeyDown_=function(a){(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!a.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!a.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!a.metaKey)&&this.resetState();-1==this.lastKey_&&(a.ctrlKey&&a.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:a.altKey&&a.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:a.metaKey&&
a.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META));goog.events.KeyCodes.firesKeyPressEvent(a.keyCode,this.lastKey_,a.shiftKey,a.ctrlKey,a.altKey,a.metaKey)?(this.keyCode_=goog.events.KeyCodes.normalizeKeyCode(a.keyCode),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=a.altKey)):this.handleEvent(a)};goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1};
goog.events.KeyHandler.prototype.handleKeyup_=function(a){this.resetState();this.altKey_=a.altKey};
goog.events.KeyHandler.prototype.handleEvent=function(a){var d=a.getBrowserEvent(),f=d.altKey;if(goog.userAgent.IE&&a.type==goog.events.EventType.KEYPRESS){var h=this.keyCode_;var l=h!=goog.events.KeyCodes.ENTER&&h!=goog.events.KeyCodes.ESC?d.keyCode:0}else(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&a.type==goog.events.EventType.KEYPRESS?(h=this.keyCode_,l=0<=d.charCode&&63232>d.charCode&&goog.events.KeyCodes.isCharacterKey(h)?d.charCode:0):(a.type==goog.events.EventType.KEYPRESS?(goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&
(f=this.altKey_),d.keyCode==d.charCode?32>d.keyCode?(h=d.keyCode,l=0):(h=this.keyCode_,l=d.charCode):(h=d.keyCode||this.keyCode_,l=d.charCode||0)):(h=d.keyCode||this.keyCode_,l=d.charCode||0),goog.userAgent.MAC&&l==goog.events.KeyCodes.QUESTION_MARK&&h==goog.events.KeyCodes.WIN_KEY&&(h=goog.events.KeyCodes.SLASH));var m=h=goog.events.KeyCodes.normalizeKeyCode(h);h?63232<=h&&h in goog.events.KeyHandler.safariKey_?m=goog.events.KeyHandler.safariKey_[h]:25==h&&a.shiftKey&&(m=9):d.keyIdentifier&&d.keyIdentifier in
goog.events.KeyHandler.keyIdentifier_&&(m=goog.events.KeyHandler.keyIdentifier_[d.keyIdentifier]);if(!goog.userAgent.GECKO||a.type!=goog.events.EventType.KEYPRESS||goog.events.KeyCodes.firesKeyPressEvent(m,this.lastKey_,a.shiftKey,a.ctrlKey,f,a.metaKey))a=m==this.lastKey_,this.lastKey_=m,d=new goog.events.KeyEvent(m,l,a,d),d.altKey=f,this.dispatchEvent(d)};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};
goog.events.KeyHandler.prototype.attach=function(a,d){this.keyUpKey_&&this.detach();this.element_=a;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,d);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,d,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,d,this)};
goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null);this.element_=null;this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};goog.ui.ac={};goog.ui.ac.ArrayMatcher=function(a,d){this.rows_=a||[];this.useSimilar_=!d};goog.ui.ac.ArrayMatcher.prototype.setRows=function(a){this.rows_=a||[]};goog.ui.ac.ArrayMatcher.prototype.requestMatchingRows=function(a,d,f,h){d=this.useSimilar_?goog.ui.ac.ArrayMatcher.getMatchesForRows(a,d,this.rows_):this.getPrefixMatches(a,d);f(a,d)};
goog.ui.ac.ArrayMatcher.getMatchesForRows=function(a,d,f){var h=goog.ui.ac.ArrayMatcher.getPrefixMatchesForRows(a,d,f);0==h.length&&(h=goog.ui.ac.ArrayMatcher.getSimilarMatchesForRows(a,d,f));return h};goog.ui.ac.ArrayMatcher.prototype.getPrefixMatches=function(a,d){return goog.ui.ac.ArrayMatcher.getPrefixMatchesForRows(a,d,this.rows_)};
goog.ui.ac.ArrayMatcher.getPrefixMatchesForRows=function(a,d,f){var h=[];if(""!=a){a=goog.string.regExpEscape(a);a=new RegExp("(^|\\W+)"+a,"i");for(var l=0;l<f.length&&h.length<d;l++){var m=f[l];String(m).match(a)&&h.push(m)}}return h};goog.ui.ac.ArrayMatcher.prototype.getSimilarRows=function(a,d){return goog.ui.ac.ArrayMatcher.getSimilarMatchesForRows(a,d,this.rows_)};
goog.ui.ac.ArrayMatcher.getSimilarMatchesForRows=function(a,d,f){for(var h=[],l=0;l<f.length;l++){var m=f[l],p=a.toLowerCase(),q=String(m).toLowerCase(),u=0;if(-1!=q.indexOf(p))u=parseInt((q.indexOf(p)/4).toString(),10);else for(var y=p.split(""),C=-1,K=10,X=0,M;M=y[X];X++)M=q.indexOf(M),M>C?(C=M-C-1,C>K-5&&(C=K-5),u+=C,C=M):(u+=K,K+=5);u<6*p.length&&h.push({str:m,score:u,index:l})}h.sort(function(G,J){var z=G.score-J.score;return 0!=z?z:G.index-J.index});a=[];for(X=0;X<d&&X<h.length;X++)a.push(h[X].str);
return a};goog.ui.ac.RenderOptions=function(){};goog.ui.ac.RenderOptions.prototype.preserveHilited_=!1;goog.ui.ac.RenderOptions.prototype.setPreserveHilited=function(a){this.preserveHilited_=a};goog.ui.ac.RenderOptions.prototype.getPreserveHilited=function(){return this.preserveHilited_};goog.ui.ac.RenderOptions.prototype.setAutoHilite=function(a){this.autoHilite_=a};goog.ui.ac.RenderOptions.prototype.getAutoHilite=function(){return this.autoHilite_};goog.ui.ac.AutoComplete=function(a,d,f){goog.events.EventTarget.call(this);this.matcher_=a;this.selectionHandler_=f;this.renderer_=d;goog.events.listen(d,[goog.ui.ac.AutoComplete.EventType.HILITE,goog.ui.ac.AutoComplete.EventType.SELECT,goog.ui.ac.AutoComplete.EventType.CANCEL_DISMISS,goog.ui.ac.AutoComplete.EventType.DISMISS],this.handleEvent,!1,this);this.token_=null;this.rows_=[];this.hiliteId_=-1;this.firstRowId_=0;this.dismissTimer_=this.target_=null;this.inputToAnchorMap_={}};
goog.inherits(goog.ui.ac.AutoComplete,goog.events.EventTarget);goog.ui.ac.AutoComplete.prototype.maxMatches_=10;goog.ui.ac.AutoComplete.prototype.autoHilite_=!0;goog.ui.ac.AutoComplete.prototype.allowFreeSelect_=!1;goog.ui.ac.AutoComplete.prototype.wrap_=!1;goog.ui.ac.AutoComplete.prototype.triggerSuggestionsOnUpdate_=!1;goog.ui.ac.AutoComplete.EventType={ROW_HILITE:"rowhilite",HILITE:"hilite",SELECT:"select",DISMISS:"dismiss",CANCEL_DISMISS:"canceldismiss",UPDATE:"update",SUGGESTIONS_UPDATE:"suggestionsupdate"};
goog.ui.ac.AutoComplete.prototype.getMatcher=function(){return goog.asserts.assert(this.matcher_)};goog.ui.ac.AutoComplete.prototype.setMatcher=function(a){this.matcher_=a};goog.ui.ac.AutoComplete.prototype.getSelectionHandler=function(){return goog.asserts.assert(this.selectionHandler_)};goog.ui.ac.AutoComplete.prototype.getRenderer=function(){return this.renderer_};goog.ui.ac.AutoComplete.prototype.setRenderer=function(a){this.renderer_=a};goog.ui.ac.AutoComplete.prototype.getToken=function(){return this.token_};
goog.ui.ac.AutoComplete.prototype.setTokenInternal=function(a){this.token_=a};goog.ui.ac.AutoComplete.prototype.getSuggestion=function(a){return this.rows_[a]};goog.ui.ac.AutoComplete.prototype.getAllSuggestions=function(){return goog.asserts.assert(this.rows_)};goog.ui.ac.AutoComplete.prototype.getSuggestionCount=function(){return this.rows_.length};goog.ui.ac.AutoComplete.prototype.getHighlightedId=function(){return this.hiliteId_};
goog.ui.ac.AutoComplete.prototype.handleEvent=function(a){var d=this.matcher_;if(a.target==this.renderer_)switch(a.type){case goog.ui.ac.AutoComplete.EventType.HILITE:this.hiliteId(a.row);break;case goog.ui.ac.AutoComplete.EventType.SELECT:var f=!1;if("number"===typeof a.row){a=a.row;f=this.getIndexOfId(a);var h=this.rows_[f];f=!!h&&d.isRowDisabled&&d.isRowDisabled(h);h&&!f&&this.hiliteId_!=a&&this.hiliteId(a)}f||this.selectHilited();break;case goog.ui.ac.AutoComplete.EventType.CANCEL_DISMISS:this.cancelDelayedDismiss();
break;case goog.ui.ac.AutoComplete.EventType.DISMISS:this.dismissOnDelay()}};goog.ui.ac.AutoComplete.prototype.setMaxMatches=function(a){this.maxMatches_=a};goog.ui.ac.AutoComplete.prototype.setAutoHilite=function(a){this.autoHilite_=a};goog.ui.ac.AutoComplete.prototype.setAllowFreeSelect=function(a){this.allowFreeSelect_=a};goog.ui.ac.AutoComplete.prototype.setWrap=function(a){this.wrap_=a};
goog.ui.ac.AutoComplete.prototype.setTriggerSuggestionsOnUpdate=function(a){this.triggerSuggestionsOnUpdate_=a};goog.ui.ac.AutoComplete.prototype.setToken=function(a,d){this.token_!=a&&(this.token_=a,this.matcher_.requestMatchingRows(this.token_,this.maxMatches_,goog.bind(this.matchListener_,this),d),this.cancelDelayedDismiss())};goog.ui.ac.AutoComplete.prototype.getTarget=function(){return this.target_};goog.ui.ac.AutoComplete.prototype.setTarget=function(a){this.target_=a};
goog.ui.ac.AutoComplete.prototype.isOpen=function(){return this.renderer_.isVisible()};goog.ui.ac.AutoComplete.prototype.getRowCount=function(){return this.getSuggestionCount()};
goog.ui.ac.AutoComplete.prototype.hiliteNext=function(){for(var a=this.firstRowId_+this.rows_.length-1,d=this.hiliteId_,f=0;f<this.rows_.length;f++){if(d>=this.firstRowId_&&d<a)d++;else if(-1==d)d=this.firstRowId_;else if(this.allowFreeSelect_&&d==a){this.hiliteId(-1);break}else if(this.wrap_&&d==a)d=this.firstRowId_;else break;if(this.hiliteId(d))return!0}return!1};
goog.ui.ac.AutoComplete.prototype.hilitePrev=function(){for(var a=this.firstRowId_+this.rows_.length-1,d=this.hiliteId_,f=0;f<this.rows_.length;f++){if(d>this.firstRowId_)d--;else if(this.allowFreeSelect_&&d==this.firstRowId_){this.hiliteId(-1);break}else if(!this.wrap_||-1!=d&&d!=this.firstRowId_)break;else d=a;if(this.hiliteId(d))return!0}return!1};
goog.ui.ac.AutoComplete.prototype.hiliteId=function(a){var d=this.getIndexOfId(a),f=this.rows_[d];return f&&this.matcher_.isRowDisabled&&this.matcher_.isRowDisabled(f)?!1:(this.hiliteId_=a,this.renderer_.hiliteId(a),-1!=d)};goog.ui.ac.AutoComplete.prototype.hiliteIndex=function(a){return this.hiliteId(this.getIdOfIndex_(a))};
goog.ui.ac.AutoComplete.prototype.selectHilited=function(){var a=this.getIndexOfId(this.hiliteId_);if(-1!=a){var d=this.rows_[a],f=this.selectionHandler_.selectRow(d);this.triggerSuggestionsOnUpdate_?(this.token_=null,this.dismissOnDelay()):this.dismiss();f||(this.dispatchEvent({type:goog.ui.ac.AutoComplete.EventType.UPDATE,row:d,index:a}),this.triggerSuggestionsOnUpdate_&&this.selectionHandler_.update(!0));return!0}this.dismiss();this.dispatchEvent({type:goog.ui.ac.AutoComplete.EventType.UPDATE,
row:null,index:null});return!1};goog.ui.ac.AutoComplete.prototype.hasHighlight=function(){return this.isOpen()&&-1!=this.getIndexOfId(this.hiliteId_)};goog.ui.ac.AutoComplete.prototype.dismiss=function(){this.hiliteId_=-1;this.token_=null;this.firstRowId_+=this.rows_.length;this.rows_=[];window.clearTimeout(this.dismissTimer_);this.dismissTimer_=null;this.renderer_.dismiss();this.dispatchEvent(goog.ui.ac.AutoComplete.EventType.SUGGESTIONS_UPDATE);this.dispatchEvent(goog.ui.ac.AutoComplete.EventType.DISMISS)};
goog.ui.ac.AutoComplete.prototype.dismissOnDelay=function(){this.dismissTimer_||(this.dismissTimer_=window.setTimeout(goog.bind(this.dismiss,this),100))};goog.ui.ac.AutoComplete.prototype.immediatelyCancelDelayedDismiss_=function(){return this.dismissTimer_?(window.clearTimeout(this.dismissTimer_),this.dismissTimer_=null,!0):!1};
goog.ui.ac.AutoComplete.prototype.cancelDelayedDismiss=function(){this.immediatelyCancelDelayedDismiss_()||window.setTimeout(goog.bind(this.immediatelyCancelDelayedDismiss_,this),10)};goog.ui.ac.AutoComplete.prototype.disposeInternal=function(){goog.ui.ac.AutoComplete.superClass_.disposeInternal.call(this);delete this.inputToAnchorMap_;this.renderer_.dispose();this.selectionHandler_.dispose();this.matcher_=null};
goog.ui.ac.AutoComplete.prototype.matchListener_=function(a,d,f){this.token_==a&&this.renderRows(d,f)};
goog.ui.ac.AutoComplete.prototype.renderRows=function(a,d){var f="object"==goog.typeOf(d)&&d;d=(f?f.getPreserveHilited():d)?this.getIndexOfId(this.hiliteId_):-1;this.firstRowId_+=this.rows_.length;this.rows_=a;for(var h=[],l=0;l<a.length;++l)h.push({id:this.getIdOfIndex_(l),data:a[l]});a=null;this.target_&&(a=this.inputToAnchorMap_[goog.getUid(this.target_)]||this.target_);this.renderer_.setAnchorElement(a);this.renderer_.renderRows(h,this.token_,this.target_);a=this.autoHilite_;f&&void 0!==f.getAutoHilite()&&
(a=f.getAutoHilite());this.hiliteId_=-1;(a||0<=d)&&0!=h.length&&this.token_&&(0<=d?this.hiliteId(this.getIdOfIndex_(d)):this.hiliteNext());this.dispatchEvent(goog.ui.ac.AutoComplete.EventType.SUGGESTIONS_UPDATE)};goog.ui.ac.AutoComplete.prototype.getIndexOfId=function(a){a-=this.firstRowId_;return 0>a||a>=this.rows_.length?-1:a};goog.ui.ac.AutoComplete.prototype.getIdOfIndex_=function(a){return this.firstRowId_+a};
goog.ui.ac.AutoComplete.prototype.attachInputs=function(a){var d=this.selectionHandler_;d.attachInputs.apply(d,arguments)};goog.ui.ac.AutoComplete.prototype.detachInputs=function(a){var d=this.selectionHandler_;d.detachInputs.apply(d,arguments);Array.prototype.forEach.call(arguments,function(f){module$contents$goog$object_remove(this.inputToAnchorMap_,goog.getUid(f))},this)};goog.ui.ac.AutoComplete.prototype.attachInputWithAnchor=function(a,d){this.inputToAnchorMap_[goog.getUid(a)]=d;this.attachInputs(a)};
goog.ui.ac.AutoComplete.prototype.update=function(a){this.selectionHandler_.update(a)};goog.a11y={};goog.a11y.aria={};
goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",
MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",
TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TEXTINFO:"textinfo",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"};goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",COLINDEX:"colindex",CONTROLS:"controls",CURRENT:"current",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",
OWNS:"owns",POSINSET:"posinset",PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",ROWINDEX:"rowindex",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"};goog.a11y.aria.AutoCompleteValues={INLINE:"inline",LIST:"list",BOTH:"both",NONE:"none"};goog.a11y.aria.DropEffectValues={COPY:"copy",MOVE:"move",LINK:"link",EXECUTE:"execute",POPUP:"popup",NONE:"none"};
goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"};goog.a11y.aria.OrientationValues={VERTICAL:"vertical",HORIZONTAL:"horizontal"};goog.a11y.aria.RelevantValues={ADDITIONS:"additions",REMOVALS:"removals",TEXT:"text",ALL:"all"};goog.a11y.aria.SortValues={ASCENDING:"ascending",DESCENDING:"descending",NONE:"none",OTHER:"other"};goog.a11y.aria.CheckedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};
goog.a11y.aria.ExpandedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.GrabbedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.InvalidValues={FALSE:"false",TRUE:"true",GRAMMAR:"grammar",SPELLING:"spelling"};goog.a11y.aria.PressedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"};goog.a11y.aria.SelectedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.datatables={};
goog.a11y.aria.datatables.getDefaultValuesMap=function(){goog.a11y.aria.DefaultStateValueMap_||(goog.a11y.aria.DefaultStateValueMap_={[goog.a11y.aria.State.ATOMIC]:!1,[goog.a11y.aria.State.AUTOCOMPLETE]:"none",[goog.a11y.aria.State.DROPEFFECT]:"none",[goog.a11y.aria.State.HASPOPUP]:!1,[goog.a11y.aria.State.LIVE]:"off",[goog.a11y.aria.State.MULTILINE]:!1,[goog.a11y.aria.State.MULTISELECTABLE]:!1,[goog.a11y.aria.State.ORIENTATION]:"vertical",[goog.a11y.aria.State.READONLY]:!1,[goog.a11y.aria.State.RELEVANT]:"additions text",
[goog.a11y.aria.State.REQUIRED]:!1,[goog.a11y.aria.State.SORT]:"none",[goog.a11y.aria.State.BUSY]:!1,[goog.a11y.aria.State.DISABLED]:!1,[goog.a11y.aria.State.HIDDEN]:!1,[goog.a11y.aria.State.INVALID]:"false"});return goog.a11y.aria.DefaultStateValueMap_};goog.a11y.aria.ARIA_PREFIX_="aria-";goog.a11y.aria.ROLE_ATTRIBUTE_="role";
goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_=module$contents$goog$object_createSet([goog.dom.TagName.A,goog.dom.TagName.AREA,goog.dom.TagName.BUTTON,goog.dom.TagName.HEAD,goog.dom.TagName.INPUT,goog.dom.TagName.LINK,goog.dom.TagName.MENU,goog.dom.TagName.META,goog.dom.TagName.OPTGROUP,goog.dom.TagName.OPTION,goog.dom.TagName.PROGRESS,goog.dom.TagName.STYLE,goog.dom.TagName.SELECT,goog.dom.TagName.SOURCE,goog.dom.TagName.TEXTAREA,goog.dom.TagName.TITLE,goog.dom.TagName.TRACK]);
goog.a11y.aria.CONTAINER_ROLES_=[goog.a11y.aria.Role.COMBOBOX,goog.a11y.aria.Role.GRID,goog.a11y.aria.Role.GROUP,goog.a11y.aria.Role.LISTBOX,goog.a11y.aria.Role.MENU,goog.a11y.aria.Role.MENUBAR,goog.a11y.aria.Role.RADIOGROUP,goog.a11y.aria.Role.ROW,goog.a11y.aria.Role.ROWGROUP,goog.a11y.aria.Role.TAB_LIST,goog.a11y.aria.Role.TEXTBOX,goog.a11y.aria.Role.TOOLBAR,goog.a11y.aria.Role.TREE,goog.a11y.aria.Role.TREEGRID];
goog.a11y.aria.setRole=function(a,d){d?(goog.asserts.ENABLE_ASSERTS&&goog.asserts.assert(module$contents$goog$object_containsValue(goog.a11y.aria.Role,d),"No such ARIA role "+d),a.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_,d)):goog.a11y.aria.removeRole(a)};goog.a11y.aria.getRole=function(a){return a.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)||null};goog.a11y.aria.removeRole=function(a){a.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)};
goog.a11y.aria.setState=function(a,d,f){Array.isArray(f)&&(f=f.join(" "));var h=goog.a11y.aria.getAriaAttributeName_(d);""===f||void 0==f?(f=goog.a11y.aria.datatables.getDefaultValuesMap(),d in f?a.setAttribute(h,f[d]):a.removeAttribute(h)):a.setAttribute(h,f)};
goog.a11y.aria.toggleState=function(a,d){var f=goog.a11y.aria.getState(a,d);goog.string.isEmptyOrWhitespace(goog.string.makeSafe(f))||"true"==f||"false"==f?goog.a11y.aria.setState(a,d,"true"==f?"false":"true"):goog.a11y.aria.removeState(a,d)};goog.a11y.aria.removeState=function(a,d){a.removeAttribute(goog.a11y.aria.getAriaAttributeName_(d))};goog.a11y.aria.getState=function(a,d){a=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(d));return null==a||void 0==a?"":String(a)};
goog.a11y.aria.getActiveDescendant=function(a){var d=goog.a11y.aria.getState(a,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(a).getElementById(d)};goog.a11y.aria.setActiveDescendant=function(a,d){var f="";d&&(f=d.id,goog.asserts.assert(f,"The active element should have an id."));goog.a11y.aria.setState(a,goog.a11y.aria.State.ACTIVEDESCENDANT,f)};goog.a11y.aria.getLabel=function(a){return goog.a11y.aria.getState(a,goog.a11y.aria.State.LABEL)};
goog.a11y.aria.setLabel=function(a,d){goog.a11y.aria.setState(a,goog.a11y.aria.State.LABEL,d)};goog.a11y.aria.assertRoleIsSetInternalUtil=function(a,d){goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_[a.tagName]||(a=goog.a11y.aria.getRole(a),goog.asserts.assert(null!=a,"The element ARIA role cannot be null."),goog.asserts.assert(module$contents$goog$array_contains(d,a),'Non existing or incorrect role set for element.The role set is "'+a+'". The role should be any of "'+d+'". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.'))};
goog.a11y.aria.getStateBoolean=function(a,d){a=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(d));goog.asserts.assert("boolean"===typeof a||null==a||"true"==a||"false"==a);return null==a?a:"boolean"===typeof a?a:"true"==a};goog.a11y.aria.getStateNumber=function(a,d){a=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(d));goog.asserts.assert((null==a||!isNaN(Number(a)))&&"boolean"!==typeof a);return null==a?null:Number(a)};
goog.a11y.aria.getStateString=function(a,d){a=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(d));goog.asserts.assert((null==a||"string"===typeof a)&&(""==a||isNaN(Number(a)))&&"true"!=a&&"false"!=a);return null==a||""==a?null:a};goog.a11y.aria.getStringArrayStateInternalUtil=function(a,d){a=a.getAttribute(goog.a11y.aria.getAriaAttributeName_(d));return goog.a11y.aria.splitStringOnWhitespace_(a)};goog.a11y.aria.hasState=function(a,d){return a.hasAttribute(goog.a11y.aria.getAriaAttributeName_(d))};
goog.a11y.aria.isContainerRole=function(a){a=goog.a11y.aria.getRole(a);return module$contents$goog$array_contains(goog.a11y.aria.CONTAINER_ROLES_,a)};goog.a11y.aria.splitStringOnWhitespace_=function(a){return a?a.split(/\s+/):[]};
goog.a11y.aria.getAriaAttributeName_=function(a){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.assert(a,"ARIA attribute cannot be empty."),goog.asserts.assert(module$contents$goog$object_containsValue(goog.a11y.aria.State,a),"No such ARIA attribute "+a));return goog.a11y.aria.ARIA_PREFIX_+a};goog.dom.selection={};goog.dom.selection.setStart=function(a,d){goog.dom.selection.useSelectionProperties_(a)&&(a.selectionStart=d)};goog.dom.selection.getStart=function(a){return goog.dom.selection.getEndPoints_(a,!0)[0]};
goog.dom.selection.getEndPointsTextareaIe_=function(a,d,f){d=d.duplicate();for(var h=a.text,l=h,m=d.text,p=m,q=!1;!q;)0==a.compareEndPoints("StartToEnd",a)?q=!0:(a.moveEnd("character",-1),a.text==h?l+="\r\n":q=!0);if(f)return[l.length,-1];for(a=!1;!a;)0==d.compareEndPoints("StartToEnd",d)?a=!0:(d.moveEnd("character",-1),d.text==m?p+="\r\n":a=!0);return[l.length,l.length+p.length]};goog.dom.selection.getEndPoints=function(a){return goog.dom.selection.getEndPoints_(a,!1)};
goog.dom.selection.getEndPoints_=function(a,d){var f=0,h=0;goog.dom.selection.useSelectionProperties_(a)&&(f=a.selectionStart,h=d?-1:a.selectionEnd);return[f,h]};goog.dom.selection.setEnd=function(a,d){goog.dom.selection.useSelectionProperties_(a)&&(a.selectionEnd=d)};goog.dom.selection.getEnd=function(a){return goog.dom.selection.getEndPoints_(a,!1)[1]};goog.dom.selection.setCursorPosition=function(a,d){goog.dom.selection.useSelectionProperties_(a)&&(a.selectionStart=d,a.selectionEnd=d)};
goog.dom.selection.setText=function(a,d){if(goog.dom.selection.useSelectionProperties_(a)){var f=a.value,h=a.selectionStart,l=f.substr(0,h);f=f.substr(a.selectionEnd);a.value=l+d+f;a.selectionStart=h;a.selectionEnd=h+d.length}else throw Error("Cannot set the selection end");};goog.dom.selection.getText=function(a){if(goog.dom.selection.useSelectionProperties_(a))return a.value.substring(a.selectionStart,a.selectionEnd);throw Error("Cannot get the selection text");};
goog.dom.selection.getSelectionRangeText_=function(a){a=a.duplicate();for(var d=a.text,f=d,h=!1;!h;)0==a.compareEndPoints("StartToEnd",a)?h=!0:(a.moveEnd("character",-1),a.text==d?f+="\r\n":h=!0);return f};goog.dom.selection.getRangeIe_=function(a){var d=a.ownerDocument||a.document,f=d.selection.createRange();a.type==goog.dom.InputType.TEXTAREA?(d=d.body.createTextRange(),d.moveToElementText(a)):d=a.createTextRange();return[d,f]};
goog.dom.selection.canonicalizePositionIe_=function(a,d){a.type==goog.dom.InputType.TEXTAREA&&(a=a.value.substring(0,d),d=goog.string.canonicalizeNewlines(a).length);return d};goog.dom.selection.useSelectionProperties_=function(a){try{return"number"==typeof a.selectionStart}catch(d){return!1}};goog.ui.ac.InputHandler=function(a,d,f,h){goog.Disposable.call(this);h=h||150;this.multi_=null!=f?f:!0;this.setSeparators(a||goog.ui.ac.InputHandler.STANDARD_LIST_SEPARATORS);this.literals_=d||"";this.preventSelectionOnTab_=!1;this.preventDefaultOnTab_=this.multi_;this.timer_=0<h?new goog.Timer(h):null;this.eh_=new goog.events.EventHandler(this);this.activateHandler_=new goog.events.EventHandler(this);this.keyHandler_=new goog.events.KeyHandler;this.lastKeyCode_=-1};
goog.inherits(goog.ui.ac.InputHandler,goog.Disposable);goog.ui.ac.InputHandler.REQUIRES_ASYNC_BLUR_=!1;goog.ui.ac.InputHandler.STANDARD_LIST_SEPARATORS=",;";goog.ui.ac.InputHandler.QUOTE_LITERALS='"';goog.ui.ac.InputHandler.prototype.whitespaceWrapEntries_=!0;goog.ui.ac.InputHandler.prototype.generateNewTokenOnLiteral_=!0;goog.ui.ac.InputHandler.prototype.upsideDown_=!1;goog.ui.ac.InputHandler.prototype.separatorUpdates_=!0;goog.ui.ac.InputHandler.prototype.separatorSelects_=!0;
goog.ui.ac.InputHandler.prototype.activeTimeoutId_=null;goog.ui.ac.InputHandler.prototype.activeElement_=null;goog.ui.ac.InputHandler.prototype.lastValue_="";goog.ui.ac.InputHandler.prototype.waitingForIme_=!1;goog.ui.ac.InputHandler.prototype.rowJustSelected_=!1;goog.ui.ac.InputHandler.prototype.updateDuringTyping_=!0;goog.ui.ac.InputHandler.prototype.attachAutoComplete=function(a){this.ac_=a};goog.ui.ac.InputHandler.prototype.getAutoComplete=function(){return this.ac_};
goog.ui.ac.InputHandler.prototype.getActiveElement=function(){return this.activeElement_};goog.ui.ac.InputHandler.prototype.getValue=function(){return this.activeElement_.value};goog.ui.ac.InputHandler.prototype.setValue=function(a){this.activeElement_.value=a};goog.ui.ac.InputHandler.prototype.getCursorPosition=function(){return goog.dom.selection.getStart(this.activeElement_)};
goog.ui.ac.InputHandler.prototype.setCursorPosition=function(a){goog.dom.selection.setStart(this.activeElement_,a);goog.dom.selection.setEnd(this.activeElement_,a)};
goog.ui.ac.InputHandler.prototype.attachInput=function(a){goog.dom.isElement(a)&&(goog.a11y.aria.setRole(a,goog.a11y.aria.Role.COMBOBOX),goog.a11y.aria.setState(a,goog.a11y.aria.State.AUTOCOMPLETE,"list"));this.eh_.listen(a,goog.events.EventType.FOCUS,this.handleFocus);this.eh_.listen(a,goog.events.EventType.BLUR,this.handleBlur);if(!this.activeElement_&&(this.activateHandler_.listen(a,goog.events.EventType.KEYDOWN,this.onKeyDownOnInactiveElement_),goog.dom.isElement(a))){var d=goog.dom.getOwnerDocument(a);
goog.dom.getActiveElement(d)==a&&this.processFocus(a)}};goog.ui.ac.InputHandler.prototype.detachInput=function(a){goog.dom.isElement(a)&&(goog.a11y.aria.removeRole(a),goog.a11y.aria.removeState(a,goog.a11y.aria.State.AUTOCOMPLETE));a==this.activeElement_&&this.handleBlur();this.eh_.unlisten(a,goog.events.EventType.FOCUS,this.handleFocus);this.eh_.unlisten(a,goog.events.EventType.BLUR,this.handleBlur);this.activeElement_||this.activateHandler_.unlisten(a,goog.events.EventType.KEYDOWN,this.onKeyDownOnInactiveElement_)};
goog.ui.ac.InputHandler.prototype.attachInputs=function(a){for(var d=0;d<arguments.length;d++)this.attachInput(arguments[d])};goog.ui.ac.InputHandler.prototype.detachInputs=function(a){for(var d=0;d<arguments.length;d++)this.detachInput(arguments[d])};goog.ui.ac.InputHandler.prototype.selectRow=function(a,d){this.activeElement_&&this.setTokenText(a.toString(),d);return!1};
goog.ui.ac.InputHandler.prototype.setTokenText=function(a,d){if(void 0!==d?d:this.multi_){d=this.getTokenIndex_(this.getValue(),this.getCursorPosition());var f=this.splitInput_(this.getValue());this.separatorCheck_&&!this.separatorCheck_.test(a)&&(a=goog.string.trimRight(a)+this.defaultSeparator_);this.whitespaceWrapEntries_&&(0==d||goog.string.isEmptyOrWhitespace(f[d-1])||(a=" "+a),d==f.length-1&&(a+=" "));if(a!=f[d]){f[d]=a;a=this.activeElement_;(goog.userAgent.GECKO||goog.userAgent.IE)&&a.blur();
a.value=f.join("");for(var h=0,l=0;l<=d;l++)h+=f[l].length;a.focus();this.setCursorPosition(h)}}else this.setValue(a);this.rowJustSelected_=!0};goog.ui.ac.InputHandler.prototype.disposeInternal=function(){goog.ui.ac.InputHandler.superClass_.disposeInternal.call(this);null!=this.activeTimeoutId_&&window.clearTimeout(this.activeTimeoutId_);this.eh_.dispose();delete this.eh_;this.activateHandler_.dispose();this.keyHandler_.dispose();module$contents$goog$dispose_dispose(this.timer_)};
goog.ui.ac.InputHandler.prototype.setSeparators=function(a,d){this.separators_=a;this.defaultSeparator_=null!=d?d:this.separators_.substring(0,1);a=this.multi_?"[\\s"+this.separators_+"]+":"[\\s]+";this.trimmer_=new RegExp("^"+a+"|"+a+"$","g");this.separatorCheck_=new RegExp("\\s*["+this.separators_+"]$")};goog.ui.ac.InputHandler.prototype.setUpsideDown=function(a){this.upsideDown_=a};goog.ui.ac.InputHandler.prototype.setWhitespaceWrapEntries=function(a){this.whitespaceWrapEntries_=a};
goog.ui.ac.InputHandler.prototype.setGenerateNewTokenOnLiteral=function(a){this.generateNewTokenOnLiteral_=a};goog.ui.ac.InputHandler.prototype.setTrimmingRegExp=function(a){this.trimmer_=a};goog.ui.ac.InputHandler.prototype.setEndsWithSeparatorRegExp=function(a){this.separatorCheck_=a};goog.ui.ac.InputHandler.prototype.setPreventDefaultOnTab=function(a){this.preventDefaultOnTab_=a};goog.ui.ac.InputHandler.prototype.setPreventSelectionOnTab=function(a){this.preventSelectionOnTab_=a};
goog.ui.ac.InputHandler.prototype.setSeparatorCompletes=function(a){this.separatorSelects_=this.separatorUpdates_=a};goog.ui.ac.InputHandler.prototype.setSeparatorSelects=function(a){this.separatorSelects_=a};goog.ui.ac.InputHandler.prototype.getThrottleTime=function(){return this.timer_?this.timer_.getInterval():-1};goog.ui.ac.InputHandler.prototype.setRowJustSelected=function(a){this.rowJustSelected_=a};
goog.ui.ac.InputHandler.prototype.setThrottleTime=function(a){0>a?(this.timer_.dispose(),this.timer_=null):this.timer_?this.timer_.setInterval(a):this.timer_=new goog.Timer(a)};goog.ui.ac.InputHandler.prototype.getUpdateDuringTyping=function(){return this.updateDuringTyping_};goog.ui.ac.InputHandler.prototype.setUpdateDuringTyping=function(a){this.updateDuringTyping_=a};
goog.ui.ac.InputHandler.prototype.handleKeyEvent=function(a){switch(a.keyCode){case goog.events.KeyCodes.DOWN:if(this.ac_.isOpen())return this.moveDown_(),a.preventDefault(),!0;if(!this.multi_)return this.update(!0),a.preventDefault(),!0;break;case goog.events.KeyCodes.UP:if(this.ac_.isOpen())return this.moveUp_(),a.preventDefault(),!0;break;case goog.events.KeyCodes.TAB:if(!this.ac_.isOpen()||a.shiftKey||this.preventSelectionOnTab_)this.ac_.dismiss();else if(this.update(),this.ac_.selectHilited()&&
this.preventDefaultOnTab_)return a.preventDefault(),!0;break;case goog.events.KeyCodes.ENTER:if(this.ac_.isOpen()){if(this.update(),this.ac_.selectHilited())return a.preventDefault(),a.stopPropagation(),!0}else this.ac_.dismiss();break;case goog.events.KeyCodes.ESC:if(this.ac_.isOpen())return this.ac_.dismiss(),a.preventDefault(),a.stopPropagation(),!0;break;case goog.events.KeyCodes.WIN_IME:if(!this.waitingForIme_)return this.startWaitingForIme_(),!0;break;default:this.timer_&&!this.updateDuringTyping_&&
(this.timer_.stop(),this.timer_.start())}return this.handleSeparator_(a)};goog.ui.ac.InputHandler.prototype.handleSeparator_=function(a){var d=this.multi_&&a.charCode&&-1!=this.separators_.indexOf(String.fromCharCode(a.charCode));this.separatorUpdates_&&d&&this.update();return this.separatorSelects_&&d&&this.ac_.selectHilited()?(a.preventDefault(),!0):!1};goog.ui.ac.InputHandler.prototype.needKeyUpListener=function(){return!1};goog.ui.ac.InputHandler.prototype.handleKeyUp=function(a){return!1};
goog.ui.ac.InputHandler.prototype.addEventHandlers_=function(){this.keyHandler_.attach(this.activeElement_);this.eh_.listen(this.keyHandler_,goog.events.KeyEvent.EventType.KEY,this.onKey_);this.needKeyUpListener()&&this.eh_.listen(this.activeElement_,goog.events.EventType.KEYUP,this.handleKeyUp);this.eh_.listen(this.activeElement_,goog.events.EventType.MOUSEDOWN,this.onMouseDown_);goog.userAgent.IE&&this.eh_.listen(this.activeElement_,goog.events.EventType.KEYPRESS,this.onIeKeyPress_)};
goog.ui.ac.InputHandler.prototype.removeEventHandlers_=function(){this.eh_.unlisten(this.keyHandler_,goog.events.KeyEvent.EventType.KEY,this.onKey_);this.keyHandler_.detach();this.eh_.unlisten(this.activeElement_,goog.events.EventType.KEYUP,this.handleKeyUp);this.eh_.unlisten(this.activeElement_,goog.events.EventType.MOUSEDOWN,this.onMouseDown_);goog.userAgent.IE&&this.eh_.unlisten(this.activeElement_,goog.events.EventType.KEYPRESS,this.onIeKeyPress_);this.waitingForIme_&&this.stopWaitingForIme_()};
goog.ui.ac.InputHandler.prototype.handleFocus=function(a){this.processFocus(a.target||null)};goog.ui.ac.InputHandler.prototype.processFocus=function(a){this.activateHandler_.removeAll();this.ac_&&this.ac_.cancelDelayedDismiss();a!=this.activeElement_&&(this.activeElement_=a,this.timer_&&(this.timer_.start(),this.eh_.listen(this.timer_,goog.Timer.TICK,this.onTick_)),this.lastValue_=this.getValue(),this.addEventHandlers_())};
goog.ui.ac.InputHandler.prototype.handleBlur=function(a){goog.ui.ac.InputHandler.REQUIRES_ASYNC_BLUR_?this.activeTimeoutId_=window.setTimeout(goog.bind(this.processBlur,this),0):this.processBlur()};goog.ui.ac.InputHandler.prototype.processBlur=function(){this.activeElement_&&(this.removeEventHandlers_(),this.activeElement_=null,this.timer_&&(this.timer_.stop(),this.eh_.unlisten(this.timer_,goog.Timer.TICK,this.onTick_)),this.ac_&&this.ac_.dismissOnDelay())};
goog.ui.ac.InputHandler.prototype.onTick_=function(a){this.update()};goog.ui.ac.InputHandler.prototype.onKeyDownOnInactiveElement_=function(a){this.handleFocus(a)};goog.ui.ac.InputHandler.prototype.onKey_=function(a){this.lastKeyCode_=a.keyCode;this.ac_&&this.handleKeyEvent(a)};goog.ui.ac.InputHandler.prototype.onKeyPress_=function(a){this.waitingForIme_&&this.lastKeyCode_!=goog.events.KeyCodes.WIN_IME&&this.stopWaitingForIme_()};
goog.ui.ac.InputHandler.prototype.onKeyUp_=function(a){this.waitingForIme_&&(a.keyCode==goog.events.KeyCodes.ENTER||a.keyCode==goog.events.KeyCodes.M&&a.ctrlKey)&&this.stopWaitingForIme_()};goog.ui.ac.InputHandler.prototype.onMouseDown_=function(a){this.ac_&&this.handleMouseDown(a)};goog.ui.ac.InputHandler.prototype.handleMouseDown=function(a){};
goog.ui.ac.InputHandler.prototype.startWaitingForIme_=function(){this.waitingForIme_||(this.eh_.listen(this.activeElement_,goog.events.EventType.KEYUP,this.onKeyUp_),this.eh_.listen(this.activeElement_,goog.events.EventType.KEYPRESS,this.onKeyPress_),this.waitingForIme_=!0)};
goog.ui.ac.InputHandler.prototype.stopWaitingForIme_=function(){this.waitingForIme_&&(this.waitingForIme_=!1,this.eh_.unlisten(this.activeElement_,goog.events.EventType.KEYPRESS,this.onKeyPress_),this.eh_.unlisten(this.activeElement_,goog.events.EventType.KEYUP,this.onKeyUp_))};goog.ui.ac.InputHandler.prototype.onIeKeyPress_=function(a){this.handleSeparator_(a)};
goog.ui.ac.InputHandler.prototype.update=function(a){if(this.activeElement_&&(a||this.getValue()!=this.lastValue_)){if(a||!this.rowJustSelected_)a=this.parseToken(),this.ac_&&(this.ac_.setTarget(this.activeElement_),this.ac_.setToken(a,this.getValue()));this.lastValue_=this.getValue()}this.rowJustSelected_=!1};goog.ui.ac.InputHandler.prototype.parseToken=function(){return this.parseToken_()};goog.ui.ac.InputHandler.prototype.moveUp_=function(){return this.upsideDown_?this.ac_.hiliteNext():this.ac_.hilitePrev()};
goog.ui.ac.InputHandler.prototype.moveDown_=function(){return this.upsideDown_?this.ac_.hilitePrev():this.ac_.hiliteNext()};goog.ui.ac.InputHandler.prototype.parseToken_=function(){var a=this.getCursorPosition(),d=this.getValue();return this.trim_(this.splitInput_(d)[this.getTokenIndex_(d,a)])};goog.ui.ac.InputHandler.prototype.trim_=function(a){return this.trimmer_?String(a).replace(this.trimmer_,""):a};
goog.ui.ac.InputHandler.prototype.getTokenIndex_=function(a,d){var f=this.splitInput_(a);if(d==a.length)return f.length-1;for(var h=a=0,l=0;h<f.length&&l<=d;h++)l+=f[h].length,a=h;return a};
goog.ui.ac.InputHandler.prototype.splitInput_=function(a){if(!this.multi_)return[a];a=String(a).split("");for(var d=[],f=[],h=0,l=!1;h<a.length;h++)this.literals_&&-1!=this.literals_.indexOf(a[h])?(this.generateNewTokenOnLiteral_&&!l&&(d.push(f.join("")),f.length=0),f.push(a[h]),l=!l):l||-1==this.separators_.indexOf(a[h])?f.push(a[h]):(f.push(a[h]),d.push(f.join("")),f.length=0);d.push(f.join(""));return d};goog.dom.classlist={};goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST=!1;goog.dom.classlist.getClassName_=function(a){return"string"==typeof a.className?a.className:a.getAttribute&&a.getAttribute("class")||""};goog.dom.classlist.get=function(a){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?a.classList:goog.dom.classlist.getClassName_(a).match(/\S+/g)||[]};goog.dom.classlist.set=function(a,d){"string"==typeof a.className?a.className=d:a.setAttribute&&a.setAttribute("class",d)};
goog.dom.classlist.contains=function(a,d){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?a.classList.contains(d):module$contents$goog$array_contains(goog.dom.classlist.get(a),d)};goog.dom.classlist.add=function(a,d){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList)a.classList.add(d);else if(!goog.dom.classlist.contains(a,d)){var f=goog.dom.classlist.getClassName_(a);goog.dom.classlist.set(a,f+(0<f.length?" "+d:d))}};
goog.dom.classlist.addAll=function(a,d){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList)Array.prototype.forEach.call(d,function(l){goog.dom.classlist.add(a,l)});else{var f={};Array.prototype.forEach.call(goog.dom.classlist.get(a),function(l){f[l]=!0});Array.prototype.forEach.call(d,function(l){f[l]=!0});d="";for(var h in f)d+=0<d.length?" "+h:h;goog.dom.classlist.set(a,d)}};
goog.dom.classlist.remove=function(a,d){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?a.classList.remove(d):goog.dom.classlist.contains(a,d)&&goog.dom.classlist.set(a,Array.prototype.filter.call(goog.dom.classlist.get(a),function(f){return f!=d}).join(" "))};
goog.dom.classlist.removeAll=function(a,d){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||a.classList?Array.prototype.forEach.call(d,function(f){goog.dom.classlist.remove(a,f)}):goog.dom.classlist.set(a,Array.prototype.filter.call(goog.dom.classlist.get(a),function(f){return!module$contents$goog$array_contains(d,f)}).join(" "))};goog.dom.classlist.enable=function(a,d,f){f?goog.dom.classlist.add(a,d):goog.dom.classlist.remove(a,d)};
goog.dom.classlist.enableAll=function(a,d,f){(f?goog.dom.classlist.addAll:goog.dom.classlist.removeAll)(a,d)};goog.dom.classlist.swap=function(a,d,f){return goog.dom.classlist.contains(a,d)?(goog.dom.classlist.remove(a,d),goog.dom.classlist.add(a,f),!0):!1};goog.dom.classlist.toggle=function(a,d){var f=!goog.dom.classlist.contains(a,d);goog.dom.classlist.enable(a,d,f);return f};goog.dom.classlist.addRemove=function(a,d,f){goog.dom.classlist.remove(a,d);goog.dom.classlist.add(a,f)};goog.fx={};goog.fx.Transition=function(){};goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"};goog.fx.TransitionBase=function(){goog.events.EventTarget.call(this);this.state_=goog.fx.TransitionBase.State.STOPPED;this.endTime=this.startTime=null};goog.inherits(goog.fx.TransitionBase,goog.events.EventTarget);goog.fx.TransitionBase.State={STOPPED:0,PAUSED:-1,PLAYING:1};goog.fx.TransitionBase.prototype.play=goog.abstractMethod;goog.fx.TransitionBase.prototype.stop=goog.abstractMethod;goog.fx.TransitionBase.prototype.pause=goog.abstractMethod;goog.fx.TransitionBase.prototype.getStateInternal=function(){return this.state_};
goog.fx.TransitionBase.prototype.setStatePlaying=function(){this.state_=goog.fx.TransitionBase.State.PLAYING};goog.fx.TransitionBase.prototype.setStatePaused=function(){this.state_=goog.fx.TransitionBase.State.PAUSED};goog.fx.TransitionBase.prototype.setStateStopped=function(){this.state_=goog.fx.TransitionBase.State.STOPPED};goog.fx.TransitionBase.prototype.isPlaying=function(){return this.state_==goog.fx.TransitionBase.State.PLAYING};
goog.fx.TransitionBase.prototype.isPaused=function(){return this.state_==goog.fx.TransitionBase.State.PAUSED};goog.fx.TransitionBase.prototype.isStopped=function(){return this.state_==goog.fx.TransitionBase.State.STOPPED};goog.fx.TransitionBase.prototype.onBegin=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.BEGIN)};goog.fx.TransitionBase.prototype.onEnd=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.END)};goog.fx.TransitionBase.prototype.onFinish=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.FINISH)};
goog.fx.TransitionBase.prototype.onPause=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PAUSE)};goog.fx.TransitionBase.prototype.onPlay=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PLAY)};goog.fx.TransitionBase.prototype.onResume=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.RESUME)};goog.fx.TransitionBase.prototype.onStop=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.STOP)};
goog.fx.TransitionBase.prototype.dispatchAnimationEvent=function(a){this.dispatchEvent(a)};goog.async.AnimationDelay=function(a,d,f){goog.Disposable.call(this);this.id_=null;this.usingListeners_=!1;this.listener_=a;this.handler_=f;this.win_=d||window;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.AnimationDelay,goog.Disposable);goog.async.AnimationDelay.TIMEOUT=20;goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint";
goog.async.AnimationDelay.prototype.start=function(){this.stop();this.usingListeners_=!1;var a=this.getRaf_(),d=this.getCancelRaf_();a&&!d&&this.win_.mozRequestAnimationFrame?(this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_),this.win_.mozRequestAnimationFrame(null),this.usingListeners_=!0):this.id_=a&&d?a.call(this.win_,this.callback_):this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)};
goog.async.AnimationDelay.prototype.startIfNotActive=function(){this.isActive()||this.start()};goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var a=this.getRaf_(),d=this.getCancelRaf_();a&&!d&&this.win_.mozRequestAnimationFrame?goog.events.unlistenByKey(this.id_):a&&d?d.call(this.win_,this.id_):this.win_.clearTimeout(this.id_)}this.id_=null};goog.async.AnimationDelay.prototype.fire=function(){this.stop();this.doAction_()};
goog.async.AnimationDelay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};goog.async.AnimationDelay.prototype.isActive=function(){return null!=this.id_};goog.async.AnimationDelay.prototype.doAction_=function(){this.usingListeners_&&this.id_&&goog.events.unlistenByKey(this.id_);this.id_=null;this.listener_.call(this.handler_,goog.now())};goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop();goog.async.AnimationDelay.superClass_.disposeInternal.call(this)};
goog.async.AnimationDelay.prototype.getRaf_=function(){var a=this.win_;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||null};goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var a=this.win_;return a.cancelAnimationFrame||a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||null};goog.async.Delay=function(a,d,f){goog.Disposable.call(this);this.listener_=a;this.interval_=d||0;this.handler_=f;this.callback_=goog.bind(this.doAction_,this)};goog.inherits(goog.async.Delay,goog.Disposable);goog.async.Delay.prototype.id_=0;goog.async.Delay.prototype.disposeInternal=function(){goog.async.Delay.superClass_.disposeInternal.call(this);this.stop();delete this.listener_;delete this.handler_};
goog.async.Delay.prototype.start=function(a){this.stop();this.id_=goog.Timer.callOnce(this.callback_,void 0!==a?a:this.interval_)};goog.async.Delay.prototype.startIfNotActive=function(a){this.isActive()||this.start(a)};goog.async.Delay.prototype.stop=function(){this.isActive()&&goog.Timer.clear(this.id_);this.id_=0};goog.async.Delay.prototype.fire=function(){this.stop();this.doAction_()};goog.async.Delay.prototype.fireIfActive=function(){this.isActive()&&this.fire()};
goog.async.Delay.prototype.isActive=function(){return 0!=this.id_};goog.async.Delay.prototype.doAction_=function(){this.id_=0;this.listener_&&this.listener_.call(this.handler_)};goog.fx.anim={};goog.fx.anim.Animated=function(){};goog.fx.anim.TIMEOUT=goog.async.AnimationDelay.TIMEOUT;goog.fx.anim.activeAnimations_={};goog.fx.anim.animationWindow_=null;goog.fx.anim.animationDelay_=null;goog.fx.anim.registerAnimation=function(a){var d=goog.getUid(a);d in goog.fx.anim.activeAnimations_||(goog.fx.anim.activeAnimations_[d]=a);goog.fx.anim.requestAnimationFrame_()};
goog.fx.anim.unregisterAnimation=function(a){a=goog.getUid(a);delete goog.fx.anim.activeAnimations_[a];module$contents$goog$object_isEmpty(goog.fx.anim.activeAnimations_)&&goog.fx.anim.cancelAnimationFrame_()};goog.fx.anim.tearDown=function(){goog.fx.anim.animationWindow_=null;module$contents$goog$dispose_dispose(goog.fx.anim.animationDelay_);goog.fx.anim.animationDelay_=null;goog.fx.anim.activeAnimations_={}};
goog.fx.anim.setAnimationWindow=function(a){var d=goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.isActive();module$contents$goog$dispose_dispose(goog.fx.anim.animationDelay_);goog.fx.anim.animationDelay_=null;goog.fx.anim.animationWindow_=a;d&&goog.fx.anim.requestAnimationFrame_()};
goog.fx.anim.requestAnimationFrame_=function(){goog.fx.anim.animationDelay_||(goog.fx.anim.animationDelay_=goog.fx.anim.animationWindow_?new goog.async.AnimationDelay(function(d){goog.fx.anim.cycleAnimations_(d)},goog.fx.anim.animationWindow_):new goog.async.Delay(function(){goog.fx.anim.cycleAnimations_(goog.now())},goog.async.AnimationDelay.TIMEOUT));var a=goog.fx.anim.animationDelay_;a.isActive()||a.start()};goog.fx.anim.cancelAnimationFrame_=function(){goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.stop()};
goog.fx.anim.cycleAnimations_=function(a){module$contents$goog$object_forEach(goog.fx.anim.activeAnimations_,function(d){d.onAnimationFrame(a)});module$contents$goog$object_isEmpty(goog.fx.anim.activeAnimations_)||goog.fx.anim.requestAnimationFrame_()};goog.fx.Animation=function(a,d,f,h){goog.fx.TransitionBase.call(this);if(!Array.isArray(a)||!Array.isArray(d))throw Error("Start and end parameters must be arrays");if(a.length!=d.length)throw Error("Start and end points must be the same length");this.startPoint=a;this.endPoint=d;this.duration=f;this.accel_=h;this.coords=[];this.useRightPositioningForRtl_=!1;this.progress=this.fps_=0;this.lastFrame=null};goog.inherits(goog.fx.Animation,goog.fx.TransitionBase);
goog.fx.Animation.prototype.getDuration=function(){return this.duration};goog.fx.Animation.prototype.enableRightPositioningForRtl=function(a){this.useRightPositioningForRtl_=a};goog.fx.Animation.prototype.isRightPositioningForRtlEnabled=function(){return this.useRightPositioningForRtl_};
goog.fx.Animation.EventType={PLAY:goog.fx.Transition.EventType.PLAY,BEGIN:goog.fx.Transition.EventType.BEGIN,RESUME:goog.fx.Transition.EventType.RESUME,END:goog.fx.Transition.EventType.END,STOP:goog.fx.Transition.EventType.STOP,FINISH:goog.fx.Transition.EventType.FINISH,PAUSE:goog.fx.Transition.EventType.PAUSE,ANIMATE:"animate",DESTROY:"destroy"};goog.fx.Animation.TIMEOUT=goog.async.AnimationDelay.TIMEOUT;goog.fx.Animation.State=goog.fx.TransitionBase.State;goog.fx.Animation.setAnimationWindow=function(a){goog.fx.anim.setAnimationWindow(a)};
goog.fx.Animation.prototype.play=function(a){if(a||this.isStopped())this.progress=0,this.coords=this.startPoint;else if(this.isPlaying())return!1;goog.fx.anim.unregisterAnimation(this);this.startTime=a=goog.now();this.isPaused()&&(this.startTime-=this.duration*this.progress);this.endTime=this.startTime+this.duration;this.lastFrame=this.startTime;if(!this.progress)this.onBegin();this.onPlay();if(this.isPaused())this.onResume();this.setStatePlaying();goog.fx.anim.registerAnimation(this);this.cycle(a);
return!0};goog.fx.Animation.prototype.stop=function(a){goog.fx.anim.unregisterAnimation(this);this.setStateStopped();a&&(this.progress=1);this.updateCoords_(this.progress);this.onStop();this.onEnd()};goog.fx.Animation.prototype.pause=function(){this.isPlaying()&&(goog.fx.anim.unregisterAnimation(this),this.setStatePaused(),this.onPause())};goog.fx.Animation.prototype.getProgress=function(){return this.progress};
goog.fx.Animation.prototype.setProgress=function(a){this.progress=a;this.isPlaying()&&(this.startTime=goog.now()-this.duration*this.progress,this.endTime=this.startTime+this.duration)};goog.fx.Animation.prototype.disposeInternal=function(){this.isStopped()||this.stop(!1);this.onDestroy();goog.fx.Animation.superClass_.disposeInternal.call(this)};goog.fx.Animation.prototype.destroy=function(){this.dispose()};goog.fx.Animation.prototype.onAnimationFrame=function(a){this.cycle(a)};
goog.fx.Animation.prototype.cycle=function(a){goog.asserts.assertNumber(this.startTime);goog.asserts.assertNumber(this.endTime);goog.asserts.assertNumber(this.lastFrame);a<this.startTime&&(this.endTime=a+this.endTime-this.startTime,this.startTime=a);this.progress=(a-this.startTime)/(this.endTime-this.startTime);1<this.progress&&(this.progress=1);this.fps_=1E3/(a-this.lastFrame);this.lastFrame=a;this.updateCoords_(this.progress);if(1==this.progress)this.setStateStopped(),goog.fx.anim.unregisterAnimation(this),
this.onFinish(),this.onEnd();else if(this.isPlaying())this.onAnimate()};goog.fx.Animation.prototype.updateCoords_=function(a){"function"===typeof this.accel_&&(a=this.accel_(a));this.coords=Array(this.startPoint.length);for(var d=0;d<this.startPoint.length;d++)this.coords[d]=(this.endPoint[d]-this.startPoint[d])*a+this.startPoint[d]};goog.fx.Animation.prototype.onAnimate=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.ANIMATE)};goog.fx.Animation.prototype.onDestroy=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.DESTROY)};
goog.fx.Animation.prototype.dispatchAnimationEvent=function(a){this.dispatchEvent(new goog.fx.AnimationEvent(a,this))};goog.fx.AnimationEvent=function(a,d){goog.events.Event.call(this,a);this.coords=d.coords;this.x=d.coords[0];this.y=d.coords[1];this.z=d.coords[2];this.duration=d.duration;this.progress=d.getProgress();this.fps=d.fps_;this.state=d.getStateInternal();this.anim=d};goog.inherits(goog.fx.AnimationEvent,goog.events.Event);goog.fx.AnimationEvent.prototype.coordsAsInts=function(){return this.coords.map(Math.round)};goog.fx.dom={};goog.fx.dom.PredefinedEffect=function(a,d,f,h,l){goog.fx.Animation.call(this,d,f,h,l);this.element=a};goog.inherits(goog.fx.dom.PredefinedEffect,goog.fx.Animation);goog.fx.dom.PredefinedEffect.prototype.updateStyle=goog.nullFunction;goog.fx.dom.PredefinedEffect.prototype.isRightToLeft=function(){void 0===this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.element));return this.rightToLeft_};
goog.fx.dom.PredefinedEffect.prototype.onAnimate=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onAnimate.call(this)};goog.fx.dom.PredefinedEffect.prototype.onEnd=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onEnd.call(this)};goog.fx.dom.PredefinedEffect.prototype.onBegin=function(){this.updateStyle();goog.fx.dom.PredefinedEffect.superClass_.onBegin.call(this)};
goog.fx.dom.Slide=function(a,d,f,h,l){if(2!=d.length||2!=f.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,a,d,f,h,l)};goog.inherits(goog.fx.dom.Slide,goog.fx.dom.PredefinedEffect);goog.fx.dom.Slide.prototype.updateStyle=function(){var a=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"right":"left";this.element.style[a]=Math.round(this.coords[0])+"px";this.element.style.top=Math.round(this.coords[1])+"px"};
goog.fx.dom.SlideFrom=function(a,d,f,h){goog.fx.dom.Slide.call(this,a,[a.offsetLeft,a.offsetTop],d,f,h)};goog.inherits(goog.fx.dom.SlideFrom,goog.fx.dom.Slide);goog.fx.dom.SlideFrom.prototype.onBegin=function(){this.startPoint=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(this.element):this.element.offsetLeft,this.element.offsetTop];goog.fx.dom.SlideFrom.superClass_.onBegin.call(this)};
goog.fx.dom.Swipe=function(a,d,f,h,l){if(2!=d.length||2!=f.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,a,d,f,h,l);this.maxWidth_=Math.max(this.endPoint[0],this.startPoint[0]);this.maxHeight_=Math.max(this.endPoint[1],this.startPoint[1])};goog.inherits(goog.fx.dom.Swipe,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Swipe.prototype.updateStyle=function(){var a=this.coords[0],d=this.coords[1];this.clip_(Math.round(a),Math.round(d),this.maxWidth_,this.maxHeight_);this.element.style.width=Math.round(a)+"px";var f=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"marginRight":"marginLeft";this.element.style[f]=Math.round(a)-this.maxWidth_+"px";this.element.style.marginTop=Math.round(d)-this.maxHeight_+"px"};
goog.fx.dom.Swipe.prototype.clip_=function(a,d,f,h){this.element.style.clip="rect("+(h-d)+"px "+f+"px "+h+"px "+(f-a)+"px)"};goog.fx.dom.Scroll=function(a,d,f,h,l){if(2!=d.length||2!=f.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,a,d,f,h,l)};goog.inherits(goog.fx.dom.Scroll,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Scroll.prototype.updateStyle=function(){this.isRightPositioningForRtlEnabled()?goog.style.bidi.setScrollOffset(this.element,Math.round(this.coords[0])):this.element.scrollLeft=Math.round(this.coords[0]);this.element.scrollTop=Math.round(this.coords[1])};goog.fx.dom.Resize=function(a,d,f,h,l){if(2!=d.length||2!=f.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,a,d,f,h,l)};goog.inherits(goog.fx.dom.Resize,goog.fx.dom.PredefinedEffect);
goog.fx.dom.Resize.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px";this.element.style.height=Math.round(this.coords[1])+"px"};goog.fx.dom.ResizeWidth=function(a,d,f,h,l){goog.fx.dom.PredefinedEffect.call(this,a,[d],[f],h,l)};goog.inherits(goog.fx.dom.ResizeWidth,goog.fx.dom.PredefinedEffect);goog.fx.dom.ResizeWidth.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px"};
goog.fx.dom.ResizeHeight=function(a,d,f,h,l){goog.fx.dom.PredefinedEffect.call(this,a,[d],[f],h,l)};goog.inherits(goog.fx.dom.ResizeHeight,goog.fx.dom.PredefinedEffect);goog.fx.dom.ResizeHeight.prototype.updateStyle=function(){this.element.style.height=Math.round(this.coords[0])+"px"};
goog.fx.dom.Fade=function(a,d,f,h,l){"number"===typeof d&&(d=[d]);"number"===typeof f&&(f=[f]);goog.fx.dom.PredefinedEffect.call(this,a,d,f,h,l);if(1!=d.length||1!=f.length)throw Error("Start and end points must be 1D");this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_};goog.inherits(goog.fx.dom.Fade,goog.fx.dom.PredefinedEffect);goog.fx.dom.Fade.TOLERANCE_=1/1024;goog.fx.dom.Fade.OPACITY_UNSET_=-1;
goog.fx.dom.Fade.prototype.updateStyle=function(){var a=this.coords[0];Math.abs(a-this.lastOpacityUpdate_)>=goog.fx.dom.Fade.TOLERANCE_&&(goog.style.setOpacity(this.element,a),this.lastOpacityUpdate_=a)};goog.fx.dom.Fade.prototype.onBegin=function(){this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_;goog.fx.dom.Fade.superClass_.onBegin.call(this)};goog.fx.dom.Fade.prototype.onEnd=function(){this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_;goog.fx.dom.Fade.superClass_.onEnd.call(this)};
goog.fx.dom.Fade.prototype.show=function(){this.element.style.display=""};goog.fx.dom.Fade.prototype.hide=function(){this.element.style.display="none"};goog.fx.dom.FadeOut=function(a,d,f){goog.fx.dom.Fade.call(this,a,1,0,d,f)};goog.inherits(goog.fx.dom.FadeOut,goog.fx.dom.Fade);goog.fx.dom.FadeIn=function(a,d,f){goog.fx.dom.Fade.call(this,a,0,1,d,f)};goog.inherits(goog.fx.dom.FadeIn,goog.fx.dom.Fade);goog.fx.dom.FadeOutAndHide=function(a,d,f){goog.fx.dom.Fade.call(this,a,1,0,d,f)};
goog.inherits(goog.fx.dom.FadeOutAndHide,goog.fx.dom.Fade);goog.fx.dom.FadeOutAndHide.prototype.onBegin=function(){this.show();goog.fx.dom.FadeOutAndHide.superClass_.onBegin.call(this)};goog.fx.dom.FadeOutAndHide.prototype.onEnd=function(){this.hide();goog.fx.dom.FadeOutAndHide.superClass_.onEnd.call(this)};goog.fx.dom.FadeInAndShow=function(a,d,f){goog.fx.dom.Fade.call(this,a,0,1,d,f)};goog.inherits(goog.fx.dom.FadeInAndShow,goog.fx.dom.Fade);
goog.fx.dom.FadeInAndShow.prototype.onBegin=function(){this.show();goog.fx.dom.FadeInAndShow.superClass_.onBegin.call(this)};goog.fx.dom.BgColorTransform=function(a,d,f,h,l){if(3!=d.length||3!=f.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.call(this,a,d,f,h,l)};goog.inherits(goog.fx.dom.BgColorTransform,goog.fx.dom.PredefinedEffect);
goog.fx.dom.BgColorTransform.prototype.setColor=function(){for(var a=[],d=0;d<this.coords.length;d++)a[d]=Math.round(this.coords[d]);a="rgb("+a.join(",")+")";this.element.style.backgroundColor=a};goog.fx.dom.BgColorTransform.prototype.updateStyle=function(){this.setColor()};
goog.fx.dom.bgColorFadeIn=function(a,d,f,h){function l(){a.style.backgroundColor=m}var m=a.style.backgroundColor||"",p=goog.style.getBackgroundColor(a);p=p&&"transparent"!=p&&"rgba(0, 0, 0, 0)"!=p?goog.color.hexToRgb(goog.color.parse(p).hex):[255,255,255];d=new goog.fx.dom.BgColorTransform(a,d,p,f);h?h.listen(d,goog.fx.Transition.EventType.END,l):goog.events.listen(d,goog.fx.Transition.EventType.END,l);d.play()};
goog.fx.dom.ColorTransform=function(a,d,f,h,l){if(3!=d.length||3!=f.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.call(this,a,d,f,h,l)};goog.inherits(goog.fx.dom.ColorTransform,goog.fx.dom.PredefinedEffect);goog.fx.dom.ColorTransform.prototype.updateStyle=function(){for(var a=[],d=0;d<this.coords.length;d++)a[d]=Math.round(this.coords[d]);a="rgb("+a.join(",")+")";this.element.style.color=a};goog.positioning={};goog.positioning.CornerBit={BOTTOM:1,CENTER:2,RIGHT:4,FLIP_RTL:8};
goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:goog.positioning.CornerBit.RIGHT,BOTTOM_LEFT:goog.positioning.CornerBit.BOTTOM,BOTTOM_RIGHT:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.RIGHT,TOP_START:goog.positioning.CornerBit.FLIP_RTL,TOP_END:goog.positioning.CornerBit.FLIP_RTL|goog.positioning.CornerBit.RIGHT,BOTTOM_START:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.FLIP_RTL,BOTTOM_END:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.RIGHT|goog.positioning.CornerBit.FLIP_RTL,
TOP_CENTER:goog.positioning.CornerBit.CENTER,BOTTOM_CENTER:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.CENTER};goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132};
goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256,FAILED:496,FAILED_HORIZONTAL:48,FAILED_VERTICAL:192};
goog.positioning.positionAtAnchor=function(a,d,f,h,l,m,p,q,u){goog.asserts.assert(f);var y=goog.positioning.getOffsetParentPageOffset(f),C=goog.positioning.getVisiblePart_(a);goog.style.translateRectForAnotherFrame(C,goog.dom.getDomHelper(a),goog.dom.getDomHelper(f));a=goog.positioning.getEffectiveCorner(a,d);d=C.left;a&goog.positioning.CornerBit.RIGHT?d+=C.width:a&goog.positioning.CornerBit.CENTER&&(d+=C.width/2);C=new goog.math.Coordinate(d,C.top+(a&goog.positioning.CornerBit.BOTTOM?C.height:0));
C=goog.math.Coordinate.difference(C,y);l&&(C.x+=(a&goog.positioning.CornerBit.RIGHT?-1:1)*l.x,C.y+=(a&goog.positioning.CornerBit.BOTTOM?-1:1)*l.y);if(p)if(u)var K=u;else if(K=goog.style.getVisibleRectForElement(f))K.top-=y.y,K.right-=y.x,K.bottom-=y.y,K.left-=y.x;return goog.positioning.positionAtCoordinate(C,f,h,m,K,p,q)};
goog.positioning.getOffsetParentPageOffset=function(a){if(a=a.offsetParent){var d=a.tagName==goog.dom.TagName.HTML||a.tagName==goog.dom.TagName.BODY;if(!d||"static"!=goog.style.getComputedPosition(a)){var f=goog.style.getPageOffset(a);d||(f=goog.math.Coordinate.difference(f,new goog.math.Coordinate(goog.style.bidi.getScrollLeft(a),a.scrollTop)))}}return f||new goog.math.Coordinate};
goog.positioning.getVisiblePart_=function(a){var d=goog.style.getBounds(a);(a=goog.style.getVisibleRectForElement(a))&&d.intersection(goog.math.Rect.createFromBox(a));return d};
goog.positioning.positionAtCoordinate=function(a,d,f,h,l,m,p){a=a.clone();var q=goog.positioning.getEffectiveCorner(d,f);f=goog.style.getSize(d);p=p?p.clone():f.clone();a=goog.positioning.getPositionAtCoordinate(a,p,q,h,l,m);if(a.status&goog.positioning.OverflowStatus.FAILED)return a.status;goog.style.setPosition(d,a.rect.getTopLeft());p=a.rect.getSize();goog.math.Size.equals(f,p)||goog.style.setBorderBoxSize(d,p);return a.status};
goog.positioning.getPositionAtCoordinate=function(a,d,f,h,l,m){a=a.clone();d=d.clone();var p=goog.positioning.OverflowStatus.NONE;if(h||f!=goog.positioning.Corner.TOP_LEFT)f&goog.positioning.CornerBit.RIGHT?a.x-=d.width+(h?h.right:0):f&goog.positioning.CornerBit.CENTER?a.x-=d.width/2:h&&(a.x+=h.left),f&goog.positioning.CornerBit.BOTTOM?a.y-=d.height+(h?h.bottom:0):h&&(a.y+=h.top);m&&(p=l?goog.positioning.adjustForViewport_(a,d,l,m):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT);f=new goog.math.Rect(0,
0,0,0);f.left=a.x;f.top=a.y;f.width=d.width;f.height=d.height;return{rect:f,status:p}};
goog.positioning.adjustForViewport_=function(a,d,f,h){var l=goog.positioning.OverflowStatus.NONE,m=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,p=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;(h&m)==m&&(a.x<f.left||a.x>=f.right)&&(h&=~goog.positioning.Overflow.ADJUST_X);(h&p)==p&&(a.y<f.top||a.y>=f.bottom)&&(h&=~goog.positioning.Overflow.ADJUST_Y);a.x<f.left&&h&goog.positioning.Overflow.ADJUST_X&&(a.x=f.left,l|=goog.positioning.OverflowStatus.ADJUSTED_X);h&goog.positioning.Overflow.RESIZE_WIDTH&&
(m=a.x,a.x<f.left&&(a.x=f.left,l|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED),a.x+d.width>f.right&&(d.width=Math.min(f.right-a.x,m+d.width-f.left),d.width=Math.max(d.width,0),l|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED));a.x+d.width>f.right&&h&goog.positioning.Overflow.ADJUST_X&&(a.x=Math.max(f.right-d.width,f.left),l|=goog.positioning.OverflowStatus.ADJUSTED_X);h&goog.positioning.Overflow.FAIL_X&&(l|=(a.x<f.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(a.x+d.width>f.right?goog.positioning.OverflowStatus.FAILED_RIGHT:
0));a.y<f.top&&h&goog.positioning.Overflow.ADJUST_Y&&(a.y=f.top,l|=goog.positioning.OverflowStatus.ADJUSTED_Y);h&goog.positioning.Overflow.RESIZE_HEIGHT&&(m=a.y,a.y<f.top&&(a.y=f.top,l|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED),a.y+d.height>f.bottom&&(d.height=Math.min(f.bottom-a.y,m+d.height-f.top),d.height=Math.max(d.height,0),l|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED));a.y+d.height>f.bottom&&h&goog.positioning.Overflow.ADJUST_Y&&(a.y=Math.max(f.bottom-d.height,f.top),l|=goog.positioning.OverflowStatus.ADJUSTED_Y);
h&goog.positioning.Overflow.FAIL_Y&&(l|=(a.y<f.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(a.y+d.height>f.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0));return l};goog.positioning.getEffectiveCorner=function(a,d){return(d&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(a)?d^goog.positioning.CornerBit.RIGHT:d)&~goog.positioning.CornerBit.FLIP_RTL};goog.positioning.flipCornerHorizontal=function(a){return a^goog.positioning.CornerBit.RIGHT};
goog.positioning.flipCornerVertical=function(a){return a^goog.positioning.CornerBit.BOTTOM};goog.positioning.flipCorner=function(a){return a^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT};goog.ui.ac.Renderer=function(a,d,f,h){goog.events.EventTarget.call(this);this.parent_=a||goog.dom.getDocument().body;this.dom_=goog.dom.getDomHelper(this.parent_);this.reposition_=!a;this.element_=null;this.token_="";this.rows_=[];this.rowDivs_=[];this.startRenderingRows_=this.hilitedRow_=-1;this.visible_=!1;this.className="ac-renderer";this.rowClassName="ac-row";this.legacyActiveClassName_="active";this.activeClassName="ac-active";this.highlightedClassName="ac-highlighted";this.customRenderer_=d||
null;this.useStandardHighlighting_=null!=h?h:!0;this.matchWordBoundary_=!0;this.highlightAllTokens_=!1;this.rightAlign_=!!f;this.topAlign_=!1;this.menuFadeDuration_=0;this.showScrollbarsIfTooLarge_=!1};goog.inherits(goog.ui.ac.Renderer,goog.events.EventTarget);goog.ui.ac.Renderer.prototype.borderWidth_=0;goog.ui.ac.Renderer.DELAY_BEFORE_MOUSEOVER=300;goog.ui.ac.Renderer.prototype.getElement=function(){return this.element_};
goog.ui.ac.Renderer.prototype.setWidthProvider=function(a,d,f){this.widthProvider_=a;d&&(this.borderWidth_=d);f&&(this.maxWidthProvider_=f)};goog.ui.ac.Renderer.prototype.setTopAlign=function(a){this.topAlign_=a};goog.ui.ac.Renderer.prototype.getTopAlign=function(){return this.topAlign_};goog.ui.ac.Renderer.prototype.setRightAlign=function(a){this.rightAlign_=a};goog.ui.ac.Renderer.prototype.getRightAlign=function(){return this.rightAlign_};
goog.ui.ac.Renderer.prototype.setShowScrollbarsIfTooLarge=function(a){this.showScrollbarsIfTooLarge_=a};goog.ui.ac.Renderer.prototype.setUseStandardHighlighting=function(a){this.useStandardHighlighting_=a};goog.ui.ac.Renderer.prototype.setMatchWordBoundary=function(a){this.matchWordBoundary_=a};goog.ui.ac.Renderer.prototype.setHighlightAllTokens=function(a){this.highlightAllTokens_=a};goog.ui.ac.Renderer.prototype.setMenuFadeDuration=function(a){this.menuFadeDuration_=a};
goog.ui.ac.Renderer.prototype.setAnchorElement=function(a){this.anchorElement_=a};goog.ui.ac.Renderer.prototype.getAnchorElement=function(){return this.anchorElement_};goog.ui.ac.Renderer.prototype.renderRows=function(a,d,f){this.token_=d;this.rows_=a;this.hilitedRow_=-1;this.startRenderingRows_=goog.now();this.target_=f;this.rowDivs_=[];this.redraw()};
goog.ui.ac.Renderer.prototype.dismiss=function(){this.visible_&&(this.visible_=!1,this.toggleAriaMarkup_(!1),0<this.menuFadeDuration_?(module$contents$goog$dispose_dispose(this.animation_),this.animation_=new goog.fx.dom.FadeOutAndHide(this.element_,this.menuFadeDuration_),this.animation_.play()):goog.style.setElementShown(this.element_,!1))};
goog.ui.ac.Renderer.prototype.show=function(){this.visible_||(this.visible_=!0,this.toggleAriaMarkup_(!0),0<this.menuFadeDuration_?(module$contents$goog$dispose_dispose(this.animation_),this.animation_=new goog.fx.dom.FadeInAndShow(this.element_,this.menuFadeDuration_),this.animation_.play()):goog.style.setElementShown(this.element_,!0))};
goog.ui.ac.Renderer.prototype.toggleAriaMarkup_=function(a){this.target_&&(goog.a11y.aria.setState(this.target_,goog.a11y.aria.State.HASPOPUP,a),goog.a11y.aria.setState(goog.asserts.assert(this.element_),goog.a11y.aria.State.EXPANDED,a),goog.a11y.aria.setState(this.target_,goog.a11y.aria.State.EXPANDED,a),a?goog.a11y.aria.setState(this.target_,goog.a11y.aria.State.OWNS,this.element_.id):(goog.a11y.aria.removeState(this.target_,goog.a11y.aria.State.OWNS),goog.a11y.aria.setActiveDescendant(this.target_,
null)))};goog.ui.ac.Renderer.prototype.isVisible=function(){return this.visible_};
goog.ui.ac.Renderer.prototype.hiliteRow=function(a){var d=0<=a&&a<this.rows_.length?this.rows_[a]:void 0,f=0<=a&&a<this.rowDivs_.length?this.rowDivs_[a]:void 0;this.dispatchEvent({type:goog.ui.ac.AutoComplete.EventType.ROW_HILITE,rowNode:f,row:d?d.data:null})&&(this.hiliteNone(),this.hilitedRow_=a,f&&(goog.dom.classlist.addAll(f,[this.activeClassName,this.legacyActiveClassName_]),this.target_&&goog.a11y.aria.setActiveDescendant(this.target_,f),goog.style.scrollIntoContainerView(f,this.element_)))};
goog.ui.ac.Renderer.prototype.hiliteNone=function(){0<=this.hilitedRow_&&goog.dom.classlist.removeAll(goog.asserts.assert(this.rowDivs_[this.hilitedRow_]),[this.activeClassName,this.legacyActiveClassName_])};goog.ui.ac.Renderer.prototype.hiliteId=function(a){if(-1==a)this.hiliteRow(-1);else for(var d=0;d<this.rows_.length;d++)if(this.rows_[d].id==a){this.hiliteRow(d);break}};goog.ui.ac.Renderer.prototype.setMenuClasses_=function(a){goog.asserts.assert(a);goog.dom.classlist.addAll(a,goog.string.trim(this.className).split(" "))};
goog.ui.ac.Renderer.prototype.maybeCreateElement_=function(){if(!this.element_){var a=this.dom_.createDom(goog.dom.TagName.DIV,{style:"display:none"});this.showScrollbarsIfTooLarge_&&(a.style.overflowY="auto");this.element_=a;this.setMenuClasses_(a);goog.a11y.aria.setRole(a,goog.a11y.aria.Role.LISTBOX);a.id=goog.ui.IdGenerator.getInstance().getNextUniqueId();this.dom_.appendChild(this.parent_,a);goog.events.listen(a,goog.events.EventType.CLICK,this.handleClick_,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEDOWN,
this.handleMouseDown_,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEOVER,this.handleMouseOver_,!1,this)}};
goog.ui.ac.Renderer.prototype.redraw=function(){this.maybeCreateElement_();this.topAlign_&&(this.element_.style.visibility="hidden");this.widthProvider_&&(this.element_.style.minWidth=this.widthProvider_.clientWidth-this.borderWidth_+"px");this.maxWidthProvider_&&(this.element_.style.maxWidth=this.maxWidthProvider_.clientWidth-this.borderWidth_+"px");this.rowDivs_.length=0;this.dom_.removeChildren(this.element_);if(this.customRenderer_&&this.customRenderer_.render)this.customRenderer_.render(this,
this.element_,this.rows_,this.token_);else{var a=null;this.rows_.forEach(function(d){d=this.renderRowHtml(d,this.token_);this.topAlign_?this.element_.insertBefore(d,a):this.dom_.appendChild(this.element_,d);a=d},this)}0==this.rows_.length?this.dismiss():(this.show(),this.reposition(),goog.style.setUnselectable(this.element_,!0))};
goog.ui.ac.Renderer.prototype.getAnchorCorner=function(){var a=this.rightAlign_?goog.positioning.Corner.BOTTOM_RIGHT:goog.positioning.Corner.BOTTOM_LEFT;this.topAlign_&&(a=goog.positioning.flipCornerVertical(a));return a};
goog.ui.ac.Renderer.prototype.reposition=function(){if(this.target_&&this.reposition_){var a=this.anchorElement_||this.target_,d=this.getAnchorCorner(),f=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN;this.showScrollbarsIfTooLarge_&&(this.element_.style.height="",f|=goog.positioning.Overflow.RESIZE_HEIGHT);goog.positioning.positionAtAnchor(a,d,this.element_,goog.positioning.flipCornerVertical(d),null,null,f);this.topAlign_&&(this.element_.style.visibility="visible")}};
goog.ui.ac.Renderer.prototype.setAutoPosition=function(a){this.reposition_=a};goog.ui.ac.Renderer.prototype.getAutoPosition=function(){return this.reposition_};goog.ui.ac.Renderer.prototype.getTarget=function(){return this.target_||null};
goog.ui.ac.Renderer.prototype.disposeInternal=function(){this.element_&&(goog.events.unlisten(this.element_,goog.events.EventType.CLICK,this.handleClick_,!1,this),goog.events.unlisten(this.element_,goog.events.EventType.MOUSEDOWN,this.handleMouseDown_,!1,this),goog.events.unlisten(this.element_,goog.events.EventType.MOUSEOVER,this.handleMouseOver_,!1,this),this.dom_.removeNode(this.element_),this.element_=null,this.visible_=!1);module$contents$goog$dispose_dispose(this.animation_);this.parent_=null;
goog.ui.ac.Renderer.superClass_.disposeInternal.call(this)};goog.ui.ac.Renderer.prototype.renderRowContents_=function(a,d,f){goog.dom.setTextContent(f,a.data.toString())};goog.ui.ac.Renderer.prototype.startHiliteMatchingText_=function(a,d){this.wasHighlightedAtLeastOnce_=!1;this.hiliteMatchingText_(a,d)};
goog.ui.ac.Renderer.prototype.hiliteMatchingText_=function(a,d){if(this.highlightAllTokens_||!this.wasHighlightedAtLeastOnce_)if(a.nodeType==goog.dom.NodeType.TEXT){var f=null;Array.isArray(d)&&1<d.length&&!this.highlightAllTokens_&&(f=d.slice(1));d=this.getTokenRegExp_(d);if(0!=d.length){var h=a.nodeValue,l=this.matchWordBoundary_?new RegExp("\\b(?:"+d+")","gi"):new RegExp(d,"gi");d=[];for(var m=0,p=l.exec(h),q=0;p;)q++,d.push(h.substring(m,p.index)),d.push(h.substring(p.index,l.lastIndex)),m=l.lastIndex,
p=l.exec(h);d.push(h.substring(m));if(1<d.length){f=this.highlightAllTokens_?q:1;for(h=0;h<f;h++)l=2*h,a.nodeValue=d[l],m=this.dom_.createElement(goog.dom.TagName.B),m.className=this.highlightedClassName,this.dom_.appendChild(m,this.dom_.createTextNode(d[l+1])),m=a.parentNode.insertBefore(m,a.nextSibling),a.parentNode.insertBefore(this.dom_.createTextNode(""),m.nextSibling),a=m.nextSibling;d=d.slice(2*f);a.nodeValue=d.join("");this.wasHighlightedAtLeastOnce_=!0}else f&&this.hiliteMatchingText_(a,
f)}}else for(a=a.firstChild;a;)f=a.nextSibling,this.hiliteMatchingText_(a,d),a=f};
goog.ui.ac.Renderer.prototype.getTokenRegExp_=function(a){var d="";if(!a)return d;Array.isArray(a)&&(a=a.filter(function(f){return!goog.string.isEmptyOrWhitespace(goog.string.makeSafe(f))}));this.highlightAllTokens_?Array.isArray(a)?d=a.map(goog.string.regExpEscape).join("|"):(d=goog.string.collapseWhitespace(a),d=goog.string.regExpEscape(d),d=d.replace(/ /g,"|")):Array.isArray(a)?d=0<a.length?goog.string.regExpEscape(a[0]):"":/^\W/.test(a)||(d=goog.string.regExpEscape(a));return d};
goog.ui.ac.Renderer.prototype.renderRowHtml=function(a,d){var f=this.dom_.createDom(goog.dom.TagName.DIV,{className:this.rowClassName,id:goog.ui.IdGenerator.getInstance().getNextUniqueId()});goog.a11y.aria.setRole(f,goog.a11y.aria.Role.OPTION);this.customRenderer_&&this.customRenderer_.renderRow?this.customRenderer_.renderRow(a,d,f):this.renderRowContents_(a,d,f);d&&this.useStandardHighlighting_&&this.startHiliteMatchingText_(f,d);goog.dom.classlist.add(f,this.rowClassName);this.rowDivs_.push(f);
return f};goog.ui.ac.Renderer.prototype.getRowFromEventTarget_=function(a){for(;a&&a!=this.element_&&!goog.dom.classlist.contains(a,this.rowClassName);)a=a.parentNode;return a?this.rowDivs_.indexOf(a):-1};goog.ui.ac.Renderer.prototype.handleClick_=function(a){var d=this.getRowFromEventTarget_(a.target);0<=d&&this.dispatchEvent({type:goog.ui.ac.AutoComplete.EventType.SELECT,row:this.rows_[d].id});a.stopPropagation()};goog.ui.ac.Renderer.prototype.handleMouseDown_=function(a){a.stopPropagation();a.preventDefault()};
goog.ui.ac.Renderer.prototype.handleMouseOver_=function(a){a=this.getRowFromEventTarget_(a.target);0<=a&&!(goog.now()-this.startRenderingRows_<goog.ui.ac.Renderer.DELAY_BEFORE_MOUSEOVER)&&this.dispatchEvent({type:goog.ui.ac.AutoComplete.EventType.HILITE,row:this.rows_[a].id})};goog.ui.ac.Renderer.CustomRenderer=function(){};goog.ui.ac.Renderer.CustomRenderer.prototype.render=function(a,d,f,h){};goog.ui.ac.Renderer.CustomRenderer.prototype.renderRow=function(a,d,f){};goog.iter={};goog.iter.Iterable={};goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:{message:"StopIteration",stack:""};goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.nextValueOrThrow=function(){throw goog.iter.StopIteration;};goog.iter.Iterator.prototype.next=function(){return goog.iter.ES6_ITERATOR_DONE};goog.iter.ES6_ITERATOR_DONE=goog.debug.freeze({done:!0,value:void 0});goog.iter.createEs6IteratorYield=function(a){return{value:a,done:!1}};
goog.iter.toEs4IteratorNext=function(a){if(a.done)throw goog.iter.StopIteration;return a.value};goog.iter.checkNoImplicitStopIterationInEs6=function(a){if(a===goog.iter.StopIteration)throw Error("ES6 Iteration protocol does NOT adjust control flow when StopIteration is thrown from callback helper functions. If your code relies on this behavior, consider throwing a different error and catching it to terminate iteration.");throw a;};goog.iter.Iterator.prototype.__iterator__=function(a){return this};
goog.iter.toIterator=function(a){if(a instanceof goog.iter.Iterator)return a;if("function"==typeof a.__iterator__)return a.__iterator__(!1);if(goog.isArrayLike(a)){let d=0;const f=new goog.iter.Iterator;f.next=function(){for(;;){if(d>=a.length)return goog.iter.ES6_ITERATOR_DONE;if(d in a)return goog.iter.createEs6IteratorYield(a[d++]);d++}};const h=f.next;f.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(h.call(f))};return f}throw Error("Not implemented");};
goog.iter.forEach=function(a,d,f){if(goog.isArrayLike(a))try{module$contents$goog$array_forEach(a,d,f)}catch(h){goog.iter.checkNoImplicitStopIterationInEs6(h)}else for(a=goog.iter.toIterator(a);;){let h;try{h=a.nextValueOrThrow()}catch(l){if(l===goog.iter.StopIteration)break;throw l;}try{d.call(f,h,void 0,a)}catch(l){goog.iter.checkNoImplicitStopIterationInEs6(l)}}};
goog.iter.filter=function(a,d,f){const h=goog.iter.toIterator(a),l=new goog.iter.Iterator;l.next=function(){for(;;){let p;try{p=h.nextValueOrThrow()}catch(q){if(q===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;throw q;}try{if(d.call(f,p,void 0,h))return goog.iter.createEs6IteratorYield(p)}catch(q){goog.iter.checkNoImplicitStopIterationInEs6(q)}}};const m=l.next;l.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(m.call(l))};return l};
goog.iter.filterFalse=function(a,d,f){return goog.iter.filter(a,goog.functions.not(d),f)};goog.iter.range=function(a,d,f){let h=0,l=a,m=f||1;1<arguments.length&&(h=a,l=+d);if(0==m)throw Error("Range step argument must not be zero");const p=new goog.iter.Iterator;p.next=function(){if(0<m&&h>=l||0>m&&h<=l)return goog.iter.ES6_ITERATOR_DONE;const u=h;h+=m;return goog.iter.createEs6IteratorYield(u)};const q=p.next;p.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(q.call(p))};return p};
goog.iter.join=function(a,d){return goog.iter.toArray(a).join(d)};
goog.iter.map=function(a,d,f){const h=goog.iter.toIterator(a),l=new goog.iter.Iterator;l.next=function(){let p;try{p=h.nextValueOrThrow()}catch(q){if(q===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;throw q;}try{const q=d.call(f,p,void 0,h);return goog.iter.createEs6IteratorYield(q)}catch(q){goog.iter.checkNoImplicitStopIterationInEs6(q)}};const m=l.next;l.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(m.call(l))};return l};
goog.iter.reduce=function(a,d,f,h){let l=f;goog.iter.forEach(a,function(m){l=d.call(h,l,m)});return l};goog.iter.some=function(a,d,f){for(a=goog.iter.toIterator(a);;){let h;try{h=a.nextValueOrThrow()}catch(l){if(l===goog.iter.StopIteration)return!1;throw l;}try{if(d.call(f,h,void 0,a))return!0}catch(l){goog.iter.checkNoImplicitStopIterationInEs6(l)}}};
goog.iter.every=function(a,d,f){for(a=goog.iter.toIterator(a);;){let h;try{h=a.nextValueOrThrow()}catch(l){if(l===goog.iter.StopIteration)return!0;throw l;}try{if(!d.call(f,h,void 0,a))return!1}catch(l){goog.iter.checkNoImplicitStopIterationInEs6(l)}}};goog.iter.chain=function(a){return goog.iter.chainFromIterable(arguments)};
goog.iter.chainFromIterable=function(a){const d=goog.iter.toIterator(a),f=new goog.iter.Iterator;let h=null;f.next=function(){for(;;){if(null==h)try{const m=d.nextValueOrThrow();h=goog.iter.toIterator(m)}catch(m){if(m===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;throw m;}try{const m=h.nextValueOrThrow();return goog.iter.createEs6IteratorYield(m)}catch(m){if(m!==goog.iter.StopIteration)throw m;h=null}}};const l=f.next;f.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(l.call(f))};
return f};goog.iter.dropWhile=function(a,d,f){const h=goog.iter.toIterator(a),l=new goog.iter.Iterator;let m=!0;l.next=function(){for(;;){let q;try{q=h.nextValueOrThrow()}catch(u){if(u===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;throw u;}if(!m||!d.call(f,q,void 0,h))return m=!1,goog.iter.createEs6IteratorYield(q)}};const p=l.next;l.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(p.call(l))};return l};
goog.iter.takeWhile=function(a,d,f){const h=goog.iter.toIterator(a),l=new goog.iter.Iterator;l.next=function(){let p;try{p=h.nextValueOrThrow()}catch(q){if(q===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;throw q;}try{return d.call(f,p,void 0,h)?goog.iter.createEs6IteratorYield(p):goog.iter.ES6_ITERATOR_DONE}catch(q){goog.iter.checkNoImplicitStopIterationInEs6(q)}};const m=l.next;l.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(m.call(l))};return l};
goog.iter.toArray=function(a){if(goog.isArrayLike(a))return module$contents$goog$array_toArray(a);a=goog.iter.toIterator(a);const d=[];goog.iter.forEach(a,function(f){d.push(f)});return d};goog.iter.equals=function(a,d,f){a=goog.iter.zipLongest({},a,d);const h=f||module$contents$goog$array_defaultCompareEquality;return goog.iter.every(a,function(l){return h(l[0],l[1])})};
goog.iter.nextOrValue=function(a,d){try{return goog.iter.toIterator(a).nextValueOrThrow()}catch(f){if(f!=goog.iter.StopIteration)throw f;return d}};
goog.iter.product=function(a){if(Array.prototype.some.call(arguments,function(m){return!m.length})||!arguments.length)return new goog.iter.Iterator;const d=new goog.iter.Iterator,f=arguments;let h=module$contents$goog$array_repeat(0,f.length);d.next=function(){if(h){const m=module$contents$goog$array_map(h,function(p,q){return f[q][p]});for(let p=h.length-1;0<=p;p--){goog.asserts.assert(h);if(h[p]<f[p].length-1){h[p]++;break}if(0==p){h=null;break}h[p]=0}return goog.iter.createEs6IteratorYield(m)}return goog.iter.ES6_ITERATOR_DONE};
const l=d.next;d.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(l.call(d))};return d};
goog.iter.cycle=function(a){const d=goog.iter.toIterator(a),f=[];let h=0;const l=new goog.iter.Iterator;let m=!1;l.next=function(){let q=null;if(!m)try{return q=d.nextValueOrThrow(),f.push(q),goog.iter.createEs6IteratorYield(q)}catch(u){if(u!=goog.iter.StopIteration)throw u;if(u===goog.iter.StopIteration&&module$contents$goog$array_isEmpty(f))return goog.iter.ES6_ITERATOR_DONE;m=!0}q=f[h];h=(h+1)%f.length;return goog.iter.createEs6IteratorYield(q)};const p=l.next;l.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(p.call(l))};
return l};goog.iter.count=function(a,d){let f=a||0;const h=void 0!==d?d:1,l=new goog.iter.Iterator;l.next=function(){const p=f;f+=h;return goog.iter.createEs6IteratorYield(p)};const m=l.next;l.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(m.call(l))};return l};goog.iter.repeat=function(a){const d=new goog.iter.Iterator;d.next=function(){return goog.iter.createEs6IteratorYield(a)};const f=d.next;d.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(f.call(d))};return d};
goog.iter.accumulate=function(a){const d=goog.iter.toIterator(a);let f=0;const h=new goog.iter.Iterator;h.next=function(){try{f+=d.nextValueOrThrow()}catch(m){if(m===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;throw m;}return goog.iter.createEs6IteratorYield(f)};const l=h.next;h.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(l.call(h))};return h};
goog.iter.zip=function(a){const d=arguments,f=new goog.iter.Iterator;if(0<d.length){const h=module$contents$goog$array_map(d,goog.iter.toIterator);let l=!1;f.next=function(){if(l)return goog.iter.ES6_ITERATOR_DONE;const p=[];for(let q=0,u;u=h[q++];)try{p.push(u.nextValueOrThrow())}catch(y){if(y===goog.iter.StopIteration)return l=!0,goog.iter.ES6_ITERATOR_DONE;throw y;}return goog.iter.createEs6IteratorYield(p)};const m=f.next;f.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(m.call(f))}}return f};
goog.iter.zipLongest=function(a,d){const f=Array.prototype.slice.call(arguments,1),h=new goog.iter.Iterator;if(0<f.length){const l=module$contents$goog$array_map(f,goog.iter.toIterator);let m=!1;h.next=function(){if(m)return goog.iter.ES6_ITERATOR_DONE;let q=!1;const u=[];for(let y=0,C;C=l[y++];)try{u.push(C.nextValueOrThrow()),q=!0}catch(K){if(K!==goog.iter.StopIteration)throw K;u.push(a)}return q?goog.iter.createEs6IteratorYield(u):(m=!0,goog.iter.ES6_ITERATOR_DONE)};const p=h.next;h.nextValueOrThrow=
function(){return goog.iter.toEs4IteratorNext(p.call(h))}}return h};
goog.iter.compress=function(a,d){const f=goog.iter.toIterator(a),h=goog.iter.toIterator(d),l=new goog.iter.Iterator;let m=!1;l.next=function(){if(m)return goog.iter.ES6_ITERATOR_DONE;for(;;){let q,u;try{q=f.nextValueOrThrow(),u=h.nextValueOrThrow()}catch(y){if(y===goog.iter.StopIteration)return m=!0,goog.iter.ES6_ITERATOR_DONE;throw y;}if(u)return goog.iter.createEs6IteratorYield(q)}};const p=l.next;l.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(p.call(l))};return l};
goog.iter.GroupByIterator_=function(a,d){this.iterator=goog.iter.toIterator(a);this.keyFunc=d||goog.functions.identity};goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator);
goog.iter.GroupByIterator_.prototype.next=function(){for(;this.currentKey==this.targetKey;){try{this.currentValue=this.iterator.nextValueOrThrow()}catch(a){if(a===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;throw a;}this.currentKey=this.keyFunc(this.currentValue)}this.targetKey=this.currentKey;return goog.iter.createEs6IteratorYield([this.currentKey,this.groupItems_(this.targetKey)])};goog.iter.GroupByIterator_.prototype.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(goog.iter.GroupByIterator_.prototype.next.call(this))};
goog.iter.GroupByIterator_.prototype.groupItems_=function(a){const d=[];for(;this.currentKey==a;){d.push(this.currentValue);try{this.currentValue=this.iterator.nextValueOrThrow()}catch(f){if(f!==goog.iter.StopIteration)throw f;break}this.currentKey=this.keyFunc(this.currentValue)}return d};goog.iter.groupBy=function(a,d){return new goog.iter.GroupByIterator_(a,d)};
goog.iter.starMap=function(a,d,f){const h=goog.iter.toIterator(a),l=new goog.iter.Iterator;l.next=function(){try{const p=goog.iter.toArray(h.nextValueOrThrow()),q=d.apply(f,module$contents$goog$array_concat(p,void 0,h));return goog.iter.createEs6IteratorYield(q)}catch(p){if(p===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;throw p;}};const m=l.next;l.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(m.call(l))};return l};
goog.iter.tee=function(a,d){const f=goog.iter.toIterator(a),h=module$contents$goog$array_map(module$contents$goog$array_range("number"===typeof d?d:2),function(){return[]});return module$contents$goog$array_map(h,function(l){const m=new goog.iter.Iterator;m.next=function(){if(module$contents$goog$array_isEmpty(l)){try{const u=f.nextValueOrThrow();for(let y=0,C;C=h[y++];)C.push(u);var q=!0}catch(u){if(u===goog.iter.StopIteration)q=!1;else throw u;}if(!q)return goog.iter.ES6_ITERATOR_DONE}goog.asserts.assert(!module$contents$goog$array_isEmpty(l));
return goog.iter.createEs6IteratorYield(l.shift())};const p=m.next;m.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(p.call(m))};return m})};goog.iter.enumerate=function(a,d){return goog.iter.zip(goog.iter.count(d),a)};
goog.iter.limit=function(a,d){goog.asserts.assert(goog.math.isInt(d)&&0<=d);const f=goog.iter.toIterator(a),h=new goog.iter.Iterator;let l=d;h.next=function(){if(0<l--)try{return goog.iter.createEs6IteratorYield(f.nextValueOrThrow())}catch(p){if(p===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;throw p;}return goog.iter.ES6_ITERATOR_DONE};const m=h.next;h.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(m.call(h))};return h};
goog.iter.consume=function(a,d){goog.asserts.assert(goog.math.isInt(d)&&0<=d);for(a=goog.iter.toIterator(a);0<d--;)goog.iter.nextOrValue(a,null);return a};goog.iter.slice=function(a,d,f){goog.asserts.assert(goog.math.isInt(d)&&0<=d);a=goog.iter.consume(a,d);"number"===typeof f&&(goog.asserts.assert(goog.math.isInt(f)&&f>=d),a=goog.iter.limit(a,f-d));return a};goog.iter.hasDuplicates_=function(a){const d=[];module$contents$goog$array_removeDuplicates(a,d);return a.length!=d.length};
goog.iter.permutations=function(a,d){a=goog.iter.toArray(a);d=module$contents$goog$array_repeat(a,"number"===typeof d?d:a.length);d=goog.iter.product.apply(void 0,d);return goog.iter.filter(d,function(f){return!goog.iter.hasDuplicates_(f)})};
goog.iter.combinations=function(a,d){function f(q){return h[q]}const h=goog.iter.toArray(a);a=goog.iter.range(h.length);d=goog.iter.permutations(a,d);const l=goog.iter.filter(d,function(q){return module$contents$goog$array_isSorted(q)}),m=new goog.iter.Iterator;m.next=function(){try{const q=l.nextValueOrThrow();return goog.iter.createEs6IteratorYield(module$contents$goog$array_map(q,f))}catch(q){if(q===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;throw q;}};const p=m.next;m.nextValueOrThrow=
function(){return goog.iter.toEs4IteratorNext(p.call(m))};return m};
goog.iter.combinationsWithReplacement=function(a,d){function f(q){return h[q]}const h=goog.iter.toArray(a);a=module$contents$goog$array_range(h.length);d=module$contents$goog$array_repeat(a,d);d=goog.iter.product.apply(void 0,d);const l=goog.iter.filter(d,function(q){return module$contents$goog$array_isSorted(q)}),m=new goog.iter.Iterator;m.next=function(){try{return goog.iter.createEs6IteratorYield(module$contents$goog$array_map(l.nextValueOrThrow(),f))}catch(q){if(q===goog.iter.StopIteration)return goog.iter.ES6_ITERATOR_DONE;
throw q;}};const p=m.next;m.nextValueOrThrow=function(){return goog.iter.toEs4IteratorNext(p.call(m))};return m};var AI={Blockly:{}};AI.Blockly.TypeBlock=function(a,d){this.workspace_=d;this.needsReload={components:!0,screens:!0,assets:!0};this.typeBlockDiv_=a.typeBlockDiv;this.inputText_=a.inputText;this.docKh_=new goog.events.KeyHandler(goog.dom.getElement(top.document.body));this.inputKh_=new goog.events.KeyHandler(goog.dom.getElement(this.inputText_));this.handleKeyWrapper_=this.handleKey.bind(this);goog.events.listen(this.docKh_,"key",this.handleKeyWrapper_);this.createAutoComplete_(this.inputText_)};
AI.Blockly.TypeBlock.prototype.typeBlockDiv_=null;AI.Blockly.TypeBlock.prototype.inputText_=null;AI.Blockly.TypeBlock.prototype.docKh_=null;AI.Blockly.TypeBlock.prototype.inputKh_=null;AI.Blockly.TypeBlock.prototype.visible=!1;AI.Blockly.TypeBlock.prototype.TBOptions_={};AI.Blockly.TypeBlock.prototype.TBOptionsNames_=[];AI.Blockly.TypeBlock.prototype.ac_=null;AI.Blockly.TypeBlock.prototype.currentListener_=null;
AI.Blockly.TypeBlock.prototype.handleKey=function(a){if(Blockly.common.getMainWorkspace()===this.workspace_&&this.workspace_.getParentSvg()&&null!=this.workspace_.getParentSvg().parentElement.offsetParent&&(a.target==this.ac_.getTarget()||"INPUT"!=a.target.tagName&&"TEXTAREA"!=a.target.tagName)&&!(a.altKey||a.ctrlKey||a.metaKey||9===a.keyCode))if(8===a.keyCode||46===a.keyCode){if(!goog.style.isElementShown(goog.dom.getElement(this.typeBlockDiv_))&&""!==a.target.id)Blockly.onKeyDown_(a)}else if(27===
a.keyCode)this.hide(),Blockly.common.getMainWorkspace().getParentSvg().parentNode.focus(),Blockly.common.getMainWorkspace().hideChaff();else{switch(a.keyCode){case 9:case 16:case 17:case 18:case 19:case 20:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 45:case 91:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:return}goog.style.isElementShown(goog.dom.getElement(this.typeBlockDiv_))?13===a.keyCode&&this.hide():13!=a.keyCode&&
(this.show(),a.preventDefault(),0!=a.charCode&&(goog.dom.getElement(this.inputText_).value=String.fromCharCode(null!=a.charCode?a.charCode:a.keyCode)))}};
AI.Blockly.TypeBlock.prototype.hide=function(){goog.style.showElement(goog.dom.getElement(this.typeBlockDiv_),!1);goog.events.unlisten(this.docKh_,"key",this.handleKeyWrapper_);goog.events.unlisten(this.inputKh_,"key",this.handleKeyWrapper_);this.handleKeyWrapper_=this.handleKey.bind(this);goog.events.listen(this.docKh_,"key",this.handleKeyWrapper_);this.visible=!1};
AI.Blockly.TypeBlock.prototype.show=function(){this.lazyLoadOfOptions_();var a=goog.dom.getElement(this.typeBlockDiv_);goog.style.setStyle(a,"top",this.workspace_.latestClick.y);goog.style.setStyle(a,"left",this.workspace_.latestClick.x);goog.style.showElement(a,!0);goog.dom.getElement(this.inputText_).focus();goog.dom.getElement(this.inputText_).value="";goog.events.unlisten(this.docKh_,"key",this.handleKeyWrapper_);goog.events.unlisten(this.inputKh_,"key",this.handleKeyWrapper_);this.handleKeyWrapper_=
this.handleKey.bind(this);goog.events.listen(this.inputKh_,"key",this.handleKeyWrapper_);this.visible=!0};AI.Blockly.TypeBlock.prototype.lazyLoadOfOptions_=function(){if(this.needsReload.components||this.needsReload.screens||this.needsReload.assets)this.generateOptions(),this.needsReload.components=!1,this.needsReload.screens=!1,this.needsReload.assets=!1;this.loadGlobalVariables_();this.loadLocalVariables_();this.loadProcedures_();this.reloadOptionsAfterChanges_()};
AI.Blockly.TypeBlock.prototype.generateOptions=function(){this.TBOptions_=function(){function a(m,p){m&&module$contents$goog$array_forEach(m,function(q){var u={},y={};if(q.dropDown)if(q.dropDown.titleName&&q.dropDown.value)u.titleName=q.dropDown.titleName,u.value=q.dropDown.value;else throw Error("TypeBlock not correctly set up for "+p);q.mutatorAttributes&&(y=q.mutatorAttributes);d[q.translatedName.replace(/%[0-9]+/g,"")]={canonicName:p,dropDown:u,mutatorAttributes:y}})}var d={},f;for(f in Blockly.Blocks){var h=
Blockly.Blocks[f];if(h.typeblock){var l=h.typeblock;"function"==typeof h.typeblock&&(l=h.typeblock());a(l,f)}}return d}()};AI.Blockly.TypeBlock.prototype.reloadOptionsAfterChanges_=function(){this.TBOptionsNames_=module$contents$goog$object_getKeys(this.TBOptions_);module$contents$goog$array_sort(this.TBOptionsNames_);this.ac_.matcher_.setRows(this.TBOptionsNames_)};
AI.Blockly.TypeBlock.prototype.loadProcedures_=function(){function a(h){var l=[];h=this.workspace_.getProcedureDatabase().getMenuItems(h);1==h.length&&""==h[0][0]&&(h=[]);module$contents$goog$array_forEach(h,function(m){l.push({translatedName:Blockly.Msg.LANG_PROCEDURES_CALLNORETURN_CALL+m[0],dropDown:{titleName:"PROCNAME",value:m[1]}})});return l}this.TBOptions_=module$contents$goog$object_filter(this.TBOptions_,function(h){return!h.isProcedure});var d=a.call(this,!1),f=this;module$contents$goog$array_forEach(d,
function(h){f.TBOptions_[h.translatedName]={canonicName:"procedures_callnoreturn",dropDown:h.dropDown,isProcedure:!0}});d=a.call(this,!0);module$contents$goog$array_forEach(d,function(h){f.TBOptions_[h.translatedName]={canonicName:"procedures_callreturn",dropDown:h.dropDown,isProcedure:!0}})};
AI.Blockly.TypeBlock.prototype.loadGlobalVariables_=function(){this.TBOptions_=module$contents$goog$object_filter(this.TBOptions_,function(d){return!d.isGlobalvar});var a=Blockly.FieldLexicalVariable.getGlobalNames();module$contents$goog$array_forEach(a,function(d){var f=Blockly.Msg.LANG_VARIABLES_GLOBAL_PREFIX+" "+d;this.TBOptions_[Blockly.Msg.LANG_VARIABLES_GET_TITLE_GET+" "+f]={canonicName:"lexical_variable_get",dropDown:{titleName:"VAR",value:"global "+d},isGlobalvar:!0};this.TBOptions_[Blockly.Msg.LANG_VARIABLES_SET_TITLE_SET+
" "+f]={canonicName:"lexical_variable_set",dropDown:{titleName:"VAR",value:"global "+d},isGlobalvar:!0}}.bind(this))};
AI.Blockly.TypeBlock.prototype.loadLocalVariables_=function(){this.TBOptions_=module$contents$goog$object_filter(this.TBOptions_,function(f){return!f.isLocalVar});var a=Blockly.common.getSelected();if(a){var d=Blockly.FieldLexicalVariable.getLexicalNamesInScope(a).map(function(f){return f[0]});a.getVars&&(d=d.concat(a.getVars().map(function(f){return a.workspace.getTopWorkspace().getComponentDatabase().getInternationalizedParameterName(f)})));module$contents$goog$array_forEach(d,function(f){this.TBOptions_[Blockly.Msg.LANG_VARIABLES_GET_TITLE_GET+
" "+f]={canonicName:"lexical_variable_get",dropDown:{titleName:"VAR",value:f},isLocalVar:!0};this.TBOptions_[Blockly.Msg.LANG_VARIABLES_SET_TITLE_SET+" "+f]={canonicName:"lexical_variable_set",dropDown:{titleName:"VAR",value:f},isLocalVar:!0}}.bind(this))}};
AI.Blockly.TypeBlock.prototype.createAutoComplete_=function(a){this.TBOptionsNames_=module$contents$goog$object_getKeys(this.TBOptions_);module$contents$goog$array_sort(this.TBOptionsNames_);goog.events.unlistenByKey(this.currentListener_);this.ac_&&this.ac_.dispose();var d=new AI.Blockly.TypeBlock.ac.AIArrayMatcher(this.TBOptionsNames_,!1),f=new goog.ui.ac.Renderer,h=new goog.ui.ac.InputHandler(null,null,!1);this.ac_=new goog.ui.ac.AutoComplete(d,f,h);this.ac_.setMaxMatches(100);h.attachAutoComplete(this.ac_);
h.attachInputs(goog.dom.getElement(a));var l=this;this.currentListener_=goog.events.listen(this.ac_,goog.ui.ac.AutoComplete.EventType.UPDATE,function(){var m=goog.dom.getElement(a).value,p=module$contents$goog$object_get(l.TBOptions_,m);if(!p){p=RegExp("^-?[0-9]\\d*(.\\d+)?$","g").exec(m);var q=RegExp("^[\"|']+","g").exec(m);if(p&&0<p.length)p={canonicName:"math_number",dropDown:{titleName:"NUM",value:m}};else if(q&&1===q.length)p={canonicName:"text",dropDown:{titleName:"TEXT",value:goog.string.endsWith(m,
'"')?m.substring(1,m.length-1):m.substring(1)}};else return}m="";Blockly.Events.setGroup(!0);try{if(p.dropDown){m=p.canonicName;if(module$contents$goog$object_isEmpty(p.mutatorAttributes)){var u=l.workspace_.newBlock(m);u.initSvg();!u.type||"procedures_callnoreturn"!=u.type&&"procedures_callreturn"!=u.type||AI.Blockly.FieldProcedure.onChange.call(u.getField("PROCNAME"),p.dropDown.value)}else{m='<xml><block type="'+m+'"><mutation ';for(var y in p.mutatorAttributes)m+=y+'="'+p.mutatorAttributes[y]+
'" ';var C=Blockly.utils.xml.textToDom(m+"></mutation></block></xml>");u=Blockly.Xml.domToBlock(C.firstChild,l.workspace_)}p.dropDown.titleName&&p.dropDown.value&&(u.setFieldValue(p.dropDown.value,p.dropDown.titleName),"SPLITATFIRST"==p.dropDown.value||"SPLIT"==p.dropDown.value?u.getInput("AT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)):("SPLITATFIRSTOFANY"==p.dropDown.value||"SPLITATANY"==p.dropDown.value)&&u.getInput("AT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",
AI.BlockUtils.INPUT)))}else throw Error("Type Block not correctly set up for: "+m);u.render();var K=Blockly.common.getSelected();K?(K.getRelativeToSurfaceXY(),l.connectIfPossible(K,u),u.parentBlock_||u.moveBy(Blockly.common.getSelected().getRelativeToSurfaceXY().x+110,Blockly.common.getSelected().getRelativeToSurfaceXY().y+50)):u.moveBy(l.workspace_.latestClick.x,l.workspace_.latestClick.y);u.select();l.workspace_.requestErrorChecking(u);l.hide();l.workspace_.getParentSvg().parentNode.focus()}finally{Blockly.Events.setGroup(!1)}})};
AI.Blockly.TypeBlock.prototype.connectIfPossible=function(a,d){var f,h=a.inputList,l=h.length;const m=a.workspace.connectionChecker;for(f=0;f<l;f++)try{if(null!=d.outputConnection){if(h[f].connection&&m.canConnect(h[f].connection,d.outputConnection,!1)&&!h[f].connection.targetConnection){d.outputConnection.connect(h[f].connection);break}}else if(!h[f].connection.isConnected()){d.previousConnection.connect(h[f].connection);break}}catch(p){}null===d.parentBlock_&&(null==a.outputConnection&&null==d.outputConnection?
d.previousConnection.connect(a.nextConnection):a.parentBlock_&&(null==a.parentBlock_.outputConnection?null==d.outputConnection&&a.parentBlock_.nextConnection.connect(d.previousConnection):this.connectIfPossible(a.parentBlock_,d)))};AI.Blockly.TypeBlock.ac={};AI.Blockly.TypeBlock.ac.AIArrayMatcher=function(a,d){goog.ui.ac.ArrayMatcher.call(a,d);this.rows_=a;this.useSimilar_=!d};goog.inherits(AI.Blockly.TypeBlock.ac.AIArrayMatcher,goog.ui.ac.ArrayMatcher);
AI.Blockly.TypeBlock.ac.AIArrayMatcher.prototype.requestMatchingRows=function(a,d,f,h){h=this.getPrefixMatches(a,d);if("text"===a||"Text"===a)module$contents$goog$array_remove(h,"Text"),module$contents$goog$array_insertAt(h,"Text",0);var l=RegExp("^-?[0-9]\\d*(.\\d+)?$","g").exec(a);l&&0<l.length&&module$contents$goog$array_insertAt(h,a,0);(l=RegExp("^[\"|']+","g").exec(a))&&1===l.length&&h.push(a);0===h.length&&this.useSimilar_&&(h=this.getSimilarRows(a,d));f(a,h)};
AI.Blockly.TypeBlock.hide=function(){Blockly.common.getMainWorkspace()&&Blockly.common.getMainWorkspace().typeBlock_&&Blockly.common.getMainWorkspace().typeBlock_.hide()};/*

 @fileoverview Visual blocks editor for App Inventor
 Methods to export blocks as a PNG from the block editor.

 @author shrutirijhwani@gmail.com (Shruti Rijhwani)
*/
AI.Blockly.ExportBlocksImage={};
(function(){var a="undefined"!=typeof exports&&exports||this;a.svgAsDataUri=function(d,f,h,l){h=h||{};h.scale=h.scale||1;for(var m=document.createElement("div"),p=document.getElementsByTagName("textarea"),q=0;q<p.length;q++)p[q].innerHTML=p[q].value;p=d.cloneNode(!0);if("svg"==d.tagName){var u=d.getBoundingClientRect();q=u.width||parseInt(p.getAttribute("width")||p.style.width||a.getComputedStyle(d).getPropertyValue("width"));var y=u.height||parseInt(p.getAttribute("height")||p.style.height||a.getComputedStyle(d).getPropertyValue("height"));
u=(parseFloat(f.contentLeft)-parseFloat(f.viewLeft)).toString();var C=(parseFloat(f.contentTop)-parseFloat(f.viewTop)).toString(),K=parseFloat(f.contentWidth).toString();f=parseFloat(f.contentHeight).toString();p.setAttribute("viewBox",u+" "+C+" "+K+" "+f)}else d.getScreenCTM(),p.setAttribute("transform",p.getAttribute("transform").replace(/translate\(.*?\)/,"").replace(/scale\(.*?\)/,"").trim()),u=d.getBBox(),q=u.width,y=u.height,f=document.createElementNS("http://www.w3.org/2000/svg","svg"),f.setAttribute("xmlns",
"http://www.w3.org/2000/svg"),f.appendChild(p),p=f,p.setAttribute("viewBox",u.x+" "+u.y+" "+q+" "+y);p.setAttribute("version","1.1");p.setAttribute("width",q);p.setAttribute("height",y);p.setAttribute("style","background-color: rgba(255, 255, 255, 0);");p.setAttribute("class","geras2_renderer-renderer classic-theme");m.appendChild(p);h=h.selectorRemap;f="";q=document.styleSheets;for(y=0;y<q.length;y++)if((u=q[y].href)&&0==u.lastIndexOf("http",0)&&-1==u.lastIndexOf(window.location.host))console.warn("Cannot include styles from other hosts: "+
q[y].href);else{u=null;try{u=q[y].cssRules}catch(M){console.warn("Skipping a potentially injected stylesheet",M);continue}if(null!=u)for(C=0;C<u.length;C++)if(K=u[C],"undefined"!=typeof K.style){var X=null;try{X=d.querySelector(K.selectorText)}catch(M){console.warn('Invalid CSS selector "'+K.selectorText+'"',M)}X&&-1==K.selectorText.indexOf("blocklySelected")?(X=h?h(K.selectorText):K.selectorText,f+=X+" { "+K.style.cssText+" }\n"):K.cssText.match(/^@font-face/)&&(f+=K.cssText+"\n")}}h=f;d=document.createElement("style");
d.setAttribute("type","text/css");d.innerHTML="<![CDATA[\n"+h+"\n]]\x3e";h=document.createElement("defs");h.appendChild(d);p.insertBefore(h,p.firstChild);d=p.getElementsByClassName("blocklyScrollbarHandle");for(q=0;q<d.length;q++)d[q].setAttribute("visibility","hidden");d=p.getElementsByClassName("blocklyScrollbarBackground");for(q=0;q<d.length;q++)d[q].setAttribute("visibility","hidden");d=p.querySelectorAll("image");for(q=0;q<d.length;q++)d[q].setAttribute("visibility","hidden");d=p.querySelectorAll(".blocklyMainBackground");
for(q=0;q<d.length;q++)d[q].parentElement.removeChild(d[q]);(d=p.getElementById("rectCorner"))&&d.setAttribute("visibility","hidden");(d=p.getElementById("indicatorWarning"))&&d.setAttribute("visibility","hidden");f='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+m.innerHTML;f=f.replace(/&nbsp/g,"&#160");f=f.replace(/sans-serif/g,'Arial, Verdana, "Nimbus Sans L", Helvetica');m="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(f)));
l&&l(m)};a.saveSvgAsPng=function(d,f,h,l){l=l||{};a.svgAsDataUri(d,h,l,function(m){var p=new Image;p.src=m;p.onload=function(){var q=document.createElement("canvas");q.width=p.width;q.height=p.height;q.getContext("2d").drawImage(p,0,0);var u=document.createElement("a");u.download=f;u.target="_self";void 0===q.toBlob?(q=q.toDataURL("image/png"),u.href=q,document.body.appendChild(u),u.addEventListener("click",function(y){u.parentNode.removeChild(u)}),u.click()):q.toBlob(function(y){u.href=URL.createObjectURL(y);
document.body.appendChild(u);u.addEventListener("click",function(C){u.parentNode.removeChild(u)});u.click()})};p.onerror=function(q){console.log("Error",q)}})}})();AI.Blockly.ExportBlocksImage.onclickExportBlocks=function(a,d){saveSvgAsPng((d||Blockly.common.getMainWorkspace()).svgBlockCanvas_,"blocks.png",a)};
AI.Blockly.ExportBlocksImage.getUri=function(a,d){var f;d=d||Blockly.common.getMainWorkspace();var h=d.getMetrics();if(null==h||0==h.viewHeight)return null;svgAsDataUri(d.svgBlockCanvas_,h,{},function(l){var m=new Image;m.onload=function(){var p=document.createElement("canvas");p.width=m.width;p.height=m.height;p.getContext("2d").drawImage(m,0,0);try{f=p.toDataURL("image/png")}catch(q){console.warn("Error performing canvas.toDataURL");a("");return}a(f)};m.src=l})};
function makeCRCTable(){for(var a,d=[],f=0;256>f;f++){a=f;for(var h=0;8>h;h++)a=a&1?3988292384^a>>>1:a>>>1;d[f]=a}return d}function crc32(a){for(var d=window.crcTable||(window.crcTable=makeCRCTable()),f=-1,h=0;h<a.length;h++)f=f>>>8^d[(f^a[h])&255];return(f^-1)>>>0}var CODE_PNG_CHUNK="coDe";function PNG(){this.chunks=null}PNG.HEADER=[137,80,78,71,13,10,26,10];var pHY_data=[0,0,22,37,0,0,22,37,1];PNG.Chunk=function(a,d,f,h){this.length=a;this.type=d;this.data=f;this.crc=h};
PNG.prototype.readFromBlob=function(a,d){var f=new FileReader,h=this;f.addEventListener("loadend",function(){h.processData_(new Uint8Array(f.result));d instanceof Function&&d(h)});f.readAsArrayBuffer(a)};PNG.prototype.getCodeChunk=function(){if(!this.chunks)return null;for(var a=0;a<this.chunks.length;a++)if(this.chunks[a].type===CODE_PNG_CHUNK)return this.chunks[a];return null};
PNG.prototype.processData_=function(a){function d(){var u=a[h++];u=256*u+a[h++];u=256*u+a[h++];return u=256*u+a[h++]}function f(){for(var u="",y=0;4>y;y++,h++)u+=String.fromCharCode(a[h]);return u}var h=PNG.HEADER.length;for(this.chunks=[];h<a.length;){var l=d(),m=f(),p=a.slice(h,h+l);h+=l;var q=d();this.chunks.push(new PNG.Chunk(l,m,p,q))}};
PNG.prototype.setCodeChunk=function(a){a=(new TextEncoder).encode(CODE_PNG_CHUNK+a);var d=a.length-4,f=crc32(a);a=a.slice(4);for(var h=0,l;l=this.chunks[h];h++)if(l.type===CODE_PNG_CHUNK){l.length=d;l.data=a;l.crc=f;return}l=new PNG.Chunk(d,CODE_PNG_CHUNK,a,f);this.chunks.splice(this.chunks.length-1,0,l)};
PNG.prototype.toBlob=function(){function a(m){"string"===typeof m?(m=(new TextEncoder).encode(m),h.set(m,l),l+=m.length):(h[l+3]=m&255,m>>=8,h[l+2]=m&255,m>>=8,h[l+1]=m&255,h[l]=m>>8&255,l+=4)}function d(m){h.set(m,l);l+=m.length}var f=PNG.HEADER.length;this.chunks.forEach(function(m){f+=m.length+12});var h=new Uint8Array(f),l=0;d(PNG.HEADER);this.chunks.forEach(function(m){a(m.length);a(m.type);d(m.data);a(m.crc)});return new Blob([h],{type:"image/png"})};
Blockly.exportBlockAsPng=function(a){var d=document.createElement("xml");d.appendChild(Blockly.Xml.blockToDom(a,!0));var f=Blockly.Xml.domToText(d);svgAsDataUri(a.svgGroup_,a.workspace.getMetrics(),null,function(h){var l=new Image;l.src=h;l.onload=function(){function m(C){C.setCodeChunk(f);for(var K=0;K<C.chunks.length;K++){var X=[112,72,89,115];if("pHYs"==C.chunks[K].type){C.chunks.splice(K,1,new PNG.Chunk(9,"pHYs",pHY_data,crc32(X.concat(pHY_data))));break}else if("IDAT"==C.chunks[K].type){C.chunks.splice(K,
0,new PNG.Chunk(9,"pHYs",pHY_data,crc32(X.concat(pHY_data))));break}}C=C.toBlob();var M=document.createElement("a");M.download=(0===a.getChildren().length?a.type:"blocks")+".png";M.target="_self";M.href=URL.createObjectURL(C);document.body.appendChild(M);M.addEventListener("click",function(G){M.parentNode.removeChild(M)});M.click()}var p=document.createElement("canvas");p.width=2*l.width;p.height=2*l.height;p.getContext("2d").drawImage(l,0,0,l.width,l.height,0,0,p.width,p.height);if(void 0===p.toBlob){p=
p.toDataURL("image/png").split(",")[1];p=window.atob(p);for(var q=p.length,u=new Uint8Array(new ArrayBuffer(q)),y=0;y<q;y++)u[y]=p.charCodeAt(y);p=new Blob([u],{type:"image/png"});(new PNG).readFromBlob(p,m)}else p.toBlob(function(C){(new PNG).readFromBlob(C,m)})}})};function extractBlockTypes(a){var d=[];a=a.getElementsByTagName("mutation");for(var f=0;f<a.length;f++){var h=a[f].getAttribute("component_type");h&&d.push(h)}return d}
function validateBlockTypes(a,d){if(!a||0===a.length)return[];d=d.getComponentDatabase();for(var f=[],h=0;h<a.length;h++){const l=d.getType(a[h]);l&&l.componentInfo&&l.componentInfo.name===a[h]||f.push(a[h])}0<f.length&&console.warn("Missing component types:",f.join(", "));return f}function showMissingExtensionDialog(a){a=a.filter(function(f){return void 0!==f&&null!==f});if(0<a.length){var d=Blockly.Msg.REQUIRED_EXTENSIONS_MISSING;d+=a.join("\n");alert(d)}}
Blockly.importPngAsBlock=function(a,d,f){(new PNG).readFromBlob(f,function(h){if(h=h.getCodeChunk())if(h=(new TextDecoder).decode(h.data),h=Blockly.utils.xml.textToDom(h)){var l=extractBlockTypes(h);l=validateBlockTypes(l,a);0<l.length?showMissingExtensionDialog(l):(h=h.firstElementChild,h=Blockly.Xml.domToBlock(h,a),h.moveBy(d.x,d.y),h.initSvg(),a.requestRender(h))}else alert(Blockly.Msg.ERROR_PARSING_XML),console.error("Failed to parse XML from PNG.")})};AI.NameSet={};AI.Substitution={};var lexVarPlugin=LexicalVariablesPlugin;AI.Blockly.Flydown={};Blockly.Flydown=lexVarPlugin.Flydown;AI.Blockly.FieldFlydown={};Blockly.FieldFlydown=lexVarPlugin.FieldFlydown;AI.Blockly.FieldGlobalFlydown={};Blockly.FieldGlobalFlydown=lexVarPlugin.FieldGlobalFlydown;AI.Blockly.FieldLexicalVariable={};Blockly.FieldLexicalVariable=lexVarPlugin.FieldLexicalVariable;AI.Blockly.FieldParameterFlydown={};Blockly.FieldParameterFlydown=lexVarPlugin.FieldParameterFlydown;
AI.Blockly.FieldProcedureName=lexVarPlugin.FieldProcedureName;Blockly.LexicalVariable=lexVarPlugin.LexicalVariable;AI.Blockly.ProcedureNameDropdown=lexVarPlugin.FieldNoCheckDropdown;AI.Blockly.FieldNoCheckDropdown=lexVarPlugin.FieldNoCheckDropdown;
Blockly.LexicalVariable.eventParamMutationToDom=function(a){a.eventparam||Blockly.LexicalVariable.getEventParam(a);if(!a.eventparam)return null;var d=document.createElement("mutation"),f=document.createElement("eventparam");f.setAttribute("name",a.eventparam);d.appendChild(f);return d};
Blockly.LexicalVariable.getEventParam=function(a){if(void 0!==a.eventparam)return a.eventparam;a.eventparam=null;var d=Blockly.unprefixName(a.getFieldValue("VAR"));if(d[0]!==Blockly.Msg.LANG_VARIABLES_GLOBAL_PREFIX){d=d[1];for(var f=a,h=a.getParent();h;){var l=h.type;if("component_event"===l){var m=a.getTopWorkspace().getComponentDatabase();f=h.getParameters().map(function(p){return p.name});d=f.map(function(p){return m.getInternationalizedParameterName(p)}).indexOf(d);-1!=d&&(a.eventparam=f[d]);
break}else if("local_declaration_expression"===l&&h.getInputTargetBlock("RETURN")==f||"local_declaration_statement"===l&&h.getInputTargetBlock("STACK")==f){if(-1!=h.getVars().indexOf(d))break}else if(("controls_forEach"===l||"controls_forRange"===l)&&h.getInputTargetBlock("DO")==f){if(h.getFieldValue("VAR")==d)break}else if("controls_for_each_dict"==l&&h.getInputTargetBlock("DO")==f&&-1!=h.getVars().indexOf(d))break;f=h;h=h.getParent()}return null}};
Blockly.LexicalVariable.eventParamDomToMutation=function(a,d){d=goog.dom.getChildren(d);1==d.length&&(d=d[0],"eventparam"==d.nodeName.toLowerCase()&&(d=d.getAttribute("name"),a.eventparam=d))};Blockly.LexicalVariable.eventParameterDict=function(a){var d={};a=a.getDescendants();for(var f=0,h;h=a[f];f++)h.eventparam&&(d[h.eventparam]=h.getFieldValue("VAR"));return d};Blockly=Object.assign(Blockly,lexVarPlugin.Shared);Blockly.NameSet=lexVarPlugin.NameSet;Blockly.Substitution=lexVarPlugin.Substitution;
Blockly.prefixSeparator=Blockly.yailSeparator;Blockly.usePrefixInCode=Blockly.usePrefixInYail;Blockly.possiblyPrefixYailNameWith=Blockly.possiblyPrefixGeneratedVarName;goog.html.legacyconversions={};goog.html.legacyconversions.safeHtmlFromString=function(a){goog.html.legacyconversions.reportCallback_();return module$contents$goog$html$SafeHtml_SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(a,null)};goog.html.legacyconversions.safeScriptFromString=function(a){goog.html.legacyconversions.reportCallback_();return module$contents$goog$html$SafeScript_SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(a)};
goog.html.legacyconversions.safeStyleFromString=function(a){goog.html.legacyconversions.reportCallback_();return module$contents$goog$html$SafeStyle_SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(a)};goog.html.legacyconversions.safeStyleSheetFromString=function(a){goog.html.legacyconversions.reportCallback_();return module$contents$goog$html$SafeStyleSheet_SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(a)};
goog.html.legacyconversions.safeUrlFromString=function(a){goog.html.legacyconversions.reportCallback_();return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.legacyconversions.trustedResourceUrlFromString=function(a){goog.html.legacyconversions.reportCallback_();return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(a)};goog.html.legacyconversions.reportCallback_=goog.nullFunction;
goog.html.legacyconversions.setReportCallback=function(a){goog.html.legacyconversions.reportCallback_=a};goog.dom.xml={};goog.dom.xml.MAX_XML_SIZE_KB=2048;goog.dom.xml.MAX_ELEMENT_DEPTH=256;goog.dom.xml.hasActiveXObjectSupport_=function(){if(!goog.userAgent.IE)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(a){return!1}};goog.dom.xml.ACTIVEX_SUPPORT=goog.userAgent.IE&&goog.dom.xml.hasActiveXObjectSupport_();
goog.dom.xml.createDocument=function(a,d,f){if(d&&!a)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument&&(!goog.dom.xml.ACTIVEX_SUPPORT||!f))return document.implementation.createDocument(d||"",a||"",null);if(goog.dom.xml.ACTIVEX_SUPPORT&&(f=goog.dom.xml.createMsXmlDocument_()))return a&&f.appendChild(f.createNode(goog.dom.NodeType.ELEMENT,a,d||"")),f;throw Error("Your browser does not support creating new documents");
};goog.dom.xml.loadXml=function(a,d){if(!("undefined"==typeof DOMParser||goog.dom.xml.ACTIVEX_SUPPORT&&d))return goog.dom.safe.parseFromString(new DOMParser,goog.html.legacyconversions.safeHtmlFromString(a),"application/xml");if(goog.dom.xml.ACTIVEX_SUPPORT)return d=goog.dom.xml.createMsXmlDocument_(),d.loadXML(a),d;throw Error("Your browser does not support loading xml documents");};
goog.dom.xml.serialize=function(a){var d=a.xml;if(d)return d;if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);throw Error("Your browser does not support serializing XML documents");};
goog.dom.xml.selectSingleNode=function(a,d){if("undefined"!=typeof a.selectSingleNode){var f=goog.dom.getOwnerDocument(a);"undefined"!=typeof f.setProperty&&f.setProperty("SelectionLanguage","XPath");return a.selectSingleNode(d)}if(document.implementation.hasFeature("XPath","3.0")){f=goog.dom.getOwnerDocument(a);var h=f.createNSResolver(f.documentElement);return f.evaluate(d,a,h,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}return null};
goog.dom.xml.selectNodes=function(a,d){if("undefined"!=typeof a.selectNodes){var f=goog.dom.getOwnerDocument(a);"undefined"!=typeof f.setProperty&&f.setProperty("SelectionLanguage","XPath");return a.selectNodes(d)}if(document.implementation.hasFeature("XPath","3.0")){f=goog.dom.getOwnerDocument(a);var h=f.createNSResolver(f.documentElement);a=f.evaluate(d,a,h,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);d=[];f=a.snapshotLength;for(h=0;h<f;h++)d.push(a.snapshotItem(h));return d}return[]};
goog.dom.xml.setAttributes=function(a,d){for(var f in d)d.hasOwnProperty(f)&&a.setAttribute(f,d[f])};goog.dom.xml.createMsXmlDocument_=function(){var a=new ActiveXObject("MSXML2.DOMDocument");a.resolveExternals=!1;a.validateOnParse=!1;try{a.setProperty("ProhibitDTD",!0),a.setProperty("MaxXMLSize",goog.dom.xml.MAX_XML_SIZE_KB),a.setProperty("MaxElementDepth",goog.dom.xml.MAX_ELEMENT_DEPTH)}catch(d){}return a};/*

 @fileoverview Visual blocks editor for App Inventor
 Methods to handle converting apps from older versions to current

 @author wolber@usfca.edu (David Wolber)
 @author ewpatton@mit.edu (Evan W. Patton)

 [lyn, 2014/10/31] Completely overhauled blocks upgrading architecture.
 All the work is done in Blockly.Version.upgrade.
 As in Liz Looney's AI1 BlocksSaveFile upgraders, all upgrades are based on mismatches
 between component versions or language versions of the screen and those of the current system.
 Unlike Liz's system, in which conditionals based on version numbers are used to express AI1 upgrades,
 all AI2 upgrades are expressed via the dictionary structure in Blockly.Versioning.AllUpgradeMaps,
 which is defined at the end of this file. This is a more declarative approach for expressing upgrades.
*/
AI.Blockly.Versioning={};void 0===Blockly.Versioning&&(Blockly.Versioning={});Blockly.Versioning.loggingFlag=!0;Blockly.Versioning.setLogging=function(a){Blockly.Versioning.loggingFlag=a};Blockly.Versioning.log=function(a){Blockly.Versioning.loggingFlag&&console.log("Blockly.Versioning: "+a)};
Blockly.Versioning.upgradeComponentMethods=function(a){for(var d=a.querySelectorAll('block[type="component_method"]'),f=0;f<d.length;f++){var h=d[f],l=h.parentElement,m=h.querySelector("mutation");if(!m){console.warn("component_method without mutation",h);return}if(!l)return;m.setAttribute("shape",l.tagName.toLowerCase())}return a};
Blockly.Versioning.upgrade=function(a,d,f){function h(C,K,X,M){"Form"==C&&(C="Screen");Blockly.Versioning.log("In Blockly.Versioning.upgrade, upgradeComponentType("+C+","+K+","+X+","+M+")");if(!(K>X)&&K<X){Blockly.Versioning.log("upgrading component type "+C+" from version "+K+" to version "+X);var G=Blockly.Versioning.AllUpgradeMaps[C];if(!G)throw"Blockly.Versioning.upgrade: no upgrade map for component type "+C;for(K+=1;K<=X;K++){var J=G[K];if(!J)throw"Blockly.Versioning.upgrade: no upgrader to upgrade component type "+
C+" to version "+K;Blockly.Versioning.log("applying upgrader for upgrading component type "+C+" from version "+(K-1)+" to version "+K);M=Blockly.Versioning.applyUpgrader(J,M,f)}m=!0}return M}f=f||Blockly.common.getMainWorkspace();a=JSON.parse(a);var l=Blockly.utils.xml.textToDom(d);l=Blockly.Versioning.upgradeComponentMethods(l);var m=!1,p=top.BLOCKS_VERSION;d=top.YA_VERSION;var q=l.getElementsByTagName("yacodeblocks");if(0===q.length){Blockly.Versioning.v17_blocksOverhaul(l,f);var u=17}else{if(d==
parseInt(q[0].getAttribute("ya-version"),10)){Blockly.Versioning.ensureWorkspace(l,f);return}u=parseInt(q[0].getAttribute("language-version"),10)}l=h("Language",u,p,l);(0===q.length||217>=parseInt(q[0].getAttribute("ya-version"),10))&&218<=d&&(l=Blockly.Versioning.renameComponentType("GoogleSheets","Spreadsheet")(l));(0===q.length||227>=parseInt(q[0].getAttribute("ya-version"),10))&&228<=d&&(l=Blockly.Versioning.renameComponentType("LineOfBestFit","Trendline")(l));a=Blockly.Versioning.makeComponentVersionDict(a);
for(var y in a)a.hasOwnProperty(y)&&!Blockly.Versioning.isExternal(y,f)&&(d=a[y],"GoogleSheets"!=y&&(q=Blockly.Versioning.getSystemComponentVersion(y,f),l=h(y,d,q,l)));Blockly.Versioning.log("Blockly.Versioning.upgrade: Final conversion to Blockly.common.getMainWorkspace()");Blockly.Versioning.ensureWorkspace(l,f);return m};
Blockly.Versioning.checkUpgrader=function(a){var d=["noUpgrade","ai1CantDoUpgrade"];if("string"==typeof a){if(-1==d.indexOf(a))throw"Blockly.Versioning.checkUpgrader: upgrader is unrecognized special string: "+a;}else if("function"!=typeof a&&!Array.isArray(a))throw"Blockly.Versioning.checkUpgrader: upgrader is not a function, special string, or array of upgraders -- "+a;};Blockly.Versioning.isWorkspace=function(a){return a instanceof Blockly.Workspace};
Blockly.Versioning.isDom=function(a){try{return a instanceof Element||a instanceof HTMLElement||a instanceof HTMLUnknownElement||"XML"==a.tagName}catch(d){return!1}};
Blockly.Versioning.ensureDom=function(a){if(Blockly.Versioning.isDom(a))return a;if(Blockly.Versioning.isWorkspace(a))return Blockly.Versioning.log("Blockly.Versioning.ensureDom: converting Blockly.common.getMainWorkspace() to dom"),Blockly.Xml.workspaceToDom(a);throw"Blockly.Versioning.ensureDom: blocksRep is neither dom nor workspace -- "+a;};Blockly.Versioning.getBlockChildren=function(a){var d=[];a=goog.dom.getChildren(a);for(var f=0,h;h=a[f];f++)d.push(h);return d};
Blockly.Versioning.ensureWorkspace=function(a,d){if(Blockly.Versioning.isWorkspace(a))return a;if(Blockly.Versioning.isDom(a)){d=d||Blockly.common.getMainWorkspace();Blockly.Versioning.log("Blockly.Versioning.ensureWorkspace: converting dom to Blockly.common.getMainWorkspace()");d.clear();Blockly.Xml.domToWorkspace(a,d);a=d.getTopBlocks();for(var f=0;f<a.length;f++){var h=a[f],l=h.getRelativeToSurfaceXY();l.x=h.x;l.y=h.y}return d}throw"Blockly.Versioning.ensureWorkspace: blocksRep is neither workspace nor dom -- "+
a;};Blockly.Versioning.applyUpgrader=function(a,d,f){f=f||Blockly.common.getMainWorkspace();f.getProcedureDatabase().clear();Blockly.Versioning.checkUpgrader(a);if("ai1CantDoUpgrade"==a)throw"Blockly.Versioning.applyUpgrader: cannot perform an AI Classic upgrade on "+d;return"function"==typeof a?a(d,f):Array.isArray(a)?(Blockly.Versioning.log("Blockly.Versioning.applyUpgrader: treating list as sequential composition of upgraders"),Blockly.Versioning.composeUpgraders(a)(d,f)):d};
Blockly.Versioning.composeUpgraders=function(a,d){d=d||Blockly.common.getMainWorkspace();return function(f){for(var h=0,l;l=a[h];h++)f=Blockly.Versioning.applyUpgrader(l,f,d);return f}};
Blockly.Versioning.makeComponentVersionDict=function(a){function d(h){for(var l=0,m;m=h[l];l+=1){var p=m.$Type,q=parseInt(m.$Version),u=f[p];if(u){if(u!=q)throw"Blockly.Versioning.makeComponentVersionDict: inconsistent versions for component of type"+p+"; ["+str(q)+", "+u+"]";}else f[p]=q;(m=m.$Components)&&d(m)}}var f={};d([a.Properties]);return f};
Blockly.Versioning.getSystemComponentVersion=function(a,d){if(d=d.getComponentDatabase().getType(a).componentInfo.version)return parseInt(d);throw"Blockly.Versioning.getSystemComponentVersion: No version for component type "+a;};Blockly.Versioning.isExternal=function(a,d){return(a=d.getComponentDatabase().getType(a))&&a.componentInfo?"true"===a.componentInfo.external:!1};
Blockly.Versioning.v17_blocksOverhaul=function(a,d){var f=0;a=a.getElementsByTagName("block");for(var h=0,l=a.length;h<l;h++){var m=a[h],p=m.getAttribute("type");if(null==Blockly.Blocks[p])if("procedures_do_then_return"==p)m.setAttribute("type","controls_do_then_return");else if("procedure_lexical_variable_get"==p)m.setAttribute("type","lexical_variable_get");else if("for_lexical_variable_get"==p)m.setAttribute("type","lexical_variable_get");else{var q=p.split("_");2<q.length&&(q=[q.slice(0,-1).join("_"),
q.pop()]);if("lexical"!=q[0])if("any"==q[1])Blockly.Versioning.v17_translateAnyMethod(m);else if(p=d.getComponentDatabase(),!p.hasType(q[0])||"setproperty"!=q[1]&&"getproperty"!=q[1]){var u=q[0],y=p.instanceNameToTypeName(u);y==u&&0===f&&(alert("Your app was created in an earlier version of App Inventor and may be loaded incorrectly. The problem is that it names a component instance the same as the component type, which is longer allowed."),f=1);q=q[1];"setproperty"==q||"getproperty"==q?Blockly.Versioning.v17_translateSetGetProperty(m,
d):"component"==q?Blockly.Versioning.v17_translateComponentGet(m,d):p.getEventForType(y,q)?Blockly.Versioning.v17_translateEvent(m,d):p.getMethodForType(y,q)&&Blockly.Versioning.v17_translateMethod(m,d)}else Blockly.Versioning.v17_translateComponentSetGetProperty(m,d)}}};
Blockly.Versioning.v17_translateEvent=function(a,d){var f=a.getAttribute("type").split("_");2<f.length&&(f=[f.slice(0,-1).join("_"),f.pop()]);var h=f[0];f=f[1];d=d.getComponentDatabase().instanceNameToTypeName(h);a.setAttribute("type","component_event");var l=goog.dom.createElement("mutation");l.setAttribute("instance_name",h);l.setAttribute("event_name",f);l.setAttribute("component_type",d);a.insertBefore(l,a.firstChild)};
Blockly.Versioning.v17_translateMethod=function(a,d){var f=a.getAttribute("type").split("_");2<f.length&&(f=[f.slice(0,-1).join("_"),f.pop()]);var h=f[0];f=f[1];d=d.getComponentDatabase().instanceNameToTypeName(h);a.setAttribute("type","component_method");var l=goog.dom.createElement("mutation");l.setAttribute("instance_name",h);l.setAttribute("method_name",f);l.setAttribute("component_type",d);l.setAttribute("is_generic","false");a.insertBefore(l,a.firstChild)};
Blockly.Versioning.v17_translateAnyMethod=function(a){var d=a.getAttribute("type").split("_");if(3<d.length){var f=d.slice(-2);d=[d.slice(0,-2).join("_"),f.pop(),f.pop()]}f=d[2];d=d[3];a.setAttribute("type","component_method");var h=goog.dom.createElement("mutation");h.setAttribute("method_name",d);h.setAttribute("component_type",f);h.setAttribute("is_generic","true");a.insertBefore(h,a.firstChild)};
Blockly.Versioning.v17_translateComponentGet=function(a,d){var f=a.getAttribute("type").split("_");2<f.length&&(f=[f.slice(0,-1).join("_"),f.pop()]);f=f[0];d=d.getComponentDatabase().instanceNameToTypeName(f);a.setAttribute("type","component_component_block");var h=goog.dom.createElement("mutation");h.setAttribute("instance_name",f);h.setAttribute("component_type",d);a.insertBefore(h,a.firstChild)};
Blockly.Versioning.v17_translateSetGetProperty=function(a,d){var f=a.getAttribute("type").split("_");2<f.length&&(f=[f.slice(0,-1).join("_"),f.pop()]);var h=f[0];f=f[1];d=d.getComponentDatabase().instanceNameToTypeName(h);for(var l=a.getElementsByTagName("title"),m="unknown",p=0,q=l.length;p<q;p++)if("PROP"==l[p].getAttribute("name")){m=l[p].textContent;break}a.setAttribute("type","component_set_get");a=a.getElementsByTagName("mutation")[0];a.setAttribute("instance_name",h);a.setAttribute("property_name",
m);"setproperty"==f?a.setAttribute("set_or_get","set"):a.setAttribute("set_or_get","get");a.setAttribute("component_type",d);a.setAttribute("is_generic","false");null!=a.getAttribute("yailtype")&&a.removeAttribute("yailtype")};
Blockly.Versioning.v17_translateComponentSetGetProperty=function(a){var d=a.getAttribute("type").split("_");2<d.length&&(d=[d.slice(0,-1).join("_"),d.pop()]);var f=d[1];d=d[0];for(var h=a.getElementsByTagName("title"),l="unknown",m=0,p=h.length;m<p;m++)if("PROP"==h[m].getAttribute("name")){l=h[m].textContent;break}a.setAttribute("type","component_set_get");a=a.getElementsByTagName("mutation")[0];a.setAttribute("property_name",l);"setproperty"==f?a.setAttribute("set_or_get","set"):a.setAttribute("set_or_get",
"get");a.setAttribute("component_type",d);a.setAttribute("is_generic","true");null!=a.getAttribute("yailtype")&&a.removeAttribute("yailtype")};
Blockly.Versioning.makeScreenNamesBeDropdowns=function(a,d){d=Blockly.Versioning.ensureDom(a).getElementsByTagName("block");for(var f=0,h;h=d[f];f++)if("controls_openAnotherScreen"==h.getAttribute("type")||"controls_openAnotherScreenWithStartValue"==h.getAttribute("type"))if(h=Blockly.Versioning.firstChildWithTagName(h,"value")){var l=h.getAttribute("name");"SCREENNAME"!=l&&"SCREEN"!=l||Blockly.Versioning.tryReplaceBlockWithScreen(h)}return a};
Blockly.Versioning.changeEventParameterName=function(a,d,f,h){return function(l){l=Blockly.Versioning.ensureWorkspace(l);for(var m=l.getAllBlocks(),p=0;p<m.length;p++){var q=m[p];if("event"===q.blockType&&q.eventName===d&&q.typeName===a){var u=Blockly.LexicalVariable.eventParameterDict(q)[f];if(u){for(var y=q.getDescendants(),C=0,K;K=y[C];C++)K.eventparam&&K.eventparam==f&&(K.eventparam=h);y=l.getComponentDatabase().getInternationalizedParameterName(h);q=q.getChildren();for(C=0;K=q[C];C++){var X=
new Blockly.Substitution([u],[y]);Blockly.LexicalVariable.renameFree(K,X)}}}}return l}};Blockly.Versioning.renameBlockType=function(a,d){return function(f){f=Blockly.Versioning.ensureDom(f);for(var h=f.getElementsByTagName("block"),l=0,m=h.length;l<m;l++){var p=h[l];p.getAttribute("type")==a&&p.setAttribute("type",d)}return f}};
Blockly.Versioning.addDefaultMethodArgument=function(a,d,f,h){return function(l){l=Blockly.Versioning.ensureDom(l);for(var m=Blockly.Versioning.findAllMethodCalls(l,a,d),p=0,q;q=m[p];p++){for(var u=goog.dom.getChildren(q),y=null,C=0,K;K=u[C];C++)if("VALUE"==K.tagName){var X=K.getAttribute("name");if(0==X.indexOf("ARG"))if(X=parseInt(X.split("ARG")[1]),X==f)console.log("Already a child block at index  "+f+" in Blockly.Versioning.addDefaultMethodArgument("+a+", "+d,NaN+f,NaN+h+")");else if(X>f){y=K;
break}}u=goog.dom.createElement("value");u.setAttribute("name","ARG"+f);C=Blockly.Versioning.xmlBlockTextToDom(h);u.insertBefore(C,null);q.insertBefore(u,y)}return l}};Blockly.Versioning.changeEventName=function(a,d,f){return function(h){h=Blockly.Versioning.ensureDom(h);for(var l=Blockly.Versioning.findAllEventHandlers(h,a,d),m=0,p;p=l[m];m++)Blockly.Versioning.firstChildWithTagName(p,"mutation").setAttribute("event_name",f);return h}};
Blockly.Versioning.changeMethodName=function(a,d,f){return function(h){h=Blockly.Versioning.ensureDom(h);for(var l=Blockly.Versioning.findAllMethodCalls(h,a,d),m=0,p;p=l[m];m++)Blockly.Versioning.firstChildWithTagName(p,"mutation").setAttribute("method_name",f);return h}};
Blockly.Versioning.changePropertyName=function(a,d,f){return function(h){h=Blockly.Versioning.ensureDom(h);for(var l=Blockly.Versioning.findAllPropertyBlocks(h,a,d),m=0,p;p=l[m];m++){Blockly.Versioning.firstChildWithTagName(p,"mutation").setAttribute("property_name",f);p=goog.dom.getChildren(p);for(var q=0,u;u=p[q];q++)"FIELD"==u.tagName.toUpperCase()&&"PROP"==u.getAttribute("name")&&u.textContent==d&&(u.textContent=f)}return h}};
Blockly.Versioning.makeMethodUseHelper=function(a,d,f,h){return function(l,m){l=Blockly.Versioning.ensureDom(l);for(var p=Blockly.Versioning.findAllMethodCalls(l,a,d),q=0,u;u=p[q];q++)for(var y=0,C;C=u.children[y];y++)if("value"==C.tagName&&C.getAttribute("name")=="ARG"+f){h(C,m);break}return l}};
Blockly.Versioning.makeMethodUseDropdown=function(a,d,f,h){return function(l,m){var p=Blockly.Versioning.getOptionListValueMap(m,h);return Blockly.Versioning.makeMethodUseHelper(a,d,f,function(q){Blockly.Versioning.tryReplaceBlockWithDropdown(q,p,h)})(l,m)}};
Blockly.Versioning.makeSetterUseHelper=function(a,d,f){return function(h,l){h=Blockly.Versioning.ensureDom(h);for(var m=Blockly.Versioning.findAllPropertyBlocks(h,a,d),p=0,q;q=m[p];p++)"set"==Blockly.Versioning.firstChildWithTagName(q,"mutation").getAttribute("set_or_get")&&f(Blockly.Versioning.firstChildWithTagName(q,"value"),l);return h}};
Blockly.Versioning.methodToSetterWithValue=function(a,d,f,h){return function(l){l=Blockly.Versioning.ensureDom(l);for(var m=Blockly.Versioning.findAllMethodCalls(l,a,d),p=0,q;q=m[p];p++){q.setAttribute("type","component_set_get");var u=Blockly.Versioning.firstChildWithTagName(q,"mutation");u.removeAttribute("method_name");u.setAttribute("property_name",f);u.setAttribute("set_or_get","set");u=isNaN(h)?'<value name="VALUE"><block type="text"><field name="TEXT">'+h+"</field></block></value>":'<value name="VALUE"><block type="math_number"><field name="NUM">'+
h+"</field></block></value>";u=Blockly.Versioning.xmlBlockTextToDom(u);q.appendChild(u)}return l}};Blockly.Versioning.makeSetterUseDropdown=function(a,d,f){return function(h,l){var m=Blockly.Versioning.getOptionListValueMap(l,f);return Blockly.Versioning.makeSetterUseHelper(a,d,function(p){Blockly.Versioning.tryReplaceBlockWithDropdown(p,m,f)})(h,l)}};
Blockly.Versioning.getOptionListValueMap=function(a,d){var f={};a=a.getComponentDatabase().getOptionList(d);d=0;for(var h;h=a.options[d];d++)f[h.value]=h.name,f[h.value.toLowerCase()]=h.name;return f};
Blockly.Versioning.tryReplaceBlockWithDropdown=function(a,d,f){if(a){var h=Blockly.Versioning.firstChildWithTagName(a,"block");if(h){var l=h.getAttribute("type");if("text"==l||"math_number"==l){(l=Blockly.Versioning.firstChildWithTagName(h,"field"))||(l=Blockly.Versioning.firstChildWithTagName(h,"title"));var m=l.textContent;if(d[m]){a.removeChild(h);h=document.createElement("block");h.setAttribute("type","helpers_dropdown");var p=document.createElement("mutation");p.setAttribute("key",f);l=document.createElement("field");
l.setAttribute("name","OPTION");d=document.createTextNode(d[m]);l.appendChild(d);h.appendChild(p);h.appendChild(l);a.appendChild(h)}}}}};
Blockly.Versioning.tryReplaceBlockWithScreen=function(a){if(a){var d=Blockly.Versioning.firstChildWithTagName(a,"block");if(d&&"text"==d.getAttribute("type")){var f=Blockly.Versioning.firstChildWithTagName(d,"field");f||=Blockly.Versioning.firstChildWithTagName(d,"title");var h=f.textContent;a.removeChild(d);d=document.createElement("block");d.setAttribute("type","helpers_screen_names");f=document.createElement("field");f.setAttribute("name","SCREEN");h=document.createTextNode(h);f.appendChild(h);
d.appendChild(f);a.appendChild(d)}}};
Blockly.Versioning.tryReplaceBlockWithAssets=function(a,d){if(a){var f=Blockly.Versioning.firstChildWithTagName(a,"block");if(f&&"text"==f.getAttribute("type")){var h=Blockly.Versioning.firstChildWithTagName(f,"field");h||=Blockly.Versioning.firstChildWithTagName(f,"title");var l=h.textContent;-1!=d.getAssetList().indexOf(l)&&(a.removeChild(f),d=document.createElement("block"),d.setAttribute("type","helpers_assets"),h=document.createElement("field"),h.setAttribute("name","ASSET"),l=document.createTextNode(l),
h.appendChild(l),d.appendChild(h),a.appendChild(d))}}};Blockly.Versioning.tryReplaceBlockWithPermissions=function(a,d){if(a){d=Blockly.Versioning.getOptionListValueMap(d,"Permission");for(var f=Object.entries(d),h=0,l;l=f[h];h++){var m=l[0];l=l[1];d.hasOwnProperty(m)&&(d["android.permission."+m]=l)}Blockly.Versioning.tryReplaceBlockWithDropdown(a,d,"Permission")}};
Blockly.Versioning.tryReplaceBlockWithHelper=function(a){return function(d,f){if(d){f=Blockly.Versioning.getOptionListValueMap(f,a);for(var h=Object.entries(f),l=0,m;m=h[l];l++){var p=m[0];m=m[1];f.hasOwnProperty(a)&&(f[p]=m)}Blockly.Versioning.tryReplaceBlockWithDropdown(d,f,a)}}};
Blockly.Versioning.findAllEventHandlers=function(a,d,f){for(var h=[],l=0;l<a.children.length;l++){var m=a.children[l];if("block"===m.tagName&&"component_event"===m.getAttribute("type")){var p=Blockly.Versioning.firstChildWithTagName(m,"mutation");if(p)p.getAttribute("component_type")===d&&p.getAttribute("event_name")===f&&h.push(m);else throw"Did not find expected mutation child in Blockly.Versioning.findAllEventHandlers with componentType = "+d+" and eventName = "+f;}}return h};
Blockly.Versioning.findAllMethodCalls=function(a,d,f){a=a.getElementsByTagName("block");for(var h=[],l=0,m;m=a[l];l++)if("component_method"==m.getAttribute("type")){var p=Blockly.Versioning.firstChildWithTagName(m,"mutation");if(p)p.getAttribute("component_type")==d&&p.getAttribute("method_name")==f&&h.push(m);else throw"Did not find expected mutation child in Blockly.Versioning.findAllMethodCalls with componentType = "+d+"and methodName = "+f;}return h};
Blockly.Versioning.findAllPropertyBlocks=function(a,d,f){a=a.getElementsByTagName("block");for(var h=[],l=0,m;m=a[l];l++)if("component_set_get"==m.getAttribute("type")){var p=Blockly.Versioning.firstChildWithTagName(m,"mutation");if(p)p.getAttribute("component_type")==d&&p.getAttribute("property_name")==f&&h.push(m);else throw"Did not find expected mutation child in Blockly.Versioning.findAllPropertyBlocks with componentType = "+d+"and propertyName = "+f;}return h};
Blockly.Versioning.renameComponentType=function(a,d){return function(f){f=Blockly.Versioning.ensureDom(f);for(var h=f.getElementsByTagName("block"),l=0,m;m=h[l];l++)(m=Blockly.Versioning.firstChildWithTagName(m,"mutation"))&&m.getAttribute("component_type")==a&&m.setAttribute("component_type",d);return f}};Blockly.Versioning.firstChildWithTagName=function(a,d){d=d.toUpperCase();a=goog.dom.getChildren(a);for(var f=0,h;h=a[f];f++)if(h.tagName.toUpperCase()==d)return h;return null};
Blockly.Versioning.xmlBlockTextToDom=function(a){a=Blockly.utils.xml.textToDom("<xml>"+a+"</xml>");a=goog.dom.getChildren(a);if(1!=a.length)throw"Unexpected number of childred in Blockly.Versioning.xmlBlockTextToDom: "+a.length;return a[0]};
Blockly.Versioning.AllUpgradeMaps={AccelerometerSensor:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade",5:Blockly.Versioning.makeSetterUseDropdown("AccelerometerSensor","Sensitivity","Sensitivity")},ActivityStarter:{2:"noUpgrade",3:"ai1CantDoUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade"},AnomalyDetection:{2:"noUpgrade"},Ball:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade",5:"ai1CantDoUpgrade",6:"noUpgrade",7:"noUpgrade",8:Blockly.Versioning.makeMethodUseDropdown("Ball","Bounce",0,"Direction")},BarcodeScanner:{2:"noUpgrade"},
BluetoothClient:{2:"noUpgrade",3:"ai1CantDoUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade",7:"noUpgrade",8:"noUpgrade"},BluetoothServer:{2:"noUpgrade",3:"ai1CantDoUpgrade",4:"noUpgrade",5:"noUpgrade"},Button:{2:"ai1CantDoUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade",7:Blockly.Versioning.makeSetterUseHelper("Button","Image",Blockly.Versioning.tryReplaceBlockWithAssets)},Camcorder:{1:"noUpgrade"},Camera:{2:"noUpgrade",3:"noUpgrade"},Canvas:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade",
5:"noUpgrade",6:"noUpgrade",7:"ai1CantDoUpgrade",8:[Blockly.Versioning.changeEventParameterName("Canvas","Dragged","draggedSprite","draggedAnySprite"),Blockly.Versioning.changeEventParameterName("Canvas","Touched","touchedSprite","touchedAnySprite")],9:Blockly.Versioning.addDefaultMethodArgument("Canvas","DrawCircle",3,'<block type="logic_boolean">  <field name="BOOL">TRUE</field></block>'),10:"noUpgrade",11:"noUpgrade",12:"noUpgrade",13:"noUpgrade",14:"noUpgrade",15:Blockly.Versioning.makeSetterUseHelper("Canvas",
"BackgroundImage",Blockly.Versioning.tryReplaceBlockWithAssets)},Chart:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade"},ChartData2D:{2:"noUpgrade"},ChatBot:{1:"noUpgrade",2:"noUpgrade",3:"noUpgrade",4:"noUpgrade"},CheckBox:{2:"noUpgrade"},Clock:{1:"noUpgrade",2:[Blockly.Versioning.addDefaultMethodArgument("Clock","FormatDateTime",1,'<block type="text">  <field name="TEXT">MMM d, yyyy HH:mm:ss a</field></block>'),Blockly.Versioning.addDefaultMethodArgument("Clock","FormatDate",1,'<block type="text">  <field name="TEXT">MMM d, yyyy</field></block>')],
3:"noUpgrade",4:"noUpgrade"},CloudDB:{1:"noUpgrade",2:"noUpgrade"},ContactPicker:{2:"ai1CantDoUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade"},DataFile:{},DatePicker:{2:"noUpgrade",3:"noUpgrade",4:Blockly.Versioning.makeSetterUseHelper("DatePicker","Image",Blockly.Versioning.tryReplaceBlockWithAssets)},EmailPicker:{2:"ai1CantDoUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade",7:[Blockly.Versioning.changeMethodName("EmailPicker","SetCursorAt","MoveCursorTo"),Blockly.Versioning.changeMethodName("EmailPicker",
"SetCursorAtEnd","MoveCursorToEnd"),Blockly.Versioning.changeEventName("EmailPicker","OnTextChanged","TextChanged")]},FeatureCollection:{2:[Blockly.Versioning.changeEventName("FeatureCollection","GeoJSONError","LoadError"),Blockly.Versioning.changeEventName("FeatureCollection","GeoGeoJSON","GotFeatures"),Blockly.Versioning.changeEventName("FeatureCollection","ErrorLoadingFeatureCollection","LoadError"),Blockly.Versioning.changeEventName("FeatureCollection","LoadedFeatureCollection","GotFeatures")]},
File:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade"},FirebaseDB:{1:"noUpgrade",2:"noUpgrade",3:"noUpgrade"},FusiontablesControl:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade"},GameClient:{1:"noUpgrade"},GyroscopeSensor:{1:"noUpgrade"},HorizontalArrangement:{2:"noUpgrade",3:"noUpgrade",4:[Blockly.Versioning.makeSetterUseDropdown("HorizontalArrangement","AlignHorizontal","HorizontalAlignment"),Blockly.Versioning.makeSetterUseDropdown("HorizontalArrangement","AlignVertical","VerticalAlignment"),Blockly.Versioning.makeSetterUseHelper("HorizontalArrangement",
"Image",Blockly.Versioning.tryReplaceBlockWithAssets)]},HorizontalScrollArrangement:{1:"noUpgrade",2:[Blockly.Versioning.makeSetterUseDropdown("HorizontalScrollArrangement","AlignHorizontal","HorizontalAlignment"),Blockly.Versioning.makeSetterUseDropdown("HorizontalScrollArrangement","AlignVertical","VerticalAlignment"),Blockly.Versioning.makeSetterUseHelper("HorizontalScrollArrangement","Image",Blockly.Versioning.tryReplaceBlockWithAssets)]},Image:{1:"noUpgrade",2:"noUpgrade",3:"noUpgrade",4:"noUpgrade",
5:"noUpgrade",6:Blockly.Versioning.makeSetterUseHelper("Image","Picture",Blockly.Versioning.tryReplaceBlockWithAssets)},ImageBot:{1:"noUpgrade",2:"noUpgrade"},ImagePicker:{2:"ai1CantDoUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade"},ImageSprite:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade",6:"ai1CantDoUpgrade",7:"noUpgrade",8:[Blockly.Versioning.makeMethodUseDropdown("ImageSprite","Bounce",0,"Direction"),Blockly.Versioning.makeSetterUseHelper("ImageSprite","Picture",Blockly.Versioning.tryReplaceBlockWithAssets)],
9:"noUpgrade",10:"noUpgrade"},Label:{2:"ai1CantDoUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade"},Language:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade",5:"ai1CantDoUpgrade",6:"ai1CantDoUpgrade",7:"ai1CantDoUpgrade",8:"ai1CantDoUpgrade",9:"ai1CantDoUpgrade",10:"ai1CantDoUpgrade",11:"noUpgrade",12:"ai1CantDoUpgrade",13:"noUpgrade",14:"noUpgrade",15:"noUpgrade",16:"noUpgrade",17:"ai1CantDoUpgrade",18:"noUpgrade",19:"noUpgrade",20:Blockly.Versioning.renameBlockType("obsufcated_text","obfuscated_text"),
21:"noUpgrade",22:"noUpgrade",23:"noUpgrade",24:"noUpgrade",25:"noUpgrade",26:"noUpgrade",27:"noUpgrade",28:"noUpgrade",29:"noUpgrade",30:"noUpgrade",31:"noUpgrade",32:"noUpgrade",33:"noUpgrade",34:Blockly.Versioning.makeScreenNamesBeDropdowns,35:"noUpgrade",36:[Blockly.Versioning.renameBlockType("lists_minimum_number","lists_minimum_value"),Blockly.Versioning.renameBlockType("lists_maximum_number","lists_maximum_value")],37:"noUpgrade"},ListPicker:{2:"ai1CantDoUpgrade",3:"noUpgrade",4:"noUpgrade",
5:"noUpgrade",6:"noUpgrade",7:"noUpgrade",8:"noUpgrade",9:"noUpgrade"},ListView:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade",7:"noUpgrade",8:"noUpgrade",9:"noUpgrade",10:"noUpgrade"},LocationSensor:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade"},Map:{2:[Blockly.Versioning.changePropertyName("Map","Markers","Features"),Blockly.Versioning.changeMethodName("Map","LoadGeoJSONFromUrl","LoadFromURL"),Blockly.Versioning.changeMethodName("Map","FeatureFromGeoJSONDescription","FeatureFromDescription")],
3:[Blockly.Versioning.changeEventName("Map","GotGeoJSON","GotFeatures"),Blockly.Versioning.changeEventName("Map","GeoJSONError","LoadError")],4:"noUpgrade",5:"noUpgrade",6:[Blockly.Versioning.makeSetterUseDropdown("Map","ScaleUnits","ScaleUnits"),Blockly.Versioning.makeSetterUseDropdown("Map","MapType","MapType")],7:"noUpgrade"},Circle:{2:"noUpgrade"},LineString:{2:"noUpgrade"},Marker:{2:"noUpgrade",3:"noUpgrade",4:[Blockly.Versioning.makeSetterUseDropdown("Marker","AnchorHorizontal","HorizontalAlignment"),
Blockly.Versioning.makeSetterUseDropdown("Marker","AnchorVertical","VerticalAlignment"),Blockly.Versioning.makeSetterUseHelper("Marker","ImageAsset",Blockly.Versioning.tryReplaceBlockWithAssets)]},Polygon:{2:"noUpgrade"},Rectangle:{2:"noUpgrade"},Navigation:{1:"noUpgrade",2:[Blockly.Versioning.makeSetterUseDropdown("Navigation","TransportationMethod","TransportMethod")]},NearField:{1:"noUpgrade"},Notifier:{2:"ai1CantDoUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade"},NxtColorSensor:{1:"noUpgrade"},
NxtDirectCommands:{1:"noUpgrade",2:[Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","SetOutputState",0,"NxtMotorPort"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","SetOutputState",2,"NxtMotorMode"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","SetOutputState",3,"NxtRegulationMode"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","SetOutputState",5,"NxtRunState"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","SetInputMode",0,
"NxtSensorPort"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","SetInputMode",1,"NxtSensorType"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","SetInputMode",2,"NxtSensorMode"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","GetOutputState",0,"NxtMotorPort"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","GetInputValues",0,"NxtSensorPort"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","ResetInputScaledValue",0,"NxtSensorPort"),
Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","ResetMotorPosition",0,"NxtMotorPort"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","LsGetStatus",0,"NxtSensorPort"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","LsWrite",0,"NxtSensorPort"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","LsRead",0,"NxtSensorPort"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands","MessageRead",0,"NxtMailbox"),Blockly.Versioning.makeMethodUseDropdown("NxtDirectCommands",
"MessageWrite",0,"NxtMailbox")]},NxtDrive:{1:"noUpgrade"},NxtLightSensor:{1:"noUpgrade"},NxtSoundSensor:{1:"noUpgrade"},NxtTouchSensor:{1:"noUpgrade"},NxtUltrasonicSensor:{1:"noUpgrade"},Ev3Motors:{1:"noUpgrade"},Ev3ColorSensor:{1:"noUpgrade",2:[Blockly.Versioning.methodToSetterWithValue("Ev3ColorSensor","SetAmbientMode","Mode","ambient"),Blockly.Versioning.methodToSetterWithValue("Ev3ColorSensor","SetColorMode","Mode","color"),Blockly.Versioning.methodToSetterWithValue("Ev3ColorSensor","SetReflectedMode",
"Mode","reflected"),Blockly.Versioning.makeSetterUseDropdown("Ev3ColorSensor","Mode","ColorSensorMode")]},Ev3GyroSensor:{1:"noUpgrade",2:[Blockly.Versioning.methodToSetterWithValue("Ev3GyroSensor","SetAngleMode","Mode","angle"),Blockly.Versioning.methodToSetterWithValue("Ev3GyroSensor","SetRateMode","Mode","rate"),Blockly.Versioning.makeSetterUseDropdown("Ev3GyroSensor","Mode","GyroSensorMode")]},Ev3TouchSensor:{1:"noUpgrade"},Ev3UltrasonicSensor:{1:"noUpgrade",2:[Blockly.Versioning.methodToSetterWithValue("Ev3UltrasonicSensor",
"SetCmUnit","Unit","cm"),Blockly.Versioning.methodToSetterWithValue("Ev3UltrasonicSensor","SetInchUnit","Unit","inch"),Blockly.Versioning.makeSetterUseDropdown("Ev3UltrasonicSensor","Unit","UltrasonicSensorUnit")]},Ev3Sound:{1:"noUpgrade"},Ev3UI:{1:"noUpgrade"},Ev3Commands:{1:"noUpgrade"},OrientationSensor:{2:"ai1CantDoUpgrade"},PasswordTextBox:{2:"ai1CantDoUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade",7:[Blockly.Versioning.changeMethodName("PasswordTextBox","SetCursorAt","MoveCursorTo"),
Blockly.Versioning.changeMethodName("PasswordTextBox","SetCursorAtEnd","MoveCursorToEnd"),Blockly.Versioning.changeEventName("PasswordTextBox","OnTextChanged","TextChanged")]},Pedometer:{1:"noUpgrade",2:"noUpgrade",3:"noUpgrade"},PhoneCall:{2:"noUpgrade",3:"noUpgrade"},PhoneNumberPicker:{2:"ai1CantDoUpgrade",3:"noUpgrade",4:"noUpgrade"},Player:{2:"noUpgrade",3:"ai1CantDoUpgrade",4:"noUpgrade",5:"ai1CantDoUpgrade",6:"noUpgrade"},ProximitySensor:{1:"noUpgrade"},Regression:{2:[Blockly.Versioning.makeMethodUseHelper("Regression",
"CalculateLineOfBestFitValue",2,Blockly.Versioning.tryReplaceBlockWithHelper("LOBFValues"))]},Screen:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade",7:"noUpgrade",8:"noUpgrade",9:"noUpgrade",10:"noUpgrade",11:"noUpgrade",12:"noUpgrade",13:"noUpgrade",14:"noUpgrade",15:"noUpgrade",16:"noUpgrade",17:"noUpgrade",18:"noUpgrade",19:"noUpgrade",20:"noUpgrade",21:"noUpgrade",22:"noUpgrade",23:"noUpgrade",24:"noUpgrade",25:"noUpgrade",26:"noUpgrade",27:"noUpgrade",28:"noUpgrade",29:[Blockly.Versioning.makeSetterUseDropdown("Form",
"OpenScreenAnimation","ScreenAnimation"),Blockly.Versioning.makeSetterUseDropdown("Form","CloseScreenAnimation","ScreenAnimation"),Blockly.Versioning.makeSetterUseDropdown("Form","AlignHorizontal","HorizontalAlignment"),Blockly.Versioning.makeSetterUseDropdown("Form","AlignVertical","VerticalAlignment"),Blockly.Versioning.makeSetterUseDropdown("Form","ScreenOrientation","ScreenOrientation"),Blockly.Versioning.makeSetterUseHelper("Form","BackgroundImage",Blockly.Versioning.tryReplaceBlockWithAssets),
Blockly.Versioning.makeMethodUseHelper("Form","AskForPermission",0,Blockly.Versioning.tryReplaceBlockWithPermissions)],30:"noUpgrade",31:"noUpgrade"},Sharing:{1:"noUpgrade"},Slider:{1:"noUpgrade",2:"noUpgrade",3:"noUpgrade"},Sound:{2:"noUpgrade",3:"ai1CantDoUpgrade",4:Blockly.Versioning.makeSetterUseHelper("Sound","Source",Blockly.Versioning.tryReplaceBlockWithAssets)},SoundRecorder:{1:"noUpgrade",2:"noUpgrade"},SpeechRecognizer:{1:"noUpgrade",2:"noUpgrade",3:"noUpgrade"},Spinner:{1:"noUpgrade"},
Spreadsheet:{2:[Blockly.Versioning.changeMethodName("Spreadsheet","ReadCol","ReadColumn"),Blockly.Versioning.changeMethodName("Spreadsheet","WriteCol","WriteColumn"),Blockly.Versioning.changeMethodName("Spreadsheet","AddCol","AddColumn"),Blockly.Versioning.changeMethodName("Spreadsheet","RemoveCol","RemoveColumn"),Blockly.Versioning.changeEventName("Spreadsheet","GotColData","GotColumnData"),Blockly.Versioning.changeEventName("Spreadsheet","FinishedWriteCol","FinishedWriteColumn"),Blockly.Versioning.changeEventName("Spreadsheet",
"FinishedAddCol","FinishedAddColumn"),Blockly.Versioning.changeEventName("Spreadsheet","FinishedRemoveCol","FinishedRemoveColumn"),Blockly.Versioning.changeEventParameterName("Spreadsheet","GotFilterResult","return_rows","returnRows"),Blockly.Versioning.changeEventParameterName("Spreadsheet","GotFilterResult","return_data","returnData"),Blockly.Versioning.changeEventParameterName("Spreadsheet","GotColumnData","colDataList","columnData")],3:"noUpgrade"},TableArrangement:{1:"noUpgrade"},TextBox:{2:"noUpgrade",
3:"ai1CantDoUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade",7:"noUpgrade",8:"noUpgrade",9:"noUpgrade",10:"noUpgrade",11:"noUpgrade",12:"noUpgrade",13:"noUpgrade",14:[Blockly.Versioning.changeMethodName("TextBox","SetCursorAt","MoveCursorTo"),Blockly.Versioning.changeMethodName("TextBox","SetCursorAtEnd","MoveCursorToEnd"),Blockly.Versioning.changeEventName("TextBox","OnTextChanged","TextChanged")]},Texting:{2:"noUpgrade",3:"ai1CantDoUpgrade",4:"noUpgrade",5:Blockly.Versioning.makeSetterUseDropdown("Texting",
"ReceivingEnabled","ReceivingState")},TextToSpeech:{2:"noUpgrade",3:"noUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade"},TimePicker:{2:"noUpgrade",3:"noUpgrade",4:Blockly.Versioning.makeSetterUseHelper("TimePicker","Image",Blockly.Versioning.tryReplaceBlockWithAssets)},TinyDB:{1:"noUpgrade",2:"noUpgrade",3:"noUpgrade"},TinyWebDB:{2:"ai1CantDoUpgrade"},Twitter:{2:"ai1CantDoUpgrade",3:"ai1CantDoUpgrade",4:"noUpgrade"},VerticalArrangement:{2:"noUpgrade",3:"noUpgrade",4:[Blockly.Versioning.makeSetterUseDropdown("VerticalArrangement",
"AlignHorizontal","HorizontalAlignment"),Blockly.Versioning.makeSetterUseDropdown("VerticalArrangement","AlignVertical","VerticalAlignment"),Blockly.Versioning.makeSetterUseHelper("VerticalArrangement","Image",Blockly.Versioning.tryReplaceBlockWithAssets)]},VerticalScrollArrangement:{1:"noUpgrade",2:[Blockly.Versioning.makeSetterUseDropdown("VerticalScrollArrangement","AlignHorizontal","HorizontalAlignment"),Blockly.Versioning.makeSetterUseDropdown("VerticalScrollArrangement","AlignVertical","VerticalAlignment"),
Blockly.Versioning.makeSetterUseHelper("VerticalScrollArrangement","Image",Blockly.Versioning.tryReplaceBlockWithAssets)]},VideoPlayer:{2:"noUpgrade",3:"ai1CantDoUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade",7:Blockly.Versioning.makeSetterUseHelper("VideoPlayer","Source",Blockly.Versioning.tryReplaceBlockWithAssets)},Voting:{1:"noUpgrade"},Web:{2:"ai1CantDoUpgrade",3:"ai1CantDoUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade",7:"noUpgrade",8:"noUpgrade",9:"noUpgrade"},WebViewer:{2:"noUpgrade",
3:"noUpgrade",4:"noUpgrade",5:"noUpgrade",6:"noUpgrade",7:"noUpgrade",8:"noUpgrade",9:"noUpgrade",10:"noUpgrade",11:"noUpgrade"},YandexTranslate:{1:"noUpgrade",2:"noUpgrade",3:[Blockly.Versioning.renameComponentType("YandexTranslate","Translator")]},Translator:{1:"noUpgrade"}};/*

 @fileoverview Visual blocks editor for App Inventor
 Methods to handle serialization of the blocks workspace

 @author sharon@google.com (Sharon Perl)
 @author ewpatton@mit.edu (Evan W. Patton)

 History:
 [lyn, 2014/10/31] Completely overhauled blocks upgrading architecture.
 All the work is done in Blockly.Version.upgrade.
*/
AI.Blockly.SaveFile={};void 0===Blockly.SaveFile&&(Blockly.SaveFile={});Blockly.SaveFile.load=function(a,d){try{Blockly.Events.disable();if(0!=d.length)try{Blockly.Block.isRenderingOn=!1,Blockly.Versioning.upgrade(a,d)}finally{Blockly.Block.isRenderingOn=!0}null!=Blockly.common.getMainWorkspace()&&null!=Blockly.common.getMainWorkspace().getCanvas()&&Blockly.common.getMainWorkspace().render()}finally{Blockly.Events.enable()}};
Blockly.SaveFile.get=function(a,d){d=d||Blockly.common.getMainWorkspace();d=Blockly.Xml.workspaceToDom(d,!1);var f=goog.dom.createElement("yacodeblocks");f.setAttribute("ya-version",top.YA_VERSION);f.setAttribute("language-version",top.BLOCKS_VERSION);d.appendChild(f);return a?Blockly.Xml.domToPrettyText(d):Blockly.Xml.domToText(d)};AI.Blockly.Msg={};AI.Blockly.Msg.applyMessages=function(a){Object.keys(a).forEach(function(d){Blockly.Msg[d]=a[d]})};window.AI=AI;AI.BlockUtils={};AI.BlockUtils.InstantInTime=function(a,d){return a.sourceBlock_.rendered&&d.sourceBlock_.rendered?!d.getCheck()||d.getCheck().includes("InstantInTime"):(d.getCheck()&&!d.getCheck().includes("InstantInTime")&&d.sourceBlock_.badBlock(),!0)};
AI.BlockUtils.YailTypeToBlocklyTypeMap={number:{input:["Number"],output:["Number","String","Key"]},text:{input:["String"],output:["Number","String","Key"]},"boolean":{input:["Boolean"],output:["Boolean","String"]},list:{input:["Array"],output:["Array","String"]},component:{input:["COMPONENT"],output:["COMPONENT","Key"]},InstantInTime:{input:["InstantInTime",AI.BlockUtils.InstantInTime],output:["InstantInTime",AI.BlockUtils.InstantInTime]},any:{input:null,output:null},dictionary:{input:["Dictionary"],
output:["Dictionary","String","Array"]},pair:{input:["Pair"],output:["Pair","String","Array"]},key:{input:["Key"],output:["String","Key"]},"enum":{input:null,output:["Key"]}};AI.BlockUtils.OUTPUT="output";AI.BlockUtils.INPUT="input";AI.BlockUtils.YailTypeToBlocklyType=function(a,d){if(-1!=a.indexOf("Enum"))return a;d=AI.BlockUtils.YailTypeToBlocklyTypeMap[a][d];if(void 0===d)throw Error("Unknown Yail type: "+a+" -- YailTypeToBlocklyType");return d};
AI.BlockUtils.helperKeyToBlocklyType=function(a,d){if(!a)return null;var f=AI.BlockUtils;switch(a.type){case "OPTION_LIST":return f.optionListKeyToBlocklyType(a.key,d);case "ASSET":return f.assetKeyToBlocklyType(a.key,d)}return null};AI.BlockUtils.optionListKeyToBlocklyType=function(a,d){return d.getTopWorkspace().getComponentDatabase().getOptionList(a).className+"Enum"};AI.BlockUtils.assetKeyToBlocklyType=function(a,d){return d.getTopWorkspace().getComponentDatabase().getFilter(a)};
AI.BlockUtils.setTooltip=function(a,d){a.setTooltip(AI.BlockUtils.wrapSentence(d,60))};AI.BlockUtils.wrapSentence=function(a,d){a=a.trim();if(a.length<d)return a;var f=a.lastIndexOf(" ",d);return-1==f?a.substring(0,d).trim()+AI.BlockUtils.wrapSentence(a.substring(d),d):a.substring(0,f).trim()+"\n"+AI.BlockUtils.wrapSentence(a.substring(f),d)};AI.BlockUtils.MAX_COLLAPSE=4;AI.BlockUtils.times_symbol="Ã—";AI.BlockUtils.NUMBER_REGEX=RegExp("^([-+]?[0-9]+)?(\\.[0-9]+)?([eE][-+]?[0-9]+)?$|^[-+]?[0-9]+(\\.[0-9]*)?([eE][-+]?[0-9]+)?$");/*

 @fileoverview Visual blocks editor for App Inventor
 Methods to handle warnings in the block editor.

 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Blockly.WarningHandler={};Blockly.WarningHandler=function(a){this.workspace=a;this.allBlockErrors=[{name:"checkReplErrors"}];this.allBlockWarnings=[{name:"checkBlockAtRoot"},{name:"checkEmptySockets"}];this.cachedGlobalNames=[];this.showWarningsToggle=!1;this.warningIdHash=Object.create(null);this.errorIdHash=Object.create(null);this.warningCollapseStack=[];this.errorCollapseStack=[];this.currentErrorBlockId=this.currentWarningBlockId=""};Blockly.WarningHandler.prototype.cacheGlobalNames=!1;
Blockly.WarningHandler.prototype.errorCount=0;Blockly.WarningHandler.prototype.warningCount=0;Blockly.WarningHandler.WarningState={NO_ERROR:0,WARNING:1,ERROR:2};Blockly.WarningHandler.prototype.currentWarning=-1;Blockly.WarningHandler.prototype.currentError=-1;Blockly.WarningHandler.prototype.updateWarningErrorCount=function(){var a=this.workspace.getWarningIndicator();a&&a.updateWarningAndErrorCount()};
Blockly.WarningHandler.prototype.updateCurrentWarningAndError=function(){var a=this.workspace.getWarningIndicator();a&&a.updateCurrentWarningAndError(this.currentWarning,this.currentError)};Blockly.WarningHandler.prototype.toggleWarning=function(){this.showWarningsToggle?(this.showWarningsToggle=!1,this.hideWarnings()):(this.showWarningsToggle=!0,this.checkAllBlocksForWarningsAndErrors());var a=this.workspace.getWarningIndicator();a&&a.updateWarningToggleText()};
Blockly.WarningHandler.prototype.hideWarnings=function(){for(var a=this.workspace.getAllBlocks(),d=0;d<a.length;d++)a[d].warning&&a[d].setWarningText(null)};
Blockly.WarningHandler.prototype.checkAllBlocksForWarningsAndErrors=function(){if(this.workspace.rendered){var a=this.workspace.getAllBlocks();try{this.cacheGlobalNames=!1;this.cachedGlobalNames=Blockly.FieldLexicalVariable.getGlobalNames();this.cacheGlobalNames=!0;for(var d=0;d<a.length;d++)this.checkErrors(a[d])}finally{this.cacheGlobalNames=!1,this.cachedGlobalNames=[]}}};
Blockly.WarningHandler.prototype.previousWarning=function(){var a=Object.keys(this.warningIdHash),d=a.length;d&&(this.currentWarningBlockId&&this.unHighlightBlock_(this.currentWarningBlockId,this.warningCollapseStack),0<this.currentWarning?this.currentWarning--:this.currentWarning=d-1,this.currentWarningBlockId=a[this.currentWarning],this.warningCollapseStack=this.highlightBlock_(this.currentWarningBlockId))};
Blockly.WarningHandler.prototype.nextWarning=function(){var a=Object.keys(this.warningIdHash),d=a.length;d&&(this.currentWarningBlockId&&this.unHighlightBlock_(this.currentWarningBlockId,this.warningCollapseStack),this.currentWarning<d-1?this.currentWarning++:this.currentWarning=0,this.currentWarningBlockId=a[this.currentWarning],this.warningCollapseStack=this.highlightBlock_(this.currentWarningBlockId))};
Blockly.WarningHandler.prototype.previousError=function(){var a=Object.keys(this.errorIdHash),d=a.length;d&&(this.currentErrorBlockId&&this.unHighlightBlock_(this.currentErrorBlockId,this.errorCollapseStack),0<this.currentError?this.currentError--:this.currentError=d-1,this.currentErrorBlockId=a[this.currentError],this.errorCollapseStack=this.highlightBlock_(this.currentErrorBlockId))};
Blockly.WarningHandler.prototype.nextError=function(){var a=Object.keys(this.errorIdHash),d=a.length;d&&(this.currentErrorBlockId&&this.unHighlightBlock_(this.currentErrorBlockId,this.errorCollapseStack),this.currentError<d-1?this.currentError++:this.currentError=0,this.currentErrorBlockId=a[this.currentError],this.errorCollapseStack=this.highlightBlock_(this.currentErrorBlockId))};
Blockly.WarningHandler.prototype.highlightBlock_=function(a){var d=this.workspace.getBlockById(a);d.setHighlighted(!0);var f=[];do d.isCollapsed()&&(f.push(d.id),d.setCollapsed(!1));while(d=d.getSurroundParent());this.workspace.centerOnBlock(a);this.updateCurrentWarningAndError();return f};Blockly.WarningHandler.prototype.unHighlightBlock_=function(a,d){var f=this.workspace;f.getBlockById(a).setHighlighted(!1);for(var h=0;a=d[h];h++)f.getBlockById(a).setCollapsed(!0)};
Blockly.WarningHandler.prototype.hideCurrentHighlight_=function(){this.currentErrorBlockId&&(this.unHighlightBlock_(this.currentErrorBlockId,this.errorCollapseStack),this.currentErrorBlockId="");this.currentWarningBlockId&&(this.unHighlightBlock_(this.currentWarningBlockId,this.warningCollapseStack),this.currentWarningBlockId="")};
Blockly.WarningHandler.prototype.checkErrors=function(a){this.hideCurrentHighlight_();this.updateWarningErrorCount();if(a.isInFlyout)return Blockly.WarningHandler.WarningState.NO_ERROR;if(!a.getSvgRoot()||a.readOnly)return a.hasWarning&&(a.hasWarning=!1,this.warningCount--,delete this.warningIdHash[a.id],this.updateWarningErrorCount()),a.hasError&&(a.hasError=!1,this.errorCount--,delete this.errorIdHash[a.id],this.updateWarningErrorCount()),Blockly.WarningHandler.WarningState.NO_ERROR;a.errors||(a.errors=
[]);a.warnings||(a.warnings=[]);for(var d=a.errors.concat(this.allBlockErrors),f=a.warnings.concat(this.allBlockWarnings),h=0;h<d.length;h++){let l=d[h];if((this[l.name]||l.func).call(this,a,l))return a.warning&&a.setWarningText(null),a.hasError||(a.hasError=!0,this.errorCount++,this.errorIdHash[a.id]=!0,this.updateWarningErrorCount()),a.hasWarning&&(a.hasWarning=!1,this.warningCount--,delete this.warningIdHash[a.id],this.updateWarningErrorCount()),Blockly.WarningHandler.WarningState.ERROR}a.error&&
a.setErrorIconText(null);a.hasError&&(a.hasError=!1,this.errorCount--,delete this.errorIdHash[a.id],this.updateWarningErrorCount());for(h=0;h<f.length;h++)if(d=f[h],(this[d.name]||d.func).call(this,a,d))return a.hasWarning||(a.hasWarning=!0,this.warningCount++,this.warningIdHash[a.id]=!0,this.updateWarningErrorCount()),Blockly.WarningHandler.WarningState.WARNING;a.warning&&a.setWarningText(null);a.hasWarning&&(a.hasWarning=!1,this.warningCount--,delete this.warningIdHash[a.id],this.updateWarningErrorCount());
return Blockly.WarningHandler.WarningState.NO_ERROR};Blockly.WarningHandler.prototype.checkIsInDefinition=function(a){return"component_set_get"===a.type&&"get"===a.setOrGet||"global_declaration"!=a.getRootBlock().type?!1:(a.setErrorIconText(Blockly.Msg.ERROR_BLOCK_CANNOT_BE_IN_DEFINTION),!0)};
Blockly.WarningHandler.prototype.checkIfUndefinedBlock=function(a){if(!0===a.isBadBlock()){var d=Blockly.Msg.ERROR_BLOCK_IS_NOT_DEFINED,f=!0;"component_event"==a.type&&(f=!1);a.isolate(f);a.setErrorIconText(d);return!0}return!1};
Blockly.WarningHandler.prototype.checkDropDownContainsValidValue=function(a,d){for(var f=0;f<d.dropDowns.length;f++){var h=a.getField(d.dropDowns[f]),l=h.menuGenerator_(),m=h.getText(),p=h.getValue(),q=!1;h.updateMutation&&h.updateMutation();for(var u=0;u<l.length;u++)if(l[u][1]==p&&" "!=p){q=!0;l[u][0]!=m&&h.setValue(l[u][1]);break}if(!q)return a.setErrorIconText(Blockly.Msg.ERROR_SELECT_VALID_ITEM_FROM_DROPDOWN),!0}return!1};
Blockly.WarningHandler.prototype.checkInvalidNumber=function(a){if(a.outputConnection&&a.outputConnection.isConnected()){var d=a.outputConnection.targetConnection.getCheck(),f=a.getFieldValue("TEXT");return d&&-1==d.indexOf("String")&&0<=d.indexOf("Number")&&(""==f||!AI.BlockUtils.NUMBER_REGEX.test(f))?(a.setErrorIconText(Blockly.Msg.ERROR_INVALID_NUMBER_CONTENT),!0):!1}};
Blockly.WarningHandler.prototype.checkIsNotInLoop=function(a){if(Blockly_containedInLoop(a))return!1;a.setErrorIconText(Blockly.Msg.ERROR_BREAK_ONLY_IN_LOOP);return!0};Blockly_loopBlockTypes=["controls_forEach","controls_for_each_dict","controls_forRange","controls_while"];Blockly_containedInLoop=function(a){a=a.getSurroundParent();return null==a?!1:0<=Blockly_loopBlockTypes.indexOf(a.type)?!0:Blockly_containedInLoop(a)};
Blockly.WarningHandler.prototype.checkComponentNotExistsError=function(a){return 1==a.isGeneric?!1:-1==this.workspace.componentDb_.getInstanceNames().indexOf(a.instanceName)?(a.setErrorIconText(Blockly.Msg.ERROR_COMPONENT_DOES_NOT_EXIST),!0):!1};Blockly.WarningHandler.prototype.checkComponentTypeNotExistsError=function(a){return void 0==this.workspace.componentDb_.getType(a.typeName)?(a.setErrorIconText(Blockly.Msg.ERROR_COMPONENT_DOES_NOT_EXIST),!0):!1};
Blockly.WarningHandler.prototype.determineDuplicateComponentEventHandlers=function(){for(var a=this.workspace.getTopBlocks(!1),d=a.length,f={},h=0;h<d;h++){var l=a[h];if("component_event"==l.type&&!l.isInsertionMarker()){l.IAmADuplicate=!1;var m=l.typeName+":"+l.eventName+":"+l.instanceName+":"+l.disabled,p=f[m];p?(p.isDuplicate||(p.isDuplicate=!0,p.block.IAmADuplicate=!0),l.IAmADuplicate=!0):f[m]={block:l,isDuplicate:!1}}}};
Blockly.WarningHandler.prototype.checkIfIAmADuplicateEventHandler=function(a){return a.IAmADuplicate?(a.setErrorIconText(Blockly.Msg.ERROR_DUPLICATE_EVENT_HANDLER),!0):!1};Blockly.WarningHandler.prototype.setBlockError=function(a,d){a.warning&&a.setWarningText(null);a.hasWarning&&(a.hasWarning=!1,this.warningCount--,this.updateWarningErrorCount());a.hasError||(a.hasError=!0,this.errorCount++,this.updateWarningErrorCount());a.setErrorIconText(d)};
Blockly.WarningHandler.prototype.countChildBlocks=function(a){var d=0;a=a.getChildren();for(var f=0;f<a.length;f++){var h=a[f];h&&(console.log(`Found child block: ${h.type} (ID: ${h.id})`),d+=1,h=this.countChildBlocks(h),d+=h)}return d};
Blockly.WarningHandler.prototype.checkDisposedBlock=function(a){console.log(`Checking disposed block: ${a.type} (ID: ${a.id})`);a.hasWarning&&(a.hasWarning=!1,--this.warningCount,delete this.warningIdHash[a.id]);a.hasError&&(a.hasError=!1,--this.errorCount,delete this.errorIdHash[a.id]);a=a.getChildren();for(var d=0;d<a.length;d++)this.checkDisposedBlock(a[d]);this.updateWarningErrorCount()};
Blockly.WarningHandler.prototype.checkEmptySetterSocket=function(a){return"set"!==a.setOrGet||a.getInputTargetBlock("VALUE")?!1:(a.setErrorIconText(Blockly.Msg.ERROR_PROPERTY_SETTER_NEEDS_VALUE),!0)};Blockly.WarningHandler.prototype.checkGenericComponentSocket=function(a){return a.isGeneric&&!a.getInputTargetBlock("COMPONENT")?(a.setErrorIconText(Blockly.Msg.ERROR_GENERIC_NEEDS_COMPONENT.replace(/%1/,a.genericComponentInput)),!0):!1};
Blockly.WarningHandler.prototype.checkEmptySockets=function(a){for(var d=!1,f=0;f<a.inputList.length;f++){var h=a.inputList[f].name;if(a.inputList[f].type==Blockly.INPUT_VALUE&&a.inputList[f].connection&&!a.getInputTargetBlock(h)){d=!0;break}}return d?(this.showWarningsToggle&&a.setWarningText(Blockly.Msg.MISSING_SOCKETS_WARNINGS),!0):!1};
Blockly.WarningHandler.prototype.checkBlockAtRoot=function(a){var d=a.getRootBlock();return a==d&&"event"!=a.blockType&&"global_declaration"!=a.type&&"procedures_defnoreturn"!=a.type&&"procedures_defreturn"!=a.type?(this.showWarningsToggle&&a.setWarningText(Blockly.Msg.WRONG_TYPE_BLOCK_WARINGS),!0):!1};Blockly.WarningHandler.prototype.checkReplErrors=function(a){return a.replError?(a.setErrorIconText(a.replError),!0):!1};Blockly.WarningHandler.prototype.setError=function(a,d){a.setErrorIconText(d)};
Blockly.WarningHandler.prototype.setWarning=function(a,d){a.setWarningText(d)};/*

 @fileoverview Visual blocks editor for App Inventor
 Methods to handle warnings in the block editor.

 @author mckinney@mit.edu (Andrew F. McKinney)
 @author ewpatton@mit.edu (Evan W. Patton);
*/
AI.Blockly.WarningIndicator={};Blockly.WarningIndicator=class{constructor(a){this.workspace_=a}};Blockly.WarningIndicator.prototype.INDICATOR_HEIGHT_=40;Blockly.WarningIndicator.prototype.MARGIN_BOTTOM_=35;Blockly.WarningIndicator.prototype.MARGIN_SIDE_=35;Blockly.WarningIndicator.prototype.svgGroup_=null;Blockly.WarningIndicator.prototype.left_=0;Blockly.WarningIndicator.prototype.top_=0;
Blockly.WarningIndicator.prototype.createDom=function(){this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{id:"indicatorWarning"},null);this.warningCount_=Blockly.utils.dom.createSvgElement("text",{fill:"black",transform:"translate(20,-1)"},this.svgGroup_);this.warningCount_.textContent="0";this.iconGroup_=Blockly.utils.dom.createSvgElement("g",{"class":"blocklyIconGroup",translate:"transform(0,-15)"},this.svgGroup_);Blockly.utils.dom.createSvgElement("path",{"class":"blocklyWarningIconShield",
d:"M 2,0 Q -1,0 0.5,-3 L 6.5,-13.3 Q 8,-16 9.5,-13.3 L 15.5,-3 Q 17,0 14,0 z"},this.iconGroup_);this.iconMark_=Blockly.utils.dom.createSvgElement("text",{"class":"blocklyWarningIconMark",x:AI.ErrorIcon.ICON_RADIUS,y:2*AI.ErrorIcon.ICON_RADIUS-18},this.iconGroup_);this.iconMark_.appendChild(document.createTextNode("!"));this.errorCount_=Blockly.utils.dom.createSvgElement("text",{fill:"black",transform:"translate(85,-1)"},this.svgGroup_);this.errorCount_.textContent="0";this.iconErrorGroup_=Blockly.utils.dom.createSvgElement("g",
{"class":"blocklyIconGroup",transform:"translate(65,0)"},this.svgGroup_);Blockly.utils.dom.createSvgElement("circle",{"class":"blocklyErrorIconOutline",r:AI.ErrorIcon.ICON_RADIUS,cx:AI.ErrorIcon.ICON_RADIUS,cy:AI.ErrorIcon.ICON_RADIUS-15},this.iconErrorGroup_);Blockly.utils.dom.createSvgElement("path",{"class":"blocklyErrorIconX",d:"M 4,-11 12,-3 8,-7 4,-3 12,-11"},this.iconErrorGroup_);this.warningToggleGroup_=Blockly.utils.dom.createSvgElement("g",{},this.svgGroup_);this.warningToggle_=Blockly.utils.dom.createSvgElement("rect",
{width:"120",height:"20",x:"-15",y:"20","class":"warningNav"},this.warningToggleGroup_);this.warningToggleText_=Blockly.utils.dom.createSvgElement("text",{fill:"black",transform:"translate(45,35)","text-anchor":"middle",style:"font-size:10pt;cursor:pointer;"},this.warningToggleGroup_);this.warningToggleText_.textContent=Blockly.Msg.SHOW_WARNINGS;this.warningNavPrevious_=Blockly.utils.dom.createSvgElement("path",{d:"M 0,7 L 10,17 L 20,7 Z","class":"warningNav"},this.svgGroup_);this.warningNavNext_=
Blockly.utils.dom.createSvgElement("path",{d:"M 10,-31 L 0,-21 L 20,-21 Z","class":"warningNav"},this.svgGroup_);this.errorNavPrevious_=Blockly.utils.dom.createSvgElement("path",{d:"M 67,7 L 77,17 L 87,7 Z","class":"warningNav"},this.svgGroup_);this.errorNavNext_=Blockly.utils.dom.createSvgElement("path",{d:"M 87,-21 L 67,-21 L 77,-31 Z","class":"warningNav"},this.svgGroup_);return this.svgGroup_};
Blockly.WarningIndicator.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[Blockly.ComponentManager.Capability.POSITIONABLE]});Blockly.browserEvents.bind(this.warningToggleGroup_,"click",this,Blockly.WarningIndicator.prototype.onclickWarningToggle);Blockly.browserEvents.bind(this.warningNavPrevious_,"click",this,Blockly.WarningIndicator.prototype.onclickWarningNavPrevious);Blockly.browserEvents.bind(this.warningNavNext_,"click",this,
Blockly.WarningIndicator.prototype.onclickWarningNavNext);Blockly.browserEvents.bind(this.errorNavPrevious_,"click",this,Blockly.WarningIndicator.prototype.onclickErrorNavPrevious);Blockly.browserEvents.bind(this.errorNavNext_,"click",this,Blockly.WarningIndicator.prototype.onclickErrorNavNext);Blockly.browserEvents.bind(this.warningToggleGroup_,"mousedown",this,function(a){a.stopPropagation()});Blockly.browserEvents.bind(this.warningNavPrevious_,"mousedown",this,function(a){a.stopPropagation()});
Blockly.browserEvents.bind(this.warningNavNext_,"mousedown",this,function(a){a.stopPropagation()});Blockly.browserEvents.bind(this.errorNavPrevious_,"mousedown",this,function(a){a.stopPropagation()});Blockly.browserEvents.bind(this.errorNavNext_,"mousedown",this,function(a){a.stopPropagation()})};
Blockly.WarningIndicator.prototype.dispose=function(){this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.warningNavRightText_=this.warningNavNext_=this.warningNavLeftText_=this.warningNavPrevious_=this.warningToggleText_=this.warningToggle_=this.iconErrorMark_=this.iconErrorGroup_=this.errorCount_=this.iconMark_=this.iconGroup_=this.warningCount_=this.getMetrics_=null};
Blockly.WarningIndicator.prototype.position_=function(a){a&&(this.left_=Blockly.RTL?this.MARGIN_SIDE_:a.absoluteMetrics.left+this.MARGIN_SIDE_,this.top_=a.viewMetrics.height+a.absoluteMetrics.top-this.INDICATOR_HEIGHT_-this.MARGIN_BOTTOM_,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))};
Blockly.WarningIndicator.prototype.updateWarningAndErrorCount=function(){this.errorCount_.textContent=this.workspace_.getWarningHandler().errorCount;this.warningCount_.textContent=this.workspace_.getWarningHandler().warningCount};Blockly.WarningIndicator.prototype.updateCurrentWarningAndError=function(a,d){var f=this.workspace_.getWarningHandler();d++;a++;this.errorCount_.textContent=d+"/"+f.errorCount;this.warningCount_.textContent=a+"/"+f.warningCount};
Blockly.WarningIndicator.prototype.updateWarningToggleText=function(){this.workspace_.getWarningHandler().showWarningsToggle?this.warningToggleText_.textContent=Blockly.Msg.HIDE_WARNINGS:this.warningToggleText_.textContent=Blockly.Msg.SHOW_WARNINGS};Blockly.WarningIndicator.prototype.onclickWarningToggle=function(){Blockly.hideChaff();window.parent.BlocklyPanel_callToggleWarning()};Blockly.WarningIndicator.prototype.onclickWarningNavPrevious=function(){Blockly.hideChaff();this.workspace_.getWarningHandler().previousWarning()};
Blockly.WarningIndicator.prototype.onclickWarningNavNext=function(){Blockly.hideChaff();this.workspace_.getWarningHandler().nextWarning()};Blockly.WarningIndicator.prototype.onclickErrorNavPrevious=function(){Blockly.hideChaff();this.workspace_.getWarningHandler().previousError()};Blockly.WarningIndicator.prototype.onclickErrorNavNext=function(){Blockly.hideChaff();this.workspace_.getWarningHandler().nextError()};Blockly.WarningIndicator.prototype.position=function(a,d){this.position_(a)};
Blockly.WarningIndicator.prototype.getBoundingRectangle=function(){return new Blockly.utils.Rect(this.left_,this.left_+120,this.top_,this.top_+this.INDICATOR_HEIGHT_)};/*

 @fileoverview Visual blocks editor for MIT App Inventor
 Instrumentation extensions to Blockly Workspace

 @author ewpatton@mit.edu (Evan W. Patton)
*/
AI.Blockly.Workspace={};Blockly.Workspace.prototype.arranged_type_=null;Blockly.Workspace.prototype.arranged_latest_position_=null;Blockly.Workspace.prototype.arranged_position_=null;Blockly.Workspace.prototype.resetArrangements=function(){this.arranged_position_=this.arranged_type_=null};Blockly.Workspace.prototype.warningIndicator_=null;Blockly.Workspace.prototype.getWarningIndicator=function(){return this.warningIndicator_};
Blockly.Workspace.prototype.setWarningIndicator=function(a){this.warningIndicator_=a};Blockly.Workspace.prototype.addTopBlock=function(a){if(a.isWrapped)return a;var d=function(f){f.workspace==Blockly.common.getMainWorkspace()&&Blockly.common.getMainWorkspace().resetArrangements();a.call(this,f);this.warningIndicator&&this.warningIndicator.updateWarningAndErrorCount()};d.isWrapped=!0;return d}(Blockly.Workspace.prototype.addTopBlock);
Blockly.Workspace.prototype.removeTopBlock=function(a){if(a.isWrapped)return a;var d=function(f){f.workspace==Blockly.common.getMainWorkspace()&&Blockly.common.getMainWorkspace().resetArrangements();a.call(this,f)};d.isWrapped=!0;return d}(Blockly.Workspace.prototype.removeTopBlock);Blockly.Workspace.prototype.dispose=function(a){if(a.isWrapped)return a;var d=function(){a.call(this);this.warningIndicator_&&(this.warningIndicator_.dispose(),this.warningIndicator_=null)};d.isWrapped=!0;return d}(Blockly.Workspace.prototype.dispose);/*

 @fileoverview Visual blocks editor for MIT App Inventor
 App Inventor extensions to Blockly's SVG Workspace

 @author ewpatton@mit.edu (Evan W. Patton)
*/
AI.Blockly.WorkspaceSvg={};Blockly.WorkspaceSvg.prototype.drawer_=null;Blockly.WorkspaceSvg.prototype.backpack_=null;Blockly.WorkspaceSvg.prototype.componentDb_=null;Blockly.WorkspaceSvg.prototype.typeBlock_=null;Blockly.WorkspaceSvg.prototype.flydown_=null;Blockly.WorkspaceSvg.prototype.blocksNeedingRendering=null;Blockly.WorkspaceSvg.prototype.latestClick={x:0,y:0};Blockly.WorkspaceSvg.prototype.chromeHidden=!1;
Blockly.WorkspaceSvg.prototype.onMouseDown_=function(a){if(a.isWrapped)return a;var d=function(f){var h=Blockly.common.getMainWorkspace().getMetrics(),l=Blockly.utils.browserEvents.mouseToSvg(f,this.getParentSvg(),this.getInverseScreenCTM());l.x=(l.x+h.viewLeft)/this.scale;l.y=(l.y+h.viewTop)/this.scale;this.latestClick=l;return a.call(this,f)};d.isWrapper=!0;return d}(Blockly.WorkspaceSvg.prototype.onMouseDown_);
Blockly.WorkspaceSvg.prototype.createDom=function(a){if(a.isWrapped)return a;var d=function(){var f=this,h=a.apply(this,Array.prototype.slice.call(arguments));h.addEventListener("dragenter",function(l){if(0<=l.dataTransfer.types.indexOf("Files")||0<=l.dataTransfer.types.indexOf("text/uri-list"))f.svgBackground_.style.fill="rgba(0, 255, 0, 0.3)",l.dataTransfer.dropEffect="copy",l.preventDefault()},!0);h.addEventListener("dragover",function(l){if(0<=l.dataTransfer.types.indexOf("Files")||0<=l.dataTransfer.types.indexOf("text/uri-list"))f.svgBackground_.style.fill=
"rgba(0, 255, 0, 0.3)",l.dataTransfer.dropEffect="copy",l.preventDefault()},!0);h.addEventListener("dragleave",function(l){f.setGridSettings(f.options.gridOptions.enabled,f.getGrid().shouldSnap())},!0);h.addEventListener("dragexit",function(l){f.setGridSettings(f.options.gridOptions.enabled,f.getGrid().shouldSnap())},!0);h.addEventListener("drop",function(l){f.setGridSettings(f.options.gridOptions.enabled,f.getGrid().shouldSnap());if(0<=l.dataTransfer.types.indexOf("Files")){if("image/png"===l.dataTransfer.files.item(0).type){l.preventDefault();
var m=Blockly.common.getMainWorkspace().getMetrics(),p=Blockly.utils.browserEvents.mouseToSvg(l,f.getParentSvg(),f.getInverseScreenCTM());p.x=(p.x+m.viewLeft)/f.scale;p.y=(p.y+m.viewTop)/f.scale;Blockly.importPngAsBlock(f,p,l.dataTransfer.files.item(0))}}else if(0<=l.dataTransfer.types.indexOf("text/uri-list")&&(m=l.dataTransfer.getData("text/uri-list"),m.match(/\.png$/))){l.preventDefault();var q=new XMLHttpRequest;q.onreadystatechange=function(){if(4===q.readyState&&200===q.status){var u=Blockly.common.getMainWorkspace().getMetrics(),
y=Blockly.utils.browserEvents.mouseToSvg(l,f.getParentSvg(),f.getInverseScreenCTM());y.x=(y.x+u.viewLeft)/f.scale;y.y=(y.y+u.viewTop)/f.scale;Blockly.importPngAsBlock(f,y,q.response)}};q.responseType="blob";q.open("GET",m,!0);q.send()}});return h};d.isWrapper=!0;return d}(Blockly.WorkspaceSvg.prototype.createDom);Blockly.WorkspaceSvg.prototype.dispose=function(a){if(a.isWrapped)return a;var d=function(){a.call(this);if(this.backpack_)return this.backpack_.dispose(),null};d.isWrapped=!0;return d}(Blockly.WorkspaceSvg.prototype.dispose);
Blockly.WorkspaceSvg.prototype.addWarningHandler=function(){this.warningHandler_||(this.warningHandler_=new Blockly.WarningHandler(this))};Blockly.WorkspaceSvg.prototype.addWarningIndicator=function(){if(!this.options.readOnly&&null==this.warningIndicator_){this.warningHandler_||(this.warningHandler_=new Blockly.WarningHandler(this));this.warningIndicator_=new Blockly.WarningIndicator(this);var a=this.warningIndicator_.createDom();this.svgGroup_.appendChild(a);this.warningIndicator_.init()}};
Blockly.WorkspaceSvg.prototype.addBackpack=function(){AI.Blockly.Backpack&&!this.options.readOnly&&(this.backpack_=new AI.Blockly.Backpack(this,{scrollbars:!0,media:"./assets/",disabledPatternId:this.options.disabledPatternId,renderer:"geras2_renderer"}),this.backpack_.init())};Blockly.WorkspaceSvg.prototype.setScale=function(a){if(a.isWrapped)return a;var d=function(f){a.call(this,f);this.backpack_&&this.backpack_.flyout_.reflow()};d.isWrapped=!0;return d}(Blockly.WorkspaceSvg.prototype.setScale);
Blockly.WorkspaceSvg.prototype.hideDrawer=function(){this.drawer_&&this.drawer_.hide();return this};Blockly.WorkspaceSvg.prototype.showBuiltin=function(a){this.drawer_&&this.drawer_.showBuiltin(a);return this};Blockly.WorkspaceSvg.prototype.showGeneric=function(a){this.drawer_&&this.drawer_.showGeneric(a);return this};Blockly.WorkspaceSvg.prototype.showComponent=function(a){this.drawer_&&this.drawer_.showComponent(a);return this};
Blockly.WorkspaceSvg.prototype.isDrawerShowing=function(){return this.drawer_?this.drawer_.isShowing():!1};Blockly.WorkspaceSvg.prototype.getComponentDatabase=function(){return this.targetWorkspace?this.targetWorkspace.getComponentDatabase():this.componentDb_};Blockly.WorkspaceSvg.prototype.getProcedureDatabase=function(){return this.targetWorkspace?this.targetWorkspace.getProcedureDatabase():this.procedureDb_};
Blockly.WorkspaceSvg.prototype.addScreen=function(a){if(this.targetWorkspace)return this.targetWorkspace.addScreen(a);-1==this.screenList_.indexOf(a)&&(this.screenList_.push(a),this.typeBlock_.needsReload.screens=!0)};Blockly.WorkspaceSvg.prototype.removeScreen=function(a){if(this.targetWorkspace)return this.targetWorkspace.removeScreen(a);a=this.screenList_.indexOf(a);-1!=a&&(this.screenList_.splice(a,1),this.typeBlock_.needsReload.screens=!0)};
Blockly.WorkspaceSvg.prototype.getScreenList=function(){return this.targetWorkspace?this.targetWorkspace.getScreenList():this.screenList_};Blockly.WorkspaceSvg.prototype.addAsset=function(a){if(this.targetWorkspace)return this.targetWorkspace.addAsset(a);this.assetList_.includes(a)||(this.assetList_.push(a),this.typeBlock_.needsReload.assets=!0)};
Blockly.WorkspaceSvg.prototype.removeAsset=function(a){if(this.targetWorkspace)return this.targetWorkspace.removeAsset(a);a=this.assetList_.indexOf(a);-1!=a&&(this.assetList_.splice(a,1),this.typeBlock_.needsReload.assets=!0)};Blockly.WorkspaceSvg.prototype.getAssetList=function(){return this.targetWorkspace?this.targetWorkspace.getAssetList():this.assetList_};
Blockly.WorkspaceSvg.prototype.getProviderModelList=function(){if(this.targetWorkspace)return this.targetWorkspace.getProviderModelList();if(!top.chatproxyinfo)return[];var a=top.chatproxyinfo.model;return a?Object.keys(a):[]};Blockly.WorkspaceSvg.prototype.getProviderList=function(){if(this.targetWorkspace)return this.targetWorkspace.getProviderList();if(!top.chatproxyinfo)return[];var a=top.chatproxyinfo.provider;return a?a:[]};
Blockly.WorkspaceSvg.prototype.addComponent=function(a,d,f){this.componentDb_.addInstance(a,d,f)&&(this.typeBlock_.needsReload.components=!0);return this};
Blockly.WorkspaceSvg.prototype.removeComponent=function(a){var d=this.componentDb_.getInstance(a);this.drawer_&&d.name===this.drawer_.lastComponent&&this.drawer_.hide();if(!this.componentDb_.removeInstance(a))return this;this.typeBlock_.needsReload.components=!0;a=this.getAllBlocks();for(var f=0,h;h=a[f];++f)"Component"==h.category&&h.getFieldValue("COMPONENT_SELECTOR")==d.name&&h.dispose(!0);Blockly.hideChaff();return this};
Blockly.WorkspaceSvg.prototype.renameComponent=function(a,d,f){if(!this.componentDb_.renameInstance(a,d,f))return console.log("Renaming: No such component instance "+d+"; aborting."),this;this.typeBlock_.needsReload.components=!0;a=this.getAllBlocks();for(var h=0,l;l=a[h];++h)"Component"==l.category&&l.rename(d,f)&&this.blocksNeedingRendering.push(l);Blockly.hideChaff();return this};
Blockly.WorkspaceSvg.prototype.populateComponentTypes=function(a,d){this.componentDb_.populateTypes(JSON.parse(a));this.componentDb_.populateTranslations(d)};
Blockly.WorkspaceSvg.prototype.loadBlocksFile=function(a,d){if(0!=d.length){try{Blockly.Events.disable();this.isClearing=this.isLoading=!0;if(Blockly.Versioning.upgrade(a,d,this)){var f=this;setTimeout(function(){f.fireChangeListener(new AI.Events.ForceSave(f))})}this.getAllBlocks().forEach(function(h){if(("lexical_variable_set"==h.type||"lexical_variable_get"==h.type)&&h.eventparam){var l=h.eventparam;h.fieldVar_.setValue(l);h.eventparam=l;h.workspace.requestErrorChecking(h)}})}finally{this.isClearing=
this.isLoading=!1,Blockly.Events.enable()}null!=this.getCanvas()&&this.render()}return this};Blockly.WorkspaceSvg.prototype.verifyAllBlocks=function(){for(var a=this.getAllBlocks(),d=0,f;f=a[d];++d)"Component"==f.category&&f.verify();return this};Blockly.WorkspaceSvg.prototype.saveBlocksFile=function(a){return Blockly.SaveFile.get(a,this)};Blockly.WorkspaceSvg.prototype.getFormYail=function(a,d,f){return AI.Yail.getFormYail(a,d,!!f,this)};
Blockly.WorkspaceSvg.prototype.getWarningHandler=function(){this.warningHandler_||(this.warningHandler_=new Blockly.WarningHandler(this));return this.warningHandler_};Blockly.WorkspaceSvg.prototype.getWarningIndicator=function(){return this.warningIndicator_};Blockly.WorkspaceSvg.prototype.exportBlocksImageToUri=function(a){AI.Blockly.ExportBlocksImage.getUri(a,this)};Blockly.WorkspaceSvg.prototype.getFlydown=function(){return this.flydown_};
Blockly.WorkspaceSvg.prototype.hideChaff=function(a){return function(d){this.flydown_&&this.flydown_.hide();this.typeBlock_&&this.typeBlock_.hide();d||this.backpack_&&this.backpack_.hide();this.scrollbar&&this.scrollbar.setContainerVisible(!0);a.apply(this,arguments)}}(Blockly.WorkspaceSvg.prototype.hideChaff);Blockly.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():this.targetWorkspace?this.targetWorkspace.markFocused():Blockly.common.setMainWorkspace(this)};
Blockly.WorkspaceSvg.prototype.buildComponentMap=function(a,d,f,h){a={components:{},globals:[]};d=this.getTopBlocks(!0);for(f=0;h=d[f];++f)if("procedures_defnoreturn"==h.type||"procedures_defreturn"==h.type||"global_declaration"==h.type)a.globals.push(h);else if("Component"==h.category&&"event"==h.type)if(h.isGeneric)a.globals.push(h);else{var l=h.instanceName;a.components[l]||(a.components[l]=[]);a.components[l].push(h)}return a};
Blockly.WorkspaceSvg.prototype.resize=function(a){return function(){a.call(this);this.warningIndicator_&&this.warningIndicator_.position_&&this.warningIndicator_.position_();return this}}(Blockly.WorkspaceSvg.prototype.resize);Blockly.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan?this.trashcan.getClientRect():null;this.deleteAreaToolbox_=this.isMutator?this.flyout_?this.flyout_.getClientRect():this.toolbox_?this.toolbox_.getClientRect():null:null};
Blockly.WorkspaceSvg.prototype.getBackpack=function(){return this.backpack_};Blockly.WorkspaceSvg.prototype.hasBackpack=function(){return null!=this.backpack_};
Blockly.WorkspaceSvg.prototype.onMouseWheel_=function(a){this.cancelCurrentGesture();if(3==a.eventPhase){if(1==a.ctrlKey){if(0==a.deltaY){a.preventDefault();return}var d=0<a.deltaY?-1:1,f=Blockly.utils.browserEvents.mouseToSvg(a,this.getParentSvg(),this.getInverseScreenCTM());this.zoom(f.x,f.y,d)}else this.scrollX-=a.deltaX,this.scrollY-=a.deltaY,this.grid&&this.grid.update(this.scale),this.scrollbar?this.scrollbar.resize():this.translate(this.scrollX,this.scrollY);a.preventDefault()}};
Blockly.WorkspaceSvg.prototype.setGridSettings=function(a,d){this.options.gridOptions.enabled=a;this.getGrid().setSnapToGrid(a&&d);this.svgBackground_&&(this.options.gridOptions.enabled?this.svgBackground_.setAttribute("style","fill: url(#"+this.options.gridPattern.id+");"):(a=Blockly.common.getMainWorkspace().getTheme().componentStyles.workspaceBackgroundColour??"white",this.svgBackground_.setAttribute("style",`fill: ${a};`)))};
Blockly.WorkspaceSvg.prototype.buildComponentMap=function(a,d,f,h){a={components:{},globals:[]};d=this.getTopBlocks(!0);for(f=0;h=d[f];f++)if(h.category)if("procedures_defnoreturn"==h.type||"procedures_defreturn"==h.type||"global_declaration"==h.type)a.globals.push(h);else if("Component"==h.category){var l=h.instanceName;"event"==h.blockType&&(h.isGeneric?a.globals.push(h):(a.components[l]||(a.components[l]=[]),a.components[l].push(h)))}return a};
Blockly.WorkspaceSvg.prototype.getTopWorkspace=function(){for(var a=this;a.targetWorkspace;)a=a.targetWorkspace;return a};
Blockly.WorkspaceSvg.prototype.fireChangeListener=function(a){Blockly.Workspace.prototype.fireChangeListener.call(this,a);if(a instanceof Blockly.Events.BlockMove){var d=Blockly.Workspace.getById(a.workspaceId);a.group!==d.arrange_blocks_event_group_&&(d.arranged_latest_position_=null,d.arranged_position_=null,d.arranged_type_=null);d=this.blockDB.get(a.oldParentId);a=this.blockDB.get(a.blockId);d&&this.requestErrorChecking(d);a&&this.requestErrorChecking(a)}};
Blockly.WorkspaceSvg.prototype.requestRender=function(a){this.pendingRender||(this.needsRendering=[],this.pendingBlockIds={},this.pendingRenderFunc=function(){try{this.render(0===this.needsRendering.length?void 0:this.needsRendering)}finally{this.pendingRender=null}}.bind(this),this.pendingRender="none"===this.svgGroup_.parentElement.parentElement.parentElement.style.display?!0:setTimeout(this.pendingRenderFunc,0));if(a){for(;a.getParent();)a=a.getParent();a.id in this.pendingBlockIds||(this.pendingBlockIds[a.id]=
!0,this.needsRendering.push(a))}};
Blockly.WorkspaceSvg.prototype.requestErrorChecking=function(a){if(this.warningHandler_&&!this.checkAllBlocks)if(this.pendingErrorCheck||(this.needsErrorCheck=[],this.pendingErrorBlockIds={},this.checkAllBlocks=!!a,this.pendingErrorCheck=setTimeout(function(){try{var f=this.getWarningHandler();f&&module$contents$goog$array_forEach(this.checkAllBlocks?this.getAllBlocks():this.needsErrorCheck,function(h){f.checkErrors(h)})}finally{this.pendingErrorCheck=null,this.checkAllBlocks=!1,this.pendingErrorBlockIds=
this.needsErrorCheck=null}}.bind(this))),!a||a.id in this.pendingErrorBlockIds)a||(this.checkAllBlocks=!0);else{for(;a.getParent();)a=a.getParent();for(var d=[a];0<d.length;)a=d.shift(),a.id in this.pendingErrorBlockIds||(this.pendingErrorBlockIds[a.id]=!0,this.needsErrorCheck.push(a)),Array.prototype.push.apply(d,a.getChildren())}};Blockly.WorkspaceSvg.prototype.refreshBackpack=function(){this.backpack_&&this.backpack_.resize()};/*

 @fileoverview Visual blocks editor for MIT App Inventor
 Add additional functions to Blockly namespace

 @author ewpatton@mit.edu (Evan W. Patton)
*/
AI.Blockly.BLKS_HORIZONTAL=0;AI.Blockly.BLKS_VERTICAL=1;AI.Blockly.BLKS_CATEGORY=2;Blockly.INDENTED_VALUE=6;Blockly.pathToBlockly="./";Blockly.hideChaff=function(a){if(a.isWrapped)return a;var d=function(){var f=Array.prototype.slice.call(arguments);a.apply(this,f);Blockly.WorkspaceSvg.prototype.hideChaff.call(Blockly.common.getMainWorkspace(),f)};d.isWrapped=!0;return d}(Blockly.hideChaff);
Blockly.confirmDeletion=function(a){var d=Blockly.common.getMainWorkspace().getAllBlocks().length;null!=Blockly.common.getSelected()&&(d=Blockly.common.getSelected().getDescendants().length,Blockly.common.getSelected().nextConnection&&Blockly.common.getSelected().nextConnection.targetConnection&&(d-=Blockly.common.getSelected().nextConnection.targetBlock().getDescendants().length));if(3<=d)if(Blockly.Util&&Blockly.Util.Dialog){d=Blockly.Msg.WARNING_DELETE_X_BLOCKS.replace("%1",String(d));var f=top.BlocklyPanel_getOdeMessage("cancelButton"),
h=top.BlocklyPanel_getOdeMessage("deleteButton"),l=new Blockly.Util.Dialog(Blockly.Msg.CONFIRM_DELETE,d,h,!0,f,0,function(m){l.hide();m==h?(Blockly.common.getMainWorkspace().getAudioManager().play("delete"),a(!0)):a(!1)})}else(d=confirm(Blockly.Msg.WARNING_DELETE_X_BLOCKS.replace("%1",String(d))))&&Blockly.common.getMainWorkspace().getAudioManager().play("delete"),a(d);else Blockly.common.getMainWorkspace().getAudioManager().play("delete"),a(!0)};AI.Blockly.BackpackFlyout=class extends Blockly.VerticalFlyout{constructor(a){super(a);this.toolboxPosition_=a.RTL?Blockly.utils.toolbox.Position.LEFT:Blockly.utils.toolbox.Position.RIGHT}};AI.Blockly.BackpackFlyout.prototype.createDom=function(a){Blockly.Flyout.prototype.createDom.call(this,a);this.svgBackground_.setAttribute("class","blocklybackpackFlyoutBackground");return this.svgGroup_};
AI.Blockly.BackpackFlyout.prototype.dispose=function(){this.hide();Blockly.browserEvents.unbind(this.eventWrappers_);this.eventWrappers_.length=0;this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null);this.workspace_=null;this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.targetWorkspace=this.svgBackground_=null};AI.Blockly.BackpackFlyout.prototype.isBlockCreatable_=function(a){return!0};
AI.Blockly.BackpackFlyout.terminateDrag_=function(){AI.Blockly.BackpackFlyout.onMouseUpWrapper_&&(Blockly.browserEvents.unbind(AI.Blockly.BackpackFlyout.onMouseUpWrapper_),AI.Blockly.BackpackFlyout.onMouseUpWrapper_=null);AI.Blockly.BackpackFlyout.onMouseMoveWrapper_&&(Blockly.browserEvents.unbind(AI.Blockly.BackpackFlyout.onMouseMoveWrapper_),AI.Blockly.BackpackFlyout.onMouseMoveWrapper_=null);AI.Blockly.BackpackFlyout.startDownEvent_=null;AI.Blockly.BackpackFlyout.startBlock_=null;AI.Blockly.BackpackFlyout.startFlyout_=
null};/*

 @fileoverview Visual blocks editor for App Inventor
 Methods to handle warnings in the block editor.

 @author jis@mit.edu (Jeffrey I. Schiller)
*/
AI.Blockly.Util={};void 0===Blockly.Util&&(Blockly.Util={});Blockly.Util.Dialog=function(a,d,f,h,l,m,p){this.title=a;this.content=d;this.size=m;this.buttonName=f;this.destructive=h;this.cancelButtonName=l;this.callback=p;this.buttonName&&this.display()};
Blockly.Util.Dialog.prototype={display:function(){this._dialog=top.BlocklyPanel_createDialog(this.title,this.content,this.buttonName,this.destructive,this.cancelButtonName,this.size,this.callback)},hide:function(){this._dialog&&(top.BlocklyPanel_hideDialog(this._dialog),this._dialog=null)},setContent:function(a){this._dialog&&top.BlocklyPanel_setDialogContent(this._dialog,a)}};
Blockly.convertCoordinates=function(a,d,f,h){h&&(d-=window.scrollX||window.pageXOffset,f-=window.scrollY||window.pageYOffset);var l=a.getParentSvg();a=l.createSVGPoint();a.x=d;a.y=f;d=l.getScreenCTM();h&&(d=d.inverse());d=a.matrixTransform(d);h||(d.x+=window.scrollX||window.pageXOffset,d.y+=window.scrollY||window.pageYOffset);return d};Blockly.getAbsoluteXY_=function(a,d){a=d.getSvgXY(a);return Blockly.convertCoordinates(d,a.x,a.y,!1)};
Blockly.getRelativeXY_=function(a){var d={x:0,y:0},f=a.getAttribute("x");f&&(d.x=parseInt(f,10));if(f=a.getAttribute("y"))d.y=parseInt(f,10);if(a=(a=a.getAttribute("transform"))&&a.match(/translate\(\s*([-\d.]+)([ ,]\s*([-\d.]+)\s*\))?/))d.x+=parseInt(a[1],10),a[3]&&(d.y+=parseInt(a[3],10));return d};AI.Blockly.Backpack=class extends Blockly.DragTarget{BPACK_CLOSED_="static/media/backpack-closed.png";BPACK_EMPTY_="static/media/backpack-empty.png";BPACK_FULL_="static/media/backpack-full.png";WIDTH_=80;HEIGHT_=75;MARGIN_TOP_=10;MARGIN_SIDE_=20;isLarge=!1;isAdded=!1;svgGroup_=null;svgBody_=null;openTask_=0;left_=0;top_=0;MARGIN_HORIZONTAL_=20;MARGIN_VERTICAL_=20;id="aibackpack";constructor(a,d){super();this.id="backpack";d instanceof Blockly.Options?this.options=d:(d=d||{},this.options=new Blockly.Options(d),
this.options.disabledPatternId=d.disabledPatternId);this.workspace_=a;this.flyout_=new AI.Blockly.BackpackFlyout(this.options);this.noAsync_=!1;this.registerContextMenuItems()}init(){this.initialized_?console.trace("Extra call to Backpack.init()"):(this.initialized_=!0,this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[Blockly.ComponentManager.Capability.AUTOHIDEABLE,Blockly.ComponentManager.Capability.DRAG_TARGET,Blockly.ComponentManager.Capability.POSITIONABLE]}),
this.createDom(this.workspace_),Blockly.browserEvents.bind(this.svgGroup_,"mousedown",this,this.openBackpack),Blockly.browserEvents.bind(this.svgGroup_,"contextmenu",this,this.openBackpackMenu),this.initialized_=!0,this.workspace_.resize())}getFlyout(){return this.flyout_}registerContextMenuItems(){Blockly.ContextMenuRegistry.registry.getItem("remove_from_backpack")||Blockly.ContextMenuRegistry.registry.register({displayText:Blockly.Msg.REMOVE_FROM_BACKPACK,preconditionFn:function(a){a=a.block.workspace;
if(a.isFlyout&&a.targetWorkspace){const d=a.targetWorkspace.getComponentManager().getComponent("backpack");if(d&&d.getFlyout().getWorkspace().id===a.id)return"enabled"}return"hidden"},callback:function(a){a.block.workspace.targetWorkspace.getComponentManager().getComponent("backpack").removeFromBackpack([a.block.id])},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:"remove_from_backpack",weight:6})}getClientRect(){if(!this.svgGroup_)return null;const a=this.svgGroup_.getBoundingClientRect();
return new Blockly.utils.Rect(a.top+this.MARGIN_TOP_,a.bottom+this.MARGIN_TOP_,a.left-this.MARGIN_SIDE_,a.right-this.MARGIN_SIDE_)}getBoundingRectangle(){return new Blockly.utils.Rect(this.top_,this.top_+this.HEIGHT_,this.left_,this.left_+this.WIDTH_)}position(a,d){if(this.initialized_){var f=this.workspace_.scrollbar&&this.workspace_.scrollbar.canScrollHorizontally(),h=this.workspace_.scrollbar&&this.workspace_.scrollbar.canScrollVertically();a.toolboxMetrics.position===Blockly.TOOLBOX_AT_LEFT||
this.workspace_.horizontalLayout&&!this.workspace_.RTL?(this.left_=a.absoluteMetrics.left+a.viewMetrics.width-this.WIDTH_-this.MARGIN_HORIZONTAL_,f&&!this.workspace_.RTL&&(this.left_-=Blockly.Scrollbar.scrollbarThickness)):(this.left_=this.MARGIN_HORIZONTAL_,f&&this.workspace_.RTL&&(this.left_+=Blockly.Scrollbar.scrollbarThickness));a.toolboxMetrics.position===Blockly.TOOLBOX_AT_BOTTOM?(this.top_=a.absoluteMetrics.top+a.viewMetrics.height-this.HEIGHT_-this.MARGIN_VERTICAL_,h&&(this.top_-=Blockly.Scrollbar.scrollbarThickness)):
this.top_=a.absoluteMetrics.top+this.MARGIN_VERTICAL_;a=this.getBoundingRectangle();d=Blockly.uiPosition.bumpPositionRect(a,this.MARGIN_VERTICAL_,Blockly.uiPosition.bumpDirection.DOWN,d);this.top_=d.top;this.left_=d.left;this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}onDragEnter(a){a instanceof Blockly.BlockSvg&&this.setOpen_(!0)}onDragExit(){this.setOpen_(!1)}onDrop(a){try{a instanceof Blockly.BlockSvg&&this.addToBackpack(a,!0)}finally{this.setOpen_(!1)}}shouldPreventMove(a){console.trace("Drag element is",
a);return a instanceof Blockly.BlockSvg}createDom(a){a=a||Blockly.common.getMainWorkspace();let d=this.flyout_.createDom(Blockly.utils.Svg.SVG);this.flyout_.svgBackground_.setAttribute("class","blocklybackpackFlyoutBackground");a.getParentSvg().parentNode.appendChild(d);this.flyout_.init(a);this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{},null);this.svgBody_=Blockly.utils.dom.createSvgElement("image",{width:this.WIDTH_,height:this.HEIGHT_},this.svgGroup_);this.svgBody_.setAttributeNS("http://www.w3.org/1999/xlink",
"xlink:href",Blockly.pathToBlockly+this.BPACK_CLOSED_);this.svgBody_.setAttribute("class","blocklybackpackImage");Blockly.utils.dom.insertAfter(this.svgGroup_,this.workspace_.getBubbleCanvas())}autoHide(){this.flyout_.hide()}dispose(){this.svgGroup_&&(this.svgGroup_.remove(),this.svgGroup_=null);this.flyout_.dispose();this.flyout_=null;clearTimeout(this.openTask_)}pasteBackpack(){this.getContents().then(a=>{if(void 0!==a&&0!==a.length){var d=null;try{Blockly.Events.setGroup(!0);for(let f=0;f<a.length;f++){const h=
Blockly.utils.xml.textToDom(a[f]).childNodes[0],l=[];this.checkValidBlockTypes(h,l);let m=!0;for(let p=0;p<l.length;p++){const q=l[p];if(!Blockly.Blocks[q]&&!this.workspace_.getComponentDatabase().hasType(q)){m=!1;break}}if(m){const p=this.workspace_.paste(h);p&&(d=p)}else window.alert('Sorry. You cannot paste a block of type "'+type+"\" because it doesn't exist in this workspace.")}}finally{Blockly.Events.setGroup(!1)}d&&d.select()}})}checkValidBlockTypes(a,d){"block"===a.nodeName&&d.push(a.getAttribute("type"));
a=a.childNodes;for(let f=0;f<a.length;f++)this.checkValidBlockTypes(a[f],d)}addBlock(a){this.addToBackpack(a,!1);this.pendingSave_||(this.pendingSave_=!0,setTimeout(()=>{this.pendingSave_=!1;this.setContents(AI.Blockly.Backpack.contents,!0)},10))}addToBackpack(a,d){const f=a.isCollapsed();a.setCollapsed(!1);const h=Blockly.Xml.blockToDom(a);Blockly.Xml.deleteNext(h);const l=a.getRelativeToSurfaceXY();h.setAttribute("x",this.workspace_.RTL?-l.x:l.x);h.setAttribute("y",l.y);a.setCollapsed(f);this.getContents().then(m=>
{m||=[];m.push("<xml>"+Blockly.Xml.domToText(h)+"</xml>");this.setContents(m,d);this.grow();Blockly.common.getMainWorkspace().getAudioManager().play("backpack");this.flyout_.isVisible()&&(this.isAdded=!0,this.openBackpack(),this.isAdded=!1)})}addAllToBackpack(){const a=this.workspace_.getTopBlocks(!1);this.getContents().then(()=>{let d=this.noAsync_;try{this.noAsync_=!0;for(let f=0;f<a.length;f++)this.addToBackpack(a[f],!1)}finally{this.noAsync_=d}this.setContents(AI.Blockly.Backpack.contents,!0)})}removeFromBackpack(a){this.getContents().then(d=>
{if(d&&d.length){let f=this.flyout_.workspace_.getTopBlocks(!0).map(function(h){return h.id}).indexOf(a[0]);0<=f&&d.splice(f,1);this.setContents(d,!0);0===d.length&&this.shrink();this.flyout_.isVisible()&&(this.isAdded=!0,this.openBackpack(),this.isAdded=!1)}})}getContents(){return AI.Blockly.Backpack.backPackId&&!this.noAsync_?new Promise((a,d)=>{top.BlocklyPanel_getSharedBackpack(AI.Blockly.Backpack.backPackId,f=>{AI.Blockly.Backpack.contents=f?JSON.parse(f):[];this.resize();a(AI.Blockly.Backpack.contents)})}):
Promise.resolve(AI.Blockly.Backpack.contents)}setContents(a,d){AI.Blockly.Backpack.contents=a;d&&(AI.Blockly.Backpack.backPackId?top.BlocklyPanel_storeSharedBackpack(AI.Blockly.Backpack.backPackId,JSON.stringify(a)):top.BlocklyPanel_storeBackpack(JSON.stringify(a)))}resize(){0<AI.Blockly.Backpack.contents.length?this.grow():this.shrink()}hide(){this.flyout_.hide()}close(){this.setOpen_(!1)}clear(){this.confirmClear()&&(this.setContents([],!0),this.shrink())}confirmClear(){return confirm(Blockly.Msg.BACKPACK_CONFIRM_EMPTY)}getCount(){return AI.Blockly.Backpack.contents?
AI.Blockly.Backpack.contents.length:0}grow(){this.isLarge||(this.svgBody_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.pathToBlockly+this.BPACK_FULL_),this.svgBody_.setAttribute("transform","scale(1.2)"),this.MARGIN_SIDE_/=1.2,this.HEIGHT_*=1.2,this.WIDTH_*=1.2,this.isLarge=!0)}shrink(){this.isLarge&&(this.svgBody_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.pathToBlockly+this.BPACK_CLOSED_),this.svgBody_.setAttribute("transform","scale(1)"),this.HEIGHT_/=
1.2,this.WIDTH_/=1.2,this.MARGIN_SIDE_*=1.2,this.isLarge=!1)}animateBackpack_(){let a=this.svgBody_;this.isOpen?a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.pathToBlockly+this.BPACK_EMPTY_):this.isLarge?a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.pathToBlockly+this.BPACK_FULL_):a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.pathToBlockly+this.BPACK_CLOSED_)}setOpen_(a){this.isOpen!=a&&(goog.Timer.clear(this.openTask_),this.isOpen=
a,this.animateBackpack_())}containsBlock(a){return!1}};AI.Blockly.Backpack.contents=[];AI.Blockly.Backpack.backPackId=!1;
AI.Blockly.Backpack.prototype.openBackpackMenu=function(a){var d=[],f={enabled:!0};f.text=Blockly.Msg.SHOW_BACKPACK_DOCUMENTATION;f.callback=function(){var h=new Blockly.Util.Dialog(Blockly.Msg.BACKPACK_DOC_TITLE,Blockly.Msg.BACKPACK_DOCUMENTATION,Blockly.Msg.REPL_OK,!1,null,0,function(){h.hide()})};d.push(f);f={enabled:!0};f.text=Blockly.Msg.BACKPACK_EMPTY;f.callback=function(){Blockly.common.getMainWorkspace().hasBackpack()&&Blockly.common.getMainWorkspace().getBackpack().clear()};d.push(f);Blockly.ContextMenu.show(a,
d,this.workspace_.RTL)};AI.Blockly.Backpack.prototype.openBackpack=function(a){if(a&&(a.stopPropagation(),2===a.button)){this.flyout_.hide();this.openBackpackMenu(a);return}!this.isAdded&&this.flyout_.isVisible()?this.flyout_.hide():this.getContents().then(d=>{const f=d.length,h=[];for(let l=0;l<f;l++)h[l]=Blockly.Versioning.upgradeComponentMethods(Blockly.utils.xml.textToDom(d[l]).firstChild);Blockly.hideChaff();this.flyout_.show(h)})};
AI.Blockly.Backpack.prototype.onMouseUp=function(a,d){a=Blockly.common.getSelected().getRelativeToSurfaceXY();d=goog.math.Coordinate.difference(d,a);Blockly.common.getSelected().moveBy(d.x,d.y);Blockly.common.getMainWorkspace().render()};AI.Blockly.Backpack.prototype.onMouseMove=function(a){this.svgGroup_&&(a=this.mouseIsOver(a),this.isOpen!=a&&this.setOpen_(a))};
AI.Blockly.Backpack.prototype.mouseIsOver=function(a){var d=Blockly.convertCoordinates(Blockly.common.getMainWorkspace(),a.clientX,a.clientY,!0);a=d.x;d=d.y;return a>this.left_&&a<this.left_+this.WIDTH_&&d>this.top_&&d<this.top_+this.HEIGHT_};/*

 @fileoverview Visual blocks editor for MIT App Inventor
 Add additional "class methods" to Blockly.Block

 @author ewpatton@mit.edu (Evan W. Patton)
*/
AI.Blockly.Block={};Blockly.Block.mutationToDom=function(){var a=details.mutationToDomFunc?details.mutationToDomFunc():document.createElement("mutation");a.setAttribute("is_statement",this.isStatement||!1);return a};
Blockly.Block.prototype.interpolateMsg=function(a,d){function f(K){K instanceof Blockly.Field?this.appendField(K):(goog.asserts.assert(Array.isArray(K)),this.appendField(K[1],K[0]))}goog.asserts.assertString(a);var h=arguments[arguments.length-1];goog.asserts.assert(h===Blockly.inputs.Align.LEFT||h===Blockly.inputs.Align.CENTRE||h===Blockly.inputs.Align.RIGHT,'Illegal final argument "%d" is not an alignment.',h);--arguments.length;for(var l=a.split(this.interpolateMsg.SPLIT_REGEX_),m=[],p=0;p<l.length;p+=
2){var q=goog.string.trim(l[p]),u=void 0;q&&m.push(new Blockly.FieldLabel(q));if((q=l[p+1])&&"%"==q.charAt(0)){var y=parseInt(q.substring(1),10),C=arguments[y];goog.asserts.assertArray(C,'Message symbol "%s" is out of range.',q);goog.asserts.assertArray(C,'Argument "%s" is not a tuple.',q);C[1]instanceof Blockly.Field?m.push([C[0],C[1]]):u=this.appendValueInput(C[0]).setCheck(C[1]).setAlign(C[2]);arguments[y]=null}else"\n"==q&&m.length&&(u=this.appendDummyInput());u&&m.length&&(m.forEach(f,u),m=[])}m.length&&
(u=this.appendDummyInput().setAlign(h),m.forEach(f,u));for(p=1;p<arguments.length-1;p++)goog.asserts.assert(null===arguments[p],'Input "%%s" not used in message: "%s"',p,a);this.setInputsInline(!a.match(this.interpolateMsg.INLINE_REGEX_))};Blockly.Block.prototype.isolate=function(a){this.unplug(a);for(var d=this.childBlocks_.length-1;0<=d;d--)this.childBlocks_[d].unplug(a)};Blockly.Block.prototype.interpolateMsg.SPLIT_REGEX_=/(%\d+|\n)/;Blockly.Block.prototype.interpolateMsg.INLINE_REGEX_=/%1\s*$/;
Blockly.Block.prototype.walk=function(a){function d(f,h){a(f,h);f.inputList.forEach(function(l){(l.type===Blockly.INPUT_VALUE||l.type===Blockly.NEXT_STATEMENT)&&l.connection&&l.connection.targetBlock()&&d(l.connection.targetBlock(),h+1);f.nextConnection&&f.nextConnection.targetBlock()&&d(f.nextConnection.targetBlock(),h)})}d(this,0)};Blockly.Block.prototype.domToMutation=null;Blockly.Block.prototype.mutationToDom=null;
Blockly.Block.prototype.toString=function(a,d){for(var f="",h=d||"?",l=0,m;(m=this.inputList[l])&&(!a||f.length<=a+1);l++)if(m.name!=Blockly.BlockSvg.COLLAPSED_INPUT_NAME){for(var p=0,q;q=m.fieldRow[p];p++)f+=q.getText()+" ";m.connection&&(f=(m=m.connection.targetBlock())?f+(m.toString(a?a-f.length:void 0,d)+" "):f+(h+" "))}f=goog.string.trim(f)||"???";a&&(f=goog.string.truncate(f,a));return f};/*

 @fileoverview Object representing a warning for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
 @author fraser@google.com (Neil Fraser)
 @author ewpatton@mit.edu (Evan W. Patton)
*/
AI.ErrorIcon=class extends Blockly.icons.Icon{constructor(a){super(a);this.text_={};this.textBubble=null;this.bubbleSize=new Blockly.utils.Size(160,80)}getType(){return AI.ErrorIcon.TYPE}initView(a){this.svgRoot||(super.initView(a),Blockly.utils.dom.createSvgElement("circle",{"class":"blocklyErrorIconOutline",r:AI.ErrorIcon.ICON_RADIUS,cx:AI.ErrorIcon.ICON_RADIUS,cy:AI.ErrorIcon.ICON_RADIUS},this.svgRoot),Blockly.utils.dom.createSvgElement("path",{"class":"blocklyErrorIconX",d:"M 4,4 12,12 8,8 4,12 12,4"},
this.svgRoot),Blockly.utils.dom.addClass(this.svgRoot,"blockly-icon-error"))}getSize(){return AI.ErrorIcon.SIZE}getWeight(){return 0}isShownWhenCollapsed(){return!1}updateCollapsed(){}isVisible(){return!!this.textBubble}setBubbleVisible(a){this.isBubbleVisible()!==a&&(a?(this.textBubble=new Blockly.bubbles.TextBubble(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textBubble.setColour(this.sourceBlock.style.colourPrimary)):(this.textBubble.dispose(),
this.textBubble=null),Blockly.Events.fire(new (Blockly.Events.get(Blockly.Events.BUBBLE_OPEN))(this.sourceBlock,a,"error")))}getAnchorLocation(){var a=this.getSize();a=new Blockly.utils.Coordinate(a.width/2,a.height/2);return Blockly.utils.Coordinate.sum(this.workspaceLocation,a)}dispose(){super.dispose();this.textBubble&&this.textBubble.dispose()}onLocationChange(a){super.onLocationChange(a);this.textBubble&&this.textBubble.setAnchorLocation(this.getAnchorLocation())}isBubbleVisible(){return!!this.textBubble}onClick(){super.onClick();
this.setBubbleVisible(!this.isBubbleVisible())}getBubbleOwnerRect(){const a=this.sourceBlock.getSvgRoot().getBBox();return new Blockly.utils.Rect(a.y,a.y+a.height,a.x,a.x+a.width)}setText(a,d){this.text_[d]!==a&&(a?this.text_[d]=a:delete this.text_[d],this.isVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0)))}getText(){const a=[];for(const d in this.text_)a.push(this.text_[d]);return a.join("\n")}};AI.ErrorIcon.ICON_RADIUS=8;AI.ErrorIcon.TYPE=new Blockly.icons.IconType("error");
AI.ErrorIcon.SIZE=new Blockly.utils.Size(2*AI.ErrorIcon.ICON_RADIUS,2*AI.ErrorIcon.ICON_RADIUS);Blockly.icons.registry.register(AI.ErrorIcon.TYPE,AI.ErrorIcon);/*

 @fileoverview Visual blocks editor for MIT App Inventor
 Instrumentation extensions to Blockly SVG

 @author ewpatton@mit.edu (Evan W. Patton)
*/
AI.Blockly.BlockSvg={};Blockly.BlockSvg.prototype.error=null;Blockly.BlockSvg.prototype.isBad=!1;Blockly.BlockSvg.prototype.isRendering=!1;Blockly.BlockSvg.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT";Blockly.BlockSvg.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD";
Blockly.BlockSvg.prototype.setErrorIconText=function(a){if(!AI.ErrorIcon)throw"Warnings not supported.";if(!this.isDeadOrDying()){var d=!1;"string"===typeof a?(this.error||(this.error=new AI.ErrorIcon(this),this.addIcon(this.error),d=!0),this.error.setText(a)):this.error&&(this.removeIcon(this.error.getType()),this.error=null,d=!0);this.rendered&&d&&this.workspace.requestRender(this)}};Blockly.BlockSvg.isRenderingOn=!0;
Blockly.BlockSvg.prototype.addBadBlock=function(){this.rendered&&(Blockly.utils.dom.addClass(this.svgGroup_,"badBlock"),this.svgGroup_.parentNode.appendChild(this.svgGroup_))};Blockly.BlockSvg.prototype.removeBadBlock=function(){this.rendered&&(Blockly.utils.dom.removeClass(this.svgGroup_,"badBlock"),this.svgGroup_.parentNode.appendChild(this.svgGroup_))};Blockly.BlockSvg.prototype.isBadBlock=function(){return Blockly.utils.dom.hasClass(this.svgGroup_,"badBlock")};
Blockly.BlockSvg.prototype.badBlock=function(){this.isBad=!0;this.workspace==Blockly.common.getMainWorkspace()&&(goog.asserts.assertObject(this.svgGroup_,"Block is not rendered."),this.addBadBlock())};Blockly.BlockSvg.prototype.notBadBlock=function(){this.isBad=!1;this.workspace==Blockly.common.getMainWorkspace()&&(goog.asserts.assertObject(this.svgGroup_,"Block is not rendered."),this.removeBadBlock())};
Blockly.BlockSvg.prototype.dispose=function(a){if(a.isWrapped)return a;var d=function(f,h){var l=this.workspace;try{a.call(this,f,h)}finally{l&&l.getWarningHandler()&&l.getWarningHandler().checkDisposedBlock(this)}};d.isWrapped=!0;return d}(Blockly.BlockSvg.prototype.dispose);
Blockly.BlockSvg.prototype.setErrorText=function(a,d){this.setErrorText.pid_||(this.setErrorText.pid_=Object.create(null));var f=d||"";if(f)this.setErrorText.pid_[f]&&(clearTimeout(this.setErrorText.pid_[f]),delete this.setErrorText.pid_[f]);else for(var h in this.setErrorText.pid_)clearTimeout(this.setErrorText.pid_[h]),delete this.setErrorText.pid_[h];if(this.workspace&&this.workspace.isDragging()){var l=this;this.setErrorText.pid_[f]=setTimeout(function(){l.workspace&&(delete l.setErrorText.pid_[f],
l.setErrorText(a,f))},100)}else{this.isInFlyout&&(a=null);d=this.getSurroundParent();for(h=null;d;)d.isCollapsed()&&(h=d),d=d.getSurroundParent();h&&h.setErrorText(a,"collapsed "+this.id+" "+f);d=!1;goog.isString(a)?(this.error||(this.error=new AI.ErrorIcon(this),d=!0),this.error.setText(a,f)):this.error&&!f?(this.error.dispose(),d=!0):this.error&&(d=this.error.getText(),this.error.setText("",f),(h=this.error.getText())||this.error.dispose(),d=d==h);d&&this.rendered&&(this.render(),this.bumpNeighbours())}};
Blockly.BlockSvg.prototype.getTopWorkspace=function(){for(var a=this.workspace;a.targetWorkspace;)a=a.targetWorkspace;return a};Blockly.BlockSvg.prototype.showHelp=function(){var a="function"===typeof this.helpUrl?this.helpUrl():this.helpUrl;if(a){a=a.split("#");var d=top.location.href.match("[&?]locale=([a-zA-Z-]*)");d&&"en"!==d[1].toLowerCase()&&(a[0]+="?locale="+d[1]);window.open(a.join("#"))}};/*

 Copyright Â© 2016-2021 Massachusetts Institute of Technology. All rights reserved.
*/
AI.Blockly.ComponentDatabase={};Blockly.PROPERTY_READABLE=1;Blockly.PROPERTY_WRITEABLE=2;Blockly.PROPERTY_READWRITEABLE=3;ComponentInfo=function(){};HelperKey=function(){};ParameterDescriptor=function(){};EventDescriptor=function(){};MethodDescriptor=function(){};PropertyDescriptor=function(){};ComponentTypeDescriptor=function(){};ComponentInstanceDescriptor=function(){};Option=function(){};OptionList=function(){};
Blockly.ComponentDatabase=function(){this.instances_={};this.types_={};this.instanceNameUid_={};this.optionLists_={};this.filters_=[];this.i18nComponentTypes_={};this.i18nEventNames_={};this.i18nEventDescriptions_={};this.i18nMethodNames_={};this.i18nMethodDescriptions_={};this.i18nParamNames_={};this.i18nPropertyNames_={};this.i18nPropertyDescriptions_={};this.i18nOptionNames_={};this.i18nOptionListTags_={}};Blockly.ComponentDatabase.prototype.SUFFIX_REGEX=RegExp("^(.*?)([0-9]*)$");
Blockly.ComponentDatabase.prototype.addInstance=function(a,d,f){if(this.hasInstance(a))return!1;this.instances_[a]={uid:a,name:d,typeName:f};this.instanceNameUid_[d]=a;return!0};Blockly.ComponentDatabase.prototype.hasInstance=function(a){return a in this.instances_};Blockly.ComponentDatabase.prototype.getInstance=function(a){return this.instances_[a]||this.instances_[this.instanceNameUid_[a]]};
Blockly.ComponentDatabase.prototype.getContainer=function(a,d){a=this.getInstance(d);a=top.BlocklyPanel_getComponentContainerUuid(a.name);return this.getInstance(a)};Blockly.ComponentDatabase.prototype.renameInstance=function(a,d,f){if(!this.hasInstance(a)||d===f)return!1;this.instances_[a].name=f;delete this.instanceNameUid_[d];this.instanceNameUid_[f]=a;return!0};Blockly.ComponentDatabase.prototype.removeInstance=function(a){if(!this.hasInstance(a))return!1;delete this.instances_[a];return!0};
Blockly.ComponentDatabase.prototype.forEachInstance=function(a){module$contents$goog$object_forEach(this.instances_,a)};Blockly.ComponentDatabase.prototype.hasType=function(a){return a in this.types_};Blockly.ComponentDatabase.prototype.getType=function(a){return this.types_[a]};Blockly.ComponentDatabase.prototype.getInstanceNames=function(){var a=[],d;for(d in this.instances_)this.instances_.hasOwnProperty(d)&&"object"==typeof this.instances_[d]&&a.push(this.instances_[d].name);return a};
Blockly.ComponentDatabase.prototype.instanceNameToTypeName=function(a){return a in this.instanceNameUid_?this.instances_[this.instanceNameUid_[a]].typeName:!1};Blockly.ComponentDatabase.prototype.getComponentUidNameMapByType=function(a){var d=[],f;for(f in this.instances_)this.instances_.hasOwnProperty(f)&&this.instances_[f].typeName==a&&d.push([this.instances_[f].name,f]);return d};
Blockly.ComponentDatabase.prototype.getComponentNamesByType=function(a){var d=[],f;for(f in this.instances_)if(this.instances_.hasOwnProperty(f)&&this.instances_[f].typeName==a){var h=this.instances_[f].name,l=h.match(this.SUFFIX_REGEX)||[h,"0"];d.push([h,h,l[1],parseInt(l[2]||"0",10)])}if(0==d.length)return[[" ","none"]];d.sort(function(m,p){return m[2]===p[2]?m[3]-p[3]:m[0]<p[0]?-1:m[0]>p[0]?1:0});return d};
Blockly.ComponentDatabase.prototype.getComponentTypes=function(){var a=[],d;for(d in this.instances_){var f=this.instances_[d].typeName;"Form"!=f&&a.push([this.i18nComponentTypes_[f],f])}module$contents$goog$array_removeDuplicates(a,null,function(h){return h[1]});if(0==a.length)return[[" ","none"]];a.sort(function(h,l){return h[0]<l[0]?-1:h[0]>l[0]?1:0});return a};
Blockly.ComponentDatabase.prototype.populateTypes=function(a){for(var d,f,h,l=0,m;m=a[l];++l){var p=this.types_[m.name]={type:m.type,external:m.external,componentInfo:m,eventDictionary:{},methodDictionary:{},properties:{},setPropertyList:[],getPropertyList:[]};for(d=0;f=m.events[d];++d)"string"===typeof f.deprecated&&(f.deprecated=JSON.parse(f.deprecated)),void 0===f.parameters&&(f.parameters=this.processParameters(f.params),delete f.params),p.eventDictionary[f.name]=f;for(d=0;f=m.methods[d];++d)"string"===
typeof f.deprecated&&(f.deprecated=JSON.parse(f.deprecated)),void 0===f.parameters&&(f.parameters=this.processParameters(f.params),delete f.params),f.helper&&(f.returnHelperKey=this.processHelper(f.helper)),p.methodDictionary[f.name]=f;for(d=0;h=m.blockProperties[d];++d)p.properties[h.name]=h,"string"===typeof h.deprecated&&(h.deprecated=JSON.parse(h.deprecated)),h.helper&&(h.helperKey=this.processHelper(h.helper)),"read-write"==h.rw?(h.mutability=Blockly.PROPERTY_READWRITEABLE,p.getPropertyList.push(h.name),
p.setPropertyList.push(h.name)):"read-only"==h.rw?(h.mutability=Blockly.PROPERTY_READABLE,p.getPropertyList.push(h.name)):"write-only"==h.rw&&(h.mutability=Blockly.PROPERTY_WRITEABLE,p.setPropertyList.push(h.name));for(d=0;h=m.properties[d];++d){var q=p.properties[h.name];q&&Object.keys(h).forEach(function(u){q[u]=h[u]})}}};
Blockly.ComponentDatabase.prototype.processParameters=function(a){params=[];for(var d=0,f;f=a[d];d++){var h={};h.name=f.name;h.type=f.type;h.helperKey=this.processHelper(f.helper);params.push(h)}return params};Blockly.ComponentDatabase.prototype.processHelper=function(a){if(!a)return null;switch(a.type){case "OPTION_LIST":return this.processOptionList(a.data);case "ASSET":return this.processAssetHelper(a.data);case "PROVIDER_MODEL":return this.processProviderModelHelper(a.data);case "PROVIDER":return this.processProviderHelper(a.data)}return null};
Blockly.ComponentDatabase.prototype.processOptionList=function(a){if(!this.optionLists_[a.key]){for(var d=[],f=0,h;h=a.options[f];f++)d[f]=this.processOption(h);this.optionLists_[a.key]={className:a.className,tag:a.tag,defaultOpt:a.defaultOpt,underlyingType:a.underlyingType,options:d}}return{type:"OPTION_LIST",key:a.key}};Blockly.ComponentDatabase.prototype.processOption=function(a){return{name:a.name,value:a.value,description:a.description,deprecated:"true"==a.deprecated}};
Blockly.ComponentDatabase.prototype.processAssetHelper=function(a){var d=a.filter;if(!d||0==d.length)return{type:"ASSET",key:null};a=this.filters_.reduce(function(f,h,l){return-1!=f?f:h.every(function(m){return d.includes(m)})?l:-1},-1);-1==a&&(this.filters_.push(d),a=this.filters_.length-1);return{type:"ASSET",key:a}};Blockly.ComponentDatabase.prototype.processProviderModelHelper=function(a){a=a.filter;if(!a||0==a.length)return{type:"PROVIDER_MODEL",key:null}};
Blockly.ComponentDatabase.prototype.processProviderHelper=function(a){var d=a.filter;if(!d||0==d.length)return{type:"PROVIDER",key:null};a=this.filters_.reduce(function(f,h,l){return-1!=f?f:h.every(function(m){return d.includes(m)})?l:-1},-1);-1==a&&(this.filters_.push(d),a=this.filters_.length-1);return{type:"PROVIDER",key:a}};Blockly.ComponentDatabase.PROPDESC=/PropertyDescriptions$/;Blockly.ComponentDatabase.METHODDESC=/MethodDescrptions$/;Blockly.ComponentDatabase.EVENTDESC=/EventDescriptions$/;
Blockly.ComponentDatabase.prototype.populateTranslations=function(a){for(var d in a)if(a.hasOwnProperty(d)){var f=d.split("-",2),h=f[1],l=a[d];switch(f[0]){case "COMPONENT":this.i18nComponentTypes_[h]=l;break;case "PROPERTY":this.i18nPropertyNames_[h]=l;break;case "EVENT":this.i18nEventNames_[h]=l;break;case "METHOD":this.i18nMethodNames_[h]=l;break;case "PARAM":this.i18nParamNames_[h]=l;break;case "EVENTDESC":this.i18nEventDescriptions_[h]=l;break;case "METHODDESC":this.i18nMethodDescriptions_[h]=
l;break;case "PROPDESC":this.i18nPropertyDescriptions_[h]=l;break;case "OPTION":this.i18nOptionNames_[h]=l;break;case "OPTIONLIST":this.i18nOptionListTags_[h]=l}}};Blockly.ComponentDatabase.prototype.getEventForType=function(a,d){if(a in this.types_)return this.types_[a].eventDictionary[d]};
Blockly.ComponentDatabase.prototype.forEventInType=function(a,d){a in this.types_&&(a=module$contents$goog$object_filter(this.types_[a].eventDictionary,function(f){return!f.deprecated}),module$contents$goog$object_map(a,d))};Blockly.ComponentDatabase.prototype.getMethodForType=function(a,d){if(a in this.types_)return this.types_[a].methodDictionary[d]};
Blockly.ComponentDatabase.prototype.forMethodInType=function(a,d){a in this.types_&&(a=module$contents$goog$object_filter(this.types_[a].methodDictionary,function(f){return!f.deprecated}),module$contents$goog$object_map(a,d))};Blockly.ComponentDatabase.prototype.getPropertyForType=function(a,d){return this.types_[a]&&this.types_[a].properties[d]?this.types_[a].properties[d]:null};
Blockly.ComponentDatabase.prototype.getSetterNamesForType=function(a){return a in this.types_?this.types_[a].setPropertyList:null};Blockly.ComponentDatabase.prototype.getGetterNamesForType=function(a){return a in this.types_?this.types_[a].getPropertyList:null};Blockly.ComponentDatabase.prototype.getOptionList=function(a){return this.optionLists_[a]};Blockly.ComponentDatabase.prototype.forEachOptionList=function(a){module$contents$goog$object_forEach(this.optionLists_,a)};
Blockly.ComponentDatabase.prototype.getFilter=function(a){return this.filters_[a]};Blockly.ComponentDatabase.prototype.getInternationalizedComponentType=function(a,d){return this.i18nComponentTypes_[a]||d||a};Blockly.ComponentDatabase.prototype.getInternationalizedEventName=function(a,d){return this.i18nEventNames_[a]||d||a};
Blockly.ComponentDatabase.prototype.getInternationalizedEventDescription=function(a,d,f){return this.i18nEventDescriptions_[a+"."+d+"EventDescriptions"]||this.i18nEventDescriptions_[d+"EventDescriptions"]||f||d};Blockly.ComponentDatabase.prototype.getInternationalizedMethodName=function(a,d){return this.i18nMethodNames_[a]||d||a};
Blockly.ComponentDatabase.prototype.getInternationalizedMethodDescription=function(a,d,f){return this.i18nMethodDescriptions_[a+"."+d+"MethodDescriptions"]||this.i18nMethodDescriptions_[d+"MethodDescriptions"]||f||d};Blockly.ComponentDatabase.prototype.getInternationalizedParameterName=function(a,d){return this.i18nParamNames_[a]||d||a};Blockly.ComponentDatabase.prototype.getInternationalizedPropertyName=function(a,d){return this.i18nPropertyNames_[a]||d||a};
Blockly.ComponentDatabase.prototype.getInternationalizedPropertyDescription=function(a,d,f){return this.i18nPropertyDescriptions_[a+"."+d+"PropertyDescriptions"]||this.i18nPropertyDescriptions_[d+"PropertyDescriptions"]||f||d};Blockly.ComponentDatabase.prototype.getInternationalizedOptionName=function(a,d){return this.i18nOptionNames_[a]||d};Blockly.ComponentDatabase.prototype.getInternationalizedOptionListTag=function(a,d){return this.i18nOptionListTags_[a]||d||a};AI.Blockly.CustomizableConnectionChecker={};class CustomizableConnectionChecker extends Blockly.ConnectionChecker{constructor(){super()}doTypeChecks(a,d){if(Blockly.getMainWorkspace().isLoading||super.doTypeChecks(a,d))return!0;for(let f=0;f<a.length;f++)if("function"==typeof a[f]&&a[f](d))return!0;for(a=0;a<d.length;a++)if("function"==typeof d[a]&&d[a](d))return!0;return!1}}const registrationType=Blockly.registry.Type.CONNECTION_CHECKER,registrationName="CustomizableConnectionChecker";
Blockly.registry.register(registrationType,registrationName,CustomizableConnectionChecker);AI.Blockly.Util.xml={};void 0===Blockly.Util&&(Blockly.Util={});Blockly.Util.xml={};Blockly.Util.xml.XMLToArray=function(a){var d=[];a=goog.dom.getChildren(a);for(var f=0,h;h=a[f];f++)d.push(h);return d};Blockly.Util.xml.blockTypeToXML=function(a,d){a='<xml><block type="'+a+'">';d&&(a+=Blockly.Util.xml.mutatorAttributesXmlString(d));return Blockly.utils.xml.textToDom(a+"</block></xml>")};
Blockly.Util.xml.mutatorAttributesXmlString=function(a){var d="<mutation ",f;for(f in a)a.hasOwnProperty(f)&&(d+=f+'="'+a[f]+'" ');return d+"></mutation>"};
Blockly.Util.xml.procedureCallersXMLString=function(a,d){var f="<xml>";a=d.getProcedureDatabase().getDeclarationBlocks(a);a.sort(function(h,l){h=h.getFieldValue("NAME").toLocaleLowerCase();l=l.getFieldValue("NAME").toLocaleLowerCase();return h.localeCompare(l)});for(d=0;d<a.length;d++)f+=Blockly.Util.xml.procedureCallerBlockString(a[d]);return f+"</xml>"};
Blockly.Util.xml.procedureCallerBlockString=function(a){var d='<block type="'+("procedures_defreturn"==a.type?"procedures_callreturn":"procedures_callnoreturn")+'" inline="false">',f=a.getFieldValue("NAME");d+='<title name="PROCNAME">'+f+"</title>";a=a.mutationToDom();a.setAttribute("name",f);d+=Blockly.Xml.domToText(a);return d+"</block>"};Blockly.Util.xml.valueInputXml=function(a){return Blockly.utils.xml.textToDom('<xml><value name="'+a+'"></value></xml>')};
Blockly.Util.xml.helperKeyToXML=function(a){switch(a.type){case "OPTION_LIST":return this.blockTypeToXML("helpers_dropdown",{key:a.key});case "ASSET":return this.blockTypeToXML("helpers_assets");case "PROVIDER_MODEL":return this.blockTypeToXML("helpers_providermodel");case "PROVIDER":return this.blockTypeToXML("helpers_provider")}};Blockly.Util.xml.valueWithHelperXML=function(a,d){a=this.valueInputXml(a);d=this.helperKeyToXML(d);a.firstChild.appendChild(d.firstChild);return a};var bd={toolbox:{}};bd.toolbox.ctr={};bd.toolbox.ctr.blockInfoToBlockObject=function(a){var d={};if(a.input)for(var f in a.input){var h=bd.toolbox.ctr.blockInfoToBlockObject(a.input[f].blockInfo);d[f]={};d[f].inputType=a.input[f].inputType;d[f].blockObject=h}if(a.next)var l=bd.toolbox.ctr.blockInfoToBlockObject(a.next);return new bd.toolbox.ctr.blockObject(a.type,a.fieldNameToValue,d,a.mutatorNameToValue,l)};
bd.toolbox.ctr.blockObject=function(a,d,f,h,l){this.type=a;this.inputNameToInputTypeAndBlock="undefined"==typeof f?null:f;this.fieldNameToValue="undefined"==typeof d?null:d;this.mutatorNameToValue="undefined"==typeof h?null:h;this.next="undefined"==typeof l?null:l};
bd.toolbox.ctr.blockObjectToXML=function(a,d){var f=goog.dom.createDom("block");f.setAttribute("type",a.type);if(null!=a.mutatorNameToValue){var h=document.createElement("mutation");for(mutatorName in a.mutatorNameToValue)h.setAttribute(mutatorName,a.mutatorNameToValue[mutatorName]);f.appendChild(h)}if(null!=a.fieldNameToValue)for(var l in a.fieldNameToValue)h=goog.dom.createDom("field",null,a.fieldNameToValue[l]),h.setAttribute("name",l),f.appendChild(h);if(null!=a.inputNameToInputTypeAndBlock)for(var m in a.inputNameToInputTypeAndBlock)l=
a.inputNameToInputTypeAndBlock[m],h=document.createElement(l.inputType),h.appendChild(bd.toolbox.ctr.blockObjectToXML(l.blockObject)),h.setAttribute("name",m),f.appendChild(h);null!=a.next&&(h=document.createElement("next"),h.appendChild(bd.toolbox.ctr.blockObjectToXML(a.next)),f.appendChild(h));return"undefined"!=typeof d&&d?(a=goog.dom.createDom("xml"),a.setAttribute("id","toolbox"),a.appendChild(f),a):f};/*

 @fileoverview Visual blocks editor for App Inventor
 Set of drawers for holding factory blocks (blocks that create
 other blocks when dragged onto the workspace). The set of drawers
 includes the built-in drawers that we get from the blocks language, as
 well as a drawer per component instance that was added to this workspace.

 @author mckinney@mit.edu (Andrew F. McKinney)
 @author Sharon Perl (sharon@google.com)
 @author ewpatton@mit.edu (Evan W. Patton)
*/
AI.Blockly.Drawer={};Blockly.Drawer=function(a,d){d instanceof Blockly.Options?this.options=d:(d=d||{},this.options=new Blockly.Options(d));this.workspace_=a;this.flyout_=this.workspace_.getFlyout();this.flyout_.setAutoClose(!0);this.lastComponent=null};Blockly.Drawer.PREFIX_="cat_";
Blockly.Drawer.buildTree_=function(){var a={},d=Blockly.common.getMainWorkspace().formName,f=d.substring(d.indexOf("_")+1);if(window.parent.BlocklyPanel_getComponentInstancePropertyValue&&(d=window.parent.BlocklyPanel_getComponentInstancePropertyValue(d,f,"BlocksToolkit"))&&(d=Blockly.Drawer.buildToolkitTree_(d),void 0!=d))return d;for(var h in Blockly.Blocks)d=Blockly.Blocks[h],d.category&&(d=Blockly.Drawer.PREFIX_+window.encodeURI(d.category),d in a?a[d].push(h):a[d]=[h]);return a};
Blockly.Drawer.buildToolkitTree_=function(a){var d={};a=JSON.parse(a).shownBlockTypes;try{for(var f in a)if("ComponentBlocks"!=f)for(var h="cat_"+f,l=a[f],m=0;m<l.length;m++){var p=l[m].type;h in d?d[h].push(p):d[h]=[p]}}catch(q){console.log(q);return}return d};
Blockly.Drawer.prototype.showBuiltin=function(a){a=Blockly.Drawer.PREFIX_+a;this.options.languageTree||(this.options.languageTree=Blockly.Drawer.buildTree_());var d=this.options.languageTree[a];if("cat_Procedures"==a){for(var f=[],h=0;h<d.length;h++)"procedures_callnoreturn"==d[h]&&0==this.workspace_.getProcedureDatabase().voidProcedures||"procedures_callreturn"==d[h]&&0==this.workspace_.getProcedureDatabase().returnProcedures||f.push(d[h]);d=f}if(!d)throw"no such drawer: "+a;Blockly.hideChaff();
a=this.blockListToXMLArray(d);this.flyout_.show(a)};Blockly.Drawer.prototype.showComponent=function(a){var d=this.workspace_.getComponentDatabase().getInstance(a);d?(Blockly.hideChaff(),this.flyout_.show(this.instanceRecordToXMLArray(d)),this.lastComponent=a):console.log("Got call to Blockly.Drawer.showComponent("+a+") - unknown component name")};
Blockly.Drawer.prototype.showGeneric=function(a){this.workspace_.getComponentDatabase().hasType(a)?(Blockly.hideChaff(),a=this.componentTypeToXMLArray(a),this.flyout_.show(a)):console.log("Got call to Blockly.Drawer.showGeneric("+a+") - unknown component type name")};Blockly.Drawer.prototype.hide=function(){this.lastComponent=null;this.flyout_.hide()};Blockly.Drawer.prototype.isShowing=function(){return this.flyout_.isVisible()};
Blockly.Drawer.prototype.blockListToXMLArray=function(a){for(var d=[],f=0;f<a.length;f++)Array.prototype.push.apply(d,this.blockTypeToXMLArray(a[f],null));return d};
Blockly.Drawer.prototype.instanceRecordToXMLArray=function(a){var d=[],f=a.typeName,h=this.workspace_.getComponentDatabase().getType(f),l=Blockly.common.getMainWorkspace().formName,m=l.substring(l.indexOf("_")+1),p="";window.parent.BlocklyPanel_getComponentInstancePropertyValue&&(p=window.parent.BlocklyPanel_getComponentInstancePropertyValue(l,m,"BlocksToolkit"));if(0<p.length){if(h=JSON.parse(p).shownBlockTypes.ComponentBlocks[f],void 0!==h){for(l=0;l<h.length;l++)m=h[l],m.mutatorNameToValue.instance_name=
a.name,m.fieldNameToValue.COMPONENT_SELECTOR=a.name,console.log("added obj"),console.log(m),m=bd.toolbox.ctr.blockObjectToXML(bd.toolbox.ctr.blockInfoToBlockObject(m)),d.push(m);m={type:"component_component_block"};m.mutatorNameToValue={component_type:f,instance_name:a.name};m=bd.toolbox.ctr.blockObjectToXML(bd.toolbox.ctr.blockInfoToBlockObject(m));d.push(m)}}else d=this.createAllComponentBlocks(h,a);return d};
Blockly.Drawer.prototype.createAllComponentBlocks=function(a,d){function f(y){y.helperKey&&function(C){switch(C.type){case "OPTION_LIST":return!l.some(function(K){return K.key==C.key&&K.type==C.type});default:return!l.some(function(K){return K.type==C.type})}}(y.helperKey)&&l.push(y.helperKey)}var h=[],l=[],m=d.typeName,p=d.name,q=Blockly.Util.xml,u=(d=Blockly.common.getMainWorkspace().getComponentDatabase().getContainer(Blockly.common.getMainWorkspace().formName,p))&&"AbsoluteArrangement"==d.typeName;
module$contents$goog$object_forEach(a.eventDictionary,function(y,C){y.deprecated||(C=this.blockTypeToXMLArray("component_event",{component_type:m,instance_name:p,event_name:C}),Array.prototype.push.apply(h,C),y.parameters.forEach(f))},this);module$contents$goog$object_forEach(a.methodDictionary,function(y,C){if(!y.deprecated){var K=this.blockTypeToXML("component_method",{component_type:m,instance_name:p,method_name:C});y.parameters.forEach(function(X,M){X.helperKey&&(f(X),X=q.valueWithHelperXML("ARG"+
M,X.helperKey),K.firstChild.appendChild(X.firstChild))}.bind(this));Array.prototype.push.apply(h,q.XMLToArray(K))}},this);module$contents$goog$object_forEach(a.properties,function(y,C){if(!y.deprecated&&("Left"!=C&&"Top"!=C||u)){C={component_type:m,instance_name:p,property_name:C};var K=Blockly.PROPERTY_READABLE,X=Blockly.PROPERTY_WRITEABLE;(y.mutability&K)==K&&(C.set_or_get="get",K=this.blockTypeToXMLArray("component_set_get",C),Array.prototype.push.apply(h,K));(y.mutability&X)==X&&(C.set_or_get=
"set",C=this.blockTypeToXML("component_set_get",C),y.helperKey&&(X=q.valueWithHelperXML("VALUE",y.helperKey),C.firstChild.appendChild(X.firstChild)),Array.prototype.push.apply(h,q.XMLToArray(C)));f(y)}},this);l.forEach(function(y){y=q.helperKeyToXML(y);Array.prototype.push.apply(h,q.XMLToArray(y))}.bind(this));a=this.blockTypeToXMLArray("component_component_block",{component_type:m,instance_name:p});Array.prototype.push.apply(h,a);return h};
Blockly.Drawer.prototype.componentTypeToXMLArray=function(a){function d(p){p.helperKey&&function(q){switch(q.type){case "OPTION_LIST":return!l.some(function(u){return u.key==q.key&&u.type==q.type});default:return!l.some(function(u){return u.type==q.type})}}(p.helperKey)&&l.push(p.helperKey)}var f=[],h=this.workspace_.getComponentDatabase().getType(a),l=[],m=Blockly.Util.xml;module$contents$goog$object_forEach(h.eventDictionary,function(p,q){p.deprecated||(Array.prototype.push.apply(f,this.blockTypeToXMLArray("component_event",
{component_type:a,event_name:q,is_generic:"true"})),p.parameters.forEach(d))},this);module$contents$goog$object_forEach(h.methodDictionary,function(p,q){if(!p.deprecated){var u=this.blockTypeToXML("component_method",{component_type:a,method_name:q,is_generic:"true"});p.parameters.forEach(function(y,C){y.helperKey&&(d(y),y=m.valueWithHelperXML("ARG"+C,y.helperKey),u.firstChild.appendChild(y.firstChild))}.bind(this));Array.prototype.push.apply(f,m.XMLToArray(u))}},this);module$contents$goog$object_forEach(h.properties,
function(p,q){if(!p.deprecated){q={component_type:a,property_name:q};(p.mutability&Blockly.PROPERTY_READABLE)==Blockly.PROPERTY_READABLE&&(q.set_or_get="get",Array.prototype.push.apply(f,this.blockTypeToXMLArray("component_set_get",q)));if((p.mutability&Blockly.PROPERTY_WRITEABLE)==Blockly.PROPERTY_WRITEABLE){q.set_or_get="set";q=this.blockTypeToXML("component_set_get",q);if(p.helperKey){var u=m.valueWithHelperXML("VALUE",p.helperKey);q.firstChild.appendChild(u.firstChild)}Array.prototype.push.apply(f,
m.XMLToArray(q))}d(p)}},this);l.forEach(function(p){p=m.helperKeyToXML(p);Array.prototype.push.apply(f,m.XMLToArray(p))}.bind(this));Array.prototype.push.apply(f,this.blockTypeToXMLArray("component_all_component_block",{component_type:a}));return f};Blockly.Drawer.prototype.blockTypeToXMLArray=function(a,d){return Blockly.Util.xml.XMLToArray(this.blockTypeToXML(a,d))};
Blockly.Drawer.prototype.blockTypeToXML=function(a,d){var f=Blockly.Util.xml;d&&void 0===d.is_generic&&(d.is_generic=!d.instance_name);switch(a){case "procedures_callnoreturn":return Blockly.utils.xml.textToDom(f.procedureCallersXMLString(!1,this.workspace_));case "procedures_callreturn":return Blockly.utils.xml.textToDom(f.procedureCallersXMLString(!0,this.workspace_));default:var h=Blockly.Drawer.getDefaultXMLString(a,d);return null!=h?Blockly.utils.xml.textToDom(h):f.blockTypeToXML(a,d)}};
Blockly.Drawer.getDefaultXMLString=function(a,d){if(null==Blockly.Drawer.defaultBlockXMLStrings[a])return null;if(null!=Blockly.Drawer.defaultBlockXMLStrings[a].xmlString)return Blockly.Drawer.defaultBlockXMLStrings[a].xmlString;if(null!=Blockly.Drawer.defaultBlockXMLStrings[a].length){a=Blockly.Drawer.defaultBlockXMLStrings[a];for(var f,h,l=0;l<a.length;l++)if(f=a[l].matchingMutatorAttributes){h=!0;for(var m in f)if(f.hasOwnProperty(m)&&d[m]!=f[m]){h=!1;break}if(h)return a[l].mutatorXMLStringFunction(d)}return null}};
Blockly.Drawer.defaultBlockXMLStrings={controls_if:{xmlString:'<xml><block type="controls_if"></block><block type="controls_if"><mutation else="1"></mutation></block><block type="controls_if"><mutation elseif="1" else="1"></mutation></block></xml>'},controls_forRange:{xmlString:'<xml><block type="controls_forRange"><value name="START"><block type="math_number"><title name="NUM">1</title></block></value><value name="END"><block type="math_number"><title name="NUM">5</title></block></value><value name="STEP"><block type="math_number"><title name="NUM">1</title></block></value></block></xml>'},
controls_openAnotherScreen:{xmlString:'<xml><block type="controls_openAnotherScreen"><value name="SCREEN"><block type="helpers_screen_names"></block></value></block></xml>'},controls_openAnotherScreenWithStartValue:{xmlString:'<xml><block type="controls_openAnotherScreenWithStartValue"><value name="SCREENNAME"><block type="helpers_screen_names"></block></value></block></xml>'},math_random_int:{xmlString:'<xml><block type="math_random_int"><value name="FROM"><block type="math_number"><title name="NUM">1</title></block></value><value name="TO"><block type="math_number"><title name="NUM">100</title></block></value></block></xml>'},
color_make_color:{xmlString:'<xml><block type="color_make_color"><value name="COLORLIST"><block type="lists_create_with" inline="false"><mutation items="3"></mutation><value name="ADD0"><block type="math_number"><title name="NUM">255</title></block></value><value name="ADD1"><block type="math_number"><title name="NUM">0</title></block></value><value name="ADD2"><block type="math_number"><title name="NUM">0</title></block></value></block></value></block></xml>'},lists_create_with:{xmlString:'<xml><block type="lists_create_with"><mutation items="0"></mutation></block><block type="lists_create_with"><mutation items="2"></mutation></block></xml>'},
lists_lookup_in_pairs:{xmlString:'<xml><block type="lists_lookup_in_pairs"><value name="NOTFOUND"><block type="text"><title name="TEXT">not found</title></block></value></block></xml>'},lists_join_with_separator:{xmlString:'<xml><block type="lists_join_with_separator"><value name="SEPARATOR"><block type="text"><title name="TEXT"></title></block></value></block></xml>'},dictionaries_create_with:{xmlString:'<xml><block type="dictionaries_create_with"><mutation items="0"></mutation></block><block type="dictionaries_create_with"><mutation items="2"></mutation><value name="ADD0"><block type="pair"></block></value><value name="ADD1"><block type="pair"></block></value></block></xml>'},
dictionaries_lookup:{xmlString:'<xml><block type="dictionaries_lookup"><value name="NOTFOUND"><block type="text"><title name="TEXT">not found</title></block></value></block></xml>'},dictionaries_recursive_lookup:{xmlString:'<xml><block type="dictionaries_recursive_lookup"><value name="NOTFOUND"><block type="text"><title name="TEXT">not found</title></block></value></block></xml>'},component_method:[{matchingMutatorAttributes:{component_type:"TinyDB",method_name:"GetValue"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+
Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG1"><block type="text"><title name="TEXT"></title></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"FirebaseDB",method_name:"GetValue"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG1"><block type="text"><title name="TEXT"></title></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Notifier",
method_name:"ShowTextDialog"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG2"><block type="logic_boolean"><title name="BOOL">TRUE</title></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Notifier",method_name:"ShowChooseDialog"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG4"><block type="logic_boolean"><title name="BOOL">TRUE</title></block></value></block></xml>'}},
{matchingMutatorAttributes:{component_type:"Canvas",method_name:"DrawCircle"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG3"><block type="logic_boolean"><title name="BOOL">TRUE</title></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Canvas",method_name:"DrawShape"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+
'<value name="ARG1"><block type="logic_boolean"><field name="BOOL">TRUE</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Canvas",method_name:"DrawArc"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG6"><block type="logic_boolean"><field name="BOOL">FALSE</field></block></value><value name="ARG7"><block type="logic_boolean"><field name="BOOL">TRUE</field></block></value></block></xml>'}},
{matchingMutatorAttributes:{component_type:"Clock",method_name:"FormatDate"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG1"><block type="text"><field name="TEXT">MMM d, yyyy</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Clock",method_name:"FormatDateTime"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+
'<value name="ARG1"><block type="text"><field name="TEXT">MM/dd/yyyy hh:mm:ss a</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"ReadRow"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"ReadCol"},
mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"ReadCell"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},
{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"ReadRange"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"ReadSheet"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+
'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"ReadWithExactFilter"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value><value name="ARG1"><block type="math_number"><title name="NUM">0</title></block></value></block></xml>'}},
{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"ReadWithPartialFilter"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value><value name="ARG1"><block type="math_number"><title name="NUM">0</title></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"WriteRow"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+
Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"WriteCol"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",
method_name:"WriteCell"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"WriteRange"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},
{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"ClearRange"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"AddRow"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+
'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"AddCol"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"RemoveRow"},
mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"AnomalyDetection",method_name:"DetectAnomalies"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG1"><block type="math_number"><title name="NUM">2</title></block></value></block></xml>'}},
{matchingMutatorAttributes:{component_type:"Regression",method_name:"CalculateLineOfBestFitValue"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG2"><block type="helpers_dropdown"><mutation key="LOBFValues"></mutation><field name="OPTION">Slope</field></block></value></block></xml>'}},{matchingMutatorAttributes:{component_type:"Spreadsheet",method_name:"RemoveCol"},mutatorXMLStringFunction:function(a){return'<xml><block type="component_method">'+
Blockly.Util.xml.mutatorAttributesXmlString(a)+'<value name="ARG0"><block type="text"><field name="TEXT">Sheet1</field></block></value></block></xml>'}}]};/*

 Copyright Â© 2016-2017 Massachusetts Institute of Technology. All rights reserved.
*/
AI.Blockly.ProcedureDatabase={};Blockly.ProcedureDatabase=function(a){this.workspace_=a;this.procedures_={};this.returnProcedures_={};this.voidProcedures_={};this.voidProcedures=this.returnProcedures=this.length=0};Blockly.ProcedureDatabase.defaultValue=["","none"];Blockly.ProcedureDatabase.prototype.getNames=function(a){return AI.Blockly.AIProcedure.getProcedureNames(a,this.workspace_).map(function(d){return d[0]})};
Blockly.ProcedureDatabase.prototype.getMenuItems=function(a){return AI.Blockly.AIProcedure.getProcedureNames(a,this.workspace_)};Blockly.ProcedureDatabase.prototype.getDeclarationBlocks=function(a){return module$contents$goog$object_getValues(a?this.returnProcedures_:this.voidProcedures_)};Blockly.ProcedureDatabase.prototype.getDeclarationsBlocksExcept=function(a){var d=[];module$contents$goog$object_forEach(this.procedures_,function(f){f!==a&&d.push(f)});return d};
Blockly.ProcedureDatabase.prototype.getAllDeclarationNames=function(){return module$contents$goog$object_getValues(this.procedures_).map(function(a){return a.getFieldValue("NAME")})};
Blockly.ProcedureDatabase.prototype.addProcedure=function(a,d){if("procedures_defnoreturn"!=d.type&&"procedures_defreturn"!=d.type)return console.warn("Attempt to addProcedure with block type "+d.type),!1;a=d.id;if(a in this.procedures_)return!1;this.procedures_[a]=d;this.length++;"procedures_defnoreturn"==d.type?(this.voidProcedures_[a]=d,this.voidProcedures++):(this.returnProcedures_[a]=d,this.returnProcedures++);return!0};
Blockly.ProcedureDatabase.prototype.removeProcedure=function(a){a in this.procedures_&&("procedures_defnoreturn"==this.procedures_[a].type?(delete this.voidProcedures_[a],this.voidProcedures--):(delete this.returnProcedures_[a],this.returnProcedures--),delete this.procedures_[a],this.length--);return!0};Blockly.ProcedureDatabase.prototype.renameProcedure=function(a,d,f){};Blockly.ProcedureDatabase.prototype.getProcedure=function(a){var d=this.procedures_[a];return d?d:this.getProcedureByName(a)};
Blockly.ProcedureDatabase.prototype.getProcedureByName=function(a){for(var d in this.procedures_)if(this.procedures_[d].getFieldValue("NAME")===a)return this.procedures_[d]};Blockly.ProcedureDatabase.prototype.clear=function(){this.procedures_={};this.returnProcedures_={};this.voidProcedures_={};this.voidProcedures=this.returnProcedures=this.length=0};goog.events.Keys={ALT:"Meta",ALTGRAPH:"AltGraph",BACKSPACE:"Backspace",CTRL:"Control",DELETE:"Delete",DOWN:"ArrowDown",END:"End",ENTER:"Enter",ESCAPE:"Escape",HOME:"Home",INSERT:"Insert",LEFT:"ArrowLeft",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",RIGHT:"ArrowRight",SHIFT:"Shift",SPACE:" ",TAB:"Tab",UP:"ArrowUp"};goog.fx.Dragger=function(a,d,f){goog.events.EventTarget.call(this);this.target=a;this.handle=d||a;this.limits=f||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(a);this.eventHandler_=new goog.events.EventHandler(this);this.registerDisposable(this.eventHandler_);this.deltaY=this.deltaX=this.startY=this.startX=this.screenY=this.screenX=this.clientY=this.clientX=0;this.enabled_=!0;this.dragging_=!1;this.preventMouseDown_=!0;this.hysteresisDistanceSquared_=0;this.useRightPositioningForRtl_=
this.ieDragStartCancellingOn_=!1;goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.useSetCapture_=goog.fx.Dragger.HAS_SET_CAPTURE_};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);goog.fx.Dragger.HAS_SET_CAPTURE_=goog.global.document&&goog.global.document.documentElement&&!!goog.global.document.documentElement.setCapture&&!!goog.global.document.releaseCapture;
goog.fx.Dragger.cloneNode=function(a){for(var d=a.cloneNode(!0),f=goog.dom.getElementsByTagName(goog.dom.TagName.TEXTAREA,a),h=goog.dom.getElementsByTagName(goog.dom.TagName.TEXTAREA,d),l=0;l<f.length;l++)h[l].value=f[l].value;switch(a.tagName){case String(goog.dom.TagName.TR):return goog.dom.createDom(goog.dom.TagName.TABLE,null,goog.dom.createDom(goog.dom.TagName.TBODY,null,d));case String(goog.dom.TagName.TD):case String(goog.dom.TagName.TH):return goog.dom.createDom(goog.dom.TagName.TABLE,null,
goog.dom.createDom(goog.dom.TagName.TBODY,null,goog.dom.createDom(goog.dom.TagName.TR,null,d)));case String(goog.dom.TagName.TEXTAREA):d.value=a.value;default:return d}};goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.setAllowSetCapture=function(a){this.useSetCapture_=a&&goog.fx.Dragger.HAS_SET_CAPTURE_};goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(a){this.useRightPositioningForRtl_=a};
goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_};goog.fx.Dragger.prototype.setLimits=function(a){this.limits=a||new goog.math.Rect(NaN,NaN,NaN,NaN)};goog.fx.Dragger.prototype.setHysteresis=function(a){this.hysteresisDistanceSquared_=Math.pow(a,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(a){this.scrollTarget_=a};
goog.fx.Dragger.prototype.setCancelIeDragStart=function(a){this.ieDragStartCancellingOn_=a};goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};goog.fx.Dragger.prototype.setEnabled=function(a){this.enabled_=a};goog.fx.Dragger.prototype.setPreventMouseDown=function(a){this.preventMouseDown_=a};
goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.cleanUpAfterDragging_();this.handle=this.target=null};goog.fx.Dragger.prototype.isRightToLeft_=function(){void 0===this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.target));return this.rightToLeft_};
goog.fx.Dragger.prototype.startDrag=function(a){var d=a.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||d&&!a.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{if(0==this.hysteresisDistanceSquared_)if(this.fireDragStart_(a))this.dragging_=!0,this.preventMouseDown_&&d&&a.preventDefault();else return;else this.preventMouseDown_&&d&&a.preventDefault();this.setupDragHandlers();this.clientX=this.startX=a.clientX;this.clientY=this.startY=a.clientY;
this.screenX=a.screenX;this.screenY=a.screenY;this.computeInitialPosition();this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll()}};
goog.fx.Dragger.prototype.setupDragHandlers=function(){var a=this.document_,d=a.documentElement,f=!this.useSetCapture_;this.eventHandler_.listen(a,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,{capture:f,passive:!1});this.eventHandler_.listen(a,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,f);this.useSetCapture_?(d.setCapture(!1),this.eventHandler_.listen(d,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(a),
goog.events.EventType.BLUR,this.endDrag);goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(a,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault);this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,f)};goog.fx.Dragger.prototype.fireDragStart_=function(a){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,a.clientX,a.clientY,a))};
goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll();this.useSetCapture_&&this.document_.releaseCapture()};goog.fx.Dragger.prototype.endDrag=function(a,d){this.cleanUpAfterDragging_();if(this.dragging_){this.dragging_=!1;var f=this.limitX(this.deltaX),h=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,a.clientX,a.clientY,a,f,h,d||a.type==goog.events.EventType.TOUCHCANCEL))}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)};
goog.fx.Dragger.prototype.endDragCancel=function(a){this.endDrag(a,!0)};
goog.fx.Dragger.prototype.handleMove_=function(a){if(this.enabled_){var d=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(a.clientX-this.clientX),f=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.dragging_){var h=this.startX-this.clientX,l=this.startY-this.clientY;if(h*h+l*l>this.hysteresisDistanceSquared_)if(this.fireDragStart_(a))this.dragging_=!0;else{this.isDisposed()||this.endDrag(a);return}}f=this.calculatePosition_(d,
f);d=f.x;f=f.y;this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,a.clientX,a.clientY,a,d,f))&&(this.doDrag(a,d,f,!1),a.preventDefault())}};goog.fx.Dragger.prototype.calculatePosition_=function(a,d){var f=goog.dom.getDomHelper(this.document_).getDocumentScroll();a+=f.x-this.pageScroll.x;d+=f.y-this.pageScroll.y;this.pageScroll=f;this.deltaX+=a;this.deltaY+=d;a=this.limitX(this.deltaX);d=this.limitY(this.deltaY);return new goog.math.Coordinate(a,d)};
goog.fx.Dragger.prototype.onScroll_=function(a){var d=this.calculatePosition_(0,0);a.clientX=this.clientX;a.clientY=this.clientY;this.doDrag(a,d.x,d.y,!0)};goog.fx.Dragger.prototype.doDrag=function(a,d,f,h){this.defaultAction(d,f);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,a.clientX,a.clientY,a,d,f))};
goog.fx.Dragger.prototype.limitX=function(a){var d=this.limits,f=isNaN(d.left)?null:d.left;d=isNaN(d.width)?0:d.width;return Math.min(null!=f?f+d:Infinity,Math.max(null!=f?f:-Infinity,a))};goog.fx.Dragger.prototype.limitY=function(a){var d=this.limits,f=isNaN(d.top)?null:d.top;d=isNaN(d.height)?0:d.height;return Math.min(null!=f?f+d:Infinity,Math.max(null!=f?f:-Infinity,a))};
goog.fx.Dragger.prototype.computeInitialPosition=function(){this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft;this.deltaY=this.target.offsetTop};goog.fx.Dragger.prototype.defaultAction=function(a,d){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=d+"px"};goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_};
goog.fx.DragEvent=function(a,d,f,h,l,m,p,q){goog.events.Event.call(this,a);this.clientX=f;this.clientY=h;this.browserEvent=l;this.left=void 0!==m?m:d.deltaX;this.top=void 0!==p?p:d.deltaY;this.dragger=d;this.dragCanceled=!!q};goog.inherits(goog.fx.DragEvent,goog.events.Event);const module$contents$goog$ui$Map_UiMap=function(a){this.map_=new Map;const d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(let f=0;f<d;f+=2)this.set(arguments[f],arguments[f+1])}else a&&this.addAll(a)};module$contents$goog$ui$Map_UiMap.prototype.getCount=function(){return this.map_.size};module$contents$goog$ui$Map_UiMap.prototype.getValues=function(){return Array.from(this.map_.values())};module$contents$goog$ui$Map_UiMap.prototype.getKeys=function(){return Array.from(this.map_.keys())};
module$contents$goog$ui$Map_UiMap.prototype.containsKey=function(a){return this.map_.has(a)};module$contents$goog$ui$Map_UiMap.prototype.containsValue=function(a){return this.getValues().some(d=>d==a)};module$contents$goog$ui$Map_UiMap.prototype.equals=function(a,d=(f,h)=>f===h){return this===a?!0:this.map_.size!=a.getCount()?!1:this.getKeys().every(f=>d(this.map_.get(f),a.get(f)))};module$contents$goog$ui$Map_UiMap.prototype.isEmpty=function(){return 0==this.map_.size};
module$contents$goog$ui$Map_UiMap.prototype.clear=function(){this.map_.clear()};module$contents$goog$ui$Map_UiMap.prototype.remove=function(a){return this.map_.delete(a)};module$contents$goog$ui$Map_UiMap.prototype.get=function(a,d){return this.map_.has(a)?this.map_.get(a):d};module$contents$goog$ui$Map_UiMap.prototype.set=function(a,d){this.map_.set(a,d);return this};
module$contents$goog$ui$Map_UiMap.prototype.addAll=function(a){if(a instanceof module$contents$goog$ui$Map_UiMap)for(const [d,f]of a.map_)this.map_.set(d,f);else if(a)for(const [d,f]of Object.entries(a))this.map_.set(d,f)};module$contents$goog$ui$Map_UiMap.prototype.forEach=function(a,d=this){this.map_.forEach((f,h)=>a.call(d,f,h,this))};module$contents$goog$ui$Map_UiMap.prototype.clone=function(){return new module$contents$goog$ui$Map_UiMap(this)};
module$contents$goog$ui$Map_UiMap.prototype.toObject=function(){const a={};for(const [d,f]of this.map_)a[d]=f;return a};goog.ui.Map=module$contents$goog$ui$Map_UiMap;goog.dom.animationFrame={};goog.dom.animationFrame.polyfill={};goog.dom.animationFrame.polyfill.ENABLED=!0;
goog.dom.animationFrame.polyfill.install=function(){if(goog.dom.animationFrame.polyfill.ENABLED){const a=["ms","moz","webkit","o"];let d;for(let f=0;d=a[f]&&!goog.global.requestAnimationFrame;++f)goog.global.requestAnimationFrame=goog.global[d+"RequestAnimationFrame"],goog.global.cancelAnimationFrame=goog.global[d+"CancelAnimationFrame"]||goog.global[d+"CancelRequestAnimationFrame"];if(!goog.global.requestAnimationFrame){let f=0;goog.global.requestAnimationFrame=function(h){const l=(new Date).getTime(),
m=Math.max(0,16-(l-f));f=l+m;return goog.global.setTimeout(function(){h(l+m)},m)};goog.global.cancelAnimationFrame||(goog.global.cancelAnimationFrame=function(h){clearTimeout(h)})}}};goog.dom.animationFrame.Spec={};goog.dom.animationFrame.polyfill.install();goog.dom.animationFrame.State=function(){};goog.dom.animationFrame.tasks_=[[],[]];goog.dom.animationFrame.doubleBufferIndex_=0;goog.dom.animationFrame.requestedFrame_=!1;goog.dom.animationFrame.taskId_=0;goog.dom.animationFrame.running_=!1;
goog.dom.animationFrame.createTask=function(a,d){const f=goog.dom.animationFrame.taskId_++,h={measureTask:{id:f,fn:a.measure,context:d},mutateTask:{id:f,fn:a.mutate,context:d},state:{},args:void 0,isScheduled:!1};return function(){0<arguments.length?(h.args||(h.args=[]),h.args.length=0,h.args.push.apply(h.args,arguments),h.args.push(h.state)):h.args&&0!=h.args.length?(h.args[0]=h.state,h.args.length=1):h.args=[h.state];h.isScheduled||(h.isScheduled=!0,goog.dom.animationFrame.tasks_[goog.dom.animationFrame.doubleBufferIndex_].push(h));
goog.dom.animationFrame.requestAnimationFrame_()}};
goog.dom.animationFrame.runTasks_=function(){goog.dom.animationFrame.running_=!0;goog.dom.animationFrame.requestedFrame_=!1;const a=goog.dom.animationFrame.tasks_[goog.dom.animationFrame.doubleBufferIndex_],d=a.length;goog.dom.animationFrame.doubleBufferIndex_=(goog.dom.animationFrame.doubleBufferIndex_+1)%2;let f;for(var h=0;h<d;++h){f=a[h];var l=f.measureTask;f.isScheduled=!1;l.fn&&l.fn.apply(l.context,f.args)}for(h=0;h<d;++h)f=a[h],l=f.mutateTask,f.isScheduled=!1,l.fn&&l.fn.apply(l.context,f.args),
f.state={};a.length=0;goog.dom.animationFrame.running_=!1};goog.dom.animationFrame.isRunning=function(){return goog.dom.animationFrame.running_};goog.dom.animationFrame.requestAnimationFrame_=function(){goog.dom.animationFrame.requestedFrame_||(goog.dom.animationFrame.requestedFrame_=!0,window.requestAnimationFrame(goog.dom.animationFrame.runTasks_))};goog.dom.iframe={};goog.dom.iframe.BLANK_SOURCE_URL=goog.userAgent.IE?goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.from('javascript:""')):goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.from("about:blank"));goog.dom.iframe.BLANK_SOURCE=goog.html.TrustedResourceUrl.unwrap(goog.dom.iframe.BLANK_SOURCE_URL);goog.dom.iframe.BLANK_SOURCE_NEW_FRAME_URL=goog.userAgent.IE?goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.from('javascript:""')):goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.from("javascript:undefined"));
goog.dom.iframe.BLANK_SOURCE_NEW_FRAME=goog.html.TrustedResourceUrl.unwrap(goog.dom.iframe.BLANK_SOURCE_NEW_FRAME_URL);goog.dom.iframe.STYLES_="border:0;vertical-align:bottom;";goog.dom.iframe.createBlank=function(a,d){d=d?module$contents$goog$html$SafeStyle_SafeStyle.unwrap(d):"";a=a.createDom(goog.dom.TagName.IFRAME,{frameborder:0,style:goog.dom.iframe.STYLES_+d});goog.dom.safe.setIframeSrc(a,goog.dom.iframe.BLANK_SOURCE_URL);return a};
goog.dom.iframe.writeSafeContent=function(a,d){a=goog.dom.getFrameContentDocument(a);a.open();goog.dom.safe.documentWrite(a,d);a.close()};
goog.dom.iframe.createWithContent=function(a,d,f,h,l){var m=goog.dom.getDomHelper(a);d=module$contents$goog$html$SafeHtml_SafeHtml.create("html",{},module$contents$goog$html$SafeHtml_SafeHtml.concat(module$contents$goog$html$SafeHtml_SafeHtml.create("head",{},d),module$contents$goog$html$SafeHtml_SafeHtml.create("body",{},f)));l||(d=module$contents$goog$html$SafeHtml_SafeHtml.concat(module$contents$goog$html$SafeHtml_SafeHtml.DOCTYPE_HTML,d));h=goog.dom.iframe.createBlank(m,h);a.appendChild(h);goog.dom.iframe.writeSafeContent(h,
d);return h};goog.events.FocusHandler=function(a){goog.events.EventTarget.call(this);this.element_=a;a=goog.userAgent.IE?"focusout":"blur";this.listenKeyIn_=goog.events.listen(this.element_,goog.userAgent.IE?"focusin":"focus",this,!goog.userAgent.IE);this.listenKeyOut_=goog.events.listen(this.element_,a,this,!goog.userAgent.IE)};goog.inherits(goog.events.FocusHandler,goog.events.EventTarget);goog.events.FocusHandler.EventType={FOCUSIN:"focusin",FOCUSOUT:"focusout"};
goog.events.FocusHandler.prototype.handleEvent=function(a){var d=a.getBrowserEvent();d=new goog.events.BrowserEvent(d);d.type="focusin"==a.type||"focus"==a.type?goog.events.FocusHandler.EventType.FOCUSIN:goog.events.FocusHandler.EventType.FOCUSOUT;this.dispatchEvent(d)};goog.events.FocusHandler.prototype.disposeInternal=function(){goog.events.FocusHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKeyIn_);goog.events.unlistenByKey(this.listenKeyOut_);delete this.element_};goog.ui.ModalAriaVisibilityHelper=function(a,d){this.element_=a;this.dom_=d};
goog.ui.ModalAriaVisibilityHelper.prototype.setBackgroundVisibility=function(a){if(a){this.hiddenElements_||(this.hiddenElements_=[]);a=this.dom_.getChildren(this.dom_.getDocument().body);for(var d=0;d<a.length;d++){var f=a[d];f==this.element_||goog.a11y.aria.getState(f,goog.a11y.aria.State.HIDDEN)||(goog.a11y.aria.setState(f,goog.a11y.aria.State.HIDDEN,!0),this.hiddenElements_.push(f))}}else if(this.hiddenElements_){for(d=0;d<this.hiddenElements_.length;d++)goog.a11y.aria.removeState(this.hiddenElements_[d],
goog.a11y.aria.State.HIDDEN);this.hiddenElements_=null}};goog.ui.PopupBase=function(a,d){goog.events.EventTarget.call(this);this.handler_=new goog.events.EventHandler(this);this.setElement(a||null);d&&this.setType(d)};goog.inherits(goog.ui.PopupBase,goog.events.EventTarget);goog.ui.PopupBase.Type={TOGGLE_DISPLAY:"toggle_display",MOVE_OFFSCREEN:"move_offscreen"};goog.ui.PopupBase.prototype.element_=null;goog.ui.PopupBase.prototype.autoHide_=!0;goog.ui.PopupBase.prototype.autoHidePartners_=null;goog.ui.PopupBase.prototype.autoHideRegion_=null;
goog.ui.PopupBase.prototype.isVisible_=!1;goog.ui.PopupBase.prototype.shouldHideAsync_=!1;goog.ui.PopupBase.prototype.lastShowTime_=-1;goog.ui.PopupBase.prototype.lastHideTime_=-1;goog.ui.PopupBase.prototype.hideOnEscape_=!1;goog.ui.PopupBase.prototype.enableCrossIframeDismissal_=!0;goog.ui.PopupBase.prototype.type_=goog.ui.PopupBase.Type.TOGGLE_DISPLAY;goog.ui.PopupBase.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",BEFORE_HIDE:"beforehide",HIDE:"hide"};goog.ui.PopupBase.DEBOUNCE_DELAY_MS=150;
goog.ui.PopupBase.prototype.getType=function(){return this.type_};goog.ui.PopupBase.prototype.setType=function(a){this.type_=a};goog.ui.PopupBase.prototype.shouldHideAsync=function(){return this.shouldHideAsync_};goog.ui.PopupBase.prototype.setShouldHideAsync=function(a){this.shouldHideAsync_=a};goog.ui.PopupBase.prototype.getElement=function(){return this.element_};goog.ui.PopupBase.prototype.setElement=function(a){this.ensureNotVisible_();this.element_=a};
goog.ui.PopupBase.prototype.getAutoHide=function(){return this.autoHide_};goog.ui.PopupBase.prototype.setAutoHide=function(a){this.ensureNotVisible_();this.autoHide_=a};goog.ui.PopupBase.prototype.addAutoHidePartner=function(a){this.autoHidePartners_||(this.autoHidePartners_=[]);module$contents$goog$array_insert(this.autoHidePartners_,a)};goog.ui.PopupBase.prototype.removeAutoHidePartner=function(a){this.autoHidePartners_&&module$contents$goog$array_remove(this.autoHidePartners_,a)};
goog.ui.PopupBase.prototype.getHideOnEscape=function(){return this.hideOnEscape_};goog.ui.PopupBase.prototype.setHideOnEscape=function(a){this.ensureNotVisible_();this.hideOnEscape_=a};goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal=function(){return this.enableCrossIframeDismissal_};goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal=function(a){this.enableCrossIframeDismissal_=a};goog.ui.PopupBase.prototype.getAutoHideRegion=function(){return this.autoHideRegion_};
goog.ui.PopupBase.prototype.setAutoHideRegion=function(a){this.autoHideRegion_=a};goog.ui.PopupBase.prototype.setTransition=function(a,d){this.showTransition_=a;this.hideTransition_=d};goog.ui.PopupBase.prototype.getLastShowTime=function(){return this.lastShowTime_};goog.ui.PopupBase.prototype.getLastHideTime=function(){return this.lastHideTime_};goog.ui.PopupBase.prototype.getHandler=function(){return this.handler_};
goog.ui.PopupBase.prototype.ensureNotVisible_=function(){if(this.isVisible_)throw Error("Can not change this state of the popup while showing.");};goog.ui.PopupBase.prototype.isVisible=function(){return this.isVisible_};goog.ui.PopupBase.prototype.isOrWasRecentlyVisible=function(){return this.isVisible_||Date.now()-this.lastHideTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};
goog.ui.PopupBase.prototype.setVisible=function(a){this.showTransition_&&this.showTransition_.stop();this.hideTransition_&&this.hideTransition_.stop();a?this.show_():this.hide_()};goog.ui.PopupBase.prototype.reposition=goog.nullFunction;
goog.ui.PopupBase.prototype.show_=function(){if(!this.isVisible_&&this.onBeforeShow()){if(!this.element_)throw Error("Caller must call setElement before trying to show the popup");this.reposition();var a=goog.dom.getOwnerDocument(this.element_);this.hideOnEscape_&&this.handler_.listen(a,goog.events.EventType.KEYDOWN,this.onDocumentKeyDown_,!0);if(this.autoHide_)if(this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),goog.userAgent.IE){try{var d=a.activeElement}catch(h){}for(;d&&
d.nodeName==goog.dom.TagName.IFRAME;){try{var f=goog.dom.getFrameContentDocument(d)}catch(h){break}a=f;d=a.activeElement}this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0);this.handler_.listen(a,goog.events.EventType.DEACTIVATE,this.onDocumentBlur_)}else this.handler_.listen(a,goog.events.EventType.BLUR,this.onDocumentBlur_);this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.showPopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.reposition();
this.isVisible_=!0;this.lastShowTime_=Date.now();this.lastHideTime_=-1;if(this.showTransition_)goog.events.listenOnce(this.showTransition_,goog.fx.Transition.EventType.END,this.onShow,!1,this),this.showTransition_.play();else this.onShow()}};
goog.ui.PopupBase.prototype.hide_=function(a){if(!this.isVisible_||!this.onBeforeHide(a))return!1;this.handler_&&this.handler_.removeAll();this.isVisible_=!1;this.lastHideTime_=Date.now();this.hideTransition_?(goog.events.listenOnce(this.hideTransition_,goog.fx.Transition.EventType.END,goog.partial(this.continueHidingPopup_,a),!1,this),this.hideTransition_.play()):this.continueHidingPopup_(a);return!0};
goog.ui.PopupBase.prototype.continueHidingPopup_=function(a){this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.shouldHideAsync_?goog.Timer.callOnce(this.hidePopupElement,0,this):this.hidePopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.moveOffscreen_();this.onHide(a)};goog.ui.PopupBase.prototype.showPopupElement=function(){this.element_.style.visibility="visible";goog.style.setElementShown(this.element_,!0)};
goog.ui.PopupBase.prototype.hidePopupElement=function(){this.element_.style.visibility="hidden";goog.style.setElementShown(this.element_,!1)};goog.ui.PopupBase.prototype.moveOffscreen_=function(){this.element_.style.top="-10000px"};goog.ui.PopupBase.prototype.onBeforeShow=function(){return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)};goog.ui.PopupBase.prototype.onShow=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};
goog.ui.PopupBase.prototype.onBeforeHide=function(a){return this.dispatchEvent({type:goog.ui.PopupBase.EventType.BEFORE_HIDE,target:a})};goog.ui.PopupBase.prototype.onHide=function(a){this.dispatchEvent({type:goog.ui.PopupBase.EventType.HIDE,target:a})};goog.ui.PopupBase.prototype.onDocumentMouseDown_=function(a){a=a.target;goog.dom.contains(this.element_,a)||this.isOrWithinAutoHidePartner_(a)||!this.isWithinAutoHideRegion_(a)||this.shouldDebounce_()||this.hide_(a)};
goog.ui.PopupBase.prototype.onDocumentKeyDown_=function(a){a.keyCode==goog.events.KeyCodes.ESC&&this.hide_(a.target)&&(a.preventDefault(),a.stopPropagation())};
goog.ui.PopupBase.prototype.onDocumentBlur_=function(a){if(this.enableCrossIframeDismissal_){var d=goog.dom.getOwnerDocument(this.element_);if("undefined"!=typeof document.activeElement){if(a=d.activeElement,!a||goog.dom.contains(this.element_,a)||a.tagName==goog.dom.TagName.BODY||this.isOrWithinAutoHidePartner_(a))return}else if(a.target!=d)return;this.shouldDebounce_()||this.hide_()}};
goog.ui.PopupBase.prototype.isOrWithinAutoHidePartner_=function(a){return module$contents$goog$array_some(this.autoHidePartners_||[],function(d){return a===d||goog.dom.contains(d,a)})};goog.ui.PopupBase.prototype.isWithinAutoHideRegion_=function(a){return this.autoHideRegion_?goog.dom.contains(this.autoHideRegion_,a):!0};goog.ui.PopupBase.prototype.shouldDebounce_=function(){return Date.now()-this.lastShowTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};
goog.ui.PopupBase.prototype.disposeInternal=function(){goog.ui.PopupBase.superClass_.disposeInternal.call(this);this.handler_.dispose();module$contents$goog$dispose_dispose(this.showTransition_);module$contents$goog$dispose_dispose(this.hideTransition_);delete this.element_;delete this.handler_;delete this.autoHidePartners_};goog.ui.ModalPopup=function(a,d){goog.ui.Component.call(this,d);this.useIframeMask_=!!a;this.lastFocus_=null;this.resizeBackgroundTask_=goog.dom.animationFrame.createTask({mutate:this.resizeBackground_},this)};goog.inherits(goog.ui.ModalPopup,goog.ui.Component);goog.ui.ModalPopup.prototype.focusHandler_=null;goog.ui.ModalPopup.prototype.visible_=!1;goog.ui.ModalPopup.prototype.bgEl_=null;goog.ui.ModalPopup.prototype.bgIframeEl_=null;goog.ui.ModalPopup.prototype.tabCatcherElement_=null;
goog.ui.ModalPopup.prototype.backwardTabWrapInProgress_=!1;goog.ui.ModalPopup.prototype.getCssClass=function(){return"goog-modalpopup"};goog.ui.ModalPopup.prototype.getBackgroundIframe=function(){return this.bgIframeEl_};goog.ui.ModalPopup.prototype.getBackgroundElement=function(){return this.bgEl_};
goog.ui.ModalPopup.prototype.createDom=function(){goog.ui.ModalPopup.superClass_.createDom.call(this);var a=this.getElement();goog.asserts.assert(a);var d=goog.string.trim(this.getCssClass()).split(" ");goog.dom.classlist.addAll(a,d);goog.dom.setFocusableTabIndex(a,!0);goog.style.setElementShown(a,!1);this.manageBackgroundDom_();this.createTabCatcher_()};
goog.ui.ModalPopup.prototype.manageBackgroundDom_=function(){this.useIframeMask_&&!this.bgIframeEl_&&(this.bgIframeEl_=goog.dom.iframe.createBlank(this.getDomHelper()),this.bgIframeEl_.className=this.getCssClass()+"-bg",goog.style.setElementShown(this.bgIframeEl_,!1),goog.style.setOpacity(this.bgIframeEl_,0));this.bgEl_||(this.bgEl_=this.getDomHelper().createDom(goog.dom.TagName.DIV,this.getCssClass()+"-bg"),goog.style.setElementShown(this.bgEl_,!1))};
goog.ui.ModalPopup.prototype.createTabCatcher_=function(){this.tabCatcherElement_||(this.tabCatcherElement_=this.getDomHelper().createElement(goog.dom.TagName.SPAN),goog.style.setElementShown(this.tabCatcherElement_,!1),goog.dom.setFocusableTabIndex(this.tabCatcherElement_,!0),this.tabCatcherElement_.style.position="absolute")};
goog.ui.ModalPopup.prototype.setupBackwardTabWrap=function(){this.backwardTabWrapInProgress_=!0;try{this.tabCatcherElement_.focus()}catch(a){}goog.Timer.callOnce(this.resetBackwardTabWrap_,0,this)};goog.ui.ModalPopup.prototype.resetBackwardTabWrap_=function(){this.backwardTabWrapInProgress_=!1};
goog.ui.ModalPopup.prototype.renderBackground_=function(){goog.asserts.assert(!!this.bgEl_,"Background element must not be null.");this.bgIframeEl_&&goog.dom.insertSiblingBefore(this.bgIframeEl_,this.getElement());goog.dom.insertSiblingBefore(this.bgEl_,this.getElement())};goog.ui.ModalPopup.prototype.canDecorate=function(a){return!!a&&a.tagName==goog.dom.TagName.DIV};
goog.ui.ModalPopup.prototype.decorateInternal=function(a){goog.ui.ModalPopup.superClass_.decorateInternal.call(this,a);a=goog.string.trim(this.getCssClass()).split(" ");goog.dom.classlist.addAll(goog.asserts.assert(this.getElement()),a);this.manageBackgroundDom_();this.createTabCatcher_();goog.dom.setFocusableTabIndex(this.getElement(),!0);goog.style.setElementShown(this.getElement(),!1)};
goog.ui.ModalPopup.prototype.enterDocument=function(){this.renderBackground_();goog.ui.ModalPopup.superClass_.enterDocument.call(this);goog.dom.insertSiblingAfter(this.tabCatcherElement_,this.getElement());this.focusHandler_=new goog.events.FocusHandler(this.getDomHelper().getDocument());this.getHandler().listen(this.focusHandler_,goog.events.FocusHandler.EventType.FOCUSIN,this.onFocus);this.setA11YDetectBackground(!1)};
goog.ui.ModalPopup.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);module$contents$goog$dispose_dispose(this.focusHandler_);goog.ui.ModalPopup.superClass_.exitDocument.call(this);goog.dom.removeNode(this.bgIframeEl_);goog.dom.removeNode(this.bgEl_);goog.dom.removeNode(this.tabCatcherElement_)};
goog.ui.ModalPopup.prototype.setVisible=function(a){goog.asserts.assert(this.isInDocument(),"ModalPopup must be rendered first.");a!=this.visible_&&(this.popupShowTransition_&&this.popupShowTransition_.stop(),this.bgShowTransition_&&this.bgShowTransition_.stop(),this.popupHideTransition_&&this.popupHideTransition_.stop(),this.bgHideTransition_&&this.bgHideTransition_.stop(),this.isInDocument()&&this.setA11YDetectBackground(a),a?this.show_():this.hide_())};
goog.ui.ModalPopup.prototype.setA11YDetectBackground=function(a){this.modalAriaVisibilityHelper_||(this.modalAriaVisibilityHelper_=new goog.ui.ModalAriaVisibilityHelper(this.getElementStrict(),this.dom_));this.modalAriaVisibilityHelper_.setBackgroundVisibility(a)};goog.ui.ModalPopup.prototype.setTransition=function(a,d,f,h){this.popupShowTransition_=a;this.popupHideTransition_=d;this.bgShowTransition_=f;this.bgHideTransition_=h};
goog.ui.ModalPopup.prototype.show_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)){try{this.lastFocus_=this.getDomHelper().getDocument().activeElement}catch(a){}this.resizeBackground_();this.reposition();this.getHandler().listen(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_).listen(this.getDomHelper().getWindow(),goog.events.EventType.ORIENTATIONCHANGE,this.resizeBackgroundTask_);this.showPopupElement_(!0);this.focus();this.visible_=
!0;if(this.popupShowTransition_&&this.bgShowTransition_)goog.events.listenOnce(this.popupShowTransition_,goog.fx.Transition.EventType.END,this.onShow,!1,this),this.bgShowTransition_.play(),this.popupShowTransition_.play();else this.onShow()}};
goog.ui.ModalPopup.prototype.hide_=function(){if(this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_HIDE)){this.getHandler().unlisten(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_).unlisten(this.getDomHelper().getWindow(),goog.events.EventType.ORIENTATIONCHANGE,this.resizeBackgroundTask_);this.visible_=!1;if(this.popupHideTransition_&&this.bgHideTransition_)goog.events.listenOnce(this.popupHideTransition_,goog.fx.Transition.EventType.END,this.onHide,!1,this),
this.bgHideTransition_.play(),this.popupHideTransition_.play();else this.onHide();this.returnFocus_()}};goog.ui.ModalPopup.prototype.returnFocus_=function(){try{var a=this.getDomHelper(),d=a.getDocument().body,f=a.getDocument().activeElement||d;if(!this.lastFocus_||this.lastFocus_==d){this.lastFocus_=null;return}(f==d||a.contains(this.getElement(),f))&&this.lastFocus_.focus()}catch(h){}this.lastFocus_=null};
goog.ui.ModalPopup.prototype.showPopupElement_=function(a){this.bgIframeEl_&&goog.style.setElementShown(this.bgIframeEl_,a);this.bgEl_&&goog.style.setElementShown(this.bgEl_,a);goog.style.setElementShown(this.getElement(),a);goog.style.setElementShown(this.tabCatcherElement_,a)};goog.ui.ModalPopup.prototype.onShow=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};goog.ui.ModalPopup.prototype.onHide=function(){this.showPopupElement_(!1);this.dispatchEvent(goog.ui.PopupBase.EventType.HIDE)};
goog.ui.ModalPopup.prototype.isVisible=function(){return this.visible_};goog.ui.ModalPopup.prototype.focus=function(){this.focusElement_()};
goog.ui.ModalPopup.prototype.resizeBackground_=function(){this.bgIframeEl_&&goog.style.setElementShown(this.bgIframeEl_,!1);this.bgEl_&&goog.style.setElementShown(this.bgEl_,!1);var a=this.getDomHelper().getDocument(),d=goog.dom.getWindow(a)||window,f=goog.dom.getViewportSize(d);d=Math.max(f.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth));a=Math.max(f.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.bgIframeEl_&&(goog.style.setElementShown(this.bgIframeEl_,
!0),goog.style.setSize(this.bgIframeEl_,d,a));this.bgEl_&&(goog.style.setElementShown(this.bgEl_,!0),goog.style.setSize(this.bgEl_,d,a))};
goog.ui.ModalPopup.prototype.reposition=function(){var a=this.getDomHelper().getDocument(),d=goog.dom.getWindow(a)||window;if("fixed"==goog.style.getComputedPosition(this.getElement()))var f=a=0;else f=this.getDomHelper().getDocumentScroll(),a=f.x,f=f.y;var h=goog.style.getSize(this.getElement());d=goog.dom.getViewportSize(d);a=Math.max(a+d.width/2-h.width/2,0);f=Math.max(f+d.height/2-h.height/2,0);goog.style.setPosition(this.getElement(),a,f);goog.style.setPosition(this.tabCatcherElement_,a,f)};
goog.ui.ModalPopup.prototype.onFocus=function(a){this.backwardTabWrapInProgress_?this.resetBackwardTabWrap_():a.target==this.tabCatcherElement_&&goog.Timer.callOnce(this.focusElement_,0,this)};goog.ui.ModalPopup.prototype.getTabCatcherElement=function(){return this.tabCatcherElement_};goog.ui.ModalPopup.prototype.focusElement_=function(){try{goog.userAgent.IE&&this.getDomHelper().getDocument().body.focus(),this.getElement().focus()}catch(a){}};
goog.ui.ModalPopup.prototype.disposeInternal=function(){module$contents$goog$dispose_dispose(this.popupShowTransition_);this.popupShowTransition_=null;module$contents$goog$dispose_dispose(this.popupHideTransition_);this.popupHideTransition_=null;module$contents$goog$dispose_dispose(this.bgShowTransition_);this.bgShowTransition_=null;module$contents$goog$dispose_dispose(this.bgHideTransition_);this.bgHideTransition_=null;goog.ui.ModalPopup.superClass_.disposeInternal.call(this)};goog.ui.Dialog=function(a,d,f){goog.ui.ModalPopup.call(this,d,f);this.class_=a||"modal-dialog";this.buttons_=goog.ui.Dialog.ButtonSet.createOkCancel()};goog.inherits(goog.ui.Dialog,goog.ui.ModalPopup);goog.ui.Dialog.prototype.escapeToCancel_=!0;goog.ui.Dialog.prototype.hasTitleCloseButton_=!0;goog.ui.Dialog.prototype.modal_=!0;goog.ui.Dialog.prototype.draggable_=!0;goog.ui.Dialog.prototype.backgroundElementOpacity_=.5;goog.ui.Dialog.prototype.title_="";goog.ui.Dialog.prototype.content_=null;
goog.ui.Dialog.prototype.dragger_=null;goog.ui.Dialog.prototype.disposeOnHide_=!1;goog.ui.Dialog.prototype.titleEl_=null;goog.ui.Dialog.prototype.titleTextEl_=null;goog.ui.Dialog.prototype.titleTextId_=null;goog.ui.Dialog.prototype.titleCloseEl_=null;goog.ui.Dialog.prototype.contentEl_=null;goog.ui.Dialog.prototype.buttonEl_=null;goog.ui.Dialog.prototype.preferredAriaRole_=goog.a11y.aria.Role.DIALOG;goog.ui.Dialog.prototype.isAriaDescribedByContent_=!1;goog.ui.Dialog.prototype.getCssClass=function(){return this.class_};
goog.ui.Dialog.prototype.setTitle=function(a){this.title_=a;this.titleTextEl_&&goog.dom.setTextContent(this.titleTextEl_,a)};goog.ui.Dialog.prototype.getTitle=function(){return this.title_};goog.ui.Dialog.prototype.setTextContent=function(a){this.setSafeHtmlContent(module$contents$goog$html$SafeHtml_SafeHtml.htmlEscapePreservingNewlines(a))};goog.ui.Dialog.prototype.setSafeHtmlContent=function(a){this.content_=a;this.contentEl_&&goog.dom.safe.setInnerHtml(this.contentEl_,a)};
goog.ui.Dialog.prototype.getContent=function(){return null!=this.content_?module$contents$goog$html$SafeHtml_SafeHtml.unwrap(this.content_):""};goog.ui.Dialog.prototype.getSafeHtmlContent=function(){return this.content_};goog.ui.Dialog.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};goog.ui.Dialog.prototype.setPreferredAriaRole=function(a){this.preferredAriaRole_=a};goog.ui.Dialog.prototype.isAriaDescribedByContent=function(){return this.isAriaDescribedByContent_};
goog.ui.Dialog.prototype.setIsAriaDescribedByContent=function(a){this.isAriaDescribedByContent_=a};goog.ui.Dialog.prototype.renderIfNoDom_=function(){this.getElement()||this.render()};goog.ui.Dialog.prototype.getContentElement=function(){this.renderIfNoDom_();return this.contentEl_};goog.ui.Dialog.prototype.getTitleElement=function(){this.renderIfNoDom_();return this.titleEl_};goog.ui.Dialog.prototype.getTitleTextElement=function(){this.renderIfNoDom_();return this.titleTextEl_};
goog.ui.Dialog.prototype.getTitleCloseElement=function(){this.renderIfNoDom_();return this.titleCloseEl_};goog.ui.Dialog.prototype.getDialogCloseMessage=function(){return goog.ui.Dialog.MSG_GOOG_UI_DIALOG_CLOSE_};goog.ui.Dialog.prototype.getButtonElement=function(){this.renderIfNoDom_();return this.buttonEl_};goog.ui.Dialog.prototype.getDialogElement=function(){this.renderIfNoDom_();return this.getElement()};goog.ui.Dialog.prototype.getBackgroundElement=function(){this.renderIfNoDom_();return goog.ui.Dialog.superClass_.getBackgroundElement.call(this)};
goog.ui.Dialog.prototype.getBackgroundElementOpacity=function(){return this.backgroundElementOpacity_};goog.ui.Dialog.prototype.setBackgroundElementOpacity=function(a){this.backgroundElementOpacity_=a;this.getElement()&&(a=this.getBackgroundElement())&&goog.style.setOpacity(a,this.backgroundElementOpacity_)};goog.ui.Dialog.prototype.setModal=function(a){a!=this.modal_&&this.setModalInternal_(a)};
goog.ui.Dialog.prototype.setModalInternal_=function(a){this.modal_=a;if(this.isInDocument()){var d=this.getDomHelper(),f=this.getBackgroundElement(),h=this.getBackgroundIframe();a?(h&&d.insertSiblingBefore(h,this.getElement()),d.insertSiblingBefore(f,this.getElement())):(d.removeNode(h),d.removeNode(f))}this.isVisible()&&this.setA11YDetectBackground(a)};goog.ui.Dialog.prototype.getModal=function(){return this.modal_};goog.ui.Dialog.prototype.getClass=function(){return this.getCssClass()};
goog.ui.Dialog.prototype.setDraggable=function(a){this.draggable_=a;this.setDraggingEnabled_(a&&this.isInDocument())};goog.ui.Dialog.prototype.createDragger=function(){return new goog.fx.Dragger(this.getElement(),this.titleEl_)};goog.ui.Dialog.prototype.getDraggable=function(){return this.draggable_};
goog.ui.Dialog.prototype.setDraggingEnabled_=function(a){var d=goog.string.trim(this.class_+"-title-draggable").split(" ");this.getElement()&&(a?goog.dom.classlist.addAll(goog.asserts.assert(this.titleEl_),d):goog.dom.classlist.removeAll(goog.asserts.assert(this.titleEl_),d));a&&!this.dragger_?(this.dragger_=this.createDragger(),goog.dom.classlist.addAll(goog.asserts.assert(this.titleEl_),d),goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.setDraggerLimits_,!1,this)):!a&&this.dragger_&&
(this.dragger_.dispose(),this.dragger_=null)};
goog.ui.Dialog.prototype.createDom=function(){goog.ui.Dialog.superClass_.createDom.call(this);var a=this.getElement();goog.asserts.assert(a,"getElement() returns null");var d=this.getDomHelper();this.titleTextId_=this.getId();const f=this.makeId("contentEl");this.titleEl_=d.createDom(goog.dom.TagName.DIV,this.class_+"-title",this.titleTextEl_=d.createDom(goog.dom.TagName.SPAN,{className:this.class_+"-title-text",id:this.titleTextId_},this.title_),this.titleCloseEl_=d.createDom(goog.dom.TagName.SPAN,
this.class_+"-title-close"));goog.dom.append(a,this.titleEl_,this.contentEl_=d.createDom(goog.dom.TagName.DIV,{className:this.class_+"-content",id:f}),this.buttonEl_=d.createDom(goog.dom.TagName.DIV,this.class_+"-buttons"));goog.a11y.aria.setRole(this.titleTextEl_,goog.a11y.aria.Role.HEADING);goog.a11y.aria.setRole(this.titleCloseEl_,goog.a11y.aria.Role.BUTTON);goog.dom.setFocusableTabIndex(this.titleCloseEl_,!0);goog.a11y.aria.setLabel(this.titleCloseEl_,goog.ui.Dialog.MSG_GOOG_UI_DIALOG_CLOSE_);
goog.a11y.aria.setRole(a,this.getPreferredAriaRole());goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleTextId_||"");this.content_&&(goog.dom.safe.setInnerHtml(this.contentEl_,this.content_),this.isAriaDescribedByContent_&&f&&goog.a11y.aria.setState(a,goog.a11y.aria.State.DESCRIBEDBY,f));goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_);this.buttons_&&this.buttons_.attachToElement(this.buttonEl_);goog.style.setElementShown(this.buttonEl_,!!this.buttons_);this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};
goog.ui.Dialog.prototype.decorateInternal=function(a){goog.ui.Dialog.superClass_.decorateInternal.call(this,a);a=this.getElement();goog.asserts.assert(a,"The DOM element for dialog cannot be null.");var d=this.class_+"-content";this.contentEl_=goog.dom.getElementsByTagNameAndClass(null,d,a)[0];this.contentEl_||(this.contentEl_=this.getDomHelper().createDom(goog.dom.TagName.DIV,d),this.content_&&goog.dom.safe.setInnerHtml(this.contentEl_,this.content_),a.appendChild(this.contentEl_));d=this.class_+
"-title";var f=this.class_+"-title-text",h=this.class_+"-title-close";(this.titleEl_=goog.dom.getElementsByTagNameAndClass(null,d,a)[0])?(this.titleTextEl_=goog.dom.getElementsByTagNameAndClass(null,f,this.titleEl_)[0],this.titleCloseEl_=goog.dom.getElementsByTagNameAndClass(null,h,this.titleEl_)[0]):(this.titleEl_=this.getDomHelper().createDom(goog.dom.TagName.DIV,d),a.insertBefore(this.titleEl_,this.contentEl_));this.titleTextEl_?(this.title_=goog.dom.getTextContent(this.titleTextEl_),this.titleTextEl_.id||
(this.titleTextEl_.id=this.getId())):(this.titleTextEl_=goog.dom.createDom(goog.dom.TagName.SPAN,{className:f,id:this.getId()}),this.titleEl_.appendChild(this.titleTextEl_));this.titleTextId_=this.titleTextEl_.id;goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleTextId_||"");this.titleCloseEl_||(this.titleCloseEl_=this.getDomHelper().createDom(goog.dom.TagName.SPAN,h),this.titleEl_.appendChild(this.titleCloseEl_));goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_);
d=this.class_+"-buttons";(this.buttonEl_=goog.dom.getElementsByTagNameAndClass(null,d,a)[0])?(this.buttons_=new goog.ui.Dialog.ButtonSet(this.getDomHelper()),this.buttons_.decorate(this.buttonEl_)):(this.buttonEl_=this.getDomHelper().createDom(goog.dom.TagName.DIV,d),a.appendChild(this.buttonEl_),this.buttons_&&this.buttons_.attachToElement(this.buttonEl_),goog.style.setElementShown(this.buttonEl_,!!this.buttons_));this.setBackgroundElementOpacity(this.backgroundElementOpacity_)};
goog.ui.Dialog.prototype.enterDocument=function(){goog.ui.Dialog.superClass_.enterDocument.call(this);this.getHandler().listen(this.getElement(),goog.events.EventType.KEYDOWN,this.onKey_).listen(this.getElement(),goog.events.EventType.KEYPRESS,this.onKey_);this.getHandler().listen(this.buttonEl_,goog.events.EventType.CLICK,this.onButtonClick_);this.setDraggingEnabled_(this.draggable_);this.getHandler().listen(this.titleCloseEl_,goog.events.EventType.CLICK,this.onTitleCloseClick_);var a=this.getElement();
goog.asserts.assert(a,"The DOM element for dialog cannot be null");goog.a11y.aria.setRole(a,this.getPreferredAriaRole());""!==this.titleTextEl_.id&&goog.a11y.aria.setState(a,goog.a11y.aria.State.LABELLEDBY,this.titleTextEl_.id);this.modal_||this.setModalInternal_(!1)};goog.ui.Dialog.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1);this.setDraggingEnabled_(!1);goog.ui.Dialog.superClass_.exitDocument.call(this)};
goog.ui.Dialog.prototype.setVisible=function(a){a!=this.isVisible()&&(this.isInDocument()||this.render(),goog.ui.Dialog.superClass_.setVisible.call(this,a))};goog.ui.Dialog.prototype.onShow=function(){goog.ui.Dialog.superClass_.onShow.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_SHOW)};goog.ui.Dialog.prototype.onHide=function(){goog.ui.Dialog.superClass_.onHide.call(this);this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_HIDE);this.disposeOnHide_&&this.dispose()};
goog.ui.Dialog.prototype.setDraggerLimits_=function(a){var d=this.getDomHelper().getDocument();a=goog.dom.getWindow(d)||window;a=goog.dom.getViewportSize(a);var f=Math.max(d.body.scrollWidth,a.width);d=Math.max(d.body.scrollHeight,a.height);var h=goog.style.getSize(this.getElement());"fixed"==goog.style.getComputedPosition(this.getElement())?this.dragger_.setLimits(new goog.math.Rect(0,0,Math.max(0,a.width-h.width),Math.max(0,a.height-h.height))):this.dragger_.setLimits(new goog.math.Rect(0,0,f-h.width,
d-h.height))};goog.ui.Dialog.prototype.onTitleCloseClick_=function(a){this.handleTitleClose_()};goog.ui.Dialog.prototype.handleTitleClose_=function(){if(this.hasTitleCloseButton_){var a=this.getButtonSet(),d=a&&a.getCancel();d?(a=a.get(d),this.dispatchEvent(new goog.ui.Dialog.Event(d,a))&&this.setVisible(!1)):this.setVisible(!1)}};goog.ui.Dialog.prototype.getHasTitleCloseButton=function(){return this.hasTitleCloseButton_};
goog.ui.Dialog.prototype.setHasTitleCloseButton=function(a){this.hasTitleCloseButton_=a;this.titleCloseEl_&&goog.style.setElementShown(this.titleCloseEl_,this.hasTitleCloseButton_)};goog.ui.Dialog.prototype.isEscapeToCancel=function(){return this.escapeToCancel_};goog.ui.Dialog.prototype.setEscapeToCancel=function(a){this.escapeToCancel_=a};goog.ui.Dialog.prototype.setDisposeOnHide=function(a){this.disposeOnHide_=a};goog.ui.Dialog.prototype.getDisposeOnHide=function(){return this.disposeOnHide_};
goog.ui.Dialog.prototype.disposeInternal=function(){this.buttonEl_=this.titleCloseEl_=null;goog.ui.Dialog.superClass_.disposeInternal.call(this)};goog.ui.Dialog.prototype.setButtonSet=function(a){this.buttons_=a;this.buttonEl_&&(this.buttons_?this.buttons_.attachToElement(this.buttonEl_):goog.dom.safe.setInnerHtml(this.buttonEl_,module$contents$goog$html$SafeHtml_SafeHtml.EMPTY),goog.style.setElementShown(this.buttonEl_,!!this.buttons_))};goog.ui.Dialog.prototype.getButtonSet=function(){return this.buttons_};
goog.ui.Dialog.prototype.onButtonClick_=function(a){if((a=this.findParentButton_(a.target))&&!a.disabled){a=a.name;var d=this.getButtonSet().get(a);this.dispatchEvent(new goog.ui.Dialog.Event(a,d))&&this.setVisible(!1)}};goog.ui.Dialog.prototype.findParentButton_=function(a){for(;null!=a&&a!=this.buttonEl_;){if(a.tagName==goog.dom.TagName.BUTTON)return a;a=a.parentNode}return null};
goog.ui.Dialog.prototype.onKey_=function(a){var d=!1,f=!1,h=this.getButtonSet(),l=a.target;if(a.type==goog.events.EventType.KEYDOWN)if(this.escapeToCancel_&&a.keyCode==goog.events.KeyCodes.ESC){var m=h&&h.getCancel();l=l.tagName==goog.dom.TagName.SELECT&&!l.disabled;m&&!l?(f=!0,d=h.get(m),d=this.dispatchEvent(new goog.ui.Dialog.Event(m,d))):l||(d=!0)}else a.keyCode==goog.events.KeyCodes.TAB&&a.shiftKey&&l==this.getElement()&&this.setupBackwardTabWrap();else if(a.keyCode==goog.events.KeyCodes.ENTER){if(l.tagName==
goog.dom.TagName.BUTTON&&!l.disabled)m=l.name;else if(l==this.titleCloseEl_)this.handleTitleClose_();else if(h){var p=h.getDefault(),q=p&&h.getButton(p);l=(l.tagName==goog.dom.TagName.TEXTAREA||l.tagName==goog.dom.TagName.SELECT||l.tagName==goog.dom.TagName.A)&&!l.disabled;!q||q.disabled||l||(m=p)}m&&h&&(f=!0,d=this.dispatchEvent(new goog.ui.Dialog.Event(m,String(h.get(m)))))}else l!=this.titleCloseEl_||a.keyCode!=goog.events.KeyCodes.SPACE&&a.key!=goog.events.Keys.SPACE||this.handleTitleClose_();
if(d||f)a.stopPropagation(),a.preventDefault();d&&this.setVisible(!1)};goog.ui.Dialog.Event=function(a,d){this.type=goog.ui.Dialog.EventType.SELECT;this.key=a;this.caption=d};goog.inherits(goog.ui.Dialog.Event,goog.events.Event);goog.ui.Dialog.SELECT_EVENT="dialogselect";goog.ui.Dialog.EventType={SELECT:"dialogselect",AFTER_HIDE:"afterhide",AFTER_SHOW:"aftershow"};
goog.ui.Dialog.ButtonSet=function(a){module$contents$goog$ui$Map_UiMap.call(this);this.dom_=a||goog.dom.getDomHelper();this.class_="goog-buttonset";this.cancelButton_=this.element_=this.defaultButton_=null};goog.inherits(goog.ui.Dialog.ButtonSet,module$contents$goog$ui$Map_UiMap);goog.ui.Dialog.ButtonSet.prototype.clear=function(){module$contents$goog$ui$Map_UiMap.prototype.clear.call(this);this.defaultButton_=this.cancelButton_=null};
goog.ui.Dialog.ButtonSet.prototype.set=function(a,d,f,h){module$contents$goog$ui$Map_UiMap.prototype.set.call(this,a,d);f&&(this.defaultButton_=a);h&&(this.cancelButton_=a);return this};goog.ui.Dialog.ButtonSet.prototype.addButton=function(a,d,f){return this.set(a.key,a.caption,d,f)};goog.ui.Dialog.ButtonSet.prototype.attachToElement=function(a){this.element_=a;this.render()};
goog.ui.Dialog.ButtonSet.prototype.render=function(){if(this.element_){goog.dom.safe.setInnerHtml(this.element_,module$contents$goog$html$SafeHtml_SafeHtml.EMPTY);var a=goog.dom.getDomHelper(this.element_);this.forEach(function(d,f){d=a.createDom(goog.dom.TagName.BUTTON,{name:f},d);f==this.defaultButton_&&(d.className=this.class_+"-default");this.element_.appendChild(d)},this)}};
goog.ui.Dialog.ButtonSet.prototype.decorate=function(a){if(a&&a.nodeType==goog.dom.NodeType.ELEMENT){this.element_=a;a=goog.dom.getElementsByTagName(goog.dom.TagName.BUTTON,this.element_);for(var d=0,f,h,l;f=a[d];d++)if(h=f.name||f.id,l=goog.dom.getTextContent(f)||f.value,h){var m=0==d;this.set(h,l,m,f.name==goog.ui.Dialog.DefaultButtonKeys.CANCEL);m&&goog.dom.classlist.add(f,this.class_+"-default")}}};goog.ui.Dialog.ButtonSet.prototype.getElement=function(){return this.element_};
goog.ui.Dialog.ButtonSet.prototype.getDomHelper=function(){return this.dom_};goog.ui.Dialog.ButtonSet.prototype.setDefault=function(a){this.defaultButton_=a};goog.ui.Dialog.ButtonSet.prototype.getDefault=function(){return this.defaultButton_};goog.ui.Dialog.ButtonSet.prototype.setCancel=function(a){this.cancelButton_=a};goog.ui.Dialog.ButtonSet.prototype.getCancel=function(){return this.cancelButton_};
goog.ui.Dialog.ButtonSet.prototype.getButton=function(a){for(var d=this.getAllButtons(),f=0,h;h=d[f];f++)if(h.name==a||h.id==a)return h;return null};goog.ui.Dialog.ButtonSet.prototype.getAllButtons=function(){return goog.dom.getElementsByTagName(goog.dom.TagName.BUTTON,goog.asserts.assert(this.element_))};goog.ui.Dialog.ButtonSet.prototype.setButtonEnabled=function(a,d){if(a=this.getButton(a))a.disabled=!d};
goog.ui.Dialog.ButtonSet.prototype.setAllButtonsEnabled=function(a){for(var d=this.getAllButtons(),f=0,h;h=d[f];f++)h.disabled=!a};goog.ui.Dialog.DefaultButtonKeys={OK:"ok",CANCEL:"cancel",YES:"yes",NO:"no",SAVE:"save",CONTINUE:"continue"};goog.ui.Dialog.MSG_DIALOG_OK_=goog.getMsg("OK");goog.ui.Dialog.MSG_DIALOG_CANCEL_=goog.getMsg("Cancel");goog.ui.Dialog.MSG_DIALOG_YES_=goog.getMsg("Yes");goog.ui.Dialog.MSG_DIALOG_NO_=goog.getMsg("No");goog.ui.Dialog.MSG_DIALOG_SAVE_=goog.getMsg("Save");
goog.ui.Dialog.MSG_DIALOG_CONTINUE_=goog.getMsg("Continue");goog.ui.Dialog.MSG_GOOG_UI_DIALOG_CLOSE_=goog.getMsg("Close");goog.ui.Dialog.DefaultButtonCaptions={OK:goog.ui.Dialog.MSG_DIALOG_OK_,CANCEL:goog.ui.Dialog.MSG_DIALOG_CANCEL_,YES:goog.ui.Dialog.MSG_DIALOG_YES_,NO:goog.ui.Dialog.MSG_DIALOG_NO_,SAVE:goog.ui.Dialog.MSG_DIALOG_SAVE_,CONTINUE:goog.ui.Dialog.MSG_DIALOG_CONTINUE_};
goog.ui.Dialog.ButtonSet.DefaultButtons={OK:{key:goog.ui.Dialog.DefaultButtonKeys.OK,caption:goog.ui.Dialog.DefaultButtonCaptions.OK},CANCEL:{key:goog.ui.Dialog.DefaultButtonKeys.CANCEL,caption:goog.ui.Dialog.DefaultButtonCaptions.CANCEL},YES:{key:goog.ui.Dialog.DefaultButtonKeys.YES,caption:goog.ui.Dialog.DefaultButtonCaptions.YES},NO:{key:goog.ui.Dialog.DefaultButtonKeys.NO,caption:goog.ui.Dialog.DefaultButtonCaptions.NO},SAVE:{key:goog.ui.Dialog.DefaultButtonKeys.SAVE,caption:goog.ui.Dialog.DefaultButtonCaptions.SAVE},
CONTINUE:{key:goog.ui.Dialog.DefaultButtonKeys.CONTINUE,caption:goog.ui.Dialog.DefaultButtonCaptions.CONTINUE}};goog.ui.Dialog.ButtonSet.createOk=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0,!0)};goog.ui.Dialog.ButtonSet.createOkCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};
goog.ui.Dialog.ButtonSet.createYesNo=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!1,!0)};goog.ui.Dialog.ButtonSet.createYesNoCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)};
goog.ui.Dialog.ButtonSet.createContinueSaveCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CONTINUE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.SAVE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!0,!0)};
(function(){"undefined"!=typeof document&&(goog.ui.Dialog.ButtonSet.OK=goog.ui.Dialog.ButtonSet.createOk(),goog.ui.Dialog.ButtonSet.OK_CANCEL=goog.ui.Dialog.ButtonSet.createOkCancel(),goog.ui.Dialog.ButtonSet.YES_NO=goog.ui.Dialog.ButtonSet.createYesNo(),goog.ui.Dialog.ButtonSet.YES_NO_CANCEL=goog.ui.Dialog.ButtonSet.createYesNoCancel(),goog.ui.Dialog.ButtonSet.CONTINUE_SAVE_CANCEL=goog.ui.Dialog.ButtonSet.createContinueSaveCancel())})();goog.net={};goog.net.XhrLike=function(){};goog.net.XhrLike.prototype.open=function(a,d,f,h,l){};goog.net.XhrLike.prototype.send=function(a){};goog.net.XhrLike.prototype.abort=function(){};goog.net.XhrLike.prototype.setRequestHeader=function(a,d){};goog.net.XhrLike.prototype.getResponseHeader=function(a){};goog.net.XhrLike.prototype.getAllResponseHeaders=function(){};goog.net.XhrLike.prototype.setTrustToken=function(a){};goog.net.XmlHttpFactory=function(){};goog.net.XmlHttpFactory.prototype.cachedOptions_=null;goog.net.XmlHttpFactory.prototype.createInstance=goog.abstractMethod;goog.net.XmlHttpFactory.prototype.getOptions=function(){return this.cachedOptions_||(this.cachedOptions_=this.internalGetOptions())};goog.net.XmlHttpFactory.prototype.internalGetOptions=goog.abstractMethod;goog.net.WrapperXmlHttpFactory=function(a,d){goog.net.XmlHttpFactory.call(this);this.xhrFactory_=a;this.optionsFactory_=d};goog.inherits(goog.net.WrapperXmlHttpFactory,goog.net.XmlHttpFactory);goog.net.WrapperXmlHttpFactory.prototype.createInstance=function(){return this.xhrFactory_()};goog.net.WrapperXmlHttpFactory.prototype.getOptions=function(){return this.optionsFactory_()};goog.net.XmlHttp=function(){return goog.net.XmlHttp.factory_.createInstance()};goog.net.XmlHttp.ASSUME_NATIVE_XHR=!1;goog.net.XmlHttpDefines={};goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR=!1;goog.net.XmlHttp.getOptions=function(){return goog.net.XmlHttp.factory_.getOptions()};goog.net.XmlHttp.OptionType={USE_NULL_FUNCTION:0,LOCAL_REQUEST_ERROR:1};goog.net.XmlHttp.ReadyState={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETE:4};
goog.net.XmlHttp.setFactory=function(a,d){goog.net.XmlHttp.setGlobalFactory(new goog.net.WrapperXmlHttpFactory(goog.asserts.assert(a),goog.asserts.assert(d)))};goog.net.XmlHttp.setGlobalFactory=function(a){goog.net.XmlHttp.factory_=a};goog.net.DefaultXmlHttpFactory=function(){goog.net.XmlHttpFactory.call(this)};goog.inherits(goog.net.DefaultXmlHttpFactory,goog.net.XmlHttpFactory);
goog.net.DefaultXmlHttpFactory.prototype.createInstance=function(){const a=this.getProgId_();return a?new ActiveXObject(a):new XMLHttpRequest};goog.net.DefaultXmlHttpFactory.prototype.internalGetOptions=function(){const a={};this.getProgId_()&&(a[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION]=!0,a[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR]=!0);return a};
goog.net.DefaultXmlHttpFactory.prototype.getProgId_=function(){if(goog.net.XmlHttp.ASSUME_NATIVE_XHR||goog.net.XmlHttpDefines.ASSUME_NATIVE_XHR)return"";if(!this.ieProgId_&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){const a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(let d=0;d<a.length;d++){const f=a[d];try{return new ActiveXObject(f),this.ieProgId_=f}catch(h){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");
}return this.ieProgId_};goog.net.XmlHttp.setGlobalFactory(new goog.net.DefaultXmlHttpFactory);goog.json={};goog.json.Replacer={};goog.json.Reviver={};goog.json.USE_NATIVE_JSON=!1;goog.json.TRY_NATIVE_JSON=!0;goog.json.isValid=function(a){return/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))};goog.json.errorLogger_=goog.nullFunction;
goog.json.setErrorLogger=function(a){goog.json.errorLogger_=a};goog.json.parse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(a){let d;if(goog.json.TRY_NATIVE_JSON)try{return goog.global.JSON.parse(a)}catch(f){d=f}a=String(a);if(goog.json.isValid(a))try{const f=eval("("+a+")");d&&goog.json.errorLogger_("Invalid JSON: "+a,d);return f}catch(f){}throw Error("Invalid JSON string: "+a);};goog.json.serialize=goog.json.USE_NATIVE_JSON?goog.global.JSON.stringify:function(a,d){return(new goog.json.Serializer(d)).serialize(a)};
goog.json.Serializer=function(a){this.replacer_=a};goog.json.Serializer.prototype.serialize=function(a){const d=[];this.serializeInternal(a,d);return d.join("")};
goog.json.Serializer.prototype.serializeInternal=function(a,d){if(null==a)d.push("null");else{if("object"==typeof a){if(Array.isArray(a)){this.serializeArray(a,d);return}if(a instanceof String||a instanceof Number||a instanceof Boolean)a=a.valueOf();else{this.serializeObject_(a,d);return}}switch(typeof a){case "string":this.serializeString_(a,d);break;case "number":this.serializeNumber_(a,d);break;case "boolean":d.push(String(a));break;case "function":d.push("null");break;default:throw Error("Unknown type: "+
typeof a);}}};goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"};goog.json.Serializer.charsToReplace_=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;
goog.json.Serializer.prototype.serializeString_=function(a,d){d.push('"',a.replace(goog.json.Serializer.charsToReplace_,function(f){let h=goog.json.Serializer.charToJsonCharCache_[f];h||(h="\\u"+(f.charCodeAt(0)|65536).toString(16).substr(1),goog.json.Serializer.charToJsonCharCache_[f]=h);return h}),'"')};goog.json.Serializer.prototype.serializeNumber_=function(a,d){d.push(isFinite(a)&&!isNaN(a)?String(a):"null")};
goog.json.Serializer.prototype.serializeArray=function(a,d){const f=a.length;d.push("[");var h="";for(let l=0;l<f;l++)d.push(h),h=a[l],this.serializeInternal(this.replacer_?this.replacer_.call(a,String(l),h):h,d),h=",";d.push("]")};
goog.json.Serializer.prototype.serializeObject_=function(a,d){d.push("{");let f="";for(const h in a)if(Object.prototype.hasOwnProperty.call(a,h)){const l=a[h];"function"!=typeof l&&(d.push(f),this.serializeString_(h,d),d.push(":"),this.serializeInternal(this.replacer_?this.replacer_.call(a,h,l):l,d),f=",")}d.push("}")};goog.collections={};goog.collections.maps={};class module$contents$goog$collections$maps_MapLike{constructor(){}set(a,d){}get(a){}keys(){}values(){}has(a){}}goog.collections.maps.MapLike=module$contents$goog$collections$maps_MapLike;function module$contents$goog$collections$maps_setAll(a,d){if(d)for(const [f,h]of d)a.set(f,h)}goog.collections.maps.setAll=module$contents$goog$collections$maps_setAll;
function module$contents$goog$collections$maps_hasValue(a,d,f=module$contents$goog$collections$maps_defaultEqualityFn){for(const h of a.values())if(f(h,d))return!0;return!1}goog.collections.maps.hasValue=module$contents$goog$collections$maps_hasValue;const module$contents$goog$collections$maps_defaultEqualityFn=(a,d)=>a===d;
function module$contents$goog$collections$maps_equals(a,d,f=module$contents$goog$collections$maps_defaultEqualityFn){if(a===d)return!0;if(a.size!==d.size)return!1;for(const h of a.keys())if(!d.has(h)||!f(a.get(h),d.get(h)))return!1;return!0}goog.collections.maps.equals=module$contents$goog$collections$maps_equals;function module$contents$goog$collections$maps_transpose(a){const d=new Map;for(const f of a.keys()){const h=a.get(f);d.set(h,f)}return d}goog.collections.maps.transpose=module$contents$goog$collections$maps_transpose;
function module$contents$goog$collections$maps_toObject(a){const d={};for(const f of a.keys())d[f]=a.get(f);return d}goog.collections.maps.toObject=module$contents$goog$collections$maps_toObject;goog.structs={};goog.structs.getCount=function(a){return a.getCount&&"function"==typeof a.getCount?a.getCount():goog.isArrayLike(a)||"string"===typeof a?a.length:module$contents$goog$object_getCount(a)};
goog.structs.getValues=function(a){if(a.getValues&&"function"==typeof a.getValues)return a.getValues();if("undefined"!==typeof Map&&a instanceof Map||"undefined"!==typeof Set&&a instanceof Set)return Array.from(a.values());if("string"===typeof a)return a.split("");if(goog.isArrayLike(a)){for(var d=[],f=a.length,h=0;h<f;h++)d.push(a[h]);return d}return module$contents$goog$object_getValues(a)};
goog.structs.getKeys=function(a){if(a.getKeys&&"function"==typeof a.getKeys)return a.getKeys();if(!a.getValues||"function"!=typeof a.getValues){if("undefined"!==typeof Map&&a instanceof Map)return Array.from(a.keys());if(!("undefined"!==typeof Set&&a instanceof Set)){if(goog.isArrayLike(a)||"string"===typeof a){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}return module$contents$goog$object_getKeys(a)}}};
goog.structs.contains=function(a,d){return a.contains&&"function"==typeof a.contains?a.contains(d):a.containsValue&&"function"==typeof a.containsValue?a.containsValue(d):goog.isArrayLike(a)||"string"===typeof a?module$contents$goog$array_contains(a,d):module$contents$goog$object_containsValue(a,d)};goog.structs.isEmpty=function(a){return a.isEmpty&&"function"==typeof a.isEmpty?a.isEmpty():goog.isArrayLike(a)||"string"===typeof a?0===a.length:module$contents$goog$object_isEmpty(a)};
goog.structs.clear=function(a){a.clear&&"function"==typeof a.clear?a.clear():goog.isArrayLike(a)?module$contents$goog$array_clear(a):module$contents$goog$object_clear(a)};goog.structs.forEach=function(a,d,f){if(a.forEach&&"function"==typeof a.forEach)a.forEach(d,f);else if(goog.isArrayLike(a)||"string"===typeof a)Array.prototype.forEach.call(a,d,f);else for(var h=goog.structs.getKeys(a),l=goog.structs.getValues(a),m=l.length,p=0;p<m;p++)d.call(f,l[p],h&&h[p],a)};
goog.structs.filter=function(a,d,f){if("function"==typeof a.filter)return a.filter(d,f);if(goog.isArrayLike(a)||"string"===typeof a)return Array.prototype.filter.call(a,d,f);var h=goog.structs.getKeys(a),l=goog.structs.getValues(a),m=l.length;if(h){var p={};for(var q=0;q<m;q++)d.call(f,l[q],h[q],a)&&(p[h[q]]=l[q])}else for(p=[],q=0;q<m;q++)d.call(f,l[q],void 0,a)&&p.push(l[q]);return p};
goog.structs.map=function(a,d,f){if("function"==typeof a.map)return a.map(d,f);if(goog.isArrayLike(a)||"string"===typeof a)return Array.prototype.map.call(a,d,f);var h=goog.structs.getKeys(a),l=goog.structs.getValues(a),m=l.length;if(h){var p={};for(var q=0;q<m;q++)p[h[q]]=d.call(f,l[q],h[q],a)}else for(p=[],q=0;q<m;q++)p[q]=d.call(f,l[q],void 0,a);return p};
goog.structs.some=function(a,d,f){if("function"==typeof a.some)return a.some(d,f);if(goog.isArrayLike(a)||"string"===typeof a)return Array.prototype.some.call(a,d,f);for(var h=goog.structs.getKeys(a),l=goog.structs.getValues(a),m=l.length,p=0;p<m;p++)if(d.call(f,l[p],h&&h[p],a))return!0;return!1};
goog.structs.every=function(a,d,f){if("function"==typeof a.every)return a.every(d,f);if(goog.isArrayLike(a)||"string"===typeof a)return Array.prototype.every.call(a,d,f);for(var h=goog.structs.getKeys(a),l=goog.structs.getValues(a),m=l.length,p=0;p<m;p++)if(!d.call(f,l[p],h&&h[p],a))return!1;return!0};goog.uri={};goog.uri.utils={};goog.uri.utils.QueryArray={};goog.uri.utils.QueryValue={};goog.uri.utils.CharCode_={AMPERSAND:38,EQUAL:61,HASH:35,QUESTION:63};goog.uri.utils.buildFromEncodedParts=function(a,d,f,h,l,m,p){var q="";a&&(q+=a+":");f&&(q+="//",d&&(q+=d+"@"),q+=f,h&&(q+=":"+h));l&&(q+=l);m&&(q+="?"+m);p&&(q+="#"+p);return q};goog.uri.utils.splitRe_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");
goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.urlPackageSupportLoggingHandler_=null;goog.uri.utils.setUrlPackageSupportLoggingHandler=function(a){goog.uri.utils.urlPackageSupportLoggingHandler_=a};
goog.uri.utils.split=function(a){var d=a.match(goog.uri.utils.splitRe_);goog.uri.utils.urlPackageSupportLoggingHandler_&&0<=["http","https","ws","wss","ftp"].indexOf(d[goog.uri.utils.ComponentIndex.SCHEME])&&goog.uri.utils.urlPackageSupportLoggingHandler_(a);return d};goog.uri.utils.decodeIfPossible_=function(a,d){return a?d?decodeURI(a):decodeURIComponent(a):a};goog.uri.utils.getComponentByIndex_=function(a,d){return goog.uri.utils.split(d)[a]||null};
goog.uri.utils.getScheme=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.SCHEME,a)};goog.uri.utils.getEffectiveScheme=function(a){a=goog.uri.utils.getScheme(a);!a&&goog.global.self&&goog.global.self.location&&(a=goog.global.self.location.protocol,a=a.substr(0,a.length-1));return a?a.toLowerCase():""};goog.uri.utils.getUserInfoEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.USER_INFO,a)};goog.uri.utils.getUserInfo=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getUserInfoEncoded(a))};
goog.uri.utils.getDomainEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.DOMAIN,a)};goog.uri.utils.getDomain=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getDomainEncoded(a),!0)};goog.uri.utils.getPort=function(a){return Number(goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PORT,a))||null};goog.uri.utils.getPathEncoded=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.PATH,a)};
goog.uri.utils.getPath=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getPathEncoded(a),!0)};goog.uri.utils.getQueryData=function(a){return goog.uri.utils.getComponentByIndex_(goog.uri.utils.ComponentIndex.QUERY_DATA,a)};goog.uri.utils.getFragmentEncoded=function(a){var d=a.indexOf("#");return 0>d?null:a.substr(d+1)};goog.uri.utils.setFragmentEncoded=function(a,d){return goog.uri.utils.removeFragment(a)+(d?"#"+d:"")};goog.uri.utils.getFragment=function(a){return goog.uri.utils.decodeIfPossible_(goog.uri.utils.getFragmentEncoded(a))};
goog.uri.utils.getHost=function(a){a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(a[goog.uri.utils.ComponentIndex.SCHEME],a[goog.uri.utils.ComponentIndex.USER_INFO],a[goog.uri.utils.ComponentIndex.DOMAIN],a[goog.uri.utils.ComponentIndex.PORT])};goog.uri.utils.getOrigin=function(a){a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(a[goog.uri.utils.ComponentIndex.SCHEME],null,a[goog.uri.utils.ComponentIndex.DOMAIN],a[goog.uri.utils.ComponentIndex.PORT])};
goog.uri.utils.getPathAndAfter=function(a){a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(null,null,null,null,a[goog.uri.utils.ComponentIndex.PATH],a[goog.uri.utils.ComponentIndex.QUERY_DATA],a[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.removeFragment=function(a){var d=a.indexOf("#");return 0>d?a:a.substr(0,d)};
goog.uri.utils.haveSameDomain=function(a,d){a=goog.uri.utils.split(a);d=goog.uri.utils.split(d);return a[goog.uri.utils.ComponentIndex.DOMAIN]==d[goog.uri.utils.ComponentIndex.DOMAIN]&&a[goog.uri.utils.ComponentIndex.SCHEME]==d[goog.uri.utils.ComponentIndex.SCHEME]&&a[goog.uri.utils.ComponentIndex.PORT]==d[goog.uri.utils.ComponentIndex.PORT]};
goog.uri.utils.assertNoFragmentsOrQueries_=function(a){goog.asserts.assert(0>a.indexOf("#")&&0>a.indexOf("?"),"goog.uri.utils: Fragment or query identifiers are not supported: [%s]",a)};goog.uri.utils.parseQueryData=function(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var h=a[f].indexOf("="),l=null;if(0<=h){var m=a[f].substring(0,h);l=a[f].substring(h+1)}else m=a[f];d(m,l?goog.string.urlDecode(l):"")}}};
goog.uri.utils.splitQueryData_=function(a){var d=a.indexOf("#");0>d&&(d=a.length);var f=a.indexOf("?");if(0>f||f>d){f=d;var h=""}else h=a.substring(f+1,d);return[a.substr(0,f),h,a.substr(d)]};goog.uri.utils.joinQueryData_=function(a){return a[0]+(a[1]?"?"+a[1]:"")+a[2]};goog.uri.utils.appendQueryData_=function(a,d){return d?a?a+"&"+d:d:a};goog.uri.utils.appendQueryDataToUri_=function(a,d){if(!d)return a;a=goog.uri.utils.splitQueryData_(a);a[1]=goog.uri.utils.appendQueryData_(a[1],d);return goog.uri.utils.joinQueryData_(a)};
goog.uri.utils.appendKeyValuePairs_=function(a,d,f){goog.asserts.assertString(a);if(Array.isArray(d)){goog.asserts.assertArray(d);for(var h=0;h<d.length;h++)goog.uri.utils.appendKeyValuePairs_(a,String(d[h]),f)}else null!=d&&f.push(a+(""===d?"":"="+goog.string.urlEncode(d)))};
goog.uri.utils.buildQueryData=function(a,d){goog.asserts.assert(0==Math.max(a.length-(d||0),0)%2,"goog.uri.utils: Key/value lists must be even in length.");var f=[];for(d=d||0;d<a.length;d+=2)goog.uri.utils.appendKeyValuePairs_(a[d],a[d+1],f);return f.join("&")};goog.uri.utils.buildQueryDataFromMap=function(a){var d=[],f;for(f in a)goog.uri.utils.appendKeyValuePairs_(f,a[f],d);return d.join("&")};
goog.uri.utils.appendParams=function(a,d){var f=2==arguments.length?goog.uri.utils.buildQueryData(arguments[1],0):goog.uri.utils.buildQueryData(arguments,1);return goog.uri.utils.appendQueryDataToUri_(a,f)};goog.uri.utils.appendParamsFromMap=function(a,d){d=goog.uri.utils.buildQueryDataFromMap(d);return goog.uri.utils.appendQueryDataToUri_(a,d)};goog.uri.utils.appendParam=function(a,d,f){f=null!=f?"="+goog.string.urlEncode(f):"";return goog.uri.utils.appendQueryDataToUri_(a,d+f)};
goog.uri.utils.findParam_=function(a,d,f,h){for(var l=f.length;0<=(d=a.indexOf(f,d))&&d<h;){var m=a.charCodeAt(d-1);if(m==goog.uri.utils.CharCode_.AMPERSAND||m==goog.uri.utils.CharCode_.QUESTION)if(m=a.charCodeAt(d+l),!m||m==goog.uri.utils.CharCode_.EQUAL||m==goog.uri.utils.CharCode_.AMPERSAND||m==goog.uri.utils.CharCode_.HASH)return d;d+=l+1}return-1};goog.uri.utils.hashOrEndRe_=/#|$/;goog.uri.utils.hasParam=function(a,d){return 0<=goog.uri.utils.findParam_(a,0,d,a.search(goog.uri.utils.hashOrEndRe_))};
goog.uri.utils.getParamValue=function(a,d){var f=a.search(goog.uri.utils.hashOrEndRe_),h=goog.uri.utils.findParam_(a,0,d,f);if(0>h)return null;var l=a.indexOf("&",h);if(0>l||l>f)l=f;h+=d.length+1;return goog.string.urlDecode(a.substr(h,l-h))};goog.uri.utils.getParamValues=function(a,d){for(var f=a.search(goog.uri.utils.hashOrEndRe_),h=0,l,m=[];0<=(l=goog.uri.utils.findParam_(a,h,d,f));){h=a.indexOf("&",l);if(0>h||h>f)h=f;l+=d.length+1;m.push(goog.string.urlDecode(a.substr(l,h-l)))}return m};
goog.uri.utils.trailingQueryPunctuationRe_=/[?&]($|#)/;goog.uri.utils.removeParam=function(a,d){for(var f=a.search(goog.uri.utils.hashOrEndRe_),h=0,l,m=[];0<=(l=goog.uri.utils.findParam_(a,h,d,f));)m.push(a.substring(h,l)),h=Math.min(a.indexOf("&",l)+1||f,f);m.push(a.substr(h));return m.join("").replace(goog.uri.utils.trailingQueryPunctuationRe_,"$1")};goog.uri.utils.setParam=function(a,d,f){return goog.uri.utils.appendParam(goog.uri.utils.removeParam(a,d),d,f)};
goog.uri.utils.setParamsFromMap=function(a,d){a=goog.uri.utils.splitQueryData_(a);var f=a[1],h=[];f&&f.split("&").forEach(function(l){var m=l.indexOf("=");m=0<=m?l.substr(0,m):l;d.hasOwnProperty(m)||h.push(l)});a[1]=goog.uri.utils.appendQueryData_(h.join("&"),goog.uri.utils.buildQueryDataFromMap(d));return goog.uri.utils.joinQueryData_(a)};
goog.uri.utils.appendPath=function(a,d){goog.uri.utils.assertNoFragmentsOrQueries_(a);goog.string.endsWith(a,"/")&&(a=a.substr(0,a.length-1));goog.string.startsWith(d,"/")&&(d=d.substr(1));return""+a+"/"+d};
goog.uri.utils.setPath=function(a,d){goog.string.startsWith(d,"/")||(d="/"+d);a=goog.uri.utils.split(a);return goog.uri.utils.buildFromEncodedParts(a[goog.uri.utils.ComponentIndex.SCHEME],a[goog.uri.utils.ComponentIndex.USER_INFO],a[goog.uri.utils.ComponentIndex.DOMAIN],a[goog.uri.utils.ComponentIndex.PORT],d,a[goog.uri.utils.ComponentIndex.QUERY_DATA],a[goog.uri.utils.ComponentIndex.FRAGMENT])};goog.uri.utils.StandardQueryParam={RANDOM:"zx"};
goog.uri.utils.makeUnique=function(a){return goog.uri.utils.setParam(a,goog.uri.utils.StandardQueryParam.RANDOM,goog.string.getRandomString())};goog.Uri=function(a,d){this.domain_=this.userInfo_=this.scheme_="";this.port_=null;this.fragment_=this.path_="";this.ignoreCase_=this.isReadOnly_=!1;var f;a instanceof goog.Uri?(this.ignoreCase_=void 0!==d?d:a.getIgnoreCase(),this.setScheme(a.getScheme()),this.setUserInfo(a.getUserInfo()),this.setDomain(a.getDomain()),this.setPort(a.getPort()),this.setPath(a.getPath()),this.setQueryData(a.getQueryData().clone()),this.setFragment(a.getFragment())):a&&(f=goog.uri.utils.split(String(a)))?(this.ignoreCase_=
!!d,this.setScheme(f[goog.uri.utils.ComponentIndex.SCHEME]||"",!0),this.setUserInfo(f[goog.uri.utils.ComponentIndex.USER_INFO]||"",!0),this.setDomain(f[goog.uri.utils.ComponentIndex.DOMAIN]||"",!0),this.setPort(f[goog.uri.utils.ComponentIndex.PORT]),this.setPath(f[goog.uri.utils.ComponentIndex.PATH]||"",!0),this.setQueryData(f[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",!0),this.setFragment(f[goog.uri.utils.ComponentIndex.FRAGMENT]||"",!0)):(this.ignoreCase_=!!d,this.queryData_=new goog.Uri.QueryData(null,
this.ignoreCase_))};goog.Uri.RANDOM_PARAM=goog.uri.utils.StandardQueryParam.RANDOM;
goog.Uri.prototype.toString=function(){var a=[],d=this.getScheme();d&&a.push(goog.Uri.encodeSpecialChars_(d,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),":");var f=this.getDomain();if(f||"file"==d)a.push("//"),(d=this.getUserInfo())&&a.push(goog.Uri.encodeSpecialChars_(d,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),"@"),a.push(goog.Uri.removeDoubleEncoding_(goog.string.urlEncode(f))),f=this.getPort(),null!=f&&a.push(":",String(f));if(f=this.getPath())this.hasDomain()&&"/"!=f.charAt(0)&&a.push("/"),
a.push(goog.Uri.encodeSpecialChars_(f,"/"==f.charAt(0)?goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_,!0));(f=this.getEncodedQuery())&&a.push("?",f);(f=this.getFragment())&&a.push("#",goog.Uri.encodeSpecialChars_(f,goog.Uri.reDisallowedInFragment_));return a.join("")};
goog.Uri.prototype.resolve=function(a){var d=this.clone(),f=a.hasScheme();f?d.setScheme(a.getScheme()):f=a.hasUserInfo();f?d.setUserInfo(a.getUserInfo()):f=a.hasDomain();f?d.setDomain(a.getDomain()):f=a.hasPort();var h=a.getPath();if(f)d.setPort(a.getPort());else if(f=a.hasPath()){if("/"!=h.charAt(0))if(this.hasDomain()&&!this.hasPath())h="/"+h;else{var l=d.getPath().lastIndexOf("/");-1!=l&&(h=d.getPath().substr(0,l+1)+h)}h=goog.Uri.removeDotSegments(h)}f?d.setPath(h):f=a.hasQuery();f?d.setQueryData(a.getQueryData().clone()):
f=a.hasFragment();f&&d.setFragment(a.getFragment());return d};goog.Uri.prototype.clone=function(){return new goog.Uri(this)};goog.Uri.prototype.getScheme=function(){return this.scheme_};goog.Uri.prototype.setScheme=function(a,d){this.enforceReadOnly();if(this.scheme_=d?goog.Uri.decodeOrEmpty_(a,!0):a)this.scheme_=this.scheme_.replace(/:$/,"");return this};goog.Uri.prototype.hasScheme=function(){return!!this.scheme_};goog.Uri.prototype.getUserInfo=function(){return this.userInfo_};
goog.Uri.prototype.setUserInfo=function(a,d){this.enforceReadOnly();this.userInfo_=d?goog.Uri.decodeOrEmpty_(a):a;return this};goog.Uri.prototype.hasUserInfo=function(){return!!this.userInfo_};goog.Uri.prototype.getDomain=function(){return this.domain_};goog.Uri.prototype.setDomain=function(a,d){this.enforceReadOnly();this.domain_=d?goog.Uri.decodeOrEmpty_(a,!0):a;return this};goog.Uri.prototype.hasDomain=function(){return!!this.domain_};goog.Uri.prototype.getPort=function(){return this.port_};
goog.Uri.prototype.setPort=function(a){this.enforceReadOnly();if(a){a=Number(a);if(isNaN(a)||0>a)throw Error("Bad port number "+a);this.port_=a}else this.port_=null;return this};goog.Uri.prototype.hasPort=function(){return null!=this.port_};goog.Uri.prototype.getPath=function(){return this.path_};goog.Uri.prototype.setPath=function(a,d){this.enforceReadOnly();this.path_=d?goog.Uri.decodeOrEmpty_(a,!0):a;return this};goog.Uri.prototype.hasPath=function(){return!!this.path_};
goog.Uri.prototype.hasQuery=function(){return""!==this.queryData_.toString()};goog.Uri.prototype.setQueryData=function(a,d){this.enforceReadOnly();a instanceof goog.Uri.QueryData?(this.queryData_=a,this.queryData_.setIgnoreCase(this.ignoreCase_)):(d||(a=goog.Uri.encodeSpecialChars_(a,goog.Uri.reDisallowedInQuery_)),this.queryData_=new goog.Uri.QueryData(a,this.ignoreCase_));return this};goog.Uri.prototype.setQuery=function(a,d){return this.setQueryData(a,d)};goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()};
goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()};goog.Uri.prototype.getQueryData=function(){return this.queryData_};goog.Uri.prototype.getQuery=function(){return this.getEncodedQuery()};goog.Uri.prototype.setParameterValue=function(a,d){this.enforceReadOnly();this.queryData_.set(a,d);return this};goog.Uri.prototype.setParameterValues=function(a,d){this.enforceReadOnly();Array.isArray(d)||(d=[String(d)]);this.queryData_.setValues(a,d);return this};
goog.Uri.prototype.getParameterValues=function(a){return this.queryData_.getValues(a)};goog.Uri.prototype.getParameterValue=function(a){return this.queryData_.get(a)};goog.Uri.prototype.getFragment=function(){return this.fragment_};goog.Uri.prototype.setFragment=function(a,d){this.enforceReadOnly();this.fragment_=d?goog.Uri.decodeOrEmpty_(a):a;return this};goog.Uri.prototype.hasFragment=function(){return!!this.fragment_};
goog.Uri.prototype.hasSameDomainAs=function(a){return(!this.hasDomain()&&!a.hasDomain()||this.getDomain()==a.getDomain())&&(!this.hasPort()&&!a.hasPort()||this.getPort()==a.getPort())};goog.Uri.prototype.makeUnique=function(){this.enforceReadOnly();this.setParameterValue(goog.Uri.RANDOM_PARAM,goog.string.getRandomString());return this};goog.Uri.prototype.removeParameter=function(a){this.enforceReadOnly();this.queryData_.remove(a);return this};
goog.Uri.prototype.setReadOnly=function(a){this.isReadOnly_=a;return this};goog.Uri.prototype.isReadOnly=function(){return this.isReadOnly_};goog.Uri.prototype.enforceReadOnly=function(){if(this.isReadOnly_)throw Error("Tried to modify a read-only Uri");};goog.Uri.prototype.setIgnoreCase=function(a){this.ignoreCase_=a;this.queryData_&&this.queryData_.setIgnoreCase(a);return this};goog.Uri.prototype.getIgnoreCase=function(){return this.ignoreCase_};
goog.Uri.parse=function(a,d){return a instanceof goog.Uri?a.clone():new goog.Uri(a,d)};goog.Uri.create=function(a,d,f,h,l,m,p,q){q=new goog.Uri(null,q);a&&q.setScheme(a);d&&q.setUserInfo(d);f&&q.setDomain(f);h&&q.setPort(h);l&&q.setPath(l);m&&q.setQueryData(m);p&&q.setFragment(p);return q};goog.Uri.resolve=function(a,d){a instanceof goog.Uri||(a=goog.Uri.parse(a));d instanceof goog.Uri||(d=goog.Uri.parse(d));return a.resolve(d)};
goog.Uri.removeDotSegments=function(a){if(".."==a||"."==a)return"";if(goog.string.contains(a,"./")||goog.string.contains(a,"/.")){var d=goog.string.startsWith(a,"/");a=a.split("/");for(var f=[],h=0;h<a.length;){var l=a[h++];"."==l?d&&h==a.length&&f.push(""):".."==l?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),d&&h==a.length&&f.push("")):(f.push(l),d=!0)}return f.join("/")}return a};goog.Uri.decodeOrEmpty_=function(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""};
goog.Uri.encodeSpecialChars_=function(a,d,f){return"string"===typeof a?(a=encodeURI(a).replace(d,goog.Uri.encodeChar_),f&&(a=goog.Uri.removeDoubleEncoding_(a)),a):null};goog.Uri.encodeChar_=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)};goog.Uri.removeDoubleEncoding_=function(a){return a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")};goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g;goog.Uri.reDisallowedInRelativePath_=/[#\?:]/g;
goog.Uri.reDisallowedInAbsolutePath_=/[#\?]/g;goog.Uri.reDisallowedInQuery_=/[#\?@]/g;goog.Uri.reDisallowedInFragment_=/#/g;goog.Uri.haveSameDomain=function(a,d){a=goog.uri.utils.split(a);d=goog.uri.utils.split(d);return a[goog.uri.utils.ComponentIndex.DOMAIN]==d[goog.uri.utils.ComponentIndex.DOMAIN]&&a[goog.uri.utils.ComponentIndex.PORT]==d[goog.uri.utils.ComponentIndex.PORT]};goog.Uri.QueryData=function(a,d){this.count_=this.keyMap_=null;this.encodedQuery_=a||null;this.ignoreCase_=!!d};
goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_=new Map,this.count_=0,this.encodedQuery_)){var a=this;goog.uri.utils.parseQueryData(this.encodedQuery_,function(d,f){a.add(goog.string.urlDecode(d),f)})}};
goog.Uri.QueryData.createFromMap=function(a,d){var f=goog.structs.getKeys(a);if("undefined"==typeof f)throw Error("Keys are undefined");d=new goog.Uri.QueryData(null,d);a=goog.structs.getValues(a);for(var h=0;h<f.length;h++){var l=f[h],m=a[h];Array.isArray(m)?d.setValues(l,m):d.add(l,m)}return d};
goog.Uri.QueryData.createFromKeysValues=function(a,d,f){if(a.length!=d.length)throw Error("Mismatched lengths for keys/values");f=new goog.Uri.QueryData(null,f);for(var h=0;h<a.length;h++)f.add(a[h],d[h]);return f};goog.Uri.QueryData.prototype.getCount=function(){this.ensureKeyMapInitialized_();return this.count_};
goog.Uri.QueryData.prototype.add=function(a,d){this.ensureKeyMapInitialized_();this.invalidateCache_();a=this.getKeyName_(a);var f=this.keyMap_.get(a);f||this.keyMap_.set(a,f=[]);f.push(d);this.count_=goog.asserts.assertNumber(this.count_)+1;return this};
goog.Uri.QueryData.prototype.remove=function(a){this.ensureKeyMapInitialized_();a=this.getKeyName_(a);return this.keyMap_.has(a)?(this.invalidateCache_(),this.count_=goog.asserts.assertNumber(this.count_)-this.keyMap_.get(a).length,this.keyMap_.delete(a)):!1};goog.Uri.QueryData.prototype.clear=function(){this.invalidateCache_();this.keyMap_=null;this.count_=0};goog.Uri.QueryData.prototype.isEmpty=function(){this.ensureKeyMapInitialized_();return 0==this.count_};
goog.Uri.QueryData.prototype.containsKey=function(a){this.ensureKeyMapInitialized_();a=this.getKeyName_(a);return this.keyMap_.has(a)};goog.Uri.QueryData.prototype.containsValue=function(a){var d=this.getValues();return module$contents$goog$array_contains(d,a)};goog.Uri.QueryData.prototype.forEach=function(a,d){this.ensureKeyMapInitialized_();this.keyMap_.forEach(function(f,h){f.forEach(function(l){a.call(d,l,h,this)},this)},this)};
goog.Uri.QueryData.prototype.getKeys=function(){this.ensureKeyMapInitialized_();const a=Array.from(this.keyMap_.values()),d=Array.from(this.keyMap_.keys()),f=[];for(let h=0;h<d.length;h++){const l=a[h];for(let m=0;m<l.length;m++)f.push(d[h])}return f};
goog.Uri.QueryData.prototype.getValues=function(a){this.ensureKeyMapInitialized_();let d=[];if("string"===typeof a)this.containsKey(a)&&(d=d.concat(this.keyMap_.get(this.getKeyName_(a))));else{a=Array.from(this.keyMap_.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d};
goog.Uri.QueryData.prototype.set=function(a,d){this.ensureKeyMapInitialized_();this.invalidateCache_();a=this.getKeyName_(a);this.containsKey(a)&&(this.count_=goog.asserts.assertNumber(this.count_)-this.keyMap_.get(a).length);this.keyMap_.set(a,[d]);this.count_=goog.asserts.assertNumber(this.count_)+1;return this};goog.Uri.QueryData.prototype.get=function(a,d){if(!a)return d;a=this.getValues(a);return 0<a.length?String(a[0]):d};
goog.Uri.QueryData.prototype.setValues=function(a,d){this.remove(a);0<d.length&&(this.invalidateCache_(),this.keyMap_.set(this.getKeyName_(a),module$contents$goog$array_toArray(d)),this.count_=goog.asserts.assertNumber(this.count_)+d.length)};
goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";const a=[],d=Array.from(this.keyMap_.keys());for(var f=0;f<d.length;f++){var h=d[f];const m=goog.string.urlEncode(h),p=this.getValues(h);for(h=0;h<p.length;h++){var l=m;""!==p[h]&&(l+="="+goog.string.urlEncode(p[h]));a.push(l)}}return this.encodedQuery_=a.join("&")};goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())};
goog.Uri.QueryData.prototype.invalidateCache_=function(){this.encodedQuery_=null};goog.Uri.QueryData.prototype.filterKeys=function(a){this.ensureKeyMapInitialized_();this.keyMap_.forEach(function(d,f){module$contents$goog$array_contains(a,f)||this.remove(f)},this);return this};goog.Uri.QueryData.prototype.clone=function(){var a=new goog.Uri.QueryData;a.encodedQuery_=this.encodedQuery_;this.keyMap_&&(a.keyMap_=new Map(this.keyMap_),a.count_=this.count_);return a};
goog.Uri.QueryData.prototype.getKeyName_=function(a){a=String(a);this.ignoreCase_&&(a=a.toLowerCase());return a};goog.Uri.QueryData.prototype.setIgnoreCase=function(a){a&&!this.ignoreCase_&&(this.ensureKeyMapInitialized_(),this.invalidateCache_(),this.keyMap_.forEach(function(d,f){var h=f.toLowerCase();f!=h&&(this.remove(f),this.setValues(h,d))},this));this.ignoreCase_=a};
goog.Uri.QueryData.prototype.extend=function(a){for(var d=0;d<arguments.length;d++)goog.structs.forEach(arguments[d],function(f,h){this.add(h,f)},this)};goog.crypt={};goog.crypt.Hash=function(){this.blockSize=-1};goog.crypt.Hash.prototype.reset=goog.abstractMethod;goog.crypt.Hash.prototype.update=goog.abstractMethod;goog.crypt.Hash.prototype.digest=goog.abstractMethod;goog.crypt.Sha1=function(){goog.crypt.Hash.call(this);this.blockSize=64;this.chain_=[];this.buf_=[];this.W_=[];this.pad_=[];this.pad_[0]=128;for(var a=1;a<this.blockSize;++a)this.pad_[a]=0;this.total_=this.inbuf_=0;this.reset()};goog.inherits(goog.crypt.Sha1,goog.crypt.Hash);goog.crypt.Sha1.prototype.reset=function(){this.chain_[0]=1732584193;this.chain_[1]=4023233417;this.chain_[2]=2562383102;this.chain_[3]=271733878;this.chain_[4]=3285377520;this.total_=this.inbuf_=0};
goog.crypt.Sha1.prototype.compress_=function(a,d){d||=0;var f=this.W_;if("string"===typeof a)for(var h=0;16>h;h++)f[h]=a.charCodeAt(d)<<24|a.charCodeAt(d+1)<<16|a.charCodeAt(d+2)<<8|a.charCodeAt(d+3),d+=4;else for(h=0;16>h;h++)f[h]=a[d]<<24|a[d+1]<<16|a[d+2]<<8|a[d+3],d+=4;for(h=16;80>h;h++){var l=f[h-3]^f[h-8]^f[h-14]^f[h-16];f[h]=(l<<1|l>>>31)&4294967295}a=this.chain_[0];d=this.chain_[1];var m=this.chain_[2],p=this.chain_[3],q=this.chain_[4];for(h=0;80>h;h++){if(40>h)if(20>h){l=p^d&(m^p);var u=
1518500249}else l=d^m^p,u=1859775393;else 60>h?(l=d&m|p&(d|m),u=2400959708):(l=d^m^p,u=3395469782);l=(a<<5|a>>>27)+l+q+u+f[h]&4294967295;q=p;p=m;m=(d<<30|d>>>2)&4294967295;d=a;a=l}this.chain_[0]=this.chain_[0]+a&4294967295;this.chain_[1]=this.chain_[1]+d&4294967295;this.chain_[2]=this.chain_[2]+m&4294967295;this.chain_[3]=this.chain_[3]+p&4294967295;this.chain_[4]=this.chain_[4]+q&4294967295};
goog.crypt.Sha1.prototype.update=function(a,d){if(null!=a){void 0===d&&(d=a.length);for(var f=d-this.blockSize,h=0,l=this.buf_,m=this.inbuf_;h<d;){if(0==m)for(;h<=f;)this.compress_(a,h),h+=this.blockSize;if("string"===typeof a)for(;h<d;){if(l[m]=a.charCodeAt(h),++m,++h,m==this.blockSize){this.compress_(l);m=0;break}}else for(;h<d;)if(l[m]=a[h],++m,++h,m==this.blockSize){this.compress_(l);m=0;break}}this.inbuf_=m;this.total_+=d}};
goog.crypt.Sha1.prototype.digest=function(){var a=[],d=8*this.total_;56>this.inbuf_?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var f=this.blockSize-1;56<=f;f--)this.buf_[f]=d&255,d/=256;this.compress_(this.buf_);for(f=d=0;5>f;f++)for(var h=24;0<=h;h-=8)a[d]=this.chain_[f]>>h&255,++d;return a};goog.crypt.Hmac=function(a,d,f){goog.crypt.Hash.call(this);this.hasher_=a;this.blockSize=f||a.blockSize||16;this.keyO_=Array(this.blockSize);this.keyI_=Array(this.blockSize);this.initialize_(d)};goog.inherits(goog.crypt.Hmac,goog.crypt.Hash);goog.crypt.Hmac.OPAD_=92;goog.crypt.Hmac.IPAD_=54;
goog.crypt.Hmac.prototype.initialize_=function(a){a.length>this.blockSize&&(this.hasher_.update(a),a=this.hasher_.digest(),this.hasher_.reset());for(var d,f=0;f<this.blockSize;f++)d=f<a.length?a[f]:0,this.keyO_[f]=d^goog.crypt.Hmac.OPAD_,this.keyI_[f]=d^goog.crypt.Hmac.IPAD_;this.hasher_.update(this.keyI_)};goog.crypt.Hmac.prototype.reset=function(){this.hasher_.reset();this.hasher_.update(this.keyI_)};goog.crypt.Hmac.prototype.update=function(a,d){this.hasher_.update(a,d)};
goog.crypt.Hmac.prototype.digest=function(){var a=this.hasher_.digest();this.hasher_.reset();this.hasher_.update(this.keyO_);this.hasher_.update(a);return this.hasher_.digest()};goog.crypt.Hmac.prototype.getHmac=function(a){this.reset();this.update(a);return this.digest()};goog.crypt.stringToByteArray=function(a){for(var d=[],f=0,h=0;h<a.length;h++){var l=a.charCodeAt(h);255<l&&(d[f++]=l&255,l>>=8);d[f++]=l}return d};goog.crypt.byteArrayToString=function(a){if(8192>=a.length)return String.fromCharCode.apply(null,a);for(var d="",f=0;f<a.length;f+=8192){var h=Array.prototype.slice.call(a,f,f+8192);d+=String.fromCharCode.apply(null,h)}return d};
goog.crypt.byteArrayToHex=function(a,d){return Array.prototype.map.call(a,function(f){f=f.toString(16);return 1<f.length?f:"0"+f}).join(d||"")};goog.crypt.hexToByteArray=function(a){goog.asserts.assert(0==a.length%2,"Key string length must be multiple of 2");for(var d=[],f=0;f<a.length;f+=2)d.push(parseInt(a.substring(f,f+2),16));return d};
goog.crypt.stringToUtf8ByteArray=function(a){for(var d=[],f=0,h=0;h<a.length;h++){var l=a.charCodeAt(h);128>l?d[f++]=l:(2048>l?d[f++]=l>>6|192:(55296==(l&64512)&&h+1<a.length&&56320==(a.charCodeAt(h+1)&64512)?(l=65536+((l&1023)<<10)+(a.charCodeAt(++h)&1023),d[f++]=l>>18|240,d[f++]=l>>12&63|128):d[f++]=l>>12|224,d[f++]=l>>6&63|128),d[f++]=l&63|128)}return d};
goog.crypt.utf8ByteArrayToString=function(a){for(var d=[],f=0,h=0;f<a.length;){var l=a[f++];if(128>l)d[h++]=String.fromCharCode(l);else if(191<l&&224>l){var m=a[f++];d[h++]=String.fromCharCode((l&31)<<6|m&63)}else if(239<l&&365>l){m=a[f++];var p=a[f++],q=a[f++];l=((l&7)<<18|(m&63)<<12|(p&63)<<6|q&63)-65536;d[h++]=String.fromCharCode(55296+(l>>10));d[h++]=String.fromCharCode(56320+(l&1023))}else m=a[f++],p=a[f++],d[h++]=String.fromCharCode((l&15)<<12|(m&63)<<6|p&63)}return d.join("")};
goog.crypt.xorByteArray=function(a,d){goog.asserts.assert(a.length==d.length,"XOR array lengths must match");for(var f=[],h=0;h<a.length;h++)f.push(a[h]^d[h]);return f};goog.crypt.base64={};goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=";goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.";goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4};goog.crypt.base64.paddingChars_="=.";
goog.crypt.base64.isPadding_=function(a){return goog.string.internal.contains(goog.crypt.base64.paddingChars_,a)};goog.crypt.base64.byteToCharMaps_={};goog.crypt.base64.charToByteMap_=null;goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT;goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa;
goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob;
goog.crypt.base64.encodeByteArray=function(a,d){goog.asserts.assert(goog.isArrayLike(a),"encodeByteArray takes an array as a parameter");void 0===d&&(d=goog.crypt.base64.Alphabet.DEFAULT);goog.crypt.base64.init_();d=goog.crypt.base64.byteToCharMaps_[d];const f=Array(Math.floor(a.length/3)),h=d[64]||"";let l=0,m=0;for(;l<a.length-2;l+=3){var p=a[l],q=a[l+1],u=a[l+2],y=d[p>>2];p=d[(p&3)<<4|q>>4];q=d[(q&15)<<2|u>>6];u=d[u&63];f[m++]=""+y+p+q+u}y=0;u=h;switch(a.length-l){case 2:y=a[l+1],u=d[(y&15)<<2]||
h;case 1:a=a[l],f[m]=""+d[a>>2]+d[(a&3)<<4|y>>4]+u+h}return f.join("")};goog.crypt.base64.encodeString=function(a,d){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!d?goog.global.btoa(a):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(a),d)};goog.crypt.base64.decodeString=function(a,d){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!d)return goog.global.atob(a);var f="";goog.crypt.base64.decodeStringInternal_(a,function(h){f+=String.fromCharCode(h)});return f};
goog.crypt.base64.decodeStringToByteArray=function(a,d){var f=[];goog.crypt.base64.decodeStringInternal_(a,function(h){f.push(h)});return f};
goog.crypt.base64.decodeStringToUint8Array=function(a){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var d=a.length,f=3*d/4;f%3?f=Math.floor(f):goog.crypt.base64.isPadding_(a[d-1])&&(f=goog.crypt.base64.isPadding_(a[d-2])?f-2:f-1);var h=new Uint8Array(f),l=0;goog.crypt.base64.decodeStringInternal_(a,function(m){h[l++]=m});return h.subarray(0,l)};
goog.crypt.base64.decodeStringInternal_=function(a,d){function f(u){for(;h<a.length;){var y=a.charAt(h++),C=goog.crypt.base64.charToByteMap_[y];if(null!=C)return C;if(!goog.string.internal.isEmptyOrWhitespace(y))throw Error("Unknown base64 encoding at char: "+y);}return u}goog.crypt.base64.init_();for(var h=0;;){var l=f(-1),m=f(0),p=f(64),q=f(64);if(64===q&&-1===l)break;d(l<<2|m>>4);64!=p&&(d(m<<4&240|p>>2),64!=q&&d(p<<6&192|q))}};
goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var a=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),d=["+/=","+/","-_=","-_.","-_"],f=0;5>f;f++){var h=a.concat(d[f].split(""));goog.crypt.base64.byteToCharMaps_[f]=h;for(var l=0;l<h.length;l++){var m=h[l],p=goog.crypt.base64.charToByteMap_[m];void 0===p?goog.crypt.base64.charToByteMap_[m]=l:goog.asserts.assert(p===l)}}}};AI.Events={};AI.Events.COMPANION_CONNECT="companion.connect";AI.Events.COMPANION_DISCONNECT="companion.disconnect";AI.Events.SCREEN_SWITCH="screen.switch";AI.Events.SCREEN_PUSH="screen.push";AI.Events.SCREEN_POP="screen.pop";AI.Events.COMPONENT_ADD="component.add";AI.Events.COMPONENT_REMOVE="component.remove";AI.Events.COMPONENT_MOVE="component.move";AI.Events.COMPONENT_PROPERTY_CHANGE="property.change";AI.Events.BLOCKS_ARRANGE_START="blocks.arrange.start";AI.Events.BLOCKS_ARRANGE_END="blocks.arrange.end";
AI.Events.WORKSPACE_VIEWPORT_MOVE="blocks.workspace.move";AI.Events.FORCE_SAVE="blocks.save.force";AI.Events.Abstract=class{realtime=!1;isTransient=!1;projectId=null;userId=null;constructor(){this.group=Blockly.Events.getGroup();this.recordUndo=Blockly.Events.getRecordUndo()}isNull(){return!1}toJson(){let a={};a.type=this.type;a.group=this.group;a.recordUndo=this.recordUndo;return a}fromJson(a){this.type=a.type;this.group=a.group;this.recordUndo=a.recordUndo}};Blockly.Events.Abstract.prototype=new AI.Events.Abstract;
Blockly.Events.Abstract.prototype.realtime=!0;AI.Events.CompanionEvent=class extends AI.Events.Abstract{isTransient=!0;};AI.Events.CompanionConnect=class extends AI.Events.CompanionEvent{type=AI.Events.COMPANION_CONNECT;};AI.Events.CompanionDisconnect=class extends AI.Events.CompanionEvent{type=AI.Events.COMPANION_DISCONNECT;};AI.Events.ScreenEvent=class extends AI.Events.Abstract{isTransient=!0;constructor(a,d){super();this.projectId=a;this.screenName=d}};
AI.Events.ScreenSwitch=class extends AI.Events.ScreenEvent{type=AI.Events.SCREEN_SWITCH;constructor(a,d){super(a,d);this.recordUndo=!1}};AI.Events.ScreenPush=class extends AI.Events.ScreenEvent{type=AI.Events.SCREEN_PUSH;constructor(a,d){super(a,d)}};AI.Events.ScreenPop=class extends AI.Events.ScreenEvent{type=AI.Events.SCREEN_POP;constructor(a){super(a)}};AI.Events.ComponentEvent=class extends AI.Events.Abstract{realtime=!0;constructor(a,d){super();this.projectId=a;this.component=d}};
AI.Events.ComponentAdd=class extends AI.Events.ComponentEvent{type=AI.Events.COMPONENT_ADD;constructor(a,d){super(a,d)}};AI.Events.ComponentRemove=class extends AI.Events.ComponentEvent{type=AI.Events.COMPONENT_REMOVE;constructor(a,d){super(a,d)}};AI.Events.ComponentMove=class extends AI.Events.ComponentEvent{type=AI.Events.COMPONENT_MOVE;constructor(a,d){super(a,d);a=this.currentLocation_();this.oldParentUuid=a.parentUuid;this.oldIndex=a.index}};
AI.Events.PropertyChange=class extends AI.Events.ComponentEvent{constructor(a,d,f,h,l){super(a,d);this.property=f;this.oldValue=h;this.newValue=l}};
AI.Events.StartArrangeBlocks=class extends Blockly.Events.Abstract{type=AI.Events.BLOCKS_ARRANGE_START;constructor(a){super(a);const d=Blockly.Workspace.getById(a);this.old_arranged_type=d.arranged_type_;this.old_arranged_position=d.arranged_position_;this.old_arranged_latest_position=d.arranged_latest_position_;this.recordUndo=Blockly.Events.getRecordUndo();this.workspaceId=a}toJson(){let a=super.toJson();a.old_arranged_type=this.old_arranged_type;a.old_arranged_position=this.old_arranged_position;
a.old_arranged_latest_position=this.old_arranged_latest_position;return a}fromJson(a){super.fromJson(a);this.old_arranged_type=a.old_arranged_type;this.old_arranged_position=a.old_arranged_position;this.old_arranged_latest_position=a.old_arranged_latest_position}run(a){a||setTimeout(function(){const d=Blockly.Workspace.getById(this.workspaceId);d.arranged_type_=this.old_arranged_type;d.arranged_position_=this.old_arranged_position;d.arranged_latest_position_=this.old_arranged_latest_position}.bind(this))}};
AI.Events.EndArrangeBlocks=class extends Blockly.Events.Abstract{type=AI.Events.BLOCKS_ARRANGE_END;constructor(a,d,f){super(a);this.new_type=d;this.new_layout=f;this.recordUndo=Blockly.Events.getRecordUndo();this.workspaceId=a}toJson(){let a=super.toJson();a.new_type=this.new_type;a.new_layout=this.new_layout;return a}fromJson(a){super.fromJson(a);this.new_type=a.new_type;this.new_layout=a.new_layout}run(a){a&&setTimeout(function(){const d=Blockly.Workspace.getById(this.workspaceId);d.arranged_type_=
this.new_type;d.arranged_position_=this.new_layout;d.arranged_latest_position_=this.new_layout}.bind(this),1E3)}};
AI.Events.WorkspaceMove=class extends AI.Events.Abstract{type=AI.Events.WORKSPACE_VIEWPORT_MOVE;isTransient=!0;constructor(a){super();this.workspaceId=a;a=Blockly.Workspace.getById(a).getMetrics();this.oldX=a.viewLeft-a.scrollLeft;this.oldY=a.viewTop-a.scrollTop;this.newY=this.newX=null}recordNew(){var a=Blockly.Workspace.getById(this.workspaceId).getMetrics();this.newX=a.viewLeft-a.scrollLeft;this.newY=a.viewTop-a.scrollTop}isNull(){return this.oldX===this.newX&&this.oldY===this.newY}toJson(){let a=
super.toJson();a.workspaceId=this.workspaceId;this.newX&&(a.newX=this.newX);this.newY&&(a.newY=this.newY);return a}fromJson(a){super.fromJson(a);this.workspaceId=a.workspaceId;this.newX=a.newX;this.newY=a.newY}run(a){Blockly.Workspace.getById(this.workspaceId).scrollbar.set(a?this.newX:this.oldX,a?this.newY:this.oldY,!0)}};
AI.Events.ForceSave=class extends AI.Events.Abstract{type=AI.Events.FORCE_SAVE;isTransient=!1;constructor(a){super();a&&(this.workspaceId=a.id);this.recordUndo=!1}toJson(){let a=super.toJson();a.workspaceId=this.workspaceId;return a}fromJson(a){super.fromJson(a);this.workspaceId=a.workspaceId}};AI.Yail=new Blockly.Generator("Yail");AI.Yail.RESERVED_WORDS_="";AI.Yail.ORDER_ATOMIC=0;AI.Yail.ORDER_NONE=99;AI.Yail.YAIL_ACTIVE_FORM="(SimpleForm:getActiveForm)";AI.Yail.YAIL_ADD_COMPONENT="(add-component ";AI.Yail.YAIL_ADD_TO_LIST="(add-to-list ";AI.Yail.YAIL_BEGIN="(begin ";AI.Yail.YAIL_BREAK="*yail-break*";AI.Yail.YAIL_CALL_COMPONENT_METHOD="(call-component-method ";AI.Yail.YAIL_CALL_COMPONENT_METHOD_BLOCKING="(call-component-method-with-blocking-continuation ";
AI.Yail.YAIL_CALL_COMPONENT_METHOD_CONTINUATION="(call-component-method-with-continuation ";AI.Yail.YAIL_CALL_COMPONENT_TYPE_METHOD="(call-component-type-method ";AI.Yail.YAIL_CALL_COMPONENT_TYPE_METHOD_BLOCKING="(call-component-type-method-with-blocking-continuation ";AI.Yail.YAIL_CALL_COMPONENT_TYPE_METHOD_CONTINUATION="(call-component-type-method-with-continuation ";AI.Yail.YAIL_CALL_YAIL_PRIMITIVE="(call-yail-primitive ";AI.Yail.YAIL_CLEAR_FORM="(clear-current-form)";
AI.Yail.YAIL_SET_FORM_NAME_BEGIN='(try-catch (let ((attempt (delay (set-form-name "';AI.Yail.YAIL_SET_FORM_NAME_END="\")))) (force attempt)) (exception java.lang.Throwable 'notfound))";AI.Yail.YAIL_CLOSE_COMBINATION=")";AI.Yail.YAIL_CLOSE_BLOCK=")\n";AI.Yail.YAIL_COMMENT_MAJOR=";;; ";AI.Yail.YAIL_COMPONENT_REMOVE="(remove-component ";AI.Yail.YAIL_COMPONENT_TYPE="component";AI.Yail.YAIL_CONSTANT_ALL="(static-field com.google.appinventor.components.runtime.util.YailDictionary 'ALL)";
AI.Yail.YAIL_DEFINE="(def ";AI.Yail.YAIL_DEFINE_EVENT="(define-event ";AI.Yail.YAIL_DEFINE_GENERIC_EVENT="(define-generic-event ";AI.Yail.YAIL_DEFINE_FORM="(define-form ";AI.Yail.YAIL_DO_AFTER_FORM_CREATION="(do-after-form-creation ";AI.Yail.YAIL_DOUBLE_QUOTE='"';AI.Yail.YAIL_FALSE="#f";AI.Yail.YAIL_FILTER="(filter_nondest ";AI.Yail.YAIL_FOREACH="(foreach ";AI.Yail.YAIL_FORRANGE="(forrange ";AI.Yail.YAIL_GET_COMPONENT="(get-component ";AI.Yail.YAIL_GET_ALL_COMPONENT="(get-all-components ";
AI.Yail.YAIL_GET_PROPERTY="(get-property ";AI.Yail.YAIL_GET_COMPONENT_TYPE_PROPERTY="(get-property-and-check  ";AI.Yail.YAIL_GET_VARIABLE="(get-var ";AI.Yail.YAIL_AND_DELAYED="(and-delayed ";AI.Yail.YAIL_OR_DELAYED="(or-delayed ";AI.Yail.YAIL_IF="(if ";AI.Yail.YAIL_INIT_RUNTIME="(init-runtime)";AI.Yail.YAIL_INITIALIZE_COMPONENTS="(call-Initialize-of-components";AI.Yail.YAIL_LET="(let ";AI.Yail.YAIL_LEXICAL_VALUE="(lexical-value ";AI.Yail.YAIL_SET_LEXICAL_VALUE="(set-lexical! ";
AI.Yail.YAIL_LINE_FEED="\n";AI.Yail.YAIL_MAP="(map_nondest ";AI.Yail.YAIL_NULL="(get-var *the-null-value*)";AI.Yail.YAIL_EMPTY_LIST="'()";AI.Yail.YAIL_EMPTY_YAIL_LIST="'(*list*)";AI.Yail.YAIL_EMPTY_DICT="(make com.google.appinventor.components.runtime.util.YailDictionary)";AI.Yail.YAIL_OPEN_BLOCK="(";AI.Yail.YAIL_OPEN_COMBINATION="(";AI.Yail.YAIL_QUOTE="'";AI.Yail.YAIL_REDUCE="(reduceovereach ";AI.Yail.YAIL_RENAME_COMPONENT="(rename-component ";AI.Yail.YAIL_SET_AND_COERCE_PROPERTY="(set-and-coerce-property! ";
AI.Yail.YAIL_SET_AND_COERCE_COMPONENT_TYPE_PROPERTY="(set-and-coerce-property-and-check! ";AI.Yail.YAIL_SET_SUBFORM_LAYOUT_PROPERTY="(%set-subform-layout-property! ";AI.Yail.YAIL_SET_VARIABLE="(set-var! ";AI.Yail.YAIL_SET_THIS_FORM="(set-this-form)\n ";AI.Yail.YAIL_SPACER=" ";AI.Yail.YAIL_SORT_COMPARATOR_NONDEST="(sortcomparator_nondest ";AI.Yail.YAIL_SORT_KEY_NONDEST="(sortkey_nondest ";AI.Yail.YAIL_TRUE="#t";AI.Yail.YAIL_UNREGISTER="com.google.appinventor.components.runtime.EventDispatcher:unregisterEventForDelegation";
AI.Yail.YAIL_WHILE="(while ";AI.Yail.YAIL_LIST_CONSTRUCTOR="*list-for-runtime*";AI.Yail.SIMPLE_HEX_PREFIX="&H";AI.Yail.YAIL_HEX_PREFIX="#x";AI.Yail.INTEGER_REGEXP="^[\\s]*[-+]?[0-9]+[\\s]*$";AI.Yail.FLONUM_REGEXP="^[\\s]*[-+]?([0-9]*)((\\.[0-9]+)|[0-9]\\.)[\\s]*$";AI.Yail.getFormYail=function(a,d,f,h){var l=this.forRepl;try{this.forRepl=f;var m=AI.Yail.getFormYail_(a,d,f,h)}finally{this.forRepl=l}return m};
AI.Yail.getFormYail_=function(a,d,f,h){var l=JSON.parse(a),m=[],p=[],q=function(X){return X};if(l.Properties){a=l.Properties;var u=a.$Name}else throw"Cannot find form properties";if(!u)throw"Unable to determine form name";f||p.push(AI.Yail.getYailPrelude(d,u,"Classic"===l.Properties.Theme));d=h.buildComponentMap([],[],!1,!1);for(var y=d.globals,C=0,K;K=y[C];C++)p.push(AI.Yail.blockToCode(K));if(a){l=l.Source;if("Form"==l)p=p.concat(AI.Yail.getComponentLines(u,a,null,d,!1,q,h.getComponentDatabase()));
else throw"Source type "+l+" is invalid.";m=AI.Yail.getDeepNames(a,m);m=m.filter(function(X,M){return m.indexOf(X)==M});p.push(AI.Yail.YAIL_INIT_RUNTIME);f&&(p=AI.Yail.wrapForRepl(u,p,m))}return p.join("\n")};AI.Yail.getDeepNames=function(a,d){if(a.$Components){a=a.$Components;for(var f=0,h;h=a[f];f++)d.push(h.$Name),d=AI.Yail.getDeepNames(h,d)}return d};
AI.Yail.getYailPrelude=function(a,d,f){return"#|\n$Source $Yail\n|#\n\n"+AI.Yail.YAIL_DEFINE_FORM+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+(f?"#t":"#f")+AI.Yail.YAIL_CLOSE_BLOCK+"(require <com.google.youngandroid.runtime>)\n"};
AI.Yail.wrapForRepl=function(a,d,f){var h=[];h.push(AI.Yail.YAIL_BEGIN);h.push(AI.Yail.YAIL_CLEAR_FORM);"Screen1"!=a&&h.push(AI.Yail.getComponentRenameString("Screen1",a));h=h.concat(d);h.push(AI.Yail.getComponentInitializationString(a,f));h.push(AI.Yail.YAIL_CLOSE_BLOCK);return h};AI.Yail.getComponentInitializationString=function(a,d){var f=AI.Yail.YAIL_INITIALIZE_COMPONENTS;f+=" "+AI.Yail.YAIL_QUOTE+a;for(var h=0,l;l=d[h];h++)l!=a&&(f=f+" "+AI.Yail.YAIL_QUOTE+l);return f+")"};
AI.Yail.getComponentLines=function(a,d,f,h,l,m,p){var q,u,y=d.$Name;f="Form"==d.$Type?AI.Yail.getFormPropertiesLines(a,d,!l,p,l):AI.Yail.getComponentPropertiesLines(a,d,f,!l,m,p,l);if(!l&&h.components&&h.components[y]){var C=h.components[y];for(q=0;u=C[q];q++)f.push(AI.Yail.blockToCode(u))}if(d.$Components)for(u=d.$Components,q=0;d=u[q];q++)f=f.concat(AI.Yail.getComponentLines(a,d,y,h,l,m,p));return f};
AI.Yail.getComponentPropertiesLines=function(a,d,f,h,l,m,p){a=[];var q=d.$Name,u=d.$Type;h&&a.push(AI.Yail.YAIL_COMMENT_MAJOR+q+AI.Yail.YAIL_LINE_FEED);a.push(AI.Yail.YAIL_ADD_COMPONENT+f+AI.Yail.YAIL_SPACER+l(m.getType(u).type)+AI.Yail.YAIL_SPACER+q+AI.Yail.YAIL_SPACER);a=a.concat(AI.Yail.getPropertySettersLines(d,q,m,p));a.push(AI.Yail.YAIL_CLOSE_BLOCK);return a};
AI.Yail.getFormPropertiesLines=function(a,d,f,h,l){var m=[];f&&m.push(AI.Yail.YAIL_COMMENT_MAJOR+a+AI.Yail.YAIL_LINE_FEED);a=AI.Yail.getPropertySettersLines(d,a,h,l);0<a.length&&m.push(AI.Yail.YAIL_DO_AFTER_FORM_CREATION+a.join(" ")+AI.Yail.YAIL_CLOSE_BLOCK);return m};
AI.Yail.getPropertySettersLines=function(a,d,f,h){var l=[],m=f.getType(a.$Type),p=Object.keys(a),q;for(q in m.properties){var u=m.properties[q];!u.alwaysSend||q in a||p.push(u.name)}p.sort();p.forEach(function(y){var C=m.properties[y];if("$"!==y.charAt(0)&&"Uuid"!==y&&"TutorialURL"!==y&&"BlocksToolkit"!==y||C&&C.alwaysSend){var K=a[y];K||""===K||(K=C.defaultValue);l.push(AI.Yail.getPropertySetterString(d,a.$Type,y,K,f,h))}});return l};
AI.Yail.getPropertySetterString=function(a,d,f,h,l,m){a=AI.Yail.YAIL_SET_AND_COERCE_PROPERTY+AI.Yail.YAIL_QUOTE+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+f+AI.Yail.YAIL_SPACER;d=l.getPropertyForType(d,f);d=AI.Yail.YAIL_QUOTE+(d?d.type:"any");f="ApiKey"!==f||m?AI.Yail.getPropertyValueString(h,d):AI.Yail.obfuscateProperty(h);return a=a.concat(f+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_BLOCK)};
AI.Yail.obfuscateProperty=function(a){for(var d=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8),f=d,h=[];f.length<a.length;)f+=f;for(var l=0;l<a.length;l++){var m=(a.charCodeAt(l)^f.charCodeAt(l))&255;h.push(String.fromCharCode((((m>>8^l)&255)<<8|(m^a.length-l)&255)&255))}return"(text-deobfuscate "+[h.join(""),d].map(AI.Yail.quote_).join(" ")+")"};
AI.Yail.getPropertyValueString=function(a,d){if("'number"==d){if(a.match(AI.Yail.INTEGER_REGEXP)||a.match(AI.Yail.FLONUM_REGEXP))return a;if(a.match(AI.Yail.SIMPLE_HEX_PREFIX+"[0-9A-F]+"))return AI.Yail.YAIL_HEX_PREFIX+a.substring(AI.Yail.SIMPLE_HEX_PREFIX.length)}else if("'boolean"==d){if(-1!=a.indexOf("False"))return"#f";if(-1!=a.indexOf("True"))return"#t"}else if("'component"==d)return""==a?'""':AI.Yail.YAIL_GET_COMPONENT+a+")";return""==a||"null"==a?'""':AI.Yail.quotifyForREPL(a)};
AI.Yail.getComponentRenameString=function(a,d){return AI.Yail.YAIL_RENAME_COMPONENT+AI.Yail.quotifyForREPL(a)+AI.Yail.YAIL_SPACER+AI.Yail.quotifyForREPL(d)+AI.Yail.YAIL_CLOSE_BLOCK};
AI.Yail.quotifyForREPL=function(a){if(a){var d=[];d.push('"');for(var f=a.length,h=f-1,l=0;l<f;l++)if(c=a.charAt(l),"\\"==c)l==h||"n"!=a.charAt(l+1)&&"t"!=a.charAt(l+1)&&"r"!=a.charAt(l+1)?(d.push("\\"),d.push(c)):(d.push(c),d.push(a.charAt(l+1)),l+=1);else if('"'==c)d.push("\\"),d.push(c);else{var m=a.charCodeAt(l);32>m||126<m?(m="000"+m.toString(16),m=m.substring(m.length-4),d.push("\\u"+m)):d.push(c)}d.push('"');return d.join("")}return null};
AI.Yail.quote_=function(a){(a=AI.Yail.quotifyForREPL(a))||(a='""');return a};AI.Yail.scrubNakedValue=function(a){return a};AI.Yail.scrub_=function(a,d,f){if(null===d)return"";a=a.nextConnection&&a.nextConnection.targetBlock();f=f?"":this.blockToCode(a);return""+d+f};
AI.Yail.getDebuggingYail=function(){for(var a=[],d=Blockly.Component.buildComponentMap([],[],!1,!1).globals,f=0;f<d.length;f++)a.push(AI.Yail.blockToCode(d[f]));d=Blockly.common.getMainWorkspace().getTopBlocks(!0);f=0;for(var h;h=d[f];f++)h.category&&a.push(AI.Yail.blockToCode(h));return a.join("\n\n")};
AI.Yail.blockToCode1=function(a){if(!a)return"";var d=this[a.type];if(!d)throw'Language "'+name+'" does not know how to generate code for block type "'+a.type+'".';d=d.call(a);if(d instanceof Array){if(a.disabled||a.isBadBlock())d[0]="";return[this.scrub_(a,d[0],!0),d[1]]}if(a.disabled||a.isBadBlock())d="";return this.scrub_(a,d,!0)};
AI.Yail.disabledEventBlockToCode=function(a){return AI.Yail.YAIL_OPEN_BLOCK+AI.Yail.YAIL_UNREGISTER+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_ACTIVE_FORM+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+a.getFieldValue("COMPONENT_SELECTOR")+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+a.eventName+AI.Yail.YAIL_CLOSE_BLOCK};/*

 @fileoverview Color blocks yail generators for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Yail.color=function(){return[-1*(Math.pow(16,6)-window.parseInt("0x"+this.getFieldValue("COLOR").substr(1))),AI.Yail.ORDER_ATOMIC]};AI.Yail.color_black=function(){return AI.Yail.color.call(this)};AI.Yail.color_blue=function(){return AI.Yail.color.call(this)};AI.Yail.color_cyan=function(){return AI.Yail.color.call(this)};AI.Yail.color_dark_gray=function(){return AI.Yail.color.call(this)};AI.Yail.color_gray=function(){return AI.Yail.color.call(this)};AI.Yail.color_green=function(){return AI.Yail.color.call(this)};
AI.Yail.color_light_gray=function(){return AI.Yail.color.call(this)};AI.Yail.color_magenta=function(){return AI.Yail.color.call(this)};AI.Yail.color_pink=function(){return AI.Yail.color.call(this)};AI.Yail.color_red=function(){return AI.Yail.color.call(this)};AI.Yail.color_white=function(){return AI.Yail.color.call(this)};AI.Yail.color_orange=function(){return AI.Yail.color.call(this)};AI.Yail.color_yellow=function(){return AI.Yail.color.call(this)};
AI.Yail.color_make_color=function(){var a=AI.Yail.valueToCode(this,"COLORLIST",AI.Yail.ORDER_NONE)||'(call-yail-primitive make-yail-list (*list-for-runtime* 0 0 0)  \'( any any any)  "make a list")',d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-color"+AI.Yail.YAIL_SPACER;d+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION;d+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;
d+=AI.Yail.YAIL_DOUBLE_QUOTE+"make-color"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.color_split_color=function(){var a=AI.Yail.valueToCode(this,"COLOR",AI.Yail.ORDER_NONE)||-1,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"split-color"+AI.Yail.YAIL_SPACER;d+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION;d+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d+=AI.Yail.YAIL_DOUBLE_QUOTE+"split-color"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;
return[d,AI.Yail.ORDER_ATOMIC]};/*

 @fileoverview Component blocks yail generators for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Yail.componentblock={};
AI.Yail.component_event=function(){var a=this.isGeneric?AI.Yail.YAIL_DEFINE_GENERIC_EVENT+this.typeName+AI.Yail.YAIL_SPACER+this.eventName:AI.Yail.YAIL_DEFINE_EVENT+this.getFieldValue("COMPONENT_SELECTOR")+AI.Yail.YAIL_SPACER+this.eventName;var d=AI.Yail.statementToCode(this,"DO");""==d&&(d=AI.Yail.YAIL_NULL);return a+AI.Yail.YAIL_OPEN_COMBINATION+this.getParameters().map(function(f){return AI.Yail.YAIL_LOCAL_VAR_TAG+f.name}).join(" ")+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SET_THIS_FORM+AI.Yail.YAIL_SPACER+
d+AI.Yail.YAIL_CLOSE_COMBINATION};AI.Yail.component_method=function(){var a=AI.Yail.methodHelper(this,this.isGeneric?this.typeName:this.instanceName,this.methodName,this.isGeneric);return this.getMethodTypeObject()&&this.getMethodTypeObject().returnType?[a,AI.Yail.ORDER_ATOMIC]:a};AI.Yail.methodWithReturn=function(a,d){return function(){return[AI.Yail.methodHelper(this,a,d,!1),AI.Yail.ORDER_ATOMIC]}};AI.Yail.methodNoReturn=function(a,d){return function(){return AI.Yail.methodHelper(this,a,d,!1)}};
AI.Yail.genericMethodWithReturn=function(a,d){return function(){return[AI.Yail.methodHelper(this,a,d,!0),AI.Yail.ORDER_ATOMIC]}};AI.Yail.genericMethodNoReturn=function(a,d){return function(){return AI.Yail.methodHelper(this,a,d,!0)}};
AI.Yail.methodHelper=function(a,d,f,h){var l=a.workspace.getComponentDatabase(),m=a.getMethodTypeObject(),p=m.continuation,q=m.parameters;m=q.length;var u=[];h&&u.push(AI.Yail.YAIL_COMPONENT_TYPE);for(var y=0;y<q.length;y++)u.push(q[y].type);h?(d=l.getType(d).type,h=p?AI.Yail.YAIL_CALL_COMPONENT_TYPE_METHOD_BLOCKING:AI.Yail.YAIL_CALL_COMPONENT_TYPE_METHOD+AI.Yail.valueToCode(a,"COMPONENT",AI.Yail.ORDER_NONE)+AI.Yail.YAIL_SPACER):(h=p?AI.Yail.YAIL_CALL_COMPONENT_METHOD_BLOCKING:AI.Yail.YAIL_CALL_COMPONENT_METHOD,
d=a.getFieldValue("COMPONENT_SELECTOR"),(l=a.getFieldValue("TIME_UNIT"))&&Blockly.ComponentBlock.isClockMethodName(f)&&(f="Add"+l));l=[];for(p=0;p<m;p++)l.push(AI.Yail.YAIL_SPACER+AI.Yail.valueToCode(a,"ARG"+p,AI.Yail.ORDER_NONE));return h+AI.Yail.YAIL_QUOTE+d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+l.join(" ")+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+u.join(" ")+
AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_CLOSE_COMBINATION};AI.Yail.component_set_get=function(){return"set"==this.setOrGet?this.isGeneric?AI.Yail.genericSetproperty.call(this):AI.Yail.setproperty.call(this):this.isGeneric?AI.Yail.genericGetproperty.call(this):AI.Yail.getproperty.call(this)};
AI.Yail.setproperty=function(){var a=this.getFieldValue("PROP"),d=this.getPropertyObject(a).type;a=AI.Yail.YAIL_QUOTE+this.getFieldValue("COMPONENT_SELECTOR")+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+a;a=AI.Yail.YAIL_SET_AND_COERCE_PROPERTY+a+AI.Yail.YAIL_SPACER;a=a.concat(AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE));return a=a.concat(AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+d+AI.Yail.YAIL_CLOSE_COMBINATION)};
AI.Yail.genericSetproperty=function(){var a=this.getFieldValue("PROP"),d=this.getPropertyObject(a).type;a=AI.Yail.YAIL_QUOTE+this.workspace.getComponentDatabase().getType(this.typeName).type+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+a;a=AI.Yail.YAIL_SET_AND_COERCE_COMPONENT_TYPE_PROPERTY+AI.Yail.valueToCode(this,"COMPONENT",AI.Yail.ORDER_NONE)+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_SPACER;a=a.concat(AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE));return a=a.concat(AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+
d+AI.Yail.YAIL_CLOSE_COMBINATION)};AI.Yail.getproperty=function(a){a=this.getFieldValue("PROP");this.getPropertyObject(a);return[AI.Yail.YAIL_GET_PROPERTY+AI.Yail.YAIL_QUOTE+this.getFieldValue("COMPONENT_SELECTOR")+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+a+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};
AI.Yail.genericGetproperty=function(a){a=this.getFieldValue("PROP");this.getPropertyObject(a);return[AI.Yail.YAIL_GET_COMPONENT_TYPE_PROPERTY+AI.Yail.valueToCode(this,"COMPONENT",AI.Yail.ORDER_NONE)+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+this.workspace.getComponentDatabase().getType(this.typeName).type+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+a+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};
AI.Yail.component_component_block=function(){return[AI.Yail.YAIL_GET_COMPONENT+this.getFieldValue("COMPONENT_SELECTOR")+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};AI.Yail.component_all_component_block=function(){var a=this.workspace.getComponentDatabase().getType(this.getFieldValue("COMPONENT_TYPE_SELECTOR")).componentInfo.type;return[AI.Yail.YAIL_GET_ALL_COMPONENT+a+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};AI.Yail.control={};
AI.Yail.controls_if=function(){for(var a="",d=0;d<this.elseifCount_+1;d++){var f=AI.Yail.valueToCode(this,"IF"+d,AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,h=AI.Yail.statementToCode(this,"DO"+d)||AI.Yail.YAIL_FALSE;0!=d&&(a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_BEGIN);a+=AI.Yail.YAIL_IF+f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_BEGIN+h+AI.Yail.YAIL_CLOSE_COMBINATION}1==this.elseCount_&&(h=AI.Yail.statementToCode(this,"ELSE")||AI.Yail.YAIL_FALSE,a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_BEGIN+h+AI.Yail.YAIL_CLOSE_COMBINATION);for(d=
0;d<this.elseifCount_;d++)a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_CLOSE_COMBINATION;return a+=AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_choose=function(){var a=AI.Yail.valueToCode(this,"TEST",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.valueToCode(this,"THENRETURN",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,f=AI.Yail.valueToCode(this,"ELSERETURN",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return[AI.Yail.YAIL_IF+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};
AI.Yail.controls_forEach=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-list"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"make a list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;var d=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR");
a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||a;var f=AI.Yail.statementToCode(this,"DO",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return AI.Yail.YAIL_FOREACH+d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_BEGIN+f+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_for_each_dict=function(){var a=AI.Yail,d=AI.Yail.controls_for_each_dict,f=Blockly.usePrefixInYail?"local_":"",h=a.YAIL_LOCAL_VAR_TAG+f+this.getFieldValue("KEY"),l=a.YAIL_LOCAL_VAR_TAG+f+this.getFieldValue("VALUE"),m=a.getVariableCommandAndName("item");f=m[1];var p=m[0]+f+a.YAIL_CLOSE_COMBINATION;m=d.generateGetListItemCode(p,1);p=d.generateGetListItemCode(p,2);h=d.generateSetVarCode(h,m);d=d.generateSetVarCode(l,p);d=a.YAIL_LET+a.YAIL_OPEN_COMBINATION+a.YAIL_SPACER+h+a.YAIL_SPACER+
d+a.YAIL_CLOSE_COMBINATION;h=a.statementToCode(this,"DO")||a.YAIL_FALSE;l=a.valueToCode(this,"DICT",a.ORDER_NONE)||a.YAIL_EMPTY_DICT;return a.YAIL_FOREACH+f+a.YAIL_SPACER+d+h+a.YAIL_CLOSE_COMBINATION+a.YAIL_SPACER+l+a.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_for_each_dict.generateGetListItemCode=function(a,d){var f=AI.Yail;return f.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-get-item"+f.YAIL_SPACER+f.YAIL_OPEN_COMBINATION+f.YAIL_LIST_CONSTRUCTOR+f.YAIL_SPACER+a+f.YAIL_SPACER+d.toString()+f.YAIL_CLOSE_COMBINATION+f.YAIL_SPACER+f.YAIL_QUOTE+f.YAIL_OPEN_COMBINATION+"list number"+f.YAIL_CLOSE_COMBINATION+f.YAIL_SPACER+f.YAIL_DOUBLE_QUOTE+"select list item"+f.YAIL_DOUBLE_QUOTE+f.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_for_each_dict.generateSetVarCode=function(a,d){var f=AI.Yail;return f.YAIL_OPEN_COMBINATION+a+f.YAIL_SPACER+d+f.YAIL_CLOSE_COMBINATION};AI.Yail.controls_break=function(){var a=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_BREAK+AI.Yail.YAIL_SPACER;return a=a+AI.Yail.YAIL_FALSE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_forRange=function(){var a=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR"),d=AI.Yail.valueToCode(this,"START",AI.Yail.ORDER_NONE)||0,f=AI.Yail.valueToCode(this,"END",AI.Yail.ORDER_NONE)||0,h=AI.Yail.valueToCode(this,"STEP",AI.Yail.ORDER_NONE)||0,l=AI.Yail.statementToCode(this,"DO",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return AI.Yail.YAIL_FORRANGE+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_BEGIN+l+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_SPACER+
h+AI.Yail.YAIL_CLOSE_COMBINATION};AI.Yail.for_lexical_variable_get=function(){return AI.Yail.lexical_variable_get.call(this)};AI.Yail.controls_while=function(){var a=AI.Yail.valueToCode(this,"TEST",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.statementToCode(this,"DO")||AI.Yail.YAIL_FALSE;return AI.Yail.YAIL_WHILE+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_BEGIN+d+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_do_then_return=function(){var a=AI.Yail.statementToCode(this,"STM",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return[AI.Yail.YAIL_BEGIN+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};AI.Yail.controls_eval_but_ignore=function(){var a=AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return AI.Yail.YAIL_BEGIN+a+AI.Yail.YAIL_SPACER+'"ignored"'+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_nothing=function(){return["*the-null-value*",AI.Yail.ORDER_NONE]};
AI.Yail.controls_openAnotherScreen=function(){var a=AI.Yail.valueToCode(this,"SCREEN",AI.Yail.ORDER_NONE)||null,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"open-another-screen"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"open another screen"+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_openAnotherScreenWithStartValue=function(){var a=AI.Yail.valueToCode(this,"SCREENNAME",AI.Yail.ORDER_NONE)||null,d=AI.Yail.valueToCode(this,"STARTVALUE",AI.Yail.ORDER_NONE)||null,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"open-another-screen-with-start-value"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;
f=f+"text any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"open another screen with start value"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_getStartValue=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"get-start-value"+AI.Yail.YAIL_SPACER;a=a+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a=a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a=a+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;a=a+AI.Yail.YAIL_DOUBLE_QUOTE+"get start value"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[a,AI.Yail.ORDER_ATOMIC]};
AI.Yail.controls_closeScreen=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"close-screen"+AI.Yail.YAIL_SPACER;a=a+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a=a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a=a+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return a=a+AI.Yail.YAIL_DOUBLE_QUOTE+"close screen"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_closeScreenWithValue=function(){var a=AI.Yail.valueToCode(this,"SCREEN",AI.Yail.ORDER_NONE)||null,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"close-screen-with-value"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"close screen with value"+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_closeApplication=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"close-application"+AI.Yail.YAIL_SPACER;a=a+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a=a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a=a+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return a=a+AI.Yail.YAIL_DOUBLE_QUOTE+"close application"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.controls_getPlainStartText=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"get-plain-start-text"+AI.Yail.YAIL_SPACER;a=a+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a=a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a=a+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;a=a+AI.Yail.YAIL_DOUBLE_QUOTE+"get plain start text"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[a,AI.Yail.ORDER_ATOMIC]};
AI.Yail.controls_closeScreenWithPlainText=function(){var a=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"close-screen-with-plain-text"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return d=d+AI.Yail.YAIL_DOUBLE_QUOTE+
"close screen with plain text"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};/*

 @fileoverview Dictionaries blocks yail generators for Blockly, modified for MIT App Inventor.
 @author data1013@mit.edu (Danny Tang)
*/
AI.Yail.dictionaries={};
AI.Yail.dictionaries_create_with=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-dictionary"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;for(var d=0,f=0;f<this.itemCount_;f++){var h=AI.Yail.valueToCode(this,"ADD"+f,AI.Yail.ORDER_NONE)||AI.Yail.YAIL_NULL;null!=h&&(a+=h+AI.Yail.YAIL_SPACER,d++)}a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;for(f=0;f<d;f++)a+="pair"+AI.Yail.YAIL_SPACER;
a+=AI.Yail.YAIL_CLOSE_COMBINATION;a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"make a dictionary"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[a,AI.Yail.ORDER_ATOMIC]};
AI.Yail.pair=function(){var a=AI.Yail.valueToCode(this,"KEY",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_NULL,d=AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_NULL,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-dictionary-pair"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;f=f+"key any"+
AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"make a pair"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.dictionaries_set_pair=function(){var a=AI.Yail.valueToCode(this,"KEY",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_NULL,d=AI.Yail.valueToCode(this,"DICT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,f=AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_NULL,h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-set-pair"+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;h=h+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER;h=h+f+AI.Yail.YAIL_CLOSE_COMBINATION;
h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;h=h+"key dictionary any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"set value for key in dictionary to value"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.dictionaries_delete_pair=function(){var a=AI.Yail.valueToCode(this,"DICT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,d=AI.Yail.valueToCode(this,"KEY",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_NULL,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-delete-pair"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;f=
f+"dictionary key"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"delete dictionary pair"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.dictionaries_lookup=function(){var a=AI.Yail.valueToCode(this,"KEY",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.valueToCode(this,"DICT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,f=AI.Yail.valueToCode(this,"NOTFOUND",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_NULL,h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-lookup"+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;h=h+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_CLOSE_COMBINATION;
h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;h=h+"key dictionary any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"dictionary lookup"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[h,AI.Yail.ORDER_ATOMIC]};
AI.Yail.dictionaries_recursive_lookup=function(){var a=AI.Yail.valueToCode(this,"KEYS",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.valueToCode(this,"DICT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,f=AI.Yail.valueToCode(this,"NOTFOUND",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_NULL,h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-recursive-lookup"+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;h=h+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+
f+AI.Yail.YAIL_CLOSE_COMBINATION;h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;h=h+"list dictionary any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"dictionary recursive lookup"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[h,AI.Yail.ORDER_ATOMIC]};
AI.Yail.dictionaries_recursive_set=function(){var a=AI.Yail.valueToCode(this,"KEYS",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_LIST,d=AI.Yail.valueToCode(this,"DICT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,f=AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-recursive-set"+AI.Yail.YAIL_SPACER;h+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;h+=a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+f+
AI.Yail.YAIL_CLOSE_COMBINATION;h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;h=h+"list dictionary any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"dictionary recursive set"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.dictionaries_getters=function(){var a=this.getFieldValue("OP"),d=AI.Yail.dictionaries_getters.OPERATORS[a],f=d[0];a=d[1];d=AI.Yail.valueToCode(this,"DICT",d[2])||AI.Yail.YAIL_EMPTY_DICT;f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+f+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"dictionary"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;
f=f+AI.Yail.YAIL_DOUBLE_QUOTE+a+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.dictionaries_getters.OPERATORS={KEYS:["yail-dictionary-get-keys","get a dictionary's keys",AI.Yail.ORDER_NONE],VALUES:["yail-dictionary-get-values","get a dictionary's values",AI.Yail.ORDER_NONE]};AI.Yail.dictionaries_get_values=function(){return AI.Yail.dictionaries_getters.call(this)};
AI.Yail.dictionaries_is_key_in=function(){var a=AI.Yail.valueToCode(this,"KEY",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.valueToCode(this,"DICT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-is-key-in"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;
f=f+"key dictionary"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"is key in dict?"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.dictionaries_length=function(){var a=AI.Yail.valueToCode(this,"DICT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-length"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"dictionary"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_SPACER+
AI.Yail.YAIL_DOUBLE_QUOTE+"get a dictionary's length"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.dictionaries_alist_to_dict=function(){var a=AI.Yail.valueToCode(this,"PAIRS",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-alist-to-dict"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_SPACER+
AI.Yail.YAIL_DOUBLE_QUOTE+"convert an alist to a dictionary"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.dictionaries_dict_to_alist=function(){var a=AI.Yail.valueToCode(this,"DICT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-dict-to-alist"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"dictionary"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+
AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"convert a dictionary to an alist"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.dictionaries_copy=function(){var a=AI.Yail.valueToCode(this,"DICT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-copy"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"dictionary"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_SPACER+
AI.Yail.YAIL_DOUBLE_QUOTE+"get a shallow copy of a dict"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.dictionaries_combine_dicts=function(){var a=AI.Yail.valueToCode(this,"DICT1",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.valueToCode(this,"DICT2",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-combine-dicts"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;
f=f+"dictionary dictionary"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"combine 2 dictionaries"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.dictionaries_walk_tree=function(){var a=AI.Yail.valueToCode(this,"PATH",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_YAIL_LIST,d=AI.Yail.valueToCode(this,"DICT",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT;return[AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary-walk"+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+
"list any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"list by walking key path in dictionary"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};AI.Yail.dictionaries_walk_all=function(){return[AI.Yail.YAIL_CONSTANT_ALL,AI.Yail.ORDER_ATOMIC]};
AI.Yail.dictionaries_is_dict=function(){var a=AI.Yail.valueToCode(this,"THING",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_DICT,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-dictionary?"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+
"check if something is a dictionary"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};AI.Yail.helpers={};AI.Yail.helpers_dropdown=function(){var a=this.workspace.getComponentDatabase().getOptionList(this.key_),d=this.getFieldValue("OPTION"),f=a.options.find(function(l){return l.name==d}),h="(static-field "+a.className+' "'+d+'")';f=f.value;"java.lang.String"==a.underlyingType&&(f=AI.Yail.quote_(f));return[AI.Yail.forRepl?"(protect-enum "+h+" "+f+")":h,AI.Yail.ORDER_ATOMIC]};AI.Yail.helpers_screen_names=function(){return[AI.Yail.quote_(this.getFieldValue("SCREEN")),AI.Yail.ORDER_ATOMIC]};
AI.Yail.helpers_assets=function(){var a=this.getField("ASSET");return a?[AI.Yail.quote_(a.getValue()),AI.Yail.ORDER_ATOMIC]:[AI.Yail.quote_(""),AI.Yail.ORDER_ATOMIC]};AI.Yail.helpers_providermodel=function(){var a=this.getField("PROVIDERMODEL");if(!a)return[AI.Yail.quote_(""),AI.Yail.ORDER_ATOMIC];a=a.getValue();return[AI.Yail.quote_(top.chatproxyinfo.model[a]),AI.Yail.ORDER_ATOMIC]};
AI.Yail.helpers_provider=function(){var a=this.getField("PROVIDER");if(!a)return[AI.Yail.quote_(""),AI.Yail.ORDER_ATOMIC];a=a.getValue();return[AI.Yail.quote_(a),AI.Yail.ORDER_ATOMIC]};/*

 @fileoverview Lists blocks yail generators for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Yail.lists={};AI.Yail.emptyListCode=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-list"+AI.Yail.YAIL_SPACER;AI.Yail.emptyListCode+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;AI.Yail.emptyListCode+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;AI.Yail.emptyListCode+=AI.Yail.YAIL_CLOSE_COMBINATION;AI.Yail.emptyListCode+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"make a list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;
AI.Yail.lists_create_with=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-list"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;for(var d=0,f=0;f<this.itemCount_;f++){var h=AI.Yail.valueToCode(this,"ADD"+f,AI.Yail.ORDER_NONE)||null;null!=h&&(a+=h+AI.Yail.YAIL_SPACER,d++)}a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;for(f=0;f<d;f++)a+="any"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION;
a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"make a list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[a,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_select_item=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.valueToCode(this,"NUM",AI.Yail.ORDER_NONE)||1,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-get-item"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;f=f+"list number"+AI.Yail.YAIL_CLOSE_COMBINATION+
AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"select list item"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_replace_item=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.valueToCode(this,"NUM",AI.Yail.ORDER_NONE)||1,f=AI.Yail.valueToCode(this,"ITEM",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-set-item!"+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;h=h+a+AI.Yail.YAIL_SPACER+d;h=h+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_CLOSE_COMBINATION;h=h+AI.Yail.YAIL_SPACER+
AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;h=h+"list number any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return h=h+AI.Yail.YAIL_DOUBLE_QUOTE+"replace list item"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.lists_remove_item=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.valueToCode(this,"INDEX",AI.Yail.ORDER_NONE)||1,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-remove-item!"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;f=f+"list number"+AI.Yail.YAIL_CLOSE_COMBINATION+
AI.Yail.YAIL_SPACER;return f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"remove list item"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.lists_insert_item=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.valueToCode(this,"INDEX",AI.Yail.ORDER_NONE)||1,f=AI.Yail.valueToCode(this,"ITEM",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-insert-item!"+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;h=h+a+AI.Yail.YAIL_SPACER+d;h=h+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_CLOSE_COMBINATION;h=
h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;h=h+"list number any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return h=h+AI.Yail.YAIL_DOUBLE_QUOTE+"insert list item"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.lists_length=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-length"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"length of list"+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_append_list=function(){var a=AI.Yail.valueToCode(this,"LIST0",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.valueToCode(this,"LIST1",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-append!"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER;f=f+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;f=f+"list list"+
AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"append to list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.lists_add_items=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode;AI.Yail.valueToCode(this,"ITEM",AI.Yail.ORDER_NONE);var d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-add-to-list!"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER;for(a=0;a<this.itemCount_;a++){var f=AI.Yail.valueToCode(this,"ITEM"+a,AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;d+=f+AI.Yail.YAIL_SPACER}d+=
AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d+="list ";for(a=0;a<this.itemCount_;a++)d+="any"+AI.Yail.YAIL_SPACER;d+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"add items to list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.lists_is_in=function(){var a=AI.Yail.valueToCode(this,"ITEM",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-member?"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;f=f+"any list"+AI.Yail.YAIL_CLOSE_COMBINATION+
AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"is in list?"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_position_in=function(){var a=AI.Yail.valueToCode(this,"ITEM",AI.Yail.ORDER_NONE)||1,d=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-index"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;f=f+"any list"+AI.Yail.YAIL_CLOSE_COMBINATION+
AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"index in list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_pick_random_item=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-pick-random"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+
"pick random item"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_is_empty=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-empty?"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"is list empty?"+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_copy=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-copy"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"copy list"+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_is_list=function(){var a=AI.Yail.valueToCode(this,"ITEM",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list?"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"is a list?"+AI.Yail.YAIL_DOUBLE_QUOTE+
AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_reverse=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-reverse"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"reverse list"+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_to_csv_row=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-to-csv-row"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+
"list to csv row"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_to_csv_table=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-to-csv-table"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+
"list to csv table"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_from_csv_row=function(){var a=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-from-csv-row"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"list from csv row"+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_from_csv_table=function(){var a=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-from-csv-table"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"list from csv table"+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_lookup_in_pairs=function(){var a=AI.Yail.valueToCode(this,"KEY",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,f=AI.Yail.valueToCode(this,"NOTFOUND",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_NULL,h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-alist-lookup"+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;h=h+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_CLOSE_COMBINATION;
h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;h=h+"any list any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"lookup in pairs"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[h,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_join_with_separator=function(){var a=AI.Yail.valueToCode(this,"SEPARATOR",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-join-with-separator"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+d+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE;f=f+AI.Yail.YAIL_OPEN_COMBINATION+
"list"+AI.Yail.YAIL_SPACER+"text"+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"join with separator"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_map=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-list"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"make a list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;var d=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR");
a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||a;var f=AI.Yail.valueToCode(this,"TO",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return[AI.Yail.YAIL_MAP+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_filter=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-list"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"make a list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;var d=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR");
a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||a;var f=AI.Yail.valueToCode(this,"TEST",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return[AI.Yail.YAIL_FILTER+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_reduce=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-list"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"make a list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;var d=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR1"),
f=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR2");a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||a;var h=AI.Yail.valueToCode(this,"INITANSWER",AI.Yail.ORDER_NONE),l=AI.Yail.valueToCode(this,"COMBINE",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return[AI.Yail.YAIL_REDUCE+h+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+l+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_sort=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-sort";d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"sort "+AI.Yail.YAIL_DOUBLE_QUOTE+
AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_sort_comparator=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-list"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"make a list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;var d=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR1"),
f=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR2");a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||a;var h=AI.Yail.valueToCode(this,"COMPARE",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return[AI.Yail.YAIL_SORT_COMPARATOR_NONDEST+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_SPACER+h+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_sort_key=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-list"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"make a list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;var d=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR");
a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||a;var f=AI.Yail.valueToCode(this,"KEY",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return[AI.Yail.YAIL_SORT_KEY_NONDEST+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_minimum_value=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-list"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"minimum value of list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;var d=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR1"),
f=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR2");a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||a;var h=AI.Yail.valueToCode(this,"COMPARE",AI.Yail.ORDER_NONE)||"(call-yail-primitive < (*list-for-runtime* (lexical-value "+d+") (lexical-value "+f+')) \'(number number) "<")';return["(mincomparator-nondest "+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_SPACER+h+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_maximum_value=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"make-yail-list"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a+=AI.Yail.YAIL_CLOSE_COMBINATION;a+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"maximum value of list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;var d=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR1"),
f=AI.Yail.YAIL_LOCAL_VAR_TAG+this.getFieldValue("VAR2");a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||a;var h=AI.Yail.valueToCode(this,"COMPARE",AI.Yail.ORDER_NONE)||"(call-yail-primitive < (*list-for-runtime* (lexical-value "+d+") (lexical-value "+f+')) \'(number number) "<")';return["(maxcomparator-nondest "+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_SPACER+h+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_but_first=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-but-first";d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"butFirst of list"+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_but_last=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-but-last";d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"list"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"butLast of list"+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lists_slice=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.emptyListCode,d=AI.Yail.valueToCode(this,"INDEX1",AI.Yail.ORDER_NONE)||1,f=AI.Yail.valueToCode(this,"INDEX2",AI.Yail.ORDER_NONE)||1,h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-list-slice";h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;h=h+a+AI.Yail.YAIL_SPACER+d;h=h+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_CLOSE_COMBINATION;h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+
AI.Yail.YAIL_OPEN_COMBINATION;h=h+"list number number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_DOUBLE_QUOTE+"slice of list"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[h,AI.Yail.ORDER_ATOMIC]};/*

 @fileoverview Logic blocks yail generators for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Yail.logic={};AI.Yail.logic_boolean=function(){return["TRUE"==this.getFieldValue("BOOL")?AI.Yail.YAIL_TRUE:AI.Yail.YAIL_FALSE,AI.Yail.ORDER_ATOMIC]};AI.Yail.logic_false=function(){return AI.Yail.logic_boolean.call(this)};
AI.Yail.logic_negate=function(){var a=AI.Yail.valueToCode(this,"BOOL",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"yail-not"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"boolean"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"not"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;
return[d,AI.Yail.ORDER_ATOMIC]};AI.Yail.logic_operation=function(){var a=this.opField.getValue(),d=AI.Yail.logic_operation.OPERATORS[a],f=d[0];a=d[1];var h=d[2];d=AI.Yail.valueToCode(this,"A",a)||h;h=AI.Yail.valueToCode(this,"B",a)||h;f=AI.Yail.YAIL_OPEN_COMBINATION+f+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+h;for(d=2;d<this.itemCount_;d++)h=AI.Yail.valueToCode(this,this.repeatingInputName+d,a)||AI.Yail.YAIL_FALSE,f+=AI.Yail.YAIL_SPACER+h;f+=AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.logic_operation.OPERATORS={AND:["and-delayed",AI.Yail.ORDER_NONE,AI.Yail.YAIL_TRUE],OR:["or-delayed",AI.Yail.ORDER_NONE,AI.Yail.YAIL_FALSE]};AI.Yail.logic_or=function(){return AI.Yail.logic_operation.call(this)};
AI.Yail.logic_compare=function(){var a=AI.Yail.valueToCode(this,"A",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.valueToCode(this,"B",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,f="NEQ"==this.getFieldValue("OP")?"yail-not-equal?":"yail-equal?";f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+f+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+
"any"+AI.Yail.YAIL_SPACER+"any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"="+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};/*

 @fileoverview Math blocks yail generators for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Yail.math={};AI.Yail.math_number=function(){return[Number(this.getFieldValue("NUM")),AI.Yail.ORDER_ATOMIC]};AI.Yail.math_number_radix=function(){var a=Blockly.Blocks.math_number_radix.PREFIX[this.getFieldValue("OP")];return[Number(a+this.getFieldValue("NUM")),AI.Yail.ORDER_ATOMIC]};
AI.Yail.math_compare=function(){var a=this.getFieldValue("OP"),d=AI.Yail.math_compare.OPERATORS[a],f=d[0],h=d[1],l=d[2];d=AI.Yail.valueToCode(this,"A",l)||0;l=AI.Yail.valueToCode(this,"B",l)||0;f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+f+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+l+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+("EQ"==a||"NEQ"==a?"any any":"number number")+
AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+h+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_compare.OPERATORS={EQ:["yail-equal?","=",AI.Yail.ORDER_NONE],NEQ:["yail-not-equal?","not =",AI.Yail.ORDER_NONE],LT:["<","<",AI.Yail.ORDER_NONE],LTE:["<=","<=",AI.Yail.ORDER_NONE],GT:[">",">",AI.Yail.ORDER_NONE],GTE:[">=",">=",AI.Yail.ORDER_NONE]};
AI.Yail.math_arithmetic=function(a,d){var f=AI.Yail.math_arithmetic.OPERATORS[a],h=f[0],l=f[1];f=AI.Yail.valueToCode(d,"A",l)||0;d=AI.Yail.valueToCode(d,"B",l)||0;l=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+h+AI.Yail.YAIL_SPACER;l=l+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;l=l+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;l+=("EQ"==a||"NEQ"==a?"any any":"number number")+AI.Yail.YAIL_CLOSE_COMBINATION+
AI.Yail.YAIL_SPACER;l=l+AI.Yail.YAIL_DOUBLE_QUOTE+h+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[l,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_subtract=function(){return AI.Yail.math_arithmetic("MINUS",this)};AI.Yail.math_division=function(){return AI.Yail.math_arithmetic("DIVIDE",this)};AI.Yail.math_power=function(){return AI.Yail.math_arithmetic("POWER",this)};AI.Yail.math_add=function(){return AI.Yail.math_arithmetic_list("ADD",this)};
AI.Yail.math_multiply=function(){return AI.Yail.math_arithmetic_list("MULTIPLY",this)};
AI.Yail.math_arithmetic_list=function(a,d){var f=AI.Yail.math_arithmetic.OPERATORS[a];a=f[0];f=f[1];var h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+a+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;for(var l=0;l<d.itemCount_;l++){var m=AI.Yail.valueToCode(d,"NUM"+l,f)||0;h+=m+AI.Yail.YAIL_SPACER}h+=AI.Yail.YAIL_CLOSE_COMBINATION;h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;for(l=0;l<d.itemCount_;l++)h+="number"+AI.Yail.YAIL_SPACER;
h+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_DOUBLE_QUOTE+a+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[h,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_arithmetic.OPERATORS={ADD:["+",AI.Yail.ORDER_NONE],MINUS:["-",AI.Yail.ORDER_NONE],MULTIPLY:["*",AI.Yail.ORDER_NONE],DIVIDE:["yail-divide",AI.Yail.ORDER_NONE],POWER:["expt",AI.Yail.ORDER_NONE]};
AI.Yail.math_bitwise=function(){var a=this.getFieldValue("OP"),d=AI.Yail.math_bitwise.OPERATORS[a];a=d[0];for(var f=d[1],h=d="",l=0;l<this.itemCount_;l++)d+=(AI.Yail.valueToCode(this,"NUM"+l,f)||0)+AI.Yail.YAIL_SPACER,h+="number"+AI.Yail.YAIL_SPACER;f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+a+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+h+AI.Yail.YAIL_CLOSE_COMBINATION+
AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+a+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_bitwise.OPERATORS={BITAND:["bitwise-and",AI.Yail.ORDER_NONE],BITIOR:["bitwise-ior",AI.Yail.ORDER_NONE],BITXOR:["bitwise-xor",AI.Yail.ORDER_NONE]};
AI.Yail.math_single=function(){var a=this.getFieldValue("OP"),d=AI.Yail.math_single.OPERATORS[a],f=d[0];a=d[1];d=AI.Yail.valueToCode(this,"NUM",d[2])||1;f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+f+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+a+AI.Yail.YAIL_DOUBLE_QUOTE+
AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_single.OPERATORS={ROOT:["sqrt","sqrt",AI.Yail.ORDER_NONE],ABS:["abs","abs",AI.Yail.ORDER_NONE],NEG:["-","negate",AI.Yail.ORDER_NONE],LN:["log","log",AI.Yail.ORDER_NONE],EXP:["exp","exp",AI.Yail.ORDER_NONE],ROUND:["yail-round","round",AI.Yail.ORDER_NONE],CEILING:["yail-ceiling","ceiling",AI.Yail.ORDER_NONE],FLOOR:["yail-floor","floor",AI.Yail.ORDER_NONE]};AI.Yail.math_abs=function(){return AI.Yail.math_single.call(this)};
AI.Yail.math_neg=function(){return AI.Yail.math_single.call(this)};AI.Yail.math_round=function(){return AI.Yail.math_single.call(this)};AI.Yail.math_ceiling=function(){return AI.Yail.math_single.call(this)};AI.Yail.math_floor=function(){return AI.Yail.math_single.call(this)};
AI.Yail.math_random_int=function(){var a=AI.Yail.valueToCode(this,"FROM",AI.Yail.ORDER_NONE)||0,d=AI.Yail.valueToCode(this,"TO",AI.Yail.ORDER_NONE)||0,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"random-integer"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"number number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;
f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"random integer"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.math_random_float=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"random-fraction"+AI.Yail.YAIL_SPACER;a=a+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;a=a+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"random fraction"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[a,AI.Yail.ORDER_ATOMIC]};
AI.Yail.math_random_set_seed=function(){var a=AI.Yail.valueToCode(this,"NUM",AI.Yail.ORDER_NONE)||0,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"random-set-seed"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;return d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"random set seed"+AI.Yail.YAIL_DOUBLE_QUOTE+
AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.math_on_list=function(){var a=this.getFieldValue("OP"),d=AI.Yail.math_on_list.OPERATORS[a];a=d[0];for(var f=d[1],h=d[2],l=d="",m=0;m<this.itemCount_;m++)d+=(AI.Yail.valueToCode(this,"NUM"+m,f)||0)+AI.Yail.YAIL_SPACER,l+="number"+AI.Yail.YAIL_SPACER;0===this.itemCount_&&(d+=h+AI.Yail.YAIL_SPACER,l+="number"+AI.Yail.YAIL_SPACER);f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+a+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;
f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+l+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+a+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_on_list.OPERATORS={MIN:["min",AI.Yail.ORDER_NONE,"+inf.0"],MAX:["max",AI.Yail.ORDER_NONE,"-inf.0"]};
AI.Yail.math_on_list2=function(){var a=this.getFieldValue("OP");a=AI.Yail.math_on_list2.OPERATORS[a][0];var d=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_YAIL_LIST,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+a+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"list-of-number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;
f=f+AI.Yail.YAIL_DOUBLE_QUOTE+a+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_on_list2.OPERATORS={AVG:["avg",AI.Yail.ORDER_NONE],MIN:["minl",AI.Yail.ORDER_NONE],MAX:["maxl",AI.Yail.ORDER_NONE],GM:["gm",AI.Yail.ORDER_NONE],SD:["std-dev",AI.Yail.ORDER_NONE],SE:["std-err",AI.Yail.ORDER_NONE]};
AI.Yail.math_mode_of_list=function(){var a=AI.Yail.valueToCode(this,"LIST",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_EMPTY_YAIL_LIST,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"mode"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"list-of-number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"mode"+AI.Yail.YAIL_DOUBLE_QUOTE+
AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.math_divide=function(){var a=this.getFieldValue("OP"),d=AI.Yail.math_divide.OPERATORS[a];a=d[0];var f=d[1];d=AI.Yail.valueToCode(this,"DIVIDEND",f)||0;f=AI.Yail.valueToCode(this,"DIVISOR",f)||1;var h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+a+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_CLOSE_COMBINATION;h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"number number"+AI.Yail.YAIL_CLOSE_COMBINATION+
AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_DOUBLE_QUOTE+a+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[h,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_divide.OPERATORS={MODULO:["modulo",AI.Yail.ORDER_NONE],REMAINDER:["remainder",AI.Yail.ORDER_NONE],QUOTIENT:["quotient",AI.Yail.ORDER_NONE]};
AI.Yail.math_trig=function(){var a=this.getFieldValue("OP"),d=AI.Yail.math_trig.OPERATORS[a],f=d[1];a=d[0];d=AI.Yail.valueToCode(this,"NUM",d[2])||0;f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+f+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+a+AI.Yail.YAIL_DOUBLE_QUOTE+
AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_trig.OPERATORS={SIN:["sin","sin-degrees",AI.Yail.ORDER_NONE],COS:["cos","cos-degrees",AI.Yail.ORDER_NONE],TAN:["tan","tan-degrees",AI.Yail.ORDER_NONE],ASIN:["asin","asin-degrees",AI.Yail.ORDER_NONE],ACOS:["acos","acos-degrees",AI.Yail.ORDER_NONE],ATAN:["atan","atan-degrees",AI.Yail.ORDER_NONE]};AI.Yail.math_cos=function(){return AI.Yail.math_trig.call(this)};AI.Yail.math_tan=function(){return AI.Yail.math_trig.call(this)};
AI.Yail.math_atan2=function(){var a=AI.Yail.valueToCode(this,"Y",AI.Yail.ORDER_NONE)||1,d=AI.Yail.valueToCode(this,"X",AI.Yail.ORDER_NONE)||1,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"atan2-degrees"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"number number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+
"atan2"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.math_convert_angles=function(){var a=this.getFieldValue("OP"),d=AI.Yail.math_convert_angles.OPERATORS[a],f=d[0];a=d[1];d=AI.Yail.valueToCode(this,"NUM",d[2])||0;f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+f+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+
a+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_convert_angles.OPERATORS={RADIANS_TO_DEGREES:["radians->degrees","convert radians to degrees",AI.Yail.ORDER_NONE],DEGREES_TO_RADIANS:["degrees->radians","convert degrees to radians",AI.Yail.ORDER_NONE]};
AI.Yail.math_format_as_decimal=function(){var a=AI.Yail.valueToCode(this,"NUM",AI.Yail.ORDER_NONE)||0,d=AI.Yail.valueToCode(this,"PLACES",AI.Yail.ORDER_NONE)||0,f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"format-as-decimal"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"number number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;
f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"format as decimal"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.math_is_a_number=function(){var a=this.getFieldValue("OP"),d=AI.Yail.math_is_a_number.OPERATORS[a];a=d[0];d=d[1];var f=AI.Yail.valueToCode(this,"NUM",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return["(call-yail-primitive "+a+" (*list-for-runtime* "+f+") "+d+")",AI.Yail.ORDER_ATOMIC]};
AI.Yail.math_is_a_number.OPERATORS={NUMBER:["is-number?",'\'(text) "is a number?"'],BASE10:["is-base10?",'\'(text) "is base10?"'],HEXADECIMAL:["is-hexadecimal?",'\'(text) "is hexadecimal?"'],BINARY:["is-binary?",'\'(text) "is binary?"']};AI.Yail.math_convert_number=function(){var a=this.getFieldValue("OP"),d=AI.Yail.math_convert_number.OPERATORS[a];a=d[0];d=d[1];var f=AI.Yail.valueToCode(this,"NUM",AI.Yail.ORDER_NONE)||0;return["(call-yail-primitive "+a+" (*list-for-runtime* "+f+") "+d+")",AI.Yail.ORDER_ATOMIC]};
AI.Yail.math_convert_number.OPERATORS={DEC_TO_HEX:["math-convert-dec-hex",'\'(text) "convert Dec to Hex"'],HEX_TO_DEC:["math-convert-hex-dec",'\'(text) "convert Hex to Dec"'],DEC_TO_BIN:["math-convert-dec-bin",'\'(text) "convert Dec to Hex"'],BIN_TO_DEC:["math-convert-bin-dec",'\'(text) "convert Hex to Dec"']};/*

 @fileoverview Procedure yail generators for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Yail.procedures={};AI.Yail.YAIL_PROC_TAG="p$";
AI.Yail.procedures_defreturn=function(){var a=AI.Yail.YAIL_LOCAL_VAR_TAG+(Blockly.usePrefixInYail&&0!=this.arguments_.length?"param_":""),d=this.arguments_.map(function(l){return a+l}).join(" "),f=AI.Yail.YAIL_PROC_TAG+this.getFieldValue("NAME"),h=AI.Yail.valueToCode(this,"RETURN",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return AI.Yail.YAIL_DEFINE+AI.Yail.YAIL_OPEN_COMBINATION+f+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+h+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.procedures_defnoreturn=function(){var a=AI.Yail.YAIL_LOCAL_VAR_TAG+(Blockly.usePrefixInYail&&0!=this.arguments_.length?"param_":""),d=this.arguments_.map(function(l){return a+l}).join(" "),f=AI.Yail.YAIL_PROC_TAG+this.getFieldValue("NAME"),h=AI.Yail.statementToCode(this,"STACK",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return AI.Yail.YAIL_DEFINE+AI.Yail.YAIL_OPEN_COMBINATION+f+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION+h+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.procedure_lexical_variable_get=function(){return AI.Yail.lexical_variable_get.call(this)};AI.Yail.procedures_do_then_return=function(){return AI.Yail.controls_do_then_return.call(this)};
AI.Yail.procedures_callnoreturn=function(){for(var a=AI.Yail.YAIL_PROC_TAG+this.getFieldValue("PROCNAME"),d=[],f=0;this.getInput("ARG"+f);f++)d[f]=AI.Yail.valueToCode(this,"ARG"+f,AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_GET_VARIABLE+a+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+d.join(" ")+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.procedures_callreturn=function(){for(var a=AI.Yail.YAIL_PROC_TAG+this.getFieldValue("PROCNAME"),d=[],f=0;this.getInput("ARG"+f);f++)d[f]=AI.Yail.valueToCode(this,"ARG"+f,AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE;return[AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_GET_VARIABLE+a+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER+d.join(" ")+AI.Yail.YAIL_CLOSE_COMBINATION,AI.Yail.ORDER_ATOMIC]};/*

 @fileoverview Text blocks yail generators for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Yail.text={};AI.Yail.text=function(){return[AI.Yail.quote_(this.getFieldValue("TEXT")),AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_join=function(){var a=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"string-append"+AI.Yail.YAIL_SPACER;a=a+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;for(var d=0;d<this.itemCount_;d++){var f=AI.Yail.valueToCode(this,"ADD"+d,AI.Yail.ORDER_NONE)||'""';a+=f+AI.Yail.YAIL_SPACER}a+=AI.Yail.YAIL_CLOSE_COMBINATION;a=a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;for(d=0;d<this.itemCount_;d++)a+="text"+AI.Yail.YAIL_SPACER;a+=AI.Yail.YAIL_CLOSE_COMBINATION+
AI.Yail.YAIL_SPACER;a=a+AI.Yail.YAIL_DOUBLE_QUOTE+"join"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[a,AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_length=function(){var a=AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"string-length"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"length"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;
return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_isEmpty=function(){var a=AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"string-empty?"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"is text empty?"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;
return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_compare=function(){var a=this.getFieldValue("OP"),d=AI.Yail.text_compare.OPERATORS[a],f=d[0],h=d[1],l=d[2];d=AI.Yail.valueToCode(this,"TEXT1",l)||'""';l=AI.Yail.valueToCode(this,"TEXT2",l)||'""';f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+f+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+l+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"text text"+AI.Yail.YAIL_CLOSE_COMBINATION+
AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+h+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;"NEQ"==a&&(f="(not "+f+")");return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.text_compare.OPERATORS={LT:["string<?","text<",AI.Yail.ORDER_NONE],GT:["string>?","text>",AI.Yail.ORDER_NONE],EQUAL:["string=?","text=",AI.Yail.ORDER_NONE],NEQ:["string=?","not =",AI.Yail.ORDER_NONE]};
AI.Yail.text_trim=function(){var a=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"string-trim"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"trim"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;
return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_changeCase=function(){var a=this.getFieldValue("OP"),d=AI.Yail.text_changeCase.OPERATORS[a],f=d[0];a=d[1];d=AI.Yail.valueToCode(this,"TEXT",d[2])||'""';f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+f+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+a+
AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.text_changeCase.OPERATORS={UPCASE:["string-to-upper-case","upcase",AI.Yail.ORDER_NONE],DOWNCASE:["string-to-lower-case","downcase",AI.Yail.ORDER_NONE]};
AI.Yail.text_starts_at=function(){var a=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.valueToCode(this,"PIECE",AI.Yail.ORDER_NONE)||'""',f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"string-starts-at"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"text text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;
f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"starts at"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_contains=function(){var a=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.valueToCode(this,"PIECE",AI.Yail.ORDER_NONE)||'""',f=AI.Yail.text_contains.OPERATORS[this.getMode()],h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+f.operator+AI.Yail.YAIL_SPACER;h+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION;h+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"text "+f.type+AI.Yail.YAIL_CLOSE_COMBINATION+
AI.Yail.YAIL_SPACER;h+=AI.Yail.YAIL_DOUBLE_QUOTE+f.blockName+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[h,f.order]};AI.Yail.text_contains.OPERATORS={CONTAINS:{operator:"string-contains",blockName:"string contains",order:AI.Yail.ORDER_ATOMIC,type:"text"},CONTAINS_ANY:{operator:"string-contains-any",blockName:"string contains any",order:AI.Yail.ORDER_ATOMIC,type:"list"},CONTAINS_ALL:{operator:"string-contains-all",blockName:"string contains all",order:AI.Yail.ORDER_ATOMIC,type:"list"}};
AI.Yail.text_split=function(){var a=this.getFieldValue("OP"),d=AI.Yail.text_split.OPERATORS[a],f=d[0];a=d[1];var h=d[2];d=d[3];var l=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||'""',m=AI.Yail.valueToCode(this,"AT",AI.Yail.ORDER_NONE)||1;f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+f+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+l+AI.Yail.YAIL_SPACER+m+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+
"text"+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+a+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,h]};
AI.Yail.text_split.OPERATORS={SPLITATFIRST:["string-split-at-first","split at first",AI.Yail.ORDER_ATOMIC,"text"],SPLITATFIRSTOFANY:["string-split-at-first-of-any","split at first of any",AI.Yail.ORDER_ATOMIC,"list"],SPLIT:["string-split","split",AI.Yail.ORDER_ATOMIC,"text"],SPLITATANY:["string-split-at-any","split at any",AI.Yail.ORDER_ATOMIC,"list"]};
AI.Yail.text_split_at_spaces=function(){var a=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"string-split-at-spaces"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"split at spaces"+AI.Yail.YAIL_DOUBLE_QUOTE+
AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_segment=function(){var a=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.valueToCode(this,"START",AI.Yail.ORDER_NONE)||1,f=AI.Yail.valueToCode(this,"LENGTH",AI.Yail.ORDER_NONE)||1,h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"string-substring"+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_CLOSE_COMBINATION;h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+
"text number number"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_DOUBLE_QUOTE+"segment"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[h,AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_replace_all=function(){var a=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.valueToCode(this,"SEGMENT",AI.Yail.ORDER_NONE)||'""',f=AI.Yail.valueToCode(this,"REPLACEMENT",AI.Yail.ORDER_NONE)||'""',h=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"string-replace-all"+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+f+AI.Yail.YAIL_CLOSE_COMBINATION;h=h+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+
AI.Yail.YAIL_OPEN_COMBINATION+"text text text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;h=h+AI.Yail.YAIL_DOUBLE_QUOTE+"replace all"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[h,AI.Yail.ORDER_ATOMIC]};
AI.Yail.obfuscated_text=function(){for(var a=this.getFieldValue("TEXT"),d=AI.Yail,f=d.quote_,h=this.confounder,l=[];h.length<a.length;)h+=h;for(var m=0;m<a.length;m++){var p=(a.charCodeAt(m)^h.charCodeAt(m))&255;l.push(String.fromCharCode((((p>>8^m)&255)<<8|(p^a.length-m)&255)&255))}a=l.join("");d=f.call(d,a);f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"text-deobfuscate"+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_SPACER+AI.Yail.quote_(this.confounder)+
AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"text text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_DOUBLE_QUOTE+"deobfuscate text"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_is_string=function(){var a=AI.Yail.valueToCode(this,"ITEM",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE,d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"string?"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;d=d+a+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION;d=d+"any"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"is a string?"+AI.Yail.YAIL_DOUBLE_QUOTE+
AI.Yail.YAIL_CLOSE_COMBINATION;return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_reverse=function(){var a=AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+"string-reverse"+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION;d=d+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE+AI.Yail.YAIL_OPEN_COMBINATION+"text"+AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;d=d+AI.Yail.YAIL_DOUBLE_QUOTE+"reverse"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;
return[d,AI.Yail.ORDER_ATOMIC]};
AI.Yail.text_replace_mappings=function(){var a=AI.Yail.valueToCode(this,"TEXT",AI.Yail.ORDER_NONE)||'""',d=AI.Yail.valueToCode(this,"MAPPINGS",AI.Yail.ORDER_NONE)||'""',f=this.getFieldValue("OP");f=AI.Yail.YAIL_CALL_YAIL_PRIMITIVE+AI.Yail.text_replace_mappings.OPERATORS[f]+AI.Yail.YAIL_SPACER;f=f+AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LIST_CONSTRUCTOR+AI.Yail.YAIL_SPACER;f=f+a+AI.Yail.YAIL_SPACER;f=f+d+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_QUOTE;f=f+AI.Yail.YAIL_OPEN_COMBINATION+
"text"+AI.Yail.YAIL_SPACER;f=f+"dictionary"+AI.Yail.YAIL_CLOSE_COMBINATION;f=f+AI.Yail.YAIL_SPACER+AI.Yail.YAIL_DOUBLE_QUOTE+"replace with mappings"+AI.Yail.YAIL_DOUBLE_QUOTE+AI.Yail.YAIL_CLOSE_COMBINATION;return[f,AI.Yail.ORDER_ATOMIC]};AI.Yail.text_replace_mappings.OPERATORS={LONGEST_STRING_FIRST:"string-replace-mappings-longest-string",DICTIONARY_ORDER:"string-replace-mappings-dictionary"};/*

 @fileoverview variables blocks yail generators for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Yail.variables={};AI.Yail.YAIL_GLOBAL_VAR_TAG="g$";AI.Yail.YAIL_LOCAL_VAR_TAG="$";AI.Yail.global_declaration=function(){var a=AI.Yail.YAIL_GLOBAL_VAR_TAG+this.getFieldValue("NAME"),d=AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE)||"0";return AI.Yail.YAIL_DEFINE+a+AI.Yail.YAIL_SPACER+d+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.lexical_variable_get=function(){var a="",d=this.getFieldValue("VAR");this.eventparam?d=this.eventparam:(Blockly.LexicalVariable.getEventParam(this),this.eventparam&&(d=this.eventparam));d=AI.Yail.getVariableCommandAndName(d);a+=d[0];d=d[1];a+=d+AI.Yail.YAIL_CLOSE_COMBINATION;return[a,AI.Yail.ORDER_ATOMIC]};
AI.Yail.lexical_variable_set=function(){var a=AI.Yail.valueToCode(this,"VALUE",AI.Yail.ORDER_NONE)||"0",d="",f=this.getFieldValue("VAR");this.eventparam?f=this.eventparam:(Blockly.LexicalVariable.getEventParam(this),this.eventparam&&(f=this.eventparam));f=AI.Yail.setVariableCommandAndName(f);d+=f[0];f=f[1];return d+=f+AI.Yail.YAIL_SPACER+a+AI.Yail.YAIL_CLOSE_COMBINATION};
AI.Yail.getVariableCommandAndName=function(a){var d=Blockly.unprefixName(a);a=d[0];d=d[1];a===Blockly.Msg.LANG_VARIABLES_GLOBAL_PREFIX||a===Blockly.GLOBAL_KEYWORD?(a=AI.Yail.YAIL_GLOBAL_VAR_TAG+d,d=AI.Yail.YAIL_GET_VARIABLE):(a=AI.Yail.YAIL_LOCAL_VAR_TAG+Blockly.possiblyPrefixYailNameWith(a)(d),d=AI.Yail.YAIL_LEXICAL_VALUE);return[d,a]};
AI.Yail.setVariableCommandAndName=function(a){var d=Blockly.unprefixName(a);a=d[0];d=d[1];a===Blockly.Msg.LANG_VARIABLES_GLOBAL_PREFIX||a===Blockly.GLOBAL_KEYWORD?(a=AI.Yail.YAIL_GLOBAL_VAR_TAG+d,d=AI.Yail.YAIL_SET_VARIABLE):(a=AI.Yail.YAIL_LOCAL_VAR_TAG+Blockly.possiblyPrefixYailNameWith(a)(d),d=AI.Yail.YAIL_SET_LEXICAL_VALUE);return[d,a]};AI.Yail.local_declaration_statement=function(){return AI.Yail.local_variable(this,!1)};
AI.Yail.local_declaration_expression=function(){return AI.Yail.local_variable(this,!0)};
AI.Yail.local_variable=function(a,d){var f=AI.Yail.YAIL_LET;f+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_SPACER;for(var h=0;a.getFieldValue("VAR"+h);h++)f+=AI.Yail.YAIL_OPEN_COMBINATION+AI.Yail.YAIL_LOCAL_VAR_TAG+(Blockly.usePrefixInYail?"local_":"")+a.getFieldValue("VAR"+h),f+=AI.Yail.YAIL_SPACER+(AI.Yail.valueToCode(a,"DECL"+h,AI.Yail.ORDER_NONE)||"0"),f+=AI.Yail.YAIL_CLOSE_COMBINATION+AI.Yail.YAIL_SPACER;f+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;f=d?a.getInputTargetBlock("RETURN")?
f+(AI.Yail.YAIL_SPACER+AI.Yail.valueToCode(a,"RETURN",AI.Yail.ORDER_NONE)):f+(AI.Yail.YAIL_SPACER+"0"):f+(AI.Yail.YAIL_SPACER+(AI.Yail.statementToCode(a,"STACK",AI.Yail.ORDER_NONE)||AI.Yail.YAIL_FALSE));f+=AI.Yail.YAIL_SPACER+AI.Yail.YAIL_CLOSE_COMBINATION;return d?[f,AI.Yail.ORDER_ATOMIC]:f};AI.Blockly.ReplMgr={};AI.Blockly.ReplStateObj={};void 0===Blockly.ReplMgr&&(Blockly.ReplMgr={});Blockly.ReplMgr.yail=null;top.usewebrtc=!1;top.loadAll=!0;top.loadAllErrorCount=0;Blockly.ReplMgr.rsState={IDLE:0,RENDEZVOUS:1,CONNECTED:2,WAITING:3,ASSET:4,EXTENSIONS:5};Blockly.ReplStateObj=function(){};
Blockly.ReplStateObj.prototype={state:Blockly.ReplMgr.rsState.IDLE,url:null,baseurl:null,replcode:null,rendezvouscode:null,dialog:null,count:0,didversioncheck:!1,isUSB:!1,rendezvous2:"https://rendezvous.appinventor.mit.edu/rendezvous2/",iceservers:{iceServers:[{urls:["turn:turn.appinventor.mit.edu:3478"],username:"oh",credential:"boy"}]},emulator:!1};
var PROTECT_ENUM_ANDROID="(define-syntax protect-enum   (lambda (x)     (syntax-case x ()       ((_ enum-value number-value)         (if (< com.google.appinventor.components.common.YaVersion:BLOCKS_LANGUAGE_VERSION 34)           #'number-value           #'enum-value)))))",PROTECT_ENUM_IOS="#f))(define-syntax protect-enum (syntax-rules () ((_ enum-value number-value) (if (equal? \"\" (yail:invoke (yail:invoke AIComponentKit.Form 'getActiveForm) 'VersionName)) number-value enum-value))))(begin (begin #f";
top.ReplState=new Blockly.ReplStateObj;top.ReplState.phoneState={};Blockly.ReplMgr.isConnected=function(){return top.ReplState.state===Blockly.ReplMgr.rsState.CONNECTED};
Blockly.ReplMgr.buildYail=function(a,d){function f(G){G.isGeneric?(M[G.typeName]||(M[G.typeName]={}),M[G.typeName][G.eventName]=!0):(X[G.instanceName]||(X[G.instanceName]={}),X[G.instanceName][G.eventName]=!0)}var h=[],l=!1;top.ReplState.phoneState||(top.ReplState.phoneState={});var m=top.ReplState.phoneState;if(m.formJson&&m.packageName){m.initialized||(m.initialized=!0,m.blockYail={},m.componentYail="");var p=m.nofqcn?function(G){G=G.split(".");return G[G.length-1]}:function(G){return G};var q=
JSON.parse(m.formJson);if(q.Properties){var u=q.Properties;var y=u.$Name}var C=Blockly.common.getMainWorkspace().buildComponentMap([],[],!1,!1),K=[];if(u){"Screen1"!=y&&h.push(AI.Yail.getComponentRenameString("Screen1",y));q=q.Source;if("Form"==q)h=h.concat(AI.Yail.getComponentLines(y,u,null,C,!0,p,a.getComponentDatabase()));else throw"Source type "+q+" is invalid.";K=AI.Yail.getDeepNames(u,K);K=K.filter(function(G,J){return K.indexOf(G)==J});h=h.join("\n");if(m.componentYail!=h||d)l=!0,m.blockYail=
{},this.putYail(AI.Yail.YAIL_CLEAR_FORM),this.putYail(AI.Yail.YAIL_SET_FORM_NAME_BEGIN+y+AI.Yail.YAIL_SET_FORM_NAME_END),this.putYail(h),this.putYail(AI.Yail.YAIL_INIT_RUNTIME),m.componentYail=h}a=Blockly.common.getMainWorkspace().getTopBlocks(!0);p=function(){this.block.replError&&(this.block.replError=null);this.block.workspace.getWarningHandler().checkAllBlocksForWarningsAndErrors()};u=function(G){this.block.replError=G;this.block.workspace.getWarningHandler().checkAllBlocksForWarningsAndErrors()};
var X={},M={};for(C=0;d=a[C];C++)if(d.disabled){if(h="component_event"==d.type)h=d.isGeneric&&M[d.typeName]&&M[d.typeName][d.eventName]?!0:!d.isGeneric&&X[d.instanceName]&&X[d.instanceName][d.eventName]?!0:!1,h=!h;h&&(h=AI.Yail.disabledEventBlockToCode(d),m.blockYail[d.id]!=h&&(this.putYail(h,d,p,u),m.blockYail[d.id]=h))}else!d.category||d.hasError&&!d.replError||"event"!=d.blockType&&"global_declaration"!=d.type&&"procedures_defnoreturn"!=d.type&&"procedures_defreturn"!=d.type||("component_event"==
d.type&&f(d),h=AI.Yail.blockToCode(d),m.blockYail[d.id]!=h&&(this.putYail(h,d,p,u),m.blockYail[d.id]=h));l&&this.putYail(AI.Yail.getComponentInitializationString(y,K))}};Blockly.ReplMgr.sendFormData=function(a,d,f,h){top.ReplState.phoneState.formJson=a;top.ReplState.phoneState.packageName=d;var l=this;this.polltimer&&clearTimeout(this.polltimer);this.polltimer=setTimeout(function(){l.polltimer=null;return l.pollYail.call(l,f,h)},500)};
Blockly.ReplMgr.pollYail=function(a,d){var f=top.AssetManager_refreshAssets;if(void 0!==window){var h=this;top.ReplState.state==this.rsState.CONNECTED&&f(function(){top.ReplState.state==h.rsState.CONNECTED&&h.buildYail(a,d)})}};
Blockly.ReplMgr.resetYail=function(a){console.log("resetYail: partial = "+a);var d=top.ReplState;d.phoneState.initialized=!1;a||(this.putYail.reset(),top.ReplState.phoneState={phoneQueue:[],assetQueue:[]});d.proxy&&(window.removeEventListener("message",top.proxy_handler),d.proxy.close(),d.proxy=void 0)};
Blockly.ReplMgr.putYail=function(){var a,d,f,h,l=!1,m=!1,p=!1,q,u=!1,y=!1,C=!1,K,X={},M={putYail:function(G,J,z,B){h=this;a=top.ReplState;void 0===G?M.pollphone():void 0===a||null===a?console.log("putYail: replState not set yet."):a.state!=Blockly.ReplMgr.rsState.CONNECTED&&a.state!=Blockly.ReplMgr.rsState.ASSET&&a.state!=Blockly.ReplMgr.rsState.EXTENSIONS?console.log("putYail: phone not connected"):(C||(G=(a.android?PROTECT_ENUM_ANDROID:PROTECT_ENUM_IOS)+G,C=!0),a.phoneState.phoneQueue||(a.phoneState.phoneQueue=
[]),a.phoneState.assetQueue||(a.phoneState.assetQueue=[]),a.phoneState.initialized=!0,a.phoneState.phoneQueue.push({code:Blockly.ReplMgr.quoteUnicode(G),success:z,failure:B,block:J}),M.pollphone())},putAsset:function(G,J,z,B){a=top.ReplState;void 0===a||null===a?console.log("putAsset: replState not set yet."):a.state!=Blockly.ReplMgr.rsState.CONNECTED&&a.state!=Blockly.ReplMgr.rsState.ASSET&&a.state!=Blockly.ReplMgr.rsState.EXTENSIONS?console.log("putAsset: phone not connected"):(a.phoneState.phoneQueue||
(a.phoneState.phoneQueue=[]),a.phoneState.assetQueue||(a.phoneState.assetQueue=[]),a.phoneState.initialized=!0,a.phoneState.assetQueue.push({code:Blockly.ReplMgr.quoteUnicode(G),success:z,failure:B,block:J}),M.pollphone())},webrtcstart:function(){var G=top.AssetManager_refreshAssets,J,z=a.replcode,B=!1,E="none",O=function(Y,na){M.resetcompanion();if(Y)var Q=new Blockly.Util.Dialog(Blockly.Msg.REPL_NETWORK_ERROR,na,Blockly.Msg.REPL_OK,!1,null,0,function(){Q.hide()})};y=u=!1;top.ConnectProgressBar_setProgress(20,
Blockly.Msg.DIALOG_SECURE_ESTABLISHING);var W=function(){var Y=new XMLHttpRequest;Y.open("GET",top.ReplState.rendezvous2+z+"-r",!0);Y.onreadystatechange=function(){if(4==this.readyState&&200==this.status){if("["==this.response[0])for(var na=JSON.parse(this.response),Q=0;Q<na.length;Q++){var aa=na[Q],R=aa.candidate;J=aa.offer;R&&B?(aa=aa.nonce,X[aa]?console.log("Seen nonce "+aa):(X[aa]=!0,console.log("addIceCandidate: signalingState = "+q.signalingState+" iceConnectionState = "+q.iceConnectionState),
console.log("addIceCandidate: candidate = "+JSON.stringify(R)),q.addIceCandidate(R)["catch"](function(S){console.error(S);O(!0,Bockly.Msg.REPL_WEBRTC_CONNECTION_ERROR+"\n"+S)}))):J&&!B&&(B=!0,Q=0,q.setRemoteDescription(J))}u||y||setTimeout(W,1E3)}else 4==this.readyState&&O(!0,Blockly.Msg.REPL_WEBRTC_CONNECTION_ERROR+"\nRendezvous Fail: "+this.status)};Y.send()};q=new RTCPeerConnection(top.ReplState.iceservers);q.oniceconnectionstatechange=function(Y){var na="undefined"!==typeof InstallTrigger;console.log("oniceconnectionstatechange: evt.type = "+
Y.type+" ice connection state = "+this.iceConnectionState);E=this.iceConnectionState;("disconnected"==E&&!na||"failed"==E)&&O(!0,Blockly.Msg.REPL_WEBRTC_CONNECTION_CLOSED)};q.onsignalingstatechange=function(Y){console.log("onsignalingstatechange: evt.type = "+Y.type);console.log("onsignalingstatechange: signalingstate = "+this.signalingState)};q.onicecandidate=function(Y){if("icecandidate"==Y.type){var na=new XMLHttpRequest;na.open("POST",top.ReplState.rendezvous2,!0);na.send(JSON.stringify({key:z+
"-s",webrtc:!0,nonce:Math.floor(1E4*Math.random())+1,candidate:Y.candidate}))}};K=q.createDataChannel("data");K.onopen=function(){u=!0;top.ConnectProgressBar_setProgress(30,Blockly.Msg.DIALOG_SECURE_ESTABLISHED);console.log("webrtc data connection open!");K.onmessage=function(Y){console.log("webrtc(onmessage): "+Y.data);Y=goog.json.parse(Y.data);"OK"==Y.status&&h.processRetvals(Y.values)};p=!0;top.webrtcdata=K;a.dialog&&a.dialog.hide();G(function(){Blockly.ReplMgr.loadExtensions()})};K.onclose=function(){console.log("webrtc data closed");
K=null;p=m=!1;q.close();top.BlocklyPanel_indicateDisconnect()};K.onerror=function(Y){console.log("webrtc data error: "+Y);K=null;p=m=!1};q.createOffer().then(function(Y){var na=Y.sdp;na=na.replace("a=extmap-allow-mixed\r\n","");Y.sdp=na;J=Y;na=new XMLHttpRequest;na.open("POST",top.ReplState.rendezvous2,!0);na.send(JSON.stringify({key:z+"-s",webrtc:!0,offer:Y}));q.setLocalDescription(Y)});top.ConnectProgressBar_setProgress(15,Blockly.Msg.DIALOG_RENDEZVOUS_NEGOTIATING);setTimeout(function(){top.ConnectProgressBar_setProgress(20,
Blockly.Msg.DIALOG_SECURE_ESTABLISHING);W()},5E3)},chunker:function(){var G=0;return function(J){var z=J.length;if(15E3>=z)return[J];for(var B=[];0<z;)z=Math.min(z,15E3),B.push(J.substring(0,z)),J=J.substring(z),z=J.length;G+=1;var E="Q"+G;var O=[];O.push("(define "+E+' "")');B.forEach(function(W,Y){W=W.replace(/\\/g,"\\\\");W=W.replace(/"/g,'\\"');O.push("(set! "+E+" (string-append "+E+' "'+W+'"))')});a.android?O.push("(eval (read (open-input-string "+E+")))"):O.push("(eval (read (open-input-string "+
E+')) "yail")');O.push("(set! "+E+" #!null)");return O}}(),pollphone:function(){a.phoneState.assetQueue||(a.phoneState.assetQueue=[]);a.phoneState.phoneQueue||(a.phoneState.phoneQueue=[]);if(!a.phoneState.ioRunning){l||top.usewebrtc||M.receivefromphone();var G;if(top.usewebrtc)if(!p&&!m)m=!0,M.webrtcstart();else{if(p){for(;G=a.phoneState.assetQueue.shift();){var J=G.block?'"'+G.block.id+'"':-1;J="(begin (require <com.google.youngandroid.runtime>) (process-repl-input "+J+" (begin "+G.code+")))";console.log(J);
J=M.chunker(J);J.forEach(function(W){console.log("Chunk: "+W);K.send(W)})}if(a.state==Blockly.ReplMgr.rsState.CONNECTED)for(;G=a.phoneState.phoneQueue.shift();)J=G.block?'"'+G.block.id+'"':-1,J="(begin (require <com.google.youngandroid.runtime>) (process-repl-input "+J+" (begin "+G.code+")))",console.log(J),J=M.chunker(J),C||(K.send(a.android?PROTECT_ENUM_ANDROID:PROTECT_ENUM_IOS),C=!0),J.forEach(function(W){console.log("Chunk: "+W);K.send(W)})}}else{if(top.loadAll&&0==a.phoneState.assetQueue.length){for(var z=
"",B=!1,E,O=!0;J=a.phoneState.phoneQueue.shift();)O?O=!1:(console.log("We did chunk!"),B=!0),a.phoneState.ioRunning=!0,z+=J.code,E=J.block;if(!a.phoneState.ioRunning)return;G={code:z,block:null,chunking:!0};B?console.log("Chunk: "+z):(console.log("Slow Path: "+z),G.block=E)}else{(G=a.phoneState.assetQueue.shift())||(G=a.phoneState.phoneQueue.shift());if(!G)return;a.phoneState.ioRunning=!0}J=G.block?'"'+G.block.id+'"':G.chunking?"-2":"-1";z=new goog.Uri.QueryData;console.log("Low Level Sending: "+
G.code);z.add("mac",Blockly.ReplMgr.hmac(G.code+a.seq_count+J));z.add("seq",a.seq_count);z.add("code",G.code);z.add("blockid",J);J=z.toString();a.proxy?(a.proxy.postMessage(["blocks",J],a.proxy_origin),a.seq_count+=1,a.phoneState.ioRunning=!1,a.phoneState.initialized&&M.pollphone()):(d=goog.net.XmlHttp(),d.open("POST",a.url,!0),d.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var W=goog.json.parse(this.response);"OK"!=W.status?G.failure&&G.failure(Blockly.Msg.REPL_ERROR_FROM_COMPANION):
G.success&&G.success();h.processRetvals(W.values);a.seq_count+=1;a.phoneState.initialized&&(a.phoneState.ioRunning=!1,M.pollphone())}else if(4==this.readyState){console.log("putYail(poller): status = "+this.status);G.failure&&G.failure(Blockly.Msg.REPL_NETWORK_CONNECTION_ERROR);var Y=new Blockly.Util.Dialog(Blockly.Msg.REPL_NETWORK_ERROR,Blockly.Msg.REPL_NETWORK_ERROR_RESTART,Blockly.Msg.REPL_OK,!1,null,0,function(){Y.hide();h.hardreset(h.formName)});M.resetcompanion()}},d.send(J))}}},receivefromphone:function(){l=
!0;console.log("receivefromphone called.");a.proxy||(f=goog.net.XmlHttp(),f.open("POST",a.rurl,!0),f.onreadystatechange=function(){if(4==this.readyState&&(console.log("receivefromphone returned."),200==this.status)){var G=goog.json.parse(this.response);"OK"==G.status&&h.processRetvals(G.values);M.receivefromphone()}},f.send("IGNORED=STUFF"))},reset:function(){C=!1;top.usewebrtc&&(K&&K.close(),q&&q.close(),y=!0,m=p=u=!1);f&&f.abort();f=null;top.usewebrtc=!1;if(a=top.ReplState)a.hasfetchassets=!1;l=
!1},resetcompanion:function(){console.log("reseting companion");if(a=top.ReplState)a.state=Blockly.ReplMgr.rsState.IDLE,a.connection=null,a.extensionurl=void 0,h.resetYail(!1),a.didversioncheck=!1,a.android=!0,a.hasfetchassets=!1,a.emulator=!1,a.needsUpgradeHelper=!1,top.BlocklyPanel_indicateDisconnect(),top.ConnectProgressBar_hide(),M.reset()},checkversionupgrade:function(G,J,z){z=z?null:Blockly.Msg.REPL_NOT_NOW;void 0===J&&(J="com.android.vending");if("com.android.vending"!=J&&top.COMPANION_UPDATE_URL&&
!a.isUSB)var B=new Blockly.Util.Dialog(Blockly.Msg.REPL_COMPANION_VERSION_CHECK,Blockly.Msg.REPL_COMPANION_OUT_OF_DATE+("emulator"==a.replcode?Blockly.Msg.REPL_EMULATORS:Blockly.Msg.REPL_DEVICES)+Blockly.Msg.REPL_APPROVE_UPDATE,Blockly.Msg.REPL_OK,!1,z,0,function(E){B.hide();E!=Blockly.Msg.REPL_NOT_NOW?h.triggerUpdate():M.pollphone()});else G?(B=new Blockly.Util.Dialog(Blockly.Msg.REPL_COMPANION_VERSION_CHECK,Blockly.Msg.REPL_COMPANION_OUT_OF_DATE1+top.PREFERRED_COMPANION+Blockly.Msg.REPL_COMPANION_OUT_OF_DATE2,
Blockly.Msg.REPL_OK,!1,null,0,function(){B.hide()}),M.resetcompanion()):(B=new Blockly.Util.Dialog(Blockly.Msg.REPL_COMPANION_VERSION_CHECK,Blockly.Msg.REPL_COMPANION_OUT_OF_DATE_IMMEDIATE,Blockly.Msg.REPL_DISMISS,!1,null,1,function(){B.hide()}),M.pollphone())}};M.putYail.reset=M.reset;M.putYail.putAsset=M.putAsset;return M.putYail}();
Blockly.ReplMgr.triggerUpdate=function(){var a=top.ReplState,d=goog.net.XmlHttp(),f=new goog.Uri.QueryData,h=this,l=null,m=!1,p=function(C,K){l&&!!C!=m&&(l.hide(),l=null);l?l.setContent(K):C?(l=new Blockly.Util.Dialog(Blockly.Msg.REPL_SOFTWARE_UPDATE,K,C,!1,null,0,function(){l.hide()}),m=!0):(l=new Blockly.Util.Dialog(Blockly.Msg.REPL_SOFTWARE_UPDATE,K,null,!1,null,0,void 0),l.display(),m=!1)},q=function(){a.state=Blockly.ReplMgr.rsState.IDLE;a.connection=null;a.didversioncheck=!1;a.isUSB=!1;a.hasfetchassets=
!1;a.emulator=!1;a.needsUpgradeHelper=!1;h.resetYail(!1);top.BlocklyPanel_indicateDisconnect()},u=function(C){p(Blockly.Msg.REPL_OK_LOWER,C);q()};if(""===top.COMPANION_UPDATE_URL)p(Blockly.Msg.REPL_OK,Blockly.Msg.REPL_UPDATE_NO_UPDATE);else if(top.ReplState.state!=Blockly.ReplMgr.rsState.CONNECTED&&top.ReplState.state!=Blockly.ReplMgr.rsState.ASSET)p(Blockly.Msg.REPL_OK,Blockly.Msg.REPL_UPDATE_NO_CONNECTION);else if("emulator"!=top.ReplState.replcode||1==top.ReplState.isUSB)p(Blockly.Msg.REPL_OK,
Blockly.Msg.REPL_EMULATOR_ONLY);else if(top.usewebrtc)d='(AssetFetcher:upgradeCompanion "'+this.getCookie()+'" "'+top.COMPANION_UPDATE_URL+'")',console.log("CompanionUpgrade Yail = "+d),this.putYail.putAsset(d);else{f.add("package","update.apk");var y=f.toString();d.open("GET",top.COMPANION_UPDATE_EMULATOR_URL,!0);d.onreadystatechange=function(){if(4==this.readyState&&200==this.status)try{p(Blockly.Msg.REPL_GOT_IT,Blockly.Msg.REPL_UPDATE_INFO),Blockly.ReplMgr.putAsset(0,"update.apk",goog.crypt.base64.decodeStringToByteArray(this.response),
function(){console.log("Update: Downloaded");var C=goog.net.XmlHttp();C.open("POST",a.baseurl+"_package",!0);C.onreadystatechange=function(){4==this.readyState&&200==this.status?(console.log("Update: _package success"),q()):4==this.readyState&&(console.log("Update: _package state = 4 probably ok (status = "+this.status+")"),q())};C.send(y)},function(){u(Blockly.Msg.REPL_UNABLE_TO_UPDATE)},!0)}catch(C){u(Blockly.Msg.REPL_UNABLE_TO_LOAD)}else 4==this.readyState&&u(Blockly.Msg.REPL_UNABLE_TO_LOAD_NO_RESPOND)};
p(!1,Blockly.Msg.REPL_NOW_DOWNLOADING);d.send()}};Blockly.ReplMgr.acceptablePackage=function(a){return a==top.ACCEPTABLE_COMPANION_PACKAGE?!0:!1};Blockly.ReplMgr.acceptableVersion=function(a){for(var d=0;d<top.ACCEPTABLE_COMPANIONS.length;d++)if(top.ACCEPTABLE_COMPANIONS[d]==a)return!0;return!1};
Blockly.ReplMgr.processRetvals=function(a){for(var d=top.ReplState,f,h=this,l=function(u){if(!h.runtimeError){h.runtimeError=new goog.ui.Dialog(null,!0,new goog.dom.DomHelper(top.document));var y=h.runtimeError.getDialogElement(),C=y.getAttribute("class");y.setAttribute("class",C+" blocklyRuntimeErrorDialog")}h.runtimeError.isVisible()&&h.runtimeError.setVisible(!1);h.runtimeError.setTitle(Blockly.Msg.REPL_RUNTIME_ERROR);h.runtimeError.setButtonSet((new goog.ui.Dialog.ButtonSet).addButton({caption:Blockly.Msg.REPL_DISMISS},
!1,!0));h.runtimeError.getContentElement()?h.runtimeError.getContentElement().innerHTML=u:h.runtimeError.setSafeHtmlContent(module$contents$goog$html$SafeHtml_SafeHtml.htmlEscape(u));h.runtimeError.setVisible(!0)},m=function(u){var y=document.createElement("div");u=document.createTextNode(u);y.appendChild(u);return y.innerHTML},p=0;p<a.length;p++){var q=a[p];console.log("processRetVals: "+JSON.stringify(q));switch(q.type){case "return":"OK"==q.status&&0<top.loadAllErrorCount&&(console.log("Error Countdown: "+
top.loadAllErrorCount),--top.loadAllErrorCount,0>=top.loadAllErrorCount&&(top.loadAllErrorCount=0,top.loadAll=!0,console.log("Reseting top.loadAll to true")));"-2"==q.blockid&&"OK"!=q.status?(top.loadAll=!1,top.loadAllErrorCount=Blockly.common.getMainWorkspace().getTopBlocks().length,console.log("Error in chunking, disabling."),this.resetYail(!0),this.pollYail(Blockly.common.getMainWorkspace())):"-1"!=q.blockid&&"-2"!=q.blockid?(f=Blockly.common.getMainWorkspace().getBlockById(q.blockid),null!==f&&
("OK"==q.status?(f.replError=null,q.value&&"*nothing*"!=q.value&&this.setDoitResult(f,q.value)):f.replError=q.value?Blockly.Msg.REPL_ERROR_FROM_COMPANION+": "+q.value:"Error from Companion")):"OK"!=q.status&&l(Blockly.Msg.REPL_ERROR_FROM_COMPANION+": "+q.value);break;case "pushScreen":top.BlocklyPanel_pushScreen(q.screen)||(console.log("processRetVals: Invalid Screen: "+q.screen),l("Invalid Screen: "+q.screen));break;case "popScreen":top.BlocklyPanel_popScreen();break;case "assetTransferred":top.AssetManager_markAssetTransferred(q.value);
break;case "extensionsLoaded":d.state=Blockly.ReplMgr.rsState.CONNECTED;Blockly.common.getMainWorkspace().fireChangeListener(new AI.Events.CompanionConnect);break;case "startCache":top.BlocklyPanel_startCache().then(u=>{u||l("Failed to cache project")}).catch(u=>{l("Encountered issue while caching project: "+u)});break;case "error":console.log("processRetVals: Error value = "+q.value);l(m(q.value)+Blockly.Msg.REPL_NO_ERROR_FIVE_SECONDS);break;case "log":top.ConsolePanel_addLog(q.level,q.item),console.log("processRetVals: Log level = "+
q.level),console.log("processRetVals: Log content = "+q.item)}}(a=Blockly.common.getMainWorkspace().getWarningHandler())&&a.checkAllBlocksForWarningsAndErrors()};Blockly.ReplMgr.setDoitResult=function(a,d){var f=/Do It Result:.*?\n---\n/m,h=new RegExp(Blockly.Msg.DO_IT_RESULT+".*?\n---\n");d=Blockly.Msg.DO_IT_RESULT+" "+d+"\n---\n";var l="",m=a.getIcon(Blockly.icons.CommentIcon.TYPE);m&&(l=m.getText().replace(f,""));l=l?h.test(l)?l.replace(h,d):d+l:d;a.setCommentText(l);a.getIcon(Blockly.icons.CommentIcon.TYPE).setVisible(!0)};
Blockly.ReplMgr.startAdbDevice=function(a,d,f){var h=!0,l=this,m=0,p=0,q=0,u=null,y=null,C=null,K;a=top.ReplState;d?f=Blockly.Msg.REPL_CONNECTING_USB_CABLE:(f=Blockly.Msg.REPL_STARTING_EMULATOR,top.ReplState.emulator=!0,q=-1);a.phoneState.initialized||(a.phoneState.initialized=!0,a.phoneState.blockYail={},a.phoneState.componentYail="");top.ReplState.android=!0;C=new Blockly.Util.Dialog(Blockly.Msg.REPL_CONNECTING,f,Blockly.Msg.REPL_CANCEL,!1,null,0,function(){C.hide();clearInterval(G);top.ReplState.state=
Blockly.ReplMgr.rsState.IDLE;top.BlocklyPanel_indicateDisconnect();u&&(u.hide(),u=null)});var X=function(){clearInterval(G);var J=Blockly.Msg.REPL_GIVE_UP;u=new Blockly.Util.Dialog(Blockly.Msg.REPL_CONNECTION_FAILURE1,Blockly.Msg.REPL_NO_START_EMULATOR,J,!1,Blockly.Msg.REPL_KEEP_TRYING,0,function(z){u.hide();u=null;z==J?(C&&(C.hide(),C=null),top.ReplState.state=Blockly.ReplMgr.rsState.IDLE,top.ReplState.connection=null,top.BlocklyPanel_indicateDisconnect(),l.resetYail(!1),l.hardreset(l.formName)):
(p=0,m=10,q=2,G=setInterval(M,1E3))})},M=function(){var J=top.AssetManager_refreshAssets;switch(q){case -1:var z=goog.net.XmlHttp();z.onreadystatechange=function(){4==this.readyState&&200==this.status?"2.3"===goog.json.parse(this.response).version&&top.navigator.userAgent.match(/Mac OS X 10_13/)?(C.setContent(Blockly.Msg.REPL_ERROR_SETUPTOOLS_2_3_NOT_SUPPORTED),clearTimeout(G)):q=0:4==this.readyState&&(C.setContent(Blockly.Msg.REPL_ERROR_UNABLE_TO_GET_SETUPTOOLS_VERSION),q=0)};z.open("GET","http://localhost:8004/ping/",
!0);z.send();break;case 0:z=goog.net.XmlHttp();z.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var B=goog.json.parse(this.response);"OK"==B.status?(K=B.device,console.log("ReplMgr: set device = "+K),q=1,m=d?6:21,y&&(y.hide(),y=null)):h&&!d?(B=goog.net.XmlHttp(),B.open("GET","http://localhost:8004/start/",!0),B.send(),h=!1):h&&(y=new Blockly.Util.Dialog(Blockly.Msg.REPL_PLUGGED_IN_Q,Blockly.Msg.REPL_AI_NO_SEE_DEVICE,Blockly.Msg.REPL_OK,!1,null,0,function(){y.hide();y=null}),
h=!1)}else 4==this.readyState&&(clearInterval(G),C&&(C.hide(),C=null),u||(top.BlocklyPanel_indicateDisconnect(),u=new Blockly.Util.Dialog(Blockly.Msg.REPL_HELPER_Q,Blockly.Msg.REPL_HELPER_NOT_RUNNING,Blockly.Msg.REPL_OK,!1,null,0,function(){u.hide();u=null;C&&(C.hide(),C=null);top.ReplState.state=Blockly.ReplMgr.rsState.IDLE})))};d?z.open("GET","http://localhost:8004/ucheck/",!0):z.open("GET","http://localhost:8004/echeck/",!0);z.send();break;case 1:--m;d?C.setContent(Blockly.Msg.REPL_USB_CONNECTED_WAIT+
m+Blockly.Msg.REPL_SECONDS_ENSURE_RUNNING):C.setContent(Blockly.Msg.REPL_EMULATOR_STARTED+m+Blockly.Msg.REPL_SECONDS_ENSURE_RUNNING);0>=m&&(d?C.setContent(Blockly.Msg.REPL_STARTING_COMPANION_ON_PHONE):C.setContent(Blockly.Msg.REPL_STARTING_COMPANION_IN_EMULATOR),q=2,m=10,p=0,z=goog.net.XmlHttp(),z.open("GET","http://localhost:8004/replstart/"+K,!0),z.send());break;case 2:--m;0<m?C.setContent(Blockly.Msg.REPL_COMPANION_STARTED_WAITING+m+Blockly.Msg.REPL_SECONDS_ENSURE_RUNNING):(C.setContent(Blockly.Msg.REPL_VERIFYING_COMPANION),
z=goog.net.XmlHttp(),z.timeout=4E3,z.open("GET",a.versionurl,!0),z.onreadystatechange=function(){4==this.readyState&&(200==this.status?q=4:(p+=1,8<p?X():(z=goog.net.XmlHttp(),z.open("GET","http://localhost:8004/replstart/"+K,!0),z.send(),m=10,q=2)))},z.send(),q=3);break;case 4:C.hide(),a.state=l.rsState.ASSET,clearInterval(G),J(function(){Blockly.ReplMgr.loadExtensions()})}};var G=setInterval(M,1E3)};
Blockly.ReplMgr.quoteUnicode=function(a){if(!a)return null;for(var d=[],f=a.length,h=0;h<f;h++){var l=a.charCodeAt(h);32>l||126<l?10==l?d.push(a.charAt(h)):(l="000"+l.toString(16),l=l.substring(l.length-4),d.push("\\u"+l)):d.push(a.charAt(h))}return d.join("")};
Blockly.ReplMgr.startRepl=function(a,d,f,h,l){var m=top.ReplState,p=this;m.didversioncheck=!1;m.isUSB=h;m.hasfetchassets=!1;m.phoneState&&(m.phoneState.initialized=!1);if(a){top.ReplState.state==this.rsState.RENDEZVOUS&&top.ReplState.dialog&&top.ReplState.dialog.hide();try{top.webrtcdata&&top.webrtcdata.send("#DONE#")}catch(q){console.log("webrtcdata: Error: "+q)}this.resetYail(!1);this.putYail.reset();top.ReplState.state=this.rsState.IDLE;this.hardreset(this.formName)}else top.ReplState.state==this.rsState.IDLE&&
(f||h||l?(this.startAdbDevice(m,h,l),l?(m.state=this.rsState.ASSET,top.AssetManager_refreshAssets(function(){Blockly.ReplMgr.loadExtensions()})):m.state=this.rsState.WAITING,m.replcode="emulator",m.url="http://127.0.0.1:8001/_newblocks",m.rurl="http://127.0.0.1:8001/_values",m.versionurl="http://127.0.0.1:8001/_getversion",m.baseurl="http://127.0.0.1:8001/",m.extensionurl=m.baseurl+"_extensions",m.seq_count=1,m.count=0):(m=top.ReplState,m.state=this.rsState.RENDEZVOUS,m.replcode=this.genCode(),d&&
window.open("intent://comp/"+m.replcode+"#Intent;scheme=aicompanion;package="+top.ACCEPTABLE_COMPANION_PACKAGE+";end"),m.rendezvouscode=this.sha1(m.replcode),m.seq_count=1,m.count=0,d||(m.dialog=new Blockly.Util.Dialog(Blockly.Msg.REPL_CONNECT_TO_COMPANION,this.makeDialogMessage(m.replcode),Blockly.Msg.REPL_CANCEL,!1,null,1,function(){m.dialog.hide();m.state=Blockly.ReplMgr.rsState.IDLE;m.connection=null;p.putYail.reset(!0);top.BlocklyPanel_indicateDisconnect()})),this.getFromRendezvous()))};
Blockly.ReplMgr.genCode=function(){for(var a="",d=0;6>d;d++)a+=String.fromCharCode(Math.floor(26*Math.random())+97);return a};
Blockly.ReplMgr.getFromRendezvous=function(){var a=this,d=goog.net.XmlHttp();if(void 0===top.ReplState||null===top.ReplState)console.log("getFromRendezvous: replState not set yet.");else{var f=top.ReplState,h=this,l=function(){h.rendPoll.call(h)};d.open("GET","https://"+top.rendezvousServer+"/rendezvous/"+f.rendezvouscode,!0);d.onreadystatechange=function(){if(4==d.readyState&&200==this.status)try{if(d.response){f.dialog&&f.dialog.hide();var m=goog.json.parse(d.response);f.url="http://"+m.ipaddr+
":8001/_newblocks";f.rurl="http://"+m.ipaddr+":8001/_values";f.versionurl="http://"+m.ipaddr+":8001/_getversion";f.baseurl="http://"+m.ipaddr+":8001/";f.android=!RegExp("^i(pad)?os$").test((m.os||"Android").toLowerCase());!f.android&&m.extensions&&(top.ALLOWED_IOS_EXTENSIONS=JSON.parse(m.extensions));if(!f.android&&Blockly.ReplMgr.hasDisallowedIosExtensions()){f.dialog.hide();top.ReplState.state=Blockly.ReplMgr.rsState.IDLE;top.BlocklyPanel_indicateDisconnect();f.connection=null;var p=new Blockly.Util.Dialog(Blockly.Msg.EXTENSIONS,
Blockly.Msg.EXTENSIONS_iOS,Blockly.Msg.REPL_CANCEL,!0,null,0,function(){p.hide()})}else{top.ConnectProgressBar_start();top.ConnectProgressBar_setProgress(10,Blockly.Msg.DIALOG_FOUND_COMPANION);f.didversioncheck=!0;f.webrtc="true"===m.webrtc;f.useproxy="true"===m.useproxy;f.hasfetchassets=f.android||f.webrtc;m.rendezvous2&&(f.rendezvous2=m.rendezvous2);if(m.iceservers){for(var q=[],u=0;u<m.iceservers.length;u++)q.push({urls:[m.iceservers[u].server],username:m.iceservers[u].username,credential:m.iceservers[u].password});
f.iceservers={iceServers:q}}f.version=m.version;f.installer=m.installer;a.rendezvousDone()}}else console.log("getFromRendezvous(): No answer yet!"),setTimeout(l,2E3)}catch(y){console.log("getFromRendezvous(): Error: "+y),setTimeout(l,2E3)}};d.send()}};Blockly.ReplMgr.hasDisallowedIosExtensions=function(){for(var a=top.AssetManager_getExtensions(),d=0;d<a.length;d++)if(-1==top.ALLOWED_IOS_EXTENSIONS.indexOf(a[d]))return!0;return!1};
Blockly.ReplMgr.rendezvousDone=function(){var a=this,d=top.ReplState,f=top.AssetManager_refreshAssets,h=d.webrtc,l=d.useproxy,m=new Promise(function(u,y){if(!d.version||d.android&&!Blockly.ReplMgr.acceptableVersion(d.version))var C=top.COMPANION_UPDATE_URL1&&!d.isUSB?new Blockly.Util.Dialog(Blockly.Msg.REPL_COMPANION_VERSION_CHECK,Blockly.Msg.REPL_COMPANION_OUT_OF_DATE2+"<br/>"+Blockly.ReplMgr.makeqrcode(top.location.origin+top.COMPANION_UPDATE_URL1),Blockly.Msg.REPL_OK,!1,Blockly.Msg.REPL_NOT_NOW,
0,function(K){C.hide();K==Blockly.Msg.REPL_NOT_NOW?u():(top.ReplState.state=Blockly.ReplMgr.rsState.IDLE,top.BlocklyPanel_indicateDisconnect(),top.ConnectProgressBar_hide(),y())}):new Blockly.Util.Dialog(Blockly.Msg.REPL_COMPANION_VERSION_CHECK,Blockly.Msg.REPL_COMPANION_OUT_OF_DATE1+" "+top.PREFERRED_COMPANION,Blockly.Msg.REPL_OK,!1,null,0,function(K){C.hide();u()});else u()}),p=function(){d.proxy_ready=!1;a.putYail();(new Promise(function(u,y){d.proxy=window.open(d.baseurl+"_proxy","popup","popup,width=600,height=500,top="+
(screen.height/2-250)+",left="+(screen.width/2-300)+",scrollbars=no,toolbar=no,menubar=no");if(d.proxy)setTimeout(function(){d.proxy.blur();window.focus()},3E3),u();else var C=new Blockly.Util.Dialog(Blockly.Msg.REPL_POPUP_TITLE,Blockly.Msg.REPL_POPUP_MESSAGE,Blockly.Msg.REPL_POPUP_CONTINUE,!1,null,0,function(){C.hide();y()})})).then(function(){top.proxy=d.proxy;top.proxy_handler=function(u){var y=u.data;"OK"==y.status?a.processRetvals(y.values):"EXTENSIONS_LOADED"==y.status?(d.state=Blockly.ReplMgr.rsState.CONNECTED,
Blockly.common.getMainWorkspace().fireChangeListener(new AI.Events.CompanionConnect)):"hello"==y.status&&(d.proxy_origin=u.origin,d.proxy_ready=!0,console.log("rs.proxy: Received Hello"),d.state=Blockly.ReplMgr.rsState.ASSET,f(function(){Blockly.ReplMgr.loadExtensions()}))};window.addEventListener("message",top.proxy_handler)},function(){p()})},q=function(){a.putYail();if("https:"===window.location.protocol){d.state=Blockly.ReplMgr.rsState.IDLE;d.connection=null;d.didversioncheck=!1;d.isUSB=!1;d.hasfetchassets=
!1;a.resetYail(!1);top.BlocklyPanel_indicateDisconnect();top.ConnectProgressBar_hide();var u=new Blockly.Util.Dialog(Blockly.REPL_CONNECTION_FAILURE1,Blockly.Msg.REPL_NO_LEGACY,Blockly.Msg.REPL_OK,!1,null,0,function(){u.hide()})}else d.state=Blockly.ReplMgr.rsState.ASSET,f(function(){Blockly.ReplMgr.loadExtensions()})};d.initialized||(d.assetQueue||(d.assetQueue=[]),d.phoneQueue||(d.phoneQueue=[]),d.initialized=!0);m.then(function(){h?(top.usewebrtc=!0,d.state=a.rsState.ASSET,a.putYail()):l?p():q()},
function(){})};Blockly.ReplMgr.resendAssetsAndExtensions=function(){var a=top.AssetManager_refreshAssets;top.ReplState.state=Blockly.ReplMgr.rsState.ASSET;a(function(){Blockly.ReplMgr.loadExtensions()})};
Blockly.ReplMgr.loadExtensions=function(){var a=top.ReplState;if(a.hasfetchassets){a.state=Blockly.ReplMgr.rsState.EXTENSIONS;var d=JSON.stringify(top.AssetManager_getExtensions());d=AI.Yail.quotifyForREPL(d);d="(AssetFetcher:loadExtensions "+d+")";console.log("Blockly.ReplMgr.loadExtensions: Yail = "+d);this.putYail.putAsset(d)}else if(a.extensionurl){a.state=Blockly.ReplMgr.rsState.EXTENSIONS;var f=goog.net.XmlHttp();d=new goog.Uri.QueryData;d.add("extensions",JSON.stringify(top.AssetManager_getExtensions()));
f.open("POST",a.extensionurl,!0);f.onreadystatechange=function(){4!==f.readyState||200!==this.status&&404!==this.status&&this.status?4===f.readyState&&(a.state=Blockly.ReplMgr.rsState.IDLE,top.BlocklyPanel_indicateDisconnect()):(a.state=Blockly.ReplMgr.rsState.CONNECTED,Blockly.common.getMainWorkspace().fireChangeListener(new AI.Events.CompanionConnect))};f.send(d.toString())}else a.state=Blockly.ReplMgr.rsState.CONNECTED,Blockly.common.getMainWorkspace().fireChangeListener(new AI.Events.CompanionConnect)};
Blockly.ReplMgr.rendPoll=function(){if(top.ReplState.state==this.rsState.RENDEZVOUS){top.ReplState.count+=1;if(40<top.ReplState.count){top.ReplState.state=this.rsState.IDLE;top.ReplState.dialog&&top.ReplState.dialog.hide();var a=new Blockly.Util.Dialog(Blockly.Msg.REPL_CONNECTION_FAILURE1,Blockly.Msg.REPL_TRY_AGAIN1,Blockly.Msg.REPL_OK,!1,null,0,function(){a.hide()});top.ReplState.url=null;top.BlocklyPanel_indicateDisconnect()}this.getFromRendezvous()}};
Blockly.ReplMgr.makeDialogMessage=function(a){var d=top.includeQRcode?top.rendezvousServer+";"+a:a;var f=this.qrcode(2,"L");f.addData(d);try{f.make()}catch(h){console.log("makeDialog: Using qrcode 4"),f=this.qrcode(4,"L"),f.addData(d),f.make()}d=f.createImgTag(6);f="<table>\n"+Blockly.Msg.REPL_CODE_PREAMBLE;f+="<tr><td>"+d+'</td><td><font size="+1">'+Blockly.Msg.REPL_YOUR_CODE_IS+':<br /><br /><font size="+1"><b>'+a+"</b></font></font></td></tr>";"https:"===window.location.protocol&&(f+="<tr><td colspan=2>"+
Blockly.Msg.REPL_SECURE_CONNECTION+' <a href="https://appinventor.mit.edu/ai2/aboutsecurity" target="_blank">'+Blockly.Msg.REPL_MORE_INFORMATION+"</a>.</td></tr>");return f+"</table>"};Blockly.ReplMgr.hmac=function(a){var d=new goog.crypt.Hmac(new goog.crypt.Sha1,this.string_to_bytes(top.ReplState.replcode),64);return this.bytes_to_hexstring(d.getHmac(this.string_to_bytes(a)))};Blockly.ReplMgr.sha1=function(a){var d=new goog.crypt.Sha1;d.update(this.string_to_bytes(a));return this.bytes_to_hexstring(d.digest())};
Blockly.ReplMgr.string_to_bytes=function(a){for(var d=[],f=0;f<a.length;f++)d.push(a.charCodeAt(f));return d};Blockly.ReplMgr.bytes_to_hexstring=function(a){for(var d=[],f=0;f<a.length;f++)d.push(Number(256+a[f]).toString(16).substring(1,3));return d.join("")};Blockly.ReplMgr.getCookie=function(){var a=/AppInventor *=([^;]+)/;a.test(document.cookie)?a=a.exec(document.cookie)[1]:(console.log("Cannot obtain cookie for putAsset!"),a=null);return a};
Blockly.ReplMgr.connectCache=function(a,d){if(void 0===top.ReplState||top.ReplState.state!=this.rsState.ASSET&&top.ReplState.state!=this.rsState.CONNECTED)return!1;var f=window.location.origin,h=this.getCookie();console.log("connectCache uri = "+f+" cookie = "+h);a='(AssetFetcher:fetchCachedProject "'+h+'" "'+a+'" "'+f+'" "'+d+'")';console.log("Yail for connectCache = "+a);this.putYail();this.putYail.putAsset(a);return!0};
Blockly.ReplMgr.putAsset=function(a,d,f,h,l,m){if(void 0===top.ReplState||!m&&top.ReplState.state!=this.rsState.ASSET&&top.ReplState.state!=this.rsState.CONNECTED)return!1;if(!m&&top.ReplState.hasfetchassets)return f=window.location.origin,m=this.getCookie(),console.log("putAsset uri = "+f+" cookie = "+m),d='(AssetFetcher:fetchAssets "'+m+'" "'+a+'" "'+f+'" "'+d+'")',console.log("Yail for putAsset = "+d),this.putYail(),this.putYail.putAsset(d),!0;a=goog.net.XmlHttp();var p=new ArrayBuffer(f.length);
a=new Uint8Array(p);for(m=0;m<f.length;m++)a[m]=f[m];var q=top.ReplState,u=new goog.Uri.QueryData;d=d.slice(d.indexOf("/")+1,d.length);u.add("filename",d);q.proxy?(q.proxy.postMessage(["asset",u.toString(),p],q.proxy_origin),h()):(a=goog.net.XmlHttp(),a.retries=3,a.open("PUT",q.baseurl+"?"+u.toString(),!0),a.onreadystatechange=function(){4==this.readyState&&200==this.status?h&&h():4==this.readyState&&(0<this.retries&&(this.retries--,this.open("PUT",q.baseurl+"?"+u.toString(),!0),this.send(p)),l&&
l())},a.send(p));return!0};Blockly.ReplMgr.hardreset=function(a,d){top.AssetManager_reset(a);a=goog.net.XmlHttp();a.open("GET","http://localhost:8004/reset/",!0);a.onreadystatechange=function(){4==this.readyState&&d&&d(this.status)};a.send()};
Blockly.ReplMgr.ehardreset=function(a){var d=this,f=new Blockly.Util.Dialog(Blockly.Msg.REPL_DO_YOU_REALLY_Q,Blockly.Msg.REPL_FACTORY_RESET,Blockly.Msg.REPL_RESET,!0,Blockly.Msg.REPL_CANCEL,0,function(h){f.hide();h==Blockly.Msg.REPL_RESET&&d.hardreset(a,function(){var l=goog.net.XmlHttp();l.open("GET","http://localhost:8004/emulatorreset/",!0);l.onreadystatchange=function(){};l.send()})})};
Blockly.ReplMgr.makeqrcode=function(a){var d=this.qrcode(4,"L");d.addData(a);try{d.make()}catch(f){d=this.qrcode(6,"L"),d.addData(a),d.make()}return d.createImgTag(4)};
Blockly.ReplMgr.qrcode=function(){function a(M,G){if("undefined"==typeof M.length)throw Error(M.length+"/"+G);var J=function(){for(var B=0;B<M.length&&0===M[B];)B+=1;for(var E=Array(M.length-B+G),O=0;O<M.length-B;O+=1)E[O]=M[O+B];return E}(),z={get:function(B){return J[B]},getLength:function(){return J.length},multiply:function(B){for(var E=Array(z.getLength()+B.getLength()-1),O=0;O<z.getLength();O+=1)for(var W=0;W<B.getLength();W+=1)E[O+W]^=l.gexp(l.glog(z.get(O))+l.glog(B.get(W)));return a(E,0)},
mod:function(B){var E;if(0>z.getLength()-B.getLength())return z;var O=l.glog(z.get(0))-l.glog(B.get(0)),W=Array(z.getLength());for(E=0;E<z.getLength();E+=1)W[E]=z.get(E);for(E=0;E<B.getLength();E+=1)W[E]^=l.gexp(l.glog(B.get(E))+O);return a(W,0).mod(B)}};return z}var d=function(M,G){var J=f[G],z=null,B=0,E=null,O=[],W={},Y=function(Q,aa){for(var R=B=4*M+17,S=Array(R),da=0;da<R;da+=1){S[da]=Array(R);for(var ba=0;ba<R;ba+=1)S[da][ba]=null}z=S;na(0,0);na(B-7,0);na(0,B-7);R=h.getPatternPosition(M);for(S=
0;S<R.length;S+=1)for(da=0;da<R.length;da+=1){ba=R[S];var Ea=R[da];if(null===z[ba][Ea])for(var oa=-2;2>=oa;oa+=1)for(var sa=-2;2>=sa;sa+=1)z[ba+oa][Ea+sa]=-2==oa||2==oa||-2==sa||2==sa||0===oa&&0===sa?!0:!1}for(R=8;R<B-8;R+=1)null===z[R][6]&&(z[R][6]=0===R%2);for(R=8;R<B-8;R+=1)null===z[6][R]&&(z[6][R]=0===R%2);R=h.getBCHTypeInfo(J<<3|aa);for(S=0;15>S;S+=1)da=!Q&&1==(R>>S&1),6>S?z[S][8]=da:8>S?z[S+1][8]=da:z[B-15+S][8]=da;for(S=0;15>S;S+=1)da=!Q&&1==(R>>S&1),8>S?z[8][B-S-1]=da:9>S?z[8][15-S-1+1]=da:
z[8][15-S-1]=da;z[B-8][8]=!Q;if(7<=M){R=h.getBCHTypeNumber(M);for(S=0;18>S;S+=1)da=!Q&&1==(R>>S&1),z[Math.floor(S/3)][S%3+B-8-3]=da;for(S=0;18>S;S+=1)da=!Q&&1==(R>>S&1),z[S%3+B-8-3][Math.floor(S/3)]=da}if(null===E){Q=m.getRSBlocks(M,J);R=p();for(S=0;S<O.length;S+=1)da=O[S],R.put(da.getMode(),4),R.put(da.getLength(),h.getLengthInBits(da.getMode(),M)),da.write(R);for(S=da=0;S<Q.length;S+=1)da+=Q[S].dataCount;if(R.getLengthInBits()>8*da)throw Error("code length overflow. ("+R.getLengthInBits()+">"+8*
da+")");for(R.getLengthInBits()+4<=8*da&&R.put(0,4);0!==R.getLengthInBits()%8;)R.putBit(!1);for(;!(R.getLengthInBits()>=8*da);){R.put(236,8);if(R.getLengthInBits()>=8*da)break;R.put(17,8)}var wa=0;da=S=0;ba=Array(Q.length);Ea=Array(Q.length);for(sa=0;sa<Q.length;sa+=1){var hb=Q[sa].dataCount,ja=Q[sa].totalCount-hb;S=Math.max(S,hb);da=Math.max(da,ja);ba[sa]=Array(hb);for(oa=0;oa<ba[sa].length;oa+=1)ba[sa][oa]=255&R.getBuffer()[oa+wa];wa+=hb;oa=h.getErrorCorrectPolynomial(ja);hb=a(ba[sa],oa.getLength()-
1).mod(oa);Ea[sa]=Array(oa.getLength()-1);for(oa=0;oa<Ea[sa].length;oa+=1)ja=oa+hb.getLength()-Ea[sa].length,Ea[sa][oa]=0<=ja?hb.get(ja):0}for(oa=R=0;oa<Q.length;oa+=1)R+=Q[oa].totalCount;R=Array(R);for(oa=wa=0;oa<S;oa+=1)for(sa=0;sa<Q.length;sa+=1)oa<ba[sa].length&&(R[wa]=ba[sa][oa],wa+=1);for(oa=0;oa<da;oa+=1)for(sa=0;sa<Q.length;sa+=1)oa<Ea[sa].length&&(R[wa]=Ea[sa][oa],wa+=1);E=R}Q=E;R=-1;S=B-1;da=7;ba=0;aa=h.getMaskFunction(aa);for(Ea=B-1;0<Ea;Ea-=2)for(6==Ea&&--Ea;;){for(oa=0;2>oa;oa+=1)null===
z[S][Ea-oa]&&(sa=!1,ba<Q.length&&(sa=1==(Q[ba]>>>da&1)),aa(S,Ea-oa)&&(sa=!sa),z[S][Ea-oa]=sa,--da,-1==da&&(ba+=1,da=7));S+=R;if(0>S||B<=S){S-=R;R=-R;break}}},na=function(Q,aa){for(var R=-1;7>=R;R+=1)if(!(-1>=Q+R||B<=Q+R))for(var S=-1;7>=S;S+=1)-1>=aa+S||B<=aa+S||(z[Q+R][aa+S]=0<=R&&6>=R&&(0===S||6==S)||0<=S&&6>=S&&(0===R||6==R)||2<=R&&4>=R&&2<=S&&4>=S?!0:!1)};W.addData=function(Q){Q=q(Q);O.push(Q);E=null};W.isDark=function(Q,aa){if(0>Q||B<=Q||0>aa||B<=aa)throw Error(Q+","+aa);return z[Q][aa]};W.getModuleCount=
function(){return B};W.make=function(){for(var Q=0,aa=0,R=0;8>R;R+=1){Y(!0,R);var S=h.getLostPoint(W);if(0===R||Q>S)Q=S,aa=R}Y(!1,aa)};W.createTableTag=function(Q,aa){Q=Q||2;aa='<table style=" border-width: 0px; border-style: none; border-collapse: collapse; padding: 0px; margin: '+(("undefined"==typeof aa?4*Q:aa)+'px;"><tbody>');for(var R=0;R<W.getModuleCount();R+=1){aa+="<tr>";for(var S=0;S<W.getModuleCount();S+=1)aa+='<td style="',aa+=" border-width: 0px; border-style: none;",aa+=" border-collapse: collapse;",
aa+=" padding: 0px; margin: 0px;",aa+=" width: "+Q+"px;",aa+=" height: "+Q+"px;",aa+=" background-color: ",aa+=W.isDark(R,S)?"#000000":"#ffffff",aa+=";",aa+='"/>';aa+="</tr>"}return aa+"</tbody></table>"};W.createImgTag=function(Q,aa){Q=Q||2;aa="undefined"==typeof aa?4*Q:aa;var R=W.getModuleCount()*Q+2*aa,S=aa,da=R-aa;return X(R,R,function(ba,Ea){return S<=ba&&ba<da&&S<=Ea&&Ea<da?W.isDark(Math.floor((Ea-S)/Q),Math.floor((ba-S)/Q))?0:1:1})};return W};d.stringToBytes=function(M){for(var G=[],J=0;J<
M.length;J+=1){var z=M.charCodeAt(J);G.push(z&255)}return G};d.createStringToBytes=function(M,G){var J=function(){for(var z=C(M),B=function(){var aa=z.read();if(-1==aa)throw Error();return aa},E=0,O={};;){var W=z.read();if(-1==W)break;var Y=B(),na=B(),Q=B();W=String.fromCharCode(W<<8|Y);O[W]=na<<8|Q;E+=1}if(E!=G)throw Error(E+" != "+G);return O}();return function(z){for(var B=[],E=0;E<z.length;E+=1){var O=z.charCodeAt(E);128>O?B.push(O):(O=J[z.charAt(E)],"number"==typeof O?(O&255)==O?B.push(O):(B.push(O>>>
8),B.push(O&255)):B.push(63))}return B}};var f={L:1,M:0,Q:3,H:2},h=function(){var M=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],
[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G={},J=function(z){for(var B=0;0!==z;)B+=1,z>>>=1;return B};G.getBCHTypeInfo=function(z){for(var B=z<<10;0<=J(B)-J(1335);)B^=1335<<J(B)-J(1335);return(z<<10|B)^21522};G.getBCHTypeNumber=function(z){for(var B=z<<12;0<=J(B)-J(7973);)B^=7973<<J(B)-J(7973);return z<<12|B};G.getPatternPosition=function(z){return M[z-
1]};G.getMaskFunction=function(z){switch(z){case 0:return function(B,E){return 0===(B+E)%2};case 1:return function(B,E){return 0===B%2};case 2:return function(B,E){return 0===E%3};case 3:return function(B,E){return 0===(B+E)%3};case 4:return function(B,E){return 0===(Math.floor(B/2)+Math.floor(E/3))%2};case 5:return function(B,E){return 0===B*E%2+B*E%3};case 6:return function(B,E){return 0===(B*E%2+B*E%3)%2};case 7:return function(B,E){return 0===(B*E%3+(B+E)%2)%2};default:throw Error("bad maskPattern:"+
z);}};G.getErrorCorrectPolynomial=function(z){for(var B=a([1],0),E=0;E<z;E+=1)B=B.multiply(a([1,l.gexp(E)],0));return B};G.getLengthInBits=function(z,B){if(1<=B&&10>B)switch(z){case 1:return 10;case 2:return 9;case 4:return 8;case 8:return 8;default:throw Error("mode:"+z);}else if(27>B)switch(z){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw Error("mode:"+z);}else if(41>B)switch(z){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw Error("mode:"+
z);}else throw Error("type:"+B);};G.getLostPoint=function(z){var B=z.getModuleCount(),E,O,W=0;for(E=0;E<B;E+=1)for(O=0;O<B;O+=1){for(var Y=0,na=z.isDark(E,O),Q=-1;1>=Q;Q+=1)if(!(0>E+Q||B<=E+Q))for(var aa=-1;1>=aa;aa+=1)0>O+aa||B<=O+aa||(0!==Q||0!==aa)&&na==z.isDark(E+Q,O+aa)&&(Y+=1);5<Y&&(W+=3+Y-5)}for(E=0;E<B-1;E+=1)for(O=0;O<B-1;O+=1)if(Y=0,z.isDark(E,O)&&(Y+=1),z.isDark(E+1,O)&&(Y+=1),z.isDark(E,O+1)&&(Y+=1),z.isDark(E+1,O+1)&&(Y+=1),0===Y||4==Y)W+=3;for(E=0;E<B;E+=1)for(O=0;O<B-6;O+=1)z.isDark(E,
O)&&!z.isDark(E,O+1)&&z.isDark(E,O+2)&&z.isDark(E,O+3)&&z.isDark(E,O+4)&&!z.isDark(E,O+5)&&z.isDark(E,O+6)&&(W+=40);for(O=0;O<B;O+=1)for(E=0;E<B-6;E+=1)z.isDark(E,O)&&!z.isDark(E+1,O)&&z.isDark(E+2,O)&&z.isDark(E+3,O)&&z.isDark(E+4,O)&&!z.isDark(E+5,O)&&z.isDark(E+6,O)&&(W+=40);for(O=Y=0;O<B;O+=1)for(E=0;E<B;E+=1)z.isDark(E,O)&&(Y+=1);return W+Math.abs(100*Y/B/B-50)/5*10};return G}(),l=function(){var M=Array(256),G=Array(256),J;for(J=0;8>J;J+=1)M[J]=1<<J;for(J=8;256>J;J+=1)M[J]=M[J-4]^M[J-5]^M[J-
6]^M[J-8];for(J=0;255>J;J+=1)G[M[J]]=J;return{glog:function(z){if(1>z)throw Error("glog("+z+")");return G[z]},gexp:function(z){for(;0>z;)z+=255;for(;256<=z;)z-=255;return M[z]}}}(),m=function(){var M=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,
13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]],G={},J=function(z,B){switch(B){case f.L:return M[4*(z-1)];case f.M:return M[4*(z-1)+1];case f.Q:return M[4*(z-1)+2];case f.H:return M[4*(z-1)+3]}};G.getRSBlocks=function(z,B){var E=J(z,B);if("undefined"==typeof E)throw Error("bad rs block @ typeNumber:"+z+"/errorCorrectLevel:"+B);z=E.length/
3;B=[];for(var O=0;O<z;O+=1)for(var W=E[3*O],Y=E[3*O+1],na=E[3*O+2],Q=0;Q<W;Q+=1){var aa=B,R=aa.push,S=na,da={};da.totalCount=Y;da.dataCount=S;R.call(aa,da)}return B};return G}(),p=function(){var M=[],G=0,J={getBuffer:function(){return M},get:function(z){return 1==(M[Math.floor(z/8)]>>>7-z%8&1)},put:function(z,B){for(var E=0;E<B;E+=1)J.putBit(1==(z>>>B-E-1&1))},getLengthInBits:function(){return G},putBit:function(z){var B=Math.floor(G/8);M.length<=B&&M.push(0);z&&(M[B]|=128>>>G%8);G+=1}};return J},
q=function(M){var G=d.stringToBytes(M);return{getMode:function(){return 4},getLength:function(J){return G.length},write:function(J){for(var z=0;z<G.length;z+=1)J.put(G[z],8)}}},u=function(){var M=[],G={writeByte:function(J){M.push(J&255)},writeShort:function(J){G.writeByte(J);G.writeByte(J>>>8)},writeBytes:function(J,z,B){z=z||0;B=B||J.length;for(var E=0;E<B;E+=1)G.writeByte(J[E+z])},writeString:function(J){for(var z=0;z<J.length;z+=1)G.writeByte(J.charCodeAt(z))},toByteArray:function(){return M},
toString:function(){var J="[";for(var z=0;z<M.length;z+=1)0<z&&(J+=","),J+=M[z];return J+"]"}};return G},y=function(){var M=0,G=0,J=0,z="",B={},E=function(O){if(!(0>O)){if(26>O)return 65+O;if(52>O)return 97+(O-26);if(62>O)return 48+(O-52);if(62==O)return 43;if(63==O)return 47}throw Error("n:"+O);};B.writeByte=function(O){M=M<<8|O&255;G+=8;for(J+=1;6<=G;)z+=String.fromCharCode(E(M>>>G-6&63)),G-=6};B.flush=function(){0<G&&(z+=String.fromCharCode(E(M<<6-G&63)),G=M=0);if(0!==J%3)for(var O=3-J%3,W=0;W<
O;W+=1)z+="="};B.toString=function(){return z};return B},C=function(M){var G=0,J=0,z=0,B=function(E){if(65<=E&&90>=E)return E-65;if(97<=E&&122>=E)return E-97+26;if(48<=E&&57>=E)return E-48+52;if(43==E)return 62;if(47==E)return 63;throw Error("c:"+E);};return{read:function(){for(;8>z;){if(G>=M.length){if(0===z)return-1;throw Error("unexpected end of file./"+z);}var E=M.charAt(G);G+=1;if("="==E)return z=0,-1;E.match(/^\s$/)||(J=J<<6|B(E.charCodeAt(0)),z+=6)}E=J>>>z-8&255;z-=8;return E}}},K=function(M,
G){var J=Array(M*G),z=function(E){var O=0,W=0;return{write:function(Y,na){if(0!==Y>>>na)throw Error("length over");for(;8<=O+na;)E.writeByte(255&(Y<<O|W)),na-=8-O,Y>>>=8-O,O=W=0;W|=Y<<O;O+=na},flush:function(){0<O&&E.writeByte(W)}}},B=function(){var E={},O=0,W={add:function(Y){if(W.contains(Y))throw Error("dup key:"+Y);E[Y]=O;O+=1},size:function(){return O},indexOf:function(Y){return E[Y]},contains:function(Y){return"undefined"!=typeof E[Y]}};return W};return{setPixel:function(E,O,W){J[O*M+E]=W},
write:function(E){E.writeString("GIF87a");E.writeShort(M);E.writeShort(G);E.writeByte(128);E.writeByte(0);E.writeByte(0);E.writeByte(0);E.writeByte(0);E.writeByte(0);E.writeByte(255);E.writeByte(255);E.writeByte(255);E.writeString(",");E.writeShort(0);E.writeShort(0);E.writeShort(M);E.writeShort(G);E.writeByte(0);var O=3;for(var W=B(),Y=0;4>Y;Y+=1)W.add(String.fromCharCode(Y));W.add(String.fromCharCode(4));W.add(String.fromCharCode(5));Y=u();var na=z(Y);na.write(4,O);var Q=0,aa=String.fromCharCode(J[Q]);
for(Q+=1;Q<J.length;){var R=String.fromCharCode(J[Q]);Q+=1;W.contains(aa+R)?aa+=R:(na.write(W.indexOf(aa),O),4095>W.size()&&(W.size()==1<<O&&(O+=1),W.add(aa+R)),aa=R)}na.write(W.indexOf(aa),O);na.write(5,O);na.flush();O=Y.toByteArray();E.writeByte(2);for(W=0;255<O.length-W;)E.writeByte(255),E.writeBytes(O,W,255),W+=255;E.writeByte(O.length-W);E.writeBytes(O,W,O.length-W);E.writeByte(0);E.writeString(";")}}},X=function(M,G,J,z){for(var B=K(M,G),E=0;E<G;E+=1)for(var O=0;O<M;O+=1)B.setPixel(O,E,J(O,
E));J=u();B.write(J);B=y();J=J.toByteArray();for(E=0;E<J.length;E+=1)B.writeByte(J[E]);B.flush();B='<img src="data:image/gif;base64,'+B+'" width="';B+=M;B+='"';B+=' height="';B+=G;B+='"';z&&(B+=' alt="',B+=z,B+='"');return B+="/>"};return d}();/*

 Copyright Â© 2016 Massachusetts Institute of Technology. All rights reserved.
*/
AI.Blockly.VariableDatabase={};Blockly.VariableDatabase=function(){this.globals_={}};Blockly.VariableDatabase.prototype.getGlobalNames=function(a){var d=[],f;for(f in this.globals_)this.globals_.hasOwnProperty(f)&&this.globals_[f]!=a&&d.push(f);return d};Blockly.VariableDatabase.prototype.getLexicalNamesInScope=function(a){};Blockly.VariableDatabase.prototype.getNamesInScope=function(a){};/*

 @fileoverview Container block for all mutators for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Blocks={};AI.Blocks.mutators={};Blockly.Blocks.mutator_container={init:function(){this.setColour(210);this.appendDummyInput().appendField("","CONTAINER_TEXT");this.appendStatementInput("STACK");this.contextMenu=!1}};Blockly.mutationToDom=function(a){a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a};
Blockly.domToMutation=function(a){if(null!=this.valuesToSave)for(var d in this.valuesToSave)this.valuesToSave[d]=this.getFieldValue(d);if(0==this.itemCount_)null!=this.emptyInputName&&this.removeInput(this.emptyInputName);else for(d=0;d<this.itemCount_;d++)this.removeInput(this.repeatingInputName+d);this.itemCount_=window.parseInt(a.getAttribute("items"),10);for(d=0;d<this.itemCount_;d++)this.addInput(d);0==this.itemCount_&&this.addEmptyInput()};
Blockly.decompose=function(a,d,f){var h=a.newBlock("mutator_container");h.setColour(f.getColour());null!=f.updateContainerBlock&&f.updateContainerBlock(h);h.initSvg();for(var l=h.getInput("STACK").connection,m=0;m<f.itemCount_;m++){var p=a.newBlock(d);p.initSvg();l.connect(p.previousConnection);l=p.nextConnection}return h};
Blockly.compose=function(a){if(null!=this.valuesToSave)for(var d in this.valuesToSave)this.valuesToSave[d]=this.getFieldValue(d);if(0==this.itemCount_)null!=this.emptyInputName&&this.removeInput(this.emptyInputName);else for(d=this.itemCount_-1;0<=d;d--)this.removeInput(this.repeatingInputName+d);this.itemCount_=0;for(a=a.getInputTargetBlock("STACK");a;)d=this.addInput(this.itemCount_),a.valueConnection_&&d.connection.connect(a.valueConnection_),this.itemCount_++,a=a.nextConnection&&a.nextConnection.targetBlock();
0==this.itemCount_&&this.addEmptyInput()};Blockly.saveConnections=function(a){a=a.getInputTargetBlock("STACK");for(var d=0;a;){var f=this.getInput(this.repeatingInputName+d);a.valueConnection_=f&&f.connection.targetConnection;d++;a=a.nextConnection&&a.nextConnection.targetBlock()}};/*

 @fileoverview Color blocks for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Blocks.color={};Blockly.Blocks.color_black={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#000000"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_PICKER_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_BLACK}]};
Blockly.Blocks.color_white={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#ffffff"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_WHITE}]};
Blockly.Blocks.color_red={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#ff0000"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_RED}]};
Blockly.Blocks.color_pink={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#ffafaf"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_PINK}]};
Blockly.Blocks.color_orange={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#ffc800"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_ORANGE}]};
Blockly.Blocks.color_yellow={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#ffff00"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_YELLOW}]};
Blockly.Blocks.color_green={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#00ff00"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_GREEN}]};
Blockly.Blocks.color_cyan={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#00ffff"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_CYAN}]};
Blockly.Blocks.color_blue={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#0000ff"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_BLUE}]};
Blockly.Blocks.color_magenta={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#ff00ff"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_MAGENTA}]};
Blockly.Blocks.color_light_gray={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#cccccc"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_LIGHT_GRAY}]};
Blockly.Blocks.color_gray={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#888888"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_GRAY}]};
Blockly.Blocks.color_dark_gray={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_PICKER_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldColour("#444444"),"COLOR");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_DARK_GRAY}]};
Blockly.Blocks.color_make_color={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendValueInput("COLORLIST").appendField(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR).setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT));this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_MAKE_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_MAKE_COLOUR}]};
Blockly.Blocks.color_split_color={category:"Colors",helpUrl:Blockly.Msg.LANG_COLOUR_SPLIT_COLOUR_HELPURL,init:function(){this.setColour(Blockly.COLOR_CATEGORY_HUE);this.appendValueInput("COLOR").appendField(Blockly.Msg.LANG_COLOUR_SPLIT_COLOUR).setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT));this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_COLOUR_SPLIT_COLOUR_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_COLOUR_SPLIT_COLOUR}]};/*

 @fileoverview Non-editable field with flydown representing a component event
     parameter. Necessary to support eventparam mutation and helper blocks in
     the flydown.
*/
AI.Blockly.FieldEventFlydown={};Blockly.FieldEventFlydown=class extends Blockly.FieldParameterFlydown{constructor(a,d,f){super(d.getInternationalizedParameterName(a.name),!1,f);this.componentDb=d;this.param=a}isSerializable(){return!1}};
Blockly.FieldEventFlydown.prototype.flydownBlocksXML_=function(){var a='<mutation><eventparam name="'+this.param.name+'" /></mutation>',d="";this.param.helperKey&&(d=Blockly.Util.xml.valueWithHelperXML("VALUE",this.param.helperKey),d=Blockly.Xml.domToText(d.firstChild));return'<xml><block type="lexical_variable_get">'+a+'<field name="VAR">'+this.param.name+'</field></block><block type="lexical_variable_set">'+a+'<field name="VAR">'+this.param.name+"</field>"+d+"</block></xml>"};/*

 @fileoverview Component blocks for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
 @author sharon@google.com (Sharon Perl)
 @author ewpatton@mit.edu (Evan W. Patton)
*/
AI.Blocks.components={};Blockly.ComponentBlock={};Blockly.ComponentBlock.COLOUR_EVENT=Blockly.CONTROL_CATEGORY_HUE;Blockly.ComponentBlock.COLOUR_METHOD=Blockly.PROCEDURE_CATEGORY_HUE;Blockly.ComponentBlock.COLOUR_GET="#439970";Blockly.ComponentBlock.COLOUR_SET="#266643";Blockly.ComponentBlock.COLOUR_COMPONENT="#439970";Blockly.ComponentBlock.COMPONENT_SELECTOR="COMPONENT_SELECTOR";Blockly.ComponentBlock.COMPONENT_TYPE_SELECTOR="COMPONENT_TYPE_SELECTOR";
Blockly.ComponentBlock.addGenericOption=function(a,d){function f(m,p){var q=m.instanceName,u=m.mutationToDom(),y=Blockly.Xml.domToText(u);u.setAttribute("is_generic","true");u.removeAttribute("instance_name");var C=Blockly.Xml.domToText(u);m.domToMutation(u);m.initSvg();m.render();Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(m,"mutation",null,y,C));"component_event"===m.type&&(p=!1);!1!==p&&(void 0===p&&(p=Blockly.utils.xml.textToDom('<xml><block type="component_component_block"><mutation component_type="'+
m.typeName+'" instance_name="'+q+'"></mutation><field name="COMPONENT_SELECTOR">'+q+"</field></block></xml>").firstElementChild),p=Blockly.Xml.domToBlock(p,m.workspace),p.initSvg(),m.getInput("COMPONENT").connection.connect(p.outputConnection));if(Blockly.Events.isEnabled()){var K=Blockly.Events.getGroup();setTimeout(function(){Blockly.Events.setGroup(K);m.bumpNeighbours();Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)}}if(!("component_event"===a.type&&a.isGeneric||"Form"===a.typeName||a.workspace&&
a.workspace.isFlyout)){var h={enabled:!1};if(a.isGeneric){var l=a.getInputTargetBlock("COMPONENT");h.enabled=l&&"component_component_block"===l.type;h.text=Blockly.BlocklyEditor.makeMenuItemWithHelp(Blockly.Msg.UNGENERICIZE_BLOCK,"/reference/other/any-component-blocks.html");h.callback=function(){try{Blockly.Events.setGroup(!0);var m=l.instanceName;l.dispose(!0);var p=a.mutationToDom(),q=Blockly.Xml.domToText(p);p.setAttribute("instance_name",m);p.setAttribute("is_generic","false");var u=Blockly.Xml.domToText(p);
a.domToMutation(p);a.initSvg();a.render();if(Blockly.Events.isEnabled()){Blockly.Events.fire(new Blockly.Events.BlockChange(a,"mutation",null,q,u));var y=Blockly.Events.getGroup();setTimeout(function(){Blockly.Events.setGroup(y);a.bumpNeighbours();Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)}}finally{Blockly.Events.setGroup(!1)}}}else"component_event"===a.type?(h.enabled=!0,h.text=Blockly.BlocklyEditor.makeMenuItemWithHelp(Blockly.Msg.GENERICIZE_BLOCK,"/reference/other/any-component-blocks.html"),
h.callback=function(){try{Blockly.Events.setGroup(!0);var m=a.instanceName,p=a.workspace.getComponentDatabase().getInternationalizedParameterName("component"),q={},u=0,y=new RegExp("^"+p+"([0-9]+)$"),C=[];a.walk(function(X){"local_declaration_statement"!==X.type&&"local_declaration_expression"!==X.type||X.getVars().forEach(function(M){q[M]=!0;var G=M.match(y);G&&(u=Math.max(u,parseInt(G[1])));M===p&&C.push(X)})});p in q&&C.forEach(function(X){Blockly.LexicalVariable.renameParamFromTo(X,p,p+(u+1).toString(),
!0)});var K=Blockly.utils.xml.textToDom('<xml><block type="lexical_variable_get"><mutation><eventparam name="component"></eventparam></mutation><field name="VAR">'+p+"</field></block></xml>").firstElementChild;f(a);a.walk(function(X){"component_method"!==X.type&&"component_set_get"!==X.type||X.instanceName!==m||f(X,K)})}finally{Blockly.Events.setGroup(!1)}}):(h.enabled=!0,h.text=Blockly.BlocklyEditor.makeMenuItemWithHelp(Blockly.Msg.GENERICIZE_BLOCK,"/reference/other/any-component-blocks.html"),h.callback=
function(){try{Blockly.Events.setGroup(!0),f(a)}finally{Blockly.Events.setGroup(!1)}});d.splice(d.length-1,0,h)}};Blockly.ComponentBlock.checkDeprecated=function(a,d){d&&d.deprecated&&a.workspace==Blockly.common.getMainWorkspace()&&a.setEnabled(!1)};
Blockly.Blocks.component_event={category:"Component",blockType:"event",init:function(){this.componentDropDown=Blockly.ComponentBlock.createComponentDropDown(this);this.lexicalVarPrefix=Blockly.localNamePrefix},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("component_type",this.typeName);a.setAttribute("is_generic",this.isGeneric?"true":"false");this.isGeneric||a.setAttribute("instance_name",this.instanceName);a.setAttribute("event_name",this.eventName);this.horizontalParameters||
a.setAttribute("vertical_parameters","true");for(var d=0;d<this.parameterNames.length;d++)a.setAttribute("param_name"+d,this.parameterNames[d]);return a},domToMutation:function(a){this.componentDropDown=Blockly.ComponentBlock.createComponentDropDown(this);var d=this.rendered;this.rendered=!1;for(var f=null,h=0,l;l=this.inputList[h];h++){if(l.connection){"DO"===l.name&&(f=l.connection.targetBlock());var m=l.connection.targetBlock();m&&m.unplug()}l.dispose()}this.inputList.length=0;this.typeName=a.getAttribute("component_type");
this.eventName=a.getAttribute("event_name");(this.isGeneric="true"==a.getAttribute("is_generic"))?delete this.instanceName:this.instanceName=a.getAttribute("instance_name");this.parameterNames=[];l=this.getDefaultParameters_().length;for(h=0;h<l;h++){m=a.getAttribute("param_name"+h);if(!m)break;this.parameterNames.push(m)}h="true"!==a.getAttribute("vertical_parameters");this.setColour(Blockly.ComponentBlock.COLOUR_EVENT);a=this.getEventTypeObject();m=this.getTopWorkspace().getComponentDatabase();
l=a?m.getInternationalizedEventName(a.name):m.getInternationalizedEventName(this.eventName);this.isGeneric?this.appendDummyInput("WHENTITLE").appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_GENERIC_EVENT_TITLE+m.getInternationalizedComponentType(this.typeName)+"."+l):(this.appendDummyInput("WHENTITLE").appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_TITLE_WHEN).appendField(this.componentDropDown,Blockly.ComponentBlock.COMPONENT_SELECTOR).appendField("."+l),this.componentDropDown.setValue(this.instanceName));
this.setParameterOrientation(h);h=a?m.getInternationalizedEventDescription(this.getTypeName(),a.name,a.description):m.getInternationalizedEventDescription(this.getTypeName(),this.eventName);this.setTooltip(h);this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);f&&this.getInput("DO").connection.connect(f.previousConnection);for(h=0;l=this.inputList[h];h++)l.init();this.verify();Blockly.ComponentBlock.checkDeprecated(this,a);this.rendered=d},getTypeName:function(){return"Form"===this.typeName?
"Screen":this.typeName},setParameterOrientation:function(a){var d=this.getParameters();d||=[];var f=this.getTopWorkspace().getComponentDatabase(),h=this.getInput("DO");if(!h||a!==this.horizontalParameters&&0<d.length){this.horizontalParameters=a;a=null;var l;h&&(a=h.connection.targetConnection);if(this.horizontalParameters){if(h){for(h=0;h<d.length;h++)this.removeInput("VAR"+h);this.removeInput("DO")}if(0<d.length){var m=this.appendDummyInput("PARAMETERS").appendField(" ").setAlign(Blockly.inputs.Align.LEFT);
for(h=0;l=d[h];h++)l=new Blockly.FieldEventFlydown(l,f,Blockly.FieldFlydown.DISPLAY_BELOW),m.appendField(l,"VAR"+h).appendField(" ")}}else for(h&&(this.removeInput("PARAMETERS"),this.removeInput("DO")),h=0;l=d[h];h++)l=new Blockly.FieldEventFlydown(l,f),this.appendDummyInput("VAR"+h).appendField(l,"VAR"+h).setAlign(Blockly.inputs.Align.RIGHT);d=this.appendStatementInput("DO").appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_TITLE_DO);a&&d.connection.connect(a);Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this,
"parameter_orientation",null,!this.horizontalParameters,this.horizontalParameters))}},getParameters:function(){for(var a=this.getDefaultParameters_(),d=this.getExplicitParameterNames_(),f=[],h=0;h<a.length;h++)f.push({name:d[h]||a[h].name,type:a[h].type});return f},getDefaultParameters_:function(){var a=this.getEventTypeObject();return this.isGeneric?[{name:"component",type:"component"},{name:"notAlreadyHandled",type:"boolean"}].concat(a&&a.parameters||[]):a&&a.parameters||[]},getExplicitParameterNames_:function(){return this.parameterNames},
rename:function(a,d){return this.instanceName==a?(this.instanceName=d,this.componentDropDown.setValue(this.instanceName),!0):!1},renameVar:function(a,d){for(var f=0,h="VAR"+f,l;l=this.getFieldValue(h);f++,h="VAR"+f)Blockly.Names.equals(a,l)&&this.setFieldValue(h,d)},helpUrl:function(){var a=Blockly.ComponentBlock.EVENTS_HELPURLS[this.getTypeName()];a&&"/"==a[0]&&(a=a.split("#"),a[1]=this.getTypeName()+"."+this.eventName,a=a.join("#"));return a},getVars:function(){for(var a=[],d=0,f;f=this.getFieldValue("VAR"+
d);d++)a.push(f);return a},getVarString:function(){for(var a="",d=0,f;f=this.getFieldValue("VAR"+d);d++)0!=d&&(a+=" "),a+=f;return a},declaredNames:function(){for(var a=[],d=0,f;f=this.getField("VAR"+d);d++)a.push(f.getValue()),f.eventparam&&f.eventparam!=f.getValue()&&a.push(f.eventparam);return a},declaredVariables:function(){for(var a=[],d=0,f;f=this.getField("VAR"+d);d++)a.push(f.getValue());return a},withLexicalVarsAndPrefix:function(a,d){a=this.getParameters().map(function(f){return f.name});
for(let f=0;f<a.length;f++)d(a[f],this.lexicalVarPrefix,this.workspace.getComponentDatabase().getInternationalizedParameterName(a[f]))},blocksInScope:function(){var a=this.getInputTargetBlock("DO");return a?[a]:[]},getEventTypeObject:function(){return this.getTopWorkspace().getComponentDatabase().getEventForType(this.typeName,this.eventName)},typeblock:function(){var a=Blockly.common.getMainWorkspace().getComponentDatabase(),d=[],f={};a.forEachInstance(function(h){f[h.typeName]=!0;a.forEventInType(h.typeName,
function(l,m){d.push({translatedName:Blockly.Msg.LANG_COMPONENT_BLOCK_TITLE_WHEN+h.name+"."+a.getInternationalizedEventName(m),mutatorAttributes:{component_type:h.typeName,instance_name:h.name,event_name:m}})})});delete f.Form;Object.keys(f).forEach(function(h){a.forEventInType(h,function(l,m){d.push({translatedName:Blockly.Msg.LANG_COMPONENT_BLOCK_GENERIC_EVENT_TITLE+a.getInternationalizedComponentType(h)+"."+a.getInternationalizedEventName(m),mutatorAttributes:{component_type:h,is_generic:!0,event_name:m}})})});
return d},customContextMenu:function(a){const d=a.findIndex(function(f){return f.text===Blockly.Msg.DO_IT});-1<d&&a.splice(d,1);this.workspace&&this.workspace.isFlyout||(Blockly.FieldParameterFlydown.addHorizontalVerticalOption(this,a),Blockly.ComponentBlock.addGenericOption(this,a))},verify:function(){(function(){var a=this.getTopWorkspace().getComponentDatabase(),d=a.getType(this.typeName);if(!d)return!1;var f=d.eventDictionary[this.eventName];if(!f)return!1;var h=this.getVars();f=f.parameters;
this.isGeneric&&h.splice(0,2);if(h.length!=f.length)return!1;if("true"===d.external)for(d=0;d<h.length;++d){for(var l=!1,m=0,p;p=f[m];++m)if(a.getInternationalizedParameterName(p.name)==h[d]){l=!0;break}if(!l)return!1}return!0}).call(this)?this.notBadBlock():this.badBlock()},errors:[{name:"checkIfUndefinedBlock"},{name:"checkIfIAmADuplicateEventHandler"},{name:"checkComponentNotExistsError"}],onchange:function(a){return a.isTransient?!1:this.workspace.getWarningHandler()&&this.workspace.getWarningHandler().checkErrors(this)}};
Blockly.Blocks.component_method={category:"Component",helpUrl:function(){var a=Blockly.ComponentBlock.METHODS_HELPURLS[this.getTypeName()];a&&"/"==a[0]&&(a=a.split("#"),a[1]=this.getTypeName()+"."+this.methodName,a=a.join("#"));return a},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("component_type",this.typeName);a.setAttribute("method_name",this.methodName);var d="false";this.isGeneric&&(d="true");a.setAttribute("is_generic",d);this.isGeneric||a.setAttribute("instance_name",
this.instanceName);!this.isGeneric&&"Clock"==this.typeName&&Blockly.ComponentBlock.isClockMethodName(this.methodName)&&(d=this.getFieldValue("TIME_UNIT"),a.setAttribute("method_name","Add"+d),a.setAttribute("timeUnit",d));return a},domToMutation:function(a){this.componentDropDown=Blockly.ComponentBlock.createComponentDropDown(this);var d=this.rendered;this.rendered=!1;for(var f=[],h=0,l;l=this.inputList[h];h++){if(l.connection){var m=l.connection.targetBlock();m&&m.unplug();f.push(m)}else f.push(null);
l.dispose()}this.inputList.length=0;this.typeName=a.getAttribute("component_type");this.methodName=a.getAttribute("method_name");this.shape=a.getAttribute("shape");(this.isGeneric="true"==a.getAttribute("is_generic"))?delete this.instanceName:this.instanceName=a.getAttribute("instance_name");this.setColour(Blockly.ComponentBlock.COLOUR_METHOD);this.componentDropDown=Blockly.ComponentBlock.createComponentDropDown(this);this.isGeneric||this.componentDropDown.setValue(this.instanceName);a=this.getTopWorkspace().getComponentDatabase();
h=(m=this.getMethodTypeObject())?a.getInternationalizedMethodName(m.name):this.methodName;if(this.isGeneric)this.appendDummyInput().appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_GENERIC_METHOD_TITLE_CALL+a.getInternationalizedComponentType(this.typeName)+"."+h),this.appendValueInput("COMPONENT").setCheck(this.typeName).appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_GENERIC_METHOD_TITLE_FOR_COMPONENT).setAlign(Blockly.inputs.Align.RIGHT);else{if("Clock"==this.typeName&&Blockly.ComponentBlock.isClockMethodName(this.methodName))switch(h=
Blockly.ComponentBlock.createClockAddDropDown(),this.appendDummyInput().appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_METHOD_TITLE_CALL).appendField(this.componentDropDown,Blockly.ComponentBlock.COMPONENT_SELECTOR).appendField(".Add").appendField(h,"TIME_UNIT"),this.methodName){case "AddYears":this.setFieldValue("Years","TIME_UNIT");break;case "AddMonths":this.setFieldValue("Months","TIME_UNIT");break;case "AddWeeks":this.setFieldValue("Weeks","TIME_UNIT");break;case "AddDays":this.setFieldValue("Days",
"TIME_UNIT");break;case "AddHours":this.setFieldValue("Hours","TIME_UNIT");break;case "AddMinutes":this.setFieldValue("Minutes","TIME_UNIT");break;case "AddSeconds":this.setFieldValue("Seconds","TIME_UNIT");break;case "AddDuration":this.setFieldValue("Duration","TIME_UNIT")}else this.appendDummyInput().appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_METHOD_TITLE_CALL).appendField(this.componentDropDown,Blockly.ComponentBlock.COMPONENT_SELECTOR).appendField("."+h);this.componentDropDown.setValue(this.instanceName)}h=
m?a.getInternationalizedMethodDescription(this.getTypeName(),m.name,m.description):a.getInternationalizedMethodDescription(this.getTypeName(),this.methodName);this.setTooltip(h);var p=[];m&&(p=m.parameters);f.splice(0,f.length-p.length);h=0;for(var q;q=p[h];h++)l=a.getInternationalizedParameterName(q.name),q=this.getParamBlocklyType(q),l=this.appendValueInput("ARG"+h).appendField(l).setAlign(Blockly.inputs.Align.RIGHT).setCheck(q),f[h]&&l.connection&&Blockly.icons.MutatorIcon.reconnect(f[h].outputConnection,
this,"ARG"+h);for(h=0;l=this.inputList[h];h++)l.init();m?m.returnType?this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType(m.returnType,AI.BlockUtils.OUTPUT)):(this.setPreviousStatement(!0),this.setNextStatement(!0)):"statement"===this.shape?(this.setPreviousStatement(!0),this.setNextStatement(!0),this.setOutput(!1)):("value"===this.shape?this.setOutput(!0):this.setOutput(!1),this.setPreviousStatement(!1),this.setNextStatement(!1));this.errors=[{name:"checkIfUndefinedBlock"},{name:"checkIsInDefinition"},
{name:"checkComponentNotExistsError"},{name:"checkGenericComponentSocket"}];this.verify();Blockly.ComponentBlock.checkDeprecated(this,this.getMethodTypeObject());this.rendered=d},getTypeName:function(){return"Form"===this.typeName?"Screen":this.typeName},rename:function(a,d){return this.instanceName==a?(this.instanceName=d,this.componentDropDown.setValue(this.instanceName),!0):!1},getMethodTypeObject:function(){return this.getTopWorkspace().getComponentDatabase().getMethodForType(this.typeName,this.methodName)},
getParamBlocklyType:function(a){var d=[],f=AI.BlockUtils.YailTypeToBlocklyType(a.type,AI.BlockUtils.INPUT);f&&(Array.isArray(f)?d=f.slice():d.push(f));(a=AI.BlockUtils.helperKeyToBlocklyType(a.helperKey,this))&&a!=f&&d.push(a);return d.length?d:null},getReturnBlocklyType:function(a){var d=[],f=AI.BlockUtils.YailTypeToBlocklyType(a.returnType,AI.BlockUtils.OUTPUT);f&&(Array.isArray(f)?d=f.slice():d.push(f));(a=AI.BlockUtils.helperKeyToBlocklyType(a.returnHelperKey,this))&&a!=f&&d.push(a);return d.length?
d:null},getArgInputs:function(){for(var a={},d=0,f;f=this.getInput("ARG"+d);d++)1==f.fieldRow.length&&(a[f.fieldRow[0].getValue()]=f);return a},getArgs:function(){for(var a=[],d=0,f;f=this.getInput("ARG"+d);d++)1==f.fieldRow.length&&a.push(f.fieldRow[0].getValue());return a},typeblock:function(){var a=Blockly.common.getMainWorkspace().getComponentDatabase(),d=[],f={};a.forEachInstance(function(h){f[h.typeName]=!0;a.forMethodInType(h.typeName,function(l,m){d.push({translatedName:Blockly.Msg.LANG_COMPONENT_BLOCK_METHOD_TITLE_CALL+
h.name+"."+a.getInternationalizedMethodName(m),mutatorAttributes:{component_type:h.typeName,instance_name:h.name,method_name:m,is_generic:"false"}})})});delete f.Form;Object.keys(f).forEach(function(h){a.forMethodInType(h,function(l,m){d.push({translatedName:Blockly.Msg.LANG_COMPONENT_BLOCK_GENERIC_METHOD_TITLE_CALL+a.getInternationalizedComponentType(h)+"."+a.getInternationalizedMethodName(m),mutatorAttributes:{component_type:h,method_name:m,is_generic:"true"}})})});return d},verify:function(){(function(){var a=
this.getTopWorkspace().getComponentDatabase();if(!a.getType(this.typeName))return!1;var d=a.getMethodForType(this.typeName,this.methodName);if(!d)return!1;var f=this.getArgs(),h=this.getArgInputs(),l=d.parameters,m=!1;f.length!=l.length&&(m=!0);for(var p=0;p<f.length;++p){for(var q=!1,u=0,y;y=l[u];++u)if(a.getInternationalizedParameterName(y.name)==f[p]){u=h[f[p]];if(!u||!u.connection){m=!0;break}q=this.getParamBlocklyType(y);u.setCheck(q);q=!0;break}q||(m=!0)}a=!1;d.returnType?this.outputConnection?
this.outputConnection.setCheck(this.getReturnBlocklyType(d)):a=!0:d.returnType||this.outputConnection&&(a=!0);return!(m||a)}).call(this)?this.notBadBlock():this.badBlock()},customContextMenu:function(a){Blockly.ComponentBlock.addGenericOption(this,a)}};
Blockly.Blocks.component_set_get={category:"Component",helpUrl:function(){var a=Blockly.ComponentBlock.PROPERTIES_HELPURLS[this.getTypeName()];a&&"/"==a[0]&&(a=a.split("#"),a[1]=this.getTypeName()+"."+this.propertyName,a=a.join("#"));return a},init:function(){this.componentDropDown=Blockly.ComponentBlock.createComponentDropDown(this);this.genericComponentInput=Blockly.Msg.LANG_COMPONENT_BLOCK_GENERIC_SETTER_TITLE_OF_COMPONENT},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("component_type",
this.typeName);a.setAttribute("set_or_get",this.setOrGet);a.setAttribute("property_name",this.propertyName);var d="false";this.isGeneric&&(d="true");a.setAttribute("is_generic",d);this.isGeneric||a.setAttribute("instance_name",this.instanceName);return a},domToMutation:function(a){var d=this.rendered;this.rendered=!1;for(var f="set"==this.setOrGet&&this.getInputTargetBlock("VALUE"),h=0,l;l=this.inputList[h];h++){if(l.connection){var m=l.connection.targetBlock();m&&(m.isShadow()?m.dispose():m.unplug())}l.dispose()}this.inputList.length=
0;var p=this.getTopWorkspace().getComponentDatabase();this.typeName=a.getAttribute("component_type");this.setOrGet=a.getAttribute("set_or_get");this.propertyName=a.getAttribute("property_name");this.propertyObject=this.getPropertyObject(this.propertyName);(this.isGeneric="true"==a.getAttribute("is_generic"))?delete this.instanceName:this.instanceName=a.getAttribute("instance_name");"set"==this.setOrGet?this.setColour(Blockly.ComponentBlock.COLOUR_SET):this.setColour(Blockly.ComponentBlock.COLOUR_GET);
a=this.propertyName&&this.propertyObject?p.getInternationalizedPropertyDescription(this.getTypeName(),this.propertyName,this.propertyObject.description):Blockly.Msg.UNDEFINED_BLOCK_TOOLTIP;var q=this;h=new Blockly.FieldDropdown(function(){return q.getPropertyDropDownList()},function(u){q.propertyName=u;q.propertyObject=q.getPropertyObject(u);q.setTypeCheck();q.propertyName&&q.propertyObject?q.setTooltip(p.getInternationalizedPropertyDescription(q.getTypeName(),q.propertyName,q.propertyObject.description)):
q.setTooltip(Blockly.Msg.UNDEFINED_BLOCK_TOOLTIP)});"get"==this.setOrGet?(this.setOutput(!0),this.isGeneric?(this.appendDummyInput().appendField(p.getInternationalizedComponentType(this.typeName)+".").appendField(h,"PROP"),this.appendValueInput("COMPONENT").setCheck(this.typeName).appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_GENERIC_GETTER_TITLE_OF_COMPONENT).setAlign(Blockly.inputs.Align.RIGHT)):(this.componentDropDown=Blockly.ComponentBlock.createComponentDropDown(this),this.appendDummyInput().appendField(this.componentDropDown,
Blockly.ComponentBlock.COMPONENT_SELECTOR).appendField(".").appendField(h,"PROP"))):(this.setPreviousStatement(!0),this.setNextStatement(!0),this.isGeneric?(this.appendDummyInput().appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_GENERIC_SETTER_TITLE_SET+p.getInternationalizedComponentType(this.typeName)+".").appendField(h,"PROP"),this.appendValueInput("COMPONENT").setCheck(this.typeName).appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_GENERIC_SETTER_TITLE_OF_COMPONENT).setAlign(Blockly.inputs.Align.RIGHT),
this.appendValueInput("VALUE").appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_GENERIC_SETTER_TITLE_TO).setAlign(Blockly.inputs.Align.RIGHT)):(this.componentDropDown=Blockly.ComponentBlock.createComponentDropDown(this),this.appendValueInput("VALUE").appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_SETTER_TITLE_SET).appendField(this.componentDropDown,Blockly.ComponentBlock.COMPONENT_SELECTOR).appendField(".").appendField(h,"PROP").appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_SETTER_TITLE_TO)));f&&(this.getInput("VALUE").init(),
Blockly.icons.MutatorIcon.reconnect(f.outputConnection,this,"VALUE"));this.isGeneric||this.componentDropDown.setValue(this.instanceName);this.setFieldValue(this.propertyName,"PROP");this.setTypeCheck();this.setTooltip(a);this.errors=[{name:"checkIfUndefinedBlock"},{name:"checkIsInDefinition"},{name:"checkComponentNotExistsError"},{name:"checkGenericComponentSocket"},{name:"checkEmptySetterSocket"}];this.verify();Blockly.ComponentBlock.checkDeprecated(this,this.propertyObject);for(h=0;l=this.inputList[h];h++)l.init();
this.rendered=d},getTypeName:function(){return"Form"===this.typeName?"Screen":this.typeName},setTypeCheck:function(){var a=AI.BlockUtils.OUTPUT;"set"==this.setOrGet&&(a=AI.BlockUtils.INPUT);a=this.getPropertyBlocklyType(this.propertyName,a);"get"==this.setOrGet?this.outputConnection.setCheck(a):this.getInput("VALUE").connection.setCheck(a)},getPropertyBlocklyType:function(a,d){var f=[],h="any";if(a=this.getPropertyObject(a))h=a.type;(d=AI.BlockUtils.YailTypeToBlocklyType(h,d))&&(Array.isArray(d)?
f=d.slice():f.push(d));a&&(h=AI.BlockUtils.helperKeyToBlocklyType(a.helperKey,this))&&h!=d&&f.push(h);return f.length?f:null},getPropertyDropDownList:function(){var a=this.getTopWorkspace().getComponentDatabase(),d=[],f=[this.propertyName];this.propertyObject&&(f="true"==this.propertyObject.deprecated?[this.propertyObject.name]:"set"==this.setOrGet?a.getSetterNamesForType(this.typeName):a.getGetterNamesForType(this.typeName));for(var h=0;h<f.length;h++)d.push([a.getInternationalizedPropertyName(f[h]),
f[h]]);return d},getPropertyObject:function(a){return this.getTopWorkspace().getComponentDatabase().getPropertyForType(this.typeName,a)},rename:function(a,d){return this.instanceName==a?(this.instanceName=d,this.componentDropDown.setValue(this.instanceName),!0):!1},typeblock:function(){function a(l,m,p,q,u){h.push({translatedName:l+u+"."+f.getInternationalizedPropertyName(p),mutatorAttributes:{set_or_get:m,component_type:q,instance_name:u,property_name:p,is_generic:"false"}})}function d(l,m,p,q){"Form"!==
q&&h.push({translatedName:l+f.getInternationalizedComponentType(q)+"."+f.getInternationalizedPropertyName(p),mutatorAttributes:{set_or_get:m,component_type:q,property_name:p,is_generic:!0}})}var f=Blockly.common.getMainWorkspace().getComponentDatabase(),h=[];f.forEachInstance(function(l){var m=[],p=f.types_[l.typeName].properties;for(q in p)p[q].deprecated&&m.push(p[q].name);p=f.getSetterNamesForType(l.typeName);var q=f.getGetterNamesForType(l.typeName);p=p.filter(function(y){return!m.includes(y)});
var u=q.filter(function(y){return!m.includes(y)});for(q=0;q<p.length;q++)a(Blockly.Msg.LANG_COMPONENT_BLOCK_SETTER_TITLE_SET,"set",p[q],l.typeName,l.name,!1);for(q=0;q<u.length;q++)a("","get",u[q],l.typeName,l.name,!1);for(q=0;q<p.length;q++)d(Blockly.Msg.LANG_COMPONENT_BLOCK_SETTER_TITLE_SET,"set",p[q],l.typeName);for(q=0;q<u.length;q++)d("","get",u[q],l.typeName)});return h},verify:function(){(function(){var a=this.getTopWorkspace().getComponentDatabase().getType(this.typeName);if(!a||!a.properties[this.propertyName])return!1;
if("get"==this.setOrGet){if(-1==a.getPropertyList.indexOf(this.propertyName))return!1}else if("set"==this.setOrGet&&-1==a.setPropertyList.indexOf(this.propertyName))return!1;this.setTypeCheck();return!0}).call(this)?this.notBadBlock():this.badBlock(!0)},customContextMenu:function(a){Blockly.ComponentBlock.addGenericOption(this,a)}};
Blockly.Blocks.component_component_block={category:"Component",helpUrl:function(){return Blockly.ComponentBlock.HELPURLS[this.getTypeName()]},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("component_type",this.typeName);a.setAttribute("instance_name",this.instanceName);return a},domToMutation:function(a){this.typeName=a.getAttribute("component_type");this.instanceName=a.getAttribute("instance_name");this.setColour(Blockly.ComponentBlock.COLOUR_COMPONENT);this.componentDropDown=
Blockly.ComponentBlock.createComponentDropDown(this);this.componentDropDown.setValue(this.instanceName);this.appendDummyInput().appendField(this.componentDropDown,Blockly.ComponentBlock.COMPONENT_SELECTOR);this.setOutput(!0,[this.typeName,"COMPONENT","Key"]);this.errors=[{name:"checkIfUndefinedBlock"},{name:"checkComponentNotExistsError"}]},getTypeName:function(){return"Form"===this.typeName?"Screen":this.typeName},rename:function(a,d){return this.instanceName==a?(this.instanceName=d,this.componentDropDown.setValue(this.instanceName),
!0):!1},typeblock:function(){var a=[];Blockly.common.getMainWorkspace().getComponentDatabase().forEachInstance(function(d){a.push({translatedName:d.name,mutatorAttributes:{component_type:d.typeName,instance_name:d.name}})});return a},verify:function(){this.getTopWorkspace().getComponentDatabase().hasType(this.typeName)?this.notBadBlock():this.badBlock()}};
Blockly.Blocks.component_all_component_block={category:"Component",helpUrl:function(){return Blockly.ComponentBlock.HELPURLS["Form"===this.typeName?"Screen":this.typeName]},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("component_type",this.typeName);return a},domToMutation:function(a){this.typeName=a.getAttribute("component_type");this.setColour(Blockly.ComponentBlock.COLOUR_COMPONENT);this.componentTypeDropDown=Blockly.ComponentBlock.createComponentTypeDropDown(this);
this.componentTypeDropDown.setValue(this.typeName);this.appendDummyInput().appendField(Blockly.Msg.LANG_COMPONENT_BLOCK_EVERY_COMPONENT_TITLE_EVERY).appendField(this.componentTypeDropDown,Blockly.ComponentBlock.COMPONENT_TYPE_SELECTOR);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.errors=[{name:"checkIfUndefinedBlock"},{name:"checkComponentTypeNotExistsError"}]},rename:function(a,d){return!0},typeblock:function(){var a=Blockly.common.getMainWorkspace().getComponentDatabase(),
d=[];a.forEachInstance(function(f){"Form"!=f.typeName&&d.push({translatedName:Blockly.Msg.LANG_COMPONENT_BLOCK_EVERY_COMPONENT_TITLE_EVERY+" "+a.getInternationalizedComponentType(f.typeName),mutatorAttributes:{component_type:f.typeName}})});module$contents$goog$array_removeDuplicates(d,null,function(f){return f.mutatorAttributes.component_type});return d},verify:function(){this.getTopWorkspace().getComponentDatabase().hasType(this.typeName)?this.notBadBlock():this.badBlock()}};
Blockly.ComponentBlock.timeUnits="Years Months Weeks Days Hours Minutes Seconds Duration".split(" ");Blockly.ComponentBlock.timeUnitsMenu=[[Blockly.Msg.TIME_YEARS,"Years"],[Blockly.Msg.TIME_MONTHS,"Months"],[Blockly.Msg.TIME_WEEKS,"Weeks"],[Blockly.Msg.TIME_DAYS,"Days"],[Blockly.Msg.TIME_HOURS,"Hours"],[Blockly.Msg.TIME_MINUTES,"Minutes"],[Blockly.Msg.TIME_SECONDS,"Seconds"],[Blockly.Msg.TIME_DURATION,"Duration"]];Blockly.ComponentBlock.clockMethodNames="AddYears AddMonths AddWeeks AddDays AddHours AddMinutes AddSeconds AddDuration".split(" ");
Blockly.ComponentBlock.isClockMethodName=function(a){return-1!=Blockly.ComponentBlock.clockMethodNames.indexOf(a)};Blockly.ComponentBlock.createComponentDropDown=function(a){var d=new AI.Blockly.FieldNoCheckDropdown([["",""]]);d.menuGenerator_=function(){return a.getTopWorkspace().getComponentDatabase().getComponentNamesByType(a.typeName)};return d};
Blockly.ComponentBlock.createComponentTypeDropDown=function(a){var d=new Blockly.FieldDropdown([["",""]]);d.menuGenerator_=function(){return a.getTopWorkspace().getComponentDatabase().getComponentTypes()};return d};Blockly.ComponentBlock.createClockAddDropDown=function(){var a=new Blockly.FieldDropdown([["",""]]);a.menuGenerator_=function(){return Blockly.ComponentBlock.timeUnitsMenu};return a};
Blockly.ComponentBlock.HELPURLS={Button:Blockly.Msg.LANG_COMPONENT_BLOCK_BUTTON_HELPURL,Canvas:Blockly.Msg.LANG_COMPONENT_BLOCK_CANVAS_HELPURL,CheckBox:Blockly.Msg.LANG_COMPONENT_BLOCK_CHECKBOX_HELPURL,Switch:Blockly.Msg.LANG_COMPONENT_BLOCK_SWITCH_HELPURL,Clock:Blockly.Msg.LANG_COMPONENT_BLOCK_CLOCK_HELPURL,Image:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGE_HELPURL,Label:Blockly.Msg.LANG_COMPONENT_BLOCK_LABEL_HELPURL,ListPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_LISTPICKER_HELPURL,DatePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_DATEPICKER_HELPURL,
TimePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_TIMEPICKER_HELPURL,ListView:Blockly.Msg.LANG_COMPONENT_BLOCK_LISTVIEW_HELPURL,PasswordTextBox:Blockly.Msg.LANG_COMPONENT_BLOCK_PASSWORDTEXTBOX_HELPURL,Screen:Blockly.Msg.LANG_COMPONENT_BLOCK_SCREEN_HELPURL,Slider:Blockly.Msg.LANG_COMPONENT_BLOCK_SLIDER_HELPURL,TextBox:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTBOX_HELPURL,TinyDB:Blockly.Msg.LANG_COMPONENT_BLOCK_TINYDB_HELPURL,Camcorder:Blockly.Msg.LANG_COMPONENT_BLOCK_CAMCORDER_HELPURL,Camera:Blockly.Msg.LANG_COMPONENT_BLOCK_CAMERA_HELPURL,
ImagePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGEPICKER_HELPURL,Player:Blockly.Msg.LANG_COMPONENT_BLOCK_PLAYER_HELPURL,Sound:Blockly.Msg.LANG_COMPONENT_BLOCK_SOUND_HELPURL,VideoPlayer:Blockly.Msg.LANG_COMPONENT_BLOCK_VIDEOPLAYER_HELPURL,Ball:Blockly.Msg.LANG_COMPONENT_BLOCK_BALL_HELPURL,ImageSprite:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGESPRITE_HELPURL,Map:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_HELPURL,Circle:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_CIRCLE_HELPURL,FeatureCollection:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_FEATURECOLLECTION_HELPURL,
LineString:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_LINESTRING_HELPURL,Marker:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_MARKER_HELPURL,Navigation:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_NAVIGATION_HELPURL,Polygon:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_POLYGON_HELPURL,Rectangle:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_RECTANGLE_HELPURL,Chart:Blockly.Msg.LANG_COMPONENT_BLOCK_CHART_HELPURL,ChartData2D:Blockly.Msg.LANG_COMPONENT_BLOCK_CHARTDATA2D_HELPURL,AnomalyDetection:Blockly.Msg.LANG_COMPONENT_BLOCK_ANOMALYDETECTION_HELPURL,
Regression:Blockly.Msg.LANG_COMPONENT_BLOCK_REGRESSION_HELPURL,ContactPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_CONTACTPICKER_HELPURL,EmailPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_EMAILPICKER_HELPURL,CloudDB:Blockly.Msg.LANG_COMPONENT_BLOCK_CLOUDDB_HELPURL,FirebaseDB:Blockly.Msg.LANG_COMPONENT_BLOCK_FIREBASE_HELPURL,PhoneCall:Blockly.Msg.LANG_COMPONENT_BLOCK_PHONECALL_HELPURL,PhoneNumberPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_PHONENUMBERPICKER_HELPURL,Sharing:Blockly.Msg.LANG_COMPONENT_BLOCK_SHARING_HELPURL,
Texting:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTING_HELPURL,Twitter:Blockly.Msg.LANG_COMPONENT_BLOCK_TWITTER_HELPURL,AccelerometerSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_ACCELEROMETERSENSOR_HELPURL,Barometer:Blockly.Msg.LANG_COMPONENT_BLOCK_BAROMETER_HELPURL,GyroscopeSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_GYROSCOPESENSOR_HELPURL,Hygrometer:Blockly.Msg.LANG_COMPONENT_BLOCK_HYGROMETER_HELPURL,LightSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_LIGHTSENSOR_HELPURL,LocationSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_LOCATIONSENSOR_HELPURL,
NearField:Blockly.Msg.LANG_COMPONENT_BLOCK_NEARFIELDSENSOR_HELPURL,OrientationSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_ORIENTATIONSENSOR_HELPURL,Pedometer:Blockly.Msg.LANG_COMPONENT_BLOCK_PEDOMETERSENSOR_HELPURL,ProximitySensor:Blockly.Msg.LANG_COMPONENT_BLOCK_PROXIMITYSENSOR_HELPURL,Thermometer:Blockly.Msg.LANG_COMPONENT_BLOCK_THERMOMETER_HELPURL,HorizontalArrangement:Blockly.Msg.LANG_COMPONENT_BLOCK_HORIZARRANGE_HELPURL,HorizontalScrollArrangement:Blockly.Msg.LANG_COMPONENT_BLOCK_HORIZSCROLLARRANGE_HELPURL,
TableArrangement:Blockly.Msg.LANG_COMPONENT_BLOCK_TABLEARRANGE_HELPURL,VerticalArrangement:Blockly.Msg.LANG_COMPONENT_BLOCK_VERTARRANGE_HELPURL,VerticalScrollArrangement:Blockly.Msg.LANG_COMPONENT_BLOCK_VERTSCROLLARRANGE_HELPURL,NxtColorSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTCOLOR_HELPURL,NxtDirectCommands:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTDIRECT_HELPURL,NxtDrive:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTDRIVE_HELPURL,NxtLightSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTLIGHT_HELPURL,NxtSoundSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTSOUND_HELPURL,
NxtTouchSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTTOUCH_HELPURL,NxtUltrasonicSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTULTRASONIC_HELPURL,Ev3Motors:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3MOTORS_HELPURL,Ev3ColorSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3COLORSENSOR_HELPURL,Ev3GyroSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3GYROSENSOR_HELPURL,Ev3TouchSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3TOUCHSENSOR_HELPURL,Ev3UltrasonicSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3ULTRASONICSENSOR_HELPURL,Ev3UI:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3UI_HELPURL,
Ev3Sound:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3SOUND_HELPURL,Ev3Commands:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3COMMANDS_HELPURL,ActivityStarter:Blockly.Msg.LANG_COMPONENT_BLOCK_ACTIVITYSTARTER_HELPURL,BarcodeScanner:Blockly.Msg.LANG_COMPONENT_BLOCK_BARCODESCANNER_HELPURL,BluetoothClient:Blockly.Msg.LANG_COMPONENT_BLOCK_BLUETOOTHCLIENT_HELPURL,BluetoothServer:Blockly.Msg.LANG_COMPONENT_BLOCK_BLUETOOTHSERVER_HELPURL,Notifier:Blockly.Msg.LANG_COMPONENT_BLOCK_NOTIFIER_HELPURL,Serial:Blockly.Msg.LANG_COMPONENT_BLOCK_SERIAL_HELPURL,
SpeechRecognizer:Blockly.Msg.LANG_COMPONENT_BLOCK_SPEECHRECOGNIZER_HELPURL,TextToSpeech:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTTOSPEECH_HELPURL,TinyWebDB:Blockly.Msg.LANG_COMPONENT_BLOCK_TINYWEBDB_HELPURL,Web:Blockly.Msg.LANG_COMPONENT_BLOCK_WEB_HELPURL,File:Blockly.Msg.LANG_COMPONENT_BLOCK_FILE_HELPURL,FusiontablesControl:Blockly.Msg.LANG_COMPONENT_BLOCK_FUSIONTABLESCONTROL_HELPURL,Spreadsheet:Blockly.Msg.LANG_COMPONENT_BLOCK_SPREADSHEET_HELPURL,GameClient:Blockly.Msg.LANG_COMPONENT_BLOCK_GAMECLIENT_HELPURL,
SoundRecorder:Blockly.Msg.LANG_COMPONENT_BLOCK_SOUNDRECORDER_HELPURL,Voting:Blockly.Msg.LANG_COMPONENT_BLOCK_VOTING_HELPURL,WebViewer:Blockly.Msg.LANG_COMPONENT_BLOCK_WEBVIEWER_HELPURL};
Blockly.ComponentBlock.PROPERTIES_HELPURLS={Button:Blockly.Msg.LANG_COMPONENT_BLOCK_BUTTON_PROPERTIES_HELPURL,Canvas:Blockly.Msg.LANG_COMPONENT_BLOCK_CANVAS_PROPERTIES_HELPURL,CheckBox:Blockly.Msg.LANG_COMPONENT_BLOCK_CHECKBOX_PROPERTIES_HELPURL,Switch:Blockly.Msg.LANG_COMPONENT_BLOCK_SWITCH_HELPURL,Clock:Blockly.Msg.LANG_COMPONENT_BLOCK_CLOCK_PROPERTIES_HELPURL,Image:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGE_PROPERTIES_HELPURL,Label:Blockly.Msg.LANG_COMPONENT_BLOCK_LABEL_PROPERTIES_HELPURL,ListPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_LISTPICKER_PROPERTIES_HELPURL,
DatePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_DATEPICKER_HELPURL,TimePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_TIMEPICKER_HELPURL,ListView:Blockly.Msg.LANG_COMPONENT_BLOCK_LISTVIEW_HELPURL,PasswordTextBox:Blockly.Msg.LANG_COMPONENT_BLOCK_PASSWORDTEXTBOX_PROPERTIES_HELPURL,Screen:Blockly.Msg.LANG_COMPONENT_BLOCK_SCREEN_PROPERTIES_HELPURL,Slider:Blockly.Msg.LANG_COMPONENT_BLOCK_SLIDER_PROPERTIES_HELPURL,Spinner:Blockly.Msg.LANG_COMPONENT_BLOCK_SPINNER_HELPURL,TextBox:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTBOX_PROPERTIES_HELPURL,
TinyDB:Blockly.Msg.LANG_COMPONENT_BLOCK_TINYDB_PROPERTIES_HELPURL,Camcorder:Blockly.Msg.LANG_COMPONENT_BLOCK_CAMCORDER_PROPERTIES_HELPURL,Camera:Blockly.Msg.LANG_COMPONENT_BLOCK_CAMERA_PROPERTIES_HELPURL,ImagePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGEPICKER_PROPERTIES_HELPURL,Player:Blockly.Msg.LANG_COMPONENT_BLOCK_PLAYER_PROPERTIES_HELPURL,Sound:Blockly.Msg.LANG_COMPONENT_BLOCK_SOUND_PROPERTIES_HELPURL,VideoPlayer:Blockly.Msg.LANG_COMPONENT_BLOCK_VIDEOPLAYER_PROPERTIES_HELPURL,Ball:Blockly.Msg.LANG_COMPONENT_BLOCK_BALL_PROPERTIES_HELPURL,
ImageSprite:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGESPRITE_PROPERTIES_HELPURL,Map:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_HELPURL,Chart:Blockly.Msg.LANG_COMPONENT_BLOCK_CHART_HELPURL,ChartData2D:Blockly.Msg.LANG_COMPONENT_BLOCK_CHARTDATA2D_HELPURL,AnomalyDetection:Blockly.Msg.LANG_COMPONENT_BLOCK_ANOMALYDETECTION_HELPURL,Regression:Blockly.Msg.LANG_COMPONENT_BLOCK_REGRESSION_HELPURL,Circle:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_CIRCLE_HELPURL,FeatureCollection:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_FEATURECOLLECTION_HELPURL,
LineString:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_LINESTRING_HELPURL,Marker:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_MARKER_HELPURL,Navigation:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_NAVIGATION_HELPURL,Polygon:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_POLYGON_HELPURL,Rectangle:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_RECTANGLE_HELPURL,ContactPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_CONTACTPICKER_PROPERTIES_HELPURL,EmailPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_EMAILPICKER_PROPERTIES_HELPURL,CloudDB:Blockly.Msg.LANG_COMPONENT_BLOCK_CLOUDDB_HELPURL,
FirebaseDB:Blockly.Msg.LANG_COMPONENT_BLOCK_FIREBASE_PROPERTIES_HELPURL,PhoneCall:Blockly.Msg.LANG_COMPONENT_BLOCK_PHONECALL_PROPERTIES_HELPURL,PhoneNumberPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_PHONENUMBERPICKER_PROPERTIES_HELPURL,Sharing:Blockly.Msg.LANG_COMPONENT_BLOCK_SHARING_HELPURL,Texting:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTING_PROPERTIES_HELPURL,Twitter:Blockly.Msg.LANG_COMPONENT_BLOCK_TWITTER_PROPERTIES_HELPURL,AccelerometerSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_ACCELEROMETERSENSOR_PROPERTIES_HELPURL,
Barometer:Blockly.Msg.LANG_COMPONENT_BLOCK_BAROMETER_HELPURL,GyroscopeSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_GYROSCOPESENSOR_PROPERTIES_HELPURL,Hygrometer:Blockly.Msg.LANG_COMPONENT_BLOCK_HYGROMETER_HELPURL,LightSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_LIGHTSENSOR_HELPURL,LocationSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_LOCATIONSENSOR_PROPERTIES_HELPURL,NearField:Blockly.Msg.LANG_COMPONENT_BLOCK_NEARFIELDSENSOR_HELPURL,OrientationSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_ORIENTATIONSENSOR_PROPERTIES_HELPURL,
Pedometer:Blockly.Msg.LANG_COMPONENT_BLOCK_PEDOMETERSENSOR_HELPURL,ProximitySensor:Blockly.Msg.LANG_COMPONENT_BLOCK_PROXIMITYSENSOR_HELPURL,Thermometer:Blockly.Msg.LANG_COMPONENT_BLOCK_THERMOMETER_HELPURL,HorizontalArrangement:Blockly.Msg.LANG_COMPONENT_BLOCK_HORIZARRANGE_HELPURL,HorizontalScrollArrangement:Blockly.Msg.LANG_COMPONENT_BLOCK_HORIZSCROLLARRANGE_HELPURL,TableArrangement:Blockly.Msg.LANG_COMPONENT_BLOCK_TABLEARRANGE_PROPERTIES_HELPURL,VerticalArrangement:Blockly.Msg.LANG_COMPONENT_BLOCK_VERTARRANGE_PROPERTIES_HELPURL,
VerticalScrollArrangement:Blockly.Msg.LANG_COMPONENT_BLOCK_VERTSCROLLARRANGE_HELPURL,NxtColorSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTCOLOR_PROPERTIES_HELPURL,NxtDirectCommands:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTDIRECT_PROPERTIES_HELPURL,NxtDrive:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTDRIVE_PROPERTIES_HELPURL,NxtLightSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTLIGHT_PROPERTIES_HELPURL,NxtSoundSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTSOUND_PROPERTIES_HELPURL,NxtTouchSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTTOUCH_PROPERTIES_HELPURL,
NxtUltrasonicSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTULTRASONIC_PROPERTIES_HELPURL,Ev3Motors:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3MOTORS_HELPURL,Ev3ColorSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3COLORSENSOR_HELPURL,Ev3GyroSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3GYROSENSOR_HELPURL,Ev3TouchSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3TOUCHSENSOR_HELPURL,Ev3UltrasonicSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3ULTRASONICSENSOR_HELPURL,Ev3UI:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3UI_HELPURL,Ev3Sound:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3SOUND_HELPURL,
Ev3Commands:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3COMMANDS_HELPURL,ActivityStarter:Blockly.Msg.LANG_COMPONENT_BLOCK_ACTIVITYSTARTER_PROPERTIES_HELPURL,BarcodeScanner:Blockly.Msg.LANG_COMPONENT_BLOCK_BARCODESCANNER_PROPERTIES_HELPURL,BluetoothClient:Blockly.Msg.LANG_COMPONENT_BLOCK_BLUETOOTHCLIENT_PROPERTIES_HELPURL,BluetoothServer:Blockly.Msg.LANG_COMPONENT_BLOCK_BLUETOOTHSERVER_PROPERTIES_HELPURL,Notifier:Blockly.Msg.LANG_COMPONENT_BLOCK_NOTIFIER_PROPERTIES_HELPURL,Serial:Blockly.Msg.LANG_COMPONENT_BLOCK_SERIAL_PROPERTIES_HELPURL,
SpeechRecognizer:Blockly.Msg.LANG_COMPONENT_BLOCK_SPEECHRECOGNIZER_PROPERTIES_HELPURL,TextToSpeech:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTTOSPEECH_PROPERTIES_HELPURL,TinyWebDB:Blockly.Msg.LANG_COMPONENT_BLOCK_TINYWEBDB_PROPERTIES_HELPURL,Web:Blockly.Msg.LANG_COMPONENT_BLOCK_WEB_PROPERTIES_HELPURL,File:Blockly.Msg.LANG_COMPONENT_BLOCK_FILE_HELPURL,FusiontablesControl:Blockly.Msg.LANG_COMPONENT_BLOCK_FUSIONTABLESCONTROL_PROPERTIES_HELPURL,Spreadsheet:Blockly.Msg.LANG_COMPONENT_BLOCK_SPREADSHEET_PROPERTIES_HELPURL,
GameClient:Blockly.Msg.LANG_COMPONENT_BLOCK_GAMECLIENT_PROPERTIES_HELPURL,SoundRecorder:Blockly.Msg.LANG_COMPONENT_BLOCK_SOUNDRECORDER_PROPERTIES_HELPURL,Voting:Blockly.Msg.LANG_COMPONENT_BLOCK_VOTING_PROPERTIES_HELPURL,WebViewer:Blockly.Msg.LANG_COMPONENT_BLOCK_WEBVIEWER_PROPERTIES_HELPURL};
Blockly.ComponentBlock.EVENTS_HELPURLS={Button:Blockly.Msg.LANG_COMPONENT_BLOCK_BUTTON_EVENTS_HELPURL,Canvas:Blockly.Msg.LANG_COMPONENT_BLOCK_CANVAS_EVENTS_HELPURL,Clock:Blockly.Msg.LANG_COMPONENT_BLOCK_CLOCK_EVENTS_HELPURL,CheckBox:Blockly.Msg.LANG_COMPONENT_BLOCK_CHECKBOX_EVENTS_HELPURL,Switch:Blockly.Msg.LANG_COMPONENT_BLOCK_SWITCH_HELPURL,Image:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGE_EVENTS_HELPURL,Label:Blockly.Msg.LANG_COMPONENT_BLOCK_LABEL_EVENTS_HELPURL,ListPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_LISTPICKER_EVENTS_HELPURL,
DatePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_DATEPICKER_HELPURL,TimePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_TIMEPICKER_HELPURL,ListView:Blockly.Msg.LANG_COMPONENT_BLOCK_LISTVIEW_HELPURL,PasswordTextBox:Blockly.Msg.LANG_COMPONENT_BLOCK_PASSWORDTEXTBOX_EVENTS_HELPURL,Screen:Blockly.Msg.LANG_COMPONENT_BLOCK_SCREEN_EVENTS_HELPURL,Slider:Blockly.Msg.LANG_COMPONENT_BLOCK_SLIDER_EVENTS_HELPURL,Spinner:Blockly.Msg.LANG_COMPONENT_BLOCK_SPINNER_HELPURL,TextBox:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTBOX_EVENTS_HELPURL,
TinyDB:Blockly.Msg.LANG_COMPONENT_BLOCK_TINYDB_EVENTS_HELPURL,Camcorder:Blockly.Msg.LANG_COMPONENT_BLOCK_CAMCORDER_EVENTS_HELPURL,Camera:Blockly.Msg.LANG_COMPONENT_BLOCK_CAMERA_EVENTS_HELPURL,ImagePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGEPICKER_EVENTS_HELPURL,Player:Blockly.Msg.LANG_COMPONENT_BLOCK_PLAYER_EVENTS_HELPURL,Sound:Blockly.Msg.LANG_COMPONENT_BLOCK_SOUND_EVENTS_HELPURL,VideoPlayer:Blockly.Msg.LANG_COMPONENT_BLOCK_VIDEOPLAYER_EVENTS_HELPURL,Ball:Blockly.Msg.LANG_COMPONENT_BLOCK_BALL_EVENTS_HELPURL,
ImageSprite:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGESPRITE_EVENTS_HELPURL,Map:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_HELPURL,Chart:Blockly.Msg.LANG_COMPONENT_BLOCK_CHART_HELPURL,ChartData2D:Blockly.Msg.LANG_COMPONENT_BLOCK_CHARTDATA2D_HELPURL,AnomalyDetection:Blockly.Msg.LANG_COMPONENT_BLOCK_ANOMALYDETECTION_HELPURL,Regression:Blockly.Msg.LANG_COMPONENT_BLOCK_REGRESSION_HELPURL,Circle:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_CIRCLE_HELPURL,FeatureCollection:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_FEATURECOLLECTION_HELPURL,
LineString:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_LINESTRING_HELPURL,Marker:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_MARKER_HELPURL,Navigation:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_NAVIGATION_HELPURL,Polygon:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_POLYGON_HELPURL,Rectangle:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_RECTANGLE_HELPURL,ContactPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_CONTACTPICKER_EVENTS_HELPURL,EmailPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_EMAILPICKER_EVENTS_HELPURL,CloudDB:Blockly.Msg.LANG_COMPONENT_BLOCK_CLOUDDB_HELPURL,
FirebaseDB:Blockly.Msg.LANG_COMPONENT_BLOCK_FIREBASE_EVENTS_HELPURL,PhoneCall:Blockly.Msg.LANG_COMPONENT_BLOCK_PHONECALL_EVENTS_HELPURL,PhoneNumberPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_PHONENUMBERPICKER_EVENTS_HELPURL,Sharing:Blockly.Msg.LANG_COMPONENT_BLOCK_SHARING_HELPURL,Texting:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTING_EVENTS_HELPURL,Twitter:Blockly.Msg.LANG_COMPONENT_BLOCK_TWITTER_EVENTS_HELPURL,AccelerometerSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_ACCELEROMETERSENSOR_EVENTS_HELPURL,Barometer:Blockly.Msg.LANG_COMPONENT_BLOCK_BAROMETER_HELPURL,
GyroscopeSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_GYROSCOPESENSOR_EVENTS_HELPURL,Hygrometer:Blockly.Msg.LANG_COMPONENT_BLOCK_HYGROMETER_HELPURL,LightSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_LIGHTSENSOR_HELPURL,LocationSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_LOCATIONSENSOR_EVENTS_HELPURL,NearField:Blockly.Msg.LANG_COMPONENT_BLOCK_NEARFIELDSENSOR_HELPURL,OrientationSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_ORIENTATIONSENSOR_EVENTS_HELPURL,Pedometer:Blockly.Msg.LANG_COMPONENT_BLOCK_PEDOMETERSENSOR_HELPURL,
ProximitySensor:Blockly.Msg.LANG_COMPONENT_BLOCK_PROXIMITYSENSOR_HELPURL,Thermometer:Blockly.Msg.LANG_COMPONENT_BLOCK_THERMOMETER_HELPURL,NxtColorSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTCOLOR_EVENTS_HELPURL,NxtLightSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTLIGHT_EVENTS_HELPURL,NxtSoundSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTSOUND_EVENTS_HELPURL,NxtTouchSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTTOUCH_EVENTS_HELPURL,NxtUltrasonicSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTULTRASONIC_EVENTS_HELPURL,
Ev3Motors:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3MOTORS_HELPURL,Ev3ColorSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3COLORSENSOR_HELPURL,Ev3GyroSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3GYROSENSOR_HELPURL,Ev3TouchSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3TOUCHSENSOR_HELPURL,Ev3UltrasonicSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3ULTRASONICSENSOR_HELPURL,Ev3UI:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3UI_HELPURL,Ev3Sound:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3SOUND_HELPURL,Ev3Commands:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3COMMANDS_HELPURL,
ActivityStarter:Blockly.Msg.LANG_COMPONENT_BLOCK_ACTIVITYSTARTER_EVENTS_HELPURL,BarcodeScanner:Blockly.Msg.LANG_COMPONENT_BLOCK_BARCODESCANNER_EVENTS_HELPURL,BluetoothClient:Blockly.Msg.LANG_COMPONENT_BLOCK_BLUETOOTHCLIENT_EVENTS_HELPURL,BluetoothServer:Blockly.Msg.LANG_COMPONENT_BLOCK_BLUETOOTHSERVER_EVENTS_HELPURL,Notifier:Blockly.Msg.LANG_COMPONENT_BLOCK_NOTIFIER_EVENTS_HELPURL,Serial:Blockly.Msg.LANG_COMPONENT_BLOCK_SERIAL_EVENTS_HELPURL,SpeechRecognizer:Blockly.Msg.LANG_COMPONENT_BLOCK_SPEECHRECOGNIZER_EVENTS_HELPURL,
TextToSpeech:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTTOSPEECH_EVENTS_HELPURL,TinyWebDB:Blockly.Msg.LANG_COMPONENT_BLOCK_TINYWEBDB_EVENTS_HELPURL,Web:Blockly.Msg.LANG_COMPONENT_BLOCK_WEB_EVENTS_HELPURL,File:Blockly.Msg.LANG_COMPONENT_BLOCK_FILE_HELPURL,FusiontablesControl:Blockly.Msg.LANG_COMPONENT_BLOCK_FUSIONTABLESCONTROL_EVENTS_HELPURL,Spreadsheet:Blockly.Msg.LANG_COMPONENT_BLOCK_SPREADSHEET_EVENTS_HELPURL,GameClient:Blockly.Msg.LANG_COMPONENT_BLOCK_GAMECLIENT_EVENTS_HELPURL,SoundRecorder:Blockly.Msg.LANG_COMPONENT_BLOCK_SOUNDRECORDER_EVENTS_HELPURL,
Voting:Blockly.Msg.LANG_COMPONENT_BLOCK_VOTING_EVENTS_HELPURL,WebViewer:Blockly.Msg.LANG_COMPONENT_BLOCK_WEBVIEWER_EVENTS_HELPURL};
Blockly.ComponentBlock.METHODS_HELPURLS={Canvas:Blockly.Msg.LANG_COMPONENT_BLOCK_CANVAS_METHODS_HELPURL,Clock:Blockly.Msg.LANG_COMPONENT_BLOCK_CLOCK_METHODS_HELPURL,Image:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGE_METHODS_HELPURL,Label:Blockly.Msg.LANG_COMPONENT_BLOCK_LABEL_METHODS_HELPURL,ListPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_LISTPICKER_METHODS_HELPURL,DatePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_DATEPICKER_HELPURL,TimePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_TIMEPICKER_HELPURL,ListView:Blockly.Msg.LANG_COMPONENT_BLOCK_LISTVIEW_HELPURL,
PasswordTextBox:Blockly.Msg.LANG_COMPONENT_BLOCK_PASSWORDTEXTBOX_METHODS_HELPURL,Screen:Blockly.Msg.LANG_COMPONENT_BLOCK_SCREEN_METHODS_HELPURL,Slider:Blockly.Msg.LANG_COMPONENT_BLOCK_SLIDER_METHODS_HELPURL,Spinner:Blockly.Msg.LANG_COMPONENT_BLOCK_SPINNER_HELPURL,TextBox:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTBOX_METHODS_HELPURL,TinyDB:Blockly.Msg.LANG_COMPONENT_BLOCK_TINYDB_METHODS_HELPURL,Camcorder:Blockly.Msg.LANG_COMPONENT_BLOCK_CAMCORDER_METHODS_HELPURL,Camera:Blockly.Msg.LANG_COMPONENT_BLOCK_CAMERA_METHODS_HELPURL,
ImagePicker:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGEPICKER_METHODS_HELPURL,Player:Blockly.Msg.LANG_COMPONENT_BLOCK_PLAYER_METHODS_HELPURL,Sound:Blockly.Msg.LANG_COMPONENT_BLOCK_SOUND_METHODS_HELPURL,VideoPlayer:Blockly.Msg.LANG_COMPONENT_BLOCK_VIDEOPLAYER_METHODS_HELPURL,Ball:Blockly.Msg.LANG_COMPONENT_BLOCK_BALL_METHODS_HELPURL,ImageSprite:Blockly.Msg.LANG_COMPONENT_BLOCK_IMAGESPRITE_METHODS_HELPURL,Map:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_HELPURL,Chart:Blockly.Msg.LANG_COMPONENT_BLOCK_CHART_HELPURL,
ChartData2D:Blockly.Msg.LANG_COMPONENT_BLOCK_CHARTDATA2D_HELPURL,AnomalyDetection:Blockly.Msg.LANG_COMPONENT_BLOCK_ANOMALYDETECTION_HELPURL,Regression:Blockly.Msg.LANG_COMPONENT_BLOCK_REGRESSION_HELPURL,Circle:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_CIRCLE_HELPURL,FeatureCollection:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_FEATURECOLLECTION_HELPURL,LineString:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_LINESTRING_HELPURL,Marker:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_MARKER_HELPURL,Navigation:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_NAVIGATION_HELPURL,
Polygon:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_POLYGON_HELPURL,Rectangle:Blockly.Msg.LANG_COMPONENT_BLOCK_MAPS_RECTANGLE_HELPURL,ContactPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_CONTACTPICKER_METHODS_HELPURL,EmailPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_EMAILPICKER_METHODS_HELPURL,CloudDB:Blockly.Msg.LANG_COMPONENT_BLOCK_CLOUDDB_HELPURL,FirebaseDB:Blockly.Msg.LANG_COMPONENT_BLOCK_FIREBASE_METHODS_HELPURL,PhoneCall:Blockly.Msg.LANG_COMPONENT_BLOCK_PHONECALL_METHODS_HELPURL,PhoneNumberPicker:Blockly.Msg.LANG_COMPONENT_BLOCK_PHONENUMBERPICKER_METHODS_HELPURL,
Sharing:Blockly.Msg.LANG_COMPONENT_BLOCK_SHARING_HELPURL,Texting:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTING_METHODS_HELPURL,Twitter:Blockly.Msg.LANG_COMPONENT_BLOCK_TWITTER_METHODS_HELPURL,AccelerometerSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_ACCELEROMETERSENSOR_METHODS_HELPURL,Barometer:Blockly.Msg.LANG_COMPONENT_BLOCK_BAROMETER_HELPURL,GyroscopeSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_GYROSCOPESENSOR_METHODS_HELPURL,Hygrometer:Blockly.Msg.LANG_COMPONENT_BLOCK_HYGROMETER_HELPURL,LightSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_LIGHTSENSOR_HELPURL,
LocationSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_LOCATIONSENSOR_METHODS_HELPURL,NearField:Blockly.Msg.LANG_COMPONENT_BLOCK_NEARFIELDSENSOR_HELPURL,OrientationSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_ORIENTATIONSENSOR_METHODS_HELPURL,Pedometer:Blockly.Msg.LANG_COMPONENT_BLOCK_PEDOMETERSENSOR_HELPURL,ProximitySensor:Blockly.Msg.LANG_COMPONENT_BLOCK_PROXIMITYSENSOR_HELPURL,Thermometer:Blockly.Msg.LANG_COMPONENT_BLOCK_THERMOMETER_HELPURL,NxtColorSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTCOLOR_METHODS_HELPURL,
NxtDirectCommands:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTDIRECT_METHODS_HELPURL,NxtDrive:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTDRIVE_METHODS_HELPURL,NxtLightSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTLIGHT_METHODS_HELPURL,NxtSoundSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTSOUND_METHODS_HELPURL,NxtTouchSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTTOUCH_METHODS_HELPURL,NxtUltrasonicSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_NXTULTRASONIC_METHODS_HELPURL,Ev3Motors:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3MOTORS_HELPURL,
Ev3ColorSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3COLORSENSOR_HELPURL,Ev3GyroSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3GYROSENSOR_HELPURL,Ev3TouchSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3TOUCHSENSOR_HELPURL,Ev3UltrasonicSensor:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3ULTRASONICSENSOR_HELPURL,Ev3UI:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3UI_HELPURL,Ev3Sound:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3SOUND_HELPURL,Ev3Commands:Blockly.Msg.LANG_COMPONENT_BLOCK_EV3COMMANDS_HELPURL,ActivityStarter:Blockly.Msg.LANG_COMPONENT_BLOCK_ACTIVITYSTARTER_METHODS_HELPURL,
BarcodeScanner:Blockly.Msg.LANG_COMPONENT_BLOCK_BARCODESCANNER_METHODS_HELPURL,BluetoothClient:Blockly.Msg.LANG_COMPONENT_BLOCK_BLUETOOTHCLIENT_METHODS_HELPURL,BluetoothServer:Blockly.Msg.LANG_COMPONENT_BLOCK_BLUETOOTHSERVER_METHODS_HELPURL,Notifier:Blockly.Msg.LANG_COMPONENT_BLOCK_NOTIFIER_METHODS_HELPURL,Serial:Blockly.Msg.LANG_COMPONENT_BLOCK_SERIAL_METHODS_HELPURL,SpeechRecognizer:Blockly.Msg.LANG_COMPONENT_BLOCK_SPEECHRECOGNIZER_METHODS_HELPURL,TextToSpeech:Blockly.Msg.LANG_COMPONENT_BLOCK_TEXTTOSPEECH_METHODS_HELPURL,
TinyWebDB:Blockly.Msg.LANG_COMPONENT_BLOCK_TINYWEBDB_METHODS_HELPURL,Web:Blockly.Msg.LANG_COMPONENT_BLOCK_WEB_METHODS_HELPURL,File:Blockly.Msg.LANG_COMPONENT_BLOCK_FILE_HELPURL,FusiontablesControl:Blockly.Msg.LANG_COMPONENT_BLOCK_FUSIONTABLESCONTROL_METHODS_HELPURL,Spreadsheet:Blockly.Msg.LANG_COMPONENT_BLOCK_SPREADSHEET_METHODS_HELPURL,GameClient:Blockly.Msg.LANG_COMPONENT_BLOCK_GAMECLIENT_METHODS_HELPURL,SoundRecorder:Blockly.Msg.LANG_COMPONENT_BLOCK_SOUNDRECORDER_METHODS_HELPURL,Voting:Blockly.Msg.LANG_COMPONENT_BLOCK_VOTING_METHODS_HELPURL,
WebViewer:Blockly.Msg.LANG_COMPONENT_BLOCK_WEBVIEWER_METHODS_HELPURL};AI.Blockly.Mixins={};
AI.Blockly.Mixins.DynamicConnections={findInputIndexForConnection:function(a){if(!a.targetConnection||a.targetBlock().isInsertionMarker())return null;for(var d=-1,f=0,h;h=this.inputList[f];f++)if(h.connection==a){d=f;break}if(d==this.inputList.length-1)return this.inputList.length;a=this.inputList[d+1];return(a=a.connection&&a.connection.targetConnection)&&!a.getSourceBlock().isInsertionMarker()?d+1:null},onPendingConnection:function(a){a=this.findInputIndexForConnection(a);if(null!==a){this.tempinput||
(this.tempinput=this.appendValueInput("TEMPINSERT"),this.tempinput.init());var d=this.inputList.indexOf(this.tempinput);0===a?this.tempinput.fields[0]=this.inputList[0].fields.splice(0,1)[0]:0===d&&(this.inputList[0].fields[0]=this.tempinput.fields.splice(0,1)[0]);d!==a&&this.moveNumberedInputBefore(d,a)}},finalizeConnections:function(){if(this.tempinput){if(this.tempinput.connection.targetConnection){var a=this.repeatingInputName;this.inputList.forEach(function(f,h){f.name=a+h})}else this.tempinput&&
this.removeInput("TEMPINSERT");this.tempinput=void 0;for(var d=this.inputList.length-1;0<=d;d--)this.inputList[d].connection.targetConnection||this.inputList.splice(d,1);this.itemCount_=this.inputList.length}}};AI.Blockly.Mixins.LexicalVariableMethods={getDeclaredVarFieldNames:function(){return this.getDeclaredVarFieldNamesAndPrefixes().map(([a])=>a)},referenceResults:function(a,d,f){const h=this;var l=h.getDeclaredVarFieldNamesAndPrefixes().map(([p,q])=>Blockly.usePrefixInYail?(p=h.getFieldValue(p),Blockly.possiblyPrefixMenuNameWith(q)(p)):h.getFieldValue(p));const m=f.concat(l);l=h.inputList.map(p=>Blockly.LexicalVariable.referenceResult(h.getInputTargetBlock(p.name),a,d,p.name===h.getScopedInputName()?
m:f));h.nextConnection&&l.push(Blockly.LexicalVariable.referenceResult(h.getNextBlock(),a,d,f));return l},withLexicalVarsAndPrefix:function(a,d){const f=this;a&&f.getInputTargetBlock(f.getScopedInputName())===a&&f.getDeclaredVarFieldNamesAndPrefixes().forEach(([h])=>{h=f.getFieldValue(h);d(h,f.prefix)})},getVars:function(){const a=this;return a.getDeclaredVarFieldNames().map(d=>a.getFieldValue(d))},blocksInScope:function(){const a=this.getInputTargetBlock(this.getScopedInputName());return a&&[a]||
[]},declaredNames:function(){return this.getVars()},renameVar:function(a,d){const f=this;f.getDeclaredVarFieldNames().forEach(h=>{Blockly.Names.equals(a,f.getFieldValue(h))&&f.setFieldValue(d,h)})},renameBound:function(a,d){const f=this;let h=d;f.inputList.forEach(l=>{l.name===f.getScopedInputName()?(f.getDeclaredVarFieldNames().forEach(m=>{m=f.getFieldValue(m);const p=a.apply(m);p!==m?(f.renameVar(m,p),m=Blockly.Substitution.simpleSubstitution(m,p),h=d.extend(m)):h=d.remove([m])}),Blockly.LexicalVariable.renameFree(f.getInputTargetBlock(f.getScopedInputName()),
h)):Blockly.LexicalVariable.renameFree(f.getInputTargetBlock(l.name),d)});if(f.nextConnection){const l=f.nextConnection.targetBlock();Blockly.LexicalVariable.renameFree(l,d)}},renameFree:function(a){const d=this,f=Blockly.LexicalVariable.freeVariables(d.getInputTargetBlock(d.getScopedInputName())),h=new Blockly.Substitution;d.getDeclaredVarFieldNames().forEach(l=>{l=d.getFieldValue(l);f.deleteName(l);var m=f.renamed(a);m.isMember(l)&&(m=Blockly.FieldLexicalVariable.nameNotIn(l,m.toList()),l=Blockly.Substitution.simpleSubstitution(l,
m),h.extend(l))});d.renameBound(h,a)},freeVariables:function(){const a=this,d=Blockly.LexicalVariable.freeVariables(a.getInputTargetBlock(a.getScopedInputName()));a.getDeclaredVarFieldNames().forEach(h=>{d.deleteName(a.getFieldValue(h))});a.inputList.forEach(h=>{h.name!==a.getScopedInputName()&&d.unite(Blockly.LexicalVariable.freeVariables(a.getInputTargetBlock(h.name)))});if(a.nextConnection){var f=a.nextConnection.targetBlock();d.unite(Blockly.LexicalVariable.freeVariables(f))}return d}};AI.Blockly.Mixins.extend=function(a,d){for(var f in d)a[f]=d[f]};AI.Blocks.control={};
Blockly.Blocks.controls_if={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_IF_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendValueInput("IF0").setCheck(AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_CONTROLS_IF_MSG_IF);this.appendStatementInput("DO0").appendField(Blockly.Msg.LANG_CONTROLS_IF_MSG_THEN);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setMutator(new Blockly.icons.MutatorIcon(["controls_if_elseif","controls_if_else"],
this));var a=this;this.setTooltip(function(){if(a.elseifCount_||a.elseCount_){if(!a.elseifCount_&&a.elseCount_)return Blockly.Msg.LANG_CONTROLS_IF_TOOLTIP_2;if(a.elseifCount_&&!a.elseCount_)return Blockly.Msg.LANG_CONTROLS_IF_TOOLTIP_3;if(a.elseifCount_&&a.elseCount_)return Blockly.Msg.LANG_CONTROLS_IF_TOOLTIP_4}else return Blockly.Msg.LANG_CONTROLS_IF_TOOLTIP_1;return""});this.elseCount_=this.elseifCount_=0;this.warnings=[{name:"checkEmptySockets",sockets:[{baseName:"IF"},{baseName:"DO"}]}]},mutationToDom:function(){if(!this.elseifCount_&&
!this.elseCount_)return null;var a=document.createElement("mutation");this.elseifCount_&&a.setAttribute("elseif",this.elseifCount_);this.elseCount_&&a.setAttribute("else",1);return a},domToMutation:function(a){this.elseifCount_=parseInt(a.getAttribute("elseif"),10)||0;this.elseCount_=window.parseInt(a.getAttribute("else"),10)||0;this.rebuildShape_()},decompose:function(a){var d=a.newBlock("controls_if_if");d.initSvg();for(var f=d.getInput("STACK").connection,h=1;h<=this.elseifCount_;h++){var l=a.newBlock("controls_if_elseif");
l.initSvg();f.connect(l.previousConnection);f=l.nextConnection}this.elseCount_&&(a=a.newBlock("controls_if_else"),a.initSvg(),f.connect(a.previousConnection));return d},compose:function(a){a=a.getInputTargetBlock("STACK");this.elseCount_=this.elseifCount_=0;for(var d=[null],f=[null],h=null;a;){switch(a.type){case "controls_if_elseif":this.elseifCount_++;d.push(a.valueConnection_);f.push(a.statementConnection_);break;case "controls_if_else":this.elseCount_++;h=a.statementConnection_;break;default:throw"Unknown block type.";
}a=a.nextConnection&&a.nextConnection.targetBlock()}this.rebuildShape_();this.reconnectChildBlocks_(d,f,h)},saveConnections:function(a){for(var d=a.getInput("STACK").connection.targetBlock(),f=1;d;){switch(d.type){case "controls_if_elseif":var h=this.getInput("IF"+f);a=this.getInput("DO"+f);d.valueConnection_=h&&h.connection.targetConnection;d.statementConnection_=a&&a.connection.targetConnection;f++;break;case "controls_if_else":a=this.getInput("ELSE");d.statementConnection_=a&&a.connection.targetConnection;
break;default:throw"Unknown block type.";}d=d.nextConnection&&d.nextConnection.targetBlock()}},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_IF_IF_TITLE_IF}],rebuildShape_:function(){console.log("rebuidShape");var a=[null],d=[null],f=null;this.getInput("ELSE")&&(f=this.getInput("ELSE").connection.targetConnection);for(var h=1;this.getInput("IF"+h);h++){var l=this.getInput("IF"+h),m=this.getInput("DO"+h);a.push(l.connection.targetConnection);d.push(m.connection.targetConnection)}this.updateShape_();
this.reconnectChildBlocks_(a,d,f)},reconnectChildBlocks_:function(a,d,f){for(let h=1;h<=this.elseifCount_;h++)a[h]&&a[h].reconnect(this,"IF"+h),d[h]&&d[h].reconnect(this,"DO"+h);f&&f.reconnect(this,"ELSE")},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var a=1;this.getInput("IF"+a);)this.removeInput("IF"+a),this.removeInput("DO"+a),a++;for(a=1;a<=this.elseifCount_;a++)this.appendValueInput("IF"+a).setCheck(AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_CONTROLS_IF_MSG_ELSEIF),
this.appendStatementInput("DO"+a).appendField(Blockly.Msg.LANG_CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE)}};Blockly.Blocks.controls_if_if={init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_CONTROLS_IF_IF_TITLE_IF);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.LANG_CONTROLS_IF_IF_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_if_elseif={init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_CONTROLS_IF_ELSEIF_TITLE_ELSEIF);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_IF_ELSEIF_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_if_else={init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_CONTROLS_IF_ELSE_TITLE_ELSE);this.setPreviousStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_IF_ELSE_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_forRange={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_FORRANGE_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendValueInput("START").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_CONTROLS_FORRANGE_INPUT_ITEM).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_CONTROLS_FORRANGE_INPUT_VAR,!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR").appendField(Blockly.Msg.LANG_CONTROLS_FORRANGE_INPUT_START).setAlign(Blockly.inputs.Align.RIGHT);
this.appendValueInput("END").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_CONTROLS_FORRANGE_INPUT_END).setAlign(Blockly.inputs.Align.RIGHT);this.appendValueInput("STEP").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_CONTROLS_FORRANGE_INPUT_STEP).setAlign(Blockly.inputs.Align.RIGHT);this.appendStatementInput("DO").appendField(Blockly.Msg.LANG_CONTROLS_FORRANGE_INPUT_DO).setAlign(Blockly.inputs.Align.RIGHT);
this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_FORRANGE_TOOLTIP);this.lexicalVarPrefix=Blockly.localNamePrefix},referenceResults:function(a,d,f){var h=this.getFieldValue("VAR");Blockly.usePrefixInCode&&(h=Blockly.possiblyPrefixMenuNameWith(Blockly.loopRangeParameterPrefix)(h));var l=f.concat([h]);h=Blockly.LexicalVariable.referenceResult(this.getInputTargetBlock("START"),a,d,f);const m=Blockly.LexicalVariable.referenceResult(this.getInputTargetBlock("END"),
a,d,f),p=Blockly.LexicalVariable.referenceResult(this.getInputTargetBlock("STEP"),a,d,f);l=Blockly.LexicalVariable.referenceResult(this.getInputTargetBlock("DO"),a,d,l);a=Blockly.LexicalVariable.referenceResult(Blockly.LexicalVariable.getNextTargetBlock(this),a,d,f);return[h,m,p,l,a]},withLexicalVarsAndPrefix:function(a,d){this.getInputTargetBlock("DO")==a&&(a=this.getFieldValue("VAR"),d(a,this.lexicalVarPrefix))},getVars:function(){return[this.getFieldValue("VAR")]},blocksInScope:function(){var a=
this.getInputTargetBlock("DO");return a?[a]:[]},declaredNames:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,d){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(d,"VAR")},renameBound:function(a,d){Blockly.LexicalVariable.renameFree(this.getInputTargetBlock("START"),d);Blockly.LexicalVariable.renameFree(this.getInputTargetBlock("END"),d);Blockly.LexicalVariable.renameFree(this.getInputTargetBlock("STEP"),d);var f=this.getFieldValue("VAR");a=a.apply(f);a!==f?
(this.renameVar(f,a),f=Blockly.Substitution.simpleSubstitution(f,a),f=d.extend(f),Blockly.LexicalVariable.renameFree(this.getInputTargetBlock("DO"),f)):(f=d.remove([f]),Blockly.LexicalVariable.renameFree(this.getInputTargetBlock("DO"),f));this.nextConnection&&(f=this.nextConnection.targetBlock(),Blockly.LexicalVariable.renameFree(f,d))},renameFree:function(a){var d=this.getFieldValue("VAR"),f=Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock("DO"));f.deleteName(d);f=f.renamed(a);f.isMember(d)?
(f=Blockly.FieldLexicalVariable.nameNotIn(d,f.toList()),d=Blockly.Substitution.simpleSubstitution(d,f),this.renameBound(d,a)):this.renameBound(new Blockly.Substitution,a)},freeVariables:function(){var a=Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock("DO"));a.deleteName(this.getFieldValue("VAR"));a.unite(Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock("START")));a.unite(Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock("END")));a.unite(Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock("STEP")));
if(this.nextConnection){var d=this.nextConnection.targetBlock();a.unite(Blockly.LexicalVariable.freeVariables(d))}return a},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_FOREACH_NUMBER_TYPEBLOCK}]};
Blockly.Blocks.controls_forEach={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_FOREACH_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_CONTROLS_FOREACH_INPUT_ITEM).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_CONTROLS_FOREACH_INPUT_VAR,!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR").appendField(Blockly.Msg.LANG_CONTROLS_FOREACH_INPUT_INLIST).setAlign(Blockly.inputs.Align.RIGHT);
this.appendStatementInput("DO").appendField(Blockly.Msg.LANG_CONTROLS_FOREACH_INPUT_DO);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_FOREACH_TOOLTIP)},referenceResults:function(a,d,f){var h=this.getFieldValue("VAR");Blockly.usePrefixInCode&&(h=Blockly.possiblyPrefixMenuNameWith(Blockly.loopParameterPrefix)(h));var l=f.concat([h]);h=Blockly.LexicalVariable.referenceResult(this.getInputTargetBlock("LIST"),a,d,f);l=Blockly.LexicalVariable.referenceResult(this.getInputTargetBlock("DO"),
a,d,l);a=Blockly.LexicalVariable.referenceResult(Blockly.LexicalVariable.getNextTargetBlock(this),a,d,f);return[h,l,a]},withLexicalVarsAndPrefix:Blockly.Blocks.controls_forRange.withLexicalVarsAndPrefix,getVars:function(){return[this.getFieldValue("VAR")]},blocksInScope:function(){var a=this.getInputTargetBlock("DO");return a?[a]:[]},declaredNames:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,d){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(d,"VAR")},renameBound:function(a,
d){Blockly.LexicalVariable.renameFree(this.getInputTargetBlock("LIST"),d);var f=this.getFieldValue("VAR");a=a.apply(f);a!==f?(this.renameVar(f,a),f=Blockly.Substitution.simpleSubstitution(f,a),f=d.extend(f),Blockly.LexicalVariable.renameFree(this.getInputTargetBlock("DO"),f)):(f=d.remove([f]),Blockly.LexicalVariable.renameFree(this.getInputTargetBlock("DO"),f));this.nextConnection&&(f=this.nextConnection.targetBlock(),Blockly.LexicalVariable.renameFree(f,d))},renameFree:function(a){var d=this.getFieldValue("VAR"),
f=Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock("DO"));f.deleteName(d);f=f.renamed(a);f.isMember(d)?(f=Blockly.FieldLexicalVariable.nameNotIn(d,f.toList()),d=Blockly.Substitution.simpleSubstitution(d,f),this.renameBound(d,a)):this.renameBound(new Blockly.Substitution,a)},freeVariables:function(){var a=Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock("DO"));a.deleteName(this.getFieldValue("VAR"));a.unite(Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock("LIST")));
if(this.nextConnection){var d=this.nextConnection.targetBlock();a.unite(Blockly.LexicalVariable.freeVariables(d))}return a},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_FOREACH_ITEM_TYPEBLOCK}]};
Blockly.Blocks.controls_for_each_dict={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_FOREACH_DICT_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT),d=new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT_KEY,!0,Blockly.FieldFlydown.DISPLAY_BELOW),f=new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT_VALUE,!0,Blockly.FieldFlydown.DISPLAY_BELOW);this.interpolateMsg(Blockly.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT,
["KEY",d],["VALUE",f],["DICT",a,Blockly.inputs.Align.LEFT],Blockly.inputs.Align.LEFT);this.appendStatementInput("DO").appendField(Blockly.Msg.LANG_CONTROLS_FOREACH_DICT_INPUT_DO);this.setInputsInline(!1);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_FOREACH_DICT_TOOLTIP);this.lexicalVarPrefix=Blockly.localNamePrefix},getDeclaredVarFieldNamesAndPrefixes:function(){return[["KEY","key"],["VALUE","value"]]},getScopedInputName:function(){return"DO"},
typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_FOREACH_DICT_TITLE}]};AI.Blockly.Mixins.extend(Blockly.Blocks.controls_for_each_dict,AI.Blockly.Mixins.LexicalVariableMethods);
Blockly.Blocks.controls_while={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_WHILE_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendValueInput("TEST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_CONTROLS_WHILE_TITLE).appendField(Blockly.Msg.LANG_CONTROLS_WHILE_INPUT_TEST).setAlign(Blockly.inputs.Align.RIGHT);this.appendStatementInput("DO").appendField(Blockly.Msg.LANG_CONTROLS_WHILE_INPUT_DO).setAlign(Blockly.inputs.Align.RIGHT);
this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_WHILE_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_WHILE_TITLE}]};
Blockly.Blocks.controls_choose={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_CHOOSE_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.setOutput(!0,null);this.appendValueInput("TEST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_CONTROLS_CHOOSE_TITLE).appendField(Blockly.Msg.LANG_CONTROLS_CHOOSE_INPUT_TEST).setAlign(Blockly.inputs.Align.RIGHT);this.appendValueInput("THENRETURN").appendField(Blockly.Msg.LANG_CONTROLS_CHOOSE_INPUT_THEN_RETURN).setAlign(Blockly.inputs.Align.RIGHT);
this.appendValueInput("ELSERETURN").appendField(Blockly.Msg.LANG_CONTROLS_CHOOSE_INPUT_ELSE_RETURN).setAlign(Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_CONTROLS_CHOOSE_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_CHOOSE_TITLE+" "+Blockly.Msg.LANG_CONTROLS_CHOOSE_INPUT_THEN_RETURN+" "+Blockly.Msg.LANG_CONTROLS_CHOOSE_INPUT_ELSE_RETURN}]};
Blockly.Blocks.controls_do_then_return={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_DO_THEN_RETURN_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendStatementInput("STM").appendField(Blockly.Msg.LANG_CONTROLS_DO_THEN_RETURN_INPUT_DO);this.appendValueInput("VALUE").appendField(Blockly.Msg.LANG_CONTROLS_DO_THEN_RETURN_INPUT_RETURN).setAlign(Blockly.inputs.Align.RIGHT);this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_CONTROLS_DO_THEN_RETURN_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_DO_THEN_RETURN_TITLE}]};
Blockly.Blocks.controls_eval_but_ignore={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_EVAL_BUT_IGNORE_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendValueInput("VALUE").appendField(Blockly.Msg.LANG_CONTROLS_EVAL_BUT_IGNORE_TITLE);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_EVAL_BUT_IGNORE_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_EVAL_BUT_IGNORE_TITLE}]};
Blockly.Blocks.controls_openAnotherScreen={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendValueInput("SCREEN").appendField(Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_TITLE).appendField(Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_INPUT_SCREENNAME).setAlign(Blockly.inputs.Align.RIGHT).setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT));this.setPreviousStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_TITLE}]};
Blockly.Blocks.controls_openAnotherScreenWithStartValue={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_WITH_START_VALUE_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendValueInput("SCREENNAME").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_WITH_START_VALUE_TITLE).appendField(Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_WITH_START_VALUE_INPUT_SCREENNAME).setAlign(Blockly.inputs.Align.RIGHT);this.appendValueInput("STARTVALUE").appendField(Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_WITH_START_VALUE_INPUT_STARTVALUE).setAlign(Blockly.inputs.Align.RIGHT);
this.setPreviousStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_WITH_START_VALUE_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_OPEN_ANOTHER_SCREEN_WITH_START_VALUE_TITLE}]};
Blockly.Blocks.controls_getStartValue={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_GET_START_VALUE_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.setOutput(!0,null);this.appendDummyInput().appendField(Blockly.Msg.LANG_CONTROLS_GET_START_VALUE_TITLE);this.setTooltip(Blockly.Msg.LANG_CONTROLS_GET_START_VALUE_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_GET_START_VALUE_TITLE}]};
Blockly.Blocks.controls_closeScreen={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_TITLE);this.setPreviousStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_TITLE}]};
Blockly.Blocks.controls_closeScreenWithValue={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_WITH_VALUE_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendValueInput("SCREEN").appendField(Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_WITH_VALUE_TITLE).appendField(Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_WITH_VALUE_INPUT_RESULT).setAlign(Blockly.inputs.Align.RIGHT);this.setPreviousStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_WITH_VALUE_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_WITH_VALUE_TITLE}]};Blockly.Blocks.controls_closeApplication={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_CLOSE_APPLICATION_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_CONTROLS_CLOSE_APPLICATION_TITLE);this.setPreviousStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_CLOSE_APPLICATION_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_CLOSE_APPLICATION_TITLE}]};
Blockly.Blocks.controls_getPlainStartText={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_GET_PLAIN_START_TEXT_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));this.appendDummyInput().appendField(Blockly.Msg.LANG_CONTROLS_GET_PLAIN_START_TEXT_TITLE);this.setTooltip(Blockly.Msg.LANG_CONTROLS_GET_PLAIN_START_TEXT_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_GET_PLAIN_START_TEXT_TITLE}]};
Blockly.Blocks.controls_closeScreenWithPlainText={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_WITH_PLAIN_TEXT_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendValueInput("TEXT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_WITH_PLAIN_TEXT_TITLE).appendField(Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_WITH_PLAIN_TEXT_INPUT_TEXT).setAlign(Blockly.inputs.Align.RIGHT);this.setPreviousStatement(!0);
this.setTooltip(Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_WITH_PLAIN_TEXT_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_CLOSE_SCREEN_WITH_PLAIN_TEXT_TITLE}]};
Blockly.Blocks.controls_break={category:"Control",helpUrl:Blockly.Msg.LANG_CONTROLS_BREAK_HELPURL,init:function(){this.setColour(Blockly.CONTROL_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_CONTROLS_BREAK_TITLE);this.setPreviousStatement(!0);this.setTooltip(Blockly.Msg.LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK);this.errors=[{name:"checkIsNotInLoop"}]},typeblock:[{translatedName:Blockly.Msg.LANG_CONTROLS_BREAK_TITLE}]};/*

 @fileoverview Dictionaries blocks for Blockly, modified for MIT App Inventor.
 @author data1013@mit.edu (Danny Tang)
*/
AI.Blocks.dictionaries={};
Blockly.Blocks.dictionaries_create_with={category:"Dictionaries",helpUrl:function(){return 0<this.itemCount_?Blockly.Msg.LANG_DICTIONARIES_CREATE_WITH_EMPTY_HELPURL:Blockly.Msg.LANG_DICTIONARIES_MAKE_DICTIONARY_HELPURL},init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.appendValueInput("ADD0").appendField(Blockly.Msg.LANG_DICTIONARIES_MAKE_DICTIONARY_TITLE).setCheck(AI.BlockUtils.YailTypeToBlocklyType("pair",AI.BlockUtils.INPUT));this.appendValueInput("ADD1").setCheck(AI.BlockUtils.YailTypeToBlocklyType("pair",AI.BlockUtils.INPUT));
this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.OUTPUT));this.setMutator(new Blockly.icons.MutatorIcon(["dictionaries_mutator_pair"],this));this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_MAKE_DICTIONARY_TOOLTIP);this.itemCount_=2;this.emptyInputName="EMPTY";this.repeatingInputName="ADD"},mutationToDom:Blockly.mutationToDom,domToMutation:Blockly.domToMutation,decompose:function(a){return Blockly.decompose(a,"dictionaries_mutator_pair",this)},compose:function(a){for(var d=
{},f=0;f<this.itemCount_;f++){var h=this.getInputTargetBlock(this.repeatingInputName+f);h&&(d[h.id]=h)}if(0===this.itemCount_)null!=this.emptyInputName&&this.removeInput(this.emptyInputName);else for(f=this.itemCount_-1;0<=f;f--)this.removeInput(this.repeatingInputName+f);this.itemCount_=0;for(a=a.getInputTargetBlock("STACK");a;)f=this.addInput(this.itemCount_),a.valueConnection_&&a.valueConnection_.getSourceBlock()&&null!=a.valueConnection_.getSourceBlock().workspace?(f.connection.connect(a.valueConnection_),
delete d[a.valueConnection_.sourceBlock_.id]):Blockly.Events.isEnabled()&&(h=Blockly.common.getMainWorkspace().newBlock("pair"),h.initSvg(),h.queueRender(),f.connection.connect(h.outputConnection)),this.itemCount_++,a=a.nextConnection&&a.nextConnection.targetBlock();0===this.itemCount_&&this.addEmptyInput();for(var l in d)d.hasOwnProperty(l)&&(a=d[l],a.getInputTargetBlock("KEY")||a.getInputTargetBlock("VALUE")||a.dispose(!1,!1))},saveConnections:Blockly.saveConnections,addEmptyInput:function(){this.appendDummyInput(this.emptyInputName).appendField(Blockly.Msg.LANG_DICTIONARIES_CREATE_EMPTY_TITLE)},
addInput:function(a){var d=this.appendValueInput(this.repeatingInputName+a).setCheck(AI.BlockUtils.YailTypeToBlocklyType("pair",AI.BlockUtils.INPUT));0===a&&d.appendField(Blockly.Msg.LANG_DICTIONARIES_MAKE_DICTIONARY_TITLE);return d},updateContainerBlock:function(a){a.setFieldValue(Blockly.Msg.LANG_DICTIONARIES_CREATE_WITH_CONTAINER_TITLE_ADD,"CONTAINER_TEXT");a.setTooltip(Blockly.Msg.LANG_DICTIONARIES_CREATE_WITH_CONTAINER_TOOLTIP)},toString:function(a,d){var f="{",h=!0;d=d||"?";a&&0!==a||(h=!1);
for(var l="",m=0,p;(p=this.getInput("ADD"+m))&&(!h||f.length<a);m++){var q=p.connection.targetBlock();q&&(p=q.getInput("KEY").connection.targetBlock(),q=q.getInput("VALUE").connection.targetBlock(),p||q)&&(f+=l,f+=p?p.toString(a,d):d,f+=":",f+=q?q.toString(a,d):d,l=",")}h&&f.length>=a&&(f=f.substring(0,a-2),f+="â€¦");return f+"}"},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_MAKE_DICTIONARY_TITLE,mutatorAttributes:{items:2}},{translatedName:Blockly.Msg.LANG_DICTIONARIES_CREATE_EMPTY_TITLE,
mutatorAttributes:{items:0}}]};Blockly.Blocks.dictionaries_mutator_pair={init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_DICTIONARIES_PAIR_TITLE);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_PAIR_TOOLTIP)},contextMenu:!1};
Blockly.Blocks.pair={category:"Dictionaries",helpUrl:Blockly.Msg.LANG_DICTIONARIES_PAIR_HELPURL,init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("pair",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("key",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_PAIR_INPUT,["KEY",d,Blockly.inputs.Align.RIGHT],["VALUE",a,Blockly.inputs.Align.RIGHT],
Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_PAIR_TOOLTIP);this.setInputsInline(!0)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_MAKE_PAIR_TITLE}]};
Blockly.Blocks.dictionaries_lookup={category:"Dictionaries",helpUrl:Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_LOOKUP_HELPURL,init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.INPUT),f=AI.BlockUtils.YailTypeToBlocklyType("key",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_LOOKUP_INPUT,
["KEY",f,Blockly.inputs.Align.RIGHT],["DICT",a,Blockly.inputs.Align.RIGHT],["NOTFOUND",d,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_LOOKUP_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_LOOKUP_TITLE}]};
Blockly.Blocks.dictionaries_set_pair={category:"Dictionaries",helpUrl:Blockly.Msg.LANG_DICTIONARIES_SET_PAIR_HELPURL,init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("key",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_SET_PAIR_INPUT,["KEY",d,Blockly.inputs.Align.RIGHT],["DICT",a,Blockly.inputs.Align.RIGHT],["VALUE",null,Blockly.inputs.Align.RIGHT],
Blockly.inputs.Align.RIGHT);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_SET_PAIR_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_SET_PAIR_TITLE}]};
Blockly.Blocks.dictionaries_delete_pair={category:"Dictionaries",helpUrl:Blockly.Msg.LANG_DICTIONARIES_DELETE_PAIR_HELPURL,init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("key",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_DELETE_PAIR_INPUT,["DICT",a,Blockly.inputs.Align.RIGHT],["KEY",d,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setPreviousStatement(!0);
this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_DELETE_PAIR_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_DELETE_PAIR_TITLE}]};
Blockly.Blocks.dictionaries_recursive_lookup={category:"Dictionaries",helpUrl:Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_RECURSIVE_LOOKUP_HELPURL,init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.INPUT),f=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_RECURSIVE_LOOKUP_INPUT,
["KEYS",f,Blockly.inputs.Align.RIGHT],["DICT",a,Blockly.inputs.Align.RIGHT],["NOTFOUND",d,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_RECURSIVE_LOOKUP_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_RECURSIVE_LOOKUP_TITLE}]};
Blockly.Blocks.dictionaries_recursive_set={category:"Dictionaries",helpUrl:Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_RECURSIVE_SET_HELPURL,init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setPreviousStatement(!0);this.setNextStatement(!0);var a=AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.INPUT),f=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_RECURSIVE_SET_INPUT,
["KEYS",f,Blockly.inputs.Align.RIGHT],["DICT",a,Blockly.inputs.Align.RIGHT],["VALUE",d,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_RECURSIVE_SET_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_DICTIONARY_RECURSIVE_SET_TITLE}]};
Blockly.Blocks.dictionaries_getters={category:"Dictionaries",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.dictionaries_getters.HELPURLS()[a]},init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.appendValueInput("DICT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_DICTIONARIES_GETTERS_TITLE).appendField(new Blockly.FieldDropdown(this.OPERATORS),
"OP");var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.dictionaries_getters.TOOLTIPS()[d]})},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_GET_KEYS_TYPEBLOCK,dropDown:{titleName:"OP",value:"KEYS"}},{translatedName:Blockly.Msg.LANG_DICTIONARIES_GET_VALUES_TYPEBLOCK,dropDown:{titleName:"OP",value:"VALUES"}}]};
Blockly.Blocks.dictionaries_getters.OPERATORS=function(){return[[Blockly.Msg.LANG_DICTIONARIES_GET_KEYS_TITLE,"KEYS"],[Blockly.Msg.LANG_DICTIONARIES_GET_VALUES_TITLE,"VALUES"]]};Blockly.Blocks.dictionaries_getters.TOOLTIPS=function(){return{KEYS:Blockly.Msg.LANG_DICTIONARIES_GET_KEYS_TOOLTIP,VALUES:Blockly.Msg.LANG_DICTIONARIES_GET_VALUES_TOOLTIP}};Blockly.Blocks.dictionaries_getters.HELPURLS=function(){return{KEYS:Blockly.Msg.LANG_DICTIONARIES_GET_KEYS_HELPURL,VALUES:Blockly.Msg.LANG_DICTIONARIES_GET_VALUES_HELPURL}};
Blockly.Blocks.dictionaries_get_values={category:"Dictionaries",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.dictionaries_getters.HELPURLS()[a]},init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.appendValueInput("DICT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_DICTIONARIES_GETTERS_TITLE).appendField(new Blockly.FieldDropdown(Blockly.Blocks.dictionaries_getters.OPERATORS),
"OP");this.setFieldValue("VALUES","OP");var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.dictionaries_getters.TOOLTIPS()[d]})}};
Blockly.Blocks.dictionaries_is_key_in={category:"Dictionaries",init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("key",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_IS_KEY_IN_INPUT,["KEY",d,Blockly.inputs.Align.RIGHT],["DICT",a,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",
AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_IS_KEY_IN_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_IS_KEY_IN_TITLE}]};
Blockly.Blocks.dictionaries_length={category:"Dictionaries",init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("DICT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_DICTIONARIES_LENGTH_TITLE).appendField(Blockly.Msg.LANG_DICTIONARIES_LENGTH_INPUT);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_LENGTH_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_LENGTH_TITLE}]};
Blockly.Blocks.dictionaries_alist_to_dict={category:"Dictionaries",init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.OUTPUT));this.appendValueInput("PAIRS").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_DICTIONARIES_ALIST_TO_DICT_TITLE).appendField(Blockly.Msg.LANG_DICTIONARIES_ALIST_TO_DICT_INPUT);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_ALIST_TO_DICT_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_ALIST_TO_DICT_TITLE}]};
Blockly.Blocks.dictionaries_dict_to_alist={category:"Dictionaries",init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.appendValueInput("DICT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_DICTIONARIES_DICT_TO_ALIST_TITLE).appendField(Blockly.Msg.LANG_DICTIONARIES_DICT_TO_ALIST_INPUT);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_DICT_TO_ALIST_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_DICT_TO_ALIST_TITLE}]};
Blockly.Blocks.dictionaries_copy={category:"Dictionaries",init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.OUTPUT));this.appendValueInput("DICT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_DICTIONARIES_COPY_TITLE).appendField(Blockly.Msg.LANG_DICTIONARIES_COPY_INPUT);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_COPY_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_COPY_TITLE}]};
Blockly.Blocks.dictionaries_combine_dicts={category:"Dictionaries",init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_COMBINE_DICTS_INPUT,["DICT1",a,Blockly.inputs.Align.RIGHT],["DICT2",a,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_COMBINE_DICTS_TOOLTIP);
this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_COMBINE_DICTS_TITLE}]};
Blockly.Blocks.dictionaries_walk_tree={category:"Dictionaries",helpUrl:Blockly.Msg.LANG_DICTIONARIES_WALK_TREE_HELPURL,init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_WALK_TREE_TITLE,["PATH",d,Blockly.inputs.Align.RIGHT],["DICT",a,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setOutput(!0,
AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_WALK_TREE_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_WALK_TREE_TITLE}]};
Blockly.Blocks.dictionaries_walk_all={category:"Dictionaries",helpUrl:Blockly.Msg.LANG_DICTIONARIES_WALK_TREE_ALL_HELPURL,init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_WALK_TREE_ALL_TITLE,Blockly.inputs.Align.LEFT);this.setOutput(!0,"ALL_OPERATOR");this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_WALK_TREE_ALL_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_WALK_TREE_ALL_TITLE}]};
Blockly.Blocks.dictionaries_is_dict={category:"Dictionaries",init:function(){this.setColour(Blockly.DICTIONARY_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.interpolateMsg(Blockly.Msg.LANG_DICTIONARIES_IS_DICT_TITLE,["THING",null,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_DICTIONARIES_IS_DICT_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_DICTIONARIES_IS_DICT_TITLE}]};AI.Blockly.FieldInvalidDropdown={};Blockly.FieldInvalidDropdown=class extends Blockly.FieldDropdown{constructor(a,d,f){super(a,f);this.invalidOptions_=d||[]}doValueInvalid_(a){this.value_=a;this.isDirty_=!0;this.sourceBlock_&&this.sourceBlock_.badBlock();this.selectedOption_=[a,a];for(let d=0,f;f=this.invalidOptions_[d];d++)if(f[1]==a){this.selectedOption_=f;break}}doValueUpdate_(a){super.doValueUpdate_(a);this.sourceBlock_&&this.sourceBlock_.notBadBlock()}};/*

 @fileoverview Helper block definitions. These are created based on the
     component database, and are meant to be connected to component
     method/setter inputs to make coding faster for users.
*/
AI.Blocks.helpers={};Blockly.COLOUR_HELPERS="#BF4343";
Blockly.Blocks.helpers_dropdown={init:function(){this.key_="";this.setColour(Blockly.COLOUR_HELPERS)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("key",this.key_);return a},domToMutation:function(a){this.key_=a.getAttribute("key");var d=this.getTopWorkspace().getComponentDatabase(),f=d.getOptionList(this.key_);d=d.getInternationalizedOptionListTag(f.tag);var h=new Blockly.FieldInvalidDropdown(this.getValidOptions(),this.getInvalidOptions());this.setOutput(!0,this.getOutputType());
this.appendDummyInput().appendField(d).appendField(h,"OPTION");a=a.getAttribute("value")||f.defaultOpt;this.setFieldValue(a,"OPTION")},getOutputType:function(){var a=[],d=AI.BlockUtils.YailTypeToBlocklyType("enum",AI.BlockUtils.OUTPUT);d&&(Array.isArray(d)?a=d.slice():a.push(d));var f=AI.BlockUtils.helperKeyToBlocklyType({type:"OPTION_LIST",key:this.key_},this);f&&f!=d&&a.push(f);return a.length?a:null},getValidOptions:function(){for(var a=this.getTopWorkspace().getComponentDatabase(),d=a.getOptionList(this.key_),
f=[],h=0,l;l=d.options[h];h++){var m=a.getInternationalizedOptionName(d.tag+l.name,l.name);l.deprecated||f.push([m,l.name])}this.shouldSortOptions()&&f.sort(function(p,q){return p[1]<q[1]?-1:p[1]>q[1]?1:0});return f},getInvalidOptions:function(){for(var a=this.getTopWorkspace().getComponentDatabase(),d=a.getOptionList(this.key_),f=[],h=0,l;l=d.options[h];h++){var m=a.getInternationalizedOptionName(d.tag+l.name,l.name);l.deprecated&&f.push([m,l.name])}return f},shouldSortOptions:function(){return"Permission"===
this.key_},typeblock:function(){var a=Blockly.common.getMainWorkspace().getComponentDatabase(),d=[];a.forEachOptionList(function(f){for(var h=0,l;l=f.options[h];h++){var m=a.getInternationalizedOptionListTag(f.tag),p=a.getInternationalizedOptionName(f.tag+l.name,l.name);d.push({translatedName:m+p,mutatorAttributes:{key:f.tag,value:l.name}})}});return d}};
Blockly.Blocks.helpers_screen_names={init:function(){var a=AI.BlockUtils,d=new Blockly.FieldInvalidDropdown(this.generateOptions.bind(this));this.setColour(Blockly.COLOUR_HELPERS);this.setOutput(!0,a.YailTypeToBlocklyType("text",a.OUTPUT));this.appendDummyInput().appendField(d,"SCREEN")},onchange:function(a){a.type==AI.Events.SCREEN_SWITCH&&this.setFieldValue(this.getFieldValue("SCREEN"),"SCREEN")},domToMutation:function(a){a=a.getAttribute("value");this.setFieldValue(a,"SCREEN")},getScreens:function(){return this.workspace.getScreenList()},
generateOptions:function(){if(!this.workspace)return[["",""]];var a=this.getScreens();return a.length?a.map(function(d){return[d,d]}):[["",""]]},typeblock:function(){for(var a=[],d=Blockly.common.getMainWorkspace().getScreenList(),f=0,h;h=d[f];f++)a.push({translatedName:Blockly.Msg.LANG_SCREENS_TITLE+h,mutatorAttributes:{value:h}});return a}};
Blockly.Blocks.helpers_assets={init:function(){var a=AI.BlockUtils;this.setColour(Blockly.COLOUR_HELPERS);this.setOutput(!0,a.YailTypeToBlocklyType("text",a.OUTPUT));this.appendDummyInput("INPUT");this.addField()},onchange:function(a){if((a.type==AI.Events.SCREEN_SWITCH||a.type==Blockly.Events.MOVE)&&this.addField()){a=this.getFieldValue("ASSET");var d=this.generateOptions();this.isInFlyout&&d.length&&(a=d[0][1]);this.setFieldValue(a,"ASSET")}},domToMutation:function(a){var d=this.getField("ASSET");
d&&(a=a.getAttribute("value"),d.setValue(a))},addField:function(){if(this.workspace){var a=this.getInput("INPUT"),d=this.workspace.getAssetList();if(d.length){if(!this.getField("ASSET")){var f=new Blockly.FieldInvalidDropdown(this.generateOptions.bind(this));a.appendField(f,"ASSET")}this.getField("TEXT")&&a.removeField("TEXT")}else this.getField("TEXT")||(f=new Blockly.FieldLabel(Blockly.Msg.LANG_NO_ASSETS),a.appendField(f,"TEXT")),this.getField("ASSET")&&a.removeField("ASSET");return d.length}},
generateOptions:function(){if(!this.workspace)return[["",""]];var a=[""],d=this.outputConnection.targetConnection&&this.outputConnection.targetConnection.getCheck();if(d)for(var f=0,h;h=d[f];f++)Array.isArray(h)&&(a=h);d=this.workspace.getAssetList();return d.length&&(d=d.map(function(l){if(a.some(function(m){return l.includes(m)}))return[l,l]}),d=d.filter(function(l){return void 0!==l}),d.length)?d:[["",""]]},typeblock:function(){for(var a=[],d=Blockly.common.getMainWorkspace().getAssetList(),f=
0,h;h=d[f];f++)a.push({translatedName:h,mutatorAttributes:{value:h}});return a}};
Blockly.Blocks.helpers_providermodel={init:function(){var a=AI.BlockUtils;this.setColour(Blockly.COLOUR_HELPERS);this.setOutput(!0,a.YailTypeToBlocklyType("text",a.OUTPUT));this.appendDummyInput("INPUT");this.addField()},onchange:function(a){if((a.type==AI.Events.SCREEN_SWITCH||a.type==Blockly.Events.MOVE)&&this.addField()){a=this.getFieldValue("PROVIDERMODEL");var d=this.generateOptions();this.isInFlyout&&d.length&&(a=d[0][1]);this.setFieldValue(a,"PROVIDERMODEL")}},domToMutation:function(a){var d=
this.getField("PROVIDERMODEL");d&&(a=a.getAttribute("value"),d.setValue(a))},addField:function(){if(this.workspace){var a=this.getInput("INPUT"),d=this.workspace.getProviderModelList();if(d.length){if(!this.getField("PROVIDERMODEL")){var f=new Blockly.FieldInvalidDropdown(this.generateOptions.bind(this));a.appendField(f,"PROVIDERMODEL")}this.getField("TEXT")&&a.removeField("TEXT")}else this.getField("TEXT")||(f=new Blockly.FieldLabel(Blockly.Msg.LANG_NO_PROVIDERMODEL),a.appendField(f,"TEXT")),this.getField("PROVIDERMODEL")&&
a.removeField("PROVIDERMODEL");return d.length}},generateOptions:function(){if(!this.workspace)return[["",""]];var a=[""],d=this.outputConnection.targetConnection&&this.outputConnection.targetConnection.check_;if(d)for(var f=0,h;h=d[f];f++)Array.isArray(h)&&(a=h);d=this.workspace.getProviderModelList();return d.length&&(d=d.map(function(l){if(a.some(function(m){return l.includes(m)}))return[l,l]}),d=d.filter(function(l){return void 0!==l}),d.length)?d:[["",""]]},typeblock:function(){for(var a=[],
d=Blockly.common.getMainWorkspace().getProviderModelList(),f=0,h;h=d[f];f++)a.push({translatedName:h,mutatorAttributes:{value:h}});return a}};
Blockly.Blocks.helpers_provider={init:function(){var a=AI.BlockUtils;this.setColour(Blockly.COLOUR_HELPERS);this.setOutput(!0,a.YailTypeToBlocklyType("text",a.OUTPUT));this.appendDummyInput("INPUT");this.addField()},onchange:function(a){if((a.type==AI.Events.SCREEN_SWITCH||a.type==Blockly.Events.MOVE)&&this.addField()){a=this.getFieldValue("PROVIDER");var d=this.generateOptions();this.isInFlyout&&d.length&&(a=d[0][1]);this.setFieldValue(a,"PROVIDER")}},domToMutation:function(a){var d=this.getField("PROVIDER");
d&&(a=a.getAttribute("value"),d.setValue(a))},addField:function(){if(this.workspace){var a=this.getInput("INPUT"),d=this.workspace.getProviderList();if(d.length){if(!this.getField("PROVIDER")){var f=new Blockly.FieldInvalidDropdown(this.generateOptions.bind(this));a.appendField(f,"PROVIDER")}this.getField("TEXT")&&a.removeField("TEXT")}else this.getField("TEXT")||(f=new Blockly.FieldLabel(Blockly.Msg.LANG_NO_PROVIDERMODEL),a.appendField(f,"TEXT")),this.getField("PROVIDER")&&a.removeField("PROVIDER");
return d.length}},generateOptions:function(){if(!this.workspace)return[["",""]];var a=[""],d=this.outputConnection.targetConnection&&this.outputConnection.targetConnection.check_;if(d)for(var f=0,h;h=d[f];f++)Array.isArray(h)&&(a=h);d=this.workspace.getProviderList();return d.length&&(d=d.map(function(l){if(a.some(function(m){return l.includes(m)}))return[l,l]}),d=d.filter(function(l){return void 0!==l}),d.length)?d:[["",""]]},typeblock:function(){for(var a=[],d=Blockly.common.getMainWorkspace().getProviderList(),
f=0,h;h=d[f];f++)a.push({translatedName:h,mutatorAttributes:{value:h}});return a}};/*

 @fileoverview Variables blocks for Blockly, modified for MIT App Inventor.
 @author fturbak@wellesley.edu (Lyn Turbak)
*/
AI.Blocks.lexicalvariables={};
Blockly.Blocks.global_declaration={category:"Variables",helpUrl:Blockly.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_HELPURL,init:function(){this.setColour(Blockly.VARIABLE_CATEGORY_HUE);this.appendValueInput("VALUE").appendField(Blockly.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_TITLE_INIT).appendField(new Blockly.FieldGlobalFlydown(Blockly.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_NAME,Blockly.FieldFlydown.DISPLAY_BELOW),"NAME").appendField(Blockly.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_TO);this.setTooltip(Blockly.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_TOOLTIP)},
getVars:function(){var a=this.getField("NAME");return a?[a.getValue()]:[]},renameVar:function(a,d){Blockly.Names.equals(a,this.getFieldValue("NAME"))&&this.setFieldValue(d,"NAME")},getGlobalNames:function(){return this.getVars()},typeblock:[{translatedName:Blockly.Msg.LANG_VARIABLES_GLOBAL_DECLARATION_TITLE_INIT}]};
Blockly.Blocks.lexical_variable_get={category:"Variables",helpUrl:Blockly.Msg.LANG_VARIABLES_GET_HELPURL,init:function(){this.setColour(Blockly.VARIABLE_CATEGORY_HUE);this.fieldVar_=new Blockly.FieldLexicalVariable(" ");this.fieldVar_.setBlock(this);this.appendDummyInput().appendField(Blockly.Msg.LANG_VARIABLES_GET_TITLE_GET).appendField(this.fieldVar_,"VAR");this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_VARIABLES_GET_TOOLTIP);this.errors=[{name:"checkIsInDefinition"},{name:"checkDropDownContainsValidValue",
dropDowns:["VAR"]}]},mutationToDom:function(){return Blockly.LexicalVariable.eventParamMutationToDom(this)},domToMutation:function(a){Blockly.LexicalVariable.eventParamDomToMutation(this,a);this.eventparam&&(a=this.workspace.getComponentDatabase(),this.fieldVar_.setTranslatedValue(a.getInternationalizedParameterName(this.eventparam),this.eventparam))},referenceResults:function(a,d,f){var h=this.getChildren().map(function(u){return Blockly.LexicalVariable.referenceResult(u,a,d,f)});let l=[],m=[];for(var p=
0;p<h.length;p++)l=l.concat(h[p][0]),m=m.concat(h[p][1]);p=this.getField("VAR").getValue();var q=Blockly.unprefixName(p);h=q[0];q=q[1];p=Blockly.usePrefixInCode&&-1==f.indexOf(p)||!Blockly.usePrefixInCode&&-1==f.indexOf(q);if(h!==Blockly.Msg.LANG_VARIABLES_GLOBAL_PREFIX)if(q===a&&p)if(l.push(this),Blockly.usePrefixInCode)for(h=0;h<f.length;h++)p=Blockly.unprefixName(f[h]),d===p[0]&&m.push(p[1]);else m=m.concat(f);else!p||Blockly.usePrefixInCode&&d!==h||m.push(q);this.eventparam&&m.push(this.eventparam);
return[[l,m]]},getVars:function(){return[this.getFieldValue("VAR")]},renameLexicalVar:function(a,d,f,h){void 0===f?a===this.getFieldValue("VAR")&&this.setFieldValue(d,"VAR"):f&&f===this.fieldVar_.getValue()&&(this.fieldVar_.setValue(h),a===d&&this.setFieldValue(d,"VAR"))},renameFree:function(a){var d=Blockly.unprefixName(this.getFieldValue("VAR"));d[0]!==Blockly.Msg.LANG_VARIABLES_GLOBAL_PREFIX&&(d=d[1],a=a.apply(d),a!==d&&this.renameLexicalVar(d,a))},freeVariables:function(){var a=Blockly.unprefixName(this.getFieldValue("VAR"));
return a[0]!==Blockly.Msg.LANG_VARIABLES_GLOBAL_PREFIX?new Blockly.NameSet([a[1]]):new Blockly.NameSet},typeblock:[{translatedName:Blockly.Msg.LANG_VARIABLES_GET_TITLE_GET+Blockly.Msg.LANG_VARIABLES_VARIABLE}]};
Blockly.Blocks.lexical_variable_set={category:"Variables",helpUrl:Blockly.Msg.LANG_VARIABLES_SET_HELPURL,init:function(){this.setColour(Blockly.VARIABLE_CATEGORY_HUE);this.fieldVar_=new Blockly.FieldLexicalVariable(" ");this.fieldVar_.setBlock(this);this.appendValueInput("VALUE").appendField(Blockly.Msg.LANG_VARIABLES_SET_TITLE_SET).appendField(this.fieldVar_,"VAR").appendField(Blockly.Msg.LANG_VARIABLES_SET_TITLE_TO);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_VARIABLES_SET_TOOLTIP);
this.errors=[{name:"checkIsInDefinition"},{name:"checkDropDownContainsValidValue",dropDowns:["VAR"]}]},mutationToDom:function(){return Blockly.LexicalVariable.eventParamMutationToDom(this)},domToMutation:function(a){Blockly.LexicalVariable.eventParamDomToMutation(this,a);this.eventparam&&(a=this.workspace.getComponentDatabase(),this.fieldVar_.setTranslatedValue(a.getInternationalizedParameterName(this.eventparam),this.eventparam))},referenceResults:Blockly.Blocks.lexical_variable_get.referenceResults,
getVars:function(){return[this.getFieldValue("VAR")]},renameLexicalVar:Blockly.Blocks.lexical_variable_get.renameLexicalVar,renameFree:function(a){var d=Blockly.unprefixName(this.getFieldValue("VAR"));if(d[0]!==Blockly.Msg.LANG_VARIABLES_GLOBAL_PREFIX){d=d[1];var f=a.apply(d);f!==d&&this.renameLexicalVar(d,f)}this.getChildren().map(function(h){Blockly.LexicalVariable.renameFree(h,a)})},freeVariables:function(){var a=this.getChildren().map(function(f){return Blockly.LexicalVariable.freeVariables(f)});
a=Blockly.NameSet.unionAll(a);var d=Blockly.unprefixName(this.getFieldValue("VAR"));d[0]!==Blockly.Msg.LANG_VARIABLES_GLOBAL_PREFIX&&a.insert(d[1]);return a},typeblock:[{translatedName:Blockly.Msg.LANG_VARIABLES_SET_TITLE_SET+Blockly.Msg.LANG_VARIABLES_VARIABLE}]};
Blockly.Blocks.local_declaration_statement={category:"Variables",helpUrl:Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_HELPURL,bodyInputName:"STACK",init:function(){this.initLocals();this.appendStatementInput("STACK").appendField(Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_IN_DO);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_TOOLTIP);this.lexicalVarPrefix=Blockly.localNamePrefix},referenceResults:function(a,d,f){var h=[];for(var l=
0;this.getInput("DECL"+l);l++){var m=this.getFieldValue("VAR"+l);Blockly.usePrefixInCode&&(m=Blockly.possiblyPrefixMenuNameWith(Blockly.localNamePrefix)(m));h.push(m)}h=f.concat(h);l=[];for(m=0;this.getInput("DECL"+m);m++){const p=this.getInputTargetBlock("DECL"+m);p&&l.push(p)}l=l.map(function(p){return Blockly.LexicalVariable.referenceResult(p,a,d,f)});h=Blockly.LexicalVariable.referenceResult(this.getInputTargetBlock("STACK"),a,d,h);m=Blockly.LexicalVariable.referenceResult(Blockly.LexicalVariable.getNextTargetBlock(this),
a,d,f);return l.concat([h,m])},withLexicalVarsAndPrefix:function(a,d){if(this.getInputTargetBlock(this.bodyInputName)==a){a=this.declaredNames();for(let f=0;f<a.length;f++)d(a[f],this.lexicalVarPrefix)}},initLocals:function(){this.setColour(Blockly.VARIABLE_CATEGORY_HUE);this.localNames_=[Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_DEFAULT_NAME];this.appendValueInput("DECL0").appendField(Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_TITLE_INIT).appendField(this.parameterFlydown(0),"VAR0").appendField(Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_INPUT_TO).setAlign(Blockly.inputs.Align.RIGHT);
this.setMutator(new Blockly.icons.MutatorIcon(["local_mutatorarg"],this))},onchange:function(){this.localNames_=this.declaredNames()},mutationToDom:function(){for(var a=document.createElement("mutation"),d=0;d<this.localNames_.length;d++){var f=document.createElement("localname");f.setAttribute("name",this.localNames_[d]);a.appendChild(f)}return a},domToMutation:function(a){a=goog.dom.getChildren(a);if(0<a.length){this.localNames_=[];for(var d=0,f;f=a[d];d++)"localname"==f.nodeName.toLowerCase()&&
this.localNames_.push(f.getAttribute("name"))}this.updateDeclarationInputs_(this.localNames_)},updateDeclarationInputs_:function(a,d){var f=this.inputList[this.inputList.length-1],h=this.inputList.length-1,l=this.rendered;this.rendered=!1;var m=this;Blockly.FieldParameterFlydown.withChangeHanderDisabled(function(){for(var u=0;u<h;u++)m.removeInput("DECL"+u)});this.inputList=[];this.localNames_=a;for(var p=0;p<a.length;p++){var q=this.appendValueInput("DECL"+p);q.appendField(Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_TITLE_INIT).appendField(this.parameterFlydown(p),
"VAR"+p).appendField(Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_INPUT_TO).setAlign(Blockly.inputs.Align.RIGHT);d&&d[p]&&q.connection.connect(d[p])}this.inputList=this.inputList.concat(f);if(this.rendered=l)this.initSvg(),this.render()},parameterFlydown:function(a){var d=this;return new Blockly.FieldParameterFlydown(this.localNames_[a],!0,Blockly.FieldFlydown.DISPLAY_RIGHT,function(f){d.localNames_[a]=f;if(d.mutator&&d.mutator.rootBlock_){for(var h=0,l=d.mutator.rootBlock_.getInputTargetBlock("STACK");l&&
h<a;)l=l.nextConnection&&l.nextConnection.targetBlock(),h++;l&&h==a&&Blockly.Field.prototype.setText.call(l.getField("NAME"),f)}})},decompose:function(a){var d=a.newBlock("local_mutatorcontainer");d.initSvg();d.setDefBlock(this);for(var f=d.getInput("STACK").connection,h=0;h<this.localNames_.length;h++){var l=this.getFieldValue("VAR"+h),m=a.newBlock("local_mutatorarg");m.initSvg();m.setFieldValue(l,"NAME");m.oldLocation=h;f.connect(m.previousConnection);f=m.nextConnection}return d},compose:function(a){var d=
[],f=[];for(a=a.getInputTargetBlock("STACK");a;)d.push(a.getFieldValue("NAME")),f.push(a.valueConnection_),a=a.nextConnection&&a.nextConnection.targetBlock();Blockly.LexicalVariable.stringListsEqual(this.localNames_,d)||this.updateDeclarationInputs_(d,f)},dispose:function(){Blockly.BlockSvg.prototype.dispose.apply(this,arguments)},saveConnections:function(a){for(var d=a.getInputTargetBlock("STACK"),f=0;d;){var h=this.getInput("DECL"+f);d.valueConnection_=h&&h.connection.targetConnection;f++;d=d.nextConnection&&
d.nextConnection.targetBlock()}if(d=this.getInput(this.bodyInputName))a.bodyConnection_=d.connection.targetConnection},getVars:function(){for(var a=[],d=0,f;f=this.getField("VAR"+d);d++)a.push(f.getValue());return a},declaredNames:function(){return this.getVars()},declaredVariables:function(){return this.getVars()},initializerConnections:function(){for(var a=[],d=0,f;f=this.getInput("DECL"+d);d++)a.push(f.connection&&f.connection.targetConnection);return a},blocksInScope:function(){var a=this.getInputTargetBlock(this.bodyInputName);
return a&&[a]||[]},renameVar:function(a,d){this.renameVars(Blockly.Substitution.simpleSubstitution(a,d))},renameVars:function(a){var d=this.declaredNames(),f=a.map(d);if(!Blockly.LexicalVariable.stringListsEqual(f,d)&&(d=this.initializerConnections(),this.updateDeclarationInputs_(f,d),this.mutator.isVisible())){f=this.mutator.workspace_.getAllBlocks();d=0;for(var h;h=f[d];d++)if("procedures_mutatorarg"==h.type){var l=h.getFieldValue("NAME"),m=a.apply(l);m!==l&&h.setFieldValue(m,"NAME")}}},renameBound:function(a,
d){for(var f=Blockly.Xml.domToText(this.mutationToDom()),h=this.declaredNames(),l=0;l<h.length;l++)Blockly.LexicalVariable.renameFree(this.getInputTargetBlock("DECL"+l),d);a=a.restrictDomain(h);this.renameVars(a);h=d.remove(h).extend(a);Blockly.LexicalVariable.renameFree(this.getInputTargetBlock(this.bodyInputName),h);h=Blockly.Xml.domToText(this.mutationToDom());Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this,"mutation",null,f,h));this.nextConnection&&(f=this.nextConnection.targetBlock(),
Blockly.LexicalVariable.renameFree(f,d))},renameFree:function(a){var d=this.declaredNames();d=new Blockly.NameSet(d);var f=Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock(this.bodyInputName));f.subtract(d);f=f.renamed(a);var h=f.intersection(d);if(h.isEmpty())this.renameBound(new Blockly.Substitution,a);else{d=d.union(f).toList();f={};h=h.toList();for(var l=0,m;m=h[l];l++){var p=Blockly.FieldLexicalVariable.nameNotIn(m,d);f[m]=p;d.push(p)}this.renameBound(new Blockly.Substitution(f),
a)}},freeVariables:function(){var a=Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock(this.bodyInputName)),d=this.declaredNames();a.subtract(new Blockly.NameSet(d));d=d.length;for(var f=0;f<d;f++)a.union(Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock("DECL"+f)));this.nextConnection&&(d=this.nextConnection.targetBlock(),a.unite(Blockly.LexicalVariable.freeVariables(d)));return a},typeblock:[{translatedName:Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_TRANSLATED_NAME}]};
Blockly.Blocks.local_declaration_expression={category:"Variables",helpUrl:Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_HELPURL,initLocals:Blockly.Blocks.local_declaration_statement.initLocals,bodyInputName:"RETURN",init:function(){this.initLocals();this.appendInputFromRegistry("indented_input","RETURN").appendField(Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_IN_RETURN);this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_TOOLTIP)},
referenceResults:function(a,d,f){var h=[];for(var l=0;this.getInput("DECL"+l);l++){var m=this.getFieldValue("VAR"+l);Blockly.usePrefixInCode&&(m=Blockly.possiblyPrefixMenuNameWith(Blockly.localNamePrefix)(m));h.push(m)}h=f.concat(h);l=[];for(m=0;this.getInput("DECL"+m);m++){const p=this.getInputTargetBlock("DECL"+m);p&&l.push(p)}l=l.map(function(p){return Blockly.LexicalVariable.referenceResult(p,a,d,f)});h=Blockly.LexicalVariable.referenceResult(this.getInputTargetBlock("RETURN"),a,d,h);return l.concat([h])},
withLexicalVarsAndPrefix:Blockly.Blocks.local_declaration_statement.withLexicalVarsAndPrefix,onchange:Blockly.Blocks.local_declaration_statement.onchange,mutationToDom:Blockly.Blocks.local_declaration_statement.mutationToDom,domToMutation:Blockly.Blocks.local_declaration_statement.domToMutation,updateDeclarationInputs_:Blockly.Blocks.local_declaration_statement.updateDeclarationInputs_,parameterFlydown:Blockly.Blocks.local_declaration_statement.parameterFlydown,blocksInScope:Blockly.Blocks.local_declaration_statement.blocksInScope,
decompose:Blockly.Blocks.local_declaration_statement.decompose,compose:Blockly.Blocks.local_declaration_statement.compose,dispose:Blockly.Blocks.local_declaration_statement.dispose,saveConnections:Blockly.Blocks.local_declaration_statement.saveConnections,getVars:Blockly.Blocks.local_declaration_statement.getVars,declaredNames:Blockly.Blocks.local_declaration_statement.declaredNames,declaredVariables:Blockly.Blocks.local_declaration_statement.declaredVariables,renameVar:Blockly.Blocks.local_declaration_statement.renameVar,
renameVars:Blockly.Blocks.local_declaration_statement.renameVars,renameBound:Blockly.Blocks.local_declaration_statement.renameBound,renameFree:Blockly.Blocks.local_declaration_statement.renameFree,freeVariables:Blockly.Blocks.local_declaration_statement.freeVariables,typeblock:[{translatedName:Blockly.Msg.LANG_VARIABLES_LOCAL_DECLARATION_EXPRESSION_TRANSLATED_NAME}]};
Blockly.Blocks.local_mutatorcontainer={init:function(){this.setColour(Blockly.VARIABLE_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_VARIABLES_LOCAL_MUTATOR_CONTAINER_TITLE_LOCAL_NAMES);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.LANG_VARIABLES_LOCAL_MUTATOR_CONTAINER_TOOLTIP);this.contextMenu=!1},setDefBlock:function(a){this.defBlock_=a},getDefBlock:function(){return this.defBlock_},declaredNames:function(){for(var a=[],d=this.getInputTargetBlock("STACK");d;)a.push(d.getFieldValue("NAME")),
d=d.nextConnection&&d.nextConnection.targetBlock();return a}};
Blockly.Blocks.local_mutatorarg={init:function(){this.setColour(Blockly.VARIABLE_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_VARIABLES_LOCAL_MUTATOR_ARG_TITLE_NAME).appendField(new Blockly.FieldTextInput(Blockly.Msg.LANG_VARIABLES_LOCAL_MUTATOR_ARG_DEFAULT_VARIABLE,Blockly.LexicalVariable.renameParam),"NAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("");this.contextMenu=!1},getContainerBlock:function(){for(var a=this.getParent();a&&"local_mutatorcontainer"!==
a.type;)a=a.getParent();return this.cachedContainerBlock_=a&&"local_mutatorcontainer"===a.type&&a||null},getDefBlock:function(){var a=this.getContainerBlock();return a&&a.getDefBlock()||null},blocksInScope:function(){var a=this.getDefBlock();return a&&a.blocksInScope()||[]},declaredNames:function(){var a=this.getContainerBlock();return a&&a.declaredNames()||[]},onchange:function(){var a=this.getFieldValue("NAME");if(a){var d=this.cachedContainerBlock_,f=this.getContainerBlock();!d&&f&&(d=this.declaredNames(),
f=d.indexOf(a),-1!=f&&-1!=d.indexOf(a,f+1)&&(a=Blockly.FieldLexicalVariable.nameNotIn(a,d),this.setFieldValue(a,"NAME")))}}};/*

 @fileoverview Lists blocks for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Blocks.lists={};
Blockly.Blocks.lists_create_with={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_CREATE_WITH_EMPTY_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("ADD0").appendField(Blockly.Msg.LANG_LISTS_CREATE_WITH_TITLE_MAKE_LIST);this.appendValueInput("ADD1");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.setMutator(new Blockly.icons.MutatorIcon(["lists_create_with_item"],this));this.setTooltip(Blockly.Msg.LANG_LISTS_CREATE_WITH_TOOLTIP);this.itemCount_=
2;this.emptyInputName="EMPTY";this.repeatingInputName="ADD"},mutationToDom:Blockly.mutationToDom,domToMutation:Blockly.domToMutation,decompose:function(a){return Blockly.decompose(a,"lists_create_with_item",this)},compose:Blockly.compose,saveConnections:Blockly.saveConnections,addEmptyInput:function(){this.appendDummyInput(this.emptyInputName).appendField(Blockly.Msg.LANG_LISTS_CREATE_EMPTY_TITLE)},addInput:function(a){var d=this.appendValueInput(this.repeatingInputName+a);0===a&&d.appendField(Blockly.Msg.LANG_LISTS_CREATE_WITH_TITLE_MAKE_LIST);
return d},updateContainerBlock:function(a){a.setFieldValue(Blockly.Msg.LANG_LISTS_CREATE_WITH_CONTAINER_TITLE_ADD,"CONTAINER_TEXT")},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_CREATE_WITH_TITLE_MAKE_LIST,mutatorAttributes:{items:2}},{translatedName:Blockly.Msg.LANG_LISTS_CREATE_EMPTY_TITLE,mutatorAttributes:{items:0}}]};AI.Blockly.Mixins.extend(Blockly.Blocks.lists_create_with,AI.Blockly.Mixins.DynamicConnections);
Blockly.Blocks.lists_create_with_item={init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_LISTS_CREATE_WITH_ITEM_TITLE);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_LISTS_CREATE_WITH_ITEM_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.lists_add_items={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_ADD_ITEMS_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_ADD_ITEMS_TITLE_ADD).appendField(Blockly.Msg.LANG_LISTS_ADD_ITEMS_INPUT_LIST);this.appendValueInput("ITEM0").appendField(Blockly.Msg.LANG_LISTS_ADD_ITEMS_INPUT_ITEM).setAlign(Blockly.inputs.Align.RIGHT);this.setPreviousStatement(!0);
this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_LISTS_ADD_ITEMS_TOOLTIP);this.setMutator(new Blockly.icons.MutatorIcon(["lists_add_items_item"],this));this.itemCount_=1;this.emptyInputName=null;this.repeatingInputName="ITEM"},mutationToDom:Blockly.mutationToDom,domToMutation:Blockly.domToMutation,decompose:function(a){return Blockly.decompose(a,"lists_add_items_item",this)},compose:Blockly.compose,saveConnections:Blockly.saveConnections,addEmptyInput:function(){},addInput:function(a){a=
this.appendValueInput(this.repeatingInputName+a);a.appendField(Blockly.Msg.LANG_LISTS_ADD_ITEMS_INPUT_ITEM).setAlign(Blockly.inputs.Align.RIGHT);return a},updateContainerBlock:function(a){a.setFieldValue(Blockly.Msg.LANG_LISTS_ADD_ITEMS_CONTAINER_TITLE_ADD,"CONTAINER_TEXT");a.setTooltip(Blockly.Msg.LANG_LISTS_ADD_ITEMS_CONTAINER_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_ADD_ITEMS_TITLE_ADD}]};
Blockly.Blocks.lists_add_items_item={init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_LISTS_ADD_ITEM_TITLE);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_LISTS_ADD_ITEM_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.lists_is_in={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_IS_IN_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_LISTS_IS_IN_INPUT,["ITEM",d,Blockly.inputs.Align.RIGHT],["LIST",a,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",
AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_LISTS_IS_IN_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_IS_IN_TITLE_IS_IN}]};
Blockly.Blocks.lists_length={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_LENGTH_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_LENGTH_INPUT_LENGTH).appendField(Blockly.Msg.LANG_LISTS_LENGTH_INPUT_LIST);this.setTooltip(Blockly.Msg.LANG_LISTS_LENGTH_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_LENGTH_INPUT_LENGTH}]};
Blockly.Blocks.lists_is_empty={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_IS_EMPTY_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_TITLE_IS_EMPTY).appendField(Blockly.Msg.LANG_LISTS_INPUT_LIST);this.setTooltip(Blockly.Msg.LANG_LISTS_IS_EMPTY_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_TITLE_IS_EMPTY}]};
Blockly.Blocks.lists_pick_random_item={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_PICK_RANDOM_ITEM_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,null);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_PICK_RANDOM_TITLE_PICK_RANDOM).appendField(Blockly.Msg.LANG_LISTS_PICK_RANDOM_ITEM_INPUT_LIST);this.setTooltip(Blockly.Msg.LANG_LISTS_PICK_RANDOM_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_PICK_RANDOM_TITLE_PICK_RANDOM}]};
Blockly.Blocks.lists_position_in={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_POSITION_IN_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_LISTS_POSITION_IN_INPUT,["ITEM",d,Blockly.inputs.Align.RIGHT],["LIST",a,Blockly.inputs.Align.RIGHT],
Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_LISTS_POSITION_IN_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_POSITION_IN_TITLE_POSITION}]};
Blockly.Blocks.lists_select_item={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_SELECT_ITEM_TITLE_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,null);var a=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_LISTS_SELECT_ITEM_INPUT,["LIST",a,Blockly.inputs.Align.RIGHT],["NUM",d,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_LISTS_SELECT_ITEM_TOOLTIP);
this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_SELECT_ITEM_TITLE_SELECT}]};
Blockly.Blocks.lists_insert_item={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_INSERT_ITEM_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT),f=AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_LISTS_INSERT_INPUT,["LIST",a,Blockly.inputs.Align.RIGHT],["INDEX",d,Blockly.inputs.Align.RIGHT],["ITEM",
f,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_LISTS_INSERT_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_INSERT_TITLE_INSERT_LIST}]};
Blockly.Blocks.lists_replace_item={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_REPLACE_ITEM_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT),f=AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_LISTS_REPLACE_ITEM_INPUT,["LIST",a,Blockly.inputs.Align.RIGHT],["NUM",d,Blockly.inputs.Align.RIGHT],
["ITEM",f,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_LISTS_REPLACE_ITEM_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_REPLACE_ITEM_TITLE_REPLACE}]};
Blockly.Blocks.lists_remove_item={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_REMOVE_ITEM_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_LISTS_REMOVE_ITEM_INPUT,["LIST",a,Blockly.inputs.Align.RIGHT],["INDEX",d,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setPreviousStatement(!0);this.setNextStatement(!0);
this.setTooltip(Blockly.Msg.LANG_LISTS_REMOVE_ITEM_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_REMOVE_ITEM_TITLE_REMOVE}]};
Blockly.Blocks.lists_append_list={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_APPEND_LIST_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_LISTS_APPEND_LIST_INPUT,["LIST0",a,Blockly.inputs.Align.RIGHT],["LIST1",a,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_LISTS_APPEND_LIST_TOOLTIP);
this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_APPEND_LIST_TITLE_APPEND}]};
Blockly.Blocks.lists_copy={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_COPY_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_COPY_TITLE_COPY).appendField(Blockly.Msg.LANG_LISTS_COPY_INPUT_LIST);this.setTooltip(Blockly.Msg.LANG_LISTS_COPY_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_COPY_TITLE_COPY}]};
Blockly.Blocks.lists_is_list={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_IS_LIST_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendValueInput("ITEM").appendField(Blockly.Msg.LANG_LISTS_IS_LIST_TITLE_IS_LIST).appendField(Blockly.Msg.LANG_LISTS_IS_LIST_INPUT_THING);this.setTooltip(Blockly.Msg.LANG_LISTS_IS_LIST_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_IS_LIST_TITLE_IS_LIST}]};
Blockly.Blocks.lists_reverse={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_REVERSE_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_REVERSE_TITLE_REVERSE).appendField(Blockly.Msg.LANG_LISTS_REVERSE_INPUT_LIST);this.setTooltip(Blockly.Msg.LANG_LISTS_REVERSE_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_REVERSE_TITLE_REVERSE}]};
Blockly.Blocks.lists_to_csv_row={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_TO_CSV_ROW_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_TO_CSV_ROW_TITLE_TO_CSV).appendField(Blockly.Msg.LANG_LISTS_TO_CSV_ROW_INPUT_LIST);this.setTooltip(Blockly.Msg.LANG_LISTS_TO_CSV_ROW_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_TO_CSV_ROW_TITLE_TO_CSV}]};
Blockly.Blocks.lists_to_csv_table={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_TO_CSV_TABLE_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_TO_CSV_TABLE_TITLE_TO_CSV).appendField(Blockly.Msg.LANG_LISTS_TO_CSV_TABLE_INPUT_LIST);this.setTooltip(Blockly.Msg.LANG_LISTS_TO_CSV_TABLE_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_TO_CSV_TABLE_TITLE_TO_CSV}]};
Blockly.Blocks.lists_from_csv_row={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_FROM_CSV_ROW_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.appendValueInput("TEXT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_FROM_CSV_ROW_TITLE_FROM_CSV).appendField(Blockly.Msg.LANG_LISTS_FROM_CSV_ROW_INPUT_TEXT);this.setTooltip(Blockly.Msg.LANG_LISTS_FROM_CSV_ROW_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_FROM_CSV_ROW_TITLE_FROM_CSV}]};
Blockly.Blocks.lists_from_csv_table={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_FROM_CSV_TABLE_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.appendValueInput("TEXT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_FROM_CSV_TABLE_TITLE_FROM_CSV).appendField(Blockly.Msg.LANG_LISTS_FROM_CSV_TABLE_INPUT_TEXT);this.setTooltip(Blockly.Msg.LANG_LISTS_FROM_CSV_TABLE_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_FROM_CSV_TABLE_TITLE_FROM_CSV}]};
Blockly.Blocks.lists_lookup_in_pairs={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_LOOKUP_IN_PAIRS_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT);AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT);var d=AI.BlockUtils.YailTypeToBlocklyType("any",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_LISTS_LOOKUP_IN_PAIRS_INPUT,
["KEY",d,Blockly.inputs.Align.RIGHT],["LIST",a,Blockly.inputs.Align.RIGHT],["NOTFOUND",d,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_LISTS_LOOKUP_IN_PAIRS_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_LOOKUP_IN_PAIRS_TITLE_LOOKUP_IN_PAIRS}]};
Blockly.Blocks.lists_join_with_separator={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_JOIN_WITH_SEPARATOR_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_LISTS_JOIN_WITH_SEPARATOR_INPUT,["SEPARATOR",d,Blockly.inputs.Align.RIGHT],
["LIST",a,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_LISTS_JOIN_WITH_SEPARATOR_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_JOIN_WITH_SEPARATOR_TITLE}]};
Blockly.Blocks.lists_map={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_MAP_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_MAP_NONDEST_TITLE_MAP,"TITLE").setAlign(Blockly.inputs.Align.RIGHT);this.appendDummyInput("DESCRIPTION").appendField(Blockly.Msg.LANG_LISTS_MAP_INPUT_ITEM).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_MAP_INPUT_VAR,
!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR").appendField(Blockly.Msg.LANG_LISTS_MAP_INPUT_TO).setAlign(Blockly.inputs.Align.RIGHT);this.appendInputFromRegistry("indented_input","TO");this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_LISTS_MAP_TOOLTIP);this.setInputsInline(!1);this.lexicalVarPrefix=Blockly.localNamePrefix},getDeclaredVarFieldNamesAndPrefixes:function(){return[["VAR",Blockly.localNamePrefix]]},getScopedInputName:function(){return"TO"},saveConnections:Blockly.saveConnections,
typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_MAP_INPUT_COLLAPSED_TEXT}]};AI.Blockly.Mixins.extend(Blockly.Blocks.lists_map,AI.Blockly.Mixins.LexicalVariableMethods);
Blockly.Blocks.lists_filter={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_FILTER_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_FILTER_NONDEST_TITLE_FILTER,"TITLE").setAlign(Blockly.inputs.Align.RIGHT);this.appendDummyInput("DESCRIPTION").appendField(Blockly.Msg.LANG_LISTS_FILTER_INPUT_ITEM).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_FILTER_INPUT_VAR,
!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR").appendField(Blockly.Msg.LANG_LISTS_FILTER_INPUT_PASSING).setAlign(Blockly.inputs.Align.RIGHT);this.appendInputFromRegistry("indented_input","TEST").appendField(Blockly.Msg.LANG_LISTS_FILTER_INPUT_TEST);this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_LISTS_FILTER_TOOLTIP);this.setInputsInline(!1);this.lexicalVarPrefix=Blockly.localNamePrefix},saveConnections:Blockly.saveConnections,getDeclaredVarFieldNamesAndPrefixes:function(){return[["VAR",Blockly.localNamePrefix]]},
getScopedInputName:function(){return"TEST"},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_FILTER_INPUT_COLLAPSED_TEXT}]};AI.Blockly.Mixins.extend(Blockly.Blocks.lists_filter,AI.Blockly.Mixins.LexicalVariableMethods);
Blockly.Blocks.lists_reduce={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_REDUCE_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_REDUCE_TITLE_REDUCE).appendField(Blockly.Msg.LANG_LISTS_REDUCE_INPUT_INLIST).setAlign(Blockly.inputs.Align.RIGHT);this.appendValueInput("INITANSWER").appendField(Blockly.Msg.LANG_LISTS_REDUCE_INPUT_INITIAL_ANSWER).setAlign(Blockly.inputs.Align.RIGHT);
this.appendDummyInput("DESCRIPTION").appendField(Blockly.Msg.LANG_LISTS_REDUCE_INPUT_COMBINE).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_REDUCE_INPUT_VAR,!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR1").appendField(Blockly.Msg.LANG_LISTS_REDUCE_INPUT_AND).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_REDUCE_INPUT_ANSWER,!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR2").setAlign(Blockly.inputs.Align.RIGHT);this.appendInputFromRegistry("indented_input","COMBINE");
this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_LISTS_REDUCE_TOOLTIP);this.setInputsInline(!1);this.lexicalVarPrefix=Blockly.localNamePrefix},getDeclaredVarFieldNamesAndPrefixes:function(){return[["VAR1",Blockly.localNamePrefix],["VAR2",Blockly.localNamePrefix]]},getScopedInputName:function(){return"COMBINE"},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_REDUCE_TITLE_REDUCE}]};AI.Blockly.Mixins.extend(Blockly.Blocks.lists_reduce,AI.Blockly.Mixins.LexicalVariableMethods);
Blockly.Blocks.lists_sort={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_SORT_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_SORT_NONDEST_TITLE_SORT,"TITLE");this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_LISTS_SORT_TOOLTIP);this.setInputsInline(!1)},saveConnections:Blockly.saveConnections,typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_SORT_NONDEST_TITLE_SORT}]};
Blockly.Blocks.lists_sort_comparator={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_SORT_COMPARATOR_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_SORT_COMPARATOR_NONDEST_TITLE_SORT,"TITLE").setAlign(Blockly.inputs.Align.RIGHT);this.appendDummyInput("DESCRIPTION").appendField(Blockly.Msg.LANG_LISTS_SORT_COMPARATOR_INPUT_COMPARATOR).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_SORT_COMPARATOR_INPUT_VAR1,
!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR1").appendField(Blockly.Msg.LANG_LISTS_SORT_COMPARATOR_INPUT_AND).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_SORT_COMPARATOR_INPUT_VAR2,!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR2").appendField(Blockly.Msg.LANG_LISTS_SORT_COMPARATOR_INPUT_COMPARATOR2).setAlign(Blockly.inputs.Align.RIGHT);this.appendInputFromRegistry("indented_input","COMPARE");this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_LISTS_SORT_COMPARATOR_TOOLTIP);
this.setInputsInline(!1);this.lexicalVarPrefix=Blockly.localNamePrefix},saveConnections:Blockly.saveConnections,getDeclaredVarFieldNamesAndPrefixes:function(){return[["VAR1",Blockly.localNamePrefix],["VAR2",Blockly.localNamePrefix]]},getScopedInputName:function(){return"COMPARE"},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_SORT_COMPARATOR_INPUT_COLLAPSED_TEXT}]};AI.Blockly.Mixins.extend(Blockly.Blocks.lists_sort_comparator,AI.Blockly.Mixins.LexicalVariableMethods);
Blockly.Blocks.lists_sort_key={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_SORT_KEY_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_SORT_KEY_NONDEST_TITLE_SORT,"TITLE").setAlign(Blockly.inputs.Align.RIGHT);this.appendDummyInput("DESCRIPTION").appendField(Blockly.Msg.LANG_LISTS_SORT_KEY_INPUT_KEY).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_SORT_KEY_INPUT_VAR,
!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR").setAlign(Blockly.inputs.Align.RIGHT);this.appendInputFromRegistry("indented_input","KEY");this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_LISTS_SORT_KEY_TOOLTIP);this.setInputsInline(!1);this.lexicalVarPrefix=Blockly.localNamePrefix},saveConnections:Blockly.saveConnections,getDeclaredVarFieldNamesAndPrefixes:function(){return[["VAR",Blockly.localNamePrefix]]},getScopedInputName:function(){return"KEY"},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_SORT_KEY_INPUT_COLLAPSED_TEXT}]};
AI.Blockly.Mixins.extend(Blockly.Blocks.lists_sort_key,AI.Blockly.Mixins.LexicalVariableMethods);
Blockly.Blocks.lists_minimum_value={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_MIN_NUMBER_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_MIN_NUMBER_INPUT_MIN,"TITLE").setAlign(Blockly.inputs.Align.RIGHT);this.appendDummyInput("DESCRIPTION").appendField(Blockly.Msg.LANG_LISTS_MIN_NUMBER_INPUT_COMPARATOR).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_MIN_NUMBER_INPUT_VAR1,!0,
Blockly.FieldFlydown.DISPLAY_BELOW),"VAR1").appendField(Blockly.Msg.LANG_LISTS_MIN_NUMBER_INPUT_AND).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_MIN_NUMBER_INPUT_VAR2,!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR2").appendField(Blockly.Msg.LANG_LISTS_MIN_NUMBER_INPUT_COMPARATOR2).setAlign(Blockly.inputs.Align.RIGHT);this.appendInputFromRegistry("indented_input","COMPARE");this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_LISTS_MIN_NUMBER_TOOLTIP);this.setInputsInline(!1);
this.lexicalVarPrefix=Blockly.localNamePrefix},saveConnections:Blockly.saveConnections,getDeclaredVarFieldNamesAndPrefixes:function(){return[["VAR1",Blockly.localNamePrefix],["VAR2",Blockly.localNamePrefix]]},getScopedInputName:function(){return"COMPARE"},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_MIN_NUMBER_TYPEBLOCK}]};AI.Blockly.Mixins.extend(Blockly.Blocks.lists_minimum_value,AI.Blockly.Mixins.LexicalVariableMethods);
Blockly.Blocks.lists_maximum_value={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_MAX_NUMBER_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_MAX_NUMBER_INPUT_MAX,"TITLE").setAlign(Blockly.inputs.Align.RIGHT);this.appendDummyInput("DESCRIPTION").appendField(Blockly.Msg.LANG_LISTS_MAX_NUMBER_INPUT_COMPARATOR).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_MAX_NUMBER_INPUT_VAR1,
!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR1").appendField(Blockly.Msg.LANG_LISTS_MAX_NUMBER_INPUT_AND).appendField(new Blockly.FieldParameterFlydown(Blockly.Msg.LANG_LISTS_MAX_NUMBER_INPUT_VAR2,!0,Blockly.FieldFlydown.DISPLAY_BELOW),"VAR2").appendField(Blockly.Msg.LANG_LISTS_MAX_NUMBER_INPUT_COMPARATOR2).setAlign(Blockly.inputs.Align.RIGHT);this.appendInputFromRegistry("indented_input","COMPARE");this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_LISTS_MAX_NUMBER_TOOLTIP);this.setInputsInline(!1);
this.lexicalVarPrefix=Blockly.localNamePrefix},saveConnections:Blockly.saveConnections,getDeclaredVarFieldNamesAndPrefixes:function(){return[["VAR1",Blockly.localNamePrefix],["VAR2",Blockly.localNamePrefix]]},getScopedInputName:function(){return"COMPARE"},typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_MAX_NUMBER_TYPEBLOCK}]};AI.Blockly.Mixins.extend(Blockly.Blocks.lists_maximum_value,AI.Blockly.Mixins.LexicalVariableMethods);
Blockly.Blocks.lists_but_first={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_BUT_FIRST_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_BUT_FIRST_INPUT_BUT_FIRST);this.setTooltip(Blockly.Msg.LANG_LISTS_BUT_FIRST_TOOLTIP);this.setOutput(!0,null);this.setInputsInline(!1)},saveConnections:Blockly.saveConnections,typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_BUT_FIRST_INPUT_BUT_FIRST}]};
Blockly.Blocks.lists_but_last={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_BUT_LAST_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LISTS_BUT_LAST_INPUT_BUT_LAST);this.setTooltip(Blockly.Msg.LANG_LISTS_BUT_LAST_TOOLTIP);this.setOutput(!0,null);this.setInputsInline(!1)},saveConnections:Blockly.saveConnections,typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_BUT_LAST_INPUT_BUT_LAST}]};
Blockly.Blocks.lists_slice={category:"Lists",helpUrl:Blockly.Msg.LANG_LISTS_SLICE_HELPURL,init:function(){this.setColour(Blockly.LIST_CATEGORY_HUE);var a=AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_LISTS_SLICE_INPUT,["LIST",a,Blockly.inputs.Align.RIGHT],["INDEX1",d,Blockly.inputs.Align.RIGHT],["INDEX2",d,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_LISTS_SLICE_TOOLTIP);
this.setInputsInline(!1);this.setOutput(!0,null)},saveConnections:Blockly.saveConnections,typeblock:[{translatedName:Blockly.Msg.LANG_LISTS_SLICE_TITLE_SLICE}]};/*

 @fileoverview Logic blocks for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Blocks.logic={};
Blockly.Blocks.logic_boolean={category:"Logic",init:function(){this.setColour(Blockly.LOGIC_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.OPERATORS),"BOOL");var a=this;this.setTooltip(function(){var d=a.getFieldValue("BOOL");return Blockly.Blocks.logic_boolean.TOOLTIPS()[d]})},helpUrl:function(){var a=this.getFieldValue("BOOL");return Blockly.Blocks.logic_boolean.HELPURLS()[a]},typeblock:[{translatedName:Blockly.Msg.LANG_LOGIC_BOOLEAN_TRUE,
dropDown:{titleName:"BOOL",value:"TRUE"}},{translatedName:Blockly.Msg.LANG_LOGIC_BOOLEAN_FALSE,dropDown:{titleName:"BOOL",value:"FALSE"}}]};Blockly.Blocks.logic_boolean.OPERATORS=function(){return[[Blockly.Msg.LANG_LOGIC_BOOLEAN_TRUE,"TRUE"],[Blockly.Msg.LANG_LOGIC_BOOLEAN_FALSE,"FALSE"]]};Blockly.Blocks.logic_boolean.TOOLTIPS=function(){return{TRUE:Blockly.Msg.LANG_LOGIC_BOOLEAN_TOOLTIP_TRUE,FALSE:Blockly.Msg.LANG_LOGIC_BOOLEAN_TOOLTIP_FALSE}};
Blockly.Blocks.logic_boolean.HELPURLS=function(){return{TRUE:Blockly.Msg.LANG_LOGIC_BOOLEAN_TRUE_HELPURL,FALSE:Blockly.Msg.LANG_LOGIC_BOOLEAN_FALSE_HELPURL}};
Blockly.Blocks.logic_false={category:"Logic",init:function(){this.setColour(Blockly.LOGIC_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendDummyInput().appendField(new Blockly.FieldDropdown(Blockly.Blocks.logic_boolean.OPERATORS),"BOOL");this.setFieldValue("FALSE","BOOL");var a=this;this.setTooltip(function(){var d=a.getFieldValue("BOOL");return Blockly.Blocks.logic_boolean.TOOLTIPS()[d]})},helpUrl:function(){var a=this.getFieldValue("BOOL");
return Blockly.Blocks.logic_boolean.HELPURLS()[a]}};
Blockly.Blocks.logic_negate={category:"Logic",helpUrl:Blockly.Msg.LANG_LOGIC_NEGATE_HELPURL,init:function(){this.setColour(Blockly.LOGIC_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendValueInput("BOOL").setCheck(AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_LOGIC_NEGATE_INPUT_NOT);this.setTooltip(Blockly.Msg.LANG_LOGIC_NEGATE_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_LOGIC_NEGATE_INPUT_NOT}]};
Blockly.Blocks.logic_compare={category:"Logic",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.logic_compare.HELPURLS()[a]},init:function(){this.setColour(Blockly.LOGIC_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendValueInput("A");this.appendValueInput("B").appendField(new Blockly.FieldDropdown(this.OPERATORS),"OP");this.setInputsInline(!0);var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.logic_compare.TOOLTIPS()[d]})},
typeblock:[{translatedName:Blockly.Msg.LANG_LOGIC_COMPARE_TRANSLATED_NAME}]};Blockly.Blocks.logic_compare.TOOLTIPS=function(){return{EQ:Blockly.Msg.LANG_LOGIC_COMPARE_TOOLTIP_EQ,NEQ:Blockly.Msg.LANG_LOGIC_COMPARE_TOOLTIP_NEQ}};Blockly.Blocks.logic_compare.HELPURLS=function(){return{EQ:Blockly.Msg.LANG_LOGIC_COMPARE_HELPURL_EQ,NEQ:Blockly.Msg.LANG_LOGIC_COMPARE_HELPURL_NEQ}};
Blockly.Blocks.logic_compare.OPERATORS=function(){return[[Blockly.Msg.LANG_LOGIC_COMPARE_EQ,"EQ"],[Blockly.Msg.LANG_LOGIC_COMPARE_NEQ,"NEQ"]]};
Blockly.Blocks.logic_operation={category:"Logic",init:function(a){a=a||"AND";var d=this;this.opField=new Blockly.FieldDropdown(Blockly.Blocks.logic_operation.OPERATORS,function(f){return d.updateFields(f)});this.lastMutator=null;this.setColour(Blockly.LOGIC_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendValueInput("A").setCheck(AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.INPUT));this.appendValueInput("B").setCheck(AI.BlockUtils.YailTypeToBlocklyType("boolean",
AI.BlockUtils.INPUT)).appendField(this.opField,"OP");this.setFieldValue(a,"OP");this.setInputsInline(!0);this.setTooltip(function(){return Blockly.Blocks.logic_operation.TOOLTIPS()[d.getFieldValue("OP")]});this.setMutator(new Blockly.icons.MutatorIcon(["logic_mutator_item"],this));this.emptyInputName="EMPTY";this.repeatingInputName="BOOL";this.itemCount_=2;this.valuesToSave={op:a}},mutationToDom:Blockly.mutationToDom,domToMutation:function(a){if(null!=this.valuesToSave)for(var d in this.valuesToSave)this.valuesToSave[d]=
this.getFieldValue(d);0===this.itemCount_&&this.removeInput(this.emptyInputName,!0);0<this.itemCount_&&this.removeInput("A",!0);1<this.itemCount_&&this.removeInput("B",!0);for(d=2;d<this.itemCount_;d++)this.removeInput(this.repeatingInputName+d,!0);this.itemCount_=window.parseInt(a.getAttribute("items"),10);for(d=0;d<this.itemCount_;d++)this.addInput(d);0===this.itemCount_&&this.addEmptyInput();var f=this.opField.setValue,h=this;this.opField.setValue=function(l){f.call(this,l);h.updateFields(l)}},
decompose:function(a){var d=a.newBlock("mutator_container");d.setColour(this.getColour());d.setFieldValue(this.opField.getValue(),"CONTAINER_TEXT");d.initSvg();for(var f=d.getInput("STACK").connection,h=0;h<this.itemCount_;h++){var l=a.newBlock("logic_mutator_item");l.initSvg();f.connect(l.previousConnection);f=l.nextConnection}this.lastMutator=a;return d},countNumberOfInputs:function(a){a=a.getInputTargetBlock("STACK");for(var d=0;a;)d++,a=a.getNextBlock();return d},compose:function(a){if(null!=
this.valuesToSave)for(var d in this.valuesToSave)this.valuesToSave[d]=this.getFieldValue(d);0===this.itemCount_&&this.removeInput(this.emptyInputName,!0);for(d=this.itemCount_-1;0<=d;d--)this.removeInput(1<d?this.repeatingInputName+d:["A","B"][d],!0);d=a.getInputTargetBlock("STACK");this.itemCount_=this.countNumberOfInputs(a);for(a=0;d;){var f=this.addInput(a);d.valueConnection_&&f.connection.connect(d.valueConnection_);a++;d=d.nextConnection&&d.nextConnection.targetBlock()}0===this.itemCount_&&this.addEmptyInput()},
saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var d=0;a;){var f=this.getInput(1<d?this.repeatingInputName+d:["A","B"][d]);a.valueConnection_=f&&f.connection.targetConnection;d++;a=a.nextConnection&&a.nextConnection.targetBlock()}},addInput:function(a){var d=this.appendValueInput(1<a?this.repeatingInputName+a:["A","B"][a]).setCheck(AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.INPUT));this.getInputsInline()?1===a?this.makeDropdown(d):1<a?(a=new Blockly.FieldLabel(this.opField.getValue()),
d.appendField(a),a.init()):1===this.itemCount_&&(d.appendField(Blockly.Blocks.logic_operation.IDENTITY(this.opField.getValue()),"IDENTITY"),this.makeDropdown(d)):0===a&&this.makeDropdown(d);return d},addEmptyInput:function(){this.makeDropdown(this.appendDummyInput(this.emptyInputName))},makeDropdown:function(a){var d=this.opField.getValue();this.opField.dispose();this.opField=new Blockly.FieldDropdown(Blockly.Blocks.logic_operation.OPERATORS(),this.updateFields.bind(this));this.opField.setValue(d);
a.appendField(this.opField,"OP");this.opField.init();return a},helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.logic_operation.HELPURLS()[a]},setInputsInline:function(a){if(a){var d=this.getInput("A");d&&0<d.fieldRow.length&&(d.fieldRow.splice(0,1),d=this.getInput("B"),this.makeDropdown(d));d="AND"===this.opField.getValue()?Blockly.Msg.LANG_LOGIC_OPERATION_AND:Blockly.Msg.LANG_LOGIC_OPERATION_OR;for(var f,h=2;f=this.inputList[h];h++){var l=new Blockly.FieldLabel(d);f.appendField(l);
l.init()}}else for((d=this.getInput("B"))&&0<d.fieldRow.length&&(d.fieldRow.splice(0,1),d=this.getInput("A"),this.makeDropdown(d)),h=2;f=this.inputList[h];h++)f.fieldRow[0]&&f.fieldRow[0].dispose(),f.fieldRow.splice(0,1);Blockly.BlockSvg.prototype.setInputsInline.call(this,a)},updateFields:function(a){if(this.getInputsInline())for(var d="AND"===a?Blockly.Msg.LANG_LOGIC_OPERATION_AND:Blockly.Msg.LANG_LOGIC_OPERATION_OR,f,h=2;f=this.inputList[h];h++)f.fieldRow[0].setValue(d);1===this.itemCount_&&(d=
this.getField("IDENTITY"))&&d.setValue(Blockly.Blocks.logic_operation.IDENTITY(a));this.lastMutator&&(d=this.lastMutator.getTopBlocks(!1)[0])&&d.setFieldValue("AND"===a?Blockly.Msg.LANG_LOGIC_OPERATION_AND:Blockly.Msg.LANG_LOGIC_OPERATION_OR,"CONTAINER_TEXT");return a},typeblock:[{translatedName:Blockly.Msg.LANG_LOGIC_OPERATION_AND,dropDown:{titleName:"OP",value:"AND"}},{translatedName:Blockly.Msg.LANG_LOGIC_OPERATION_OR,dropDown:{titleName:"OP",value:"OR"}}]};
Blockly.Blocks.logic_operation.OPERATORS=function(){return[[Blockly.Msg.LANG_LOGIC_OPERATION_AND,"AND"],[Blockly.Msg.LANG_LOGIC_OPERATION_OR,"OR"]]};Blockly.Blocks.logic_operation.IDENTITY=function(a){return{AND:Blockly.Msg.LANG_LOGIC_BOOLEAN_TRUE,OR:Blockly.Msg.LANG_LOGIC_BOOLEAN_FALSE}[a]};Blockly.Blocks.logic_operation.HELPURLS=function(){return{AND:Blockly.Msg.LANG_LOGIC_OPERATION_HELPURL_AND,OR:Blockly.Msg.LANG_LOGIC_OPERATION_HELPURL_OR}};
Blockly.Blocks.logic_operation.TOOLTIPS=function(){return{AND:Blockly.Msg.LANG_LOGIC_OPERATION_TOOLTIP_AND,OR:Blockly.Msg.LANG_LOGIC_OPERATION_TOOLTIP_OR}};
Blockly.Blocks.logic_or={category:"Logic",init:function(){Blockly.Blocks.logic_operation.init.call(this,"OR")},mutationToDom:Blockly.Blocks.logic_operation.mutationToDom,domToMutation:Blockly.Blocks.logic_operation.domToMutation,decompose:Blockly.Blocks.logic_operation.decompose,countNumberOfInputs:Blockly.Blocks.logic_operation.countNumberOfInputs,compose:Blockly.Blocks.logic_operation.compose,saveConnections:Blockly.Blocks.logic_operation.saveConnections,addInput:Blockly.Blocks.logic_operation.addInput,
addEmptyInput:Blockly.Blocks.logic_operation.addEmptyInput,makeDropdown:Blockly.Blocks.logic_operation.makeDropdown,helpUrl:Blockly.Blocks.logic_operation.helpUrl,setInputsInline:Blockly.Blocks.logic_operation.setInputsInline,updateFields:Blockly.Blocks.logic_operation.updateFields};Blockly.Blocks.logic_mutator_item={init:function(){this.setColour(Blockly.LOGIC_CATEGORY_HUE);this.appendDummyInput().appendField("boolean");this.setPreviousStatement(!0);this.setNextStatement(!0);this.contextMenu=!1}};/*

 @fileoverview Math blocks for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Blocks.math={};Blockly.Blocks.math_number={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_NUMBER_HELPURL,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.appendDummyInput().appendField(new Blockly.FieldTextInput("0",Blockly.Blocks.math_number.validator),"NUM");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_MATH_NUMBER_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_MUTATOR_ITEM_INPUT_NUMBER}]};
Blockly.Blocks.math_number.validator=function(a){var d=Number(a||0);return window.isNaN(d)?(d=window.parseFloat(a||0),window.isNaN(d)?null:String(d)):a};
Blockly.Blocks.math_number_radix={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_NUMBER_RADIX_HELPURL,init:function(){this.dropdown=new Blockly.FieldDropdown([[Blockly.Msg.LANG_MATH_DECIMAL_FORMAT,"DEC"],[Blockly.Msg.LANG_MATH_BINARY_FORMAT,"BIN"],[Blockly.Msg.LANG_MATH_OCTAL_FORMAT,"OCT"],[Blockly.Msg.LANG_MATH_HEXADECIMAL_FORMAT,"HEX"]],this.dropdownListener);this.numberField=new Blockly.FieldTextInput("0",this.numberValidator);this.currentPrefix=Blockly.Blocks.math_number_radix.PREFIX.DEC;this.setColour(Blockly.MATH_CATEGORY_HUE);
this.appendDummyInput().appendField(this.dropdown,"OP").appendField(this.numberField,"NUM");this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_MATH_NUMBER_RADIX_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_NUMBER_RADIX_TITLE}],dropdownListener:function(a){this.getSourceBlock().currentPrefix=Blockly.Blocks.math_number_radix.PREFIX[a];var d=this.sourceBlock_.numberField,f=Blockly.Blocks.math_number_radix.PREFIX[this.getValue()],
h=Number(f+d.getValue()),l=Blockly.Blocks.math_number_radix.RADIX[a];AI.Blockly.multiselect.withoutMultiFieldUpdates(function(){d.setValue(h.toString(l))})},numberValidator:function(a){if(!a)return 0;var d=Number(this.getSourceBlock().currentPrefix+a);return window.isNaN(d)?null:a}};Blockly.Blocks.math_number_radix.PREFIX={DEC:"",BIN:"0b",OCT:"0o",HEX:"0x"};Blockly.Blocks.math_number_radix.RADIX={DEC:10,BIN:2,OCT:8,HEX:16};
Blockly.Blocks.math_compare={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_compare.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendValueInput("A").setCheck(null);this.appendValueInput("B").setCheck(null).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_compare.OPERATORS(),Blockly.Blocks.math_compare.onchange),"OP");this.setInputsInline(!0);
var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_compare.TOOLTIPS()[d]})},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_COMPARE_EQ,dropDown:{titleName:"OP",value:"EQ"}},{translatedName:Blockly.Msg.LANG_MATH_COMPARE_NEQ,dropDown:{titleName:"OP",value:"NEQ"}},{translatedName:Blockly.Msg.LANG_MATH_COMPARE_LT,dropDown:{titleName:"OP",value:"LT"}},{translatedName:Blockly.Msg.LANG_MATH_COMPARE_LTE,dropDown:{titleName:"OP",value:"LTE"}},{translatedName:Blockly.Msg.LANG_MATH_COMPARE_GT,
dropDown:{titleName:"OP",value:"GT"}},{translatedName:Blockly.Msg.LANG_MATH_COMPARE_GTE,dropDown:{titleName:"OP",value:"GTE"}}]};
Blockly.Blocks.math_compare.onchange=function(a){this.sourceBlock_&&("EQ"==a||"NEQ"==a?(this.sourceBlock_.getInput("A").setCheck(null),this.sourceBlock_.getInput("B").setCheck(null)):(this.sourceBlock_.getInput("A").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)),this.sourceBlock_.getInput("B").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT))))};
Blockly.Blocks.math_compare.OPERATORS=function(){return[[Blockly.Msg.LANG_MATH_COMPARE_EQ,"EQ"],[Blockly.Msg.LANG_MATH_COMPARE_NEQ,"NEQ"],[Blockly.Msg.LANG_MATH_COMPARE_LT,"LT"],[Blockly.Msg.LANG_MATH_COMPARE_LTE,"LTE"],[Blockly.Msg.LANG_MATH_COMPARE_GT,"GT"],[Blockly.Msg.LANG_MATH_COMPARE_GTE,"GTE"]]};
Blockly.Blocks.math_compare.TOOLTIPS=function(){return{EQ:Blockly.Msg.LANG_MATH_COMPARE_TOOLTIP_EQ,NEQ:Blockly.Msg.LANG_MATH_COMPARE_TOOLTIP_NEQ,LT:Blockly.Msg.LANG_MATH_COMPARE_TOOLTIP_LT,LTE:Blockly.Msg.LANG_MATH_COMPARE_TOOLTIP_LTE,GT:Blockly.Msg.LANG_MATH_COMPARE_TOOLTIP_GT,GTE:Blockly.Msg.LANG_MATH_COMPARE_TOOLTIP_GTE}};
Blockly.Blocks.math_compare.HELPURLS=function(){return{EQ:Blockly.Msg.LANG_MATH_COMPARE_HELPURL_EQ,NEQ:Blockly.Msg.LANG_MATH_COMPARE_HELPURL_NEQ,LT:Blockly.Msg.LANG_MATH_COMPARE_HELPURL_LT,LTE:Blockly.Msg.LANG_MATH_COMPARE_HELPURL_LTE,GT:Blockly.Msg.LANG_MATH_COMPARE_HELPURL_GT,GTE:Blockly.Msg.LANG_MATH_COMPARE_HELPURL_GTE}};
Blockly.Blocks.math_add={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_ARITHMETIC_HELPURL_ADD,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM0").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT));this.appendValueInput("NUM1").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_MATH_ARITHMETIC_ADD);this.setInputsInline(!0);
this.setTooltip(function(){return Blockly.Msg.LANG_MATH_ARITHMETIC_TOOLTIP_ADD});this.setMutator(new Blockly.icons.MutatorIcon(["math_mutator_item"],this));this.emptyInputName="EMPTY";this.repeatingInputName="NUM";this.itemCount_=2},mutationToDom:Blockly.mutationToDom,domToMutation:function(a){Blockly.domToMutation.call(this,a);1===this.itemCount_&&this.inputList[0].appendField("0 "+Blockly.Msg.LANG_MATH_ARITHMETIC_ADD)},decompose:function(a){return Blockly.decompose(a,"math_mutator_item",this)},
compose:function(a){Blockly.compose.call(this,a);1===this.itemCount_&&this.inputList[0].appendField("0 "+Blockly.Msg.LANG_MATH_ARITHMETIC_ADD)},saveConnections:Blockly.saveConnections,addEmptyInput:function(){this.appendDummyInput(this.emptyInputName).appendField(Blockly.Msg.LANG_MATH_ARITHMETIC_ADD)},addInput:function(a){var d=this.appendValueInput(this.repeatingInputName+a).setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT));0!==a&&d.appendField(Blockly.Msg.LANG_MATH_ARITHMETIC_ADD);
return d},updateContainerBlock:function(a){a.setFieldValue("+","CONTAINER_TEXT")},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_ARITHMETIC_ADD}]};Blockly.Blocks.math_mutator_item={init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.appendDummyInput().appendField("number");this.setPreviousStatement(!0);this.setNextStatement(!0);this.contextMenu=!1}};
Blockly.Blocks.math_subtract={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_ARITHMETIC_HELPURL_MINUS,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("A").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT));this.appendValueInput("B").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_MATH_ARITHMETIC_MINUS);
this.setInputsInline(!0);this.setTooltip(Blockly.Msg.LANG_MATH_ARITHMETIC_TOOLTIP_MINUS)},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_ARITHMETIC_MINUS}]};
Blockly.Blocks.math_multiply={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_ARITHMETIC_HELPURL_MULTIPLY,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM0").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT));this.appendValueInput("NUM1").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(AI.BlockUtils.times_symbol);this.setInputsInline(!0);
this.setTooltip(function(){return Blockly.Msg.LANG_MATH_ARITHMETIC_TOOLTIP_MULTIPLY});this.setMutator(new Blockly.icons.MutatorIcon(["math_mutator_item"],this));this.emptyInputName="EMPTY";this.repeatingInputName="NUM";this.itemCount_=2},mutationToDom:Blockly.mutationToDom,domToMutation:function(a){Blockly.domToMutation.call(this,a);1===this.itemCount_&&this.inputList[0].appendField("1 "+AI.BlockUtils.times_symbol)},decompose:function(a){return Blockly.decompose(a,"math_mutator_item",this)},compose:function(a){Blockly.compose.call(this,
a);1===this.itemCount_&&this.inputList[0].appendField("1 "+AI.BlockUtils.times_symbol)},saveConnections:Blockly.saveConnections,addEmptyInput:function(){this.appendDummyInput(this.emptyInputName).appendField(AI.BlockUtils.times_symbol)},addInput:function(a){var d=this.appendValueInput(this.repeatingInputName+a).setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT));0!==a&&d.appendField(AI.BlockUtils.times_symbol);return d},updateContainerBlock:function(a){a.setFieldValue(AI.BlockUtils.times_symbol,
"CONTAINER_TEXT")},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_ARITHMETIC_MULTIPLY}]};
Blockly.Blocks.math_division={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_ARITHMETIC_HELPURL_DIVIDE,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("A").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT));this.appendValueInput("B").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_MATH_ARITHMETIC_DIVIDE);
this.setInputsInline(!0);this.setTooltip(Blockly.Msg.LANG_MATH_ARITHMETIC_TOOLTIP_DIVIDE)},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_ARITHMETIC_DIVIDE}]};
Blockly.Blocks.math_power={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_ARITHMETIC_HELPURL_POWER,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("A").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT));this.appendValueInput("B").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_MATH_ARITHMETIC_POWER);this.setInputsInline(!0);
this.setTooltip(Blockly.Msg.LANG_MATH_ARITHMETIC_TOOLTIP_POWER)},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_ARITHMETIC_POWER}]};
Blockly.Blocks.math_bitwise={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_bitwise.HELPURLS()[a]},init:function(){var a=this;this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM0").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_bitwise.OPERATORS),"OP");this.appendValueInput("NUM1").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",
AI.BlockUtils.INPUT));this.setInputsInline(!1);this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_bitwise.TOOLTIPS()[d]});this.setMutator(new Blockly.icons.MutatorIcon(["math_mutator_item"],this));this.itemCount_=2;this.valuesToSave={OP:null};this.emptyInputName="EMPTY";this.repeatingInputName="NUM"},mutationToDom:Blockly.mutationToDom,domToMutation:Blockly.domToMutation,decompose:function(a){return Blockly.decompose(a,"math_mutator_item",this)},compose:Blockly.compose,
saveConnections:Blockly.saveConnections,addEmptyInput:function(){this.appendDummyInput(this.emptyInputName).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_bitwise.OPERATORS),"OP");this.setFieldValue(this.valuesToSave.OP,"OP")},addInput:function(a){var d=this.appendValueInput(this.repeatingInputName+a).setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT));0==a&&(d.appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_bitwise.OPERATORS),"OP"),this.setFieldValue(this.valuesToSave.OP,
"OP"));return d},updateContainerBlock:function(a){for(var d=0;d<Blockly.Blocks.math_bitwise.OPERATORS.length;d++)Blockly.Blocks.math_bitwise.OPERATORS[d][1]==this.getFieldValue("OP")&&a.setFieldValue(Blockly.Blocks.math_bitwise.OPERATORS[d][0],"CONTAINER_TEXT")},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_BITWISE_AND,dropDown:{titleName:"OP",value:"BITAND"}},{translatedName:Blockly.Msg.LANG_MATH_BITWISE_IOR,dropDown:{titleName:"OP",value:"BITIOR"}},{translatedName:Blockly.Msg.LANG_MATH_BITWISE_XOR,
dropDown:{titleName:"OP",value:"BITXOR"}}]};Blockly.Blocks.math_bitwise.OPERATORS=function(){return[[Blockly.Msg.LANG_MATH_BITWISE_AND,"BITAND"],[Blockly.Msg.LANG_MATH_BITWISE_IOR,"BITIOR"],[Blockly.Msg.LANG_MATH_BITWISE_XOR,"BITXOR"]]};Blockly.Blocks.math_bitwise.TOOLTIPS=function(){return{BITAND:Blockly.Msg.LANG_MATH_BITWISE_TOOLTIP_AND,BITIOR:Blockly.Msg.LANG_MATH_BITWISE_TOOLTIP_IOR,BITXOR:Blockly.Msg.LANG_MATH_BITWISE_TOOLTIP_XOR}};
Blockly.Blocks.math_bitwise.HELPURLS=function(){return{BITAND:Blockly.Msg.LANG_MATH_BITWISE_HELPURL_AND,BITIOR:Blockly.Msg.LANG_MATH_BITWISE_HELPURL_IOR,BITXOR:Blockly.Msg.LANG_MATH_BITWISE_HELPURL_XOR}};
Blockly.Blocks.math_random_int={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_RANDOM_INT_HELPURL,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_MATH_RANDOM_INT_INPUT,["FROM",a,Blockly.inputs.Align.RIGHT],["TO",a,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setInputsInline(!0);this.setTooltip(Blockly.Msg.LANG_MATH_RANDOM_INT_TOOLTIP)},
typeblock:[{translatedName:Blockly.Msg.LANG_MATH_RANDOM_INT_TITLE_RANDOM}]};Blockly.Blocks.math_random_float={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_RANDOM_FLOAT_HELPURL,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendDummyInput().appendField(Blockly.Msg.LANG_MATH_RANDOM_FLOAT_TITLE_RANDOM);this.setTooltip(Blockly.Msg.LANG_MATH_RANDOM_FLOAT_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_RANDOM_FLOAT_TITLE_RANDOM}]};
Blockly.Blocks.math_random_set_seed={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_RANDOM_SEED_HELPURL,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!1,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_MATH_RANDOM_SEED_TITLE_RANDOM).appendField(Blockly.Msg.LANG_MATH_RANDOM_SEED_INPUT_TO);this.setPreviousStatement(!0);this.setNextStatement(!0);
this.setTooltip(Blockly.Msg.LANG_MATH_RANDOM_SEED_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_RANDOM_SEED_TITLE_RANDOM}]};
Blockly.Blocks.math_on_list={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_on_list.HELPURLS()[a]},init:function(){var a=this;this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM0").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_on_list.OPERATORS()),"OP");this.appendValueInput("NUM1").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",
AI.BlockUtils.INPUT));this.setInputsInline(!1);this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_on_list.TOOLTIPS()[d]});this.setMutator(new Blockly.icons.MutatorIcon(["math_mutator_item"],this));this.itemCount_=2;this.valuesToSave={OP:null};this.emptyInputName="EMPTY";this.repeatingInputName="NUM"},mutationToDom:Blockly.mutationToDom,domToMutation:Blockly.domToMutation,decompose:function(a){return Blockly.decompose(a,"math_mutator_item",this)},compose:Blockly.compose,
saveConnections:Blockly.saveConnections,addEmptyInput:function(){this.appendDummyInput(this.emptyInputName).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_on_list.OPERATORS()),"OP");this.setFieldValue(this.valuesToSave.OP,"OP")},addInput:function(a){var d=this.appendValueInput(this.repeatingInputName+a).setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT));0==a&&(d.appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_on_list.OPERATORS()),"OP"),this.setFieldValue(this.valuesToSave.OP,
"OP"));return d},updateContainerBlock:function(a){for(var d=Blockly.Blocks.math_on_list.OPERATORS(),f=0;f<d.length;f++)d[f][1]==this.getFieldValue("OP")&&a.setFieldValue(d[f][0],"CONTAINER_TEXT")},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_MIN,dropDown:{titleName:"OP",value:"MIN"}},{translatedName:Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_MAX,dropDown:{titleName:"OP",value:"MAX"}}]};
Blockly.Blocks.math_on_list.OPERATORS=function(){return[[Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_MIN,"MIN"],[Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_MAX,"MAX"]]};Blockly.Blocks.math_on_list.TOOLTIPS=function(){return{MIN:Blockly.Msg.LANG_MATH_ONLIST_TOOLTIP_MIN,MAX:Blockly.Msg.LANG_MATH_ONLIST_TOOLTIP_MAX}};Blockly.Blocks.math_on_list.HELPURLS=function(){return{MIN:Blockly.Msg.LANG_MATH_ONLIST_HELPURL_MIN,MAX:Blockly.Msg.LANG_MATH_ONLIST_HELPURL_MAX}};
Blockly.Blocks.math_on_list2={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_on_list2.HELPURLS()[a]},init:function(){var a=this;this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_on_list2.OPERATORS()),"OP");this.setTooltip(function(){var d=
a.getFieldValue("OP");return Blockly.Blocks.math_on_list2.TOOLTIPS()[d]})},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_AVG,dropDown:{titleName:"OP",value:"AVG"}},{translatedName:Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_MIN_LIST,dropDown:{titleName:"OP",value:"MIN"}},{translatedName:Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_MAX_LIST,dropDown:{titleName:"OP",value:"MAX"}},{translatedName:Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_GM,dropDown:{titleName:"OP",value:"GM"}},{translatedName:Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_SD,
dropDown:{titleName:"OP",value:"SD"}},{translatedName:Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_SE,dropDown:{titleName:"OP",value:"SE"}}]};Blockly.Blocks.math_on_list2.OPERATORS=function(){return[[Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_AVG,"AVG"],[Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_MIN_LIST,"MIN"],[Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_MAX_LIST,"MAX"],[Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_GM,"GM"],[Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_SD,"SD"],[Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_SE,"SE"]]};
Blockly.Blocks.math_on_list2.TOOLTIPS=function(){return{AVG:Blockly.Msg.LANG_MATH_ONLIST_TOOLTIP_AVG,MIN:Blockly.Msg.LANG_MATH_ONLIST_TOOLTIP_MIN_LIST,MAX:Blockly.Msg.LANG_MATH_ONLIST_TOOLTIP_MAX_LIST,GM:Blockly.Msg.LANG_MATH_ONLIST_TOOLTIP_GM,SD:Blockly.Msg.LANG_MATH_ONLIST_TOOLTIP_SD,SE:Blockly.Msg.LANG_MATH_ONLIST_TOOLTIP_SE}};
Blockly.Blocks.math_on_list2.HELPURLS=function(){return{AVG:Blockly.Msg.LANG_MATH_ONLIST_HELPURL_AVG,MIN:Blockly.Msg.LANG_MATH_ONLIST_HELPURL_MIN_LIST,MAX:Blockly.Msg.LANG_MATH_ONLIST_HELPURL_MAX_LIST,GM:Blockly.Msg.LANG_MATH_ONLIST_HELPURL_GM,SD:Blockly.Msg.LANG_MATH_ONLIST_HELPURL_SD,SE:Blockly.Msg.LANG_MATH_ONLIST_HELPURL_SE}};
Blockly.Blocks.math_mode_of_list={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_ONLIST_HELPURL_MODE,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.appendValueInput("LIST").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_MATH_LIST_MODE_TITLE);this.setTooltip(Blockly.Msg.LANG_MATH_ONLIST_TOOLTIP_MODE)},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_ONLIST_OPERATOR_MODE}]};
Blockly.Blocks.math_single={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_single.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_single.OPERATORS()),"OP");var a=this;this.setTooltip(function(){var d=
a.getFieldValue("OP");return Blockly.Blocks.math_single.TOOLTIPS()[d]})},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_SINGLE_OP_ROOT,dropDown:{titleName:"OP",value:"ROOT"}},{translatedName:Blockly.Msg.LANG_MATH_SINGLE_OP_ABSOLUTE,dropDown:{titleName:"OP",value:"ABS"}},{translatedName:Blockly.Msg.LANG_MATH_SINGLE_OP_NEG,dropDown:{titleName:"OP",value:"NEG"}},{translatedName:Blockly.Msg.LANG_MATH_SINGLE_OP_LN,dropDown:{titleName:"OP",value:"LN"}},{translatedName:Blockly.Msg.LANG_MATH_SINGLE_OP_EXP,
dropDown:{titleName:"OP",value:"EXP"}},{translatedName:Blockly.Msg.LANG_MATH_ROUND_OPERATOR_ROUND,dropDown:{titleName:"OP",value:"ROUND"}},{translatedName:Blockly.Msg.LANG_MATH_ROUND_OPERATOR_CEILING,dropDown:{titleName:"OP",value:"CEILING"}},{translatedName:Blockly.Msg.LANG_MATH_ROUND_OPERATOR_FLOOR,dropDown:{titleName:"OP",value:"FLOOR"}}]};
Blockly.Blocks.math_single.OPERATORS=function(){return[[Blockly.Msg.LANG_MATH_SINGLE_OP_ROOT,"ROOT"],[Blockly.Msg.LANG_MATH_SINGLE_OP_ABSOLUTE,"ABS"],[Blockly.Msg.LANG_MATH_SINGLE_OP_NEG,"NEG"],[Blockly.Msg.LANG_MATH_SINGLE_OP_LN,"LN"],[Blockly.Msg.LANG_MATH_SINGLE_OP_EXP,"EXP"],[Blockly.Msg.LANG_MATH_ROUND_OPERATOR_ROUND,"ROUND"],[Blockly.Msg.LANG_MATH_ROUND_OPERATOR_CEILING,"CEILING"],[Blockly.Msg.LANG_MATH_ROUND_OPERATOR_FLOOR,"FLOOR"]]};
Blockly.Blocks.math_single.TOOLTIPS=function(){return{ROOT:Blockly.Msg.LANG_MATH_SINGLE_TOOLTIP_ROOT,ABS:Blockly.Msg.LANG_MATH_SINGLE_TOOLTIP_ABS,NEG:Blockly.Msg.LANG_MATH_SINGLE_TOOLTIP_NEG,LN:Blockly.Msg.LANG_MATH_SINGLE_TOOLTIP_LN,EXP:Blockly.Msg.LANG_MATH_SINGLE_TOOLTIP_EXP,ROUND:Blockly.Msg.LANG_MATH_ROUND_TOOLTIP_ROUND,CEILING:Blockly.Msg.LANG_MATH_ROUND_TOOLTIP_CEILING,FLOOR:Blockly.Msg.LANG_MATH_ROUND_TOOLTIP_FLOOR}};
Blockly.Blocks.math_single.HELPURLS=function(){return{ROOT:Blockly.Msg.LANG_MATH_SINGLE_HELPURL_ROOT,ABS:Blockly.Msg.LANG_MATH_SINGLE_HELPURL_ABS,NEG:Blockly.Msg.LANG_MATH_SINGLE_HELPURL_NEG,LN:Blockly.Msg.LANG_MATH_SINGLE_HELPURL_LN,EXP:Blockly.Msg.LANG_MATH_SINGLE_HELPURL_EXP,ROUND:Blockly.Msg.LANG_MATH_ROUND_HELPURL_ROUND,CEILING:Blockly.Msg.LANG_MATH_ROUND_HELPURL_CEILING,FLOOR:Blockly.Msg.LANG_MATH_ROUND_HELPURL_FLOOR}};
Blockly.Blocks.math_abs={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_single.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_single.OPERATORS),"OP");this.setFieldValue("ABS","OP");
var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_single.TOOLTIPS()[d]})}};
Blockly.Blocks.math_neg={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_single.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_single.OPERATORS),"OP");this.setFieldValue("NEG","OP");
var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_single.TOOLTIPS()[d]})}};
Blockly.Blocks.math_round={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_single.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_single.OPERATORS),"OP");this.setFieldValue("ROUND","OP");
var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_single.TOOLTIPS()[d]})}};
Blockly.Blocks.math_ceiling={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_single.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_single.OPERATORS),"OP");this.setFieldValue("CEILING",
"OP");var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_single.TOOLTIPS()[d]})}};
Blockly.Blocks.math_floor={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_single.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_single.OPERATORS),"OP");this.setFieldValue("FLOOR","OP");
var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_single.TOOLTIPS()[d]})}};
Blockly.Blocks.math_divide={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_divide.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("DIVIDEND").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_divide.OPERATORS()),"OP");this.appendValueInput("DIVISOR").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",
AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_MATH_DIVIDE);this.setInputsInline(!0);var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_divide.TOOLTIPS()[d]})},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_DIVIDE_OPERATOR_MODULO,dropDown:{titleName:"OP",value:"MODULO"}},{translatedName:Blockly.Msg.LANG_MATH_DIVIDE_OPERATOR_REMAINDER,dropDown:{titleName:"OP",value:"REMAINDER"}},{translatedName:Blockly.Msg.LANG_MATH_DIVIDE_OPERATOR_QUOTIENT,dropDown:{titleName:"OP",
value:"QUOTIENT"}}]};Blockly.Blocks.math_divide.OPERATORS=function(){return[[Blockly.Msg.LANG_MATH_DIVIDE_OPERATOR_MODULO,"MODULO"],[Blockly.Msg.LANG_MATH_DIVIDE_OPERATOR_REMAINDER,"REMAINDER"],[Blockly.Msg.LANG_MATH_DIVIDE_OPERATOR_QUOTIENT,"QUOTIENT"]]};Blockly.Blocks.math_divide.TOOLTIPS=function(){return{MODULO:Blockly.Msg.LANG_MATH_DIVIDE_TOOLTIP_MODULO,REMAINDER:Blockly.Msg.LANG_MATH_DIVIDE_TOOLTIP_REMAINDER,QUOTIENT:Blockly.Msg.LANG_MATH_DIVIDE_TOOLTIP_QUOTIENT}};
Blockly.Blocks.math_divide.HELPURLS=function(){return{MODULO:Blockly.Msg.LANG_MATH_DIVIDE_HELPURL_MODULO,REMAINDER:Blockly.Msg.LANG_MATH_DIVIDE_HELPURL_REMAINDER,QUOTIENT:Blockly.Msg.LANG_MATH_DIVIDE_HELPURL_QUOTIENT}};
Blockly.Blocks.math_trig={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_trig.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_trig.OPERATORS()),"OP");var a=this;this.setTooltip(function(){var d=
a.getFieldValue("OP");return Blockly.Blocks.math_trig.TOOLTIPS()[d]})},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_TRIG_SIN,dropDown:{titleName:"OP",value:"SIN"}},{translatedName:Blockly.Msg.LANG_MATH_TRIG_COS,dropDown:{titleName:"OP",value:"COS"}},{translatedName:Blockly.Msg.LANG_MATH_TRIG_TAN,dropDown:{titleName:"OP",value:"TAN"}},{translatedName:Blockly.Msg.LANG_MATH_TRIG_ASIN,dropDown:{titleName:"OP",value:"ASIN"}},{translatedName:Blockly.Msg.LANG_MATH_TRIG_ACOS,dropDown:{titleName:"OP",
value:"ACOS"}},{translatedName:Blockly.Msg.LANG_MATH_TRIG_ATAN,dropDown:{titleName:"OP",value:"ATAN"}}]};Blockly.Blocks.math_trig.OPERATORS=function(){return[[Blockly.Msg.LANG_MATH_TRIG_SIN,"SIN"],[Blockly.Msg.LANG_MATH_TRIG_COS,"COS"],[Blockly.Msg.LANG_MATH_TRIG_TAN,"TAN"],[Blockly.Msg.LANG_MATH_TRIG_ASIN,"ASIN"],[Blockly.Msg.LANG_MATH_TRIG_ACOS,"ACOS"],[Blockly.Msg.LANG_MATH_TRIG_ATAN,"ATAN"]]};
Blockly.Blocks.math_trig.TOOLTIPS=function(){return{SIN:Blockly.Msg.LANG_MATH_TRIG_TOOLTIP_SIN,COS:Blockly.Msg.LANG_MATH_TRIG_TOOLTIP_COS,TAN:Blockly.Msg.LANG_MATH_TRIG_TOOLTIP_TAN,ASIN:Blockly.Msg.LANG_MATH_TRIG_TOOLTIP_ASIN,ACOS:Blockly.Msg.LANG_MATH_TRIG_TOOLTIP_ACOS,ATAN:Blockly.Msg.LANG_MATH_TRIG_TOOLTIP_ATAN}};
Blockly.Blocks.math_trig.HELPURLS=function(){return{SIN:Blockly.Msg.LANG_MATH_TRIG_HELPURL_SIN,COS:Blockly.Msg.LANG_MATH_TRIG_HELPURL_COS,TAN:Blockly.Msg.LANG_MATH_TRIG_HELPURL_TAN,ASIN:Blockly.Msg.LANG_MATH_TRIG_HELPURL_ASIN,ACOS:Blockly.Msg.LANG_MATH_TRIG_HELPURL_ACOS,ATAN:Blockly.Msg.LANG_MATH_TRIG_HELPURL_ATAN}};
Blockly.Blocks.math_cos={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_trig.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_trig.OPERATORS),"OP");this.setFieldValue("COS","OP");var a=
this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_trig.TOOLTIPS()[d]})}};
Blockly.Blocks.math_tan={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_trig.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_trig.OPERATORS),"OP");this.setFieldValue("TAN","OP");var a=
this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_trig.TOOLTIPS()[d]})}};
Blockly.Blocks.math_atan2={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_TRIG_HELPURL_ATAN2,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendDummyInput().appendField(Blockly.Msg.LANG_MATH_TRIG_ATAN2);this.appendValueInput("Y").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_MATH_TRIG_ATAN2_Y).setAlign(Blockly.inputs.Align.RIGHT);this.appendValueInput("X").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",
AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_MATH_TRIG_ATAN2_X).setAlign(Blockly.inputs.Align.RIGHT);this.setInputsInline(!1);this.setTooltip(Blockly.Msg.LANG_MATH_TRIG_TOOLTIP_ATAN2)},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_TRIG_ATAN2}]};
Blockly.Blocks.math_convert_angles={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_convert_angles.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").setCheck(AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_MATH_CONVERT_ANGLES_TITLE_CONVERT).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_convert_angles.OPERATORS()),
"OP");var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_convert_angles.TOOLTIPS()[d]})},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_CONVERT_ANGLES_TITLE_CONVERT+" "+Blockly.Msg.LANG_MATH_CONVERT_ANGLES_OP_RAD_TO_DEG,dropDown:{titleName:"OP",value:"RADIANS_TO_DEGREES"}},{translatedName:Blockly.Msg.LANG_MATH_CONVERT_ANGLES_TITLE_CONVERT+" "+Blockly.Msg.LANG_MATH_CONVERT_ANGLES_OP_DEG_TO_RAD,dropDown:{titleName:"OP",value:"DEGREES_TO_RADIANS"}}]};
Blockly.Blocks.math_convert_angles.OPERATORS=function(){return[[Blockly.Msg.LANG_MATH_CONVERT_ANGLES_OP_RAD_TO_DEG,"RADIANS_TO_DEGREES"],[Blockly.Msg.LANG_MATH_CONVERT_ANGLES_OP_DEG_TO_RAD,"DEGREES_TO_RADIANS"]]};Blockly.Blocks.math_convert_angles.TOOLTIPS=function(){return{RADIANS_TO_DEGREES:Blockly.Msg.LANG_MATH_CONVERT_ANGLES_TOOLTIP_RAD_TO_DEG,DEGREES_TO_RADIANS:Blockly.Msg.LANG_MATH_CONVERT_ANGLES_TOOLTIP_DEG_TO_RAD}};
Blockly.Blocks.math_convert_angles.HELPURLS=function(){return{RADIANS_TO_DEGREES:Blockly.Msg.LANG_MATH_CONVERT_ANGLES_HELPURL_RAD_TO_DEG,DEGREES_TO_RADIANS:Blockly.Msg.LANG_MATH_CONVERT_ANGLES_HELPURL_DEG_TO_RAD}};
Blockly.Blocks.math_format_as_decimal={category:"Math",helpUrl:Blockly.Msg.LANG_MATH_FORMAT_AS_DECIMAL_HELPURL,init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_MATH_FORMAT_AS_DECIMAL_INPUT,["NUM",a,Blockly.inputs.Align.RIGHT],["PLACES",a,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setInputsInline(!1);
this.setTooltip(Blockly.Msg.LANG_MATH_FORMAT_AS_DECIMAL_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_FORMAT_AS_DECIMAL_TITLE}]};
Blockly.Blocks.math_is_a_number={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_is_a_number.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_is_a_number.OPERATORS()),"OP");var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.math_is_a_number.TOOLTIPS()[d]})},
typeblock:[{translatedName:Blockly.Msg.LANG_MATH_IS_A_NUMBER_INPUT_NUM,dropDown:{titleName:"OP",value:"NUMBER"}},{translatedName:Blockly.Msg.LANG_MATH_IS_A_DECIMAL_INPUT_NUM,dropDown:{titleName:"OP",value:"BASE10"}},{translatedName:Blockly.Msg.LANG_MATH_IS_A_HEXADECIMAL_INPUT_NUM,dropDown:{titleName:"OP",value:"HEXADECIMAL"}},{translatedName:Blockly.Msg.LANG_MATH_IS_A_BINARY_INPUT_NUM,dropDown:{titleName:"OP",value:"BINARY"}}]};
Blockly.Blocks.math_is_a_number.OPERATORS=function(){return[[Blockly.Msg.LANG_MATH_IS_A_NUMBER_INPUT_NUM,"NUMBER"],[Blockly.Msg.LANG_MATH_IS_A_DECIMAL_INPUT_NUM,"BASE10"],[Blockly.Msg.LANG_MATH_IS_A_HEXADECIMAL_INPUT_NUM,"HEXADECIMAL"],[Blockly.Msg.LANG_MATH_IS_A_BINARY_INPUT_NUM,"BINARY"]]};
Blockly.Blocks.math_is_a_number.TOOLTIPS=function(){return{NUMBER:Blockly.Msg.LANG_MATH_IS_A_NUMBER_TOOLTIP,BASE10:Blockly.Msg.LANG_MATH_IS_A_DECIMAL_TOOLTIP,HEXADECIMAL:Blockly.Msg.LANG_MATH_IS_A_HEXADECIMAL_TOOLTIP,BINARY:Blockly.Msg.LANG_MATH_IS_A_BINARY_TOOLTIP}};Blockly.Blocks.math_is_a_number.HELPURLS=function(){return{NUMBER:Blockly.Msg.LANG_MATH_IS_A_NUMBER_HELPURL,BASE10:Blockly.Msg.LANG_MATH_IS_A_DECIMAL_HELPURL,HEXADECIMAL:Blockly.Msg.LANG_MATH_IS_A_HEXADECIMAL_HELPURL,BINARY:Blockly.Msg.LANG_MATH_IS_A_BINARY_HELPURL}};
Blockly.Blocks.math_convert_number={category:"Math",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.math_convert_number.HELPURLS()[a]},init:function(){this.setColour(Blockly.MATH_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));this.appendValueInput("NUM").appendField(Blockly.Msg.LANG_MATH_CONVERT_NUMBER_TITLE_CONVERT).appendField(new Blockly.FieldDropdown(Blockly.Blocks.math_convert_number.OPERATORS()),"OP");var a=this;this.setTooltip(function(){var d=
a.getFieldValue("OP");return Blockly.Blocks.math_convert_number.TOOLTIPS()[d]})},typeblock:[{translatedName:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_OP_DEC_TO_HEX,dropDown:{titleName:"OP",value:"DEC_TO_HEX"}},{translatedName:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_OP_HEX_TO_DEC,dropDown:{titleName:"OP",value:"HEX_TO_DEC"}},{translatedName:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_OP_DEC_TO_BIN,dropDown:{titleName:"OP",value:"DEC_TO_BIN"}},{translatedName:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_OP_BIN_TO_DEC,dropDown:{titleName:"OP",
value:"BIN_TO_DEC"}}]};Blockly.Blocks.math_convert_number.OPERATORS=function(){return[[Blockly.Msg.LANG_MATH_CONVERT_NUMBER_OP_DEC_TO_HEX,"DEC_TO_HEX"],[Blockly.Msg.LANG_MATH_CONVERT_NUMBER_OP_HEX_TO_DEC,"HEX_TO_DEC"],[Blockly.Msg.LANG_MATH_CONVERT_NUMBER_OP_DEC_TO_BIN,"DEC_TO_BIN"],[Blockly.Msg.LANG_MATH_CONVERT_NUMBER_OP_BIN_TO_DEC,"BIN_TO_DEC"]]};
Blockly.Blocks.math_convert_number.TOOLTIPS=function(){return{DEC_TO_HEX:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_TOOLTIP_DEC_TO_HEX,HEX_TO_DEC:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_TOOLTIP_HEX_TO_DEC,DEC_TO_BIN:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_TOOLTIP_DEC_TO_BIN,BIN_TO_DEC:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_TOOLTIP_BIN_TO_DEC}};
Blockly.Blocks.math_convert_number.HELPURLS=function(){return{DEC_TO_HEX:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_HELPURL_DEC_TO_HEX,HEX_TO_DEC:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_HELPURL_HEX_TO_DEC,DEC_TO_BIN:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_HELPURL_DEC_TO_BIN,BIN_TO_DEC:Blockly.Msg.LANG_MATH_CONVERT_NUMBER_HELPURL_BIN_TO_DEC}};/*

 @fileoverview Visual blocks editor for App Inventor
 Methods to handle serialization of the blocks workspace

 @author sharon@google.com (Sharon Perl)
*/
AI.Blockly.FieldProcedure={};AI.Blockly.AIProcedure={};AI.Blockly.FieldProcedure.defaultValue=["",""];
AI.Blockly.FieldProcedure.onChange=function(a){var d=this.block.getTopWorkspace();if(this.block.editable_&&(a=d.getProcedureDatabase().getProcedure(a))){d=a.getFieldValue("NAME");if(!this.block.isRenaming&&(""==d||d!=this.getValue()))for(let f=0;null!=this.block.getInput("ARG"+f);f++)this.block.removeInput("ARG"+f);this.doValueUpdate_(d);this.block.isRenaming?this.block.render():this.block.setProcedureParameters(a.arguments_,a.paramIds_,!0);return d}};
AI.Blockly.AIProcedure.getProcedureNames=function(a,d){d=(d||Blockly.common.getMainWorkspace()).getTopBlocks();for(var f=[AI.Blockly.FieldProcedure.defaultValue],h=0;h<d.length;h++){var l=d[h].getFieldValue("NAME");"procedures_defnoreturn"!=d[h].type||a?"procedures_defreturn"==d[h].type&&a&&f.push([l,l]):f.push([l,l])}1<f.length&&f.splice(0,1);return f};
AI.Blockly.AIProcedure.getProcedureDeclarationBlocks=function(a,d){d=(d||Blockly.common.getMainWorkspace()).getTopBlocks(!1);for(var f=[],h=0;h<d.length;h++)"procedures_defnoreturn"!=d[h].type||a?"procedures_defreturn"==d[h].type&&a&&f.push(d[h]):f.push(d[h]);return f};
AI.Blockly.AIProcedure.getAllProcedureDeclarationBlocksExcept=function(a){for(var d=a.workspace.getTopBlocks(!1),f=[],h=0;h<d.length;h++)"procedures_defnoreturn"!==d[h].type&&"procedures_defreturn"!==d[h].type||d[h]===a||f.push(d[h]);return f};AI.Blockly.AIProcedure.getAllProcedureDeclarationNames=function(){return AI.Blockly.AIProcedure.getAllProcedureDeclarationBlocks().map(function(a){return a.getFieldValue("NAME")})};
AI.Blockly.AIProcedure.removeProcedureValues=function(a,d){if(d&&d===Blockly.common.getMainWorkspace()){d=d.getAllBlocks();for(var f=0;f<d.length;f++){var h=d[f];"procedures_callreturn"!=h.type&&"procedures_callnoreturn"!=h.type||h.getFieldValue("PROCNAME")!=a||h.removeProcedureValue()}}};
AI.Blockly.AIProcedure.renameProcedure=function(a){if(this.sourceBlock_&&this.sourceBlock_.isInFlyout)return a;var d=this.oldName_||this.text_;a=Blockly.LexicalVariable.makeLegalIdentifier(a);var f=AI.Blockly.AIProcedure.getAllProcedureDeclarationBlocksExcept(this.sourceBlock_).map(function(m){return m.getFieldValue("NAME")});a=Blockly.FieldLexicalVariable.nameNotIn(a,f);f=this.sourceBlock_.workspace.getAllBlocks();for(var h=0;h<f.length;h++){var l=f[h].renameProcedure;l&&l.call(f[h],d,a)}return this.oldName_=
a};/*

 @fileoverview Procedure blocks for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Blocks.procedures={};
Blockly.Blocks.procedures_defnoreturn={category:"Procedures",helpUrl:Blockly.Msg.LANG_PROCEDURES_DEFNORETURN_HELPURL,bodyInputName:"STACK",init:function(){this.setColour(Blockly.PROCEDURE_CATEGORY_HUE);var a=Blockly.Procedures.findLegalName(Blockly.Msg.LANG_PROCEDURES_DEFNORETURN_PROCEDURE,this);this.appendDummyInput("HEADER").appendField(Blockly.Msg.LANG_PROCEDURES_DEFNORETURN_DEFINE).appendField(new AI.Blockly.FieldProcedureName(a),"NAME");this.horizontalParameters=!0;this.appendStatementInput("STACK").appendField(Blockly.Msg.LANG_PROCEDURES_DEFNORETURN_DO);this.setMutator(new Blockly.icons.MutatorIcon(["procedures_mutatorarg"],
this));this.setTooltip(Blockly.Msg.LANG_PROCEDURES_DEFNORETURN_TOOLTIP);this.arguments_=[];this.warnings=[{name:"checkEmptySockets",sockets:["STACK"]}];this.lexicalVarPrefix=Blockly.localNamePrefix},withLexicalVarsAndPrefix:function(a,d){a=this.declaredNames();for(let f=0;f<a.length;f++)d(a[f],this.lexicalVarPrefix)},onchange:function(){this.arguments_=this.declaredNames()},updateParams_:function(a){a&&(this.arguments_=a);a=!1;for(var d={},f=0;f<this.arguments_.length;f++){if(d["arg_"+this.arguments_[f].toLowerCase()]){a=
!0;break}d["arg_"+this.arguments_[f].toLowerCase()]=!0}a?this.setWarningText(Blockly.Msg.LANG_PROCEDURES_DEF_DUPLICATE_WARNING):this.setWarningText(null);f=this.getFieldValue("NAME");a=this.inputList[this.inputList.length-1];d=this.rendered;this.rendered=!1;var h=this;Blockly.FieldParameterFlydown.withChangeHanderDisabled(function(){h.removeInput("HEADER")});var l=this.inputList.length-1;if(0<l&&this.getInput("VAR0"))for(var m=0;m<l;m++)try{Blockly.FieldParameterFlydown.withChangeHanderDisabled(function(){h.removeInput("VAR"+
m)})}catch(p){console.log(p)}this.inputList=[];f=this.appendDummyInput("HEADER").appendField(Blockly.Msg.LANG_PROCEDURES_DEFNORETURN_DEFINE).appendField(new AI.Blockly.FieldProcedureName(f),"NAME");if(this.horizontalParameters)for(m=0;m<this.arguments_.length;m++)f.appendField(" ").appendField(this.parameterFlydown(m),"VAR"+m);else for(m=0;m<this.arguments_.length;m++)this.appendDummyInput("VAR"+m).appendField(this.parameterFlydown(m),"VAR"+m).setAlign(Blockly.inputs.Align.RIGHT);this.inputList=this.inputList.concat(a);
this.rendered=d;for(m=0;m<this.inputList.length;m++)this.inputList[m].init();this.rendered&&this.render();this.workspace.loadCompleted&&Blockly.Procedures.mutateCallers(this)},parameterFlydown:function(a){var d=this;return new Blockly.FieldParameterFlydown(this.arguments_[a],!0,this.horizontalParameters?Blockly.FieldFlydown.DISPLAY_BELOW:Blockly.FieldFlydown.DISPLAY_RIGHT,function(f){d.arguments_[a]=f;Blockly.Procedures.mutateCallers(d);if(d.mutator&&d.mutator.rootBlock_){for(var h=0,l=d.mutator.rootBlock_.getInputTargetBlock("STACK");l&&
h<a;)l=l.nextConnection&&l.nextConnection.targetBlock(),h++;l&&h==a&&Blockly.Field.prototype.setText.call(l.getField("NAME"),f)}})},setParameterOrientation:function(a){0!=this.getParameters().length&&a!==this.horizontalParameters&&(this.horizontalParameters=a,this.updateParams_(),Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this,"parameter_orientation",null,!this.horizontalParameters,this.horizontalParameters)))},mutationToDom:function(){var a=document.createElement("mutation");
this.horizontalParameters||a.setAttribute("vertical_parameters","true");for(var d=0;d<this.arguments_.length;d++){var f=document.createElement("arg");f.setAttribute("name",this.arguments_[d]);a.appendChild(f)}return a},domToMutation:function(a){for(var d=[],f=goog.dom.getChildren(a),h=0,l;l=f[h];h++)"arg"==l.nodeName.toLowerCase()&&d.push(l.getAttribute("name"));this.horizontalParameters="true"!==a.getAttribute("vertical_parameters");this.updateParams_(d)},decompose:function(a){var d=a.newBlock("procedures_mutatorcontainer");
d.initSvg();d.setProcBlock(this);this.paramIds_=[];for(var f=d.getInput("STACK").connection,h=0;h<this.arguments_.length;h++){var l=a.newBlock("procedures_mutatorarg");this.paramIds_.push(l.id);l.initSvg();l.setFieldValue(this.arguments_[h],"NAME");l.oldLocation=h;f.connect(l.previousConnection);f=l.nextConnection}Blockly.Procedures.mutateCallers(this);return d},compose:function(a){var d=[];this.paramIds_=[];for(a=a.getInputTargetBlock("STACK");a;)d.push(a.getFieldValue("NAME")),this.paramIds_.push(a.id),
a=a.nextConnection&&a.nextConnection.targetBlock();Blockly.LexicalVariable.stringListsEqual(d,this.arguments_)||(this.updateParams_(d),Blockly.Procedures.mutateCallers(this))},dispose:function(){var a=this.getFieldValue("NAME"),d=this.editable_,f=this.workspace;d&&AI.Blockly.AIProcedure.removeProcedureValues(a,f);Blockly.BlockSvg.prototype.dispose.apply(this,arguments);a=f.getProcedureDatabase();d&&a&&f==Blockly.common.getMainWorkspace()&&a.removeProcedure(this.id)},getProcedureDef:function(){return[this.getFieldValue("NAME"),
this.arguments_,"RETURN"===this.bodyInputName]},getVars:function(){for(var a=[],d=0,f;f=this.getFieldValue("VAR"+d);d++)a.push(f);return a},declaredNames:function(){return this.getVars()},declaredVariables:function(){return this.getVars()},renameVar:function(a,d){this.renameVars(Blockly.Substitution.simpleSubstitution(a,d))},renameVars:function(a){var d=this.getParameters(),f=a.map(d);if(!Blockly.LexicalVariable.stringListsEqual(d,f)&&(this.updateParams_(f),this.mutator.isVisible())){d=this.mutator.workspace_.getAllBlocks();
f=0;for(var h;h=d[f];f++)if("procedures_mutatorarg"==h.type){var l=h.getFieldValue("NAME"),m=a.apply(l);m!==l&&h.setFieldValue(m,"NAME")}}},renameBound:function(a,d){a=a.restrictDomain(this.declaredNames());this.renameVars(a);d=d.extend(a);Blockly.LexicalVariable.renameFree(this.getInputTargetBlock(this.bodyInputName),d)},renameFree:function(a){this.freeVariables()},freeVariables:function(){var a=Blockly.LexicalVariable.freeVariables(this.getInputTargetBlock(this.bodyInputName));a.subtract(new Blockly.NameSet(this.declaredNames()));
if(a.isEmpty())return a;throw"Violation of invariant: procedure declaration has nonempty free variables: "+a.toString();},blocksInScope:function(){var a=this.getInputTargetBlock(this.bodyInputName);return a&&[a]||[]},typeblock:[{translatedName:Blockly.Msg.LANG_PROCEDURES_DEFNORETURN_PROCEDURE+" "+Blockly.Msg.LANG_PROCEDURES_DEFNORETURN_DO}],customContextMenu:function(a){const d=a.findIndex(function(f){return f.text===Blockly.Msg.DO_IT});a.splice(d,1);Blockly.FieldParameterFlydown.addHorizontalVerticalOption(this,
a)},getParameters:function(){return this.arguments_}};
Blockly.Blocks.procedures_defreturn={category:"Procedures",helpUrl:Blockly.Msg.LANG_PROCEDURES_DEFRETURN_HELPURL,bodyInputName:"RETURN",init:function(){this.setColour(Blockly.PROCEDURE_CATEGORY_HUE);var a=Blockly.Procedures.findLegalName(Blockly.Msg.LANG_PROCEDURES_DEFRETURN_PROCEDURE,this);this.appendDummyInput("HEADER").appendField(Blockly.Msg.LANG_PROCEDURES_DEFRETURN_DEFINE).appendField(new AI.Blockly.FieldProcedureName(a),"NAME");this.horizontalParameters=!0;this.appendInputFromRegistry("indented_input",
"RETURN").appendField(Blockly.Msg.LANG_PROCEDURES_DEFRETURN_RETURN);this.setMutator(new Blockly.icons.MutatorIcon(["procedures_mutatorarg"],this));this.setTooltip(Blockly.Msg.LANG_PROCEDURES_DEFRETURN_TOOLTIP);this.arguments_=[];this.warnings=[{name:"checkEmptySockets",sockets:["RETURN"]}]},withLexicalVarsAndPrefix:Blockly.Blocks.procedures_defnoreturn.withLexicalVarsAndPrefix,onchange:Blockly.Blocks.procedures_defnoreturn.onchange,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,
parameterFlydown:Blockly.Blocks.procedures_defnoreturn.parameterFlydown,setParameterOrientation:Blockly.Blocks.procedures_defnoreturn.setParameterOrientation,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,dispose:Blockly.Blocks.procedures_defnoreturn.dispose,getProcedureDef:Blockly.Blocks.procedures_defnoreturn.getProcedureDef,
getVars:Blockly.Blocks.procedures_defnoreturn.getVars,declaredNames:Blockly.Blocks.procedures_defnoreturn.declaredNames,declaredVariables:Blockly.Blocks.procedures_defnoreturn.declaredVariables,renameVar:Blockly.Blocks.procedures_defnoreturn.renameVar,renameVars:Blockly.Blocks.procedures_defnoreturn.renameVars,renameBound:Blockly.Blocks.procedures_defnoreturn.renameBound,renameFree:Blockly.Blocks.procedures_defnoreturn.renameFree,freeVariables:Blockly.Blocks.procedures_defnoreturn.freeVariables,blocksInScope:Blockly.Blocks.procedures_defnoreturn.blocksInScope,
typeblock:[{translatedName:Blockly.Msg.LANG_PROCEDURES_DEFRETURN_PROCEDURE+" "+Blockly.Msg.LANG_PROCEDURES_DEFRETURN_RETURN}],customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,getParameters:Blockly.Blocks.procedures_defnoreturn.getParameters};
Blockly.Blocks.procedures_mutatorcontainer={init:function(){this.setColour(Blockly.PROCEDURE_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_PROCEDURES_MUTATORCONTAINER_TITLE);this.appendStatementInput("STACK");this.setTooltip(Blockly.Msg.LANG_PROCEDURES_MUTATORCONTAINER_TOOLTIP);this.contextMenu=!1},setProcBlock:function(a){this.procBlock_=a},getProcBlock:function(){return this.procBlock_},declaredNames:function(){for(var a=[],d=this.getInputTargetBlock("STACK");d;)a.push(d.getFieldValue("NAME")),
d=d.nextConnection&&d.nextConnection.targetBlock();return a}};
Blockly.Blocks.procedures_mutatorarg={init:function(){this.setColour(Blockly.PROCEDURE_CATEGORY_HUE);var a=new Blockly.FieldTextInput("x",Blockly.LexicalVariable.renameParam);a.onHtmlInputChange_=function(d){var f=this.getValue();Blockly.FieldFlydown.prototype.onHtmlInputChange_.call(this,d);(d=this.getValue())&&f!==d&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,f,d))};this.appendDummyInput().appendField(Blockly.Msg.LANG_PROCEDURES_MUTATORARG_TITLE).appendField(a,
"NAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_PROCEDURES_MUTATORARG_TOOLTIP);this.contextMenu=!1},getContainerBlock:function(){for(var a=this.getParent();a&&"procedures_mutatorcontainer"!==a.type;)a=a.getParent();return this.cachedContainerBlock_=a&&"procedures_mutatorcontainer"===a.type&&a||null},getProcBlock:function(){var a=this.getContainerBlock();return a&&a.getProcBlock()||null},declaredNames:function(){var a=this.getContainerBlock();return a&&
a.declaredNames()||[]},blocksInScope:function(){var a=this.getProcBlock();return a&&a.blocksInScope()||[]},onchange:function(){var a=this.getFieldValue("NAME");if(a){var d=this.cachedContainerBlock_,f=this.getContainerBlock();!d&&f&&(d=this.declaredNames(),f=d.indexOf(a),-1!=f&&-1!=d.indexOf(a,f+1)&&(a=Blockly.FieldLexicalVariable.nameNotIn(a,d),this.setFieldValue(a,"NAME")))}}};
Blockly.Blocks.procedures_mutatorarg.validator=function(a){return(a=a.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))||null};
Blockly.Blocks.procedures_callnoreturn={category:"Procedures",helpUrl:Blockly.Msg.LANG_PROCEDURES_CALLNORETURN_HELPURL,init:function(){this.setColour(Blockly.PROCEDURE_CATEGORY_HUE);var a=this.getTopWorkspace().getProcedureDatabase();this.procNamesFxn=function(){var d=a.getMenuItems(!1);return 0<d.length?d:["",""]};this.procDropDown=new AI.Blockly.ProcedureNameDropdown(this.procNamesFxn,AI.Blockly.FieldProcedure.onChange);this.procDropDown.block=this;this.appendDummyInput().appendField(Blockly.Msg.LANG_PROCEDURES_CALLNORETURN_CALL).appendField(this.procDropDown,
"PROCNAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_PROCEDURES_CALLNORETURN_TOOLTIP);this.arguments_=[];this.quarkArguments_=this.quarkConnections_=null;this.errors=[{name:"checkIsInDefinition"},{name:"checkDropDownContainsValidValue",dropDowns:["PROCNAME"]}];AI.Blockly.FieldProcedure.onChange.call(this.getField("PROCNAME"),this.getField("PROCNAME").getValue())},getProcedureCall:function(){return this.getFieldValue("PROCNAME")},renameProcedure:function(a,
d){if(Blockly.Names.equals(a,this.getFieldValue("PROCNAME"))){a=!!this.isRenaming;this.isRenaming=!0;try{this.setFieldValue(d,"PROCNAME")}finally{this.isRenaming=a}}},setProcedureParameters:function(a,d,f){var h,l;d||(this.quarkConnections_={},this.quarkArguments_=null,d=[].concat(a));if(d.length!=a.length)throw"Error: paramNames and paramIds must be the same length.";var m={};for(h=0;h<a.length;h++)m[d[h]]=a[h];"undefined"==typeof f&&(f=null);if(!this.quarkArguments_||f)this.quarkConnections_={},
Blockly.LexicalVariable.stringListsEqual(a,this.arguments_)||f?this.quarkArguments_=d:this.quarkArguments_=[];var p=this.rendered;this.rendered=!1;for(l=0;this.getInput("ARG"+l);l++)if(f=this.getInput("ARG"+l))h=f.connection.targetConnection,this.quarkConnections_[this.quarkArguments_[l]]=h,this.removeInput("ARG"+l);this.arguments_=[].concat(a);this.quarkArguments_=d;for(l=0;l<this.arguments_.length;l++)f=this.appendValueInput("ARG"+l).setAlign(Blockly.inputs.Align.RIGHT).appendField(this.arguments_[l]),
this.quarkArguments_&&(a=this.quarkArguments_[l],a in this.quarkConnections_?(h=this.quarkConnections_[a],!h||h.targetConnection||h.sourceBlock_.workspace!=this.workspace?delete this.quarkConnections_[a]:f.connection.connect(h)):m[a]&&(h=this.quarkConnections_[m[a]])&&f.connection.connect(h));this.rendered=p;if(this.workspace.rendered){for(l=0;l<this.arguments_.length;l++)this.getInput("ARG"+l).init();this.rendered&&this.render()}},mutationToDom:function(){var a=document.createElement("mutation");
a.setAttribute("name",this.getFieldValue("PROCNAME"));for(var d=0;this.getInput("ARG"+d);d++){var f=document.createElement("arg");f.setAttribute("name",this.getInput("ARG"+d).fieldRow[0].getText());a.appendChild(f)}return a},domToMutation:function(a){var d=a.getAttribute("name");this.setFieldValue(d,"PROCNAME");this.arguments_=[];a=goog.dom.getChildren(a);d=0;for(var f;f=a[d];d++)"arg"==f.nodeName.toLowerCase()&&this.arguments_.push(f.getAttribute("name"));this.setProcedureParameters(this.arguments_,
null,!0)},renameVar:function(a,d){for(var f=0;f<this.arguments_.length;f++)Blockly.Names.equals(a,this.arguments_[f])&&(this.arguments_[f]=d,this.getInput("ARG"+f).fieldRow[0].setValue(d))},customContextMenu:function(a){var d={enabled:!0};d.text=Blockly.Msg.LANG_PROCEDURES_HIGHLIGHT_DEF;var f=this.getFieldValue("PROCNAME"),h=this.workspace;d.callback=function(){var l=Blockly.Procedures.getDefinition(f,h);if(l){l.select();const m=new AI.Events.WorkspaceMove(h.id);h.centerOnBlock(l.id);m.recordNew();
Blockly.Events.fire(m);h.getParentSvg().parentElement.focus()}};a.push(d)},removeProcedureValue:function(){for(var a=0;null!==this.getInput("ARG"+a);a++)this.removeInput("ARG"+a);this.setFieldValue("none","PROCNAME")},typeblock:[{translatedName:Blockly.Msg.LANG_PROCEDURES_CALLNORETURN_TRANSLATED_NAME}]};
Blockly.Blocks.procedures_callreturn={category:"Procedures",helpUrl:Blockly.Msg.LANG_PROCEDURES_CALLRETURN_HELPURL,init:function(){this.setColour(Blockly.PROCEDURE_CATEGORY_HUE);var a=this.getTopWorkspace().getProcedureDatabase();this.procNamesFxn=function(){var d=a.getMenuItems(!0);return 0<d.length?d:["",""]};this.procDropDown=new AI.Blockly.ProcedureNameDropdown(this.procNamesFxn,AI.Blockly.FieldProcedure.onChange);this.procDropDown.block=this;this.appendDummyInput().appendField(Blockly.Msg.LANG_PROCEDURES_CALLRETURN_CALL).appendField(this.procDropDown,
"PROCNAME");this.setOutput(!0,null);this.setTooltip(Blockly.Msg.LANG_PROCEDURES_CALLRETURN_TOOLTIP);this.arguments_=[];this.quarkArguments_=this.quarkConnections_=null;this.errors=[{name:"checkIsInDefinition"},{name:"checkDropDownContainsValidValue",dropDowns:["PROCNAME"]}];AI.Blockly.FieldProcedure.onChange.call(this.getField("PROCNAME"),this.getField("PROCNAME").getValue())},getProcedureCall:Blockly.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:Blockly.Blocks.procedures_callnoreturn.renameProcedure,
setProcedureParameters:Blockly.Blocks.procedures_callnoreturn.setProcedureParameters,mutationToDom:Blockly.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_callnoreturn.domToMutation,renameVar:Blockly.Blocks.procedures_callnoreturn.renameVar,customContextMenu:Blockly.Blocks.procedures_callnoreturn.customContextMenu,removeProcedureValue:Blockly.Blocks.procedures_callnoreturn.removeProcedureValue,typeblock:[{translatedName:Blockly.Msg.LANG_PROCEDURES_CALLRETURN_TRANSLATED_NAME}]};/*

 @fileoverview Visual blocks editor for App Inventor
 FieldTextBlockInput is a subclass of FieldTextInput

 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.FieldTextBlockInput=class extends Blockly.FieldTextInput{constructor(a,d){super(a);this.changeHandler_=d}};AI.FieldTextBlockInput.prototype.setText=function(a){if(null!=a){if(this.changeHandler_){var d=this.changeHandler_(a);null!==d&&void 0!==d&&(a=d)}this.sourceBlock_&&this.sourceBlock_.outputConnection&&this.sourceBlock_.outputConnection.setCheck(this.sourceBlock_.outputConnection.check_);Blockly.Field.prototype.setText.call(this,a)}};/*

 @fileoverview Text blocks for Blockly, modified for MIT App Inventor.
 @author mckinney@mit.edu (Andrew F. McKinney)
*/
AI.Blocks.text={};
Blockly.Blocks.text={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_TEXT_HELPURL,init:function(){const a=new Blockly.FieldTextInput("",this.inputValidator);this.setColour(Blockly.TEXT_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_TEXT_TEXT_LEFT_QUOTE).appendField(a,"TEXT").appendField(Blockly.Msg.LANG_TEXT_TEXT_RIGHT_QUOTE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_TEXT_TEXT_TOOLTIP)},inputValidator:function(a){const d=
this.getSourceBlock();d.workspace.isLoading&&Blockly.Blocks.text.setOutputOnFinishEdit.call(d,a)},onchange:function(a){a.blockId!==this.id||a.type!==Blockly.Events.BLOCK_CHANGE&&a.type!==Blockly.Events.BLOCK_CREATE||(a=this.getFieldValue("TEXT"),Blockly.Blocks.text.setOutputOnFinishEdit.call(this,a))},errors:[{name:"checkInvalidNumber"}],typeblock:[{translatedName:Blockly.Msg.LANG_CATEGORY_TEXT}]};
Blockly.Blocks.text.setOutputOnFinishEdit=function(a){if(AI.BlockUtils.NUMBER_REGEX.test(a)&&!isNaN(parseFloat(a)))this.outputConnection.setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));else{a=Array.from(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));const d=a.indexOf("Number");-1!==d&&a.splice(d,1);this.outputConnection.setCheck(a)}maybeBumpBlockOnFinishEdit(this)};
function maybeBumpBlockOnFinishEdit(a){a=a.outputConnection;const d=a.targetConnection;d&&!d.getConnectionChecker().canConnect(a,d,!1)&&(d.disconnect(),d.sourceBlock_.bumpNeighbours())}
Blockly.Blocks.text_join={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_JOIN_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));this.appendValueInput("ADD0").appendField(Blockly.Msg.LANG_TEXT_JOIN_TITLE_JOIN);this.appendValueInput("ADD1");this.setTooltip(Blockly.Msg.LANG_TEXT_JOIN_TOOLTIP);this.setMutator(new Blockly.icons.MutatorIcon(["text_join_item"],this));this.emptyInputName="EMPTY";this.repeatingInputName=
"ADD";this.itemCount_=2},mutationToDom:Blockly.mutationToDom,domToMutation:Blockly.domToMutation,decompose:function(a){return Blockly.decompose(a,"text_join_item",this)},compose:Blockly.compose,saveConnections:Blockly.saveConnections,addEmptyInput:function(){this.appendDummyInput(this.emptyInputName).appendField(Blockly.Msg.LANG_TEXT_JOIN_TITLE_JOIN)},addInput:function(a){var d=this.appendValueInput(this.repeatingInputName+a).setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT));
0===a&&d.appendField(Blockly.Msg.LANG_TEXT_JOIN_TITLE_JOIN);return d},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_JOIN_TITLE_JOIN}]};AI.Blockly.Mixins.extend(Blockly.Blocks.text_join,AI.Blockly.Mixins.DynamicConnections);
Blockly.Blocks.text_join_item={init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.appendDummyInput().appendField(Blockly.Msg.LANG_TEXT_JOIN_ITEM_TITLE_ITEM);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(Blockly.Msg.LANG_TEXT_JOIN_ITEM_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.text_length={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_LENGTH_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));this.appendValueInput("VALUE").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_TEXT_LENGTH_INPUT_LENGTH);this.setTooltip(Blockly.Msg.LANG_TEXT_LENGTH_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_LENGTH_INPUT_LENGTH}]};
Blockly.Blocks.text_isEmpty={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_ISEMPTY_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendValueInput("VALUE").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_TEXT_ISEMPTY_INPUT_ISEMPTY);this.setTooltip(Blockly.Msg.LANG_TEXT_ISEMPTY_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_ISEMPTY_INPUT_ISEMPTY}]};
Blockly.Blocks.text_compare={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_COMPARE_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.appendValueInput("TEXT1").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_TEXT_COMPARE_INPUT_COMPARE);this.appendValueInput("TEXT2").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(this.OPERATORS),
"OP");this.setInputsInline(!0);var a=this;this.setTooltip(function(){var d=a.getFieldValue("OP");return Blockly.Blocks.text_compare.TOOLTIPS()[d]})},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_COMPARE_INPUT_COMPARE+Blockly.Msg.LANG_TEXT_COMPARE_LT,dropDown:{titleName:"OP",value:"LT"}},{translatedName:Blockly.Msg.LANG_TEXT_COMPARE_INPUT_COMPARE+Blockly.Msg.LANG_TEXT_COMPARE_EQUAL,dropDown:{titleName:"OP",value:"EQUAL"}},{translatedName:Blockly.Msg.LANG_TEXT_COMPARE_INPUT_COMPARE+Blockly.Msg.LANG_TEXT_COMPARE_NEQ,
dropDown:{titleName:"OP",value:"NEQ"}},{translatedName:Blockly.Msg.LANG_TEXT_COMPARE_INPUT_COMPARE+Blockly.Msg.LANG_TEXT_COMPARE_GT,dropDown:{titleName:"OP",value:"GT"}}]};Blockly.Blocks.text_compare.OPERATORS=function(){return[[Blockly.Msg.LANG_TEXT_COMPARE_LT,"LT"],[Blockly.Msg.LANG_TEXT_COMPARE_EQUAL,"EQUAL"],[Blockly.Msg.LANG_TEXT_COMPARE_NEQ,"NEQ"],[Blockly.Msg.LANG_TEXT_COMPARE_GT,"GT"]]};
Blockly.Blocks.text_compare.TOOLTIPS=function(){return{LT:Blockly.Msg.LANG_TEXT_COMPARE_TOOLTIP_LT,EQUAL:Blockly.Msg.LANG_TEXT_COMPARE_TOOLTIP_EQUAL,NEQ:Blockly.Msg.LANG_TEXT_COMPARE_TOOLTIP_NEQ,GT:Blockly.Msg.LANG_TEXT_COMPARE_TOOLTIP_GT}};
Blockly.Blocks.text_trim={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_TRIM_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));this.appendValueInput("TEXT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_TEXT_TRIM_TITLE_TRIM);this.setTooltip(Blockly.Msg.LANG_TEXT_TRIM_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_TRIM_TITLE_TRIM}]};
Blockly.Blocks.text_changeCase={category:"Text",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.text_changeCase.HELPURLS()[a]},init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));this.appendValueInput("TEXT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(this.OPERATORS),"OP");var a=this;this.setTooltip(function(){var d=
a.getFieldValue("OP");return Blockly.Blocks.text_changeCase.TOOLTIPS()[d]})},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_CHANGECASE_OPERATOR_UPPERCASE,dropDown:{titleName:"OP",value:"UPCASE"}},{translatedName:Blockly.Msg.LANG_TEXT_CHANGECASE_OPERATOR_DOWNCASE,dropDown:{titleName:"OP",value:"DOWNCASE"}}]};Blockly.Blocks.text_changeCase.OPERATORS=function(){return[[Blockly.Msg.LANG_TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPCASE"],[Blockly.Msg.LANG_TEXT_CHANGECASE_OPERATOR_DOWNCASE,"DOWNCASE"]]};
Blockly.Blocks.text_changeCase.TOOLTIPS=function(){return{UPCASE:Blockly.Msg.LANG_TEXT_CHANGECASE_TOOLTIP_UPPERCASE,DOWNCASE:Blockly.Msg.LANG_TEXT_CHANGECASE_TOOLTIP_DOWNCASE}};Blockly.Blocks.text_changeCase.HELPURLS=function(){return{UPCASE:Blockly.Msg.LANG_TEXT_CHANGECASE_HELPURL_UPPERCASE,DOWNCASE:Blockly.Msg.LANG_TEXT_CHANGECASE_HELPURL_DOWNCASE}};
Blockly.Blocks.text_starts_at={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_STARTS_AT_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_TEXT_STARTS_AT_INPUT,["TEXT",a,Blockly.inputs.Align.RIGHT],["PIECE",a,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_TEXT_STARTS_AT_TOOLTIP);
this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_STARTS_AT_INPUT_STARTS_AT}]};
Blockly.Blocks.text_contains={category:"Text",helpUrl:function(){return Blockly.Blocks.text_contains.HELPURLS()[this.getMode()]},init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);var a=AI.BlockUtils,d=a.YailTypeToBlocklyType,f=new Blockly.FieldDropdown(Blockly.Blocks.text_contains.OPERATORS(),Blockly.Blocks.text_contains.adjustToMode.bind(this)),h=new Blockly.FieldLabel(Blockly.Msg.LANG_TEXT_CONTAINS_INPUT_PIECE);this.setOutput(!0,d("boolean",a.OUTPUT));this.interpolateMsg(Blockly.Msg.LANG_TEXT_CONTAINS_INPUT,
["OP",f],["TEXT",d("text",a.INPUT),Blockly.inputs.Align.RIGHT],["PIECE_TEXT",h],["PIECE",d("text",a.INPUT),Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setInputsInline(!1);this.setTooltip(function(){return Blockly.Blocks.text_contains.TOOLTIPS()[this.getMode()]}.bind(this))},domToMutation:function(a){a=a.getAttribute("mode");Blockly.Blocks.text_contains.adjustToMode.call(this,a)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("mode",this.getMode());
return a},getMode:function(){return this.getFieldValue("OP")},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_CONTAINS_OPERATOR_CONTAINS,dropDown:{titleName:"OP",value:"CONTAINS"}},{translatedName:Blockly.Msg.LANG_TEXT_CONTAINS_OPERATOR_CONTAINS_ANY,dropDown:{titleName:"OP",value:"CONTAINS_ANY"}},{translatedName:Blockly.Msg.LANG_TEXT_CONTAINS_OPERATOR_CONTAINS_ALL,dropDown:{titleName:"OP",value:"CONTAINS_ALL"}}]};
Blockly.Blocks.text_contains.adjustToMode=function(a){var d=AI.BlockUtils,f=d.YailTypeToBlocklyType;"CONTAINS"==a?(this.getInput("PIECE").setCheck(f("text",d.INPUT)),this.setFieldValue(Blockly.Msg.LANG_TEXT_CONTAINS_INPUT_PIECE,"PIECE_TEXT")):(this.getInput("PIECE").setCheck(f("list",d.INPUT)),this.setFieldValue(Blockly.Msg.LANG_TEXT_CONTAINS_INPUT_PIECE_LIST,"PIECE_TEXT"))};
Blockly.Blocks.text_contains.OPERATORS=function(){return[[Blockly.Msg.LANG_TEXT_CONTAINS_OPERATOR_CONTAINS,"CONTAINS"],[Blockly.Msg.LANG_TEXT_CONTAINS_OPERATOR_CONTAINS_ANY,"CONTAINS_ANY"],[Blockly.Msg.LANG_TEXT_CONTAINS_OPERATOR_CONTAINS_ALL,"CONTAINS_ALL"]]};Blockly.Blocks.text_contains.TOOLTIPS=function(){return{CONTAINS:Blockly.Msg.LANG_TEXT_CONTAINS_TOOLTIP_CONTAINS,CONTAINS_ANY:Blockly.Msg.LANG_TEXT_CONTAINS_TOOLTIP_CONTAINS_ANY,CONTAINS_ALL:Blockly.Msg.LANG_TEXT_CONTAINS_TOOLTIP_CONTAINS_ALL}};
Blockly.Blocks.text_contains.HELPURLS=function(){return{CONTAINS:Blockly.Msg.LANG_TEXT_CONTAINS_HELPURL_CONTAINS,CONTAINS_ANY:Blockly.Msg.LANG_TEXT_CONTAINS_HELPURL_CONTAINS_ANY,CONTAINS_ALL:Blockly.Msg.LANG_TEXT_CONTAINS_HELPURL_CONTAINS_ALL}};
Blockly.Blocks.text_split={category:"Text",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.text_split.HELPURLS()[a]},init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.appendValueInput("TEXT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(new Blockly.FieldDropdown(this.OPERATORS,Blockly.Blocks.text_split.dropdown_onchange),"OP").appendField(Blockly.Msg.LANG_TEXT_SPLIT_INPUT_TEXT);
this.appendValueInput("AT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_TEXT_SPLIT_INPUT_AT,"ARG2_NAME").setAlign(Blockly.inputs.Align.RIGHT)},domToMutation:function(a){a=a.getAttribute("mode");Blockly.Blocks.text_split.adjustToMode(a,this)},mutationToDom:function(){var a=document.createElement("mutation"),d=this.getFieldValue("OP");a.setAttribute("mode",d);return a},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_SPLIT_OPERATOR_SPLIT,dropDown:{titleName:"OP",
value:"SPLIT"}},{translatedName:Blockly.Msg.LANG_TEXT_SPLIT_OPERATOR_SPLIT_AT_FIRST,dropDown:{titleName:"OP",value:"SPLITATFIRST"}},{translatedName:Blockly.Msg.LANG_TEXT_SPLIT_OPERATOR_SPLIT_AT_ANY,dropDown:{titleName:"OP",value:"SPLITATANY"}},{translatedName:Blockly.Msg.LANG_TEXT_SPLIT_OPERATOR_SPLIT_AT_FIRST_OF_ANY,dropDown:{titleName:"OP",value:"SPLITATFIRSTOFANY"}}]};
Blockly.Blocks.text_split.adjustToMode=function(a,d){if("SPLITATFIRST"==a||"SPLIT"==a)d.getInput("AT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)),d.setFieldValue(Blockly.Msg.LANG_TEXT_SPLIT_INPUT_AT,"ARG2_NAME");else if("SPLITATFIRSTOFANY"==a||"SPLITATANY"==a)d.getInput("AT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.INPUT)),d.setFieldValue(Blockly.Msg.LANG_TEXT_SPLIT_INPUT_AT_LIST,"ARG2_NAME");d.setTooltip(Blockly.Blocks.text_split.TOOLTIPS()[a])};
Blockly.Blocks.text_split.dropdown_onchange=function(a){Blockly.Blocks.text_split.adjustToMode(a,this.sourceBlock_)};Blockly.Blocks.text_split.OPERATORS=function(){return[[Blockly.Msg.LANG_TEXT_SPLIT_OPERATOR_SPLIT,"SPLIT"],[Blockly.Msg.LANG_TEXT_SPLIT_OPERATOR_SPLIT_AT_FIRST,"SPLITATFIRST"],[Blockly.Msg.LANG_TEXT_SPLIT_OPERATOR_SPLIT_AT_ANY,"SPLITATANY"],[Blockly.Msg.LANG_TEXT_SPLIT_OPERATOR_SPLIT_AT_FIRST_OF_ANY,"SPLITATFIRSTOFANY"]]};
Blockly.Blocks.text_split.TOOLTIPS=function(){return{SPLITATFIRST:Blockly.Msg.LANG_TEXT_SPLIT_TOOLTIP_SPLIT_AT_FIRST,SPLITATFIRSTOFANY:Blockly.Msg.LANG_TEXT_SPLIT_TOOLTIP_SPLIT_AT_FIRST_OF_ANY,SPLIT:Blockly.Msg.LANG_TEXT_SPLIT_TOOLTIP_SPLIT,SPLITATANY:Blockly.Msg.LANG_TEXT_SPLIT_TOOLTIP_SPLIT_AT_ANY}};
Blockly.Blocks.text_split.HELPURLS=function(){return{SPLITATFIRST:Blockly.Msg.LANG_TEXT_SPLIT_HELPURL_SPLIT_AT_FIRST,SPLITATFIRSTOFANY:Blockly.Msg.LANG_TEXT_SPLIT_HELPURL_SPLIT_AT_FIRST_OF_ANY,SPLIT:Blockly.Msg.LANG_TEXT_SPLIT_HELPURL_SPLIT,SPLITATANY:Blockly.Msg.LANG_TEXT_SPLIT_HELPURL_SPLIT_AT_ANY}};
Blockly.Blocks.text_split_at_spaces={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_SPLIT_AT_SPACES_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("list",AI.BlockUtils.OUTPUT));this.appendValueInput("TEXT").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_TEXT_SPLIT_AT_SPACES_TITLE);this.setTooltip(Blockly.Msg.LANG_TEXT_SPLIT_AT_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_SPLIT_AT_SPACES_TITLE}]};
Blockly.Blocks.text_segment={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_SEGMENT_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("number",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_TEXT_SEGMENT_INPUT,["TEXT",a,Blockly.inputs.Align.RIGHT],["START",d,Blockly.inputs.Align.RIGHT],
["LENGTH",d,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);this.setTooltip(Blockly.Msg.LANG_TEXT_SEGMENT_AT_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_SEGMENT_TITLE_SEGMENT}]};
Blockly.Blocks.text_replace_all={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_REPLACE_ALL_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT);this.interpolateMsg(Blockly.Msg.LANG_TEXT_REPLACE_ALL_INPUT,["TEXT",a,Blockly.inputs.Align.RIGHT],["SEGMENT",a,Blockly.inputs.Align.RIGHT],["REPLACEMENT",a,Blockly.inputs.Align.RIGHT],Blockly.inputs.Align.RIGHT);
this.setTooltip(Blockly.Msg.LANG_TEXT_REPLACE_ALL_TOOLTIP);this.setInputsInline(!1)},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_REPLACE_ALL_TITLE_REPLACE_ALL}]};
Blockly.Blocks.obfuscated_text={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_TEXT_OBFUSCATE_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);var a=Blockly.Msg.LANG_TEXT_TEXT_OBFUSCATE+" "+Blockly.Msg.LANG_TEXT_TEXT_LEFT_QUOTE,d=new Blockly.FieldTextInput("",Blockly.Blocks.text.inputValidator);this.appendDummyInput().appendField(a).appendField(d,"TEXT").appendField(Blockly.Msg.LANG_TEXT_TEXT_RIGHT_QUOTE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));
this.setTooltip(Blockly.Msg.LANG_TEXT_TEXT_OBFUSCATE_TOOLTIP);this.confounder=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8)},domToMutation:function(a){this.confounder=a.getAttribute("confounder")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("confounder",this.confounder);return a},onchange:Blockly.Blocks.text.onchange,typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_TEXT_OBFUSCATE}]};
Blockly.Blocks.text_is_string={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_TEXT_IS_STRING_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.appendValueInput("ITEM").appendField(Blockly.Msg.LANG_TEXT_TEXT_IS_STRING_TITLE).appendField(Blockly.Msg.LANG_TEXT_TEXT_IS_STRING_INPUT_THING);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("boolean",AI.BlockUtils.OUTPUT));this.setTooltip(Blockly.Msg.LANG_TEXT_TEXT_IS_STRING_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_TEXT_IS_STRING_TITLE}]};
Blockly.Blocks.text_reverse={category:"Text",helpUrl:Blockly.Msg.LANG_TEXT_REVERSE_HELPURL,init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));this.appendValueInput("VALUE").setCheck(AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT)).appendField(Blockly.Msg.LANG_TEXT_REVERSE_INPUT);this.setTooltip(Blockly.Msg.LANG_TEXT_REVERSE_TOOLTIP)},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_REVERSE_INPUT}]};
Blockly.Blocks.text_replace_mappings={category:"Text",helpUrl:function(){var a=this.getFieldValue("OP");return Blockly.Blocks.text_replace_mappings.HELPURLS()[a]},init:function(){this.setColour(Blockly.TEXT_CATEGORY_HUE);this.setOutput(!0,AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.OUTPUT));var a=AI.BlockUtils.YailTypeToBlocklyType("text",AI.BlockUtils.INPUT),d=AI.BlockUtils.YailTypeToBlocklyType("dictionary",AI.BlockUtils.INPUT);this.appendValueInput("MAPPINGS").setCheck(d).appendField(Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_TITLE).setAlign(Blockly.inputs.Align.RIGHT);
this.appendValueInput("TEXT").setCheck(a).appendField(Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_INPUT_TEXT).setAlign(Blockly.inputs.Align.RIGHT);this.appendDummyInput().appendField(Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_INPUT_ORDER_PREFIX).appendField(new Blockly.FieldDropdown(this.OPERATORS,Blockly.Blocks.text_replace_mappings.onchange),"OP").appendField(Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_INPUT_ORDER).setAlign(Blockly.inputs.Align.RIGHT);this.setInputsInline(!1);var f=this;this.setTooltip(function(){var h=
f.getFieldValue("OP");return Blockly.Blocks.text_replace_mappings.TOOLTIPS()[h]})},typeblock:[{translatedName:Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_OPERATOR_LONGEST_STRING_FIRST,dropDown:{titleName:"OP",value:"LONGEST_STRING_FIRST"}},{translatedName:Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_OPERATOR_DICTIONARY_ORDER,dropDown:{titleName:"OP",value:"DICTIONARY_ORDER"}}]};
Blockly.Blocks.text_replace_mappings.OPERATORS=function(){return[[Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_OPERATOR_LONGEST_STRING_FIRST,"LONGEST_STRING_FIRST"],[Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_OPERATOR_DICTIONARY_ORDER,"DICTIONARY_ORDER"]]};Blockly.Blocks.text_replace_mappings.TOOLTIPS=function(){return{LONGEST_STRING_FIRST:Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_TOOLTIP_LONGEST_STRING_FIRST,DICTIONARY_ORDER:Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_TOOLTIP_DICTIONARY_ORDER}};
Blockly.Blocks.text_replace_mappings.HELPURLS=function(){return{LONGEST_STRING_FIRST:Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_HELPURL_LONGEST_STRING_FIRST,DICTIONARY_ORDER:Blockly.Msg.LANG_TEXT_REPLACE_ALL_MAPPINGS_HELPURL_DICTIONARY_ORDER}};/*

 Copyright 2021 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
AI.Blockly.Themes={};AI.Blockly.Themes.darkTheme={};Blockly.Themes.darkTheme=Blockly.Theme.defineTheme("dark",{base:Blockly.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}});/*

 @fileoverview Visual blocks editor for MIT App Inventor
 Initialize the blocks editor workspace.

 @author mckinney@mit.edu (Andrew F. McKinney)
 @author sharon@google.com (Sharon Perl)
 @author ewpatton@mit.edu (Evan W. Patton)
*/
AI.Blockly.BlocklyEditor={};Blockly.Flyout.prototype.dragAngleRange_=360;void 0===Blockly.BlocklyEditor&&(Blockly.BlocklyEditor={});Blockly.allWorkspaces={};Blockly.configForTypeBlock={frame:"ai_frame",typeBlockDiv:"ai_type_block",inputText:"ac_input_text"};Blockly.BlocklyEditor.HELP_IFRAME=null;
top.addEventListener("mousedown",function(a){if("IMG"===a.target.tagName&&"A"===a.target.parentElement.tagName&&"menu-help-item"===a.target.parentElement.className){a.stopPropagation();Blockly.BlocklyEditor.HELP_IFRAME&&(Blockly.BlocklyEditor.HELP_IFRAME.parentNode.removeChild(Blockly.BlocklyEditor.HELP_IFRAME),Blockly.BlocklyEditor.HELP_IFRAME=null);if(a.shiftKey||a.metaKey)return;a.preventDefault();var d=document.createElement("div");d.style.width="400px";d.style.height="300px";d.style.resize="both";
d.style.zIndex="99999";d.style.border="1px solid gray";d.style.boxSizing="border-box";d.style.position="absolute";d.style.top=a.clientY+"px";d.style.left=a.clientX+"px";d.style.backgroundColor="white";d.style.overflow="hidden";Blockly.BlocklyEditor.HELP_IFRAME=d;var f=document.createElement("iframe");f.src=a.target.parentElement.href;f.style.width="100%";f.style.height="100%";f.style.border="none";d.appendChild(f);Blockly.WidgetDiv.show(Blockly.BlocklyEditor,Blockly.common.getMainWorkspace().options.rtl,
function(){Blockly.BlocklyEditor.HELP_IFRAME.parentNode.removeChild(Blockly.BlocklyEditor.HELP_IFRAME);Blockly.BlocklyEditor.HELP_IFRAME=null});top.document.body.appendChild(d)}return!0},!0);
Blockly.BlocklyEditor.makeMenuItemWithHelp=function(a,d){var f=document.createElement("span"),h=document.createElement("a"),l=document.createElement("img");l.src="/static/images/help.png";h.href=d;h.target="_blank";h.className="menu-help-item";h.style.position="absolute";h.addEventListener("click",function(m){m.shiftKey||m.metaKey||m.preventDefault()});h.appendChild(l);f.appendChild(document.createTextNode(a));f.appendChild(h);return f};
function unboundVariableHandler(a,d){var f=Blockly.LexicalVariable.freeVariables(a);f=f.toList();if(0==f.length)try{AI.Yail.forRepl=!0,Blockly.ReplMgr.putYail(d,a)}finally{AI.Yail.forRepl=!1}else{var h="<form onsubmit='return false;'>"+Blockly.Msg.DIALOG_ENTER_VALUES+"<br>",l;for(l in f)h+=f[l]+" = <input type=text name="+f[l]+"><br>";var m=new Blockly.Util.Dialog(Blockly.Msg.DIALOG_UNBOUND_VAR,h+"</form>",Blockly.Msg.DO_IT,!1,Blockly.Msg.REPL_CANCEL,10,function(p){if(p==Blockly.Msg.DO_IT){p="(let (";
for(var q in f)p+="($"+f[q]+" "+AI.Yail.quotifyForREPL(document.querySelector('input[name="'+f[q]+'"]').value)+") ";p+=")"+d+")";try{AI.Yail.forRepl=!0,Blockly.ReplMgr.putYail(p,a)}finally{AI.Yail.forRepl=!1}}m.hide()})}}AI.Blockly.ContextMenuItems={};
AI.Blockly.ContextMenuItems.registerExportBlockOption=function(){const a={displayText:Blockly.BlocklyEditor.makeMenuItemWithHelp(Blockly.Msg.DOWNLOAD_BLOCKS_AS_PNG,"/reference/other/download-pngs.html"),callback:function(d){Blockly.exportBlockAsPng(d.block)},preconditionFn:function(d){return d.block.workspace.isFlyout?"hidden":"enabled"},weight:100,id:"appinventor_export_block",scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK};Blockly.ContextMenuRegistry.registry.register(a)};
AI.Blockly.ContextMenuItems.registerDoItOption=function(){Blockly.ContextMenuRegistry.registry.register({displayText:Blockly.Msg.DO_IT,callback:function(a){a=a.block;if(top.ReplState.state!==Blockly.ReplMgr.rsState.CONNECTED){var d=new goog.ui.Dialog(null,!0,new goog.dom.DomHelper(top.document));d.setTitle(Blockly.Msg.CAN_NOT_DO_IT);d.setTextContent(Blockly.Msg.CONNECT_TO_DO_IT);d.setButtonSet((new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!1,!0));d.setVisible(!0)}else{try{AI.Yail.forRepl=
!0,d=AI.Yail.blockToCode1(a)}finally{AI.Yail.forRepl=!1}unboundVariableHandler(a,d instanceof Array?d[0]:d)}},preconditionFn:function(a){if(a.block.workspace.isFlyout)return"hidden";a=a.block;return top.ReplState.state===Blockly.ReplMgr.rsState.CONNECTED&&a.isEnabled()?"enabled":"disabled"},weight:100,id:"appinventor_doit",scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK})};
AI.Blockly.ContextMenuItems.RegisterClearDoItOption=function(){Blockly.ContextMenuRegistry.registry.register({displayText:Blockly.Msg.CLEAR_DO_IT_ERROR,callback:function(a){a=a.block;a.replError=null;Blockly.common.getMainWorkspace().getWarningHandler().checkErrors(a)},preconditionFn:function(a){return a.block.replError?"enabled":"hidden"},weight:100,id:"appinventor_clear_doit",scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK})};
AI.Blockly.ContextMenuItems.registerGenerateYailOption=function(){Blockly.ContextMenuRegistry.registry.register({displayText:Blockly.Msg.GENERATE_YAIL,callback:function(a){a=a.block;const d=AI.Yail.blockToCode1(a);a.setCommentText(d instanceof Array?d[0]:d)},preconditionFn:function(a){return a.block.workspace.isFlyout?"hidden":window.parent.BlocklyPanel_checkIsAdmin()?"enabled":"hidden"},weight:100,id:"appinventor_generate_yail",scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK})};
AI.Blockly.ContextMenuItems.registerAddToBackpackOption=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(a){return Blockly.Msg.COPY_TO_BACKPACK+" ("+a.block.workspace.getBackpack().getCount()+")"},callback:function(a){const d=top.blockSelectionWeakMap,f=a.block.workspace,h=f.getBackpack(),l=[];d?d.get(f).forEach(m=>{m=f.getBlockById(m);l.push(m)}):l.push(a.block);l.forEach(m=>{m.isDeletable&&h.addToBackpack(m)})},preconditionFn:function(a){return a.block.workspace.hasBackpack()?
a.block.isEnabled()?"enabled":"disabled":"hidden"},weight:100,id:"appinventor_add_to_backpack",scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK})};
AI.Blockly.ContextMenuItems.registerExportBlocksOption=function(){Blockly.ContextMenuRegistry.registry.register({id:"appinventor_export_blocks",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(a){return a.workspace.getAllBlocks().length?"enabled":"hidden"},displayText:Blockly.Msg.EXPORT_IMAGE,callback:function(){AI.Blockly.ExportBlocksImage.onclickExportBlocks(Blockly.common.getMainWorkspace().getMetrics())},weight:100})};
AI.Blockly.ContextMenuItems.registerWorkspaceControlsOption=function(){Blockly.ContextMenuRegistry.registry.register({id:"appinventor_workspaceControls",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(){return"enabled"},displayText:function(a){return a.workspace.chromeHidden?Blockly.Msg.SHOW:Blockly.Msg.HIDE},callback:function(a){let d=a.workspace.chromeHidden?"block":"none";a.workspace.backpack_.svgGroup_.style.display=d;a.workspace.trashcan.svgGroup.style.display=
d;a.workspace.zoomControls_.svgGroup.style.display=d;a.workspace.warningIndicator_.svgGroup_.style.display=d;a.workspace.chromeHidden=!a.workspace.chromeHidden},weight:100})};
AI.Blockly.ContextMenuItems.registerResetArrangementOptions=function(){function a(f){return function(h){try{f.call(this,h)}finally{h.workspace&&h.workspace.resetArrangements()}}}var d=Blockly.ContextMenuRegistry.registry.getItem("collapseWorkspace");d.callback=a(d.callback);d=Blockly.ContextMenuRegistry.registry.getItem("expandWorkspace");d.callback=a(d.callback)};
AI.Blockly.ContextMenuItems.registerArrangeOptions=function(){function a(p){if("Variables"==p.category)return"a,"+p.type+","+p.getVars().join(",");if("Procedures"===p.category)return 0===p.type.indexOf("procedures_def")?"b,a:"+(p.getFieldValue("NAME")||p.getFieldValue("PROCNAME")):"b,b:"+(p.getFieldValue("NAME")||p.getFieldValue("PROCNAME"));if("Component"==p.category){let q=p.type+","+p.typeName+","+(p.isGeneric?"!GENERIC!":p.instanceName)+",";q="component_event"==p.type?q+p.eventName:"component_method"==
p.type?q+p.methodName:"component_set_get"==p.type?q+(p.setOrGet+p.propertyName):q+".Component";return"c,"+q}return"d,"+p.type}function d(p,q){let u=p.match(/^(.*?)([0-9]+)$/i),y=q.match(/^(.*?)([0-9]+)$/i);return u&&y?u[1]<y[1]?-1:u[1]>y[1]?1:parseInt(u[2])-parseInt(y[2]):p.localeCompare(q,void 0,{numeric:!0})}function f(p,q){var u=a(p).toLowerCase(),y=a(q).toLowerCase();if(p.category!=q.category)return u.localeCompare(y,void 0,{numeric:!0});if(p.category==q.category&&"Component"!=p.category)return u=
u.substr(2),y=y.substr(2),u=d(u,y),"Variables"==p.category&&p.type==q.type&&("global_declaration"==p.type?(p=p.getSvgRoot().textContent,p=p.substring(17,p.length-2),q=q.getSvgRoot().textContent,q=q.substring(17,q.length-2),u=d(p,q)):(p=p.fieldVar_.text_,q=q.fieldVar_.text_,u=p.includes("global")&&q.includes("global")?d(p.substring(6),q.substring(6)):d(p,q))),u;if("Component"==p.category&&"Component"==q.category&&p.eventName&&q.eventName)return p.typeName==q.typeName?p.instanceName==q.instanceName?
0:p.instanceName?q.instanceName?d(p.instanceName,q.instanceName):1:-1:u.localeCompare(y,void 0,{numeric:!0});if("Component"==p.category&&"Component"==q.category)return u=",2",p.isGeneric&&(u=",1"),y=",2",q.isGeneric&&(y=",1"),u=(p.type+u).localeCompare(q.type+y,void 0,{numeric:!0}),0===u&&(u=d(p.typeName,q.typeName)),0===u&&(p.instanceName&&q.instanceName&&d(p.instanceName,q.instanceName),q=q.propertyName||q.methodName,u=(p.propertyName||p.methodName).toLowerCase().localeCompare(q.toLowerCase(),void 0,
{numeric:!0})),u}function h(p,q,u){Blockly.Events.setGroup(!0);var y=p.id;Blockly.Events.fire(new AI.Events.StartArrangeBlocks(y));p.arranged_type_=q;p.arranged_position_=u;p.arranged_latest_position_=u;p.arrange_blocks_event_group_=Blockly.Events.getGroup();y=new AI.Events.EndArrangeBlocks(y,q,u);let C=p.getTopBlocks(!1);p.arranged_type_===AI.Blockly.BLKS_CATEGORY&&C.sort(f);var K=p.getMetrics();let X=p.getGrid().getSpacing(),M=1/X,G=p.getGrid().shouldSnap()?function(Q){return(Math.ceil(Q*M)-.5)*
X}:function(Q){return Q},J=G(K.viewLeft+5),z=G(K.viewTop+5),B=J,E=z,O=J+K.viewWidth/p.scale;K=z+K.viewHeight/p.scale;let W=0,Y=0;for(let Q=0,aa=C.length;Q<aa;Q++){let R=C[Q],S=R.getRelativeToSurfaceXY();var na=R.getHeightWidth();let da=na.height;na=na.width;switch(u){case AI.Blockly.BLKS_HORIZONTAL:B<O?(R.moveBy(B-S.x,E-S.y),R.select(),B=G(B+na+25),da>W&&(W=da)):(E=G(E+W+25),W=da,B=J,R.moveBy(B-S.x,E-S.y),R.select(),B=G(B+na+25));break;case AI.Blockly.BLKS_VERTICAL:E<K?(R.moveBy(B-S.x,E-S.y),R.select(),
E=G(E+da+25),na>Y&&(Y=na)):(B=G(B+Y+25),Y=na,E=z,R.moveBy(B-S.x,E-S.y),R.select(),E=G(E+da+25))}}Blockly.Events.fire(y);Blockly.Events.setGroup(!1);setTimeout(function(){p.arranged_type_=q;p.arranged_latest_position_=u;p.arranged_position_=u})}let l={id:"appinventor_arrange_horizontal",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(p){return p.workspace.arranged_position_!==AI.Blockly.BLKS_HORIZONTAL?"enabled":"hidden"},displayText:Blockly.Msg.ARRANGE_H,callback:function(p,
q){h(p.workspace,q||p.workspace.arranged_type_,AI.Blockly.BLKS_HORIZONTAL)},weight:100};Blockly.ContextMenuRegistry.registry.register(l);let m={id:"appinventor_arrange_vertical",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(p){return p.workspace.arranged_position_!==AI.Blockly.BLKS_VERTICAL?"enabled":"hidden"},displayText:Blockly.Msg.ARRANGE_V,callback:function(p,q){h(p.workspace,q||p.workspace.arranged_type_,AI.Blockly.BLKS_VERTICAL)},weight:100};Blockly.ContextMenuRegistry.registry.register(m);
Blockly.ContextMenuRegistry.registry.register({id:"appinventor_sort_category",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(p){return p.workspace.arranged_type_!==AI.Blockly.BLKS_CATEGORY?"enabled":"hidden"},displayText:Blockly.Msg.SORT_C,callback:function(p){var q=AI.Blockly.BLKS_CATEGORY;null===p.workspace.arranged_latest_position_||p.workspace.arranged_latest_position_===AI.Blockly.BLKS_HORIZONTAL?l.callback(p,q):p.workspace.arranged_latest_position_===AI.Blockly.BLKS_VERTICAL&&
m.callback(p,q)},weight:100})};
AI.Blockly.ContextMenuItems.registerEnableDisableAllBlocksOption=function(){Blockly.ContextMenuRegistry.registry.register({id:"appinventor_enable_all_blocks",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(){return"enabled"},displayText:Blockly.Msg.ENABLE_ALL_BLOCKS,callback:function(a){a=a.workspace.getAllBlocks();try{Blockly.Events.setGroup(!0),a.forEach(d=>d.setEnabled(!0))}finally{Blockly.Events.setGroup(!1)}},weight:100});Blockly.ContextMenuRegistry.registry.register({id:"appinventor_disable_all_blocks",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,
preconditionFn:function(){return"enabled"},displayText:Blockly.Msg.DISABLE_ALL_BLOCKS,callback:function(a){a=a.workspace.getAllBlocks();try{Blockly.Events.setGroup(!0),a.forEach(d=>d.setEnabled(!1))}finally{Blockly.Events.setGroup(!1)}},weight:100})};
AI.Blockly.ContextMenuItems.registerCommentOptions=function(){Blockly.ContextMenuRegistry.registry.register({id:"appinventor_show_all_comments",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(){return"enabled"},displayText:Blockly.Msg.SHOW_ALL_COMMENTS,callback:function(a){a=a.workspace.getAllBlocks();try{Blockly.Events.setGroup(!0),a.forEach(d=>{let f=d.getIcon(Blockly.icons.CommentIcon.TYPE);f&&!d.isCollapsed()&&f.setBubbleVisible(!0)})}finally{Blockly.Events.setGroup(!1)}},
weight:100});Blockly.ContextMenuRegistry.registry.register({id:"appinventor_hide_all_comments",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(){return"enabled"},displayText:Blockly.Msg.HIDE_ALL_COMMENTS,callback:function(a){a=a.workspace.getAllBlocks();try{Blockly.Events.setGroup(!0),a.forEach(d=>{let f=d.getIcon(Blockly.icons.CommentIcon.TYPE);f&&!d.isCollapsed()&&f.setBubbleVisible(!1)})}finally{Blockly.Events.setGroup(!1)}},weight:100})};
AI.Blockly.ContextMenuItems.registerBackpackOptions=function(){Blockly.ContextMenuRegistry.registry.register({id:"appinventor_copy_all_blocks",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(a){return a.workspace.hasBackpack()?"enabled":"hidden"},displayText:Blockly.Msg.COPY_ALLBLOCKS,callback:function(a){a.workspace.hasBackpack()&&a.workspace.getBackpack().addAllToBackpack()},weight:100});Blockly.ContextMenuRegistry.registry.register({id:"appinventor_retrieve_from_backpack",
scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(a){return a.workspace.hasBackpack()?"enabled":"hidden"},displayText:function(a){return Blockly.Msg.BACKPACK_GET+" ("+a.workspace.getBackpack().getCount()+")"},callback:function(a){a.workspace.hasBackpack()&&a.workspace.getBackpack().pasteBackpack()},weight:100})};
AI.Blockly.ContextMenuItems.registerGridOptions=function(){Blockly.ContextMenuRegistry.registry.register({id:"appinventor_grid",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(){return"enabled"},displayText:function(a){return a.workspace.options.gridOptions.enabled?Blockly.Msg.DISABLE_GRID:Blockly.Msg.ENABLE_GRID},callback:function(a){let d=a.workspace.options.gridOptions;const f=a.workspace.options.gridPattern;d.enabled=!d.enabled;a.workspace.getGrid().setSnapToGrid(d.enabled&&
top.BlocklyPanel_getSnapEnabled());d.enabled?Blockly.common.getMainWorkspace().svgBackground_.setAttribute("style","fill: url(#"+f.id+");"):(a=Blockly.common.getMainWorkspace().getTheme().componentStyles.workspaceBackgroundColour??"white",Blockly.common.getMainWorkspace().svgBackground_.setAttribute("style",`fill: ${a};`));top.BlocklyPanel_setGridEnabled&&(top.BlocklyPanel_setGridEnabled(d.enabled),top.BlocklyPanel_saveUserSettings())},weight:100});Blockly.ContextMenuRegistry.registry.register({id:"appinventor_enable_snap",
scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(a){return a.workspace.options.gridOptions.enabled?"enabled":"hidden"},displayText:function(a){return a.workspace.getGrid().shouldSnap()?Blockly.Msg.DISABLE_SNAPPING:Blockly.Msg.ENABLE_SNAPPING},callback:function(a){a=a.workspace.getGrid();a.setSnapToGrid(!a.shouldSnap());top.BlocklyPanel_setSnapEnabled&&(top.BlocklyPanel_setSnapEnabled(a.shouldSnap()),top.BlocklyPanel_saveUserSettings())},weight:100})};
AI.Blockly.ContextMenuItems.registerHelpOption=function(){};
AI.Blockly.ContextMenuItems.registerClearUnusedBlocksOption=function(){Blockly.ContextMenuRegistry.registry.register({id:"appinventor_clear_unused_blocks",scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,preconditionFn:function(a){return a.workspace.getAllBlocks().length?"enabled":"hidden"},displayText:Blockly.Msg.REMOVE_UNUSED_BLOCKS,callback:function(a){let d=[];a.workspace.getTopBlocks().forEach(f=>{(f.previousConnection||f.outputConnection)&&d.push(f)});if(0!==d.length)try{Blockly.Events.setGroup(!0),
a.workspace.getAudioManager().play("delete"),d.forEach(f=>{f.dispose(!1)})}finally{Blockly.Events.setGroup(!1)}},weight:100})};
AI.Blockly.ContextMenuItems.registerAll=function(){AI.Blockly.ContextMenuItems.registerResetArrangementOptions();AI.Blockly.ContextMenuItems.registerExportBlocksOption();AI.Blockly.ContextMenuItems.registerWorkspaceControlsOption();AI.Blockly.ContextMenuItems.registerArrangeOptions();AI.Blockly.ContextMenuItems.registerEnableDisableAllBlocksOption();AI.Blockly.ContextMenuItems.registerCommentOptions();AI.Blockly.ContextMenuItems.registerBackpackOptions();AI.Blockly.ContextMenuItems.registerGridOptions();
AI.Blockly.ContextMenuItems.registerHelpOption();AI.Blockly.ContextMenuItems.registerClearUnusedBlocksOption();AI.Blockly.ContextMenuItems.registerGenerateYailOption();AI.Blockly.ContextMenuItems.registerExportBlockOption();AI.Blockly.ContextMenuItems.registerDoItOption();AI.Blockly.ContextMenuItems.RegisterClearDoItOption();Blockly.ContextMenuRegistry.registry.getItem("blockHelp").weight=1E3};AI.Blockly.ContextMenuItems.registerAll();Blockly.BlocklyEditor.cssRegistered=!1;
Blockly.BlocklyEditor.create=function(a,d,f,h){if(!Blockly.BlocklyEditor.cssRegistered){Blockly.BlocklyEditor.cssRegistered=!0;try{Blockly.Css.register("\n.blocklyZoom:hover, .blocklyTrash:hover, .blocklyMultiselect:hover { cursor: pointer; }\n.blocklyZoom>image, .blocklyZoom>image:hover { opacity: 1.0; }\n.blocklyMultiselect>image, .blocklyMultiselect>image:hover { opacity: 1.0; }\n")}catch(q){}}var l={toolbox:{kind:"flyoutToolbox",contents:[]},readOnly:f,rtl:h,collapse:!0,scrollbars:!0,trashcan:!0,
comments:!0,disable:!0,media:"./static/media/",grid:{spacing:"20",length:"5",snap:!1,colour:"#ccc"},zoom:{controls:!0,wheel:!0,scaleSpeed:1.1,maxScale:3,minScale:.1},plugins:{blockDragger:MultiselectBlockDragger,metricsManager:ScrollMetricsManager,connectionPreviewer:decoratePreviewer(Blockly.InsertionMarkerPreviewer),[Blockly.registry.Type.CONNECTION_CHECKER]:"CustomizableConnectionChecker"},baseBlockDragger:ScrollBlockDragger,useDoubleClick:!0,bumpNeighbours:!0,multiselectIcon:{hideIcon:!1,enabledIcon:"static/images/select.svg",
disabledIcon:"static/images/unselect.svg"},multiselectCopyPaste:{crossTab:!0,menu:!0},renderer:"geras2_renderer"},m=Blockly.inject(a,l);AI.Blockly.multiselect=Multiselect;(new AI.Blockly.multiselect(m)).init(l);LexicalVariablesPlugin.init(m);(new WorkspaceSearch(m)).init();(new ScrollOptions(m)).init({edgeScrollOptions:{oversizeBlockMargin:0,oversizeBlockThreshold:0,slowBlockSpeed:.15}});Blockly.allWorkspaces[d]=m;m.formName=d;m.screenList_=[];m.assetList_=[];m.componentDb_=new Blockly.ComponentDatabase;
m.procedureDb_=new Blockly.ProcedureDatabase(m);m.variableDb_=new Blockly.VariableDatabase;m.blocksNeedingRendering=[];m.addWarningHandler();if(!f){d=goog.dom.createElement("div");f=goog.dom.createElement("p");h=goog.dom.createElement("input");var p={frame:a,typeBlockDiv:d,inputText:h};goog.style.setElementShown(d,!1);goog.dom.classlist.add(d,"ai_type_block");goog.dom.insertChildAt(a,d,0);goog.dom.appendChild(d,f);goog.dom.appendChild(f,h);m.typeBlock_=new AI.Blockly.TypeBlock(p,m);m.addChangeListener(function(){if(this.workspace&&
!this.workspace.isDragging()){var q=m.getMetrics(),u=q.viewLeft+q.absoluteLeft,y=q.viewTop+q.absoluteTop;if(q.contentTop<y||q.contentTop+q.contentHeight>q.viewHeight+y||q.contentLeft<(l.RTL?q.viewLeft:u)||q.contentLeft+q.contentWidth>(l.RTL?q.viewWidth:q.viewWidth+u))for(var C=m.getTopBlocks(!1),K=0,X;X=C[K];K++){var M=X.getRelativeToSurfaceXY(),G=X.getHeightWidth(),J=y+25-G.height-M.y;0<J&&X.moveBy(0,J);J=y+q.viewHeight-25-M.y;0>J&&X.moveBy(0,J);J=25+u-M.x-(l.RTL?0:G.width);0<J&&X.moveBy(J,0);M=
u+q.viewWidth-25-M.x+(l.RTL?G.width:0);0>M&&X.moveBy(M,0)}}})}m.addChangeListener(function(q){q.type==Blockly.Events.BLOCK_MOVE&&q.newParentId!==q.oldParentId&&(q=m.getBlockById(q.blockId))&&q.getDescendants().forEach(function(u){if("lexical_variable_get"===u.type||"lexical_variable_set"===u.type){const y=u.getField("VAR");y.getOptions(!1);y.setValue(y.getValue());u.queueRender()}})});m.drawer_=new Blockly.Drawer(m,{scrollbars:!0});m.flyout_=m.getFlyout();m.addWarningIndicator();m.addBackpack();Blockly.browserEvents.bind(m.svgGroup_,
"focus",m,m.markFocused);m.flyout_.scrollbar_&&m.flyout_.scrollbar_.setContainerVisible(!1);m.backpack_.flyout_.scrollbar_&&m.backpack_.flyout_.scrollbar_.setContainerVisible(!1);m.flydown_.scrollbar_&&m.flydown_.scrollbar_.setContainerVisible(!1);m.injecting=!1;m.injected=!0;m.notYetRendered=!0;return m};
AI.inject=function(a,d,f=!1){f&&Blockly.common.getMainWorkspace().setTheme(Blockly.Themes.darkTheme);Blockly.common.setMainWorkspace(d);d.fireChangeListener(new AI.Events.ScreenSwitch(d.projectId,d.formName));a=top.BlocklyPanel_getGridEnabled&&top.BlocklyPanel_getGridEnabled();f=top.BlocklyPanel_getSnapEnabled&&top.BlocklyPanel_getSnapEnabled();d.setGridSettings(a,f);setTimeout(function(){module$contents$goog$array_forEach(d.blocksNeedingRendering,function(h){d.getWarningHandler().checkErrors(h);
h.render()});d.blocksNeedingRendering.splice(0);d.resizeContents();Blockly.common.svgResize(d);d.notYetRendered&&(d.notYetRendered=!1,d.scrollCenter())})};window.Blockly=Blockly;top.Blockly=Blockly;window.AI=AI;top.AI=AI;
top.document.addEventListener("mousedown",function(a){if(a.target){for(a=a.target;a;){var d=a.classList;if(d.contains("blocklyWidgetDiv")||d.contains("blocklySvg")||d.contains("gwt-TreeItem")||d.contains("blocklyDropDownDiv"))return;a=a.parentElement}Blockly.common.getMainWorkspace()&&Blockly.hideChaff()}},!1);
//# sourceMappingURL=/static/js/blockly-all.js.map
